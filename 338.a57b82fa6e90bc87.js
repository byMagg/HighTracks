"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[338],{338:(V,c,s)=>{s.r(c),s.d(c,{routes:()=>w});var u=s(5861),a=s(433),g=s(6895),l=s(4709),m=s(259),n=s(4650),_=s(7556),d=s(2607);function p(t,r){if(1&t){const i=n.EpF();n.TgZ(0,"ion-buttons",4)(1,"ion-button",5),n.NdJ("click",function(){n.CHM(i);const o=n.oxw();return n.KtG(o.logout())}),n._uU(2,"logout"),n.qZA()()}}function f(t,r){if(1&t&&(n.TgZ(0,"div",14),n._uU(1),n.qZA()),2&t){const i=n.oxw().$implicit;n.xp6(1),n.hij(" ",i.message," ")}}function x(t,r){if(1&t&&(n.ynx(0),n.YNc(1,f,2,1,"div",15),n.BQk()),2&t){const i=r.$implicit,e=n.oxw(3);let o;n.xp6(1),n.Q6J("ngIf",(null==e.formValidationLogin||null==(o=e.formValidationLogin.get("email"))?null:o.hasError(i.type))&&((null==(o=e.formValidationLogin.get("email"))?null:o.dirty)||(null==(o=e.formValidationLogin.get("email"))?null:o.touched)))}}function Z(t,r){if(1&t&&(n.TgZ(0,"div",14),n._uU(1),n.qZA()),2&t){const i=n.oxw().$implicit;n.xp6(1),n.hij(" ",i.message," ")}}function h(t,r){if(1&t&&(n.ynx(0),n.YNc(1,Z,2,1,"div",15),n.BQk()),2&t){const i=r.$implicit,e=n.oxw(3);let o;n.xp6(1),n.Q6J("ngIf",(null==(o=e.formValidationLogin.get("password"))?null:o.hasError(i.type))&&((null==(o=e.formValidationLogin.get("password"))?null:o.dirty)||(null==(o=e.formValidationLogin.get("password"))?null:o.touched)))}}function v(t,r){if(1&t){const i=n.EpF();n.TgZ(0,"article")(1,"form",6),n.NdJ("ngSubmit",function(){n.CHM(i);const o=n.oxw(2);return n.KtG(o.tryLogin(o.formValidationLogin.value))}),n.TgZ(2,"h2"),n._uU(3,"Inicio de sesi\xf3n"),n.qZA(),n.TgZ(4,"ion-item")(5,"ion-label",7),n._uU(6,"Email: "),n.qZA(),n._UZ(7,"ion-input",8),n.qZA(),n.TgZ(8,"div"),n.YNc(9,x,2,1,"ng-container",9),n.qZA(),n.TgZ(10,"ion-item")(11,"ion-label",7),n._uU(12,"Contrase\xf1a: "),n.qZA(),n._UZ(13,"ion-input",10),n.qZA(),n.TgZ(14,"div"),n.YNc(15,h,2,1,"ng-container",9),n.qZA(),n.TgZ(16,"div",11)(17,"ion-button",12),n._uU(18,"Iniciar sesi\xf3n"),n.qZA()(),n.TgZ(19,"div",13)(20,"ion-label",14),n._uU(21),n.qZA()()()()}if(2&t){const i=n.oxw(2);n.xp6(1),n.Q6J("formGroup",i.formValidationLogin),n.xp6(8),n.Q6J("ngForOf",i.formValidationMessages.email),n.xp6(6),n.Q6J("ngForOf",i.formValidationMessages.password),n.xp6(2),n.Q6J("disabled",!i.formValidationLogin.valid),n.xp6(4),n.Oqu(i.errorMessage)}}function L(t,r){if(1&t&&(n.TgZ(0,"div",14),n._uU(1),n.qZA()),2&t){const i=n.oxw().$implicit;n.xp6(1),n.hij(" ",i.message," ")}}function T(t,r){if(1&t&&(n.ynx(0),n.YNc(1,L,2,1,"div",15),n.BQk()),2&t){const i=r.$implicit,e=n.oxw(3);let o;n.xp6(1),n.Q6J("ngIf",(null==e.formValidationSignup||null==(o=e.formValidationSignup.get("email"))?null:o.hasError(i.type))&&((null==(o=e.formValidationSignup.get("email"))?null:o.dirty)||(null==(o=e.formValidationSignup.get("email"))?null:o.touched)))}}function A(t,r){if(1&t&&(n.TgZ(0,"div",14),n._uU(1),n.qZA()),2&t){const i=n.oxw().$implicit;n.xp6(1),n.hij(" ",i.message," ")}}function y(t,r){if(1&t&&(n.ynx(0),n.YNc(1,A,2,1,"div",15),n.BQk()),2&t){const i=r.$implicit,e=n.oxw(3);let o;n.xp6(1),n.Q6J("ngIf",(null==(o=e.formValidationSignup.get("password"))?null:o.hasError(i.type))&&((null==(o=e.formValidationSignup.get("password"))?null:o.dirty)||(null==(o=e.formValidationSignup.get("password"))?null:o.touched)))}}function I(t,r){if(1&t){const i=n.EpF();n.TgZ(0,"article")(1,"form",6),n.NdJ("ngSubmit",function(){n.CHM(i);const o=n.oxw(2);return n.KtG(o.trySignup(o.formValidationSignup.value))}),n.TgZ(2,"h2"),n._uU(3,"Registro"),n.qZA(),n.TgZ(4,"ion-item")(5,"ion-label",7),n._uU(6,"Email: "),n.qZA(),n._UZ(7,"ion-input",8),n.qZA(),n.TgZ(8,"div"),n.YNc(9,T,2,1,"ng-container",9),n.qZA(),n.TgZ(10,"ion-item")(11,"ion-label",7),n._uU(12,"Contrase\xf1a: "),n.qZA(),n._UZ(13,"ion-input",10),n.qZA(),n.TgZ(14,"div"),n.YNc(15,y,2,1,"ng-container",9),n.qZA(),n.TgZ(16,"div",11)(17,"ion-button",12),n._uU(18,"Crear Cuenta"),n.qZA()(),n.TgZ(19,"div",13)(20,"ion-label",14),n._uU(21),n.qZA()()()()}if(2&t){const i=n.oxw(2);n.xp6(1),n.Q6J("formGroup",i.formValidationSignup),n.xp6(8),n.Q6J("ngForOf",i.formValidationMessages.email),n.xp6(6),n.Q6J("ngForOf",i.formValidationMessages.password),n.xp6(2),n.Q6J("disabled",!i.formValidationSignup.valid),n.xp6(4),n.Oqu(i.errorMessage)}}function b(t,r){if(1&t&&(n.TgZ(0,"section"),n.YNc(1,v,22,5,"article",3),n.YNc(2,I,22,5,"article",3),n.qZA()),2&t){const i=n.oxw();n.xp6(1),n.Q6J("ngIf",i.formValidationLogin),n.xp6(1),n.Q6J("ngIf",i.formValidationSignup)}}const w=[{path:"",component:(()=>{class t{constructor(i,e,o){this.authService=i,this.formBuilder=e,this.router=o,this.errorMessage="",this.logged=this.authService.checkLogged(),this.formValidationMessages={email:[{type:"required",message:"El email es un campo obligatorio."},{type:"pattern",message:"El formato del email no es correcto."}],password:[{type:"required",message:"La contrase\xf1a es un campo obligatorio."},{type:"minlength",message:"La l\xf3ngitud m\xednima de una contrase\xf1a es 6 caracteres."}]}}ngOnInit(){this.formValidationLogin=this.formBuilder.group({email:new a.NI("",a.kI.compose([a.kI.required,a.kI.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")])),password:new a.NI("",a.kI.compose([a.kI.minLength(6),a.kI.required]))}),this.formValidationSignup=this.formBuilder.group({email:new a.NI("",a.kI.compose([a.kI.required,a.kI.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")])),password:new a.NI("",a.kI.compose([a.kI.minLength(6),a.kI.required]))})}trySignup(i){this.authService.doSignup(i).then(e=>{console.log(e),this.errorMessage="",this.router.navigate(["/"])},e=>{console.log(e),this.errorMessage=e.message})}tryLogin(i){var e=this;return(0,u.Z)(function*(){try{yield e.authService.doLogin(i),e.router.navigate(["/"])}catch(o){o instanceof m.ZR&&("auth/wrong-password"==o.code&&(e.errorMessage="Contrase\xf1a incorrecta"),"auth/user-not-found"==o.code&&(e.errorMessage="Usuario no encontrado"))}})()}logout(){var i=this;return(0,u.Z)(function*(){i.authService.doLogout().then(e=>{i.router.navigate(["/"]),console.log(e)},e=>{console.log(e)})})()}}return t.\u0275fac=function(i){return new(i||t)(n.Y36(_.e),n.Y36(a.qu),n.Y36(d.F0))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-login"]],standalone:!0,features:[n.jDz],decls:9,vars:2,consts:[["slot","start"],["defaultHref","/"],["slot","end",4,"ngIf"],[4,"ngIf"],["slot","end"],[3,"click"],[1,"form",3,"formGroup","ngSubmit"],["position","floating","color","primary"],["type","text","aria-label","Email: ","formControlName","email"],[4,"ngFor","ngForOf"],["type","password","aria-label","Contrase\xf1a: ","formControlName","password"],[1,"div-button-login"],["type","submit",3,"disabled"],[1,"div-label-error"],[1,"error-message"],["class","error-message",4,"ngIf"]],template:function(i,e){1&i&&(n.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),n._UZ(3,"ion-back-button",1),n.qZA(),n.TgZ(4,"ion-title"),n._uU(5,"Login"),n.qZA(),n.YNc(6,p,3,0,"ion-buttons",2),n.qZA()(),n.TgZ(7,"ion-content"),n.YNc(8,b,3,2,"section",3),n.qZA()),2&i&&(n.xp6(6),n.Q6J("ngIf",e.logged),n.xp6(2),n.Q6J("ngIf",!e.logged))},dependencies:[g.ez,g.sg,g.O5,a.u5,a._Y,a.JJ,a.JL,l.Pc,l.oU,l.YG,l.Sm,l.W2,l.Gu,l.pK,l.Ie,l.Q$,l.wd,l.sr,l.j9,l.cs,a.UX,a.sg,a.u],styles:[".form[_ngcontent-%COMP%]{margin-top:50px}.label-title[_ngcontent-%COMP%]{font-weight:500;margin-bottom:20px}.div-button-login[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.div-label-error[_ngcontent-%COMP%]{text-align:center;margin-top:10px}.error-message[_ngcontent-%COMP%]{color:var(--ion-color-danger);font-size:smaller;padding:10px}section[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;align-items:center;height:100%}article[_ngcontent-%COMP%]{min-width:300px;height:300px}"]}),t})()}]}}]);