"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9077],{9077:(E,p,_)=>{_.r(p),_.d(p,{EditPage:()=>x});var g=_(5861),u=_(6895),c=_(433),a=_(650),t=_(4650),m=_(7542),d=_(1194);function f(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"ion-chip")(1,"ion-label"),t._uU(2),t.qZA(),t.TgZ(3,"ion-icon",16),t.NdJ("click",function(){const r=t.CHM(e).index,l=t.oxw(2);return t.KtG(l.removeArtist(r))}),t.qZA()()}if(2&o){const e=s.$implicit;t.xp6(2),t.Oqu(e.name)}}function h(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"ion-chip")(1,"ion-label"),t._uU(2),t.qZA(),t.TgZ(3,"ion-icon",16),t.NdJ("click",function(){const r=t.CHM(e).index,l=t.oxw(2);return t.KtG(l.removeImage(r))}),t.qZA()()}if(2&o){const e=s.$implicit;t.xp6(2),t.Oqu(e.url)}}function k(o,s){if(1&o&&t._UZ(0,"ion-datetime",17),2&o){const e=t.oxw(2);t.Q6J("value",e.track.album.release_date)}}function T(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"form")(1,"ion-item")(2,"ion-label",7),t._uU(3,"Nombre"),t.qZA(),t.TgZ(4,"ion-input",8),t.NdJ("ngModelChange",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.track.name=i)}),t.qZA()(),t.TgZ(5,"ion-label",9),t._uU(6,"Artist"),t.qZA(),t.TgZ(7,"ion-item"),t.YNc(8,f,4,1,"ion-chip",10),t.TgZ(9,"ion-input",11),t.NdJ("ngModelChange",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.artist=i)})("keyup.Space",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.handleArtist(i.artist))})("keyup.enter",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.handleArtist(i.artist))}),t.qZA()(),t.TgZ(10,"ion-item"),t.YNc(11,h,4,1,"ion-chip",10),t.TgZ(12,"ion-input",12),t.NdJ("ngModelChange",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.image=i)})("keyup.Space",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.handleImage(i.image))})("keyup.enter",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.handleImage(i.image))}),t.qZA()(),t.TgZ(13,"ion-item"),t._UZ(14,"ion-datetime-button",13),t.TgZ(15,"ion-modal",14),t.YNc(16,k,1,1,"ng-template"),t.qZA()(),t.TgZ(17,"ion-button",15),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.updateTrack())}),t._uU(18,"Update"),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(4),t.Q6J("ngModel",e.track.name),t.xp6(4),t.Q6J("ngForOf",e.track.album.artists),t.xp6(1),t.Q6J("ngModel",e.artist),t.xp6(2),t.Q6J("ngForOf",e.track.album.images),t.xp6(1),t.Q6J("ngModel",e.image),t.xp6(3),t.Q6J("keepContentsMounted",!0)}}let x=(()=>{class o{constructor(e,n,i){this.apiService=e,this.route=n,this.toastController=i,this.artist="",this.image="",this.route.params.subscribe(r=>{this.trackId=r.id,console.log(this.trackId),this.trackId&&this.apiService.getTrack(this.trackId).subscribe(l=>{this.track=l,console.log(this.track)})})}handleArtist(e){var n;""!=e.trim()&&(null===(n=this.track)||void 0===n||n.album.artists.push({name:e}),this.artist="")}handleImage(e){var n;""!=e.trim()&&(null===(n=this.track)||void 0===n||n.album.images.push({url:e}),this.image="")}removeArtist(e){var n;null===(n=this.track)||void 0===n||n.album.artists.splice(e,1)}removeImage(e){var n;null===(n=this.track)||void 0===n||n.album.images.splice(e,1)}updateTrack(){var e=this;return(0,g.Z)(function*(){e.track&&(yield e.apiService.updateTrack(e.track))&&e.toastController.create({message:"Canci\xf3n actualizada correctamente",duration:2e3}).then(i=>i.present())})()}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.j),t.Y36(d.gz),t.Y36(a.yF))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-edit"]],standalone:!0,features:[t.jDz],decls:12,vars:4,consts:[[3,"translucent"],["slot","start"],["defaultHref","/tracks"],[3,"fullscreen"],["collapse","condense"],["size","large"],[4,"ngIf"],["position","floating"],["type","text","aria-label","name","name","name",3,"ngModel","ngModelChange"],["for","artists","position","floating"],[4,"ngFor","ngForOf"],["type","text","name","artists","id","artists",3,"ngModel","ngModelChange","keyup.Space","keyup.enter"],["type","text","name","images","id","images",3,"ngModel","ngModelChange","keyup.Space","keyup.enter"],["datetime","datetime"],[3,"keepContentsMounted"],["type","submit",3,"click"],["name","close-outline",3,"click"],["id","datetime","name","date",3,"value"]],template:function(e,n){1&e&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t._uU(3),t.qZA(),t.TgZ(4,"ion-buttons",1),t._UZ(5,"ion-back-button",2),t.qZA()()(),t.TgZ(6,"ion-content",3)(7,"ion-header",4)(8,"ion-toolbar")(9,"ion-title",5),t._uU(10,"edit"),t.qZA()()(),t.YNc(11,T,19,6,"form",6),t.qZA()),2&e&&(t.Q6J("translucent",!0),t.xp6(3),t.Oqu(null==n.track?null:n.track.name),t.xp6(3),t.Q6J("fullscreen",!0),t.xp6(5),t.Q6J("ngIf",n.track))},dependencies:[a.Pc,a.oU,a.YG,a.Sm,a.hM,a.W2,a.x4,a.Mj,a.Gu,a.gu,a.pK,a.Ie,a.Q$,a.wd,a.sr,a.ki,a.QI,a.j9,a.cs,u.ez,u.sg,u.O5,c.u5,c._Y,c.JJ,c.JL,c.On,c.F]}),o})()}}]);