(self.webpackChunkapp=self.webpackChunkapp||[]).push([[179],{6217:(In,Et,j)=>{"use strict";j.d(Et,{nm:()=>se});var _=j(4976);j(4650),j(259);var Y=j(5861),it=j(6881),et=j(4859),Pt=j(2090),Ue=j(1877);const ke=new Map,Ne={activated:!1,tokenObservers:[]},De={initialized:!1,enabled:!1};function je(mt){return ke.get(mt)||Object.assign({},Ne)}function Dt(){return De}const ht="https://content-firebaseappcheck.googleapis.com/v1",Fe="exchangeDebugToken",Ve={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class ft{constructor(at,xt,tn,dn,fr){if(this.operation=at,this.retryPolicy=xt,this.getWaitDuration=tn,this.lowerBound=dn,this.upperBound=fr,this.pending=null,this.nextErrorWaitInterval=dn,dn>fr)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(at){var xt=this;return(0,Y.Z)(function*(){xt.stop();try{xt.pending=new Pt.BH,yield function wt(mt){return new Promise(at=>{setTimeout(at,mt)})}(xt.getNextRun(at)),xt.pending.resolve(),yield xt.pending.promise,xt.pending=new Pt.BH,yield xt.operation(),xt.pending.resolve(),yield xt.pending.promise,xt.process(!0).catch(()=>{})}catch(tn){xt.retryPolicy(tn)?xt.process(!1).catch(()=>{}):xt.stop()}})()}getNextRun(at){if(at)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const xt=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),xt}}}const zt=new Pt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function gn(mt,at){return On.apply(this,arguments)}function On(){return(On=(0,Y.Z)(function*({url:mt,body:at},xt){const tn={"Content-Type":"application/json"},dn=xt.getImmediate({optional:!0});if(dn){const _i=yield dn.getHeartbeatsHeader();_i&&(tn["X-Firebase-Client"]=_i)}const fr={method:"POST",body:JSON.stringify(at),headers:tn};let Er,Ir;try{Er=yield fetch(mt,fr)}catch(_i){throw zt.create("fetch-network-error",{originalErrorMessage:null==_i?void 0:_i.message})}if(200!==Er.status)throw zt.create("fetch-status-error",{httpStatus:Er.status});try{Ir=yield Er.json()}catch(_i){throw zt.create("fetch-parse-error",{originalErrorMessage:null==_i?void 0:_i.message})}const ei=Ir.ttl.match(/^([\d.]+)(s)$/);if(!ei||!ei[2]||isNaN(Number(ei[1])))throw zt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Ir.ttl}`});const vs=1e3*Number(ei[1]),Oo=Date.now();return{token:Ir.token,expireTimeMillis:Oo+vs,issuedAtTimeMillis:Oo}})).apply(this,arguments)}const Cn="firebase-app-check-database",hr=1,_r="firebase-app-check-store";let bn=null;function Gn(mt,at){return qn.apply(this,arguments)}function qn(){return(qn=(0,Y.Z)(function*(mt,at){const tn=(yield function zn(){return bn||(bn=new Promise((mt,at)=>{try{const xt=indexedDB.open(Cn,hr);xt.onsuccess=tn=>{mt(tn.target.result)},xt.onerror=tn=>{var dn;at(zt.create("storage-open",{originalErrorMessage:null===(dn=tn.target.error)||void 0===dn?void 0:dn.message}))},xt.onupgradeneeded=tn=>{0===tn.oldVersion&&tn.target.result.createObjectStore(_r,{keyPath:"compositeKey"})}}catch(xt){at(zt.create("storage-open",{originalErrorMessage:null==xt?void 0:xt.message}))}}),bn)}()).transaction(_r,"readwrite"),fr=tn.objectStore(_r).put({compositeKey:mt,value:at});return new Promise((Er,Ir)=>{fr.onsuccess=ei=>{Er()},tn.onerror=ei=>{var vs;Ir(zt.create("storage-set",{originalErrorMessage:null===(vs=ei.target.error)||void 0===vs?void 0:vs.message}))}})})).apply(this,arguments)}const Jr=new Ue.Yd("@firebase/app-check");function zr(mt,at){return(0,Pt.hl)()?function Cr(mt,at){return Gn(function on(mt){return`${mt.options.appId}-${mt.name}`}(mt),at)}(mt,at).catch(xt=>{Jr.warn(`Failed to write token to IndexedDB. Error: ${xt}`)}):Promise.resolve()}function ur(){return lr.apply(this,arguments)}function lr(){return(lr=(0,Y.Z)(function*(){const mt=Dt();if(mt.enabled&&mt.token)return mt.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Ai={error:"UNKNOWN_ERROR"};function mr(mt){return Pt.US.encodeString(JSON.stringify(mt),!1)}function Kt(mt){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,Y.Z)(function*(mt,at=!1){const xt=mt.app;!function kt(mt){if(!je(mt).activated)throw zt.create("use-before-activation",{appName:mt.name})}(xt);const tn=je(xt);let fr,dn=tn.token;if(dn&&!ut(dn)&&(tn.token=void 0,dn=void 0),!dn){const ei=yield tn.cachedTokenPromise;ei&&(ut(ei)?dn=ei:yield zr(xt,void 0))}if(!at&&dn&&ut(dn))return{token:dn.token};let Ir,Er=!1;if(function gi(){return Dt().enabled}()){tn.exchangeTokenPromise||(tn.exchangeTokenPromise=gn(function cn(mt,at){const{projectId:xt,appId:tn,apiKey:dn}=mt.options;return{url:`${ht}/projects/${xt}/apps/${tn}:${Fe}?key=${dn}`,body:{debug_token:at}}}(xt,yield ur()),mt.heartbeatServiceProvider).finally(()=>{tn.exchangeTokenPromise=void 0}),Er=!0);const ei=yield tn.exchangeTokenPromise;return yield zr(xt,ei),tn.token=ei,{token:ei.token}}try{tn.exchangeTokenPromise||(tn.exchangeTokenPromise=tn.provider.getToken().finally(()=>{tn.exchangeTokenPromise=void 0}),Er=!0),dn=yield je(xt).exchangeTokenPromise}catch(ei){"appCheck/throttled"===ei.code?Jr.warn(ei.message):Jr.error(ei),fr=ei}return dn?fr?Ir=ut(dn)?{token:dn.token,internalError:fr}:un(fr):(Ir={token:dn.token},tn.token=dn,yield zr(xt,dn)):Ir=un(fr),Er&&function Ot(mt,at){const xt=je(mt).tokenObservers;for(const tn of xt)try{"EXTERNAL"===tn.type&&null!=at.error?tn.error(at.error):tn.next(at)}catch{}}(xt,Ir),Ir})).apply(this,arguments)}function we(mt,at){const xt=je(mt),tn=xt.tokenObservers.filter(dn=>dn.next!==at);0===tn.length&&xt.tokenRefresher&&xt.tokenRefresher.isRunning()&&xt.tokenRefresher.stop(),xt.tokenObservers=tn}function Ie(mt){const{app:at}=mt,xt=je(at);let tn=xt.tokenRefresher;tn||(tn=function qe(mt){const{app:at}=mt;return new ft((0,Y.Z)(function*(){let tn;if(tn=je(at).token?yield Kt(mt,!0):yield Kt(mt),tn.error)throw tn.error;if(tn.internalError)throw tn.internalError}),()=>!0,()=>{const xt=je(at);if(xt.token){let tn=xt.token.issuedAtTimeMillis+.5*(xt.token.expireTimeMillis-xt.token.issuedAtTimeMillis)+3e5;return tn=Math.min(tn,xt.token.expireTimeMillis-3e5),Math.max(0,tn-Date.now())}return 0},Ve.RETRIAL_MIN_WAIT,Ve.RETRIAL_MAX_WAIT)}(mt),xt.tokenRefresher=tn),!tn.isRunning()&&xt.isTokenAutoRefreshEnabled&&tn.start()}function ut(mt){return mt.expireTimeMillis-Date.now()>0}function un(mt){return{token:mr(Ai),error:mt}}class ot{constructor(at,xt){this.app=at,this.heartbeatServiceProvider=xt}_delete(){const{tokenObservers:at}=je(this.app);for(const xt of at)we(this.app,xt.next);return Promise.resolve()}}const kr="app-check-internal";!function Ci(){(0,it._registerComponent)(new et.wA("app-check",mt=>function Ge(mt,at){return new ot(mt,at)}(mt.getProvider("app").getImmediate(),mt.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((mt,at,xt)=>{mt.getProvider(kr).initialize()})),(0,it._registerComponent)(new et.wA(kr,mt=>function ve(mt){return{getToken:at=>Kt(mt,at),addTokenListener:at=>function Yt(mt,at,xt,tn){const{app:dn}=mt,fr=je(dn);if(fr.tokenObservers=[...fr.tokenObservers,{next:xt,error:tn,type:at}],fr.token&&ut(fr.token)){const Ir=fr.token;Promise.resolve().then(()=>{xt({token:Ir.token}),Ie(mt)}).catch(()=>{})}fr.cachedTokenPromise.then(()=>Ie(mt))}(mt,"INTERNAL",at),removeTokenListener:at=>we(mt.app,at)}}(mt.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,it.registerVersion)("@firebase/app-check","0.7.0")}();class se{constructor(){return(0,_.vb)("app-check")}}typeof window<"u"&&window},1205:(In,Et,j)=>{"use strict";j.d(Et,{zQ:()=>ht,ww:()=>Mt,rT:()=>De,f7:()=>gt,L6:()=>ke,_Q:()=>Ne,lh:()=>je,Qv:()=>Ue,nw:()=>Dt});var _=j(4650),m=j(7579),ee=j(9646),ce=j(9751),$e=j(8996),Se=j(6451),_e=j(5363),Me=j(3900),ze=j(4004),ye=j(6063);class ae extends m.x{constructor(Fe=1/0,Ve=1/0,Be=ye.l){super(),this._bufferSize=Fe,this._windowTime=Ve,this._timestampProvider=Be,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Ve===1/0,this._bufferSize=Math.max(1,Fe),this._windowTime=Math.max(1,Ve)}next(Fe){const{isStopped:Ve,_buffer:Be,_infiniteTimeWindow:ft,_timestampProvider:wt,_windowTime:nn}=this;Ve||(Be.push(Fe),!ft&&Be.push(wt.now()+nn)),this._trimBuffer(),super.next(Fe)}_subscribe(Fe){this._throwIfClosed(),this._trimBuffer();const Ve=this._innerSubscribe(Fe),{_infiniteTimeWindow:Be,_buffer:ft}=this,wt=ft.slice();for(let nn=0;nn<wt.length&&!Fe.closed;nn+=Be?1:2)Fe.next(wt[nn]);return this._checkFinalizedStatuses(Fe),Ve}_trimBuffer(){const{_bufferSize:Fe,_timestampProvider:Ve,_buffer:Be,_infiniteTimeWindow:ft}=this,wt=(ft?1:2)*Fe;if(Fe<1/0&&wt<Be.length&&Be.splice(0,Be.length-wt),!ft){const nn=Ve.now();let zt=0;for(let Dn=1;Dn<Be.length&&Be[Dn]<=nn;Dn+=2)zt=Dn;zt&&Be.splice(0,zt+1)}}}var Ee=j(3099);function Ke(yt,Fe,Ve){let Be,ft=!1;return yt&&"object"==typeof yt?({bufferSize:Be=1/0,windowTime:Fe=1/0,refCount:ft=!1,scheduler:Ve}=yt):Be=null!=yt?yt:1/0,(0,Ee.B)({connector:()=>new ae(Be,Fe,Ve),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:ft})}var We=j(590),ct=j(576);function At(yt,Fe){return(0,ct.m)(Fe)?(0,Me.w)(()=>yt,Fe):(0,Me.w)(()=>yt)}var xe=j(9468),Re=j(9300),de=j(4976),_t=j(2011),Y=j(6895),it=j(6217),et=j(9260);const Ue=new _.OlP("angularfire2.auth.use-emulator"),ke=new _.OlP("angularfire2.auth.settings"),Ne=new _.OlP("angularfire2.auth.tenant-id"),De=new _.OlP("angularfire2.auth.langugage-code"),je=new _.OlP("angularfire2.auth.use-device-language"),gt=new _.OlP("angularfire.auth.persistence"),Dt=(yt,Fe,Ve,Be,ft,wt,nn,zt)=>(0,_t.cc)(`${yt.name}.auth`,"AngularFireAuth",yt.name,()=>{const Dn=Fe.runOutsideAngular(()=>yt.auth());if(Ve&&Dn.useEmulator(...Ve),Be&&(Dn.tenantId=Be),Dn.languageCode=ft,wt&&Dn.useDeviceLanguage(),nn)for(const[kt,Ae]of Object.entries(nn))Dn.settings[kt]=Ae;return zt&&Dn.setPersistence(zt),Dn},[Ve,Be,ft,wt,nn,zt]);let ht=(()=>{class yt{constructor(Ve,Be,ft,wt,nn,zt,Dn,kt,Ae,St,gn,On){const Yn=new m.x,xn=(0,ee.of)(void 0).pipe((0,_e.Q)(nn.outsideAngular),(0,Me.w)(()=>wt.runOutsideAngular(()=>Promise.resolve().then(j.bind(j,3042)))),(0,ze.U)(()=>(0,_t.on)(Ve,wt,Be)),(0,ze.U)(cn=>Dt(cn,wt,zt,kt,Ae,St,Dn,gn)),Ke({bufferSize:1,refCount:!1}));if((0,Y.PM)(ft))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ee.of)(null);else{xn.pipe((0,We.P)()).subscribe();const Cn=xn.pipe((0,Me.w)(tr=>tr.getRedirectResult().then(bn=>bn,()=>null)),de.iC,Ke({bufferSize:1,refCount:!1})),hr=xn.pipe((0,Me.w)(tr=>new ce.y(bn=>({unsubscribe:wt.runOutsideAngular(()=>tr.onAuthStateChanged(zn=>bn.next(zn),zn=>bn.error(zn),()=>bn.complete()))})))),_r=xn.pipe((0,Me.w)(tr=>new ce.y(bn=>({unsubscribe:wt.runOutsideAngular(()=>tr.onIdTokenChanged(zn=>bn.next(zn),zn=>bn.error(zn),()=>bn.complete()))}))));this.authState=Cn.pipe(At(hr),(0,xe.R)(nn.outsideAngular),(0,_e.Q)(nn.insideAngular)),this.user=Cn.pipe(At(_r),(0,xe.R)(nn.outsideAngular),(0,_e.Q)(nn.insideAngular)),this.idToken=this.user.pipe((0,Me.w)(tr=>tr?(0,$e.D)(tr.getIdToken()):(0,ee.of)(null))),this.idTokenResult=this.user.pipe((0,Me.w)(tr=>tr?(0,$e.D)(tr.getIdTokenResult()):(0,ee.of)(null))),this.credential=(0,Se.T)(Cn,Yn,this.authState.pipe((0,Re.h)(tr=>!tr))).pipe((0,ze.U)(tr=>null!=tr&&tr.user?tr:null),(0,xe.R)(nn.outsideAngular),(0,_e.Q)(nn.insideAngular))}return(0,_t.pX)(this,xn,wt,{spy:{apply:(cn,Cn,hr)=>{(cn.startsWith("signIn")||cn.startsWith("createUser"))&&hr.then(_r=>Yn.next(_r))}}})}}return yt.\u0275fac=function(Ve){return new(Ve||yt)(_.LFG(_t.Dh),_.LFG(_t.xv,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(de.HU),_.LFG(Ue,8),_.LFG(ke,8),_.LFG(Ne,8),_.LFG(De,8),_.LFG(je,8),_.LFG(gt,8),_.LFG(it.nm,8))},yt.\u0275prov=_.Yz7({token:yt,factory:yt.\u0275fac,providedIn:"any"}),yt})(),Mt=(()=>{class yt{constructor(){et.Z.registerVersion("angularfire",de.q4.full,"auth-compat")}}return yt.\u0275fac=function(Ve){return new(Ve||yt)},yt.\u0275mod=_.oAB({type:yt}),yt.\u0275inj=_.cJS({providers:[ht]}),yt})()},1762:(In,Et,j)=>{"use strict";j.d(Et,{ST:()=>Cp,yb:()=>d_});var _=j(4650),m=j(4986),ee=j(9751),ce=j(8996),$e=j(9646),Se=j(4976),_e=j(8675),Me=j(4482),ze=j(5403);function ye(){return(0,Me.e)((r,e)=>{let t,s=!1;r.subscribe((0,ze.x)(e,c=>{const f=t;t=c,s&&e.next([f,c]),s=!0}))})}var ke,ae=j(4004),Ee=j(5026),Ke=j(1884),We=j(9300),ct=j(2011),At=j(6895),Re=(j(3042),j(3942)),de=j(5861),_t=j(6881),Y=j(4859),it=j(1877),et=j(2090),Pt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ue={},Ne=Ne||{},De=Pt||self;function je(){}function gt(r){var e=typeof r;return"array"==(e="object"!=e?e:r?Array.isArray(r)?"array":e:"null")||"object"==e&&"number"==typeof r.length}function Dt(r){var e=typeof r;return"object"==e&&null!=r||"function"==e}var Mt="closure_uid_"+(1e9*Math.random()>>>0),yt=0;function Fe(r,e,t){return r.call.apply(r.bind,arguments)}function Ve(r,e,t){if(!r)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(c,s),r.apply(e,c)}}return function(){return r.apply(e,arguments)}}function Be(r,e,t){return(Be=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Fe:Ve).apply(null,arguments)}function ft(r,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),r.apply(this,s)}}function wt(r,e){function t(){}t.prototype=e.prototype,r.$=e.prototype,r.prototype=new t,r.prototype.constructor=r,r.ac=function(s,c,f){for(var E=Array(arguments.length-2),k=2;k<arguments.length;k++)E[k-2]=arguments[k];return e.prototype[c].apply(s,E)}}function nn(){this.s=this.s,this.o=this.o}nn.prototype.s=!1,nn.prototype.ra=function(){!this.s&&(this.s=!0,this.N(),0)&&function ht(r){Object.prototype.hasOwnProperty.call(r,Mt)&&r[Mt]||(r[Mt]=++yt)}(this)},nn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Dn=Array.prototype.indexOf?function(r,e){return Array.prototype.indexOf.call(r,e,void 0)}:function(r,e){if("string"==typeof r)return"string"!=typeof e||1!=e.length?-1:r.indexOf(e,0);for(let t=0;t<r.length;t++)if(t in r&&r[t]===e)return t;return-1};function kt(r){const e=r.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=r[s];return t}return[]}function Ae(r,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(gt(s)){const c=r.length||0,f=s.length||0;r.length=c+f;for(let E=0;E<f;E++)r[c+E]=s[E]}else r.push(s)}}function St(r,e){this.type=r,this.g=this.target=e,this.defaultPrevented=!1}St.prototype.h=function(){this.defaultPrevented=!0};var gn=function(){if(!De.addEventListener||!Object.defineProperty)return!1;var r=!1,e=Object.defineProperty({},"passive",{get:function(){r=!0}});try{De.addEventListener("test",je,e),De.removeEventListener("test",je,e)}catch{}return r}();function On(r){return/^[\s\xa0]*$/.test(r)}var Yn=String.prototype.trim?function(r){return r.trim()}:function(r){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(r)[1]};function xn(r,e){return r<e?-1:r>e?1:0}function cn(){var r=De.navigator;return r&&(r=r.userAgent)?r:""}function Cn(r){return-1!=cn().indexOf(r)}function hr(r){return hr[" "](r),r}function _r(r,e,t){return Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=t(e)}hr[" "]=je;var Gn,r,tr=Cn("Opera"),bn=Cn("Trident")||Cn("MSIE"),zn=Cn("Edge"),yi=zn||bn,Cr=Cn("Gecko")&&!(-1!=cn().toLowerCase().indexOf("webkit")&&!Cn("Edge"))&&!(Cn("Trident")||Cn("MSIE"))&&!Cn("Edge"),di=-1!=cn().toLowerCase().indexOf("webkit")&&!Cn("Edge");function wi(){var r=De.document;return r?r.documentMode:void 0}e:{var qn="",ln=(r=cn(),Cr?/rv:([^\);]+)(\)|;)/.exec(r):zn?/Edge\/([\d\.]+)/.exec(r):bn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(r):di?/WebKit\/(\S+)/.exec(r):tr?/(?:Version)[ \/]?(\S+)/.exec(r):void 0);if(ln&&(qn=ln?ln[1]:""),bn){var yn=wi();if(null!=yn&&yn>parseFloat(qn)){Gn=String(yn);break e}}Gn=qn}var on={},zr=De.document&&bn&&(wi()||parseInt(Gn,10))||void 0;function pi(r,e){if(St.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r){var t=this.type=r.type,s=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=e,e=r.relatedTarget){if(Cr){e:{try{hr(e.nodeName);var c=!0;break e}catch{}c=!1}c||(e=null)}}else"mouseover"==t?e=r.fromElement:"mouseout"==t&&(e=r.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType="string"==typeof r.pointerType?r.pointerType:Lr[r.pointerType]||"",this.state=r.state,this.i=r,r.defaultPrevented&&pi.$.h.call(this)}}wt(pi,St);var Lr={2:"touch",3:"pen",4:"mouse"};pi.prototype.h=function(){pi.$.h.call(this);var r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var gi="closure_listenable_"+(1e6*Math.random()|0),ur=0;function lr(r,e,t,s,c){this.listener=r,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.la=c,this.key=++ur,this.fa=this.ia=!1}function yr(r){r.fa=!0,r.listener=null,r.proxy=null,r.src=null,r.la=null}function Ai(r,e,t){for(const s in r)e.call(t,r[s],s,r)}function mr(r){const e={};for(const t in r)e[t]=r[t];return e}const Kt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ze(r,e){let t,s;for(let c=1;c<arguments.length;c++){for(t in s=arguments[c],s)r[t]=s[t];for(let f=0;f<Kt.length;f++)t=Kt[f],Object.prototype.hasOwnProperty.call(s,t)&&(r[t]=s[t])}}function nt(r){this.src=r,this.g={},this.h=0}function en(r,e){var t=e.type;if(t in r.g){var f,s=r.g[t],c=Dn(s,e);(f=0<=c)&&Array.prototype.splice.call(s,c,1),f&&(yr(e),0==r.g[t].length&&(delete r.g[t],r.h--))}}function Yt(r,e,t,s){for(var c=0;c<r.length;++c){var f=r[c];if(!f.fa&&f.listener==e&&f.capture==!!t&&f.la==s)return c}return-1}nt.prototype.add=function(r,e,t,s,c){var f=r.toString();(r=this.g[f])||(r=this.g[f]=[],this.h++);var E=Yt(r,e,s,c);return-1<E?(e=r[E],t||(e.ia=!1)):((e=new lr(e,this.src,f,!!s,c)).ia=t,r.push(e)),e};var we="closure_lm_"+(1e6*Math.random()|0),Ie={};function qe(r,e,t,s,c){if(s&&s.once)return un(r,e,t,s,c);if(Array.isArray(e)){for(var f=0;f<e.length;f++)qe(r,e[f],t,s,c);return null}return t=Ce(t),r&&r[gi]?r.O(e,t,Dt(s)?!!s.capture:!!s,c):Ot(r,e,t,!1,s,c)}function Ot(r,e,t,s,c,f){if(!e)throw Error("Invalid event type");var E=Dt(c)?!!c.capture:!!c,k=Nt(r);if(k||(r[we]=k=new nt(r)),(t=k.add(e,t,s,E,f)).proxy)return t;if(s=function ut(){const e=rt;return function r(t){return e.call(r.src,r.listener,t)}}(),t.proxy=s,s.src=r,s.listener=t,r.addEventListener)gn||(c=E),void 0===c&&(c=!1),r.addEventListener(e.toString(),s,c);else if(r.attachEvent)r.attachEvent(ve(e.toString()),s);else{if(!r.addListener||!r.removeListener)throw Error("addEventListener and attachEvent are unavailable.");r.addListener(s)}return t}function un(r,e,t,s,c){if(Array.isArray(e)){for(var f=0;f<e.length;f++)un(r,e[f],t,s,c);return null}return t=Ce(t),r&&r[gi]?r.P(e,t,Dt(s)?!!s.capture:!!s,c):Ot(r,e,t,!0,s,c)}function ot(r,e,t,s,c){if(Array.isArray(e))for(var f=0;f<e.length;f++)ot(r,e[f],t,s,c);else s=Dt(s)?!!s.capture:!!s,t=Ce(t),r&&r[gi]?(r=r.i,(e=String(e).toString())in r.g&&-1<(t=Yt(f=r.g[e],t,s,c))&&(yr(f[t]),Array.prototype.splice.call(f,t,1),0==f.length&&(delete r.g[e],r.h--))):r&&(r=Nt(r))&&(e=r.g[e.toString()],r=-1,e&&(r=Yt(e,t,s,c)),(t=-1<r?e[r]:null)&&Ge(t))}function Ge(r){if("number"!=typeof r&&r&&!r.fa){var e=r.src;if(e&&e[gi])en(e.i,r);else{var t=r.type,s=r.proxy;e.removeEventListener?e.removeEventListener(t,s,r.capture):e.detachEvent?e.detachEvent(ve(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=Nt(e))?(en(t,r),0==t.h&&(t.src=null,e[we]=null)):yr(r)}}}function ve(r){return r in Ie?Ie[r]:Ie[r]="on"+r}function rt(r,e){if(r.fa)r=!0;else{e=new pi(e,this);var t=r.listener,s=r.la||r.src;r.ia&&Ge(r),r=t.call(s,e)}return r}function Nt(r){return(r=r[we])instanceof nt?r:null}var he="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ce(r){return"function"==typeof r?r:(r[he]||(r[he]=function(e){return r.handleEvent(e)}),r[he])}function Tt(){nn.call(this),this.i=new nt(this),this.S=this,this.J=null}function It(r,e){var t,s=r.J;if(s)for(t=[];s;s=s.J)t.push(s);if(r=r.S,s=e.type||e,"string"==typeof e)e=new St(e,r);else if(e instanceof St)e.target=e.target||r;else{var c=e;Ze(e=new St(s,r),c)}if(c=!0,t)for(var f=t.length-1;0<=f;f--){var E=e.g=t[f];c=Qt(E,s,!0,e)&&c}if(c=Qt(E=e.g=r,s,!0,e)&&c,c=Qt(E,s,!1,e)&&c,t)for(f=0;f<t.length;f++)c=Qt(E=e.g=t[f],s,!1,e)&&c}function Qt(r,e,t,s){if(!(e=r.i.g[String(e)]))return!0;e=e.concat();for(var c=!0,f=0;f<e.length;++f){var E=e[f];if(E&&!E.fa&&E.capture==t){var k=E.listener,G=E.la||E.src;E.ia&&en(r.i,E),c=!1!==k.call(G,s)&&c}}return c&&!s.defaultPrevented}wt(Tt,nn),Tt.prototype[gi]=!0,Tt.prototype.removeEventListener=function(r,e,t,s){ot(this,r,e,t,s)},Tt.prototype.N=function(){if(Tt.$.N.call(this),this.i){var e,r=this.i;for(e in r.g){for(var t=r.g[e],s=0;s<t.length;s++)yr(t[s]);delete r.g[e],r.h--}}this.J=null},Tt.prototype.O=function(r,e,t,s){return this.i.add(String(r),e,!1,t,s)},Tt.prototype.P=function(r,e,t,s){return this.i.add(String(r),e,!0,t,s)};var Xe=De.JSON.stringify;function He(){var r=Xn;let e=null;return r.g&&(e=r.g,r.g=r.g.next,r.g||(r.h=null),e.next=null),e}var Qn,Gt=new class{constructor(r,e){this.i=r,this.j=e,this.h=0,this.g=null}get(){let r;return 0<this.h?(this.h--,r=this.g,this.g=r.next,r.next=null):r=this.i(),r}}(()=>new pn,r=>r.reset());class pn{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function kn(r){De.setTimeout(()=>{throw r},0)}function wn(r,e){Qn||function Jn(){var r=De.Promise.resolve(void 0);Qn=function(){r.then(ys)}}(),Wn||(Qn(),Wn=!0),Xn.add(r,e)}var Wn=!1,Xn=new class Ct{constructor(){this.h=this.g=null}add(e,t){const s=Gt.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function ys(){for(var r;r=He();){try{r.h.call(r.g)}catch(t){kn(t)}var e=Gt;e.j(r),100>e.h&&(e.h++,r.next=e.g,e.g=r)}Wn=!1}function vi(r,e){Tt.call(this),this.h=r||1,this.g=e||De,this.j=Be(this.qb,this),this.l=Date.now()}function Vi(r){r.ga=!1,r.T&&(r.g.clearTimeout(r.T),r.T=null)}function ji(r,e,t){if("function"==typeof r)t&&(r=Be(r,t));else{if(!r||"function"!=typeof r.handleEvent)throw Error("Invalid listener argument");r=Be(r.handleEvent,r)}return 2147483647<Number(e)?-1:De.setTimeout(r,e||0)}function An(r){r.g=ji(()=>{r.g=null,r.i&&(r.i=!1,An(r))},r.j);const e=r.h;r.h=null,r.m.apply(null,e)}wt(vi,Tt),(ke=vi.prototype).ga=!1,ke.T=null,ke.qb=function(){if(this.ga){var r=Date.now()-this.l;0<r&&r<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-r):(this.T&&(this.g.clearTimeout(this.T),this.T=null),It(this,"tick"),this.ga&&(Vi(this),this.start()))}},ke.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ke.N=function(){vi.$.N.call(this),Vi(this),delete this.g};class cr extends nn{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:An(this)}N(){super.N(),this.g&&(De.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ri(r){nn.call(this),this.h=r,this.g={}}wt(ri,nn);var qi=[];function kr(r,e,t,s){Array.isArray(t)||(t&&(qi[0]=t.toString()),t=qi);for(var c=0;c<t.length;c++){var f=qe(e,t[c],s||r.handleEvent,!1,r.h||r);if(!f)break;r.g[f.key]=f}}function Ci(r){Ai(r.g,function(e,t){this.g.hasOwnProperty(t)&&Ge(e)},r),r.g={}}function Li(){this.g=!0}function be(r,e,t,s){r.info(function(){return"XMLHTTP TEXT ("+e+"): "+function me(r,e){if(!r.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(r=0;r<t.length;r++)if(Array.isArray(t[r])){var s=t[r];if(!(2>s.length)){var c=s[1];if(Array.isArray(c)&&!(1>c.length)){var f=c[0];if("noop"!=f&&"stop"!=f&&"close"!=f)for(var E=1;E<c.length;E++)c[E]=""}}}return Xe(t)}catch{return e}}(r,t)+(s?" "+s:"")})}ri.prototype.N=function(){ri.$.N.call(this),Ci(this)},ri.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Li.prototype.Ea=function(){this.g=!1},Li.prototype.info=function(){};var Je={},Qe=null;function Vt(){return Qe=Qe||new Tt}function Lt(r){St.call(this,Je.Ta,r)}function Xt(r){const e=Vt();It(e,new Lt(e))}function an(r,e){St.call(this,Je.STAT_EVENT,r),this.stat=e}function vn(r){const e=Vt();It(e,new an(e,r))}function rr(r,e){St.call(this,Je.Ua,r),this.size=e}function er(r,e){if("function"!=typeof r)throw Error("Fn must not be null and must be a function");return De.setTimeout(function(){r()},e)}Je.Ta="serverreachability",wt(Lt,St),Je.STAT_EVENT="statevent",wt(an,St),Je.Ua="timingevent",wt(rr,St);var vr={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Wr={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function $i(){}function at(){}$i.prototype.h=null;var fr,xt={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function tn(){St.call(this,"d")}function dn(){St.call(this,"c")}function Er(){}function Ir(r,e,t,s){this.l=r,this.j=e,this.m=t,this.W=s||1,this.U=new ri(this),this.P=vs,this.V=new vi(r=yi?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new ei}function ei(){this.i=null,this.g="",this.h=!1}wt(tn,St),wt(dn,St),wt(Er,$i),Er.prototype.g=function(){return new XMLHttpRequest},Er.prototype.i=function(){return{}},fr=new Er;var vs=45e3,Oo={},_i={};function Ss(r,e,t){r.L=1,r.v=ks(os(e)),r.s=t,r.S=!0,Hi(r,null)}function Hi(r,e){r.G=Date.now(),oo(r),r.A=os(r.v);var t=r.A,s=r.W;Array.isArray(s)||(s=[String(s)]),Pi(t.i,"t",s),r.C=0,t=r.l.I,r.h=new ei,r.g=xa(r.l,t?e:null,!r.s),0<r.O&&(r.M=new cr(Be(r.Pa,r,r.g),r.O)),kr(r.U,r.g,"readystatechange",r.nb),e=r.I?mr(r.I):{},r.s?(r.u||(r.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",r.g.ha(r.A,r.u,r.s,e)):(r.u="GET",r.g.ha(r.A,r.u,null,e)),Xt(),function Ur(r,e,t,s,c,f){r.info(function(){if(r.g)if(f)for(var E="",k=f.split("&"),G=0;G<k.length;G++){var J=k[G].split("=");if(1<J.length){var ue=J[0];J=J[1];var tt=ue.split("_");E=2<=tt.length&&"type"==tt[1]?E+(ue+"=")+J+"&":E+(ue+"=redacted&")}}else E=null;else E=f;return"XMLHTTP REQ ("+s+") [attempt "+c+"]: "+e+"\n"+t+"\n"+E})}(r.j,r.u,r.A,r.m,r.W,r.s)}function jo(r){return!!r.g&&"GET"==r.u&&2!=r.L&&r.l.Ha}function ua(r,e,t){let c,s=!0;for(;!r.J&&r.C<t.length;){if(c=Yi(r,t),c==_i){4==e&&(r.o=4,vn(14),s=!1),be(r.j,r.m,null,"[Incomplete Response]");break}if(c==Oo){r.o=4,vn(15),be(r.j,r.m,t,"[Invalid Chunk]"),s=!1;break}be(r.j,r.m,c,null),ao(r,c)}jo(r)&&c!=_i&&c!=Oo&&(r.h.g="",r.C=0),4!=e||0!=t.length||r.h.h||(r.o=1,vn(16),s=!1),r.i=r.i&&s,s?0<t.length&&!r.ca&&(r.ca=!0,(e=r.l).g==r&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Fo(e),e.L=!0,vn(11))):(be(r.j,r.m,t,"[Invalid Chunked Response]"),As(r),ko(r))}function Yi(r,e){var t=r.C,s=e.indexOf("\n",t);return-1==s?_i:(t=Number(e.substring(t,s)),isNaN(t)?Oo:(s+=1)+t>e.length?_i:(e=e.substr(s,t),r.C=s+t,e))}function oo(r){r.Y=Date.now()+r.P,Os(r,r.P)}function Os(r,e){if(null!=r.B)throw Error("WatchDog timer not null");r.B=er(Be(r.lb,r),e)}function Ta(r){r.B&&(De.clearTimeout(r.B),r.B=null)}function ko(r){0==r.l.H||r.J||ls(r.l,r)}function As(r){Ta(r);var e=r.M;e&&"function"==typeof e.ra&&e.ra(),r.M=null,Vi(r.V),Ci(r.U),r.g&&(e=r.g,r.g=null,e.abort(),e.ra())}function ao(r,e){try{var t=r.l;if(0!=t.H&&(t.g==r||Do(t.h,r)))if(!r.K&&Do(t.h,r)&&3==t.H){try{var s=t.Ja.g.parse(e)}catch{s=null}if(Array.isArray(s)&&3==s.length){var c=s;if(0==c[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<r.G))break e;ga(t),yl(t)}zo(t),vn(18)}}else t.Fa=c[1],0<t.Fa-t.V&&37500>c[2]&&t.M&&0==t.A&&!t.v&&(t.v=er(Be(t.ib,t),6e3));if(1>=Xi(t.h)&&t.na){try{t.na()}catch{}t.na=void 0}}else Go(t,11)}else if((r.K||t.g==r)&&ga(t),!On(e))for(c=t.Ja.g.parse(e),e=0;e<c.length;e++){let J=c[e];if(t.V=J[0],J=J[1],2==t.H)if("c"==J[0]){t.J=J[1],t.oa=J[2];const ue=J[3];null!=ue&&(t.qa=ue,t.j.info("VER="+t.qa));const tt=J[4];null!=tt&&(t.Ga=tt,t.j.info("SVER="+t.Ga));const Bt=J[5];null!=Bt&&"number"==typeof Bt&&0<Bt&&(t.K=s=1.5*Bt,t.j.info("backChannelRequestTimeoutMs_="+s)),s=t;const fn=r.g;if(fn){const Mn=fn.g?fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mn){var f=s.h;f.g||-1==Mn.indexOf("spdy")&&-1==Mn.indexOf("quic")&&-1==Mn.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Gi(f,f.h),f.h=null))}if(s.F){const Fn=fn.g?fn.g.getResponseHeader("X-HTTP-Session-Id"):null;Fn&&(s.Da=Fn,ti(s.G,s.F,Fn))}}t.H=3,t.l&&t.l.Ba(),t.ca&&(t.S=Date.now()-r.G,t.j.info("Handshake RTT: "+t.S+"ms"));var E=r;if((s=t).wa=fs(s,s.I?s.oa:null,s.Y),E.K){Va(s.h,E);var k=E,G=s.K;G&&k.setTimeout(G),k.B&&(Ta(k),oo(k)),s.g=E}else Aa(s);0<t.i.length&&Sa(t)}else"stop"!=J[0]&&"close"!=J[0]||Go(t,7);else 3==t.H&&("stop"==J[0]||"close"==J[0]?"stop"==J[0]?Go(t,7):Ys(t):"noop"!=J[0]&&t.l&&t.l.Aa(J),t.A=0)}Xt()}catch{}}function lo(r,e){if(r.forEach&&"function"==typeof r.forEach)r.forEach(e,void 0);else if(gt(r)||"string"==typeof r)Array.prototype.forEach.call(r,e,void 0);else for(var t=function Qa(r){if(r.sa&&"function"==typeof r.sa)return r.sa();if(!r.Z||"function"!=typeof r.Z){if(typeof Map<"u"&&r instanceof Map)return Array.from(r.keys());if(!(typeof Set<"u"&&r instanceof Set)){if(gt(r)||"string"==typeof r){var e=[];r=r.length;for(var t=0;t<r;t++)e.push(t);return e}e=[],t=0;for(const s in r)e[t++]=s;return e}}}(r),s=function da(r){if(r.Z&&"function"==typeof r.Z)return r.Z();if(typeof Map<"u"&&r instanceof Map||typeof Set<"u"&&r instanceof Set)return Array.from(r.values());if("string"==typeof r)return r.split("");if(gt(r)){for(var e=[],t=r.length,s=0;s<t;s++)e.push(r[s]);return e}for(s in e=[],t=0,r)e[t++]=r[s];return e}(r),c=s.length,f=0;f<c;f++)e.call(void 0,s[f],t&&t[f],r)}(ke=Ir.prototype).setTimeout=function(r){this.P=r},ke.nb=function(r){r=r.target;const e=this.M;e&&3==xi(r)?e.l():this.Pa(r)},ke.Pa=function(r){try{if(r==this.g)e:{const ue=xi(this.g);var e=this.g.Ia();if(this.g.da(),!(3>ue)&&(3!=ue||yi||this.g&&(this.h.h||this.g.ja()||ja(this.g)))){this.J||4!=ue||7==e||Xt(),Ta(this);var t=this.g.da();this.aa=t;t:if(jo(this)){var s=ja(this.g);r="";var c=s.length,f=4==xi(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){As(this),ko(this);var E="";break t}this.h.i=new De.TextDecoder}for(e=0;e<c;e++)this.h.h=!0,r+=this.h.i.decode(s[e],{stream:f&&e==c-1});s.splice(0,c),this.h.g+=r,this.C=0,E=this.h.g}else E=this.g.ja();if(this.i=200==t,function se(r,e,t,s,c,f,E){r.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+c+"]: "+e+"\n"+t+"\n"+f+" "+E})}(this.j,this.u,this.A,this.m,this.W,ue,t),this.i){if(this.ba&&!this.K){t:{if(this.g){var k,G=this.g;if((k=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!On(k)){var J=k;break t}}J=null}if(!(t=J)){this.i=!1,this.o=3,vn(12),As(this),ko(this);break e}be(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ao(this,t)}this.S?(ua(this,ue,E),yi&&this.i&&3==ue&&(kr(this.U,this.V,"tick",this.mb),this.V.start())):(be(this.j,this.m,E,null),ao(this,E)),4==ue&&As(this),this.i&&!this.J&&(4==ue?ls(this.l,this):(this.i=!1,oo(this)))}else 400==t&&0<E.indexOf("Unknown SID")?(this.o=3,vn(12)):(this.o=0,vn(13)),As(this),ko(this)}}}catch{}},ke.mb=function(){if(this.g){var r=xi(this.g),e=this.g.ja();this.C<e.length&&(Ta(this),ua(this,r,e),this.i&&4!=r&&oo(this))}},ke.cancel=function(){this.J=!0,As(this)},ke.lb=function(){this.B=null;const r=Date.now();0<=r-this.Y?(function Ye(r,e){r.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Xt(),vn(17)),As(this),this.o=2,ko(this)):Os(this,this.Y-r)};var ds=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ws(r,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,r instanceof Ws){this.h=void 0!==e?e:r.h,Ua(this,r.j),this.s=r.s,this.g=r.g,Ho(this,r.m),this.l=r.l,e=r.i;var t=new xs;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),co(this,t),this.o=r.o}else r&&(t=String(r).match(ds))?(this.h=!!e,Ua(this,t[1]||"",!0),this.s=uo(t[2]||""),this.g=uo(t[3]||"",!0),Ho(this,t[4]),this.l=uo(t[5]||"",!0),co(this,t[6]||"",!0),this.o=uo(t[7]||"")):(this.h=!!e,this.i=new xs(null,this.h))}function os(r){return new Ws(r)}function Ua(r,e,t){r.j=t?uo(e,!0):e,r.j&&(r.j=r.j.replace(/:$/,""))}function Ho(r,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);r.m=e}else r.m=null}function co(r,e,t){e instanceof xs?(r.i=e,function go(r,e){e&&!r.j&&(zi(r),r.i=null,r.g.forEach(function(t,s){var c=s.toLowerCase();s!=c&&(Zi(this,s),Pi(this,c,t))},r)),r.j=e}(r.i,r.h)):(t||(e=ho(e,No)),r.i=new xs(e,r.h))}function ti(r,e,t){r.i.set(e,t)}function ks(r){return ti(r,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),r}function uo(r,e){return r?e?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function ho(r,e,t){return"string"==typeof r?(r=encodeURI(r).replace(e,fa),t&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function fa(r){return"%"+((r=r.charCodeAt(0))>>4&15).toString(16)+(15&r).toString(16)}Ws.prototype.toString=function(){var r=[],e=this.j;e&&r.push(ho(e,fo,!0),":");var t=this.g;return(t||"file"==e)&&(r.push("//"),(e=this.s)&&r.push(ho(e,fo,!0),"@"),r.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&r.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&r.push("/"),r.push(ho(t,"/"==t.charAt(0)?na:_s,!0))),(t=this.i.toString())&&r.push("?",t),(t=this.o)&&r.push("#",ho(t,ra)),r.join("")};var fo=/[#\/\?@]/g,_s=/[#\?:]/g,na=/[#\?]/g,No=/[#\?@]/g,ra=/#/g;function xs(r,e){this.h=this.g=null,this.i=r||null,this.j=!!e}function zi(r){r.g||(r.g=new Map,r.h=0,r.i&&function ha(r,e){if(r){r=r.split("&");for(var t=0;t<r.length;t++){var s=r[t].indexOf("="),c=null;if(0<=s){var f=r[t].substring(0,s);c=r[t].substring(s+1)}else f=r[t];e(f,c?decodeURIComponent(c.replace(/\+/g," ")):"")}}}(r.i,function(e,t){r.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Zi(r,e){zi(r),e=po(r,e),r.g.has(e)&&(r.i=null,r.h-=r.g.get(e).length,r.g.delete(e))}function bo(r,e){return zi(r),e=po(r,e),r.g.has(e)}function Pi(r,e,t){Zi(r,e),0<t.length&&(r.i=null,r.g.set(po(r,e),kt(t)),r.h+=t.length)}function po(r,e){return e=String(e),r.j&&(e=e.toLowerCase()),e}function ia(r){this.l=r||Ja,r=De.PerformanceNavigationTiming?0<(r=De.performance.getEntriesByType("navigation")).length&&("hq"==r[0].nextHopProtocol||"h2"==r[0].nextHopProtocol):!!(De.g&&De.g.Ka&&De.g.Ka()&&De.g.Ka().ec),this.j=r?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ke=xs.prototype).add=function(r,e){zi(this),this.i=null,r=po(this,r);var t=this.g.get(r);return t||this.g.set(r,t=[]),t.push(e),this.h+=1,this},ke.forEach=function(r,e){zi(this),this.g.forEach(function(t,s){t.forEach(function(c){r.call(e,c,s,this)},this)},this)},ke.sa=function(){zi(this);const r=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const c=r[s];for(let f=0;f<c.length;f++)t.push(e[s])}return t},ke.Z=function(r){zi(this);let e=[];if("string"==typeof r)bo(this,r)&&(e=e.concat(this.g.get(po(this,r))));else{r=Array.from(this.g.values());for(let t=0;t<r.length;t++)e=e.concat(r[t])}return e},ke.set=function(r,e){return zi(this),this.i=null,bo(this,r=po(this,r))&&(this.h-=this.g.get(r).length),this.g.set(r,[e]),this.h+=1,this},ke.get=function(r,e){return r&&0<(r=this.Z(r)).length?String(r[0]):e},ke.toString=function(){if(this.i)return this.i;if(!this.g)return"";const r=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const f=encodeURIComponent(String(s)),E=this.Z(s);for(s=0;s<E.length;s++){var c=f;""!==E[s]&&(c+="="+encodeURIComponent(String(E[s]))),r.push(c)}}return this.i=r.join("&")};var Ja=10;function as(r){return!!r.h||!!r.g&&r.g.size>=r.j}function Xi(r){return r.h?1:r.g?r.g.size:0}function Do(r,e){return r.h?r.h==e:!!r.g&&r.g.has(e)}function Gi(r,e){r.g?r.g.add(e):r.h=e}function Va(r,e){r.h&&r.h==e?r.h=null:r.g&&r.g.has(e)&&r.g.delete(e)}function Ns(r){if(null!=r.h)return r.i.concat(r.h.F);if(null!=r.g&&0!==r.g.size){let e=r.i;for(const t of r.g.values())e=e.concat(t.F);return e}return kt(r.i)}function To(){}function sa(){this.g=new To}function Tr(r,e,t){const s=t||"";try{lo(r,function(c,f){let E=c;Dt(c)&&(E=Xe(c)),e.push(s+f+"="+encodeURIComponent(E))})}catch(c){throw e.push(s+"type="+encodeURIComponent("_badmap")),c}}function pa(r,e,t,s,c){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,c(s)}catch{}}function oa(r){this.l=r.fc||null,this.j=r.ob||!1}function b(r,e){Tt.call(this),this.F=r,this.u=e,this.m=void 0,this.readyState=q,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ia.prototype.cancel=function(){if(this.i=Ns(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const r of this.g.values())r.cancel();this.g.clear()}},To.prototype.stringify=function(r){return De.JSON.stringify(r,void 0)},To.prototype.parse=function(r){return De.JSON.parse(r,void 0)},wt(oa,$i),oa.prototype.g=function(){return new b(this.l,this.j)},oa.prototype.i=function(r){return function(){return r}}({}),wt(b,Tt);var q=0;function T(r){r.j.read().then(r.Xa.bind(r)).catch(r.ka.bind(r))}function W(r){r.readyState=4,r.l=null,r.j=null,r.A=null,ge(r)}function ge(r){r.onreadystatechange&&r.onreadystatechange.call(r)}(ke=b.prototype).open=function(r,e){if(this.readyState!=q)throw this.abort(),Error("Error reopening a connection");this.C=r,this.B=e,this.readyState=1,ge(this)},ke.send=function(r){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};r&&(e.body=r),(this.F||De).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ke.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,W(this)),this.readyState=q},ke.$a=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,ge(this)),this.g&&(this.readyState=3,ge(this),this.g)))if("arraybuffer"===this.responseType)r.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof De.ReadableStream<"u"&&"body"in r){if(this.j=r.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;T(this)}else r.text().then(this.Za.bind(this),this.ka.bind(this))},ke.Xa=function(r){if(this.g){if(this.u&&r.value)this.response.push(r.value);else if(!this.u){var e=r.value?r.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!r.done}))&&(this.response=this.responseText+=e)}r.done?W(this):ge(this),3==this.readyState&&T(this)}},ke.Za=function(r){this.g&&(this.response=this.responseText=r,W(this))},ke.Ya=function(r){this.g&&(this.response=r,W(this))},ke.ka=function(){this.g&&W(this)},ke.setRequestHeader=function(r,e){this.v.append(r,e)},ke.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""},ke.getAllResponseHeaders=function(){if(!this.h)return"";const r=[],e=this.h.entries();for(var t=e.next();!t.done;)r.push((t=t.value)[0]+": "+t[1]),t=e.next();return r.join("\r\n")},Object.defineProperty(b.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(r){this.m=r?"include":"same-origin"}});var M=De.JSON.parse;function F(r){Tt.call(this),this.headers=new Map,this.u=r||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=L,this.L=this.M=!1}wt(F,Tt);var L="",ne=/^https?$/i,vt=["POST","PUT"];function $r(r,e){r.h=!1,r.g&&(r.l=!0,r.g.abort(),r.l=!1),r.j=e,r.m=5,ii(r),hs(r)}function ii(r){r.F||(r.F=!0,It(r,"complete"),It(r,"error"))}function Qi(r){if(r.h&&typeof Ne<"u"&&(!r.C[1]||4!=xi(r)||2!=r.da()))if(r.v&&4==xi(r))ji(r.La,0,r);else if(It(r,"readystatechange"),4==xi(r)){r.h=!1;try{const k=r.da();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===k){var c=String(r.I).match(ds)[1]||null;if(!c&&De.self&&De.self.location){var f=De.self.location.protocol;c=f.substr(0,f.length-1)}s=!ne.test(c?c.toLowerCase():"")}t=s}if(t)It(r,"complete"),It(r,"success");else{r.m=6;try{var E=2<xi(r)?r.g.statusText:""}catch{E=""}r.j=E+" ["+r.da()+"]",ii(r)}}finally{hs(r)}}}function hs(r,e){if(r.g){Ao(r);const t=r.g,s=r.C[0]?je:null;r.g=null,r.C=null,e||It(r,"ready");try{t.onreadystatechange=s}catch{}}}function Ao(r){r.g&&r.L&&(r.g.ontimeout=null),r.A&&(De.clearTimeout(r.A),r.A=null)}function xi(r){return r.g?r.g.readyState:0}function ja(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.K){case L:case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch{return null}}function ts(r){let e="";return Ai(r,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function Ks(r,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=ts(t),"string"==typeof r?null!=t&&encodeURIComponent(String(t)):ti(r,e,t))}function qs(r,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[r]||e}function aa(r){this.Ga=0,this.i=[],this.j=new Li,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=qs("failFast",!1,r),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=qs("baseRetryDelayMs",5e3,r),this.hb=qs("retryDelaySeedMs",1e4,r),this.eb=qs("forwardChannelMaxRetries",2,r),this.xa=qs("forwardChannelRequestTimeoutMs",2e4,r),this.va=r&&r.xmlHttpFactory||void 0,this.Ha=r&&r.dc||!1,this.K=void 0,this.I=r&&r.supportsCrossDomainXhr||!1,this.J="",this.h=new ia(r&&r.concurrentRequestLimit),this.Ja=new sa,this.P=r&&r.fastHandshake||!1,this.O=r&&r.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=r&&r.bc||!1,r&&r.Ea&&this.j.Ea(),r&&r.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&r&&r.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function Ys(r){if(el(r),3==r.H){var e=r.W++,t=os(r.G);ti(t,"SID",r.J),ti(t,"RID",e),ti(t,"TYPE","terminate"),Rs(r,t),(e=new Ir(r,r.j,e,void 0)).L=2,e.v=ks(os(t)),t=!1,De.navigator&&De.navigator.sendBeacon&&(t=De.navigator.sendBeacon(e.v.toString(),"")),!t&&De.Image&&((new Image).src=e.v,t=!0),t||(e.g=xa(e.l,null),e.g.ha(e.v)),e.G=Date.now(),oo(e)}Zs(r)}function yl(r){r.g&&(Fo(r),r.g.cancel(),r.g=null)}function el(r){yl(r),r.u&&(De.clearTimeout(r.u),r.u=null),ga(r),r.h.cancel(),r.m&&("number"==typeof r.m&&De.clearTimeout(r.m),r.m=null)}function Sa(r){as(r.h)||r.m||(r.m=!0,wn(r.Na,r),r.C=0)}function ns(r,e){var t;t=e?e.m:r.W++;const s=os(r.G);ti(s,"SID",r.J),ti(s,"RID",t),ti(s,"AID",r.V),Rs(r,s),r.o&&r.s&&Ks(s,r.o,r.s),t=new Ir(r,r.j,t,r.C+1),null===r.o&&(t.I=r.s),e&&(r.i=e.F.concat(r.i)),e=tl(r,t,1e3),t.setTimeout(Math.round(.5*r.xa)+Math.round(.5*r.xa*Math.random())),Gi(r.h,t),Ss(t,s,e)}function Rs(r,e){r.ma&&Ai(r.ma,function(t,s){ti(e,s,t)}),r.l&&lo({},function(t,s){ti(e,s,t)})}function tl(r,e,t){t=Math.min(r.i.length,t);var s=r.l?Be(r.l.Va,r.l,r):null;e:{var c=r.i;let f=-1;for(;;){const E=["count="+t];-1==f?0<t?(f=c[0].h,E.push("ofs="+f)):f=0:E.push("ofs="+f);let k=!0;for(let G=0;G<t;G++){let J=c[G].h;const ue=c[G].g;if(J-=f,0>J)f=Math.max(0,c[G].h-100),k=!1;else try{Tr(ue,E,"req"+J+"_")}catch{s&&s(ue)}}if(k){s=E.join("&");break e}}}return r=r.i.splice(0,t),e.F=r,s}function Aa(r){r.g||r.u||(r.ba=1,wn(r.Ma,r),r.A=0)}function zo(r){return!(r.g||r.u||3<=r.A||(r.ba++,r.u=er(Be(r.Ma,r),xo(r,r.A)),r.A++,0))}function Fo(r){null!=r.B&&(De.clearTimeout(r.B),r.B=null)}function nl(r){r.g=new Ir(r,r.j,"rpc",r.ba),null===r.o&&(r.g.I=r.s),r.g.O=0;var e=os(r.wa);ti(e,"RID","rpc"),ti(e,"SID",r.J),ti(e,"CI",r.M?"0":"1"),ti(e,"AID",r.V),ti(e,"TYPE","xmlhttp"),Rs(r,e),r.o&&r.s&&Ks(e,r.o,r.s),r.K&&r.g.setTimeout(r.K);var t=r.g;r=r.oa,t.L=1,t.v=ks(os(e)),t.s=null,t.S=!0,Hi(t,r)}function ga(r){null!=r.v&&(De.clearTimeout(r.v),r.v=null)}function ls(r,e){var t=null;if(r.g==e){ga(r),Fo(r),r.g=null;var s=2}else{if(!Do(r.h,e))return;t=e.F,Va(r.h,e),s=1}if(0!=r.H)if(r.ta=e.aa,e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.G;var c=r.C;It(s=Vt(),new rr(s,t)),Sa(r)}else Aa(r);else if(3==(c=e.o)||0==c&&0<r.ta||!(1==s&&function Ha(r,e){return!(Xi(r.h)>=r.h.j-(r.m?1:0)||(r.m?(r.i=e.F.concat(r.i),0):1==r.H||2==r.H||r.C>=(r.cb?0:r.eb)||(r.m=er(Be(r.Na,r,e),xo(r,r.C)),r.C++,0)))}(r,e)||2==s&&zo(r)))switch(t&&0<t.length&&(e=r.h,e.i=e.i.concat(t)),c){case 1:Go(r,5);break;case 4:Go(r,10);break;case 3:Go(r,6);break;default:Go(r,2)}}function xo(r,e){let t=r.ab+Math.floor(Math.random()*r.hb);return r.l||(t*=2),t*e}function Go(r,e){if(r.j.info("Error code "+e),2==e){var t=null;r.l&&(t=null);var s=Be(r.pb,r);t||(t=new Ws("//www.google.com/images/cleardot.gif"),De.location&&"http"==De.location.protocol||Ua(t,"https"),ks(t)),function So(r,e){const t=new Li;if(De.Image){const s=new Image;s.onload=ft(pa,t,s,"TestLoadImage: loaded",!0,e),s.onerror=ft(pa,t,s,"TestLoadImage: error",!1,e),s.onabort=ft(pa,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=ft(pa,t,s,"TestLoadImage: timeout",!1,e),De.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=r}else e(!1)}(t.toString(),s)}else vn(2);r.H=0,r.l&&r.l.za(e),Zs(r),el(r)}function Zs(r){if(r.H=0,r.pa=[],r.l){const e=Ns(r.h);(0!=e.length||0!=r.i.length)&&(Ae(r.pa,e),Ae(r.pa,r.i),r.h.i.length=0,kt(r.i),r.i.length=0),r.l.ya()}}function fs(r,e,t){var s=t instanceof Ws?os(t):new Ws(t,void 0);if(""!=s.g)e&&(s.g=e+"."+s.g),Ho(s,s.m);else{var c=De.location;s=c.protocol,e=e?e+"."+c.hostname:c.hostname,c=+c.port;var f=new Ws(null,void 0);s&&Ua(f,s),e&&(f.g=e),c&&Ho(f,c),t&&(f.l=t),s=f}return e=r.Da,(t=r.F)&&e&&ti(s,t,e),ti(s,"VER",r.qa),Rs(r,s),s}function xa(r,e,t){if(e&&!r.I)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new F(t&&r.Ha&&!r.va?new oa({ob:!0}):r.va)).Oa(r.I),e}function cs(){}function Fs(){if(bn&&!(10<=Number(zr)))throw Error("Environmental error: no available transport.")}function Vr(r,e){Tt.call(this),this.g=new aa(e),this.l=r,this.h=e&&e.messageUrlParams||null,r=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.s=r,r=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(r?r["X-WebChannel-Content-Type"]=e.messageContentType:r={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(r?r["X-WebChannel-Client-Profile"]=e.Ca:r={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=r,(r=e&&e.cc)&&!On(r)&&(this.g.o=r),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!On(e)&&(this.g.F=e,null!==(r=this.h)&&e in r&&e in(r=this.h)&&delete r[e]),this.j=new Lo(this)}function Ro(r){tn.call(this);var e=r.__sm__;if(e){e:{for(const t in e){r=t;break e}r=void 0}(this.i=r)&&(r=this.i,e=null!==e&&r in e?e[r]:void 0),this.data=e}else this.data=r}function Ra(){dn.call(this),this.status=1}function Lo(r){this.g=r}function mo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function jl(r,e,t){t||(t=0);var s=Array(16);if("string"==typeof e)for(var c=0;16>c;++c)s[c]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(c=0;16>c;++c)s[c]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var f=r.g[3],E=(e=r.g[0])+(f^(t=r.g[1])&((c=r.g[2])^f))+s[0]+3614090360&4294967295;E=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=t+(E<<7&4294967295|E>>>25))+((E=f+(c^e&(t^c))+s[1]+3905402710&4294967295)<<12&4294967295|E>>>20))+((E=c+(t^f&(e^t))+s[2]+606105819&4294967295)<<17&4294967295|E>>>15))+((E=t+(e^c&(f^e))+s[3]+3250441966&4294967295)<<22&4294967295|E>>>10))+((E=e+(f^t&(c^f))+s[4]+4118548399&4294967295)<<7&4294967295|E>>>25))+((E=f+(c^e&(t^c))+s[5]+1200080426&4294967295)<<12&4294967295|E>>>20))+((E=c+(t^f&(e^t))+s[6]+2821735955&4294967295)<<17&4294967295|E>>>15))+((E=t+(e^c&(f^e))+s[7]+4249261313&4294967295)<<22&4294967295|E>>>10))+((E=e+(f^t&(c^f))+s[8]+1770035416&4294967295)<<7&4294967295|E>>>25))+((E=f+(c^e&(t^c))+s[9]+2336552879&4294967295)<<12&4294967295|E>>>20))+((E=c+(t^f&(e^t))+s[10]+4294925233&4294967295)<<17&4294967295|E>>>15))+((E=t+(e^c&(f^e))+s[11]+2304563134&4294967295)<<22&4294967295|E>>>10))+((E=e+(f^t&(c^f))+s[12]+1804603682&4294967295)<<7&4294967295|E>>>25))+((E=f+(c^e&(t^c))+s[13]+4254626195&4294967295)<<12&4294967295|E>>>20))+((E=c+(t^f&(e^t))+s[14]+2792965006&4294967295)<<17&4294967295|E>>>15))+((E=t+(e^c&(f^e))+s[15]+1236535329&4294967295)<<22&4294967295|E>>>10))+((E=e+(c^f&(t^c))+s[1]+4129170786&4294967295)<<5&4294967295|E>>>27))+((E=f+(t^c&(e^t))+s[6]+3225465664&4294967295)<<9&4294967295|E>>>23))+((E=c+(e^t&(f^e))+s[11]+643717713&4294967295)<<14&4294967295|E>>>18))+((E=t+(f^e&(c^f))+s[0]+3921069994&4294967295)<<20&4294967295|E>>>12))+((E=e+(c^f&(t^c))+s[5]+3593408605&4294967295)<<5&4294967295|E>>>27))+((E=f+(t^c&(e^t))+s[10]+38016083&4294967295)<<9&4294967295|E>>>23))+((E=c+(e^t&(f^e))+s[15]+3634488961&4294967295)<<14&4294967295|E>>>18))+((E=t+(f^e&(c^f))+s[4]+3889429448&4294967295)<<20&4294967295|E>>>12))+((E=e+(c^f&(t^c))+s[9]+568446438&4294967295)<<5&4294967295|E>>>27))+((E=f+(t^c&(e^t))+s[14]+3275163606&4294967295)<<9&4294967295|E>>>23))+((E=c+(e^t&(f^e))+s[3]+4107603335&4294967295)<<14&4294967295|E>>>18))+((E=t+(f^e&(c^f))+s[8]+1163531501&4294967295)<<20&4294967295|E>>>12))+((E=e+(c^f&(t^c))+s[13]+2850285829&4294967295)<<5&4294967295|E>>>27))+((E=f+(t^c&(e^t))+s[2]+4243563512&4294967295)<<9&4294967295|E>>>23))+((E=c+(e^t&(f^e))+s[7]+1735328473&4294967295)<<14&4294967295|E>>>18))+((E=t+(f^e&(c^f))+s[12]+2368359562&4294967295)<<20&4294967295|E>>>12))+((E=e+(t^c^f)+s[5]+4294588738&4294967295)<<4&4294967295|E>>>28))+((E=f+(e^t^c)+s[8]+2272392833&4294967295)<<11&4294967295|E>>>21))+((E=c+(f^e^t)+s[11]+1839030562&4294967295)<<16&4294967295|E>>>16))+((E=t+(c^f^e)+s[14]+4259657740&4294967295)<<23&4294967295|E>>>9))+((E=e+(t^c^f)+s[1]+2763975236&4294967295)<<4&4294967295|E>>>28))+((E=f+(e^t^c)+s[4]+1272893353&4294967295)<<11&4294967295|E>>>21))+((E=c+(f^e^t)+s[7]+4139469664&4294967295)<<16&4294967295|E>>>16))+((E=t+(c^f^e)+s[10]+3200236656&4294967295)<<23&4294967295|E>>>9))+((E=e+(t^c^f)+s[13]+681279174&4294967295)<<4&4294967295|E>>>28))+((E=f+(e^t^c)+s[0]+3936430074&4294967295)<<11&4294967295|E>>>21))+((E=c+(f^e^t)+s[3]+3572445317&4294967295)<<16&4294967295|E>>>16))+((E=t+(c^f^e)+s[6]+76029189&4294967295)<<23&4294967295|E>>>9))+((E=e+(t^c^f)+s[9]+3654602809&4294967295)<<4&4294967295|E>>>28))+((E=f+(e^t^c)+s[12]+3873151461&4294967295)<<11&4294967295|E>>>21))+((E=c+(f^e^t)+s[15]+530742520&4294967295)<<16&4294967295|E>>>16))+((E=t+(c^f^e)+s[2]+3299628645&4294967295)<<23&4294967295|E>>>9))+((E=e+(c^(t|~f))+s[0]+4096336452&4294967295)<<6&4294967295|E>>>26))+((E=f+(t^(e|~c))+s[7]+1126891415&4294967295)<<10&4294967295|E>>>22))+((E=c+(e^(f|~t))+s[14]+2878612391&4294967295)<<15&4294967295|E>>>17))+((E=t+(f^(c|~e))+s[5]+4237533241&4294967295)<<21&4294967295|E>>>11))+((E=e+(c^(t|~f))+s[12]+1700485571&4294967295)<<6&4294967295|E>>>26))+((E=f+(t^(e|~c))+s[3]+2399980690&4294967295)<<10&4294967295|E>>>22))+((E=c+(e^(f|~t))+s[10]+4293915773&4294967295)<<15&4294967295|E>>>17))+((E=t+(f^(c|~e))+s[1]+2240044497&4294967295)<<21&4294967295|E>>>11))+((E=e+(c^(t|~f))+s[8]+1873313359&4294967295)<<6&4294967295|E>>>26))+((E=f+(t^(e|~c))+s[15]+4264355552&4294967295)<<10&4294967295|E>>>22))+((E=c+(e^(f|~t))+s[6]+2734768916&4294967295)<<15&4294967295|E>>>17))+((E=t+(f^(c|~e))+s[13]+1309151649&4294967295)<<21&4294967295|E>>>11))+((f=(e=t+((E=e+(c^(t|~f))+s[4]+4149444226&4294967295)<<6&4294967295|E>>>26))+((E=f+(t^(e|~c))+s[11]+3174756917&4294967295)<<10&4294967295|E>>>22))^((c=f+((E=c+(e^(f|~t))+s[2]+718787259&4294967295)<<15&4294967295|E>>>17))|~e))+s[9]+3951481745&4294967295,r.g[0]=r.g[0]+e&4294967295,r.g[1]=r.g[1]+(c+(E<<21&4294967295|E>>>11))&4294967295,r.g[2]=r.g[2]+c&4294967295,r.g[3]=r.g[3]+f&4294967295}function Sr(r,e){this.h=e;for(var t=[],s=!0,c=r.length-1;0<=c;c--){var f=0|r[c];s&&f==e||(t[c]=f,s=!1)}this.g=t}(ke=F.prototype).Oa=function(r){this.M=r},ke.ha=function(r,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+r);e=e?e.toUpperCase():"GET",this.I=r,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():fr.g(),this.C=function mt(r){return r.h||(r.h=r.i())}(this.u?this.u:fr),this.g.onreadystatechange=Be(this.La,this);try{this.G=!0,this.g.open(e,String(r),!0),this.G=!1}catch(f){return void $r(this,f)}if(r=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var c in s)t.set(c,s[c]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const f of s.keys())t.set(f,s.get(f))}s=Array.from(t.keys()).find(f=>"content-type"==f.toLowerCase()),c=De.FormData&&r instanceof De.FormData,!(0<=Dn(vt,e))||s||c||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[f,E]of t)this.g.setRequestHeader(f,E);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Ao(this),0<this.B&&((this.L=function Tn(r){return bn&&function Jr(){return _r(on,9,function(){let r=0;const e=Yn(String(Gn)).split("."),t=Yn("9").split("."),s=Math.max(e.length,t.length);for(let E=0;0==r&&E<s;E++){var c=e[E]||"",f=t[E]||"";do{if(c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""],0==c[0].length&&0==f[0].length)break;r=xn(0==c[1].length?0:parseInt(c[1],10),0==f[1].length?0:parseInt(f[1],10))||xn(0==c[2].length,0==f[2].length)||xn(c[2],f[2]),c=c[3],f=f[3]}while(0==r)}return 0<=r})}()&&"number"==typeof r.timeout&&void 0!==r.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Be(this.ua,this)):this.A=ji(this.ua,this.B,this)),this.v=!0,this.g.send(r),this.v=!1}catch(f){$r(this,f)}},ke.ua=function(){typeof Ne<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,It(this,"timeout"),this.abort(8))},ke.abort=function(r){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=r||7,It(this,"complete"),It(this,"abort"),hs(this))},ke.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),hs(this,!0)),F.$.N.call(this)},ke.La=function(){this.s||(this.G||this.v||this.l?Qi(this):this.kb())},ke.kb=function(){Qi(this)},ke.da=function(){try{return 2<xi(this)?this.g.status:-1}catch{return-1}},ke.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ke.Wa=function(r){if(this.g){var e=this.g.responseText;return r&&0==e.indexOf(r)&&(e=e.substring(r.length)),M(e)}},ke.Ia=function(){return this.m},ke.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ke=aa.prototype).qa=8,ke.H=1,ke.Na=function(r){if(this.m)if(this.m=null,1==this.H){if(!r){this.W=Math.floor(1e5*Math.random()),r=this.W++;const c=new Ir(this,this.j,r,void 0);let f=this.s;if(this.U&&(f?(f=mr(f),Ze(f,this.U)):f=this.U),null!==this.o||this.O||(c.I=f,f=null),this.P)e:{for(var e=0,t=0;t<this.i.length;t++){var s=this.i[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=tl(this,c,e),ti(t=os(this.G),"RID",r),ti(t,"CVER",22),this.F&&ti(t,"X-HTTP-Session-Id",this.F),Rs(this,t),f&&(this.O?e="headers="+encodeURIComponent(String(ts(f)))+"&"+e:this.o&&Ks(t,this.o,f)),Gi(this.h,c),this.bb&&ti(t,"TYPE","init"),this.P?(ti(t,"$req",e),ti(t,"SID","null"),c.ba=!0,Ss(c,t,null)):Ss(c,t,e),this.H=2}}else 3==this.H&&(r?ns(this,r):0==this.i.length||as(this.h)||ns(this))},ke.Ma=function(){if(this.u=null,nl(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var r=2*this.S;this.j.info("BP detection timer enabled: "+r),this.B=er(Be(this.jb,this),r)}},ke.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,vn(10),yl(this),nl(this))},ke.ib=function(){null!=this.v&&(this.v=null,yl(this),zo(this),vn(19))},ke.pb=function(r){r?(this.j.info("Successfully pinged google.com"),vn(2)):(this.j.info("Failed to ping google.com"),vn(1))},(ke=cs.prototype).Ba=function(){},ke.Aa=function(){},ke.za=function(){},ke.ya=function(){},ke.Va=function(){},Fs.prototype.g=function(r,e){return new Vr(r,e)},wt(Vr,Tt),Vr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var r=this.g,e=this.l,t=this.h||void 0;vn(0),r.Y=e,r.ma=t||{},r.M=r.aa,r.G=fs(r,null,r.Y),Sa(r)},Vr.prototype.close=function(){Ys(this.g)},Vr.prototype.u=function(r){var e=this.g;if("string"==typeof r){var t={};t.__data__=r,r=t}else this.v&&((t={}).__data__=Xe(r),r=t);e.i.push(new class{constructor(r,e){this.h=r,this.g=e}}(e.fb++,r)),3==e.H&&Sa(e)},Vr.prototype.N=function(){this.g.l=null,delete this.j,Ys(this.g),delete this.g,Vr.$.N.call(this)},wt(Ro,tn),wt(Ra,dn),wt(Lo,cs),Lo.prototype.Ba=function(){It(this.g,"a")},Lo.prototype.Aa=function(r){It(this.g,new Ro(r))},Lo.prototype.za=function(r){It(this.g,new Ra)},Lo.prototype.ya=function(){It(this.g,"b")},wt(mo,function vl(){this.blockSize=-1}),mo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},mo.prototype.j=function(r,e){void 0===e&&(e=r.length);for(var t=e-this.blockSize,s=this.m,c=this.h,f=0;f<e;){if(0==c)for(;f<=t;)jl(this,r,f),f+=this.blockSize;if("string"==typeof r){for(;f<e;)if(s[c++]=r.charCodeAt(f++),c==this.blockSize){jl(this,s),c=0;break}}else for(;f<e;)if(s[c++]=r[f++],c==this.blockSize){jl(this,s),c=0;break}}this.h=c,this.i+=e},mo.prototype.l=function(){var r=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);r[0]=128;for(var e=1;e<r.length-8;++e)r[e]=0;var t=8*this.i;for(e=r.length-8;e<r.length;++e)r[e]=255&t,t/=256;for(this.j(r),r=Array(16),e=t=0;4>e;++e)for(var s=0;32>s;s+=8)r[t++]=this.g[e]>>>s&255;return r};var Hl={};function _l(r){return-128<=r&&128>r?_r(Hl,r,function(e){return new Sr([0|e],0>e?-1:0)}):new Sr([0|r],0>r?-1:0)}function $(r){if(isNaN(r)||!isFinite(r))return ie;if(0>r)return Ar($(-r));for(var e=[],t=1,s=0;r>=t;s++)e[s]=r/t|0,t*=H;return new Sr(e,0)}var H=4294967296,ie=_l(0),Le=_l(1),Zt=_l(16777216);function Jt(r){if(0!=r.h)return!1;for(var e=0;e<r.g.length;e++)if(0!=r.g[e])return!1;return!0}function Vn(r){return-1==r.h}function Ar(r){for(var e=r.g.length,t=[],s=0;s<e;s++)t[s]=~r.g[s];return new Sr(t,~r.h).add(Le)}function Kr(r,e){return r.add(Ar(e))}function Br(r,e){for(;(65535&r[e])!=r[e];)r[e+1]+=r[e]>>>16,r[e]&=65535,e++}function wr(r,e){this.g=r,this.h=e}function Ri(r,e){if(Jt(e))throw Error("division by zero");if(Jt(r))return new wr(ie,ie);if(Vn(r))return e=Ri(Ar(r),e),new wr(Ar(e.g),Ar(e.h));if(Vn(e))return e=Ri(r,Ar(e)),new wr(Ar(e.g),e.h);if(30<r.g.length){if(Vn(r)||Vn(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Le,s=e;0>=s.X(r);)t=bi(t),s=bi(s);var c=Bi(t,1),f=Bi(s,1);for(s=Bi(s,2),t=Bi(t,2);!Jt(s);){var E=f.add(s);0>=E.X(r)&&(c=c.add(t),f=E),s=Bi(s,1),t=Bi(t,1)}return e=Kr(r,c.R(e)),new wr(c,e)}for(c=ie;0<=r.X(e);){for(t=Math.max(1,Math.floor(r.ea()/e.ea())),s=48>=(s=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,s-48),E=(f=$(t)).R(e);Vn(E)||0<E.X(r);)E=(f=$(t-=s)).R(e);Jt(f)&&(f=Le),c=c.add(f),r=Kr(r,E)}return new wr(c,r)}function bi(r){for(var e=r.g.length+1,t=[],s=0;s<e;s++)t[s]=r.D(s)<<1|r.D(s-1)>>>31;return new Sr(t,r.h)}function Bi(r,e){var t=e>>5;e%=32;for(var s=r.g.length-t,c=[],f=0;f<s;f++)c[f]=0<e?r.D(f+t)>>>e|r.D(f+t+1)<<32-e:r.D(f+t);return new Sr(c,r.h)}(ke=Sr.prototype).ea=function(){if(Vn(this))return-Ar(this).ea();for(var r=0,e=1,t=0;t<this.g.length;t++){var s=this.D(t);r+=(0<=s?s:H+s)*e,e*=H}return r},ke.toString=function(r){if(2>(r=r||10)||36<r)throw Error("radix out of range: "+r);if(Jt(this))return"0";if(Vn(this))return"-"+Ar(this).toString(r);for(var e=$(Math.pow(r,6)),t=this,s="";;){var c=Ri(t,e).g,f=((0<(t=Kr(t,c.R(e))).g.length?t.g[0]:t.h)>>>0).toString(r);if(Jt(t=c))return f+s;for(;6>f.length;)f="0"+f;s=f+s}},ke.D=function(r){return 0>r?0:r<this.g.length?this.g[r]:this.h},ke.X=function(r){return Vn(r=Kr(this,r))?-1:Jt(r)?0:1},ke.abs=function(){return Vn(this)?Ar(this):this},ke.add=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0,c=0;c<=e;c++){var f=s+(65535&this.D(c))+(65535&r.D(c)),E=(f>>>16)+(this.D(c)>>>16)+(r.D(c)>>>16);s=E>>>16,t[c]=(E&=65535)<<16|(f&=65535)}return new Sr(t,-2147483648&t[t.length-1]?-1:0)},ke.R=function(r){if(Jt(this)||Jt(r))return ie;if(Vn(this))return Vn(r)?Ar(this).R(Ar(r)):Ar(Ar(this).R(r));if(Vn(r))return Ar(this.R(Ar(r)));if(0>this.X(Zt)&&0>r.X(Zt))return $(this.ea()*r.ea());for(var e=this.g.length+r.g.length,t=[],s=0;s<2*e;s++)t[s]=0;for(s=0;s<this.g.length;s++)for(var c=0;c<r.g.length;c++){var f=this.D(s)>>>16,E=65535&this.D(s),k=r.D(c)>>>16,G=65535&r.D(c);t[2*s+2*c]+=E*G,Br(t,2*s+2*c),t[2*s+2*c+1]+=f*G,Br(t,2*s+2*c+1),t[2*s+2*c+1]+=E*k,Br(t,2*s+2*c+1),t[2*s+2*c+2]+=f*k,Br(t,2*s+2*c+2)}for(s=0;s<e;s++)t[s]=t[2*s+1]<<16|t[2*s];for(s=e;s<2*e;s++)t[s]=0;return new Sr(t,0)},ke.gb=function(r){return Ri(this,r).h},ke.and=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)&r.D(s);return new Sr(t,this.h&r.h)},ke.or=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)|r.D(s);return new Sr(t,this.h|r.h)},ke.xor=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)^r.D(s);return new Sr(t,this.h^r.h)},Fs.prototype.createWebChannel=Fs.prototype.g,Vr.prototype.send=Vr.prototype.u,Vr.prototype.open=Vr.prototype.m,Vr.prototype.close=Vr.prototype.close,vr.NO_ERROR=0,vr.TIMEOUT=8,vr.HTTP_ERROR=6,Wr.COMPLETE="complete",at.EventType=xt,xt.OPEN="a",xt.CLOSE="b",xt.ERROR="c",xt.MESSAGE="d",Tt.prototype.listen=Tt.prototype.O,F.prototype.listenOnce=F.prototype.P,F.prototype.getLastError=F.prototype.Sa,F.prototype.getLastErrorCode=F.prototype.Ia,F.prototype.getStatus=F.prototype.da,F.prototype.getResponseJson=F.prototype.Wa,F.prototype.getResponseText=F.prototype.ja,F.prototype.send=F.prototype.ha,F.prototype.setWithCredentials=F.prototype.Oa,mo.prototype.digest=mo.prototype.l,mo.prototype.reset=mo.prototype.reset,mo.prototype.update=mo.prototype.j,Sr.prototype.add=Sr.prototype.add,Sr.prototype.multiply=Sr.prototype.R,Sr.prototype.modulo=Sr.prototype.gb,Sr.prototype.compare=Sr.prototype.X,Sr.prototype.toNumber=Sr.prototype.ea,Sr.prototype.toString=Sr.prototype.toString,Sr.prototype.getBits=Sr.prototype.D,Sr.fromNumber=$,Sr.fromString=function Q(r,e){if(0==r.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==r.charAt(0))return Ar(Q(r.substring(1),e));if(0<=r.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=$(Math.pow(e,8)),s=ie,c=0;c<r.length;c+=8){var f=Math.min(8,r.length-c),E=parseInt(r.substring(c,c+f),e);8>f?(f=$(Math.pow(e,f)),s=s.R(f).add($(E))):s=(s=s.R(t)).add($(E))}return s};var Wo=Ue.createWebChannelTransport=function(){return new Fs},yo=Ue.getStatEventTarget=function(){return Vt()},Ko=Ue.ErrorCode=vr,Es=Ue.EventType=Wr,Xs=Ue.Event=Je,Ls=Ue.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Qs=Ue.FetchXmlHttpFactory=oa,rl=Ue.WebChannel=at,El=Ue.XhrIo=F,Rc=Ue.Md5=mo,qo=Ue.Integer=Sr;const qc="@firebase/firestore";class Wi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wi.UNAUTHENTICATED=new Wi(null),Wi.GOOGLE_CREDENTIALS=new Wi("google-credentials-uid"),Wi.FIRST_PARTY=new Wi("first-party-uid"),Wi.MOCK_USER=new Wi("mock-user");let vo="9.21.0";const Js=new it.Yd("@firebase/firestore");function ac(){return Js.logLevel}function _n(r,...e){if(Js.logLevel<=it.in.DEBUG){const t=e.map(Yc);Js.debug(`Firestore (${vo}): ${r}`,...t)}}function Ji(r,...e){if(Js.logLevel<=it.in.ERROR){const t=e.map(Yc);Js.error(`Firestore (${vo}): ${r}`,...t)}}function mi(r,...e){if(Js.logLevel<=it.in.WARN){const t=e.map(Yc);Js.warn(`Firestore (${vo}): ${r}`,...t)}}function Yc(r){if("string"==typeof r)return r;try{return JSON.stringify(r)}catch{return r}}function Kn(r="Unexpected state"){const e=`FIRESTORE (${vo}) INTERNAL ASSERTION FAILED: `+r;throw Ji(e),new Error(e)}function dr(r,e){r||Kn()}function jn(r,e){return r}const Ht={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class hn extends et.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class si{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class il{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Wi.UNAUTHENTICATED))}shutdown(){}}class Il{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ma{constructor(e){this.t=e,this.currentUser=Wi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let c=this.i;const f=J=>this.i!==c?(c=this.i,t(J)):Promise.resolve();let E=new si;this.o=()=>{this.i++,this.currentUser=this.u(),E.resolve(),E=new si,e.enqueueRetryable(()=>f(this.currentUser))};const k=()=>{const J=E;e.enqueueRetryable((0,de.Z)(function*(){yield J.promise,yield f(s.currentUser)}))},G=J=>{_n("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=J,this.auth.addAuthTokenListener(this.o),k()};this.t.onInit(J=>G(J)),setTimeout(()=>{if(!this.auth){const J=this.t.getImmediate({optional:!0});J?G(J):(_n("FirebaseAuthCredentialsProvider","Auth not yet detected"),E.resolve(),E=new si)}},0),k()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(_n("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(dr("string"==typeof s.accessToken),new il(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return dr(null===e||"string"==typeof e),new Wi(e)}}class $d{constructor(e,t,s){this.h=e,this.l=t,this.m=s,this.type="FirstParty",this.user=Wi.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Zc{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new $d(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Wi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $o{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wl{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const s=f=>{null!=f.error&&_n("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${f.error.message}`);const E=f.token!==this.T;return this.T=f.token,_n("FirebaseAppCheckTokenProvider",`Received ${E?"new":"existing"} token.`),E?t(f.token):Promise.resolve()};this.o=f=>{e.enqueueRetryable(()=>s(f))};const c=f=>{_n("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=f,this.appCheck.addTokenListener(this.o)};this.I.onInit(f=>c(f)),setTimeout(()=>{if(!this.appCheck){const f=this.I.getImmediate({optional:!0});f?c(f):_n("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(dr("string"==typeof t.token),this.T=t.token,new $o(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function eo(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class ma{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const c=eo(40);for(let f=0;f<c.length;++f)s.length<20&&c[f]<t&&(s+=e.charAt(c[f]%e.length))}return s}}function pr(r,e){return r<e?-1:r>e?1:0}function la(r,e,t){return r.length===e.length&&r.every((s,c)=>t(s,e[c]))}function Xc(r){return r+"\0"}class ci{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new hn(Ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new hn(Ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new hn(Ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new hn(Ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ci.fromMillis(Date.now())}static fromDate(e){return ci.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new ci(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pr(this.nanoseconds,e.nanoseconds):pr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class sr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new sr(e)}static min(){return new sr(new ci(0,0))}static max(){return new sr(new ci(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Pc{constructor(e,t,s){void 0===t?t=0:t>e.length&&Kn(),void 0===s?s=e.length-t:s>e.length-t&&Kn(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===Pc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pc?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let c=0;c<s;c++){const f=e.get(c),E=t.get(c);if(f<E)return-1;if(f>E)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ei extends Pc{construct(e,t,s){return new Ei(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new hn(Ht.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(c=>c.length>0))}return new Ei(t)}static emptyPath(){return new Ei([])}}const Ni=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ps extends Pc{construct(e,t,s){return new ps(e,t,s)}static isValidIdentifier(e){return Ni.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ps.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ps(["__name__"])}static fromServerFormat(e){const t=[];let s="",c=0;const f=()=>{if(0===s.length)throw new hn(Ht.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let E=!1;for(;c<e.length;){const k=e[c];if("\\"===k){if(c+1===e.length)throw new hn(Ht.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const G=e[c+1];if("\\"!==G&&"."!==G&&"`"!==G)throw new hn(Ht.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=G,c+=2}else"`"===k?(E=!E,c++):"."!==k||E?(s+=k,c++):(f(),c++)}if(f(),E)throw new hn(Ht.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ps(t)}static emptyPath(){return new ps([])}}class Ln{constructor(e){this.path=e}static fromPath(e){return new Ln(Ei.fromString(e))}static fromName(e){return new Ln(Ei.fromString(e).popFirst(5))}static empty(){return new Ln(Ei.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ei.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ei.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ln(new Ei(e.slice()))}}class zl{constructor(e,t,s,c){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=c}}function dc(r){return r.fields.find(e=>2===e.kind)}function Cl(r){return r.fields.filter(e=>2!==e.kind)}zl.UNKNOWN_ID=-1;class hc{constructor(e,t){this.fieldPath=e,this.kind=t}}class Oc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Oc(0,es.min())}}function Jc(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,c=sr.fromTimestamp(1e9===s?new ci(t+1,0):new ci(t,s));return new es(c,Ln.empty(),e)}function Ds(r){return new es(r.readTime,r.key,-1)}class es{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new es(sr.min(),Ln.empty(),-1)}static max(){return new es(sr.max(),Ln.empty(),-1)}}function Dl(r,e){let t=r.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ln.comparator(r.documentKey,e.documentKey),0!==t?t:pr(r.largestBatchId,e.largestBatchId))}const Gl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qr{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Rr(r){return Yr.apply(this,arguments)}function Yr(){return Yr=(0,de.Z)(function*(r){if(r.code!==Ht.FAILED_PRECONDITION||r.message!==Gl)throw r;_n("LocalStore","Unexpectedly lost primary lease")}),Yr.apply(this,arguments)}class $t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Kn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new $t((s,c)=>{this.nextCallback=f=>{this.wrapSuccess(e,f).next(s,c)},this.catchCallback=f=>{this.wrapFailure(t,f).next(s,c)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof $t?t:$t.resolve(t)}catch(t){return $t.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):$t.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):$t.reject(t)}static resolve(e){return new $t((t,s)=>{t(e)})}static reject(e){return new $t((t,s)=>{s(e)})}static waitFor(e){return new $t((t,s)=>{let c=0,f=0,E=!1;e.forEach(k=>{++c,k.next(()=>{++f,E&&f===c&&t()},G=>s(G))}),E=!0,f===c&&t()})}static or(e){let t=$t.resolve(!1);for(const s of e)t=t.next(c=>c?$t.resolve(c):s());return t}static forEach(e,t){const s=[];return e.forEach((c,f)=>{s.push(t.call(this,c,f))}),this.waitFor(s)}static mapArray(e,t){return new $t((s,c)=>{const f=e.length,E=new Array(f);let k=0;for(let G=0;G<f;G++){const J=G;t(e[J]).next(ue=>{E[J]=ue,++k,k===f&&s(E)},ue=>c(ue))}})}static doWhile(e,t){return new $t((s,c)=>{const f=()=>{!0===e()?t().next(()=>{f()},c):s()};f()})}}class Di{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.R=new si,this.transaction.oncomplete=()=>{this.R.resolve()},this.transaction.onabort=()=>{t.error?this.R.reject(new ca(e,t.error)):this.R.resolve()},this.transaction.onerror=s=>{const c=x(s.target.error);this.R.reject(new ca(e,c))}}static open(e,t,s,c){try{return new Di(t,e.transaction(c,s))}catch(f){throw new ca(t,f)}}get v(){return this.R.promise}abort(e){e&&this.R.reject(e),this.aborted||(_n("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new ui(t)}}class to{constructor(e,t,s){this.name=e,this.version=t,this.V=s,12.2===to.S((0,et.z$)())&&Ji("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return _n("SimpleDb","Removing database:",e),Pr(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,et.hl)())return!1;if(to.C())return!0;const e=(0,et.z$)(),t=to.S(e),s=0<t&&t<10,c=to.N(e),f=0<c&&c<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||f)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static N(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}O(e){var t=this;return(0,de.Z)(function*(){return t.db||(_n("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,c)=>{const f=indexedDB.open(t.name,t.version);f.onsuccess=E=>{s(E.target.result)},f.onblocked=()=>{c(new ca(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},f.onerror=E=>{const k=E.target.error;c("VersionError"===k.name?new hn(Ht.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===k.name?new hn(Ht.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+k):new ca(e,k))},f.onupgradeneeded=E=>{_n("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',E.oldVersion),t.V.$(E.target.result,f.transaction,E.oldVersion,t.version).next(()=>{_n("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=s=>t.F(s)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,c){var f=this;return(0,de.Z)(function*(){const E="readonly"===t;let k=0;for(;;){++k;try{f.db=yield f.O(e);const G=Di.open(f.db,e,E?"readonly":"readwrite",s),J=c(G).next(ue=>(G.P(),ue)).catch(ue=>(G.abort(ue),$t.reject(ue))).toPromise();return J.catch(()=>{}),yield G.v,J}catch(G){const J=G,ue="FirebaseError"!==J.name&&k<3;if(_n("SimpleDb","Transaction failed with error:",J.message,"Retrying:",ue),f.close(),!ue)return Promise.reject(J)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Eu{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Pr(this.L.delete())}}class ca extends hn{constructor(e,t){super(Ht.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Yo(r){return"IndexedDbTransactionError"===r.name}class ui{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(_n("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(_n("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),Pr(s)}add(e){return _n("SimpleDb","ADD",this.store.name,e,e),Pr(this.store.add(e))}get(e){return Pr(this.store.get(e)).next(t=>(void 0===t&&(t=null),_n("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return _n("SimpleDb","DELETE",this.store.name,e),Pr(this.store.delete(e))}count(){return _n("SimpleDb","COUNT",this.store.name),Pr(this.store.count())}j(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const c=this.cursor(s),f=[];return this.W(c,(E,k)=>{f.push(k)}).next(()=>f)}{const c=this.store.getAll(s.range);return new $t((f,E)=>{c.onerror=k=>{E(k.target.error)},c.onsuccess=k=>{f(k.target.result)}})}}H(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new $t((c,f)=>{s.onerror=E=>{f(E.target.error)},s.onsuccess=E=>{c(E.target.result)}})}J(e,t){_n("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.Y=!1;const c=this.cursor(s);return this.W(c,(f,E,k)=>k.delete())}X(e,t){let s;t?s=e:(s={},t=e);const c=this.cursor(s);return this.W(c,t)}Z(e){const t=this.cursor({});return new $t((s,c)=>{t.onerror=f=>{const E=x(f.target.error);c(E)},t.onsuccess=f=>{const E=f.target.result;E?e(E.primaryKey,E.value).next(k=>{k?E.continue():s()}):s()}})}W(e,t){const s=[];return new $t((c,f)=>{e.onerror=E=>{f(E.target.error)},e.onsuccess=E=>{const k=E.target.result;if(!k)return void c();const G=new Eu(k),J=t(k.primaryKey,k.value,G);if(J instanceof $t){const ue=J.catch(tt=>(G.done(),$t.reject(tt)));s.push(ue)}G.isDone?c():null===G.K?k.continue():k.continue(G.K)}}).next(()=>$t.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.Y?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Pr(r){return new $t((e,t)=>{r.onsuccess=s=>{e(s.target.result)},r.onerror=s=>{const c=x(s.target.error);t(c)}})}let S=!1;function x(r){const e=to.S((0,et.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const s=new hn("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return S||(S=!0,setTimeout(()=>{throw s},0)),s}}return r}class w{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;_n("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,de.Z)(function*(){t.task=null;try{_n("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(s){Yo(s)?_n("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield Rr(s)}yield t.et(6e4)}))}}class O{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,de.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.st(s,e))})()}st(e,t){const s=new Set;let c=t,f=!0;return $t.doWhile(()=>!0===f&&c>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(E=>{if(null!==E&&!s.has(E))return _n("IndexBackiller",`Processing collection: ${E}`),this.it(e,E,c).next(k=>{c-=k,s.add(E)});f=!1})).next(()=>t-c)}it(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(c=>this.localStore.localDocuments.getNextDocuments(e,t,c,s).next(f=>{const E=f.changes;return this.localStore.indexManager.updateIndexEntries(e,E).next(()=>this.rt(c,f)).next(k=>(_n("IndexBackiller",`Updating offset: ${k}`),this.localStore.indexManager.updateCollectionGroup(e,t,k))).next(()=>E.size)}))}rt(e,t){let s=e;return t.changes.forEach((c,f)=>{const E=Ds(f);Dl(E,s)>0&&(s=E)}),new es(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let z=(()=>{class r{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=c=>this.ot(c),this.ut=c=>s.writeSequenceNumber(c))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return r.ct=-1,r})();function re(r){return null==r}function le(r){return 0===r&&1/r==-1/0}function lt(r){return"number"==typeof r&&Number.isInteger(r)&&!le(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}function Ut(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Hn(e)),e=En(r.get(t),e);return Hn(e)}function En(r,e){let t=e;const s=r.length;for(let c=0;c<s;c++){const f=r.charAt(c);switch(f){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=f}}return t}function Hn(r){return r+"\x01\x01"}function $n(r){const e=r.length;if(dr(e>=2),2===e)return dr("\x01"===r.charAt(0)&&"\x01"===r.charAt(1)),Ei.emptyPath();const t=e-2,s=[];let c="";for(let f=0;f<e;){const E=r.indexOf("\x01",f);switch((E<0||E>t)&&Kn(),r.charAt(E+1)){case"\x01":const k=r.substring(f,E);let G;0===c.length?G=k:(c+=k,G=c,c=""),s.push(G);break;case"\x10":c+=r.substring(f,E),c+="\0";break;case"\x11":c+=r.substring(f,E+1);break;default:Kn()}f=E+2}return new Ei(s)}const Ii=["userId","batchId"];function rs(r,e){return[r,Ut(e)]}function $s(r,e,t){return[r,Ut(e),t]}const ya={},Mo=["prefixPath","collectionGroup","readTime","documentId"],Is=["prefixPath","collectionGroup","documentId"],Or=["collectionGroup","readTime","prefixPath","documentId"],fc=["canonicalId","targetId"],_o=["targetId","path"],eu=["path","targetId"],Bo=["collectionId","parent"],Tl=["indexId","uid"],sl=["uid","sequenceNumber"],Bd=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Zo=["indexId","uid","orderedDocumentKey"],rd=["userId","collectionPath","documentId"],id=["userId","collectionPath","largestBatchId"],sd=["userId","collectionGroup","largestBatchId"],Iu=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ud=[...Iu,"documentOverlays"],kc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Nc=kc,Fc=[...Nc,"indexConfiguration","indexState","indexEntries"];class wu extends qr{constructor(e,t){super(),this.at=e,this.currentSequenceNumber=t}}function Bs(r,e){const t=jn(r);return to.M(t.at,e)}function od(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function ol(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function tu(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class xr{constructor(e,t){this.comparator=e,this.root=t||Us.EMPTY}insert(e,t){return new xr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Us.BLACK,null,null))}remove(e){return new xr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Us.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const c=this.comparator(e,s.key);if(0===c)return t+s.left.size;c<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sl(this.root,e,this.comparator,!0)}}class Sl{constructor(e,t,s,c){this.isReverse=c,this.nodeStack=[];let f=1;for(;!e.isEmpty();)if(f=t?s(e.key,t):1,t&&c&&(f*=-1),f<0)e=this.isReverse?e.left:e.right;else{if(0===f){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Us{constructor(e,t,s,c,f){this.key=e,this.value=t,this.color=null!=s?s:Us.RED,this.left=null!=c?c:Us.EMPTY,this.right=null!=f?f:Us.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,c,f){return new Us(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=c?c:this.left,null!=f?f:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let c=this;const f=s(e,c.key);return c=f<0?c.copy(null,null,null,c.left.insert(e,t,s),null):0===f?c.copy(null,t,null,null,null):c.copy(null,null,null,null,c.right.insert(e,t,s)),c.fixUp()}removeMin(){if(this.left.isEmpty())return Us.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,c=this;if(t(e,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(e,t),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),0===t(e,c.key)){if(c.right.isEmpty())return Us.EMPTY;s=c.right.min(),c=c.copy(s.key,s.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(e,t))}return c.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Us.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Us.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Kn();const e=this.left.check();if(e!==this.right.check())throw Kn();return e+(this.isRed()?0:1)}}Us.EMPTY=null,Us.RED=!0,Us.BLACK=!1,Us.EMPTY=new class{constructor(){this.size=0}get key(){throw Kn()}get value(){throw Kn()}get color(){throw Kn()}get left(){throw Kn()}get right(){throw Kn()}copy(r,e,t,s,c){return this}insert(r,e,t){return new Us(r,e)}remove(r,e){return this}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ui{constructor(e){this.comparator=e,this.data=new xr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const c=s.getNext();if(this.comparator(c.key,e[1])>=0)return;t(c.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Al(this.data.getIterator())}getIteratorFrom(e){return new Al(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Ui)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const c=t.getNext().key,f=s.getNext().key;if(0!==this.comparator(c,f))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ui(this.comparator);return t.data=e,t}}class Al{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function va(r){return r.hasNext()?r.getNext():void 0}class gs{constructor(e){this.fields=e,e.sort(ps.comparator)}static empty(){return new gs([])}unionWith(e){let t=new Ui(ps.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new gs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return la(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class pc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class no{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new pc("Invalid base64 string: "+c):c}}(e);return new no(t)}static fromUint8Array(e){const t=function(s){let c="";for(let f=0;f<s.length;++f)c+=String.fromCharCode(s[f]);return c}(e);return new no(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}no.EMPTY_BYTE_STRING=new no("");const Cu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xl(r){if(dr(!!r),"string"==typeof r){let e=0;const t=Cu.exec(r);if(dr(!!t),t[1]){let c=t[1];c=(c+"000000000").substr(0,9),e=Number(c)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Hr(r.seconds),nanos:Hr(r.nanos)}}function Hr(r){return"number"==typeof r?r:"string"==typeof r?Number(r):0}function ro(r){return"string"==typeof r?no.fromBase64String(r):no.fromUint8Array(r)}function Lc(r){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==r?void 0:r.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function gc(r){const e=r.mapValue.fields.__previous_value__;return Lc(e)?gc(e):e}function Uo(r){const e=xl(r.mapValue.fields.__local_write_time__.timestampValue);return new ci(e.seconds,e.nanos)}class Pa{constructor(e,t,s,c,f,E,k,G){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=c,this.ssl=f,this.forceLongPolling=E,this.autoDetectLongPolling=k,this.useFetchStreams=G}}class Xo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Xo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Xo&&e.projectId===this.projectId&&e.database===this.database}}const Eo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},nu={nullValue:"NULL_VALUE"};function za(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Lc(r)?4:jr(r)?9007199254740991:10:Kn()}function Qo(r,e){if(r===e)return!0;const t=za(r);if(t!==za(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Uo(r).isEqual(Uo(e));case 3:return function(s,c){if("string"==typeof s.timestampValue&&"string"==typeof c.timestampValue&&s.timestampValue.length===c.timestampValue.length)return s.timestampValue===c.timestampValue;const f=xl(s.timestampValue),E=xl(c.timestampValue);return f.seconds===E.seconds&&f.nanos===E.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return c=e,ro(r.bytesValue).isEqual(ro(c.bytesValue));case 7:return r.referenceValue===e.referenceValue;case 8:return function(s,c){return Hr(s.geoPointValue.latitude)===Hr(c.geoPointValue.latitude)&&Hr(s.geoPointValue.longitude)===Hr(c.geoPointValue.longitude)}(r,e);case 2:return function(s,c){if("integerValue"in s&&"integerValue"in c)return Hr(s.integerValue)===Hr(c.integerValue);if("doubleValue"in s&&"doubleValue"in c){const f=Hr(s.doubleValue),E=Hr(c.doubleValue);return f===E?le(f)===le(E):isNaN(f)&&isNaN(E)}return!1}(r,e);case 9:return la(r.arrayValue.values||[],e.arrayValue.values||[],Qo);case 10:return function(s,c){const f=s.mapValue.fields||{},E=c.mapValue.fields||{};if(od(f)!==od(E))return!1;for(const k in f)if(f.hasOwnProperty(k)&&(void 0===E[k]||!Qo(f[k],E[k])))return!1;return!0}(r,e);default:return Kn()}var c}function ru(r,e){return void 0!==(r.values||[]).find(t=>Qo(t,e))}function Ga(r,e){if(r===e)return 0;const t=za(r),s=za(e);if(t!==s)return pr(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return pr(r.booleanValue,e.booleanValue);case 2:return function(c,f){const E=Hr(c.integerValue||c.doubleValue),k=Hr(f.integerValue||f.doubleValue);return E<k?-1:E>k?1:E===k?0:isNaN(E)?isNaN(k)?0:-1:1}(r,e);case 3:return Vd(r.timestampValue,e.timestampValue);case 4:return Vd(Uo(r),Uo(e));case 5:return pr(r.stringValue,e.stringValue);case 6:return function(c,f){const E=ro(c),k=ro(f);return E.compareTo(k)}(r.bytesValue,e.bytesValue);case 7:return function(c,f){const E=c.split("/"),k=f.split("/");for(let G=0;G<E.length&&G<k.length;G++){const J=pr(E[G],k[G]);if(0!==J)return J}return pr(E.length,k.length)}(r.referenceValue,e.referenceValue);case 8:return function(c,f){const E=pr(Hr(c.latitude),Hr(f.latitude));return 0!==E?E:pr(Hr(c.longitude),Hr(f.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return function(c,f){const E=c.values||[],k=f.values||[];for(let G=0;G<E.length&&G<k.length;++G){const J=Ga(E[G],k[G]);if(J)return J}return pr(E.length,k.length)}(r.arrayValue,e.arrayValue);case 10:return function(c,f){if(c===Eo.mapValue&&f===Eo.mapValue)return 0;if(c===Eo.mapValue)return 1;if(f===Eo.mapValue)return-1;const E=c.fields||{},k=Object.keys(E),G=f.fields||{},J=Object.keys(G);k.sort(),J.sort();for(let ue=0;ue<k.length&&ue<J.length;++ue){const tt=pr(k[ue],J[ue]);if(0!==tt)return tt;const Bt=Ga(E[k[ue]],G[J[ue]]);if(0!==Bt)return Bt}return pr(k.length,J.length)}(r.mapValue,e.mapValue);default:throw Kn()}}function Vd(r,e){if("string"==typeof r&&"string"==typeof e&&r.length===e.length)return pr(r,e);const t=xl(r),s=xl(e),c=pr(t.seconds,s.seconds);return 0!==c?c:pr(t.nanos,s.nanos)}function P(r){return B(r)}function B(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(s){const c=xl(s);return`time(${c.seconds},${c.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?ro(r.bytesValue).toBase64():"referenceValue"in r?Ln.fromName(r.referenceValue).toString():"geoPointValue"in r?`geo(${(e=r.geoPointValue).latitude},${e.longitude})`:"arrayValue"in r?function(s){let c="[",f=!0;for(const E of s.values||[])f?f=!1:c+=",",c+=B(E);return c+"]"}(r.arrayValue):"mapValue"in r?function(s){const c=Object.keys(s.fields||{}).sort();let f="{",E=!0;for(const k of c)E?E=!1:f+=",",f+=`${k}:${B(s.fields[k])}`;return f+"}"}(r.mapValue):Kn();var e}function Te(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function dt(r){return!!r&&"integerValue"in r}function Rt(r){return!!r&&"arrayValue"in r}function Wt(r){return!!r&&"nullValue"in r}function Un(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Nn(r){return!!r&&"mapValue"in r}function ir(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&"object"==typeof r.timestampValue)return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return ol(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=ir(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ir(r.arrayValue.values[t]);return e}return Object.assign({},r)}function jr(r){return"__max__"===(((r.mapValue||{}).fields||{}).__type__||{}).stringValue}function Nr(r){return"nullValue"in r?nu:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?Te(Xo.empty(),Ln.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:Kn()}function Po(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?Te(Xo.empty(),Ln.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?Eo:Kn()}function ws(r,e){const t=Ga(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function Rl(r,e){const t=Ga(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class Vs{constructor(e){this.value=e}static empty(){return new Vs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Nn(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ir(t)}setAll(e){let t=ps.emptyPath(),s={},c=[];e.forEach((E,k)=>{if(!t.isImmediateParentOf(k)){const G=this.getFieldsMap(t);this.applyChanges(G,s,c),s={},c=[],t=k.popLast()}E?s[k.lastSegment()]=ir(E):c.push(k.lastSegment())});const f=this.getFieldsMap(t);this.applyChanges(f,s,c)}delete(e){const t=this.field(e.popLast());Nn(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Qo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let c=t.mapValue.fields[e.get(s)];Nn(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=c),t=c}return t.mapValue.fields}applyChanges(e,t,s){ol(t,(c,f)=>e[c]=f);for(const c of s)delete e[c]}clone(){return new Vs(ir(this.value))}}function Wl(r){const e=[];return ol(r.fields,(t,s)=>{const c=new ps([t]);if(Nn(s)){const f=Wl(s.mapValue).fields;if(0===f.length)e.push(c);else for(const E of f)e.push(c.child(E))}else e.push(c)}),new gs(e)}class Ti{constructor(e,t,s,c,f,E,k){this.key=e,this.documentType=t,this.version=s,this.readTime=c,this.createTime=f,this.data=E,this.documentState=k}static newInvalidDocument(e){return new Ti(e,0,sr.min(),sr.min(),sr.min(),Vs.empty(),0)}static newFoundDocument(e,t,s,c){return new Ti(e,1,t,sr.min(),s,c,0)}static newNoDocument(e,t){return new Ti(e,2,t,sr.min(),sr.min(),Vs.empty(),0)}static newUnknownDocument(e,t){return new Ti(e,3,t,sr.min(),sr.min(),Vs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(sr.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=sr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ti&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ti(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Io{constructor(e,t){this.position=e,this.inclusive=t}}function iu(r,e,t){let s=0;for(let c=0;c<r.position.length;c++){const f=e[c],E=r.position[c];if(s=f.field.isKeyField()?Ln.comparator(Ln.fromName(E.referenceValue),t.key):Ga(E,t.data.field(f.field)),"desc"===f.dir&&(s*=-1),0!==s)break}return s}function jd(r,e){if(null===r)return null===e;if(null===e||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Qo(r.position[t],e.position[t]))return!1;return!0}class io{constructor(e,t="asc"){this.field=e,this.dir=t}}function xf(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class bu{}class hi extends bu{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new Dp(e,t,s):"array-contains"===t?new ad(e,s):"in"===t?new ll(e,s):"not-in"===t?new zd(e,s):"array-contains-any"===t?new ld(e,s):new hi(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new Mh(e,s):new Ml(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ga(t,this.value)):null!==t&&za(this.value)===za(t)&&this.matchesComparison(Ga(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Kn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Si extends bu{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new Si(e,t)}matches(e){return al(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function al(r){return"and"===r.op}function _a(r){return"or"===r.op}function Kl(r){return ql(r)&&al(r)}function ql(r){for(const e of r.filters)if(e instanceof Si)return!1;return!0}function xh(r){if(r instanceof hi)return r.field.canonicalString()+r.op.toString()+P(r.value);if(Kl(r))return r.filters.map(e=>xh(e)).join(",");{const e=r.filters.map(t=>xh(t)).join(",");return`${r.op}(${e})`}}function Hd(r,e){return r instanceof hi?(t=r,(s=e)instanceof hi&&t.op===s.op&&t.field.isEqual(s.field)&&Qo(t.value,s.value)):r instanceof Si?function(t,s){return s instanceof Si&&t.op===s.op&&t.filters.length===s.filters.length&&t.filters.reduce((c,f,E)=>c&&Hd(f,s.filters[E]),!0)}(r,e):void Kn();var t,s}function Du(r,e){const t=r.filters.concat(e);return Si.create(t,r.op)}function Rh(r){return r instanceof hi?`${(e=r).field.canonicalString()} ${e.op} ${P(e.value)}`:r instanceof Si?function(e){return e.op.toString()+" {"+e.getFilters().map(Rh).join(" ,")+"}"}(r):"Filter";var e}class Dp extends hi{constructor(e,t,s){super(e,t,s),this.key=Ln.fromName(s.referenceValue)}matches(e){const t=Ln.comparator(e.key,this.key);return this.matchesComparison(t)}}class Mh extends hi{constructor(e,t){super(e,"in",t),this.keys=Ph(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ml extends hi{constructor(e,t){super(e,"not-in",t),this.keys=Ph(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Ph(r,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>Ln.fromName(s.referenceValue))}class ad extends hi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Rt(t)&&ru(t.arrayValue,this.value)}}class ll extends hi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ru(this.value.arrayValue,t)}}class zd extends hi{constructor(e,t){super(e,"not-in",t)}matches(e){if(ru(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ru(this.value.arrayValue,t)}}class ld extends hi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Rt(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>ru(this.value.arrayValue,s))}}class ms{constructor(e,t=null,s=[],c=[],f=null,E=null,k=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=c,this.limit=f,this.startAt=E,this.endAt=k,this.ft=null}}function Wa(r,e=null,t=[],s=[],c=null,f=null,E=null){return new ms(r,e,t,s,c,f,E)}function Oa(r){const e=jn(r);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>xh(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(c=s).field.canonicalString()+c.dir;var c}).join(","),re(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>P(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>P(s)).join(",")),e.ft=t}return e.ft}function $c(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!xf(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Hd(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!jd(r.startAt,e.startAt)&&jd(r.endAt,e.endAt)}function Pl(r){return Ln.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length}function mc(r,e){return r.filters.filter(t=>t instanceof hi&&t.field.isEqual(e))}function yc(r,e,t){let s=nu,c=!0;for(const f of mc(r,e)){let E=nu,k=!0;switch(f.op){case"<":case"<=":E=Nr(f.value);break;case"==":case"in":case">=":E=f.value;break;case">":E=f.value,k=!1;break;case"!=":case"not-in":E=nu}ws({value:s,inclusive:c},{value:E,inclusive:k})<0&&(s=E,c=k)}if(null!==t)for(let f=0;f<r.orderBy.length;++f)if(r.orderBy[f].field.isEqual(e)){const E=t.position[f];ws({value:s,inclusive:c},{value:E,inclusive:t.inclusive})<0&&(s=E,c=t.inclusive);break}return{value:s,inclusive:c}}function Oh(r,e,t){let s=Eo,c=!0;for(const f of mc(r,e)){let E=Eo,k=!0;switch(f.op){case">=":case">":E=Po(f.value),k=!1;break;case"==":case"in":case"<=":E=f.value;break;case"<":E=f.value,k=!1;break;case"!=":case"not-in":E=Eo}Rl({value:s,inclusive:c},{value:E,inclusive:k})>0&&(s=E,c=k)}if(null!==t)for(let f=0;f<r.orderBy.length;++f)if(r.orderBy[f].field.isEqual(e)){const E=t.position[f];Rl({value:s,inclusive:c},{value:E,inclusive:t.inclusive})>0&&(s=E,c=t.inclusive);break}return{value:s,inclusive:c}}class Ea{constructor(e,t=null,s=[],c=[],f=null,E="F",k=null,G=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=c,this.limit=f,this.limitType=E,this.startAt=k,this.endAt=G,this.dt=null,this._t=null}}function su(r,e,t,s,c,f,E,k){return new Ea(r,e,t,s,c,f,E,k)}function Ol(r){return new Ea(r)}function cd(r){return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.explicitOrderBy.length||1===r.explicitOrderBy.length&&r.explicitOrderBy[0].field.isKeyField())}function vc(r){return r.explicitOrderBy.length>0?r.explicitOrderBy[0].field:null}function ud(r){for(const e of r.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function dd(r){return null!==r.collectionGroup}function Yl(r){const e=jn(r);if(null===e.dt){e.dt=[];const t=ud(e),s=vc(e);if(null!==t&&null===s)t.isKeyField()||e.dt.push(new io(t)),e.dt.push(new io(ps.keyField(),"asc"));else{let c=!1;for(const f of e.explicitOrderBy)e.dt.push(f),f.field.isKeyField()&&(c=!0);if(!c){const f=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new io(ps.keyField(),f))}}}return e.dt}function wo(r){const e=jn(r);if(!e._t)if("F"===e.limitType)e._t=Wa(e.path,e.collectionGroup,Yl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const f of Yl(e))t.push(new io(f.field,"desc"===f.dir?"asc":"desc"));const s=e.endAt?new Io(e.endAt.position,e.endAt.inclusive):null,c=e.startAt?new Io(e.startAt.position,e.startAt.inclusive):null;e._t=Wa(e.path,e.collectionGroup,t,e.filters,e.limit,s,c)}return e._t}function Tu(r,e){e.getFirstInequalityField(),ud(r);const t=r.filters.concat([e]);return new Ea(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function hd(r,e,t){return new Ea(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Zl(r,e){return $c(wo(r),wo(e))&&r.limitType===e.limitType}function fd(r){return`${Oa(wo(r))}|lt:${r.limitType}`}function Su(r){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(s=>Rh(s)).join(", ")}]`),re(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(s=>{return`${(c=s).field.canonicalString()} (${c.dir})`;var c}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>P(s)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>P(s)).join(",")),`Target(${t})`}(wo(r))}; limitType=${r.limitType})`}function _c(r,e){return e.isFoundDocument()&&function(t,s){const c=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(c):Ln.isDocumentKey(t.path)?t.path.isEqual(c):t.path.isImmediateParentOf(c)}(r,e)&&function(t,s){for(const c of Yl(t))if(!c.field.isKeyField()&&null===s.data.field(c.field))return!1;return!0}(r,e)&&function(t,s){for(const c of t.filters)if(!c.matches(s))return!1;return!0}(r,e)&&(s=e,!((t=r).startAt&&!function(c,f,E){const k=iu(c,f,E);return c.inclusive?k<=0:k<0}(t.startAt,Yl(t),s)||t.endAt&&!function(c,f,E){const k=iu(c,f,E);return c.inclusive?k>=0:k>0}(t.endAt,Yl(t),s)));var t,s}function kh(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Nh(r){return(e,t)=>{let s=!1;for(const c of Yl(r)){const f=Tp(c,e,t);if(0!==f)return f;s=s||c.field.isKeyField()}return 0}}function Tp(r,e,t){const s=r.field.isKeyField()?Ln.comparator(e.key,t.key):function(c,f,E){const k=f.data.field(c),G=E.data.field(c);return null!==k&&null!==G?Ga(k,G):Kn()}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Kn()}}class Ec{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[c,f]of s)if(this.equalsFn(c,e))return f}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),c=this.inner[s];if(void 0===c)return this.inner[s]=[[e,t]],void this.innerSize++;for(let f=0;f<c.length;f++)if(this.equalsFn(c[f][0],e))return void(c[f]=[e,t]);c.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let c=0;c<s.length;c++)if(this.equalsFn(s[c][0],e))return 1===s.length?delete this.inner[t]:s.splice(c,1),this.innerSize--,!0;return!1}forEach(e){ol(this.inner,(t,s)=>{for(const[c,f]of s)e(c,f)})}isEmpty(){return tu(this.inner)}size(){return this.innerSize}}const Sp=new xr(Ln.comparator);function js(){return Sp}const pd=new xr(Ln.comparator);function Xl(...r){let e=pd;for(const t of r)e=e.insert(t.key,t);return e}function ou(r){let e=pd;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function Ia(){return Au()}function Gd(){return Au()}function Au(){return new Ec(r=>r.toString(),(r,e)=>r.isEqual(e))}const Rf=new xr(Ln.comparator),Fh=new Ui(Ln.comparator);function Zr(...r){let e=Fh;for(const t of r)e=e.add(t);return e}const Lh=new Ui(pr);function xu(){return Lh}function au(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:le(e)?"-0":e}}function Wd(r){return{integerValue:""+r}}function wa(r,e){return lt(e)?Wd(e):au(r,e)}class Ic{constructor(){this._=void 0}}function Kd(r,e,t){return r instanceof wc?function(s,c){const f={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return c&&Lc(c)&&(c=gc(c)),c&&(f.fields.__previous_value__=c),{mapValue:f}}(t,e):r instanceof lu?qd(r,e):r instanceof Cc?Jo(r,e):function(s,c){const f=Ru(s,c),E=Mf(f)+Mf(s.wt);return dt(f)&&dt(s.wt)?Wd(E):au(s.serializer,E)}(r,e)}function Ql(r,e,t){return r instanceof lu?qd(r,e):r instanceof Cc?Jo(r,e):t}function Ru(r,e){return r instanceof cl?dt(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class wc extends Ic{}class lu extends Ic{constructor(e){super(),this.elements=e}}function qd(r,e){const t=Pf(e);for(const s of r.elements)t.some(c=>Qo(c,s))||t.push(s);return{arrayValue:{values:t}}}class Cc extends Ic{constructor(e){super(),this.elements=e}}function Jo(r,e){let t=Pf(e);for(const s of r.elements)t=t.filter(c=>!Qo(c,s));return{arrayValue:{values:t}}}class cl extends Ic{constructor(e,t){super(),this.serializer=e,this.wt=t}}function Mf(r){return Hr(r.integerValue||r.doubleValue)}function Pf(r){return Rt(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class gd{constructor(e,t){this.field=e,this.transform=t}}class ka{constructor(e,t){this.version=e,this.transformResults=t}}class us{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new us}static exists(e){return new us(void 0,e)}static updateTime(e){return new us(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cu(r,e){return void 0!==r.updateTime?e.isFoundDocument()&&e.version.isEqual(r.updateTime):void 0===r.exists||r.exists===e.isFoundDocument()}class md{}function kl(r,e){if(!r.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return r.isNoDocument()?new C(r.key,us.none()):new ul(r.key,r.data,us.none());{const t=r.data,s=Vs.empty();let c=new Ui(ps.comparator);for(let f of e.fields)if(!c.has(f)){let E=t.field(f);null===E&&f.length>1&&(f=f.popLast(),E=t.field(f)),null===E?s.delete(f):s.set(f,E),c=c.add(f)}return new Jl(r.key,s,new gs(c.toArray()),us.none())}}function yd(r,e,t){r instanceof ul?function(s,c,f){const E=s.value.clone(),k=vd(s.fieldTransforms,c,f.transformResults);E.setAll(k),c.convertToFoundDocument(f.version,E).setHasCommittedMutations()}(r,e,t):r instanceof Jl?function(s,c,f){if(!cu(s.precondition,c))return void c.convertToUnknownDocument(f.version);const E=vd(s.fieldTransforms,c,f.transformResults),k=c.data;k.setAll($h(s)),k.setAll(E),c.convertToFoundDocument(f.version,k).setHasCommittedMutations()}(r,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function uu(r,e,t,s){return r instanceof ul?function(c,f,E,k){if(!cu(c.precondition,f))return E;const G=c.value.clone(),J=kf(c.fieldTransforms,k,f);return G.setAll(J),f.convertToFoundDocument(f.version,G).setHasLocalMutations(),null}(r,e,t,s):r instanceof Jl?function(c,f,E,k){if(!cu(c.precondition,f))return E;const G=kf(c.fieldTransforms,k,f),J=f.data;return J.setAll($h(c)),J.setAll(G),f.convertToFoundDocument(f.version,J).setHasLocalMutations(),null===E?null:E.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(ue=>ue.field))}(r,e,t,s):(E=t,cu(r.precondition,f=e)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):E);var f,E}function Bc(r,e){let t=null;for(const s of r.fieldTransforms){const c=e.data.field(s.field),f=Ru(s.transform,c||null);null!=f&&(null===t&&(t=Vs.empty()),t.set(s.field,f))}return t||null}function Nl(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=r.fieldTransforms)&&void 0===s||t&&s&&la(t,s,(c,f)=>function Of(r,e){return r.field.isEqual(e.field)&&(s=e.transform,(t=r.transform)instanceof lu&&s instanceof lu||t instanceof Cc&&s instanceof Cc?la(t.elements,s.elements,Qo):t instanceof cl&&s instanceof cl?Qo(t.wt,s.wt):t instanceof wc&&s instanceof wc);var t,s}(c,f))))&&(0===r.type?r.value.isEqual(e.value):1!==r.type||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask));var t,s}class ul extends md{constructor(e,t,s,c=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}}class Jl extends md{constructor(e,t,s,c,f=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=c,this.fieldTransforms=f,this.type=1}getFieldMask(){return this.fieldMask}}function $h(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function vd(r,e,t){const s=new Map;dr(r.length===t.length);for(let c=0;c<t.length;c++){const f=r[c],E=f.transform,k=e.data.field(f.field);s.set(f.field,Ql(E,k,t[c]))}return s}function kf(r,e,t){const s=new Map;for(const c of r){const f=c.transform,E=t.data.field(c.field);s.set(c.field,Kd(f,E,e))}return s}class C extends md{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class g extends md{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class y{constructor(e,t,s,c){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=c}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let c=0;c<this.mutations.length;c++){const f=this.mutations[c];f.key.isEqual(e.key)&&yd(f,e,s[c])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=uu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=uu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Gd();return this.mutations.forEach(c=>{const f=e.get(c.key),E=f.overlayedDocument;let k=this.applyToLocalView(E,f.mutatedFields);k=t.has(c.key)?null:k;const G=kl(E,k);null!==G&&s.set(c.key,G),E.isValidDocument()||E.convertToNoDocument(sr.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Zr())}isEqual(e){return this.batchId===e.batchId&&la(this.mutations,e.mutations,(t,s)=>Nl(t,s))&&la(this.baseMutations,e.baseMutations,(t,s)=>Nl(t,s))}}class A{constructor(e,t,s,c){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=c}static from(e,t,s){dr(e.mutations.length===s.length);let c=Rf;const f=e.mutations;for(let E=0;E<f.length;E++)c=c.insert(f[E].key,s[E].version);return new A(e,t,s,c)}}class K{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class st{constructor(e,t){this.count=e,this.unchangedNames=t}}var bt,rn;function Bn(r){switch(r){default:return Kn();case Ht.CANCELLED:case Ht.UNKNOWN:case Ht.DEADLINE_EXCEEDED:case Ht.RESOURCE_EXHAUSTED:case Ht.INTERNAL:case Ht.UNAVAILABLE:case Ht.UNAUTHENTICATED:return!1;case Ht.INVALID_ARGUMENT:case Ht.NOT_FOUND:case Ht.ALREADY_EXISTS:case Ht.PERMISSION_DENIED:case Ht.FAILED_PRECONDITION:case Ht.ABORTED:case Ht.OUT_OF_RANGE:case Ht.UNIMPLEMENTED:case Ht.DATA_LOSS:return!0}}function or(r){if(void 0===r)return Ji("GRPC error has no .code"),Ht.UNKNOWN;switch(r){case bt.OK:return Ht.OK;case bt.CANCELLED:return Ht.CANCELLED;case bt.UNKNOWN:return Ht.UNKNOWN;case bt.DEADLINE_EXCEEDED:return Ht.DEADLINE_EXCEEDED;case bt.RESOURCE_EXHAUSTED:return Ht.RESOURCE_EXHAUSTED;case bt.INTERNAL:return Ht.INTERNAL;case bt.UNAVAILABLE:return Ht.UNAVAILABLE;case bt.UNAUTHENTICATED:return Ht.UNAUTHENTICATED;case bt.INVALID_ARGUMENT:return Ht.INVALID_ARGUMENT;case bt.NOT_FOUND:return Ht.NOT_FOUND;case bt.ALREADY_EXISTS:return Ht.ALREADY_EXISTS;case bt.PERMISSION_DENIED:return Ht.PERMISSION_DENIED;case bt.FAILED_PRECONDITION:return Ht.FAILED_PRECONDITION;case bt.ABORTED:return Ht.ABORTED;case bt.OUT_OF_RANGE:return Ht.OUT_OF_RANGE;case bt.UNIMPLEMENTED:return Ht.UNIMPLEMENTED;case bt.DATA_LOSS:return Ht.DATA_LOSS;default:return Kn()}}(rn=bt||(bt={}))[rn.OK=0]="OK",rn[rn.CANCELLED=1]="CANCELLED",rn[rn.UNKNOWN=2]="UNKNOWN",rn[rn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rn[rn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rn[rn.NOT_FOUND=5]="NOT_FOUND",rn[rn.ALREADY_EXISTS=6]="ALREADY_EXISTS",rn[rn.PERMISSION_DENIED=7]="PERMISSION_DENIED",rn[rn.UNAUTHENTICATED=16]="UNAUTHENTICATED",rn[rn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rn[rn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rn[rn.ABORTED=10]="ABORTED",rn[rn.OUT_OF_RANGE=11]="OUT_OF_RANGE",rn[rn.UNIMPLEMENTED=12]="UNIMPLEMENTED",rn[rn.INTERNAL=13]="INTERNAL",rn[rn.UNAVAILABLE=14]="UNAVAILABLE",rn[rn.DATA_LOSS=15]="DATA_LOSS";class ar{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Ki}static getOrCreateInstance(){return null===Ki&&(Ki=new ar),Ki}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Ki=null;function Ca(){return new TextEncoder}const Mu=new qo([4294967295,4294967295],0);function ec(r){const e=Ca().encode(r),t=new Rc;return t.update(e),new Uint8Array(t.digest())}function is(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),c=e.getUint32(8,!0),f=e.getUint32(12,!0);return[new qo([t,s],0),new qo([c,f],0)]}class Yd{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Pu(`Invalid padding: ${t}`);if(s<0)throw new Pu(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new Pu(`Invalid hash count: ${s}`);if(0===e.length&&0!==t)throw new Pu(`Invalid padding when bitmap length is 0: ${t}`);this.yt=8*e.length-t,this.It=qo.fromNumber(this.yt)}Tt(e,t,s){let c=e.add(t.multiply(qo.fromNumber(s)));return 1===c.compare(Mu)&&(c=new qo([c.getBits(0),c.getBits(1)],0)),c.modulo(this.It).toNumber()}Et(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}At(e){if(0===this.yt)return!1;const t=ec(e),[s,c]=is(t);for(let f=0;f<this.hashCount;f++){const E=this.Tt(s,c,f);if(!this.Et(E))return!1}return!0}static create(e,t,s){const c=e%8==0?0:8-e%8,f=new Uint8Array(Math.ceil(e/8)),E=new Yd(f,c,t);return s.forEach(k=>E.insert(k)),E}insert(e){if(0===this.yt)return;const t=ec(e),[s,c]=is(t);for(let f=0;f<this.hashCount;f++){const E=this.Tt(s,c,f);this.Rt(E)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Pu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Uc{constructor(e,t,s,c,f){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=c,this.resolvedLimboDocuments=f}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const c=new Map;return c.set(e,tc.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Uc(sr.min(),c,new xr(pr),js(),Zr())}}class tc{constructor(e,t,s,c,f){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=c,this.removedDocuments=f}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new tc(s,t,Zr(),Zr(),Zr())}}class Ou{constructor(e,t,s,c){this.vt=e,this.removedTargetIds=t,this.key=s,this.Pt=c}}class Zd{constructor(e,t){this.targetId=e,this.bt=t}}class _d{constructor(e,t,s=no.EMPTY_BYTE_STRING,c=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=c}}class Ed{constructor(){this.Vt=0,this.St=Cg(),this.Dt=no.EMPTY_BYTE_STRING,this.Ct=!1,this.xt=!0}get current(){return this.Ct}get resumeToken(){return this.Dt}get Nt(){return 0!==this.Vt}get kt(){return this.xt}Mt(e){e.approximateByteSize()>0&&(this.xt=!0,this.Dt=e)}Ot(){let e=Zr(),t=Zr(),s=Zr();return this.St.forEach((c,f)=>{switch(f){case 0:e=e.add(c);break;case 2:t=t.add(c);break;case 1:s=s.add(c);break;default:Kn()}}),new tc(this.Dt,this.Ct,e,t,s)}$t(){this.xt=!1,this.St=Cg()}Ft(e,t){this.xt=!0,this.St=this.St.insert(e,t)}Bt(e){this.xt=!0,this.St=this.St.remove(e)}Lt(){this.Vt+=1}qt(){this.Vt-=1}Ut(){this.xt=!0,this.Ct=!0}}class Xd{constructor(e){this.Kt=e,this.Gt=new Map,this.Qt=js(),this.jt=ku(),this.zt=new xr(pr)}Wt(e){for(const t of e.vt)e.Pt&&e.Pt.isFoundDocument()?this.Ht(t,e.Pt):this.Jt(t,e.key,e.Pt);for(const t of e.removedTargetIds)this.Jt(t,e.key,e.Pt)}Yt(e){this.forEachTarget(e,t=>{const s=this.Xt(t);switch(e.state){case 0:this.Zt(t)&&s.Mt(e.resumeToken);break;case 1:s.qt(),s.Nt||s.$t(),s.Mt(e.resumeToken);break;case 2:s.qt(),s.Nt||this.removeTarget(t);break;case 3:this.Zt(t)&&(s.Ut(),s.Mt(e.resumeToken));break;case 4:this.Zt(t)&&(this.te(t),s.Mt(e.resumeToken));break;default:Kn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Gt.forEach((s,c)=>{this.Zt(c)&&t(c)})}ee(e){var t;const s=e.targetId,c=e.bt.count,f=this.ne(s);if(f){const E=f.target;if(Pl(E))if(0===c){const k=new Ln(E.path);this.Jt(s,k,Ti.newNoDocument(k,sr.min()))}else dr(1===c);else{const k=this.se(s);if(k!==c){const G=this.ie(e,k);0!==G&&(this.te(s),this.zt=this.zt.insert(s,2===G?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=ar.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(J,ue,tt){var Bt,fn,Mn,Fn,gr,ai;const ki={localCacheCount:ue,existenceFilterCount:tt.count},li=tt.unchangedNames;return li&&(ki.bloomFilter={applied:0===J,hashCount:null!==(Bt=null==li?void 0:li.hashCount)&&void 0!==Bt?Bt:0,bitmapLength:null!==(Fn=null===(Mn=null===(fn=null==li?void 0:li.bits)||void 0===fn?void 0:fn.bitmap)||void 0===Mn?void 0:Mn.length)&&void 0!==Fn?Fn:0,padding:null!==(ai=null===(gr=null==li?void 0:li.bits)||void 0===gr?void 0:gr.padding)&&void 0!==ai?ai:0}),ki}(G,k,e.bt))}}}}ie(e,t){const{unchangedNames:s,count:c}=e.bt;if(!s||!s.bits)return 1;const{bits:{bitmap:f="",padding:E=0},hashCount:k=0}=s;let G,J;try{G=ro(f).toUint8Array()}catch(ue){if(ue instanceof pc)return mi("Decoding the base64 bloom filter in existence filter failed ("+ue.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw ue}try{J=new Yd(G,E,k)}catch(ue){return mi(ue instanceof Pu?"BloomFilter error: ":"Applying bloom filter failed: ",ue),1}return 0===J.yt?1:c!==t-this.re(e.targetId,J)?2:0}re(e,t){const s=this.Kt.getRemoteKeysForTarget(e);let c=0;return s.forEach(f=>{const E=this.Kt.oe(),k=`projects/${E.projectId}/databases/${E.database}/documents/${f.path.canonicalString()}`;t.At(k)||(this.Jt(e,f,null),c++)}),c}ue(e){const t=new Map;this.Gt.forEach((f,E)=>{const k=this.ne(E);if(k){if(f.current&&Pl(k.target)){const G=new Ln(k.target.path);null!==this.Qt.get(G)||this.ce(E,G)||this.Jt(E,G,Ti.newNoDocument(G,e))}f.kt&&(t.set(E,f.Ot()),f.$t())}});let s=Zr();this.jt.forEach((f,E)=>{let k=!0;E.forEachWhile(G=>{const J=this.ne(G);return!J||"TargetPurposeLimboResolution"===J.purpose||(k=!1,!1)}),k&&(s=s.add(f))}),this.Qt.forEach((f,E)=>E.setReadTime(e));const c=new Uc(e,t,this.zt,this.Qt,s);return this.Qt=js(),this.jt=ku(),this.zt=new xr(pr),c}Ht(e,t){if(!this.Zt(e))return;const s=this.ce(e,t.key)?2:0;this.Xt(e).Ft(t.key,s),this.Qt=this.Qt.insert(t.key,t),this.jt=this.jt.insert(t.key,this.ae(t.key).add(e))}Jt(e,t,s){if(!this.Zt(e))return;const c=this.Xt(e);this.ce(e,t)?c.Ft(t,1):c.Bt(t),this.jt=this.jt.insert(t,this.ae(t).delete(e)),s&&(this.Qt=this.Qt.insert(t,s))}removeTarget(e){this.Gt.delete(e)}se(e){const t=this.Xt(e).Ot();return this.Kt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Lt(e){this.Xt(e).Lt()}Xt(e){let t=this.Gt.get(e);return t||(t=new Ed,this.Gt.set(e,t)),t}ae(e){let t=this.jt.get(e);return t||(t=new Ui(pr),this.jt=this.jt.insert(e,t)),t}Zt(e){const t=null!==this.ne(e);return t||_n("WatchChangeAggregator","Detected inactive target",e),t}ne(e){const t=this.Gt.get(e);return t&&t.Nt?null:this.Kt.he(e)}te(e){this.Gt.set(e,new Ed),this.Kt.getRemoteKeysForTarget(e).forEach(t=>{this.Jt(e,t,null)})}ce(e,t){return this.Kt.getRemoteKeysForTarget(e).has(t)}}function ku(){return new xr(Ln.comparator)}function Cg(){return new xr(Ln.comparator)}const Qd={asc:"ASCENDING",desc:"DESCENDING"},Nf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Jd={and:"AND",or:"OR"};class Bh{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function eh(r,e){return r.useProto3Json||re(e)?e:{value:e}}function Nu(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Uh(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function bg(r,e){return Nu(r,e.toTimestamp())}function Ts(r){return dr(!!r),sr.fromTimestamp(function(e){const t=xl(e);return new ci(t.seconds,t.nanos)}(r))}function Vh(r,e){return(t=r,new Ei(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Zm(r){const e=Ei.fromString(r);return dr(Gh(e)),e}function Id(r,e){return Vh(r.databaseId,e.path)}function nc(r,e){const t=Zm(e);if(t.get(1)!==r.databaseId.projectId)throw new hn(Ht.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new hn(Ht.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Ln(Fu(t))}function wd(r,e){return Vh(r.databaseId,e)}function Ap(r){const e=Zm(r);return 4===e.length?Ei.emptyPath():Fu(e)}function Cd(r){return new Ei(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Fu(r){return dr(r.length>4&&"documents"===r.get(4)),r.popFirst(5)}function Dg(r,e,t){return{name:Id(r,e),fields:t.value.mapValue.fields}}function jh(r,e,t){const s=nc(r,e.name),c=Ts(e.updateTime),f=e.createTime?Ts(e.createTime):sr.min(),E=new Vs({mapValue:{fields:e.fields}}),k=Ti.newFoundDocument(s,c,f,E);return t&&k.setHasCommittedMutations(),t?k.setHasCommittedMutations():k}function du(r,e){let t;if(e instanceof ul)t={update:Dg(r,e.key,e.value)};else if(e instanceof C)t={delete:Id(r,e.key)};else if(e instanceof Jl)t={update:Dg(r,e.key,e.data),updateMask:$f(e.fieldMask)};else{if(!(e instanceof g))return Kn();t={verify:Id(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(c,f){const E=f.transform;if(E instanceof wc)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(E instanceof lu)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:E.elements}};if(E instanceof Cc)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:E.elements}};if(E instanceof cl)return{fieldPath:f.field.canonicalString(),increment:E.wt};throw Kn()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(c=e.precondition).updateTime?{updateTime:bg(r,c.updateTime)}:void 0!==c.exists?{exists:c.exists}:Kn()),t;var c}function hu(r,e){const t=e.currentDocument?void 0!==(c=e.currentDocument).updateTime?us.updateTime(Ts(c.updateTime)):void 0!==c.exists?us.exists(c.exists):us.none():us.none(),s=e.updateTransforms?e.updateTransforms.map(c=>function(f,E){let k=null;"setToServerValue"in E?(dr("REQUEST_TIME"===E.setToServerValue),k=new wc):"appendMissingElements"in E?k=new lu(E.appendMissingElements.values||[]):"removeAllFromArray"in E?k=new Cc(E.removeAllFromArray.values||[]):"increment"in E?k=new cl(f,E.increment):Kn();const G=ps.fromServerFormat(E.fieldPath);return new gd(G,k)}(r,c)):[];var c;if(e.update){const c=nc(r,e.update.name),f=new Vs({mapValue:{fields:e.update.fields}});if(e.updateMask){const E=new gs((e.updateMask.fieldPaths||[]).map(J=>ps.fromServerFormat(J)));return new Jl(c,f,E,t,s)}return new ul(c,f,t,s)}if(e.delete){const c=nc(r,e.delete);return new C(c,t)}if(e.verify){const c=nc(r,e.verify);return new g(c,t)}return Kn()}function Hh(r,e){return{documents:[wd(r,e.path)]}}function nh(r,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=wd(r,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=wd(r,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const c=function(G){if(0!==G.length)return Sg(Si.create(G,"and"))}(e.filters);c&&(t.structuredQuery.where=c);const f=function(G){if(0!==G.length)return G.map(J=>{return{field:Lu((ue=J).field),direction:rh(ue.dir)};var ue})}(e.orderBy);f&&(t.structuredQuery.orderBy=f);const E=eh(r,e.limit);var k,G;return null!==E&&(t.structuredQuery.limit=E),e.startAt&&(t.structuredQuery.startAt={before:(k=e.startAt).inclusive,values:k.position}),e.endAt&&(t.structuredQuery.endAt={before:!(G=e.endAt).inclusive,values:G.position}),t}function Tg(r){let e=Ap(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let c=null;if(s>0){dr(1===s);const ue=t.from[0];ue.allDescendants?c=ue.collectionId:e=e.child(ue.collectionId)}let f=[];t.where&&(f=function(ue){const tt=Lf(ue);return tt instanceof Si&&Kl(tt)?tt.getFilters():[tt]}(t.where));let E=[];t.orderBy&&(E=t.orderBy.map(ue=>{return new io($u((tt=ue).field),function(Bt){switch(Bt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(tt.direction));var tt}));let k=null;t.limit&&(k=function(ue){let tt;return tt="object"==typeof ue?ue.value:ue,re(tt)?null:tt}(t.limit));let G=null;var ue;t.startAt&&(G=new Io((ue=t.startAt).values||[],!!ue.before));let J=null;return t.endAt&&(J=function(ue){return new Io(ue.values||[],!ue.before)}(t.endAt)),su(e,c,E,f,k,"F",G,J)}function Lf(r){return void 0!==r.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=$u(e.unaryFilter.field);return hi.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=$u(e.unaryFilter.field);return hi.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=$u(e.unaryFilter.field);return hi.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=$u(e.unaryFilter.field);return hi.create(f,"!=",{nullValue:"NULL_VALUE"});default:return Kn()}}(r):void 0!==r.fieldFilter?hi.create($u((e=r).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Kn()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==r.compositeFilter?function(e){return Si.create(e.compositeFilter.filters.map(t=>Lf(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Kn()}}(e.compositeFilter.op))}(r):Kn();var e}function rh(r){return Qd[r]}function zh(r){return Nf[r]}function Rp(r){return Jd[r]}function Lu(r){return{fieldPath:r.canonicalString()}}function $u(r){return ps.fromServerFormat(r.fieldPath)}function Sg(r){return r instanceof hi?function(e){if("=="===e.op){if(Un(e.value))return{unaryFilter:{field:Lu(e.field),op:"IS_NAN"}};if(Wt(e.value))return{unaryFilter:{field:Lu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Un(e.value))return{unaryFilter:{field:Lu(e.field),op:"IS_NOT_NAN"}};if(Wt(e.value))return{unaryFilter:{field:Lu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lu(e.field),op:zh(e.op),value:e.value}}}(r):r instanceof Si?function(e){const t=e.getFilters().map(s=>Sg(s));return 1===t.length?t[0]:{compositeFilter:{op:Rp(e.op),filters:t}}}(r):Kn()}function $f(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Gh(r){return r.length>=4&&"projects"===r.get(0)&&"databases"===r.get(2)}class bc{constructor(e,t,s,c,f=sr.min(),E=sr.min(),k=no.EMPTY_BYTE_STRING,G=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=c,this.snapshotVersion=f,this.lastLimboFreeSnapshotVersion=E,this.resumeToken=k,this.expectedCount=G}withSequenceNumber(e){return new bc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new bc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new bc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new bc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Xm{constructor(e){this.le=e}}function Ka(r,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Bu(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:Id(c=r.le,(f=e).key),fields:f.data.value.mapValue.fields,updateTime:Nu(c,f.version.toTimestamp()),createTime:Nu(c,f.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:rc(e.version)};else{if(!e.isUnknownDocument())return Kn();s.unknownDocument={path:t.path.toArray(),version:rc(e.version)}}var c,f;return s}function Bu(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function rc(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ic(r){const e=new ci(r.seconds,r.nanoseconds);return sr.fromTimestamp(e)}function fu(r,e){const t=(e.baseMutations||[]).map(f=>hu(r.le,f));for(let f=0;f<e.mutations.length-1;++f)f+1<e.mutations.length&&void 0!==e.mutations[f+1].transform&&(e.mutations[f].updateTransforms=e.mutations[f+1].transform.fieldTransforms,e.mutations.splice(f+1,1),++f);const s=e.mutations.map(f=>hu(r.le,f)),c=ci.fromMillis(e.localWriteTimeMs);return new y(e.batchId,c,t,s)}function Vc(r){const e=ic(r.readTime),t=void 0!==r.lastLimboFreeSnapshotVersion?ic(r.lastLimboFreeSnapshotVersion):sr.min();let s;var c;return void 0!==r.query.documents?(dr(1===(c=r.query).documents.length),s=wo(Ol(Ap(c.documents[0])))):s=wo(Tg(r.query)),new bc(s,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,no.fromBase64String(r.resumeToken))}function ih(r,e){const t=rc(e.snapshotVersion),s=rc(e.lastLimboFreeSnapshotVersion);let c;c=Pl(e.target)?Hh(r.le,e.target):nh(r.le,e.target);const f=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Oa(e.target),readTime:t,resumeToken:f,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:c}}function Mp(r){const e=Tg({parent:r.parent,structuredQuery:r.structuredQuery});return"LAST"===r.limitType?hd(e,e.limit,"L"):e}function dl(r,e){return new K(e.largestBatchId,hu(r.le,e.overlayMutation))}function Bf(r,e){const t=e.path.lastSegment();return[r,Ut(e.path.popLast()),t]}function Pp(r,e,t,s){return{indexId:r,uid:e.uid||"",sequenceNumber:t,readTime:rc(s.readTime),documentKey:Ut(s.documentKey.path),largestBatchId:s.largestBatchId}}class sh{getBundleMetadata(e,t){return Kh(e).get(t).next(s=>{if(s)return{id:(c=s).bundleId,createTime:ic(c.createTime),version:c.version};var c})}saveBundleMetadata(e,t){return Kh(e).put({bundleId:(s=t).id,createTime:rc(Ts(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return hl(e).get(t).next(s=>{if(s)return{name:(c=s).name,query:Mp(c.bundledQuery),readTime:ic(c.readTime)};var c})}saveNamedQuery(e,t){return hl(e).put({name:(s=t).name,readTime:rc(Ts(s.readTime)),bundledQuery:s.bundledQuery});var s}}function Kh(r){return Bs(r,"bundles")}function hl(r){return Bs(r,"namedQueries")}class bd{constructor(e,t){this.serializer=e,this.userId=t}static fe(e,t){return new bd(e,t.uid||"")}getOverlay(e,t){return pu(e).get(Bf(this.userId,t)).next(s=>s?dl(this.serializer,s):null)}getOverlays(e,t){const s=Ia();return $t.forEach(t,c=>this.getOverlay(e,c).next(f=>{null!==f&&s.set(c,f)})).next(()=>s)}saveOverlays(e,t,s){const c=[];return s.forEach((f,E)=>{const k=new K(t,E);c.push(this.de(e,k))}),$t.waitFor(c)}removeOverlaysForBatchId(e,t,s){const c=new Set;t.forEach(E=>c.add(Ut(E.getCollectionPath())));const f=[];return c.forEach(E=>{const k=IDBKeyRange.bound([this.userId,E,s],[this.userId,E,s+1],!1,!0);f.push(pu(e).J("collectionPathOverlayIndex",k))}),$t.waitFor(f)}getOverlaysForCollection(e,t,s){const c=Ia(),f=Ut(t),E=IDBKeyRange.bound([this.userId,f,s],[this.userId,f,Number.POSITIVE_INFINITY],!0);return pu(e).j("collectionPathOverlayIndex",E).next(k=>{for(const G of k){const J=dl(this.serializer,G);c.set(J.getKey(),J)}return c})}getOverlaysForCollectionGroup(e,t,s,c){const f=Ia();let E;const k=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return pu(e).X({index:"collectionGroupOverlayIndex",range:k},(G,J,ue)=>{const tt=dl(this.serializer,J);f.size()<c||tt.largestBatchId===E?(f.set(tt.getKey(),tt),E=tt.largestBatchId):ue.done()}).next(()=>f)}de(e,t){return pu(e).put(function(s,c,f){const[E,k,G]=Bf(c,f.mutation.key);return{userId:c,collectionPath:k,documentId:G,collectionGroup:f.mutation.key.getCollectionGroup(),largestBatchId:f.largestBatchId,overlayMutation:du(s.le,f.mutation)}}(this.serializer,this.userId,t))}}function pu(r){return Bs(r,"documentOverlays")}class Uu{constructor(){}_e(e,t){this.we(e,t),t.me()}we(e,t){if("nullValue"in e)this.ge(t,5);else if("booleanValue"in e)this.ge(t,10),t.ye(e.booleanValue?1:0);else if("integerValue"in e)this.ge(t,15),t.ye(Hr(e.integerValue));else if("doubleValue"in e){const s=Hr(e.doubleValue);isNaN(s)?this.ge(t,13):(this.ge(t,15),le(s)?t.ye(0):t.ye(s))}else if("timestampValue"in e){const s=e.timestampValue;this.ge(t,20),"string"==typeof s?t.pe(s):(t.pe(`${s.seconds||""}`),t.ye(s.nanos||0))}else if("stringValue"in e)this.Ie(e.stringValue,t),this.Te(t);else if("bytesValue"in e)this.ge(t,30),t.Ee(ro(e.bytesValue)),this.Te(t);else if("referenceValue"in e)this.Ae(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.ge(t,45),t.ye(s.latitude||0),t.ye(s.longitude||0)}else"mapValue"in e?jr(e)?this.ge(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Te(t)):"arrayValue"in e?(this.ve(e.arrayValue,t),this.Te(t)):Kn()}Ie(e,t){this.ge(t,25),this.Pe(e,t)}Pe(e,t){t.pe(e)}Re(e,t){const s=e.fields||{};this.ge(t,55);for(const c of Object.keys(s))this.Ie(c,t),this.we(s[c],t)}ve(e,t){const s=e.values||[];this.ge(t,50);for(const c of s)this.we(c,t)}Ae(e,t){this.ge(t,37),Ln.fromName(e).path.forEach(s=>{this.ge(t,60),this.Pe(s,t)})}ge(e,t){e.ye(t)}Te(e){e.ye(2)}}function Qm(r){if(0===r)return 8;let e=0;return!(r>>4)&&(e+=4,r<<=4),!(r>>6)&&(e+=2,r<<=2),!(r>>7)&&(e+=1),e}function Ag(r){const e=64-function(t){let s=0;for(let c=0;c<8;++c){const f=Qm(255&t[c]);if(s+=f,8!==f)break}return s}(r);return Math.ceil(e/8)}Uu.be=new Uu;class Jm{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ve(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Se(s.value),s=t.next();this.De()}Ce(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.xe(s.value),s=t.next();this.Ne()}ke(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Se(s);else if(s<2048)this.Se(960|s>>>6),this.Se(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Se(480|s>>>12),this.Se(128|63&s>>>6),this.Se(128|63&s);else{const c=t.codePointAt(0);this.Se(240|c>>>18),this.Se(128|63&c>>>12),this.Se(128|63&c>>>6),this.Se(128|63&c)}}this.De()}Me(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.xe(s);else if(s<2048)this.xe(960|s>>>6),this.xe(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.xe(480|s>>>12),this.xe(128|63&s>>>6),this.xe(128|63&s);else{const c=t.codePointAt(0);this.xe(240|c>>>18),this.xe(128|63&c>>>12),this.xe(128|63&c>>>6),this.xe(128|63&c)}}this.Ne()}Oe(e){const t=this.$e(e),s=Ag(t);this.Fe(1+s),this.buffer[this.position++]=255&s;for(let c=t.length-s;c<t.length;++c)this.buffer[this.position++]=255&t[c]}Be(e){const t=this.$e(e),s=Ag(t);this.Fe(1+s),this.buffer[this.position++]=~(255&s);for(let c=t.length-s;c<t.length;++c)this.buffer[this.position++]=~(255&t[c])}Le(){this.qe(255),this.qe(255)}Ue(){this.Ke(255),this.Ke(255)}reset(){this.position=0}seed(e){this.Fe(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ge(){return this.buffer.slice(0,this.position)}$e(e){const t=function(c){const f=new DataView(new ArrayBuffer(8));return f.setFloat64(0,c,!1),new Uint8Array(f.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let c=1;c<t.length;++c)t[c]^=s?255:0;return t}Se(e){const t=255&e;0===t?(this.qe(0),this.qe(255)):255===t?(this.qe(255),this.qe(0)):this.qe(t)}xe(e){const t=255&e;0===t?(this.Ke(0),this.Ke(255)):255===t?(this.Ke(255),this.Ke(0)):this.Ke(e)}De(){this.qe(0),this.qe(1)}Ne(){this.Ke(0),this.Ke(1)}qe(e){this.Fe(1),this.buffer[this.position++]=e}Ke(e){this.Fe(1),this.buffer[this.position++]=~e}Fe(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const c=new Uint8Array(s);c.set(this.buffer),this.buffer=c}}class xg{constructor(e){this.Qe=e}Ee(e){this.Qe.Ve(e)}pe(e){this.Qe.ke(e)}ye(e){this.Qe.Oe(e)}me(){this.Qe.Le()}}class qh{constructor(e){this.Qe=e}Ee(e){this.Qe.Ce(e)}pe(e){this.Qe.Me(e)}ye(e){this.Qe.Be(e)}me(){this.Qe.Ue()}}class oh{constructor(){this.Qe=new Jm,this.je=new xg(this.Qe),this.ze=new qh(this.Qe)}seed(e){this.Qe.seed(e)}We(e){return 0===e?this.je:this.ze}Ge(){return this.Qe.Ge()}reset(){this.Qe.reset()}}class Ll{constructor(e,t,s,c){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=c}He(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new Ll(this.indexId,this.documentKey,this.arrayValue,s)}}function Na(r,e){let t=r.indexId-e.indexId;return 0!==t?t:(t=Uf(r.arrayValue,e.arrayValue),0!==t?t:(t=Uf(r.directionalValue,e.directionalValue),0!==t?t:Ln.comparator(r.documentKey,e.documentKey)))}function Uf(r,e){for(let t=0;t<r.length&&t<e.length;++t){const s=r[t]-e[t];if(0!==s)return s}return r.length-e.length}class Vf{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Je=e.orderBy,this.Ye=[];for(const t of e.filters){const s=t;s.isInequality()?this.Xe=s:this.Ye.push(s)}}Ze(e){dr(e.collectionGroup===this.collectionId);const t=dc(e);if(void 0!==t&&!this.tn(t))return!1;const s=Cl(e);let c=0,f=0;for(;c<s.length&&this.tn(s[c]);++c);if(c===s.length)return!0;if(void 0!==this.Xe){const E=s[c];if(!this.en(this.Xe,E)||!this.nn(this.Je[f++],E))return!1;++c}for(;c<s.length;++c)if(f>=this.Je.length||!this.nn(this.Je[f++],s[c]))return!1;return!0}tn(e){for(const t of this.Ye)if(this.en(t,e))return!0;return!1}en(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}nn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function ey(r){var e,t;if(dr(r instanceof hi||r instanceof Si),r instanceof hi){if(r instanceof ll){const c=(null===(t=null===(e=r.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(f=>hi.create(r.field,"==",f)))||[];return Si.create(c,"or")}return r}const s=r.filters.map(c=>ey(c));return Si.create(s,r.op)}function Rg(r){if(0===r.getFilters().length)return[];const e=Yh(ey(r));return dr(Op(e)),jf(e)||Mg(e)?[e]:e.getFilters()}function jf(r){return r instanceof hi}function Mg(r){return r instanceof Si&&Kl(r)}function Op(r){return jf(r)||Mg(r)||function(e){if(e instanceof Si&&_a(e)){for(const t of e.getFilters())if(!jf(t)&&!Mg(t))return!1;return!0}return!1}(r)}function Yh(r){if(dr(r instanceof hi||r instanceof Si),r instanceof hi)return r;if(1===r.filters.length)return Yh(r.filters[0]);const e=r.filters.map(s=>Yh(s));let t=Si.create(e,r.op);return t=Hf(t),Op(t)?t:(dr(t instanceof Si),dr(al(t)),dr(t.filters.length>1),t.filters.reduce((s,c)=>kp(s,c)))}function kp(r,e){let t;return dr(r instanceof hi||r instanceof Si),dr(e instanceof hi||e instanceof Si),t=r instanceof hi?e instanceof hi?Si.create([r,e],"and"):Np(r,e):e instanceof hi?Np(e,r):function(s,c){if(dr(s.filters.length>0&&c.filters.length>0),al(s)&&al(c))return Du(s,c.getFilters());const f=_a(s)?s:c,E=_a(s)?c:s,k=f.filters.map(G=>kp(G,E));return Si.create(k,"or")}(r,e),Hf(t)}function Np(r,e){if(al(e))return Du(e,r.getFilters());{const t=e.filters.map(s=>kp(r,s));return Si.create(t,"or")}}function Hf(r){if(dr(r instanceof hi||r instanceof Si),r instanceof hi)return r;const e=r.getFilters();if(1===e.length)return Hf(e[0]);if(ql(r))return r;const t=e.map(c=>Hf(c)),s=[];return t.forEach(c=>{c instanceof hi?s.push(c):c instanceof Si&&(c.op===r.op?s.push(...c.filters):s.push(c))}),1===s.length?s[0]:Si.create(s,r.op)}class Fp{constructor(){this.sn=new fl}addToCollectionParentIndex(e,t){return this.sn.add(t),$t.resolve()}getCollectionParents(e,t){return $t.resolve(this.sn.getEntries(t))}addFieldIndex(e,t){return $t.resolve()}deleteFieldIndex(e,t){return $t.resolve()}getDocumentsMatchingTarget(e,t){return $t.resolve(null)}getIndexType(e,t){return $t.resolve(0)}getFieldIndexes(e,t){return $t.resolve([])}getNextCollectionGroupToUpdate(e){return $t.resolve(null)}getMinOffset(e,t){return $t.resolve(es.min())}getMinOffsetFromCollectionGroup(e,t){return $t.resolve(es.min())}updateCollectionGroup(e,t,s){return $t.resolve()}updateIndexEntries(e,t){return $t.resolve()}}class fl{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),c=this.index[t]||new Ui(Ei.comparator),f=!c.has(s);return this.index[t]=c.add(s),f}has(e){const t=e.lastSegment(),s=e.popLast(),c=this.index[t];return c&&c.has(s)}getEntries(e){return(this.index[e]||new Ui(Ei.comparator)).toArray()}}const zf=new Uint8Array(0);class Dd{constructor(e,t){this.user=e,this.databaseId=t,this.rn=new fl,this.on=new Ec(s=>Oa(s),(s,c)=>$c(s,c)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.rn.has(t)){const s=t.lastSegment(),c=t.popLast();e.addOnCommittedListener(()=>{this.rn.add(t)});const f={collectionId:s,parent:Ut(c)};return gu(e).put(f)}return $t.resolve()}getCollectionParents(e,t){const s=[],c=IDBKeyRange.bound([t,""],[Xc(t),""],!1,!0);return gu(e).j(c).next(f=>{for(const E of f){if(E.collectionId!==t)break;s.push($n(E.parent))}return s})}addFieldIndex(e,t){const s=ah(e),c={indexId:(E=t).indexId,collectionGroup:E.collectionGroup,fields:E.fields.map(k=>[k.fieldPath.canonicalString(),k.kind])};var E;delete c.indexId;const f=s.add(c);if(t.indexState){const E=Vu(e);return f.next(k=>{E.put(Pp(k,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return f.next()}deleteFieldIndex(e,t){const s=ah(e),c=Vu(e),f=Zh(e);return s.delete(t.indexId).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>f.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=Zh(e);let c=!0;const f=new Map;return $t.forEach(this.un(t),E=>this.cn(e,E).next(k=>{c&&(c=!!k),f.set(E,k)})).next(()=>{if(c){let E=Zr();const k=[];return $t.forEach(f,(G,J)=>{var ue;_n("IndexedDbIndexManager",`Using index ${ue=G,`id=${ue.indexId}|cg=${ue.collectionGroup}|f=${ue.fields.map(li=>`${li.fieldPath}:${li.kind}`).join(",")}`} to execute ${Oa(t)}`);const tt=function(li,$a){const Ps=dc($a);if(void 0===Ps)return null;for(const bs of mc(li,Ps.fieldPath))switch(bs.op){case"array-contains-any":return bs.value.arrayValue.values||[];case"array-contains":return[bs.value]}return null}(J,G),Bt=function(li,$a){const Ps=new Map;for(const bs of Cl($a))for(const Ba of mc(li,bs.fieldPath))switch(Ba.op){case"==":case"in":Ps.set(bs.fieldPath.canonicalString(),Ba.value);break;case"not-in":case"!=":return Ps.set(bs.fieldPath.canonicalString(),Ba.value),Array.from(Ps.values())}return null}(J,G),fn=function(li,$a){const Ps=[];let bs=!0;for(const Ba of Cl($a)){const Ah=0===Ba.kind?yc(li,Ba.fieldPath,li.startAt):Oh(li,Ba.fieldPath,li.startAt);Ps.push(Ah.value),bs&&(bs=Ah.inclusive)}return new Io(Ps,bs)}(J,G),Mn=function(li,$a){const Ps=[];let bs=!0;for(const Ba of Cl($a)){const Ah=0===Ba.kind?Oh(li,Ba.fieldPath,li.endAt):yc(li,Ba.fieldPath,li.endAt);Ps.push(Ah.value),bs&&(bs=Ah.inclusive)}return new Io(Ps,bs)}(J,G),Fn=this.an(G,J,fn),gr=this.an(G,J,Mn),ai=this.hn(G,J,Bt),ki=this.ln(G.indexId,tt,Fn,fn.inclusive,gr,Mn.inclusive,ai);return $t.forEach(ki,li=>s.H(li,t.limit).next($a=>{$a.forEach(Ps=>{const bs=Ln.fromSegments(Ps.documentKey);E.has(bs)||(E=E.add(bs),k.push(bs))})}))}).next(()=>k)}return $t.resolve(null)})}un(e){let t=this.on.get(e);return t||(t=0===e.filters.length?[e]:Rg(Si.create(e.filters,"and")).map(s=>Wa(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.on.set(e,t),t)}ln(e,t,s,c,f,E,k){const G=(null!=t?t.length:1)*Math.max(s.length,f.length),J=G/(null!=t?t.length:1),ue=[];for(let tt=0;tt<G;++tt){const Bt=t?this.fn(t[tt/J]):zf,fn=this.dn(e,Bt,s[tt%J],c),Mn=this._n(e,Bt,f[tt%J],E),Fn=k.map(gr=>this.dn(e,Bt,gr,!0));ue.push(...this.createRange(fn,Mn,Fn))}return ue}dn(e,t,s,c){const f=new Ll(e,Ln.empty(),t,s);return c?f:f.He()}_n(e,t,s,c){const f=new Ll(e,Ln.empty(),t,s);return c?f.He():f}cn(e,t){const s=new Vf(t),c=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,c).next(f=>{let E=null;for(const k of f)s.Ze(k)&&(!E||k.fields.length>E.fields.length)&&(E=k);return E})}getIndexType(e,t){let s=2;const c=this.un(t);return $t.forEach(c,f=>this.cn(e,f).next(E=>{E?0!==s&&E.fields.length<function(k){let G=new Ui(ps.comparator),J=!1;for(const ue of k.filters)for(const tt of ue.getFlattenedFilters())tt.field.isKeyField()||("array-contains"===tt.op||"array-contains-any"===tt.op?J=!0:G=G.add(tt.field));for(const ue of k.orderBy)ue.field.isKeyField()||(G=G.add(ue.field));return G.size+(J?1:0)}(f)&&(s=1):s=0})).next(()=>null!==t.limit&&c.length>1&&2===s?1:s)}wn(e,t){const s=new oh;for(const c of Cl(e)){const f=t.data.field(c.fieldPath);if(null==f)return null;const E=s.We(c.kind);Uu.be._e(f,E)}return s.Ge()}fn(e){const t=new oh;return Uu.be._e(e,t.We(0)),t.Ge()}mn(e,t){const s=new oh;return Uu.be._e(Te(this.databaseId,t),s.We(function(c){const f=Cl(c);return 0===f.length?0:f[f.length-1].kind}(e))),s.Ge()}hn(e,t,s){if(null===s)return[];let c=[];c.push(new oh);let f=0;for(const E of Cl(e)){const k=s[f++];for(const G of c)if(this.gn(t,E.fieldPath)&&Rt(k))c=this.yn(c,E,k);else{const J=G.We(E.kind);Uu.be._e(k,J)}}return this.pn(c)}an(e,t,s){return this.hn(e,t,s.position)}pn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Ge();return t}yn(e,t,s){const c=[...e],f=[];for(const E of s.arrayValue.values||[])for(const k of c){const G=new oh;G.seed(k.Ge()),Uu.be._e(E,G.We(t.kind)),f.push(G)}return f}gn(e,t){return!!e.filters.find(s=>s instanceof hi&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=ah(e),c=Vu(e);return(t?s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.j()).next(f=>{const E=[];return $t.forEach(f,k=>c.get([k.indexId,this.uid]).next(G=>{E.push(function(J,ue){const tt=ue?new Oc(ue.sequenceNumber,new es(ic(ue.readTime),new Ln($n(ue.documentKey)),ue.largestBatchId)):Oc.empty(),Bt=J.fields.map(([fn,Mn])=>new hc(ps.fromServerFormat(fn),Mn));return new zl(J.indexId,J.collectionGroup,Bt,tt)}(k,G))})).next(()=>E)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,c)=>{const f=s.indexState.sequenceNumber-c.indexState.sequenceNumber;return 0!==f?f:pr(s.collectionGroup,c.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const c=ah(e),f=Vu(e);return this.In(e).next(E=>c.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(k=>$t.forEach(k,G=>f.put(Pp(G.indexId,this.user,E,s)))))}updateIndexEntries(e,t){const s=new Map;return $t.forEach(t,(c,f)=>{const E=s.get(c.collectionGroup);return(E?$t.resolve(E):this.getFieldIndexes(e,c.collectionGroup)).next(k=>(s.set(c.collectionGroup,k),$t.forEach(k,G=>this.Tn(e,c,G).next(J=>{const ue=this.En(f,G);return J.isEqual(ue)?$t.resolve():this.An(e,f,G,J,ue)}))))})}Rn(e,t,s,c){return Zh(e).put({indexId:c.indexId,uid:this.uid,arrayValue:c.arrayValue,directionalValue:c.directionalValue,orderedDocumentKey:this.mn(s,t.key),documentKey:t.key.path.toArray()})}vn(e,t,s,c){return Zh(e).delete([c.indexId,this.uid,c.arrayValue,c.directionalValue,this.mn(s,t.key),t.key.path.toArray()])}Tn(e,t,s){const c=Zh(e);let f=new Ui(Na);return c.X({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.mn(s,t)])},(E,k)=>{f=f.add(new Ll(s.indexId,t,k.arrayValue,k.directionalValue))}).next(()=>f)}En(e,t){let s=new Ui(Na);const c=this.wn(t,e);if(null==c)return s;const f=dc(t);if(null!=f){const E=e.data.field(f.fieldPath);if(Rt(E))for(const k of E.arrayValue.values||[])s=s.add(new Ll(t.indexId,e.key,this.fn(k),c))}else s=s.add(new Ll(t.indexId,e.key,zf,c));return s}An(e,t,s,c,f){_n("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const E=[];return function(k,G,J,ue,tt){const Bt=k.getIterator(),fn=G.getIterator();let Mn=va(Bt),Fn=va(fn);for(;Mn||Fn;){let gr=!1,ai=!1;if(Mn&&Fn){const ki=J(Mn,Fn);ki<0?ai=!0:ki>0&&(gr=!0)}else null!=Mn?ai=!0:gr=!0;gr?(ue(Fn),Fn=va(fn)):ai?(tt(Mn),Mn=va(Bt)):(Mn=va(Bt),Fn=va(fn))}}(c,f,Na,k=>{E.push(this.Rn(e,t,s,k))},k=>{E.push(this.vn(e,t,s,k))}),$t.waitFor(E)}In(e){let t=1;return Vu(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,c,f)=>{f.done(),t=c.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((E,k)=>Na(E,k)).filter((E,k,G)=>!k||0!==Na(E,G[k-1]));const c=[];c.push(e);for(const E of s){const k=Na(E,e),G=Na(E,t);if(0===k)c[0]=e.He();else if(k>0&&G<0)c.push(E),c.push(E.He());else if(G>0)break}c.push(t);const f=[];for(let E=0;E<c.length;E+=2){if(this.Pn(c[E],c[E+1]))return[];f.push(IDBKeyRange.bound([c[E].indexId,this.uid,c[E].arrayValue,c[E].directionalValue,zf,[]],[c[E+1].indexId,this.uid,c[E+1].arrayValue,c[E+1].directionalValue,zf,[]]))}return f}Pn(e,t){return Na(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Lp)}getMinOffset(e,t){return $t.mapArray(this.un(t),s=>this.cn(e,s).next(c=>c||Kn())).next(Lp)}}function gu(r){return Bs(r,"collectionParents")}function Zh(r){return Bs(r,"indexEntries")}function ah(r){return Bs(r,"indexConfiguration")}function Vu(r){return Bs(r,"indexState")}function Lp(r){dr(0!==r.length);let e=r[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<r.length;s++){const c=r[s].indexState.offset;Dl(c,e)<0&&(e=c),t<c.largestBatchId&&(t=c.largestBatchId)}return new es(e.readTime,e.documentKey,t)}const Td={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Fa{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new Fa(e,Fa.DEFAULT_COLLECTION_PERCENTILE,Fa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function $p(r,e,t){const s=r.store("mutations"),c=r.store("documentMutations"),f=[],E=IDBKeyRange.only(t.batchId);let k=0;const G=s.X({range:E},(ue,tt,Bt)=>(k++,Bt.delete()));f.push(G.next(()=>{dr(1===k)}));const J=[];for(const ue of t.mutations){const tt=$s(e,ue.key.path,t.batchId);f.push(c.delete(tt)),J.push(ue.key)}return $t.waitFor(f).next(()=>J)}function Xr(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw Kn();e=r.noDocument}return JSON.stringify(e).length}Fa.DEFAULT_COLLECTION_PERCENTILE=10,Fa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fa.DEFAULT=new Fa(41943040,Fa.DEFAULT_COLLECTION_PERCENTILE,Fa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fa.DISABLED=new Fa(-1,0,0);class lh{constructor(e,t,s,c){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=c,this.bn={}}static fe(e,t,s,c){dr(""!==e.uid);const f=e.isAuthenticated()?e.uid:"";return new lh(f,t,s,c)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Dc(e).X({index:"userMutationsIndex",range:s},(c,f,E)=>{t=!1,E.done()}).next(()=>t)}addMutationBatch(e,t,s,c){const f=ju(e),E=Dc(e);return E.add({}).next(k=>{dr("number"==typeof k);const G=new y(k,t,s,c),J=function(Bt,fn,Mn){const Fn=Mn.baseMutations.map(ai=>du(Bt.le,ai)),gr=Mn.mutations.map(ai=>du(Bt.le,ai));return{userId:fn,batchId:Mn.batchId,localWriteTimeMs:Mn.localWriteTime.toMillis(),baseMutations:Fn,mutations:gr}}(this.serializer,this.userId,G),ue=[];let tt=new Ui((Bt,fn)=>pr(Bt.canonicalString(),fn.canonicalString()));for(const Bt of c){const fn=$s(this.userId,Bt.key.path,k);tt=tt.add(Bt.key.path.popLast()),ue.push(E.put(J)),ue.push(f.put(fn,ya))}return tt.forEach(Bt=>{ue.push(this.indexManager.addToCollectionParentIndex(e,Bt))}),e.addOnCommittedListener(()=>{this.bn[k]=G.keys()}),$t.waitFor(ue).next(()=>G)})}lookupMutationBatch(e,t){return Dc(e).get(t).next(s=>s?(dr(s.userId===this.userId),fu(this.serializer,s)):null)}Vn(e,t){return this.bn[t]?$t.resolve(this.bn[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const c=s.keys();return this.bn[t]=c,c}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,c=IDBKeyRange.lowerBound([this.userId,s]);let f=null;return Dc(e).X({index:"userMutationsIndex",range:c},(E,k,G)=>{k.userId===this.userId&&(dr(k.batchId>=s),f=fu(this.serializer,k)),G.done()}).next(()=>f)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return Dc(e).X({index:"userMutationsIndex",range:t,reverse:!0},(c,f,E)=>{s=f.batchId,E.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Dc(e).j("userMutationsIndex",t).next(s=>s.map(c=>fu(this.serializer,c)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=rs(this.userId,t.path),c=IDBKeyRange.lowerBound(s),f=[];return ju(e).X({range:c},(E,k,G)=>{const[J,ue,tt]=E,Bt=$n(ue);if(J===this.userId&&t.path.isEqual(Bt))return Dc(e).get(tt).next(fn=>{if(!fn)throw Kn();dr(fn.userId===this.userId),f.push(fu(this.serializer,fn))});G.done()}).next(()=>f)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Ui(pr);const c=[];return t.forEach(f=>{const E=rs(this.userId,f.path),k=IDBKeyRange.lowerBound(E),G=ju(e).X({range:k},(J,ue,tt)=>{const[Bt,fn,Mn]=J,Fn=$n(fn);Bt===this.userId&&f.path.isEqual(Fn)?s=s.add(Mn):tt.done()});c.push(G)}),$t.waitFor(c).next(()=>this.Sn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,c=s.length+1,f=rs(this.userId,s),E=IDBKeyRange.lowerBound(f);let k=new Ui(pr);return ju(e).X({range:E},(G,J,ue)=>{const[tt,Bt,fn]=G,Mn=$n(Bt);tt===this.userId&&s.isPrefixOf(Mn)?Mn.length===c&&(k=k.add(fn)):ue.done()}).next(()=>this.Sn(e,k))}Sn(e,t){const s=[],c=[];return t.forEach(f=>{c.push(Dc(e).get(f).next(E=>{if(null===E)throw Kn();dr(E.userId===this.userId),s.push(fu(this.serializer,E))}))}),$t.waitFor(c).next(()=>s)}removeMutationBatch(e,t){return $p(e.at,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.Dn(t.batchId)}),$t.forEach(s,c=>this.referenceDelegate.markPotentiallyOrphaned(e,c))))}Dn(e){delete this.bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return $t.resolve();const s=IDBKeyRange.lowerBound([this.userId]),c=[];return ju(e).X({range:s},(f,E,k)=>{if(f[0]===this.userId){const G=$n(f[1]);c.push(G)}else k.done()}).next(()=>{dr(0===c.length)})})}containsKey(e,t){return ch(e,this.userId,t)}Cn(e){return Pg(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function ch(r,e,t){const s=rs(e,t.path),c=s[1],f=IDBKeyRange.lowerBound(s);let E=!1;return ju(r).X({range:f,Y:!0},(k,G,J)=>{const[ue,tt,Bt]=k;ue===e&&tt===c&&(E=!0),J.done()}).next(()=>E)}function Dc(r){return Bs(r,"mutations")}function ju(r){return Bs(r,"documentMutations")}function Pg(r){return Bs(r,"mutationQueues")}class Hu{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static Nn(){return new Hu(0)}static kn(){return new Hu(-1)}}class Bp{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Mn(e).next(t=>{const s=new Hu(t.highestTargetId);return t.highestTargetId=s.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Mn(e).next(t=>sr.fromTimestamp(new ci(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Mn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.Mn(e).next(c=>(c.highestListenSequenceNumber=t,s&&(c.lastRemoteSnapshotVersion=s.toTimestamp()),t>c.highestListenSequenceNumber&&(c.highestListenSequenceNumber=t),this.On(e,c)))}addTargetData(e,t){return this.$n(e,t).next(()=>this.Mn(e).next(s=>(s.targetCount+=1,this.Fn(t,s),this.On(e,s))))}updateTargetData(e,t){return this.$n(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Sd(e).delete(t.targetId)).next(()=>this.Mn(e)).next(s=>(dr(s.targetCount>0),s.targetCount-=1,this.On(e,s)))}removeTargets(e,t,s){let c=0;const f=[];return Sd(e).X((E,k)=>{const G=Vc(k);G.sequenceNumber<=t&&null===s.get(G.targetId)&&(c++,f.push(this.removeTargetData(e,G)))}).next(()=>$t.waitFor(f)).next(()=>c)}forEachTarget(e,t){return Sd(e).X((s,c)=>{const f=Vc(c);t(f)})}Mn(e){return Up(e).get("targetGlobalKey").next(t=>(dr(null!==t),t))}On(e,t){return Up(e).put("targetGlobalKey",t)}$n(e,t){return Sd(e).put(ih(this.serializer,t))}Fn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.Mn(e).next(t=>t.targetCount)}getTargetData(e,t){const s=Oa(t),c=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let f=null;return Sd(e).X({range:c,index:"queryTargetsIndex"},(E,k,G)=>{const J=Vc(k);$c(t,J.target)&&(f=J,G.done())}).next(()=>f)}addMatchingKeys(e,t,s){const c=[],f=zu(e);return t.forEach(E=>{const k=Ut(E.path);c.push(f.put({targetId:s,path:k})),c.push(this.referenceDelegate.addReference(e,s,E))}),$t.waitFor(c)}removeMatchingKeys(e,t,s){const c=zu(e);return $t.forEach(t,f=>{const E=Ut(f.path);return $t.waitFor([c.delete([s,E]),this.referenceDelegate.removeReference(e,s,f)])})}removeMatchingKeysForTargetId(e,t){const s=zu(e),c=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(c)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),c=zu(e);let f=Zr();return c.X({range:s,Y:!0},(E,k,G)=>{const J=$n(E[1]),ue=new Ln(J);f=f.add(ue)}).next(()=>f)}containsKey(e,t){const s=Ut(t.path),c=IDBKeyRange.bound([s],[Xc(s)],!1,!0);let f=0;return zu(e).X({index:"documentTargetsIndex",Y:!0,range:c},([E,k],G,J)=>{0!==E&&(f++,J.done())}).next(()=>f>0)}he(e,t){return Sd(e).get(t).next(s=>s?Vc(s):null)}}function Sd(r){return Bs(r,"targets")}function Up(r){return Bs(r,"targetGlobal")}function zu(r){return Bs(r,"targetDocuments")}function Og([r,e],[t,s]){const c=pr(r,t);return 0===c?pr(e,s):c}class Vp{constructor(e){this.Bn=e,this.buffer=new Ui(Og),this.Ln=0}qn(){return++this.Ln}Un(e){const t=[e,this.qn()];if(this.buffer.size<this.Bn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Og(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Xh{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Kn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Kn&&(this.Kn.cancel(),this.Kn=null)}get started(){return null!==this.Kn}Gn(e){var t=this;_n("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Kn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,de.Z)(function*(){t.Kn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){Yo(s)?_n("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield Rr(s)}yield t.Gn(3e5)}))}}class Gu{constructor(e,t){this.Qn=e,this.params=t}calculateTargetCount(e,t){return this.Qn.jn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return $t.resolve(z.ct);const s=new Vp(t);return this.Qn.forEachTarget(e,c=>s.Un(c.sequenceNumber)).next(()=>this.Qn.zn(e,c=>s.Un(c))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Qn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Qn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(_n("LruGarbageCollector","Garbage collection skipped; disabled"),$t.resolve(Td)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(_n("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Td):this.Wn(e,t))}getCacheSize(e){return this.Qn.getCacheSize(e)}Wn(e,t){let s,c,f,E,k,G,J;const ue=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(tt=>(tt>this.params.maximumSequenceNumbersToCollect?(_n("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${tt}`),c=this.params.maximumSequenceNumbersToCollect):c=tt,E=Date.now(),this.nthSequenceNumber(e,c))).next(tt=>(s=tt,k=Date.now(),this.removeTargets(e,s,t))).next(tt=>(f=tt,G=Date.now(),this.removeOrphanedDocuments(e,s))).next(tt=>(J=Date.now(),ac()<=it.in.DEBUG&&_n("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${E-ue}ms\n\tDetermined least recently used ${c} in `+(k-E)+`ms\n\tRemoved ${f} targets in `+(G-k)+`ms\n\tRemoved ${tt} documents in `+(J-G)+`ms\nTotal Duration: ${J-ue}ms`),$t.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:f,documentsRemoved:tt})))}}class uh{constructor(e,t){this.db=e,this.garbageCollector=function qa(r,e){return new Gu(r,e)}(this,t)}jn(e){const t=this.Hn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(c=>s+c))}Hn(e){let t=0;return this.zn(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}zn(e,t){return this.Jn(e,(s,c)=>t(c))}addReference(e,t,s){return $l(e,s)}removeReference(e,t,s){return $l(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return $l(e,t)}Yn(e,t){return function(s,c){let f=!1;return Pg(s).Z(E=>ch(s,E,c).next(k=>(k&&(f=!0),$t.resolve(!k)))).next(()=>f)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),c=[];let f=0;return this.Jn(e,(E,k)=>{if(k<=t){const G=this.Yn(e,E).next(J=>{if(!J)return f++,s.getEntry(e,E).next(()=>(s.removeEntry(E,sr.min()),zu(e).delete([0,Ut(E.path)])))});c.push(G)}}).next(()=>$t.waitFor(c)).next(()=>s.apply(e)).next(()=>f)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return $l(e,t)}Jn(e,t){const s=zu(e);let c,f=z.ct;return s.X({index:"documentTargetsIndex"},([E,k],{path:G,sequenceNumber:J})=>{0===E?(f!==z.ct&&t(new Ln($n(c)),f),f=J,c=G):f=z.ct}).next(()=>{f!==z.ct&&t(new Ln($n(c)),f)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function $l(r,e){return zu(r).put((s=r.currentSequenceNumber,{targetId:0,path:Ut(e.path),sequenceNumber:s}));var s}class Qh{constructor(){this.changes=new Ec(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ti.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?$t.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Tc{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return pl(e).put(s)}removeEntry(e,t,s){return pl(e).delete(function(c,f){const E=c.path.toArray();return[E.slice(0,E.length-2),E[E.length-2],Bu(f),E[E.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Xn(e,s)))}getEntry(e,t){let s=Ti.newInvalidDocument(t);return pl(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Hp(t))},(c,f)=>{s=this.Zn(t,f)}).next(()=>s)}ts(e,t){let s={size:0,document:Ti.newInvalidDocument(t)};return pl(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Hp(t))},(c,f)=>{s={document:this.Zn(t,f),size:Xr(f)}}).next(()=>s)}getEntries(e,t){let s=js();return this.es(e,t,(c,f)=>{const E=this.Zn(c,f);s=s.insert(c,E)}).next(()=>s)}ns(e,t){let s=js(),c=new xr(Ln.comparator);return this.es(e,t,(f,E)=>{const k=this.Zn(f,E);s=s.insert(f,k),c=c.insert(f,Xr(E))}).next(()=>({documents:s,ss:c}))}es(e,t,s){if(t.isEmpty())return $t.resolve();let c=new Ui(xd);t.forEach(G=>c=c.add(G));const f=IDBKeyRange.bound(Hp(c.first()),Hp(c.last())),E=c.getIterator();let k=E.getNext();return pl(e).X({index:"documentKeyIndex",range:f},(G,J,ue)=>{const tt=Ln.fromSegments([...J.prefixPath,J.collectionGroup,J.documentId]);for(;k&&xd(k,tt)<0;)s(k,null),k=E.getNext();k&&k.isEqual(tt)&&(s(k,J),k=E.hasNext()?E.getNext():null),k?ue.G(Hp(k)):ue.done()}).next(()=>{for(;k;)s(k,null),k=E.hasNext()?E.getNext():null})}getDocumentsMatchingQuery(e,t,s,c){const f=t.path,E=[f.popLast().toArray(),f.lastSegment(),Bu(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],k=[f.popLast().toArray(),f.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return pl(e).j(IDBKeyRange.bound(E,k,!0)).next(G=>{let J=js();for(const ue of G){const tt=this.Zn(Ln.fromSegments(ue.prefixPath.concat(ue.collectionGroup,ue.documentId)),ue);tt.isFoundDocument()&&(_c(t,tt)||c.has(tt.key))&&(J=J.insert(tt.key,tt))}return J})}getAllFromCollectionGroup(e,t,s,c){let f=js();const E=kg(t,s),k=kg(t,es.max());return pl(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(E,k,!0)},(G,J,ue)=>{const tt=this.Zn(Ln.fromSegments(J.prefixPath.concat(J.collectionGroup,J.documentId)),J);f=f.insert(tt.key,tt),f.size===c&&ue.done()}).next(()=>f)}newChangeBuffer(e){return new ty(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return jp(e).get("remoteDocumentGlobalKey").next(t=>(dr(!!t),t))}Xn(e,t){return jp(e).put("remoteDocumentGlobalKey",t)}Zn(e,t){if(t){const s=function Wh(r,e){let t;if(e.document)t=jh(r.le,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=Ln.fromSegments(e.noDocument.path),c=ic(e.noDocument.readTime);t=Ti.newNoDocument(s,c),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Kn();{const s=Ln.fromSegments(e.unknownDocument.path),c=ic(e.unknownDocument.version);t=Ti.newUnknownDocument(s,c)}}return e.readTime&&t.setReadTime(function(s){const c=new ci(s[0],s[1]);return sr.fromTimestamp(c)}(e.readTime)),t}(this.serializer,t);if(!s.isNoDocument()||!s.version.isEqual(sr.min()))return s}return Ti.newInvalidDocument(e)}}function Ad(r){return new Tc(r)}class ty extends Qh{constructor(e,t){super(),this.rs=e,this.trackRemovals=t,this.os=new Ec(s=>s.toString(),(s,c)=>s.isEqual(c))}applyChanges(e){const t=[];let s=0,c=new Ui((f,E)=>pr(f.canonicalString(),E.canonicalString()));return this.changes.forEach((f,E)=>{const k=this.os.get(f);if(t.push(this.rs.removeEntry(e,f,k.readTime)),E.isValidDocument()){const G=Ka(this.rs.serializer,E);c=c.add(f.path.popLast());const J=Xr(G);s+=J-k.size,t.push(this.rs.addEntry(e,f,G))}else if(s-=k.size,this.trackRemovals){const G=Ka(this.rs.serializer,E.convertToNoDocument(sr.min()));t.push(this.rs.addEntry(e,f,G))}}),c.forEach(f=>{t.push(this.rs.indexManager.addToCollectionParentIndex(e,f))}),t.push(this.rs.updateMetadata(e,s)),$t.waitFor(t)}getFromCache(e,t){return this.rs.ts(e,t).next(s=>(this.os.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.rs.ns(e,t).next(({documents:s,ss:c})=>(c.forEach((f,E)=>{this.os.set(f,{size:E,readTime:s.get(f).readTime})}),s))}}function jp(r){return Bs(r,"remoteDocumentGlobal")}function pl(r){return Bs(r,"remoteDocumentsV14")}function Hp(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function kg(r,e){const t=e.documentKey.path.toArray();return[r,Bu(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function xd(r,e){const t=r.path.toArray(),s=e.path.toArray();let c=0;for(let f=0;f<t.length-2&&f<s.length-2;++f)if(c=pr(t[f],s[f]),c)return c;return c=pr(t.length,s.length),c||(c=pr(t[t.length-2],s[s.length-2]),c||pr(t[t.length-1],s[s.length-1]))}class zp{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Gp{constructor(e,t,s,c){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=c}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(c=>(s=c,this.remoteDocumentCache.getEntry(e,t))).next(c=>(null!==s&&uu(s.mutation,c,gs.empty(),ci.now()),c))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,Zr()).next(()=>s))}getLocalViewOfDocuments(e,t,s=Zr()){const c=Ia();return this.populateOverlays(e,c,t).next(()=>this.computeViews(e,t,c,s).next(f=>{let E=Xl();return f.forEach((k,G)=>{E=E.insert(k,G.overlayedDocument)}),E}))}getOverlayedDocuments(e,t){const s=Ia();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,Zr()))}populateOverlays(e,t,s){const c=[];return s.forEach(f=>{t.has(f)||c.push(f)}),this.documentOverlayCache.getOverlays(e,c).next(f=>{f.forEach((E,k)=>{t.set(E,k)})})}computeViews(e,t,s,c){let f=js();const E=Au(),k=Au();return t.forEach((G,J)=>{const ue=s.get(J.key);c.has(J.key)&&(void 0===ue||ue.mutation instanceof Jl)?f=f.insert(J.key,J):void 0!==ue?(E.set(J.key,ue.mutation.getFieldMask()),uu(ue.mutation,J,ue.mutation.getFieldMask(),ci.now())):E.set(J.key,gs.empty())}),this.recalculateAndSaveOverlays(e,f).next(G=>(G.forEach((J,ue)=>E.set(J,ue)),t.forEach((J,ue)=>{var tt;return k.set(J,new zp(ue,null!==(tt=E.get(J))&&void 0!==tt?tt:null))}),k))}recalculateAndSaveOverlays(e,t){const s=Au();let c=new xr((E,k)=>E-k),f=Zr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(E=>{for(const k of E)k.keys().forEach(G=>{const J=t.get(G);if(null===J)return;let ue=s.get(G)||gs.empty();ue=k.applyToLocalView(J,ue),s.set(G,ue);const tt=(c.get(k.batchId)||Zr()).add(G);c=c.insert(k.batchId,tt)})}).next(()=>{const E=[],k=c.getReverseIterator();for(;k.hasNext();){const G=k.getNext(),J=G.key,ue=G.value,tt=Gd();ue.forEach(Bt=>{if(!f.has(Bt)){const fn=kl(t.get(Bt),s.get(Bt));null!==fn&&tt.set(Bt,fn),f=f.add(Bt)}}),E.push(this.documentOverlayCache.saveOverlays(e,J,tt))}return $t.waitFor(E)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return Ln.isDocumentKey((c=t).path)&&null===c.collectionGroup&&0===c.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):dd(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var c}getNextDocuments(e,t,s,c){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,c).next(f=>{const E=c-f.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,c-f.size):$t.resolve(Ia());let k=-1,G=f;return E.next(J=>$t.forEach(J,(ue,tt)=>(k<tt.largestBatchId&&(k=tt.largestBatchId),f.get(ue)?$t.resolve():this.remoteDocumentCache.getEntry(e,ue).next(Bt=>{G=G.insert(ue,Bt)}))).next(()=>this.populateOverlays(e,J,f)).next(()=>this.computeViews(e,G,J,Zr())).next(ue=>({batchId:k,changes:ou(ue)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ln(t)).next(s=>{let c=Xl();return s.isFoundDocument()&&(c=c.insert(s.key,s)),c})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const c=t.collectionGroup;let f=Xl();return this.indexManager.getCollectionParents(e,c).next(E=>$t.forEach(E,k=>{const G=(J=t,ue=k.child(c),new Ea(ue,null,J.explicitOrderBy.slice(),J.filters.slice(),J.limit,J.limitType,J.startAt,J.endAt));var J,ue;return this.getDocumentsMatchingCollectionQuery(e,G,s).next(J=>{J.forEach((ue,tt)=>{f=f.insert(ue,tt)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,t,s){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,c))).next(f=>{c.forEach((k,G)=>{const J=G.getKey();null===f.get(J)&&(f=f.insert(J,Ti.newInvalidDocument(J)))});let E=Xl();return f.forEach((k,G)=>{const J=c.get(k);void 0!==J&&uu(J.mutation,G,gs.empty(),ci.now()),_c(t,G)&&(E=E.insert(k,G))}),E})}}class Gf{constructor(e){this.serializer=e,this.us=new Map,this.cs=new Map}getBundleMetadata(e,t){return $t.resolve(this.us.get(t))}saveBundleMetadata(e,t){var s;return this.us.set(t.id,{id:(s=t).id,version:s.version,createTime:Ts(s.createTime)}),$t.resolve()}getNamedQuery(e,t){return $t.resolve(this.cs.get(t))}saveNamedQuery(e,t){return this.cs.set(t.name,{name:(s=t).name,query:Mp(s.bundledQuery),readTime:Ts(s.readTime)}),$t.resolve();var s}}class ny{constructor(){this.overlays=new xr(Ln.comparator),this.hs=new Map}getOverlay(e,t){return $t.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Ia();return $t.forEach(t,c=>this.getOverlay(e,c).next(f=>{null!==f&&s.set(c,f)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((c,f)=>{this.de(e,t,f)}),$t.resolve()}removeOverlaysForBatchId(e,t,s){const c=this.hs.get(s);return void 0!==c&&(c.forEach(f=>this.overlays=this.overlays.remove(f)),this.hs.delete(s)),$t.resolve()}getOverlaysForCollection(e,t,s){const c=Ia(),f=t.length+1,E=new Ln(t.child("")),k=this.overlays.getIteratorFrom(E);for(;k.hasNext();){const G=k.getNext().value,J=G.getKey();if(!t.isPrefixOf(J.path))break;J.path.length===f&&G.largestBatchId>s&&c.set(G.getKey(),G)}return $t.resolve(c)}getOverlaysForCollectionGroup(e,t,s,c){let f=new xr((J,ue)=>J-ue);const E=this.overlays.getIterator();for(;E.hasNext();){const J=E.getNext().value;if(J.getKey().getCollectionGroup()===t&&J.largestBatchId>s){let ue=f.get(J.largestBatchId);null===ue&&(ue=Ia(),f=f.insert(J.largestBatchId,ue)),ue.set(J.getKey(),J)}}const k=Ia(),G=f.getIterator();for(;G.hasNext()&&(G.getNext().value.forEach((J,ue)=>k.set(J,ue)),!(k.size()>=c)););return $t.resolve(k)}de(e,t,s){const c=this.overlays.get(s.key);if(null!==c){const E=this.hs.get(c.largestBatchId).delete(s.key);this.hs.set(c.largestBatchId,E)}this.overlays=this.overlays.insert(s.key,new K(t,s));let f=this.hs.get(t);void 0===f&&(f=Zr(),this.hs.set(t,f)),this.hs.set(t,f.add(s.key))}}class Wf{constructor(){this.ls=new Ui(Co.fs),this.ds=new Ui(Co._s)}isEmpty(){return this.ls.isEmpty()}addReference(e,t){const s=new Co(e,t);this.ls=this.ls.add(s),this.ds=this.ds.add(s)}ws(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.gs(new Co(e,t))}ys(e,t){e.forEach(s=>this.removeReference(s,t))}ps(e){const t=new Ln(new Ei([])),s=new Co(t,e),c=new Co(t,e+1),f=[];return this.ds.forEachInRange([s,c],E=>{this.gs(E),f.push(E.key)}),f}Is(){this.ls.forEach(e=>this.gs(e))}gs(e){this.ls=this.ls.delete(e),this.ds=this.ds.delete(e)}Ts(e){const t=new Ln(new Ei([])),s=new Co(t,e),c=new Co(t,e+1);let f=Zr();return this.ds.forEachInRange([s,c],E=>{f=f.add(E.key)}),f}containsKey(e){const t=new Co(e,0),s=this.ls.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class Co{constructor(e,t){this.key=e,this.Es=t}static fs(e,t){return Ln.comparator(e.key,t.key)||pr(e.Es,t.Es)}static _s(e,t){return pr(e.Es,t.Es)||Ln.comparator(e.key,t.key)}}class Kf{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.As=1,this.Rs=new Ui(Co.fs)}checkEmpty(e){return $t.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,c){const f=this.As;this.As++;const E=new y(f,t,s,c);this.mutationQueue.push(E);for(const k of c)this.Rs=this.Rs.add(new Co(k.key,f)),this.indexManager.addToCollectionParentIndex(e,k.key.path.popLast());return $t.resolve(E)}lookupMutationBatch(e,t){return $t.resolve(this.vs(t))}getNextMutationBatchAfterBatchId(e,t){const c=this.Ps(t+1),f=c<0?0:c;return $t.resolve(this.mutationQueue.length>f?this.mutationQueue[f]:null)}getHighestUnacknowledgedBatchId(){return $t.resolve(0===this.mutationQueue.length?-1:this.As-1)}getAllMutationBatches(e){return $t.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Co(t,0),c=new Co(t,Number.POSITIVE_INFINITY),f=[];return this.Rs.forEachInRange([s,c],E=>{const k=this.vs(E.Es);f.push(k)}),$t.resolve(f)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Ui(pr);return t.forEach(c=>{const f=new Co(c,0),E=new Co(c,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([f,E],k=>{s=s.add(k.Es)})}),$t.resolve(this.bs(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,c=s.length+1;let f=s;Ln.isDocumentKey(f)||(f=f.child(""));const E=new Co(new Ln(f),0);let k=new Ui(pr);return this.Rs.forEachWhile(G=>{const J=G.key.path;return!!s.isPrefixOf(J)&&(J.length===c&&(k=k.add(G.Es)),!0)},E),$t.resolve(this.bs(k))}bs(e){const t=[];return e.forEach(s=>{const c=this.vs(s);null!==c&&t.push(c)}),t}removeMutationBatch(e,t){dr(0===this.Vs(t.batchId,"removed")),this.mutationQueue.shift();let s=this.Rs;return $t.forEach(t.mutations,c=>{const f=new Co(c.key,t.batchId);return s=s.delete(f),this.referenceDelegate.markPotentiallyOrphaned(e,c.key)}).next(()=>{this.Rs=s})}Dn(e){}containsKey(e,t){const s=new Co(t,0),c=this.Rs.firstAfterOrEqual(s);return $t.resolve(t.isEqual(c&&c.key))}performConsistencyCheck(e){return $t.resolve()}Vs(e,t){return this.Ps(e)}Ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}vs(e){const t=this.Ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Jh{constructor(e){this.Ss=e,this.docs=new xr(Ln.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,c=this.docs.get(s),f=c?c.size:0,E=this.Ss(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:E}),this.size+=E-f,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return $t.resolve(s?s.document.mutableCopy():Ti.newInvalidDocument(t))}getEntries(e,t){let s=js();return t.forEach(c=>{const f=this.docs.get(c);s=s.insert(c,f?f.document.mutableCopy():Ti.newInvalidDocument(c))}),$t.resolve(s)}getDocumentsMatchingQuery(e,t,s,c){let f=js();const E=t.path,k=new Ln(E.child("")),G=this.docs.getIteratorFrom(k);for(;G.hasNext();){const{key:J,value:{document:ue}}=G.getNext();if(!E.isPrefixOf(J.path))break;J.path.length>E.length+1||Dl(Ds(ue),s)<=0||(c.has(ue.key)||_c(t,ue))&&(f=f.insert(ue.key,ue.mutableCopy()))}return $t.resolve(f)}getAllFromCollectionGroup(e,t,s,c){Kn()}Ds(e,t){return $t.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new Wp(this)}getSize(e){return $t.resolve(this.size)}}class Wp extends Qh{constructor(e){super(),this.rs=e}applyChanges(e){const t=[];return this.changes.forEach((s,c)=>{c.isValidDocument()?t.push(this.rs.addEntry(e,c)):this.rs.removeEntry(s)}),$t.waitFor(t)}getFromCache(e,t){return this.rs.getEntry(e,t)}getAllFromCache(e,t){return this.rs.getEntries(e,t)}}class Ng{constructor(e){this.persistence=e,this.Cs=new Ec(t=>Oa(t),$c),this.lastRemoteSnapshotVersion=sr.min(),this.highestTargetId=0,this.xs=0,this.Ns=new Wf,this.targetCount=0,this.ks=Hu.Nn()}forEachTarget(e,t){return this.Cs.forEach((s,c)=>t(c)),$t.resolve()}getLastRemoteSnapshotVersion(e){return $t.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $t.resolve(this.xs)}allocateTargetId(e){return this.highestTargetId=this.ks.next(),$t.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.xs&&(this.xs=t),$t.resolve()}$n(e){this.Cs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ks=new Hu(t),this.highestTargetId=t),e.sequenceNumber>this.xs&&(this.xs=e.sequenceNumber)}addTargetData(e,t){return this.$n(t),this.targetCount+=1,$t.resolve()}updateTargetData(e,t){return this.$n(t),$t.resolve()}removeTargetData(e,t){return this.Cs.delete(t.target),this.Ns.ps(t.targetId),this.targetCount-=1,$t.resolve()}removeTargets(e,t,s){let c=0;const f=[];return this.Cs.forEach((E,k)=>{k.sequenceNumber<=t&&null===s.get(k.targetId)&&(this.Cs.delete(E),f.push(this.removeMatchingKeysForTargetId(e,k.targetId)),c++)}),$t.waitFor(f).next(()=>c)}getTargetCount(e){return $t.resolve(this.targetCount)}getTargetData(e,t){const s=this.Cs.get(t)||null;return $t.resolve(s)}addMatchingKeys(e,t,s){return this.Ns.ws(t,s),$t.resolve()}removeMatchingKeys(e,t,s){this.Ns.ys(t,s);const c=this.persistence.referenceDelegate,f=[];return c&&t.forEach(E=>{f.push(c.markPotentiallyOrphaned(e,E))}),$t.waitFor(f)}removeMatchingKeysForTargetId(e,t){return this.Ns.ps(t),$t.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Ns.Ts(t);return $t.resolve(s)}containsKey(e,t){return $t.resolve(this.Ns.containsKey(t))}}class ef{constructor(e,t){this.Ms={},this.overlays={},this.Os=new z(0),this.$s=!1,this.$s=!0,this.referenceDelegate=e(this),this.Fs=new Ng(this),this.indexManager=new Fp,this.remoteDocumentCache=new Jh(s=>this.referenceDelegate.Bs(s)),this.serializer=new Xm(t),this.Ls=new Gf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.$s=!1,Promise.resolve()}get started(){return this.$s}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ny,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Ms[e.toKey()];return s||(s=new Kf(t,this.referenceDelegate),this.Ms[e.toKey()]=s),s}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ls}runTransaction(e,t,s){_n("MemoryPersistence","Starting transaction:",e);const c=new Fg(this.Os.next());return this.referenceDelegate.qs(),s(c).next(f=>this.referenceDelegate.Us(c).next(()=>f)).toPromise().then(f=>(c.raiseOnCommittedEvent(),f))}Ks(e,t){return $t.or(Object.values(this.Ms).map(s=>()=>s.containsKey(e,t)))}}class Fg extends qr{constructor(e){super(),this.currentSequenceNumber=e}}class dh{constructor(e){this.persistence=e,this.Gs=new Wf,this.Qs=null}static js(e){return new dh(e)}get zs(){if(this.Qs)return this.Qs;throw Kn()}addReference(e,t,s){return this.Gs.addReference(s,t),this.zs.delete(s.toString()),$t.resolve()}removeReference(e,t,s){return this.Gs.removeReference(s,t),this.zs.add(s.toString()),$t.resolve()}markPotentiallyOrphaned(e,t){return this.zs.add(t.toString()),$t.resolve()}removeTarget(e,t){this.Gs.ps(t.targetId).forEach(c=>this.zs.add(c.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(c=>{c.forEach(f=>this.zs.add(f.toString()))}).next(()=>s.removeTargetData(e,t))}qs(){this.Qs=new Set}Us(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $t.forEach(this.zs,s=>{const c=Ln.fromPath(s);return this.Ws(e,c).next(f=>{f||t.removeEntry(c,sr.min())})}).next(()=>(this.Qs=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ws(e,t).next(s=>{s?this.zs.delete(t.toString()):this.zs.add(t.toString())})}Bs(e){return 0}Ws(e,t){return $t.or([()=>$t.resolve(this.Gs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ks(e,t)])}}class Bl{constructor(e){this.serializer=e}$(e,t,s,c){const f=new Di("createOrUpgrade",t);var k;s<1&&c>=1&&(e.createObjectStore("owner"),(k=e).createObjectStore("mutationQueues",{keyPath:"userId"}),k.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ii,{unique:!0}),k.createObjectStore("documentMutations"),Lg(e),function(k){k.createObjectStore("remoteDocuments")}(e));let E=$t.resolve();return s<3&&c>=3&&(0!==s&&(function(k){k.deleteObjectStore("targetDocuments"),k.deleteObjectStore("targets"),k.deleteObjectStore("targetGlobal")}(e),Lg(e)),E=E.next(()=>function(k){const G=k.store("targetGlobal"),J={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:sr.min().toTimestamp(),targetCount:0};return G.put("targetGlobalKey",J)}(f))),s<4&&c>=4&&(0!==s&&(E=E.next(()=>function(k,G){return G.store("mutations").j().next(J=>{k.deleteObjectStore("mutations"),k.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ii,{unique:!0});const ue=G.store("mutations"),tt=J.map(Bt=>ue.put(Bt));return $t.waitFor(tt)})}(e,f))),E=E.next(()=>{!function(k){k.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&c>=5&&(E=E.next(()=>this.Js(f))),s<6&&c>=6&&(E=E.next(()=>(function(k){k.createObjectStore("remoteDocumentGlobal")}(e),this.Ys(f)))),s<7&&c>=7&&(E=E.next(()=>this.Xs(f))),s<8&&c>=8&&(E=E.next(()=>this.Zs(e,f))),s<9&&c>=9&&(E=E.next(()=>{!function(k){k.objectStoreNames.contains("remoteDocumentChanges")&&k.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&c>=10&&(E=E.next(()=>this.ti(f))),s<11&&c>=11&&(E=E.next(()=>{(function(k){k.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(k){k.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&c>=12&&(E=E.next(()=>{!function(k){const G=k.createObjectStore("documentOverlays",{keyPath:rd});G.createIndex("collectionPathOverlayIndex",id,{unique:!1}),G.createIndex("collectionGroupOverlayIndex",sd,{unique:!1})}(e)})),s<13&&c>=13&&(E=E.next(()=>function(k){const G=k.createObjectStore("remoteDocumentsV14",{keyPath:Mo});G.createIndex("documentKeyIndex",Is),G.createIndex("collectionGroupIndex",Or)}(e)).next(()=>this.ei(e,f)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&c>=14&&(E=E.next(()=>this.ni(e,f))),s<15&&c>=15&&(E=E.next(()=>function(k){k.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),k.createObjectStore("indexState",{keyPath:Tl}).createIndex("sequenceNumberIndex",sl,{unique:!1}),k.createObjectStore("indexEntries",{keyPath:Bd}).createIndex("documentKeyIndex",Zo,{unique:!1})}(e))),E}Ys(e){let t=0;return e.store("remoteDocuments").X((s,c)=>{t+=Xr(c)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Js(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.j().next(c=>$t.forEach(c,f=>{const E=IDBKeyRange.bound([f.userId,-1],[f.userId,f.lastAcknowledgedBatchId]);return s.j("userMutationsIndex",E).next(k=>$t.forEach(k,G=>{dr(G.userId===f.userId);const J=fu(this.serializer,G);return $p(e,f.userId,J).next(()=>{})}))}))}Xs(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(c=>{const f=[];return s.X((E,k)=>{const G=new Ei(E),J=[0,Ut(G)];f.push(t.get(J).next(ue=>ue?$t.resolve():t.put({targetId:0,path:Ut(G),sequenceNumber:c.highestListenSequenceNumber})))}).next(()=>$t.waitFor(f))})}Zs(e,t){e.createObjectStore("collectionParents",{keyPath:Bo});const s=t.store("collectionParents"),c=new fl,f=E=>{if(c.add(E)){const k=E.lastSegment(),G=E.popLast();return s.put({collectionId:k,parent:Ut(G)})}};return t.store("remoteDocuments").X({Y:!0},(E,k)=>{const G=new Ei(E);return f(G.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([E,k,G],J)=>{const ue=$n(k);return f(ue.popLast())}))}ti(e){const t=e.store("targets");return t.X((s,c)=>{const f=Vc(c),E=ih(this.serializer,f);return t.put(E)})}ei(e,t){const s=t.store("remoteDocuments"),c=[];return s.X((f,E)=>{const k=t.store("remoteDocumentsV14"),G=(J=E,J.document?new Ln(Ei.fromString(J.document.name).popFirst(5)):J.noDocument?Ln.fromSegments(J.noDocument.path):J.unknownDocument?Ln.fromSegments(J.unknownDocument.path):Kn()).path.toArray();var J;const ue={prefixPath:G.slice(0,G.length-2),collectionGroup:G[G.length-2],documentId:G[G.length-1],readTime:E.readTime||[0,0],unknownDocument:E.unknownDocument,noDocument:E.noDocument,document:E.document,hasCommittedMutations:!!E.hasCommittedMutations};c.push(k.put(ue))}).next(()=>$t.waitFor(c))}ni(e,t){const s=t.store("mutations"),c=Ad(this.serializer),f=new ef(dh.js,this.serializer.le);return s.j().next(E=>{const k=new Map;return E.forEach(G=>{var J;let ue=null!==(J=k.get(G.userId))&&void 0!==J?J:Zr();fu(this.serializer,G).keys().forEach(tt=>ue=ue.add(tt)),k.set(G.userId,ue)}),$t.forEach(k,(G,J)=>{const ue=new Wi(J),tt=bd.fe(this.serializer,ue),Bt=f.getIndexManager(ue),fn=lh.fe(ue,this.serializer,Bt,f.referenceDelegate);return new Gp(c,fn,tt,Bt).recalculateAndSaveOverlaysForDocumentKeys(new wu(t,z.ct),G).next()})})}}function Lg(r){r.createObjectStore("targetDocuments",{keyPath:_o}).createIndex("documentTargetsIndex",eu,{unique:!0}),r.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",fc,{unique:!0}),r.createObjectStore("targetGlobal")}const tf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Kp{constructor(e,t,s,c,f,E,k,G,J,ue,tt=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.si=f,this.window=E,this.document=k,this.ii=J,this.ri=ue,this.oi=tt,this.Os=null,this.$s=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.ai=null,this.hi=Number.NEGATIVE_INFINITY,this.li=Bt=>Promise.resolve(),!Kp.D())throw new hn(Ht.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new uh(this,c),this.fi=t+"main",this.serializer=new Xm(G),this.di=new to(this.fi,this.oi,new Bl(this.serializer)),this.Fs=new Bp(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Ad(this.serializer),this.Ls=new sh,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===ue&&Ji("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new hn(Ht.FAILED_PRECONDITION,tf);return this.mi(),this.gi(),this.yi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Fs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new z(e,this.ii)}).then(()=>{this.$s=!0}).catch(e=>(this.di&&this.di.close(),Promise.reject(e)))}pi(e){var t=this;return this.li=function(){var s=(0,de.Z)(function*(c){if(t.started)return e(c)});return function(c){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.di.B(function(){var t=(0,de.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,de.Z)(function*(){t.started&&(yield t.wi())})))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>jc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ii(e).next(t=>{t||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.li(!1)))})}).next(()=>this.Ti(e)).next(t=>this.isPrimary&&!t?this.Ei(e).next(()=>!1):!!t&&this.Ai(e).next(()=>!0))).catch(e=>{if(Yo(e))return _n("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return _n("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.li(e)),this.isPrimary=e})}Ii(e){return qf(e).get("owner").next(t=>$t.resolve(this.Ri(t)))}vi(e){return jc(e).delete(this.clientId)}Pi(){var e=this;return(0,de.Z)(function*(){if(e.isPrimary&&!e.bi(e.hi,18e5)){e.hi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const c=Bs(s,"clientMetadata");return c.j().next(f=>{const E=e.Vi(f,18e5),k=f.filter(G=>-1===E.indexOf(G));return $t.forEach(k,G=>c.delete(G.clientId)).next(()=>k)})}).catch(()=>[]);if(e._i)for(const s of t)e._i.removeItem(e.Si(s.clientId))}})()}yi(){this.ai=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Pi()).then(()=>this.yi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ti(e){return this.ri?$t.resolve(!0):qf(e).get("owner").next(t=>{if(null!==t&&this.bi(t.leaseTimestampMs,5e3)&&!this.Di(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new hn(Ht.FAILED_PRECONDITION,tf);return!1}}return!(!this.networkEnabled||!this.inForeground)||jc(e).j().next(s=>void 0===this.Vi(s,5e3).find(c=>!(this.clientId===c.clientId||!(!this.networkEnabled&&c.networkEnabled||!this.inForeground&&c.inForeground&&this.networkEnabled===c.networkEnabled))))}).next(t=>(this.isPrimary!==t&&_n("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,de.Z)(function*(){e.$s=!1,e.Ci(),e.ai&&(e.ai.cancel(),e.ai=null),e.xi(),e.Ni(),yield e.di.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new wu(t,z.ct);return e.Ei(s).next(()=>e.vi(s))}),e.di.close(),e.ki()})()}Vi(e,t){return e.filter(s=>this.bi(s.updateTimeMs,t)&&!this.Di(s.clientId))}Mi(){return this.runTransaction("getActiveClients","readonly",e=>jc(e).j().next(t=>this.Vi(t,18e5).map(s=>s.clientId)))}get started(){return this.$s}getMutationQueue(e,t){return lh.fe(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Dd(e,this.serializer.le.databaseId)}getDocumentOverlayCache(e){return bd.fe(this.serializer,e)}getBundleCache(){return this.Ls}runTransaction(e,t,s){_n("IndexedDbPersistence","Starting transaction:",e);const c="readonly"===t?"readonly":"readwrite",f=15===(E=this.oi)?Fc:14===E?Nc:13===E?kc:12===E?Ud:11===E?Iu:void Kn();var E;let k;return this.di.runTransaction(e,c,f,G=>(k=new wu(G,this.Os?this.Os.next():z.ct),"readwrite-primary"===t?this.Ii(k).next(J=>!!J||this.Ti(k)).next(J=>{if(!J)throw Ji(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.li(!1)),new hn(Ht.FAILED_PRECONDITION,Gl);return s(k)}).next(J=>this.Ai(k).next(()=>J)):this.Oi(k).next(()=>s(k)))).then(G=>(k.raiseOnCommittedEvent(),G))}Oi(e){return qf(e).get("owner").next(t=>{if(null!==t&&this.bi(t.leaseTimestampMs,5e3)&&!this.Di(t.ownerId)&&!this.Ri(t)&&!(this.ri||this.allowTabSynchronization&&t.allowTabSynchronization))throw new hn(Ht.FAILED_PRECONDITION,tf)})}Ai(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return qf(e).put("owner",t)}static D(){return to.D()}Ei(e){const t=qf(e);return t.get("owner").next(s=>this.Ri(s)?(_n("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):$t.resolve())}bi(e,t){const s=Date.now();return!(e<s-t||e>s&&(Ji(`Detected an update time that is in the future: ${e} > ${s}`),1))}mi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.wi()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Ci();const t=/(?:Version|Mobile)\/1[456]/;(0,et.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Ni(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Di(e){var t;try{const s=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Si(e)));return _n("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return Ji("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}Ci(){if(this._i)try{this._i.setItem(this.Si(this.clientId),String(Date.now()))}catch(e){Ji("Failed to set zombie client id.",e)}}ki(){if(this._i)try{this._i.removeItem(this.Si(this.clientId))}catch{}}Si(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function qf(r){return Bs(r,"owner")}function jc(r){return Bs(r,"clientMetadata")}function Yf(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class qp{constructor(e,t,s,c){this.targetId=e,this.fromCache=t,this.$i=s,this.Fi=c}static Bi(e,t){let s=Zr(),c=Zr();for(const f of t.docChanges)switch(f.type){case 0:s=s.add(f.doc.key);break;case 1:c=c.add(f.doc.key)}return new qp(e,t.fromCache,s,c)}}class Yp{constructor(){this.Li=!1}initialize(e,t){this.qi=e,this.indexManager=t,this.Li=!0}getDocumentsMatchingQuery(e,t,s,c){return this.Ui(e,t).next(f=>f||this.Ki(e,t,c,s)).next(f=>f||this.Gi(e,t))}Ui(e,t){if(cd(t))return $t.resolve(null);let s=wo(t);return this.indexManager.getIndexType(e,s).next(c=>0===c?null:(null!==t.limit&&1===c&&(t=hd(t,null,"F"),s=wo(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(f=>{const E=Zr(...f);return this.qi.getDocuments(e,E).next(k=>this.indexManager.getMinOffset(e,s).next(G=>{const J=this.Qi(t,k);return this.ji(t,J,E,G.readTime)?this.Ui(e,hd(t,null,"F")):this.zi(e,J,t,G)}))})))}Ki(e,t,s,c){return cd(t)||c.isEqual(sr.min())?this.Gi(e,t):this.qi.getDocuments(e,s).next(f=>{const E=this.Qi(t,f);return this.ji(t,E,s,c)?this.Gi(e,t):(ac()<=it.in.DEBUG&&_n("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),Su(t)),this.zi(e,E,t,Jc(c,-1)))})}Qi(e,t){let s=new Ui(Nh(e));return t.forEach((c,f)=>{_c(e,f)&&(s=s.add(f))}),s}ji(e,t,s,c){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const f="F"===e.limitType?t.last():t.first();return!!f&&(f.hasPendingWrites||f.version.compareTo(c)>0)}Gi(e,t){return ac()<=it.in.DEBUG&&_n("QueryEngine","Using full collection scan to execute query:",Su(t)),this.qi.getDocumentsMatchingQuery(e,t,es.min())}zi(e,t,s,c){return this.qi.getDocumentsMatchingQuery(e,s,c).next(f=>(t.forEach(E=>{f=f.insert(E.key,E)}),f))}}class ry{constructor(e,t,s,c){this.persistence=e,this.Wi=t,this.serializer=c,this.Hi=new xr(pr),this.Ji=new Ec(f=>Oa(f),$c),this.Yi=new Map,this.Xi=e.getRemoteDocumentCache(),this.Fs=e.getTargetCache(),this.Ls=e.getBundleCache(),this.Zi(s)}Zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Gp(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Wi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Hi))}}function $g(r,e,t,s){return new ry(r,e,t,s)}function nf(r,e){return Wu.apply(this,arguments)}function Wu(){return Wu=(0,de.Z)(function*(r,e){const t=jn(r);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let c;return t.mutationQueue.getAllMutationBatches(s).next(f=>(c=f,t.Zi(e),t.mutationQueue.getAllMutationBatches(s))).next(f=>{const E=[],k=[];let G=Zr();for(const J of c){E.push(J.batchId);for(const ue of J.mutations)G=G.add(ue.key)}for(const J of f){k.push(J.batchId);for(const ue of J.mutations)G=G.add(ue.key)}return t.localDocuments.getDocuments(s,G).next(J=>({tr:J,removedBatchIds:E,addedBatchIds:k}))})})}),Wu.apply(this,arguments)}function fh(r){const e=jn(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Fs.getLastRemoteSnapshotVersion(t))}function rf(r,e,t){let s=Zr(),c=Zr();return t.forEach(f=>s=s.add(f)),e.getEntries(r,s).next(f=>{let E=js();return t.forEach((k,G)=>{const J=f.get(k);G.isFoundDocument()!==J.isFoundDocument()&&(c=c.add(k)),G.isNoDocument()&&G.version.isEqual(sr.min())?(e.removeEntry(k,G.readTime),E=E.insert(k,G)):!J.isValidDocument()||G.version.compareTo(J.version)>0||0===G.version.compareTo(J.version)&&J.hasPendingWrites?(e.addEntry(G),E=E.insert(k,G)):_n("LocalStore","Ignoring outdated watch update for ",k,". Current version:",J.version," Watch version:",G.version)}),{er:E,nr:c}})}function Bg(r,e){const t=jn(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function Ku(r,e){const t=jn(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let c;return t.Fs.getTargetData(s,e).next(f=>f?(c=f,$t.resolve(c)):t.Fs.allocateTargetId(s).next(E=>(c=new bc(e,E,"TargetPurposeListen",s.currentSequenceNumber),t.Fs.addTargetData(s,c).next(()=>c))))}).then(s=>{const c=t.Hi.get(s.targetId);return(null===c||s.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(t.Hi=t.Hi.insert(s.targetId,s),t.Ji.set(e,s.targetId)),s})}function qu(r,e,t){return sf.apply(this,arguments)}function sf(){return sf=(0,de.Z)(function*(r,e,t){const s=jn(r),c=s.Hi.get(e),f=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",f,E=>s.persistence.referenceDelegate.removeTarget(E,c)))}catch(E){if(!Yo(E))throw E;_n("LocalStore",`Failed to update sequence numbers for target ${e}: ${E}`)}s.Hi=s.Hi.remove(e),s.Ji.delete(c.target)}),sf.apply(this,arguments)}function af(r,e,t){const s=jn(r);let c=sr.min(),f=Zr();return s.persistence.runTransaction("Execute query","readonly",E=>function(k,G,J){const ue=jn(k),tt=ue.Ji.get(J);return void 0!==tt?$t.resolve(ue.Hi.get(tt)):ue.Fs.getTargetData(G,J)}(s,E,wo(e)).next(k=>{if(k)return c=k.lastLimboFreeSnapshotVersion,s.Fs.getMatchingKeysForTargetId(E,k.targetId).next(G=>{f=G})}).next(()=>s.Wi.getDocumentsMatchingQuery(E,e,t?c:sr.min(),t?f:Zr())).next(k=>(Ug(s,kh(e),k),{documents:k,sr:f})))}function Zf(r,e){const t=jn(r),s=jn(t.Fs),c=t.Hi.get(e);return c?Promise.resolve(c.target):t.persistence.runTransaction("Get target data","readonly",f=>s.he(f,e).next(E=>E?E.target:null))}function sc(r,e){const t=jn(r),s=t.Yi.get(e)||sr.min();return t.persistence.runTransaction("Get new document changes","readonly",c=>t.Xi.getAllFromCollectionGroup(c,e,Jc(s,-1),Number.MAX_SAFE_INTEGER)).then(c=>(Ug(t,e,c),c))}function Ug(r,e,t){let s=r.Yi.get(e)||sr.min();t.forEach((c,f)=>{f.readTime.compareTo(s)>0&&(s=f.readTime)}),r.Yi.set(e,s)}function Qf(){return Qf=(0,de.Z)(function*(r,e,t,s){const c=jn(r);let f=Zr(),E=js();for(const J of t){const ue=e.ir(J.metadata.name);J.document&&(f=f.add(ue));const tt=e.rr(J);tt.setReadTime(e.ur(J.metadata.readTime)),E=E.insert(ue,tt)}const k=c.Xi.newChangeBuffer({trackRemovals:!0}),G=yield Ku(c,(J=s,wo(Ol(Ei.fromString(`__bundle__/docs/${J}`)))));var J;return c.persistence.runTransaction("Apply bundle documents","readwrite",J=>rf(J,k,E).next(ue=>(k.apply(J),ue)).next(ue=>c.Fs.removeMatchingKeysForTargetId(J,G.targetId).next(()=>c.Fs.addMatchingKeys(J,f,G.targetId)).next(()=>c.localDocuments.getLocalViewOfDocuments(J,ue.er,ue.nr)).next(()=>ue.er)))}),Qf.apply(this,arguments)}function Vg(r,e){return lf.apply(this,arguments)}function lf(){return lf=(0,de.Z)(function*(r,e,t=Zr()){const s=yield Ku(r,wo(Mp(e.bundledQuery))),c=jn(r);return c.persistence.runTransaction("Save named query","readwrite",f=>{const E=Ts(e.readTime);if(s.snapshotVersion.compareTo(E)>=0)return c.Ls.saveNamedQuery(f,e);const k=s.withResumeToken(no.EMPTY_BYTE_STRING,E);return c.Hi=c.Hi.insert(k.targetId,k),c.Fs.updateTargetData(f,k).next(()=>c.Fs.removeMatchingKeysForTargetId(f,s.targetId)).next(()=>c.Fs.addMatchingKeys(f,t,s.targetId)).next(()=>c.Ls.saveNamedQuery(f,e))})}),lf.apply(this,arguments)}function jg(r,e){return`firestore_clients_${r}_${e}`}function Hg(r,e,t){let s=`firestore_mutations_${r}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Ya(r,e){return`firestore_targets_${r}_${e}`}class Jf{constructor(e,t,s,c){this.user=e,this.batchId=t,this.state=s,this.error=c}static cr(e,t,s){const c=JSON.parse(s);let f,E="object"==typeof c&&-1!==["pending","acknowledged","rejected"].indexOf(c.state)&&(void 0===c.error||"object"==typeof c.error);return E&&c.error&&(E="string"==typeof c.error.message&&"string"==typeof c.error.code,E&&(f=new hn(c.error.code,c.error.message))),E?new Jf(e,t,c.state,f):(Ji("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}ar(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ph{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static cr(e,t){const s=JSON.parse(t);let c,f="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return f&&s.error&&(f="string"==typeof s.error.message&&"string"==typeof s.error.code,f&&(c=new hn(s.error.code,s.error.message))),f?new ph(e,s.state,c):(Ji("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ar(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Qp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static cr(e,t){const s=JSON.parse(t);let c="object"==typeof s&&s.activeTargetIds instanceof Array,f=xu();for(let E=0;c&&E<s.activeTargetIds.length;++E)c=lt(s.activeTargetIds[E]),f=f.add(s.activeTargetIds[E]);return c?new Qp(e,f):(Ji("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class cf{constructor(e,t){this.clientId=e,this.onlineState=t}static cr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new cf(t.clientId,t.onlineState):(Ji("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Jp{constructor(){this.activeTargetIds=xu()}hr(e){this.activeTargetIds=this.activeTargetIds.add(e)}lr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ar(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ep{constructor(e,t,s,c,f){this.window=e,this.si=t,this.persistenceKey=s,this.dr=c,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.wr.bind(this),this.mr=new xr(pr),this.started=!1,this.gr=[];const E=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=f,this.yr=jg(this.persistenceKey,this.dr),this.pr=`firestore_sequence_number_${this.persistenceKey}`,this.mr=this.mr.insert(this.dr,new Jp),this.Ir=new RegExp(`^firestore_clients_${E}_([^_]*)$`),this.Tr=new RegExp(`^firestore_mutations_${E}_(\\d+)(?:_(.*))?$`),this.Er=new RegExp(`^firestore_targets_${E}_(\\d+)$`),this.Ar=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(k){return`firestore_bundle_loaded_v2_${k}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,de.Z)(function*(){const t=yield e.syncEngine.Mi();for(const c of t){if(c===e.dr)continue;const f=e.getItem(jg(e.persistenceKey,c));if(f){const E=Qp.cr(c,f);E&&(e.mr=e.mr.insert(E.clientId,E))}}e.vr();const s=e.storage.getItem(e.Ar);if(s){const c=e.Pr(s);c&&e.br(c)}for(const c of e.gr)e.wr(c);e.gr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.pr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Vr(this.mr)}isActiveQueryTarget(e){let t=!1;return this.mr.forEach((s,c)=>{c.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Sr(e,"pending")}updateMutationState(e,t,s){this.Sr(e,t,s),this.Dr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Ya(this.persistenceKey,e));if(s){const c=ph.cr(e,s);c&&(t=c.state)}}return this.Cr.hr(e),this.vr(),t}removeLocalQueryTarget(e){this.Cr.lr(e),this.vr()}isLocalQueryTarget(e){return this.Cr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ya(this.persistenceKey,e))}updateQueryState(e,t,s){this.Nr(e,t,s)}handleUserChange(e,t,s){t.forEach(c=>{this.Dr(c)}),this.currentUser=e,s.forEach(c=>{this.addPendingMutation(c)})}setOnlineState(e){this.kr(e)}notifyBundleLoaded(e){this.Mr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.yr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return _n("SharedClientState","READ",e,t),t}setItem(e,t){_n("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){_n("SharedClientState","REMOVE",e),this.storage.removeItem(e)}wr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(_n("SharedClientState","EVENT",s.key,s.newValue),s.key===this.yr)return void Ji("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,de.Z)(function*(){if(t.started){if(null!==s.key)if(t.Ir.test(s.key)){if(null==s.newValue){const c=t.Or(s.key);return t.$r(c,null)}{const c=t.Fr(s.key,s.newValue);if(c)return t.$r(c.clientId,c)}}else if(t.Tr.test(s.key)){if(null!==s.newValue){const c=t.Br(s.key,s.newValue);if(c)return t.Lr(c)}}else if(t.Er.test(s.key)){if(null!==s.newValue){const c=t.qr(s.key,s.newValue);if(c)return t.Ur(c)}}else if(s.key===t.Ar){if(null!==s.newValue){const c=t.Pr(s.newValue);if(c)return t.br(c)}}else if(s.key===t.pr){const c=function(f){let E=z.ct;if(null!=f)try{const k=JSON.parse(f);dr("number"==typeof k),E=k}catch(k){Ji("SharedClientState","Failed to read sequence number from WebStorage",k)}return E}(s.newValue);c!==z.ct&&t.sequenceNumberHandler(c)}else if(s.key===t.Rr){const c=t.Kr(s.newValue);yield Promise.all(c.map(f=>t.syncEngine.Gr(f)))}}else t.gr.push(s)}))}}get Cr(){return this.mr.get(this.dr)}vr(){this.setItem(this.yr,this.Cr.ar())}Sr(e,t,s){const c=new Jf(this.currentUser,e,t,s),f=Hg(this.persistenceKey,this.currentUser,e);this.setItem(f,c.ar())}Dr(e){const t=Hg(this.persistenceKey,this.currentUser,e);this.removeItem(t)}kr(e){this.storage.setItem(this.Ar,JSON.stringify({clientId:this.dr,onlineState:e}))}Nr(e,t,s){const c=Ya(this.persistenceKey,e),f=new ph(e,t,s);this.setItem(c,f.ar())}Mr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Ir.exec(e);return t?t[1]:null}Fr(e,t){const s=this.Or(e);return Qp.cr(s,t)}Br(e,t){const s=this.Tr.exec(e),c=Number(s[1]);return Jf.cr(new Wi(void 0!==s[2]?s[2]:null),c,t)}qr(e,t){const s=this.Er.exec(e),c=Number(s[1]);return ph.cr(c,t)}Pr(e){return cf.cr(e)}Kr(e){return JSON.parse(e)}Lr(e){var t=this;return(0,de.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Qr(e.batchId,e.state,e.error);_n("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Ur(e){return this.syncEngine.jr(e.targetId,e.state,e.error)}$r(e,t){const s=t?this.mr.insert(e,t):this.mr.remove(e),c=this.Vr(this.mr),f=this.Vr(s),E=[],k=[];return f.forEach(G=>{c.has(G)||E.push(G)}),c.forEach(G=>{f.has(G)||k.push(G)}),this.syncEngine.zr(E,k).then(()=>{this.mr=s})}br(e){this.mr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Vr(e){let t=xu();return e.forEach((s,c)=>{t=t.unionWith(c.activeTargetIds)}),t}}class zg{constructor(){this.Wr=new Jp,this.Hr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Wr.hr(e),this.Hr[e]||"not-current"}updateQueryState(e,t,s){this.Hr[e]=t}removeLocalQueryTarget(e){this.Wr.lr(e)}isLocalQueryTarget(e){return this.Wr.activeTargetIds.has(e)}clearQueryState(e){delete this.Hr[e]}getAllActiveQueryTargets(){return this.Wr.activeTargetIds}isActiveQueryTarget(e){return this.Wr.activeTargetIds.has(e)}start(){return this.Wr=new Jp,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class iy{Jr(e){}shutdown(){}}class eg{constructor(){this.Yr=()=>this.Xr(),this.Zr=()=>this.eo(),this.no=[],this.so()}Jr(e){this.no.push(e)}shutdown(){window.removeEventListener("online",this.Yr),window.removeEventListener("offline",this.Zr)}so(){window.addEventListener("online",this.Yr),window.addEventListener("offline",this.Zr)}Xr(){_n("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.no)e(0)}eo(){_n("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.no)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let tp=null;function tg(){return null===tp?tp=268435456+Math.round(2147483648*Math.random()):tp++,"0x"+tp.toString(16)}const ng={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class sy{constructor(e){this.io=e.io,this.ro=e.ro}oo(e){this.uo=e}co(e){this.ao=e}onMessage(e){this.ho=e}close(){this.ro()}send(e){this.io(e)}lo(){this.uo()}fo(e){this.ao(e)}_o(e){this.ho(e)}}const La="WebChannelConnection";class oy extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.wo=(e.ssl?"https":"http")+"://"+e.host,this.mo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get yo(){return!1}po(e,t,s,c,f){const E=tg(),k=this.Io(e,t);_n("RestConnection",`Sending RPC '${e}' ${E}:`,k,s);const G={};return this.To(G,c,f),this.Eo(e,k,G,s).then(J=>(_n("RestConnection",`Received RPC '${e}' ${E}: `,J),J),J=>{throw mi("RestConnection",`RPC '${e}' ${E} failed with error: `,J,"url: ",k,"request:",s),J})}Ao(e,t,s,c,f,E){return this.po(e,t,s,c,f)}To(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+vo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((c,f)=>e[f]=c),s&&s.headers.forEach((c,f)=>e[f]=c)}Io(e,t){return`${this.wo}/v1/${t}:${ng[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Eo(e,t,s,c){const f=tg();return new Promise((E,k)=>{const G=new El;G.setWithCredentials(!0),G.listenOnce(Es.COMPLETE,()=>{try{switch(G.getLastErrorCode()){case Ko.NO_ERROR:const ue=G.getResponseJson();_n(La,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(ue)),E(ue);break;case Ko.TIMEOUT:_n(La,`RPC '${e}' ${f} timed out`),k(new hn(Ht.DEADLINE_EXCEEDED,"Request time out"));break;case Ko.HTTP_ERROR:const tt=G.getStatus();if(_n(La,`RPC '${e}' ${f} failed with status:`,tt,"response text:",G.getResponseText()),tt>0){let Bt=G.getResponseJson();Array.isArray(Bt)&&(Bt=Bt[0]);const fn=null==Bt?void 0:Bt.error;if(fn&&fn.status&&fn.message){const Mn=function(Fn){const gr=Fn.toLowerCase().replace(/_/g,"-");return Object.values(Ht).indexOf(gr)>=0?gr:Ht.UNKNOWN}(fn.status);k(new hn(Mn,fn.message))}else k(new hn(Ht.UNKNOWN,"Server responded with status "+G.getStatus()))}else k(new hn(Ht.UNAVAILABLE,"Connection failed."));break;default:Kn()}}finally{_n(La,`RPC '${e}' ${f} completed.`)}});const J=JSON.stringify(c);_n(La,`RPC '${e}' ${f} sending request:`,c),G.send(t,"POST",J,s,15)})}Ro(e,t,s){const c=tg(),f=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],E=Wo(),k=yo(),G={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(G.xmlHttpFactory=new Qs({})),this.To(G.initMessageHeaders,t,s),G.encodeInitMessageHeaders=!0;const J=f.join("");_n(La,`Creating RPC '${e}' stream ${c}: ${J}`,G);const ue=E.createWebChannel(J,G);let tt=!1,Bt=!1;const fn=new sy({io:Fn=>{Bt?_n(La,`Not sending because RPC '${e}' stream ${c} is closed:`,Fn):(tt||(_n(La,`Opening RPC '${e}' stream ${c} transport.`),ue.open(),tt=!0),_n(La,`RPC '${e}' stream ${c} sending:`,Fn),ue.send(Fn))},ro:()=>ue.close()}),Mn=(Fn,gr,ai)=>{Fn.listen(gr,ki=>{try{ai(ki)}catch(li){setTimeout(()=>{throw li},0)}})};return Mn(ue,rl.EventType.OPEN,()=>{Bt||_n(La,`RPC '${e}' stream ${c} transport opened.`)}),Mn(ue,rl.EventType.CLOSE,()=>{Bt||(Bt=!0,_n(La,`RPC '${e}' stream ${c} transport closed`),fn.fo())}),Mn(ue,rl.EventType.ERROR,Fn=>{Bt||(Bt=!0,mi(La,`RPC '${e}' stream ${c} transport errored:`,Fn),fn.fo(new hn(Ht.UNAVAILABLE,"The operation could not be completed")))}),Mn(ue,rl.EventType.MESSAGE,Fn=>{var gr;if(!Bt){const ai=Fn.data[0];dr(!!ai);const li=ai.error||(null===(gr=ai[0])||void 0===gr?void 0:gr.error);if(li){_n(La,`RPC '${e}' stream ${c} received error:`,li);const $a=li.status;let Ps=function(Ba){const Ah=bt[Ba];if(void 0!==Ah)return or(Ah)}($a),bs=li.message;void 0===Ps&&(Ps=Ht.INTERNAL,bs="Unknown error status: "+$a+" with message "+li.message),Bt=!0,fn.fo(new hn(Ps,bs)),ue.close()}else _n(La,`RPC '${e}' stream ${c} received:`,ai),fn._o(ai)}}),Mn(k,Xs.STAT_EVENT,Fn=>{Fn.stat===Ls.PROXY?_n(La,`RPC '${e}' stream ${c} detected buffering proxy`):Fn.stat===Ls.NOPROXY&&_n(La,`RPC '${e}' stream ${c} detected no buffering proxy`)}),setTimeout(()=>{fn.lo()},0),fn}}function ay(){return typeof window<"u"?window:null}function rg(){return typeof document<"u"?document:null}function gl(r){return new Bh(r,!0)}class uf{constructor(e,t,s=1e3,c=1.5,f=6e4){this.si=e,this.timerId=t,this.vo=s,this.Po=c,this.bo=f,this.Vo=0,this.So=null,this.Do=Date.now(),this.reset()}reset(){this.Vo=0}Co(){this.Vo=this.bo}xo(e){this.cancel();const t=Math.floor(this.Vo+this.No()),s=Math.max(0,Date.now()-this.Do),c=Math.max(0,t-s);c>0&&_n("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.Vo} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.So=this.si.enqueueAfterDelay(this.timerId,c,()=>(this.Do=Date.now(),e())),this.Vo*=this.Po,this.Vo<this.vo&&(this.Vo=this.vo),this.Vo>this.bo&&(this.Vo=this.bo)}ko(){null!==this.So&&(this.So.skipDelay(),this.So=null)}cancel(){null!==this.So&&(this.So.cancel(),this.So=null)}No(){return(Math.random()-.5)*this.Vo}}class Gg{constructor(e,t,s,c,f,E,k,G){this.si=e,this.Mo=s,this.Oo=c,this.connection=f,this.authCredentialsProvider=E,this.appCheckCredentialsProvider=k,this.listener=G,this.state=0,this.$o=0,this.Fo=null,this.Bo=null,this.stream=null,this.Lo=new uf(e,t)}qo(){return 1===this.state||5===this.state||this.Uo()}Uo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Ko()}stop(){var e=this;return(0,de.Z)(function*(){e.qo()&&(yield e.close(0))})()}Go(){this.state=0,this.Lo.reset()}Qo(){this.Uo()&&null===this.Fo&&(this.Fo=this.si.enqueueAfterDelay(this.Mo,6e4,()=>this.jo()))}zo(e){this.Wo(),this.stream.send(e)}jo(){var e=this;return(0,de.Z)(function*(){if(e.Uo())return e.close(0)})()}Wo(){this.Fo&&(this.Fo.cancel(),this.Fo=null)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}close(e,t){var s=this;return(0,de.Z)(function*(){s.Wo(),s.Ho(),s.Lo.cancel(),s.$o++,4!==e?s.Lo.reset():t&&t.code===Ht.RESOURCE_EXHAUSTED?(Ji(t.toString()),Ji("Using maximum backoff delay to prevent overloading the backend."),s.Lo.Co()):t&&t.code===Ht.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Jo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.co(t)})()}Jo(){}auth(){this.state=1;const e=this.Yo(this.$o),t=this.$o;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,c])=>{this.$o===t&&this.Xo(s,c)},s=>{e(()=>{const c=new hn(Ht.UNKNOWN,"Fetching auth token failed: "+s.message);return this.Zo(c)})})}Xo(e,t){const s=this.Yo(this.$o);this.stream=this.tu(e,t),this.stream.oo(()=>{s(()=>(this.state=2,this.Bo=this.si.enqueueAfterDelay(this.Oo,1e4,()=>(this.Uo()&&(this.state=3),Promise.resolve())),this.listener.oo()))}),this.stream.co(c=>{s(()=>this.Zo(c))}),this.stream.onMessage(c=>{s(()=>this.onMessage(c))})}Ko(){var e=this;this.state=5,this.Lo.xo((0,de.Z)(function*(){e.state=0,e.start()}))}Zo(e){return _n("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Yo(e){return t=>{this.si.enqueueAndForget(()=>this.$o===e?t():(_n("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Wg extends Gg{constructor(e,t,s,c,f,E){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,c,E),this.serializer=f}tu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.Lo.reset();const t=function xp(r,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(G=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===G?1:"REMOVE"===G?2:"CURRENT"===G?3:"RESET"===G?4:Kn(),c=e.targetChange.targetIds||[],f=function(G,J){return G.useProto3Json?(dr(void 0===J||"string"==typeof J),no.fromBase64String(J||"")):(dr(void 0===J||J instanceof Uint8Array),no.fromUint8Array(J||new Uint8Array))}(r,e.targetChange.resumeToken),E=e.targetChange.cause,k=E&&function(G){const J=void 0===G.code?Ht.UNKNOWN:or(G.code);return new hn(J,G.message||"")}(E);t=new _d(s,c,f,k||null)}else if("documentChange"in e){const s=e.documentChange,c=nc(r,s.document.name),f=Ts(s.document.updateTime),E=s.document.createTime?Ts(s.document.createTime):sr.min(),k=new Vs({mapValue:{fields:s.document.fields}}),G=Ti.newFoundDocument(c,f,E,k);t=new Ou(s.targetIds||[],s.removedTargetIds||[],G.key,G)}else if("documentDelete"in e){const s=e.documentDelete,c=nc(r,s.document),f=s.readTime?Ts(s.readTime):sr.min(),E=Ti.newNoDocument(c,f);t=new Ou([],s.removedTargetIds||[],E.key,E)}else if("documentRemove"in e){const s=e.documentRemove,c=nc(r,s.document);t=new Ou([],s.removedTargetIds||[],c,null)}else{if(!("filter"in e))return Kn();{const s=e.filter,{count:c=0,unchangedNames:f}=s,E=new st(c,f);t=new Zd(s.targetId,E)}}var G;return t}(this.serializer,e),s=function(c){if(!("targetChange"in c))return sr.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?sr.min():f.readTime?Ts(f.readTime):sr.min()}(e);return this.listener.eu(t,s)}nu(e){const t={};t.database=Cd(this.serializer),t.addTarget=function(c,f){let E;const k=f.target;if(E=Pl(k)?{documents:Hh(c,k)}:{query:nh(c,k)},E.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){E.resumeToken=Uh(c,f.resumeToken);const G=eh(c,f.expectedCount);null!==G&&(E.expectedCount=G)}else if(f.snapshotVersion.compareTo(sr.min())>0){E.readTime=Nu(c,f.snapshotVersion.toTimestamp());const G=eh(c,f.expectedCount);null!==G&&(E.expectedCount=G)}return E}(this.serializer,e);const s=function Ff(r,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Kn()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.zo(t)}su(e){const t={};t.database=Cd(this.serializer),t.removeTarget=e,this.zo(t)}}class Kg extends Gg{constructor(e,t,s,c,f,E){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,c,E),this.serializer=f,this.iu=!1}get ru(){return this.iu}start(){this.iu=!1,this.lastStreamToken=void 0,super.start()}Jo(){this.iu&&this.ou([])}tu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(dr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.iu){this.Lo.reset();const t=function Fl(r,e){return r&&r.length>0?(dr(void 0!==e),r.map(t=>function(s,c){let f=Ts(s.updateTime?s.updateTime:c);return f.isEqual(sr.min())&&(f=Ts(c)),new ka(f,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=Ts(e.commitTime);return this.listener.uu(s,t)}return dr(!e.writeResults||0===e.writeResults.length),this.iu=!0,this.listener.cu()}au(){const e={};e.database=Cd(this.serializer),this.zo(e)}ou(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>du(this.serializer,s))};this.zo(t)}}class ly extends class{}{constructor(e,t,s,c){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=c,this.hu=!1}lu(){if(this.hu)throw new hn(Ht.FAILED_PRECONDITION,"The client has already been terminated.")}po(e,t,s){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.po(e,t,s,c,f)).catch(c=>{throw"FirebaseError"===c.name?(c.code===Ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new hn(Ht.UNKNOWN,c.toString())})}Ao(e,t,s,c){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,E])=>this.connection.Ao(e,t,s,f,E,c)).catch(f=>{throw"FirebaseError"===f.name?(f.code===Ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new hn(Ht.UNKNOWN,f.toString())})}terminate(){this.hu=!0}}class Hc{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.du=0,this._u=null,this.wu=!0}mu(){0===this.du&&(this.gu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.yu("Backend didn't respond within 10 seconds."),this.gu("Offline"),Promise.resolve())))}pu(e){"Online"===this.state?this.gu("Unknown"):(this.du++,this.du>=1&&(this.Iu(),this.yu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.gu("Offline")))}set(e){this.Iu(),this.du=0,"Online"===e&&(this.wu=!1),this.gu(e)}gu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}yu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.wu?(Ji(t),this.wu=!1):_n("OnlineStateTracker",t)}Iu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class ba{constructor(e,t,s,c,f){var E=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Tu=[],this.Eu=new Map,this.Au=new Set,this.Ru=[],this.vu=f,this.vu.Jr(k=>{s.enqueueAndForget((0,de.Z)(function*(){var G;Gc(E)&&(_n("RemoteStore","Restarting streams for network reachability change."),yield(G=(0,de.Z)(function*(J){const ue=jn(J);ue.Au.add(4),yield mu(ue),ue.Pu.set("Unknown"),ue.Au.delete(4),yield Da(ue)}),function(J){return G.apply(this,arguments)})(E))}))}),this.Pu=new Hc(s,c)}}function Da(r){return zc.apply(this,arguments)}function zc(){return zc=(0,de.Z)(function*(r){if(Gc(r))for(const e of r.Ru)yield e(!0)}),zc.apply(this,arguments)}function mu(r){return gh.apply(this,arguments)}function gh(){return gh=(0,de.Z)(function*(r){for(const e of r.Ru)yield e(!1)}),gh.apply(this,arguments)}function sg(r,e){const t=jn(r);t.Eu.has(e.targetId)||(t.Eu.set(e.targetId,e),hf(t)?df(t):a(t).Uo()&&qg(t,e))}function Rd(r,e){const t=jn(r),s=a(t);t.Eu.delete(e),s.Uo()&&og(t,e),0===t.Eu.size&&(s.Uo()?s.Qo():Gc(t)&&t.Pu.set("Unknown"))}function qg(r,e){if(r.bu.Lt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(sr.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}a(r).nu(e)}function og(r,e){r.bu.Lt(e),a(r).su(e)}function df(r){r.bu=new Xd({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),he:e=>r.Eu.get(e)||null,oe:()=>r.datastore.serializer.databaseId}),a(r).start(),r.Pu.mu()}function hf(r){return Gc(r)&&!a(r).qo()&&r.Eu.size>0}function Gc(r){return 0===jn(r).Au.size}function ff(r){r.bu=void 0}function Ul(r){return mh.apply(this,arguments)}function mh(){return mh=(0,de.Z)(function*(r){r.Eu.forEach((e,t)=>{qg(r,e)})}),mh.apply(this,arguments)}function pf(r,e){return Md.apply(this,arguments)}function Md(){return Md=(0,de.Z)(function*(r,e){ff(r),hf(r)?(r.Pu.pu(e),df(r)):r.Pu.set("Unknown")}),Md.apply(this,arguments)}function uy(r,e,t){return gf.apply(this,arguments)}function gf(){return gf=(0,de.Z)(function*(r,e,t){if(r.Pu.set("Online"),e instanceof _d&&2===e.state&&e.cause)try{yield(s=(0,de.Z)(function*(c,f){const E=f.cause;for(const k of f.targetIds)c.Eu.has(k)&&(yield c.remoteSyncer.rejectListen(k,E),c.Eu.delete(k),c.bu.removeTarget(k))}),function(c,f){return s.apply(this,arguments)})(r,e)}catch(s){_n("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield yh(r,s)}else if(e instanceof Ou?r.bu.Wt(e):e instanceof Zd?r.bu.ee(e):r.bu.Yt(e),!t.isEqual(sr.min()))try{const s=yield fh(r.localStore);t.compareTo(s)>=0&&(yield function(c,f){const E=c.bu.ue(f);return E.targetChanges.forEach((k,G)=>{if(k.resumeToken.approximateByteSize()>0){const J=c.Eu.get(G);J&&c.Eu.set(G,J.withResumeToken(k.resumeToken,f))}}),E.targetMismatches.forEach((k,G)=>{const J=c.Eu.get(k);if(!J)return;c.Eu.set(k,J.withResumeToken(no.EMPTY_BYTE_STRING,J.snapshotVersion)),og(c,k);const ue=new bc(J.target,k,G,J.sequenceNumber);qg(c,ue)}),c.remoteSyncer.applyRemoteEvent(E)}(r,t))}catch(s){_n("RemoteStore","Failed to raise snapshot:",s),yield yh(r,s)}var s}),gf.apply(this,arguments)}function yh(r,e,t){return np.apply(this,arguments)}function np(){return np=(0,de.Z)(function*(r,e,t){if(!Yo(e))throw e;r.Au.add(1),yield mu(r),r.Pu.set("Offline"),t||(t=()=>fh(r.localStore)),r.asyncQueue.enqueueRetryable((0,de.Z)(function*(){_n("RemoteStore","Retrying IndexedDB access"),yield t(),r.Au.delete(1),yield Da(r)}))}),np.apply(this,arguments)}function Yg(r,e){return e().catch(t=>yh(r,t,e))}function Wc(r){return ag.apply(this,arguments)}function ag(){return ag=(0,de.Z)(function*(r){const e=jn(r),t=l(e);let s=e.Tu.length>0?e.Tu[e.Tu.length-1].batchId:-1;for(;dy(e);)try{const c=yield Bg(e.localStore,s);if(null===c){0===e.Tu.length&&t.Qo();break}s=c.batchId,hy(e,c)}catch(c){yield yh(e,c)}Zg(e)&&lg(e)}),ag.apply(this,arguments)}function dy(r){return Gc(r)&&r.Tu.length<10}function hy(r,e){r.Tu.push(e);const t=l(r);t.Uo()&&t.ru&&t.ou(e.mutations)}function Zg(r){return Gc(r)&&!l(r).qo()&&r.Tu.length>0}function lg(r){l(r).start()}function fy(r){return cg.apply(this,arguments)}function cg(){return cg=(0,de.Z)(function*(r){l(r).au()}),cg.apply(this,arguments)}function py(r){return ug.apply(this,arguments)}function ug(){return ug=(0,de.Z)(function*(r){const e=l(r);for(const t of r.Tu)e.ou(t.mutations)}),ug.apply(this,arguments)}function Xg(r,e,t){return mf.apply(this,arguments)}function mf(){return mf=(0,de.Z)(function*(r,e,t){const s=r.Tu.shift(),c=A.from(s,e,t);yield Yg(r,()=>r.remoteSyncer.applySuccessfulWrite(c)),yield Wc(r)}),mf.apply(this,arguments)}function gy(r,e){return vh.apply(this,arguments)}function vh(){return vh=(0,de.Z)(function*(r,e){var t;e&&l(r).ru&&(yield(t=(0,de.Z)(function*(s,c){if(Bn(f=c.code)&&f!==Ht.ABORTED){const E=s.Tu.shift();l(s).Go(),yield Yg(s,()=>s.remoteSyncer.rejectFailedWrite(E.batchId,c)),yield Wc(s)}var f}),function(s,c){return t.apply(this,arguments)})(r,e)),Zg(r)&&lg(r)}),vh.apply(this,arguments)}function Qg(r,e){return rp.apply(this,arguments)}function rp(){return rp=(0,de.Z)(function*(r,e){const t=jn(r);t.asyncQueue.verifyOperationInProgress(),_n("RemoteStore","RemoteStore received new credentials");const s=Gc(t);t.Au.add(3),yield mu(t),s&&t.Pu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Au.delete(3),yield Da(t)}),rp.apply(this,arguments)}function dg(r,e){return u.apply(this,arguments)}function u(){return u=(0,de.Z)(function*(r,e){const t=jn(r);e?(t.Au.delete(2),yield Da(t)):e||(t.Au.add(2),yield mu(t),t.Pu.set("Unknown"))}),u.apply(this,arguments)}function a(r){return r.Vu||(r.Vu=function(e,t,s){const c=jn(e);return c.lu(),new Wg(t,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,s)}(r.datastore,r.asyncQueue,{oo:Ul.bind(null,r),co:pf.bind(null,r),eu:uy.bind(null,r)}),r.Ru.push(function(){var e=(0,de.Z)(function*(t){t?(r.Vu.Go(),hf(r)?df(r):r.Pu.set("Unknown")):(yield r.Vu.stop(),ff(r))});return function(t){return e.apply(this,arguments)}}())),r.Vu}function l(r){return r.Su||(r.Su=function(e,t,s){const c=jn(e);return c.lu(),new Kg(t,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,s)}(r.datastore,r.asyncQueue,{oo:fy.bind(null,r),co:gy.bind(null,r),cu:py.bind(null,r),uu:Xg.bind(null,r)}),r.Ru.push(function(){var e=(0,de.Z)(function*(t){t?(r.Su.Go(),yield Wc(r)):(yield r.Su.stop(),r.Tu.length>0&&(_n("RemoteStore",`Stopping write stream with ${r.Tu.length} pending writes`),r.Tu=[]))});return function(t){return e.apply(this,arguments)}}())),r.Su}class p{constructor(e,t,s,c,f){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=c,this.removalCallback=f,this.deferred=new si,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(E=>{})}static createAndSchedule(e,t,s,c,f){const E=Date.now()+s,k=new p(e,t,E,c,f);return k.start(s),k}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new hn(Ht.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function I(r,e){if(Ji("AsyncQueue",`${e}: ${r}`),Yo(r))return new hn(Ht.UNAVAILABLE,`${e}: ${r}`);throw r}class R{constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ln.comparator(t.key,s.key):(t,s)=>Ln.comparator(t.key,s.key),this.keyedMap=Xl(),this.sortedSet=new xr(this.comparator)}static emptySet(e){return new R(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof R)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const c=t.getNext().key,f=s.getNext().key;if(!c.isEqual(f))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new R;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class V{constructor(){this.Du=new xr(Ln.comparator)}track(e){const t=e.doc.key,s=this.Du.get(t);s?0!==e.type&&3===s.type?this.Du=this.Du.insert(t,e):3===e.type&&1!==s.type?this.Du=this.Du.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Du=this.Du.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Du=this.Du.remove(t):1===e.type&&2===s.type?this.Du=this.Du.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):Kn():this.Du=this.Du.insert(t,e)}Cu(){const e=[];return this.Du.inorderTraversal((t,s)=>{e.push(s)}),e}}class te{constructor(e,t,s,c,f,E,k,G,J){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=c,this.mutatedKeys=f,this.fromCache=E,this.syncStateChanged=k,this.excludesMetadataChanges=G,this.hasCachedResults=J}static fromInitialDocuments(e,t,s,c,f){const E=[];return t.forEach(k=>{E.push({type:0,doc:k})}),new te(e,t,R.emptySet(t),E,s,c,!0,!1,f)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let c=0;c<t.length;c++)if(t[c].type!==s[c].type||!t[c].doc.isEqual(s[c].doc))return!1;return!0}}class pe{constructor(){this.xu=void 0,this.listeners=[]}}class Oe{constructor(){this.queries=new Ec(e=>fd(e),Zl),this.onlineState="Unknown",this.Nu=new Set}}function Ft(r,e){return qt.apply(this,arguments)}function qt(){return qt=(0,de.Z)(function*(r,e){const t=jn(r),s=e.query;let c=!1,f=t.queries.get(s);if(f||(c=!0,f=new pe),c)try{f.xu=yield t.onListen(s)}catch(E){const k=I(E,`Initialization of query '${Su(e.query)}' failed`);return void e.onError(k)}t.queries.set(s,f),f.listeners.push(e),e.ku(t.onlineState),f.xu&&e.Mu(f.xu)&&oi(t)}),qt.apply(this,arguments)}function sn(r,e){return Rn.apply(this,arguments)}function Rn(){return Rn=(0,de.Z)(function*(r,e){const t=jn(r),s=e.query;let c=!1;const f=t.queries.get(s);if(f){const E=f.listeners.indexOf(e);E>=0&&(f.listeners.splice(E,1),c=0===f.listeners.length)}if(c)return t.queries.delete(s),t.onUnlisten(s)}),Rn.apply(this,arguments)}function Zn(r,e){const t=jn(r);let s=!1;for(const c of e){const E=t.queries.get(c.query);if(E){for(const k of E.listeners)k.Mu(c)&&(s=!0);E.xu=c}}s&&oi(t)}function Mr(r,e,t){const s=jn(r),c=s.queries.get(e);if(c)for(const f of c.listeners)f.onError(t);s.queries.delete(e)}function oi(r){r.Nu.forEach(e=>{e.next()})}class Mi{constructor(e,t,s){this.query=e,this.Ou=t,this.$u=!1,this.Fu=null,this.onlineState="Unknown",this.options=s||{}}Mu(e){if(!this.options.includeMetadataChanges){const s=[];for(const c of e.docChanges)3!==c.type&&s.push(c);e=new te(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.$u?this.Bu(e)&&(this.Ou.next(e),t=!0):this.Lu(e,this.onlineState)&&(this.qu(e),t=!0),this.Fu=e,t}onError(e){this.Ou.error(e)}ku(e){this.onlineState=e;let t=!1;return this.Fu&&!this.$u&&this.Lu(this.Fu,e)&&(this.qu(this.Fu),t=!0),t}Lu(e,t){return!e.fromCache||(!this.options.Uu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Bu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Fu&&this.Fu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}qu(e){e=te.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.$u=!0,this.Ou.next(e)}}class Ms{constructor(e,t){this.Ku=e,this.byteLength=t}Gu(){return"metadata"in this.Ku}}class Cs{constructor(e){this.serializer=e}ir(e){return nc(this.serializer,e)}rr(e){return e.metadata.exists?jh(this.serializer,e.document,!1):Ti.newNoDocument(this.ir(e.metadata.name),this.ur(e.metadata.readTime))}ur(e){return Ts(e)}}class ss{constructor(e,t,s){this.Qu=e,this.localStore=t,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=yu(e)}ju(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Ku.namedQuery)this.queries.push(e.Ku.namedQuery);else if(e.Ku.documentMetadata){this.documents.push({metadata:e.Ku.documentMetadata}),e.Ku.documentMetadata.exists||++t;const s=Ei.fromString(e.Ku.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.Ku.document&&(this.documents[this.documents.length-1].document=e.Ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}zu(e){const t=new Map,s=new Cs(this.serializer);for(const c of e)if(c.metadata.queries){const f=s.ir(c.metadata.name);for(const E of c.metadata.queries){const k=(t.get(E)||Zr()).add(f);t.set(E,k)}}return t}complete(){var e=this;return(0,de.Z)(function*(){const t=yield function Xf(r,e,t,s){return Qf.apply(this,arguments)}(e.localStore,new Cs(e.serializer),e.documents,e.Qu.id),s=e.zu(e.documents);for(const c of e.queries)yield Vg(e.localStore,c,s.get(c.name));return e.progress.taskState="Success",{progress:e.progress,Wu:e.collectionGroups,Hu:t}})()}}function yu(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}class oc{constructor(e){this.key=e}}class vu{constructor(e){this.key=e}}class Sc{constructor(e,t){this.query=e,this.Ju=t,this.Yu=null,this.hasCachedResults=!1,this.current=!1,this.Xu=Zr(),this.mutatedKeys=Zr(),this.Zu=Nh(e),this.tc=new R(this.Zu)}get ec(){return this.Ju}nc(e,t){const s=t?t.sc:new V,c=t?t.tc:this.tc;let f=t?t.mutatedKeys:this.mutatedKeys,E=c,k=!1;const G="F"===this.query.limitType&&c.size===this.query.limit?c.last():null,J="L"===this.query.limitType&&c.size===this.query.limit?c.first():null;if(e.inorderTraversal((ue,tt)=>{const Bt=c.get(ue),fn=_c(this.query,tt)?tt:null,Mn=!!Bt&&this.mutatedKeys.has(Bt.key),Fn=!!fn&&(fn.hasLocalMutations||this.mutatedKeys.has(fn.key)&&fn.hasCommittedMutations);let gr=!1;Bt&&fn?Bt.data.isEqual(fn.data)?Mn!==Fn&&(s.track({type:3,doc:fn}),gr=!0):this.ic(Bt,fn)||(s.track({type:2,doc:fn}),gr=!0,(G&&this.Zu(fn,G)>0||J&&this.Zu(fn,J)<0)&&(k=!0)):!Bt&&fn?(s.track({type:0,doc:fn}),gr=!0):Bt&&!fn&&(s.track({type:1,doc:Bt}),gr=!0,(G||J)&&(k=!0)),gr&&(fn?(E=E.add(fn),f=Fn?f.add(ue):f.delete(ue)):(E=E.delete(ue),f=f.delete(ue)))}),null!==this.query.limit)for(;E.size>this.query.limit;){const ue="F"===this.query.limitType?E.last():E.first();E=E.delete(ue.key),f=f.delete(ue.key),s.track({type:1,doc:ue})}return{tc:E,sc:s,ji:k,mutatedKeys:f}}ic(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const c=this.tc;this.tc=e.tc,this.mutatedKeys=e.mutatedKeys;const f=e.sc.Cu();f.sort((J,ue)=>function(tt,Bt){const fn=Mn=>{switch(Mn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Kn()}};return fn(tt)-fn(Bt)}(J.type,ue.type)||this.Zu(J.doc,ue.doc)),this.rc(s);const E=t?this.oc():[],k=0===this.Xu.size&&this.current?1:0,G=k!==this.Yu;return this.Yu=k,0!==f.length||G?{snapshot:new te(this.query,e.tc,c,f,e.mutatedKeys,0===k,G,!1,!!s&&s.resumeToken.approximateByteSize()>0),uc:E}:{uc:E}}ku(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tc:this.tc,sc:new V,mutatedKeys:this.mutatedKeys,ji:!1},!1)):{uc:[]}}cc(e){return!this.Ju.has(e)&&!!this.tc.has(e)&&!this.tc.get(e).hasLocalMutations}rc(e){e&&(e.addedDocuments.forEach(t=>this.Ju=this.Ju.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ju=this.Ju.delete(t)),this.current=e.current)}oc(){if(!this.current)return[];const e=this.Xu;this.Xu=Zr(),this.tc.forEach(s=>{this.cc(s.key)&&(this.Xu=this.Xu.add(s.key))});const t=[];return e.forEach(s=>{this.Xu.has(s)||t.push(new vu(s))}),this.Xu.forEach(s=>{e.has(s)||t.push(new oc(s))}),t}ac(e){this.Ju=e.sr,this.Xu=Zr();const t=this.nc(e.documents);return this.applyChanges(t,!0)}hc(){return te.fromInitialDocuments(this.query,this.tc,this.mutatedKeys,0===this.Yu,this.hasCachedResults)}}class Yu{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class ip{constructor(e){this.key=e,this.lc=!1}}class sp{constructor(e,t,s,c,f,E){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=c,this.currentUser=f,this.maxConcurrentLimboResolutions=E,this.fc={},this.dc=new Ec(k=>fd(k),Zl),this._c=new Map,this.wc=new Set,this.mc=new xr(Ln.comparator),this.gc=new Map,this.yc=new Wf,this.Ic={},this.Tc=new Map,this.Ec=Hu.kn(),this.onlineState="Unknown",this.Ac=void 0}get isPrimaryClient(){return!0===this.Ac}}function op(r,e){return _h.apply(this,arguments)}function _h(){return _h=(0,de.Z)(function*(r,e){const t=gm(r);let s,c;const f=t.dc.get(e);if(f)s=f.targetId,t.sharedClientState.addLocalQueryTarget(s),c=f.view.hc();else{const E=yield Ku(t.localStore,wo(e)),k=t.sharedClientState.addLocalQueryTarget(E.targetId);s=E.targetId,c=yield Eh(t,e,s,"current"===k,E.resumeToken),t.isPrimaryClient&&sg(t.remoteStore,E)}return c}),_h.apply(this,arguments)}function Eh(r,e,t,s,c){return Jg.apply(this,arguments)}function Jg(){return Jg=(0,de.Z)(function*(r,e,t,s,c){r.Rc=(tt,Bt,fn)=>{return(Mn=(0,de.Z)(function*(Fn,gr,ai,ki){let li=gr.view.nc(ai);li.ji&&(li=yield af(Fn.localStore,gr.query,!1).then(({documents:bs})=>gr.view.nc(bs,li)));const $a=ki&&ki.targetChanges.get(gr.targetId),Ps=gr.view.applyChanges(li,Fn.isPrimaryClient,$a);return wy(Fn,gr.targetId,Ps.uc),Ps.snapshot}),function(Fn,gr,ai,ki){return Mn.apply(this,arguments)})(r,tt,Bt,fn);var Mn};const f=yield af(r.localStore,e,!0),E=new Sc(e,f.sr),k=E.nc(f.documents),G=tc.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==r.onlineState,c),J=E.applyChanges(k,r.isPrimaryClient,G);wy(r,t,J.uc);const ue=new Yu(e,t,E);return r.dc.set(e,ue),r._c.has(t)?r._c.get(t).push(e):r._c.set(t,[e]),J.snapshot}),Jg.apply(this,arguments)}function sv(r,e){return em.apply(this,arguments)}function em(){return em=(0,de.Z)(function*(r,e){const t=jn(r),s=t.dc.get(e),c=t._c.get(s.targetId);if(c.length>1)return t._c.set(s.targetId,c.filter(f=>!Zl(f,e))),void t.dc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield qu(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),Rd(t.remoteStore,s.targetId),Pd(t,s.targetId)}).catch(Rr))):(Pd(t,s.targetId),yield qu(t.localStore,s.targetId,!0))}),em.apply(this,arguments)}function tm(){return tm=(0,de.Z)(function*(r,e,t){const s=mm(r);try{const c=yield function(f,E){const k=jn(f),G=ci.now(),J=E.reduce((Bt,fn)=>Bt.add(fn.key),Zr());let ue,tt;return k.persistence.runTransaction("Locally write mutations","readwrite",Bt=>{let fn=js(),Mn=Zr();return k.Xi.getEntries(Bt,J).next(Fn=>{fn=Fn,fn.forEach((gr,ai)=>{ai.isValidDocument()||(Mn=Mn.add(gr))})}).next(()=>k.localDocuments.getOverlayedDocuments(Bt,fn)).next(Fn=>{ue=Fn;const gr=[];for(const ai of E){const ki=Bc(ai,ue.get(ai.key).overlayedDocument);null!=ki&&gr.push(new Jl(ai.key,ki,Wl(ki.value.mapValue),us.exists(!0)))}return k.mutationQueue.addMutationBatch(Bt,G,gr,E)}).next(Fn=>{tt=Fn;const gr=Fn.applyToLocalDocumentSet(ue,Mn);return k.documentOverlayCache.saveOverlays(Bt,Fn.batchId,gr)})}).then(()=>({batchId:tt.batchId,changes:ou(ue)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(c.batchId),function(f,E,k){let G=f.Ic[f.currentUser.toKey()];G||(G=new xr(pr)),G=G.insert(E,k),f.Ic[f.currentUser.toKey()]=G}(s,c.batchId,t),yield _u(s,c.changes),yield Wc(s.remoteStore)}catch(c){const f=I(c,"Failed to persist write");t.reject(f)}}),tm.apply(this,arguments)}function my(r,e){return nm.apply(this,arguments)}function nm(){return nm=(0,de.Z)(function*(r,e){const t=jn(r);try{const s=yield function Xp(r,e){const t=jn(r),s=e.snapshotVersion;let c=t.Hi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",f=>{const E=t.Xi.newChangeBuffer({trackRemovals:!0});c=t.Hi;const k=[];e.targetChanges.forEach((ue,tt)=>{const Bt=c.get(tt);if(!Bt)return;k.push(t.Fs.removeMatchingKeys(f,ue.removedDocuments,tt).next(()=>t.Fs.addMatchingKeys(f,ue.addedDocuments,tt)));let fn=Bt.withSequenceNumber(f.currentSequenceNumber);var Mn,Fn,gr;null!==e.targetMismatches.get(tt)?fn=fn.withResumeToken(no.EMPTY_BYTE_STRING,sr.min()).withLastLimboFreeSnapshotVersion(sr.min()):ue.resumeToken.approximateByteSize()>0&&(fn=fn.withResumeToken(ue.resumeToken,s)),c=c.insert(tt,fn),Fn=fn,gr=ue,(0===(Mn=Bt).resumeToken.approximateByteSize()||Fn.snapshotVersion.toMicroseconds()-Mn.snapshotVersion.toMicroseconds()>=3e8||gr.addedDocuments.size+gr.modifiedDocuments.size+gr.removedDocuments.size>0)&&k.push(t.Fs.updateTargetData(f,fn))});let G=js(),J=Zr();if(e.documentUpdates.forEach(ue=>{e.resolvedLimboDocuments.has(ue)&&k.push(t.persistence.referenceDelegate.updateLimboDocument(f,ue))}),k.push(rf(f,E,e.documentUpdates).next(ue=>{G=ue.er,J=ue.nr})),!s.isEqual(sr.min())){const ue=t.Fs.getLastRemoteSnapshotVersion(f).next(tt=>t.Fs.setTargetsMetadata(f,f.currentSequenceNumber,s));k.push(ue)}return $t.waitFor(k).next(()=>E.apply(f)).next(()=>t.localDocuments.getLocalViewOfDocuments(f,G,J)).next(()=>G)}).then(f=>(t.Hi=c,f))}(t.localStore,e);e.targetChanges.forEach((c,f)=>{const E=t.gc.get(f);E&&(dr(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?E.lc=!0:c.modifiedDocuments.size>0?dr(E.lc):c.removedDocuments.size>0&&(dr(E.lc),E.lc=!1))}),yield _u(t,s,e)}catch(s){yield Rr(s)}}),nm.apply(this,arguments)}function yy(r,e,t){const s=jn(r);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const c=[];s.dc.forEach((f,E)=>{const k=E.view.ku(e);k.snapshot&&c.push(k.snapshot)}),function(f,E){const k=jn(f);k.onlineState=E;let G=!1;k.queries.forEach((J,ue)=>{for(const tt of ue.listeners)tt.ku(E)&&(G=!0)}),G&&oi(k)}(s.eventManager,e),c.length&&s.fc.eu(c),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function av(r,e,t){return vy.apply(this,arguments)}function vy(){return vy=(0,de.Z)(function*(r,e,t){const s=jn(r);s.sharedClientState.updateQueryState(e,"rejected",t);const c=s.gc.get(e),f=c&&c.key;if(f){let E=new xr(Ln.comparator);E=E.insert(f,Ti.newNoDocument(f,sr.min()));const k=Zr().add(f),G=new Uc(sr.min(),new Map,new xr(pr),E,k);yield my(s,G),s.mc=s.mc.remove(f),s.gc.delete(e),lp(s)}else yield qu(s.localStore,e,!1).then(()=>Pd(s,e,t)).catch(Rr)}),vy.apply(this,arguments)}function E_(r,e){return rm.apply(this,arguments)}function rm(){return rm=(0,de.Z)(function*(r,e){const t=jn(r),s=e.batch.batchId;try{const c=yield function Zp(r,e){const t=jn(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const c=e.batch.keys(),f=t.Xi.newChangeBuffer({trackRemovals:!0});return function(E,k,G,J){const ue=G.batch,tt=ue.keys();let Bt=$t.resolve();return tt.forEach(fn=>{Bt=Bt.next(()=>J.getEntry(k,fn)).next(Mn=>{const Fn=G.docVersions.get(fn);dr(null!==Fn),Mn.version.compareTo(Fn)<0&&(ue.applyToRemoteDocument(Mn,G),Mn.isValidDocument()&&(Mn.setReadTime(G.commitVersion),J.addEntry(Mn)))})}),Bt.next(()=>E.mutationQueue.removeMutationBatch(k,ue))}(t,s,e,f).next(()=>f.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,c,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(E){let k=Zr();for(let G=0;G<E.mutationResults.length;++G)E.mutationResults[G].transformResults.length>0&&(k=k.add(E.batch.mutations[G].key));return k}(e))).next(()=>t.localDocuments.getDocuments(s,c))})}(t.localStore,e);ap(t,s,null),Iy(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield _u(t,c)}catch(c){yield Rr(c)}}),rm.apply(this,arguments)}function I_(r,e,t){return _y.apply(this,arguments)}function _y(){return _y=(0,de.Z)(function*(r,e,t){const s=jn(r);try{const c=yield function(f,E){const k=jn(f);return k.persistence.runTransaction("Reject batch","readwrite-primary",G=>{let J;return k.mutationQueue.lookupMutationBatch(G,E).next(ue=>(dr(null!==ue),J=ue.keys(),k.mutationQueue.removeMutationBatch(G,ue))).next(()=>k.mutationQueue.performConsistencyCheck(G)).next(()=>k.documentOverlayCache.removeOverlaysForBatchId(G,J,E)).next(()=>k.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(G,J)).next(()=>k.localDocuments.getDocuments(G,J))})}(s.localStore,e);ap(s,e,t),Iy(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield _u(s,c)}catch(c){yield Rr(c)}}),_y.apply(this,arguments)}function hg(){return hg=(0,de.Z)(function*(r,e){const t=jn(r);Gc(t.remoteStore)||_n("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(f){const E=jn(f);return E.persistence.runTransaction("Get highest unacknowledged batch id","readonly",k=>E.mutationQueue.getHighestUnacknowledgedBatchId(k))}(t.localStore);if(-1===s)return void e.resolve();const c=t.Tc.get(s)||[];c.push(e),t.Tc.set(s,c)}catch(s){const c=I(s,"Initialization of waitForPendingWrites() operation failed");e.reject(c)}}),hg.apply(this,arguments)}function Iy(r,e){(r.Tc.get(e)||[]).forEach(t=>{t.resolve()}),r.Tc.delete(e)}function ap(r,e,t){const s=jn(r);let c=s.Ic[s.currentUser.toKey()];if(c){const f=c.get(e);f&&(t?f.reject(t):f.resolve(),c=c.remove(e)),s.Ic[s.currentUser.toKey()]=c}}function Pd(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r._c.get(e))r.dc.delete(s),t&&r.fc.vc(s,t);r._c.delete(e),r.isPrimaryClient&&r.yc.ps(e).forEach(s=>{r.yc.containsKey(s)||im(r,s)})}function im(r,e){r.wc.delete(e.path.canonicalString());const t=r.mc.get(e);null!==t&&(Rd(r.remoteStore,t),r.mc=r.mc.remove(e),r.gc.delete(t),lp(r))}function wy(r,e,t){for(const s of t)s instanceof oc?(r.yc.addReference(s.key,e),sm(r,s)):s instanceof vu?(_n("SyncEngine","Document no longer in limbo: "+s.key),r.yc.removeReference(s.key,e),r.yc.containsKey(s.key)||im(r,s.key)):Kn()}function sm(r,e){const t=e.key,s=t.path.canonicalString();r.mc.get(t)||r.wc.has(s)||(_n("SyncEngine","New document in limbo: "+t),r.wc.add(s),lp(r))}function lp(r){for(;r.wc.size>0&&r.mc.size<r.maxConcurrentLimboResolutions;){const e=r.wc.values().next().value;r.wc.delete(e);const t=new Ln(Ei.fromString(e)),s=r.Ec.next();r.gc.set(s,new ip(t)),r.mc=r.mc.insert(t,s),sg(r.remoteStore,new bc(wo(Ol(t.path)),s,"TargetPurposeLimboResolution",z.ct))}}function _u(r,e,t){return om.apply(this,arguments)}function om(){return om=(0,de.Z)(function*(r,e,t){const s=jn(r),c=[],f=[],E=[];var k;s.dc.isEmpty()||(s.dc.forEach((k,G)=>{E.push(s.Rc(G,e,t).then(J=>{if((J||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(G.targetId,null!=J&&J.fromCache?"not-current":"current"),J){c.push(J);const ue=qp.Bi(G.targetId,J);f.push(ue)}}))}),yield Promise.all(E),s.fc.eu(c),yield(k=(0,de.Z)(function*(G,J){const ue=jn(G);try{yield ue.persistence.runTransaction("notifyLocalViewChanges","readwrite",tt=>$t.forEach(J,Bt=>$t.forEach(Bt.$i,fn=>ue.persistence.referenceDelegate.addReference(tt,Bt.targetId,fn)).next(()=>$t.forEach(Bt.Fi,fn=>ue.persistence.referenceDelegate.removeReference(tt,Bt.targetId,fn)))))}catch(tt){if(!Yo(tt))throw tt;_n("LocalStore","Failed to update sequence numbers: "+tt)}for(const tt of J){const Bt=tt.targetId;if(!tt.fromCache){const fn=ue.Hi.get(Bt),Fn=fn.withLastLimboFreeSnapshotVersion(fn.snapshotVersion);ue.Hi=ue.Hi.insert(Bt,Fn)}}}),function(G,J){return k.apply(this,arguments)})(s.localStore,f))}),om.apply(this,arguments)}function Cy(r,e){return am.apply(this,arguments)}function am(){return am=(0,de.Z)(function*(r,e){const t=jn(r);if(!t.currentUser.isEqual(e)){_n("SyncEngine","User change. New user:",e.toKey());const s=yield nf(t.localStore,e);t.currentUser=e,(c=t).Tc.forEach(E=>{E.forEach(k=>{k.reject(new hn(Ht.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),c.Tc.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield _u(t,s.tr)}var c}),am.apply(this,arguments)}function lv(r,e){const t=jn(r),s=t.gc.get(e);if(s&&s.lc)return Zr().add(s.key);{let c=Zr();const f=t._c.get(e);if(!f)return c;for(const E of f){const k=t.dc.get(E);c=c.unionWith(k.view.ec)}return c}}function by(r,e){return lm.apply(this,arguments)}function lm(){return lm=(0,de.Z)(function*(r,e){const t=jn(r),s=yield af(t.localStore,e.query,!0),c=e.view.ac(s);return t.isPrimaryClient&&wy(t,e.targetId,c.uc),c}),lm.apply(this,arguments)}function w_(r,e){return cm.apply(this,arguments)}function cm(){return cm=(0,de.Z)(function*(r,e){const t=jn(r);return sc(t.localStore,e).then(s=>_u(t,s))}),cm.apply(this,arguments)}function cv(r,e,t,s){return um.apply(this,arguments)}function um(){return um=(0,de.Z)(function*(r,e,t,s){const c=jn(r),f=yield function(E,k){const G=jn(E),J=jn(G.mutationQueue);return G.persistence.runTransaction("Lookup mutation documents","readonly",ue=>J.Vn(ue,k).next(tt=>tt?G.localDocuments.getDocuments(ue,tt):$t.resolve(null)))}(c.localStore,e);var k;null!==f?("pending"===t?yield Wc(c.remoteStore):"acknowledged"===t||"rejected"===t?(ap(c,e,s||null),Iy(c,e),k=e,jn(jn(c.localStore).mutationQueue).Dn(k)):Kn(),yield _u(c,f)):_n("SyncEngine","Cannot apply mutation batch with id: "+e)}),um.apply(this,arguments)}function Dy(){return Dy=(0,de.Z)(function*(r,e){const t=jn(r);if(gm(t),mm(t),!0===e&&!0!==t.Ac){const s=t.sharedClientState.getAllActiveQueryTargets(),c=yield Ty(t,s.toArray());t.Ac=!0,yield dg(t.remoteStore,!0);for(const f of c)sg(t.remoteStore,f)}else if(!1===e&&!1!==t.Ac){const s=[];let c=Promise.resolve();t._c.forEach((f,E)=>{t.sharedClientState.isLocalQueryTarget(E)?s.push(E):c=c.then(()=>(Pd(t,E),qu(t.localStore,E,!0))),Rd(t.remoteStore,E)}),yield c,yield Ty(t,s),function(f){const E=jn(f);E.gc.forEach((k,G)=>{Rd(E.remoteStore,G)}),E.yc.Is(),E.gc=new Map,E.mc=new xr(Ln.comparator)}(t),t.Ac=!1,yield dg(t.remoteStore,!1)}}),Dy.apply(this,arguments)}function Ty(r,e,t){return dm.apply(this,arguments)}function dm(){return dm=(0,de.Z)(function*(r,e,t){const s=jn(r),c=[],f=[];for(const E of e){let k;const G=s._c.get(E);if(G&&0!==G.length){k=yield Ku(s.localStore,wo(G[0]));for(const J of G){const ue=s.dc.get(J),tt=yield by(s,ue);tt.snapshot&&f.push(tt.snapshot)}}else{const J=yield Zf(s.localStore,E);k=yield Ku(s.localStore,J),yield Eh(s,hm(J),E,!1,k.resumeToken)}c.push(k)}return s.fc.eu(f),c}),dm.apply(this,arguments)}function hm(r){return su(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function Sy(r){const e=jn(r);return jn(jn(e.localStore).persistence).Mi()}function dv(r,e,t,s){return fm.apply(this,arguments)}function fm(){return fm=(0,de.Z)(function*(r,e,t,s){const c=jn(r);if(c.Ac)return void _n("SyncEngine","Ignoring unexpected query state notification.");const f=c._c.get(e);if(f&&f.length>0)switch(t){case"current":case"not-current":{const E=yield sc(c.localStore,kh(f[0])),k=Uc.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,no.EMPTY_BYTE_STRING);yield _u(c,E,k);break}case"rejected":yield qu(c.localStore,e,!0),Pd(c,e,s);break;default:Kn()}}),fm.apply(this,arguments)}function hv(r,e,t){return pm.apply(this,arguments)}function pm(){return pm=(0,de.Z)(function*(r,e,t){const s=gm(r);if(s.Ac){for(const c of e){if(s._c.has(c)){_n("SyncEngine","Adding an already active target "+c);continue}const f=yield Zf(s.localStore,c),E=yield Ku(s.localStore,f);yield Eh(s,hm(f),E.targetId,!1,E.resumeToken),sg(s.remoteStore,E)}for(const c of t)s._c.has(c)&&(yield qu(s.localStore,c,!1).then(()=>{Rd(s.remoteStore,c),Pd(s,c)}).catch(Rr))}}),pm.apply(this,arguments)}function gm(r){const e=jn(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=my.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lv.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=av.bind(null,e),e.fc.eu=Zn.bind(null,e.eventManager),e.fc.vc=Mr.bind(null,e.eventManager),e}function mm(r){const e=jn(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=E_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=I_.bind(null,e),e}class cp{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,de.Z)(function*(){t.serializer=gl(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return $g(this.persistence,new Yp,e.initialUser,this.serializer)}createPersistence(e){return new ef(dh.js,this.serializer)}createSharedClientState(e){return new zg}terminate(){var e=this;return(0,de.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Zu extends cp{constructor(e,t,s){super(),this.bc=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,de.Z)(function*(){yield t().call(s,e),yield s.bc.initialize(s,e),yield mm(s.bc.syncEngine),yield Wc(s.bc.remoteStore),yield s.persistence.pi(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return $g(this.persistence,new Yp,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new Xh(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const s=new O(t,this.persistence);return new w(e.asyncQueue,s)}createPersistence(e){const t=Yf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?Fa.withCacheSize(this.cacheSizeBytes):Fa.DEFAULT;return new Kp(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,ay(),rg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new zg}}class pv extends Zu{constructor(e,t){super(e,t,!1),this.bc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,de.Z)(function*(){yield t().call(s,e);const c=s.bc.syncEngine;s.sharedClientState instanceof ep&&(s.sharedClientState.syncEngine={Qr:cv.bind(null,c),jr:dv.bind(null,c),zr:hv.bind(null,c),Mi:Sy.bind(null,c),Gr:w_.bind(null,c)},yield s.sharedClientState.start()),yield s.persistence.pi(function(){var f=(0,de.Z)(function*(E){yield function uv(r,e){return Dy.apply(this,arguments)}(s.bc.syncEngine,E),s.gcScheduler&&(E&&!s.gcScheduler.started?s.gcScheduler.start():E||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(E&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():E||s.indexBackfillerScheduler.stop())});return function(E){return f.apply(this,arguments)}}())})()}createSharedClientState(e){const t=ay();if(!ep.D(t))throw new hn(Ht.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Yf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ep(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class up{initialize(e,t){var s=this;return(0,de.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=c=>yy(s.syncEngine,c,1),s.remoteStore.remoteSyncer.handleCredentialChange=Cy.bind(null,s.syncEngine),yield dg(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Oe}createDatastore(e){const t=gl(e.databaseInfo.databaseId),s=new oy(e.databaseInfo);return new ly(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,c=e.asyncQueue,f=k=>yy(this.syncEngine,k,0),E=eg.D()?new eg:new iy,new ba(t,s,c,f,E);var t,s,c,f,E}createSyncEngine(e,t){return function(s,c,f,E,k,G,J){const ue=new sp(s,c,f,E,k,G);return J&&(ue.Ac=!0),ue}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,de.Z)(function*(t){const s=jn(t);_n("RemoteStore","RemoteStore shutting down."),s.Au.add(5),yield mu(s),s.vu.shutdown(),s.Pu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function vm(r,e=10240){let t=0;return{read:()=>(0,de.Z)(function*(){if(t<r.byteLength){const s={value:r.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,de.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Xu{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Vc(this.observer.next,e)}error(e){this.observer.error?this.Vc(this.observer.error,e):Ji("Uncaught Error in snapshot listener:",e.toString())}Sc(){this.muted=!0}Vc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Ay{constructor(e,t){this.Dc=e,this.serializer=t,this.metadata=new si,this.buffer=new Uint8Array,this.Cc=new TextDecoder("utf-8"),this.xc().then(s=>{s&&s.Gu()?this.metadata.resolve(s.Ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.Ku)}`))},s=>this.metadata.reject(s))}close(){return this.Dc.cancel()}getMetadata(){var e=this;return(0,de.Z)(function*(){return e.metadata.promise})()}Pc(){var e=this;return(0,de.Z)(function*(){return yield e.getMetadata(),e.xc()})()}xc(){var e=this;return(0,de.Z)(function*(){const t=yield e.Nc();if(null===t)return null;const s=e.Cc.decode(t),c=Number(s);isNaN(c)&&e.kc(`length string (${s}) is not valid number`);const f=yield e.Mc(c);return new Ms(JSON.parse(f),t.length+c)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Nc(){var e=this;return(0,de.Z)(function*(){for(;e.Oc()<0&&!(yield e.$c()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.kc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}Mc(e){var t=this;return(0,de.Z)(function*(){for(;t.buffer.length<e;)(yield t.$c())&&t.kc("Reached the end of bundle when more is expected.");const s=t.Cc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}kc(e){throw this.Dc.cancel(),new Error(`Invalid bundle format: ${e}`)}$c(){var e=this;return(0,de.Z)(function*(){const t=yield e.Dc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class C_{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,de.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new hn(Ht.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(c=(0,de.Z)(function*(f,E){const k=jn(f),G=Cd(k.serializer)+"/documents",J={documents:E.map(fn=>Id(k.serializer,fn))},ue=yield k.Ao("BatchGetDocuments",G,J,E.length),tt=new Map;ue.forEach(fn=>{const Mn=function th(r,e){return"found"in e?function(t,s){dr(!!s.found);const c=nc(t,s.found.name),f=Ts(s.found.updateTime),E=s.found.createTime?Ts(s.found.createTime):sr.min(),k=new Vs({mapValue:{fields:s.found.fields}});return Ti.newFoundDocument(c,f,E,k)}(r,e):"missing"in e?function(t,s){dr(!!s.missing),dr(!!s.readTime);const c=nc(t,s.missing),f=Ts(s.readTime);return Ti.newNoDocument(c,f)}(r,e):Kn()}(k.serializer,fn);tt.set(Mn.key.toString(),Mn)});const Bt=[];return E.forEach(fn=>{const Mn=tt.get(fn.toString());dr(!!Mn),Bt.push(Mn)}),Bt}),function(f,E){return c.apply(this,arguments)})(t.datastore,e);var c;return s.forEach(c=>t.recordVersion(c)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new C(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,de.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,c)=>{const f=Ln.fromPath(c);e.mutations.push(new g(f,e.precondition(f)))}),yield(s=(0,de.Z)(function*(c,f){const E=jn(c),k=Cd(E.serializer)+"/documents",G={writes:f.map(J=>du(E.serializer,J))};yield E.po("Commit",k,G)}),function(c,f){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Kn();t=sr.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new hn(Ht.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(sr.min())?us.exists(!1):us.updateTime(t):us.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(sr.min()))throw new hn(Ht.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return us.updateTime(t)}return us.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class xy{constructor(e,t,s,c,f){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=c,this.deferred=f,this.Fc=s.maxAttempts,this.Lo=new uf(this.asyncQueue,"transaction_retry")}run(){this.Fc-=1,this.Bc()}Bc(){var e=this;this.Lo.xo((0,de.Z)(function*(){const t=new C_(e.datastore),s=e.Lc(t);s&&s.then(c=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(c)}).catch(f=>{e.qc(f)}))}).catch(c=>{e.qc(c)})}))}Lc(e){try{const t=this.updateFunction(e);return!re(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}qc(e){this.Fc>0&&this.Uc(e)?(this.Fc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Bc(),Promise.resolve()))):this.deferred.reject(e)}Uc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Bn(t)}return!1}}class Q0{constructor(e,t,s,c){var f=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=c,this.user=Wi.UNAUTHENTICATED,this.clientId=ma.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var E=(0,de.Z)(function*(k){_n("FirestoreClient","Received user=",k.uid),yield f.authCredentialListener(k),f.user=k});return function(k){return E.apply(this,arguments)}}()),this.appCheckCredentials.start(s,E=>(_n("FirestoreClient","Received new app check token=",E),this.appCheckCredentialListener(E,this.user)))}getConfiguration(){var e=this;return(0,de.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new hn(Ht.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new si;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,de.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const c=I(s,"Failed to shutdown persistence");t.reject(c)}})),t.promise}}function Ry(r,e){return My.apply(this,arguments)}function My(){return My=(0,de.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress(),_n("FirestoreClient","Initializing OfflineComponentProvider");const t=yield r.getConfiguration();yield e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(function(){var c=(0,de.Z)(function*(f){s.isEqual(f)||(yield nf(e.localStore,f),s=f)});return function(f){return c.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}),My.apply(this,arguments)}function Py(r,e){return _m.apply(this,arguments)}function _m(){return _m=(0,de.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress();const t=yield ea(r);_n("FirestoreClient","Initializing OnlineComponentProvider");const s=yield r.getConfiguration();yield e.initialize(t,s),r.setCredentialChangeListener(c=>Qg(e.remoteStore,c)),r.setAppCheckTokenChangeListener((c,f)=>Qg(e.remoteStore,f)),r._onlineComponents=e}),_m.apply(this,arguments)}function gv(r){return"FirebaseError"===r.name?r.code===Ht.FAILED_PRECONDITION||r.code===Ht.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||22===r.code||20===r.code||11===r.code}function ea(r){return Em.apply(this,arguments)}function Em(){return Em=(0,de.Z)(function*(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){_n("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Ry(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!gv(t))throw t;mi("Error using user provided cache. Falling back to memory cache: "+t),yield Ry(r,new cp)}}else _n("FirestoreClient","Using default OfflineComponentProvider"),yield Ry(r,new cp);return r._offlineComponents}),Em.apply(this,arguments)}function Im(r){return Oy.apply(this,arguments)}function Oy(){return Oy=(0,de.Z)(function*(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(_n("FirestoreClient","Using user provided OnlineComponentProvider"),yield Py(r,r._uninitializedComponentsProvider._online)):(_n("FirestoreClient","Using default OnlineComponentProvider"),yield Py(r,new up))),r._onlineComponents}),Oy.apply(this,arguments)}function ky(r){return ea(r).then(e=>e.persistence)}function wm(r){return ea(r).then(e=>e.localStore)}function Ny(r){return Im(r).then(e=>e.remoteStore)}function Cm(r){return Im(r).then(e=>e.syncEngine)}function dp(r){return Fy.apply(this,arguments)}function Fy(){return Fy=(0,de.Z)(function*(r){const e=yield Im(r),t=e.eventManager;return t.onListen=op.bind(null,e.syncEngine),t.onUnlisten=sv.bind(null,e.syncEngine),t}),Fy.apply(this,arguments)}function D_(r,e,t={}){const s=new si;return r.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return function(c,f,E,k,G){const J=new Xu({next:tt=>{f.enqueueAndForget(()=>sn(c,ue));const Bt=tt.docs.has(E);!Bt&&tt.fromCache?G.reject(new hn(Ht.UNAVAILABLE,"Failed to get document because the client is offline.")):Bt&&tt.fromCache&&k&&"server"===k.source?G.reject(new hn(Ht.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):G.resolve(tt)},error:tt=>G.reject(tt)}),ue=new Mi(Ol(E.path),J,{includeMetadataChanges:!0,Uu:!0});return Ft(c,ue)}(yield dp(r),r.asyncQueue,e,t,s)})),s.promise}function bm(r,e,t={}){const s=new si;return r.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return function(c,f,E,k,G){const J=new Xu({next:tt=>{f.enqueueAndForget(()=>sn(c,ue)),tt.fromCache&&"server"===k.source?G.reject(new hn(Ht.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):G.resolve(tt)},error:tt=>G.reject(tt)}),ue=new Mi(E,J,{includeMetadataChanges:!0,Uu:!0});return Ft(c,ue)}(yield dp(r),r.asyncQueue,e,t,s)})),s.promise}const Kc=new Map;function Ac(r,e,t){if(!t)throw new hn(Ht.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Ly(r,e,t,s){if(!0===e&&!0===s)throw new hn(Ht.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function $y(r){if(!Ln.isDocumentKey(r))throw new hn(Ht.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function _v(r){if(Ln.isDocumentKey(r))throw new hn(Ht.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Dm(r){if(void 0===r)return"undefined";if(null===r)return"null";if("string"==typeof r)return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if("number"==typeof r||"boolean"==typeof r)return""+r;if("object"==typeof r){if(r instanceof Array)return"an array";{const e=(t=r).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof r?"a function":Kn()}function Fi(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new hn(Ht.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Dm(r);throw new hn(Ht.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function Ev(r,e){if(e<=0)throw new hn(Ht.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}class Tm{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new hn(Ht.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new hn(Ht.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ly("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!this.experimentalForceLongPolling&&void 0!==e.experimentalAutoDetectLongPolling&&!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Od{constructor(e,t,s,c){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tm({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new hn(Ht.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new hn(Ht.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tm(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new uc;switch(t.type){case"firstParty":return new Zc(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new hn(Ht.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Kc.get(e);t&&(_n("ComponentProvider","Removing Datastore"),Kc.delete(e),t.terminate())}(this),Promise.resolve()}}class Hs{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ed(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Hs(this.firestore,e,this._key)}}class Za{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Za(this.firestore,e,this._query)}}class ed extends Za{constructor(e,t,s){super(e,t,Ol(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Hs(this.firestore,null,new Ln(e))}withConverter(e){return new ed(this.firestore,e,this._path)}}function By(r,e,...t){if(r=(0,et.m9)(r),Ac("collection","path",e),r instanceof Od){const s=Ei.fromString(e,...t);return _v(s),new ed(r,null,s)}{if(!(r instanceof Hs||r instanceof ed))throw new hn(Ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ei.fromString(e,...t));return _v(s),new ed(r.firestore,null,s)}}function vf(r,e,...t){if(r=(0,et.m9)(r),1===arguments.length&&(e=ma.A()),Ac("doc","path",e),r instanceof Od){const s=Ei.fromString(e,...t);return $y(s),new Hs(r,null,new Ln(s))}{if(!(r instanceof Hs||r instanceof ed))throw new hn(Ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ei.fromString(e,...t));return $y(s),new Hs(r.firestore,r instanceof ed?r.converter:null,new Ln(s))}}function Cv(r,e){return r=(0,et.m9)(r),e=(0,et.m9)(e),(r instanceof Hs||r instanceof ed)&&(e instanceof Hs||e instanceof ed)&&r.firestore===e.firestore&&r.path===e.path&&r.converter===e.converter}function Sm(r,e){return r=(0,et.m9)(r),e=(0,et.m9)(e),r instanceof Za&&e instanceof Za&&r.firestore===e.firestore&&Zl(r._query,e._query)&&r.converter===e.converter}class bv{constructor(){this.Kc=Promise.resolve(),this.Gc=[],this.Qc=!1,this.jc=[],this.zc=null,this.Wc=!1,this.Hc=!1,this.Jc=[],this.Lo=new uf(this,"async_queue_retry"),this.Yc=()=>{const t=rg();t&&_n("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Lo.ko()};const e=rg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Yc)}get isShuttingDown(){return this.Qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Xc(),this.Zc(e)}enterRestrictedMode(e){if(!this.Qc){this.Qc=!0,this.Hc=e||!1;const t=rg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Yc)}}enqueue(e){if(this.Xc(),this.Qc)return new Promise(()=>{});const t=new si;return this.Zc(()=>this.Qc&&this.Hc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Gc.push(e),this.ta()))}ta(){var e=this;return(0,de.Z)(function*(){if(0!==e.Gc.length){try{yield e.Gc[0](),e.Gc.shift(),e.Lo.reset()}catch(t){if(!Yo(t))throw t;_n("AsyncQueue","Operation failed with retryable error: "+t)}e.Gc.length>0&&e.Lo.xo(()=>e.ta())}})()}Zc(e){const t=this.Kc.then(()=>(this.Wc=!0,e().catch(s=>{throw this.zc=s,this.Wc=!1,Ji("INTERNAL UNHANDLED ERROR: ",function(f){let E=f.message||"";return f.stack&&(E=f.stack.includes(f.message)?f.stack:f.message+"\n"+f.stack),E}(s)),s}).then(s=>(this.Wc=!1,s))));return this.Kc=t,t}enqueueAfterDelay(e,t,s){this.Xc(),this.Jc.indexOf(e)>-1&&(t=0);const c=p.createAndSchedule(this,e,t,s,f=>this.ea(f));return this.jc.push(c),c}Xc(){this.zc&&Kn()}verifyOperationInProgress(){}na(){var e=this;return(0,de.Z)(function*(){let t;do{t=e.Kc,yield t}while(t!==e.Kc)})()}sa(e){for(const t of this.jc)if(t.timerId===e)return!0;return!1}ia(e){return this.na().then(()=>{this.jc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.jc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.na()})}ra(e){this.Jc.push(e)}ea(e){const t=this.jc.indexOf(e);this.jc.splice(t,1)}}function fg(r){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const c of["next","error","complete"])if(c in s&&"function"==typeof s[c])return!0;return!1}(r)}class Am{constructor(){this._progressObserver={},this._taskCompletionResolver=new si,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class zs extends Od{constructor(e,t,s,c){super(e,t,s,c),this.type="firestore",this._queue=new bv,this._persistenceKey=(null==c?void 0:c.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Uy(this),this._firestoreClient.terminate()}}function Vo(r){return r._firestoreClient||Uy(r),r._firestoreClient.verifyNotTerminated(),r._firestoreClient}function Uy(r){var e,t,s;const c=r._freezeSettings(),f=(k=(null===(e=r._app)||void 0===e?void 0:e.options.appId)||"",new Pa(r._databaseId,k,r._persistenceKey,(J=c).host,J.ssl,J.experimentalForceLongPolling,J.experimentalAutoDetectLongPolling,J.useFetchStreams));var k,J;r._firestoreClient=new Q0(r._authCredentials,r._appCheckCredentials,r._queue,f),null!==(t=c.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(s=c.cache)&&void 0!==s&&s._onlineComponentProvider&&(r._firestoreClient._uninitializedComponentsProvider={_offlineKind:c.cache.kind,_offline:c.cache._offlineComponentProvider,_online:c.cache._onlineComponentProvider})}function Av(r,e,t){const s=new si;return r.asyncQueue.enqueue((0,de.Z)(function*(){try{yield Ry(r,t),yield Py(r,e),s.resolve()}catch(c){const f=c;if(!gv(f))throw f;mi("Error enabling indexeddb cache. Falling back to memory cache: "+f),s.reject(f)}})).then(()=>s.promise)}function xv(r){if(r._initialized||r._terminated)throw new hn(Ht.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class td{constructor(e){this._byteString=e}static fromBase64String(e){try{return new td(no.fromBase64String(e))}catch(t){throw new hn(Ht.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new td(no.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class kd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new hn(Ht.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ps(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class _f{constructor(e){this._methodName=e}}class xm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new hn(Ht.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new hn(Ht.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pr(this._lat,e._lat)||pr(this._long,e._long)}}const L_=/^__.*__$/;class $_{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Jl(e,this.data,this.fieldMask,t,this.fieldTransforms):new ul(e,this.data,t,this.fieldTransforms)}}class Vy{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Jl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function jy(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Kn()}}class gg{constructor(e,t,s,c,f,E){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=c,void 0===f&&this.oa(),this.fieldTransforms=f||[],this.fieldMask=E||[]}get path(){return this.settings.path}get ua(){return this.settings.ua}ca(e){return new gg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}aa(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),c=this.ca({path:s,ha:!1});return c.la(e),c}fa(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),c=this.ca({path:s,ha:!1});return c.oa(),c}da(e){return this.ca({path:void 0,ha:!0})}_a(e){return Om(e,this.settings.methodName,this.settings.wa||!1,this.path,this.settings.ma)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}oa(){if(this.path)for(let e=0;e<this.path.length;e++)this.la(this.path.get(e))}la(e){if(0===e.length)throw this._a("Document fields must not be empty");if(jy(this.ua)&&L_.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Rv{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||gl(e)}ga(e,t,s,c=!1){return new gg({ua:e,methodName:t,ma:s,path:ps.emptyPath(),ha:!1,wa:c},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ih(r){const e=r._freezeSettings(),t=gl(r._databaseId);return new Rv(r._databaseId,!!e.ignoreUndefinedProperties,t)}function mg(r,e,t,s,c,f={}){const E=r.ga(f.merge||f.mergeFields?2:0,e,t,c);Pm("Data must be an object, but it was:",E,s);const k=Mm(s,E);let G,J;if(f.merge)G=new gs(E.fieldMask),J=E.fieldTransforms;else if(f.mergeFields){const ue=[];for(const tt of f.mergeFields){const Bt=pp(e,tt,t);if(!E.contains(Bt))throw new hn(Ht.INVALID_ARGUMENT,`Field '${Bt}' is specified in your field mask but missing from your input data.`);Ov(ue,Bt)||ue.push(Bt)}G=new gs(ue),J=E.fieldTransforms.filter(tt=>G.covers(tt.field))}else G=null,J=E.fieldTransforms;return new $_(new Vs(k),G,J)}class hp extends _f{_toFieldTransform(e){if(2!==e.ua)throw e._a(1===e.ua?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hp}}function Hy(r,e,t){return new gg({ua:3,ma:e.settings.ma,methodName:r._methodName,ha:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Rm extends _f{_toFieldTransform(e){return new gd(e.path,new wc)}isEqual(e){return e instanceof Rm}}class Mv extends _f{constructor(e,t){super(e),this.ya=t}_toFieldTransform(e){const t=Hy(this,e,!0),s=this.ya.map(f=>fp(f,t)),c=new lu(s);return new gd(e.path,c)}isEqual(e){return this===e}}class Pv extends _f{constructor(e,t){super(e),this.ya=t}_toFieldTransform(e){const t=Hy(this,e,!0),s=this.ya.map(f=>fp(f,t)),c=new Cc(s);return new gd(e.path,c)}isEqual(e){return this===e}}class Ef extends _f{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=new cl(e.serializer,wa(e.serializer,this.pa));return new gd(e.path,t)}isEqual(e){return this===e}}function zy(r,e,t,s){const c=r.ga(1,e,t);Pm("Data must be an object, but it was:",c,s);const f=[],E=Vs.empty();ol(s,(G,J)=>{const ue=Fr(e,G,t);J=(0,et.m9)(J);const tt=c.fa(ue);if(J instanceof hp)f.push(ue);else{const Bt=fp(J,tt);null!=Bt&&(f.push(ue),E.set(ue,Bt))}});const k=new gs(f);return new Vy(E,k,c.fieldTransforms)}function Gy(r,e,t,s,c,f){const E=r.ga(1,e,t),k=[pp(e,s,t)],G=[c];if(f.length%2!=0)throw new hn(Ht.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Bt=0;Bt<f.length;Bt+=2)k.push(pp(e,f[Bt])),G.push(f[Bt+1]);const J=[],ue=Vs.empty();for(let Bt=k.length-1;Bt>=0;--Bt)if(!Ov(J,k[Bt])){const fn=k[Bt];let Mn=G[Bt];Mn=(0,et.m9)(Mn);const Fn=E.fa(fn);if(Mn instanceof hp)J.push(fn);else{const gr=fp(Mn,Fn);null!=gr&&(J.push(fn),ue.set(fn,gr))}}const tt=new gs(J);return new Vy(ue,tt,E.fieldTransforms)}function If(r,e,t,s=!1){return fp(t,r.ga(s?4:3,e))}function fp(r,e){if(B_(r=(0,et.m9)(r)))return Pm("Unsupported field value:",e,r),Mm(r,e);if(r instanceof _f)return function(t,s){if(!jy(s.ua))throw s._a(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s._a(`${t._methodName}() is not currently supported inside arrays`);const c=t._toFieldTransform(s);c&&s.fieldTransforms.push(c)}(r,e),null;if(void 0===r&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.ha&&4!==e.ua)throw e._a("Nested arrays are not supported");return function(t,s){const c=[];let f=0;for(const E of t){let k=fp(E,s.da(f));null==k&&(k={nullValue:"NULL_VALUE"}),c.push(k),f++}return{arrayValue:{values:c}}}(r,e)}return function(t,s){if(null===(t=(0,et.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return wa(s.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const c=ci.fromDate(t);return{timestampValue:Nu(s.serializer,c)}}if(t instanceof ci){const c=new ci(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Nu(s.serializer,c)}}if(t instanceof xm)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof td)return{bytesValue:Uh(s.serializer,t._byteString)};if(t instanceof Hs){const c=s.databaseId,f=t.firestore._databaseId;if(!f.isEqual(c))throw s._a(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Vh(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s._a(`Unsupported field value: ${Dm(t)}`)}(r,e)}function Mm(r,e){const t={};return tu(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ol(r,(s,c)=>{const f=fp(c,e.aa(s));null!=f&&(t[s]=f)}),{mapValue:{fields:t}}}function B_(r){return!("object"!=typeof r||null===r||r instanceof Array||r instanceof Date||r instanceof ci||r instanceof xm||r instanceof td||r instanceof Hs||r instanceof _f)}function Pm(r,e,t){if(!B_(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=Dm(t);throw e._a("an object"===s?r+" a custom object":r+" "+s)}var s}function pp(r,e,t){if((e=(0,et.m9)(e))instanceof kd)return e._internalPath;if("string"==typeof e)return Fr(r,e);throw Om("Field path arguments must be of type string or ",r,!1,void 0,t)}const tE=new RegExp("[~\\*/\\[\\]]");function Fr(r,e,t){if(e.search(tE)>=0)throw Om(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new kd(...e.split("."))._internalPath}catch{throw Om(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Om(r,e,t,s,c){const f=s&&!s.isEmpty(),E=void 0!==c;let k=`Function ${e}() called with invalid data`;t&&(k+=" (via `toFirestore()`)"),k+=". ";let G="";return(f||E)&&(G+=" (found",f&&(G+=` in field ${s}`),E&&(G+=` in document ${c}`),G+=")"),new hn(Ht.INVALID_ARGUMENT,k+r+G)}function Ov(r,e){return r.some(t=>t.isEqual(e))}class yg{constructor(e,t,s,c,f){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=c,this._converter=f}get id(){return this._key.path.lastSegment()}get ref(){return new Hs(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new gp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(km("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class gp extends yg{data(){return super.data()}}function km(r,e){return"string"==typeof e?Fr(r,e):e instanceof kd?e._internalPath:e._delegate._internalPath}function vg(r){if("L"===r.limitType&&0===r.explicitOrderBy.length)throw new hn(Ht.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mp{}class Gs extends mp{}function wf(r,e,...t){let s=[];e instanceof mp&&s.push(e),s=s.concat(t),function(c){const f=c.filter(k=>k instanceof vp).length,E=c.filter(k=>k instanceof yp).length;if(f>1||f>0&&E>0)throw new hn(Ht.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const c of s)r=c._apply(r);return r}class yp extends Gs{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new yp(e,t,s)}_apply(e){const t=this._parse(e);return _p(e._query,t),new Za(e.firestore,e.converter,Tu(e._query,t))}_parse(e){const t=Ih(e.firestore);return function(c,f,E,k,G,J,ue){let tt;if(G.isKeyField()){if("array-contains"===J||"array-contains-any"===J)throw new hn(Ht.INVALID_ARGUMENT,`Invalid Query. You can't perform '${J}' queries on documentId().`);if("in"===J||"not-in"===J){Lv(ue,J);const Bt=[];for(const fn of ue)Bt.push(Ky(k,c,fn));tt={arrayValue:{values:Bt}}}else tt=Ky(k,c,ue)}else"in"!==J&&"not-in"!==J&&"array-contains-any"!==J||Lv(ue,J),tt=If(E,"where",ue,"in"===J||"not-in"===J);return hi.create(G,J,tt)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class vp extends mp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new vp(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:Si.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,c){let f=s;const E=c.getFlattenedFilters();for(const k of E)_p(f,k),f=Tu(f,k)}(e._query,t),new Za(e.firestore,e.converter,Tu(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Nm extends Gs{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Nm(e,t)}_apply(e){const t=function(s,c,f){if(null!==s.startAt)throw new hn(Ht.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new hn(Ht.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const E=new io(c,f);return function(k,G){if(null===vc(k)){const J=ud(k);null!==J&&Ep(0,J,G.field)}}(s,E),E}(e._query,this._field,this._direction);return new Za(e.firestore,e.converter,function(s,c){const f=s.explicitOrderBy.concat([c]);return new Ea(s.path,s.collectionGroup,f,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class Fm extends Gs{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Fm(e,t,s)}_apply(e){return new Za(e.firestore,e.converter,hd(e._query,this._limit,this._limitType))}}class wh extends Gs{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new wh(e,t,s)}_apply(e){const t=Wy(e,this.type,this._docOrFields,this._inclusive);return new Za(e.firestore,e.converter,(c=t,new Ea((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,c,s.endAt)));var s,c}}class Lm extends Gs{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new Lm(e,t,s)}_apply(e){const t=Wy(e,this.type,this._docOrFields,this._inclusive);return new Za(e.firestore,e.converter,(c=t,new Ea((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,c)));var s,c}}function Wy(r,e,t,s){if(t[0]=(0,et.m9)(t[0]),t[0]instanceof yg)return function(c,f,E,k,G){if(!k)throw new hn(Ht.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${E}().`);const J=[];for(const ue of Yl(c))if(ue.field.isKeyField())J.push(Te(f,k.key));else{const tt=k.data.field(ue.field);if(Lc(tt))throw new hn(Ht.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ue.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===tt){const Bt=ue.field.canonicalString();throw new hn(Ht.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Bt}' (used as the orderBy) does not exist.`)}J.push(tt)}return new Io(J,G)}(r._query,r.firestore._databaseId,e,t[0]._document,s);{const c=Ih(r.firestore);return function(f,E,k,G,J,ue){const tt=f.explicitOrderBy;if(J.length>tt.length)throw new hn(Ht.INVALID_ARGUMENT,`Too many arguments provided to ${G}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Bt=[];for(let fn=0;fn<J.length;fn++){const Mn=J[fn];if(tt[fn].field.isKeyField()){if("string"!=typeof Mn)throw new hn(Ht.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${G}(), but got a ${typeof Mn}`);if(!dd(f)&&-1!==Mn.indexOf("/"))throw new hn(Ht.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${G}() must be a plain document ID, but '${Mn}' contains a slash.`);const Fn=f.path.child(Ei.fromString(Mn));if(!Ln.isDocumentKey(Fn))throw new hn(Ht.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${G}() must result in a valid document path, but '${Fn}' is not because it contains an odd number of segments.`);const gr=new Ln(Fn);Bt.push(Te(E,gr))}else{const Fn=If(k,G,Mn);Bt.push(Fn)}}return new Io(Bt,ue)}(r._query,r.firestore._databaseId,c,e,t,s)}}function Ky(r,e,t){if("string"==typeof(t=(0,et.m9)(t))){if(""===t)throw new hn(Ht.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dd(e)&&-1!==t.indexOf("/"))throw new hn(Ht.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Ei.fromString(t));if(!Ln.isDocumentKey(s))throw new hn(Ht.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Te(r,new Ln(s))}if(t instanceof Hs)return Te(r,t._key);throw new hn(Ht.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dm(t)}.`)}function Lv(r,e){if(!Array.isArray(r)||0===r.length)throw new hn(Ht.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _p(r,e){if(e.isInequality()){const s=ud(r),c=e.field;if(null!==s&&!s.isEqual(c))throw new hn(Ht.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${c.toString()}'`);const f=vc(r);null!==f&&Ep(0,c,f)}const t=function(s,c){for(const f of s)for(const E of f.getFlattenedFilters())if(c.indexOf(E.op)>=0)return E.op;return null}(r.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new hn(Ht.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Ep(r,e,t){if(!t.isEqual(e))throw new hn(Ht.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class qy{convertValue(e,t="none"){switch(za(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Hr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ro(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Kn()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return ol(e,(c,f)=>{s[c]=this.convertValue(f,t)}),s}convertGeoPoint(e){return new xm(Hr(e.latitude),Hr(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=gc(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Uo(e));default:return null}}convertTimestamp(e){const t=xl(e);return new ci(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Ei.fromString(e);dr(Gh(s));const c=new Xo(s.get(1),s.get(3)),f=new Ln(s.popFirst(5));return c.isEqual(t)||Ji(`Document ${f} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),f}}function Bm(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class Bv extends qy{constructor(e){super(),this.firestore=e}convertBytes(e){return new td(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Hs(this.firestore,null,t)}}class Cf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ch extends yg{constructor(e,t,s,c,f,E){super(e,t,s,c,E),this._firestore=e,this._firestoreImpl=e,this.metadata=f}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Um(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(km("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Um extends Ch{data(e={}){return super.data(e)}}class bf{constructor(e,t,s,c){this._firestore=e,this._userDataWriter=t,this._snapshot=c,this.metadata=new Cf(c.hasPendingWrites,c.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Um(this._firestore,this._userDataWriter,s.key,s,new Cf(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new hn(Ht.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,c){if(s._snapshot.oldDocs.isEmpty()){let f=0;return s._snapshot.docChanges.map(E=>({type:"added",doc:new Um(s._firestore,s._userDataWriter,E.doc.key,E.doc,new Cf(s._snapshot.mutatedKeys.has(E.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:f++}))}{let f=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(E=>c||3!==E.type).map(E=>{const k=new Um(s._firestore,s._userDataWriter,E.doc.key,E.doc,new Cf(s._snapshot.mutatedKeys.has(E.doc.key),s._snapshot.fromCache),s.query.converter);let G=-1,J=-1;return 0!==E.type&&(G=f.indexOf(E.doc.key),f=f.delete(E.doc.key)),1!==E.type&&(f=f.add(E.doc),J=f.indexOf(E.doc.key)),{type:rE(E.type),doc:k,oldIndex:G,newIndex:J}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function rE(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Kn()}}function Yy(r,e){return r instanceof Ch&&e instanceof Ch?r._firestore===e._firestore&&r._key.isEqual(e._key)&&(null===r._document?null===e._document:r._document.isEqual(e._document))&&r._converter===e._converter:r instanceof bf&&e instanceof bf&&r._firestore===e._firestore&&Sm(r.query,e.query)&&r.metadata.isEqual(e.metadata)&&r._snapshot.isEqual(e._snapshot)}class bh extends qy{constructor(e){super(),this.firestore=e}convertBytes(e){return new td(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Hs(this.firestore,null,t)}}function Vv(r,e,t){r=Fi(r,Hs);const s=Fi(r.firestore,zs),c=Bm(r.converter,e,t);return Ip(s,[mg(Ih(s),"setDoc",r._key,c,null!==r.converter,t).toMutation(r._key,us.none())])}function jv(r,e,t,...s){r=Fi(r,Hs);const c=Fi(r.firestore,zs),f=Ih(c);let E;return E="string"==typeof(e=(0,et.m9)(e))||e instanceof kd?Gy(f,"updateDoc",r._key,e,t,s):zy(f,"updateDoc",r._key,e),Ip(c,[E.toMutation(r._key,us.exists(!0))])}function Zy(r,...e){var t,s,c;r=(0,et.m9)(r);let f={includeMetadataChanges:!1},E=0;"object"!=typeof e[E]||fg(e[E])||(f=e[E],E++);const k={includeMetadataChanges:f.includeMetadataChanges};if(fg(e[E])){const tt=e[E];e[E]=null===(t=tt.next)||void 0===t?void 0:t.bind(tt),e[E+1]=null===(s=tt.error)||void 0===s?void 0:s.bind(tt),e[E+2]=null===(c=tt.complete)||void 0===c?void 0:c.bind(tt)}let G,J,ue;if(r instanceof Hs)J=Fi(r.firestore,zs),ue=Ol(r._key.path),G={next:tt=>{e[E]&&e[E](Df(J,r,tt))},error:e[E+1],complete:e[E+2]};else{const tt=Fi(r,Za);J=Fi(tt.firestore,zs),ue=tt._query;const Bt=new bh(J);G={next:fn=>{e[E]&&e[E](new bf(J,Bt,tt,fn))},error:e[E+1],complete:e[E+2]},vg(r._query)}return function(tt,Bt,fn,Mn){const Fn=new Xu(Mn),gr=new Mi(Bt,Fn,fn);return tt.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return Ft(yield dp(tt),gr)})),()=>{Fn.Sc(),tt.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return sn(yield dp(tt),gr)}))}}(Vo(J),ue,k,G)}function Ip(r,e){return function(t,s){const c=new si;return t.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return function ov(r,e,t){return tm.apply(this,arguments)}(yield Cm(t),s,c)})),c.promise}(Vo(r),e)}function Df(r,e,t){const s=t.docs.get(e._key),c=new bh(r);return new Ch(r,c,e._key,s,new Cf(t.hasPendingWrites,t.fromCache),e.converter)}const Xy={maxAttempts:5};class qv{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ih(e)}set(e,t,s){this._verifyNotCommitted();const c=Nd(e,this._firestore),f=Bm(c.converter,t,s),E=mg(this._dataReader,"WriteBatch.set",c._key,f,null!==c.converter,s);return this._mutations.push(E.toMutation(c._key,us.none())),this}update(e,t,s,...c){this._verifyNotCommitted();const f=Nd(e,this._firestore);let E;return E="string"==typeof(t=(0,et.m9)(t))||t instanceof kd?Gy(this._dataReader,"WriteBatch.update",f._key,t,s,c):zy(this._dataReader,"WriteBatch.update",f._key,t),this._mutations.push(E.toMutation(f._key,us.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Nd(e,this._firestore);return this._mutations=this._mutations.concat(new C(t._key,us.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new hn(Ht.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Nd(r,e){if((r=(0,et.m9)(r)).firestore!==e)throw new hn(Ht.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class a0 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ih(e)}get(e){const t=Nd(e,this._firestore),s=new Bv(this._firestore);return this._transaction.lookup([t._key]).then(c=>{if(!c||1!==c.length)return Kn();const f=c[0];if(f.isFoundDocument())return new yg(this._firestore,s,f.key,f,t.converter);if(f.isNoDocument())return new yg(this._firestore,s,t._key,null,t.converter);throw Kn()})}set(e,t,s){const c=Nd(e,this._firestore),f=Bm(c.converter,t,s),E=mg(this._dataReader,"Transaction.set",c._key,f,null!==c.converter,s);return this._transaction.set(c._key,E),this}update(e,t,s,...c){const f=Nd(e,this._firestore);let E;return E="string"==typeof(t=(0,et.m9)(t))||t instanceof kd?Gy(this._dataReader,"Transaction.update",f._key,t,s,c):zy(this._dataReader,"Transaction.update",f._key,t),this._transaction.update(f._key,E),this}delete(e){const t=Nd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Nd(e,this._firestore),s=new bh(this._firestore);return super.get(e).then(c=>new Ch(this._firestore,s,t._key,c._document,new Cf(!1,!1),t.converter))}}!function(r,e=!0){vo=_t.SDK_VERSION,(0,_t._registerComponent)(new Y.wA("firestore",(t,{instanceIdentifier:s,options:c})=>{const f=t.getProvider("app").getImmediate(),E=new zs(new Ma(t.getProvider("auth-internal")),new wl(t.getProvider("app-check-internal")),function(k,G){if(!Object.prototype.hasOwnProperty.apply(k.options,["projectId"]))throw new hn(Ht.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xo(k.options.projectId,G)}(f,s),f);return c=Object.assign({useFetchStreams:e},c),E._setSettings(c),E},"PUBLIC").setMultipleInstances(!0)),(0,_t.registerVersion)(qc,"3.11.0",r),(0,_t.registerVersion)(qc,"3.11.0","esm2017")}();function jm(r,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new hn("invalid-argument",`Invalid options passed to function ${r}(): You cannot specify both "merge" and "mergeFields".`);return e}function Yv(){if(typeof Uint8Array>"u")throw new hn("unimplemented","Uint8Arrays are not available in this environment.")}function Zv(){if(!function ni(){return typeof atob<"u"}())throw new hn("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Eg{constructor(e){this._delegate=e}static fromBase64String(e){return Zv(),new Eg(td.fromBase64String(e))}static fromUint8Array(e){return Yv(),new Eg(td.fromUint8Array(e))}toBase64(){return Zv(),this._delegate.toBase64()}toUint8Array(){return Yv(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ig(r){return function Jy(r,e){if("object"!=typeof r||null===r)return!1;const t=r;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(r,["next","error","complete"])}class Xv{enableIndexedDbPersistence(e,t){return function Tv(r,e){xv(r=Fi(r,zs));const t=Vo(r);if(t._uninitializedComponentsProvider)throw new hn(Ht.FAILED_PRECONDITION,"SDK cache is already specified.");mi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const s=r._freezeSettings(),c=new up;return Av(t,c,new Zu(c,s.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Sv(r){xv(r=Fi(r,zs));const e=Vo(r);if(e._uninitializedComponentsProvider)throw new hn(Ht.FAILED_PRECONDITION,"SDK cache is already specified.");mi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings(),s=new up;return Av(e,s,new pv(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function R_(r){if(r._initialized&&!r._terminated)throw new hn(Ht.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new si;return r._queue.enqueueAndForgetEvenWhileRestricted((0,de.Z)(function*(){try{yield(t=(0,de.Z)(function*(s){if(!to.D())return Promise.resolve();const c=s+"main";yield to.delete(c)}),function(s){return t.apply(this,arguments)})(Yf(r._databaseId,r._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Hm{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Xo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&mi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function Iv(r,e,t,s={}){var c;const f=(r=Fi(r,Od))._getSettings();if("firestore.googleapis.com"!==f.host&&f.host!==e&&mi("Host has been set in both settings() and useEmulator(), emulator host will be used"),r._setSettings(Object.assign(Object.assign({},f),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let E,k;if("string"==typeof s.mockUserToken)E=s.mockUserToken,k=Wi.MOCK_USER;else{E=(0,et.Sg)(s.mockUserToken,null===(c=r._app)||void 0===c?void 0:c.options.projectId);const G=s.mockUserToken.sub||s.mockUserToken.user_id;if(!G)throw new hn(Ht.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");k=new Wi(G)}r._authCredentials=new Il(new il(E,k))}}(this._delegate,e,t,s)}enableNetwork(){return function P_(r){return function mv(r){return r.asyncQueue.enqueue((0,de.Z)(function*(){const e=yield ky(r),t=yield Ny(r);return e.setNetworkEnabled(!0),function(s){const c=jn(s);return c.Au.delete(0),Da(c)}(t)}))}(Vo(r=Fi(r,zs)))}(this._delegate)}disableNetwork(){return function O_(r){return function b_(r){return r.asyncQueue.enqueue((0,de.Z)(function*(){const e=yield ky(r),t=yield Ny(r);return e.setNetworkEnabled(!1),(s=(0,de.Z)(function*(c){const f=jn(c);f.Au.add(0),yield mu(f),f.Pu.set("Offline")}),function(c){return s.apply(this,arguments)})(t);var s}))}(Vo(r=Fi(r,zs)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,Ly("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function M_(r){return function(e){const t=new si;return e.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return function Ey(r,e){return hg.apply(this,arguments)}(yield Cm(e),t)})),t.promise}(Vo(r=Fi(r,zs)))}(this._delegate)}onSnapshotsInSync(e){return function e0(r,e){return function Qu(r,e){const t=new Xu(e);return r.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return s=yield dp(r),c=t,jn(s).Nu.add(c),void c.next();var s,c})),()=>{t.Sc(),r.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return s=yield dp(r),c=t,void jn(s).Nu.delete(c);var s,c}))}}(Vo(r=Fi(r,zs)),fg(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new hn("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Sf(this,By(this._delegate,e))}catch(t){throw ml(t,"collection()","Firestore.collection()")}}doc(e){try{return new Xa(this,vf(this._delegate,e))}catch(t){throw ml(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Vl(this,function wv(r,e){if(r=Fi(r,Od),Ac("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new hn(Ht.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Za(r,null,(t=e,new Ea(Ei.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ml(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function l0(r,e,t){r=Fi(r,zs);const s=Object.assign(Object.assign({},Xy),t);return function(c){if(c.maxAttempts<1)throw new hn(Ht.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(c,f,E){const k=new si;return c.asyncQueue.enqueueAndForget((0,de.Z)(function*(){const G=yield function yf(r){return Im(r).then(e=>e.datastore)}(c);new xy(c.asyncQueue,G,E,f,k).run()})),k.promise}(Vo(r),c=>e(new a0(r,c)),s)}(this._delegate,t=>e(new Gm(this,t)))}batch(){return Vo(this._delegate),new Qv(new qv(this._delegate,e=>Ip(this._delegate,e)))}loadBundle(e){return function k_(r,e){const t=Vo(r=Fi(r,zs)),s=new Am;return function T_(r,e,t,s){const c=function(f,E){let k;return k="string"==typeof f?Ca().encode(f):f,G=function(G,J){if(G instanceof Uint8Array)return vm(G,J);if(G instanceof ArrayBuffer)return vm(new Uint8Array(G),J);if(G instanceof ReadableStream)return G.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(k),new Ay(G,E);var G}(t,gl(e));r.asyncQueue.enqueueAndForget((0,de.Z)(function*(){!function fv(r,e,t){const s=jn(r);var c;(c=(0,de.Z)(function*(f,E,k){try{const G=yield E.getMetadata();if(yield function(Bt,fn){const Mn=jn(Bt),Fn=Ts(fn.createTime);return Mn.persistence.runTransaction("hasNewerBundle","readonly",gr=>Mn.Ls.getBundleMetadata(gr,fn.id)).then(gr=>!!gr&&gr.createTime.compareTo(Fn)>=0)}(f.localStore,G))return yield E.close(),k._completeWith({taskState:"Success",documentsLoaded:(Bt=G).totalDocuments,bytesLoaded:Bt.totalBytes,totalDocuments:Bt.totalDocuments,totalBytes:Bt.totalBytes}),Promise.resolve(new Set);k._updateProgress(yu(G));const J=new ss(G,f.localStore,E.serializer);let ue=yield E.Pc();for(;ue;){const Bt=yield J.ju(ue);Bt&&k._updateProgress(Bt),ue=yield E.Pc()}const tt=yield J.complete();return yield _u(f,tt.Hu,void 0),yield function(Bt,fn){const Mn=jn(Bt);return Mn.persistence.runTransaction("Save bundle","readwrite",Fn=>Mn.Ls.saveBundleMetadata(Fn,fn))}(f.localStore,G),k._completeWith(tt.progress),Promise.resolve(tt.Wu)}catch(G){return mi("SyncEngine",`Loading bundle failed with ${G}`),k._failWith(G),Promise.resolve(new Set)}var Bt}),function(f,E,k){return c.apply(this,arguments)})(s,e,t).then(c=>{s.sharedClientState.notifyBundleLoaded(c)})}(yield Cm(r),c,s)}))}(t,r._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function N_(r,e){return function S_(r,e){return r.asyncQueue.enqueue((0,de.Z)(function*(){return function(t,s){const c=jn(t);return c.persistence.runTransaction("Get named query","readonly",f=>c.Ls.getNamedQuery(f,s))}(yield wm(r),e)}))}(Vo(r=Fi(r,zs)),e).then(t=>t?new Za(r,null,t.query):null)}(this._delegate,e).then(t=>t?new Vl(this,t):null)}}class zm extends qy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Eg(new td(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Xa.forKey(t,this.firestore,null)}}class Gm{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new zm(e)}get(e){const t=Fd(e);return this._delegate.get(t).then(s=>new wp(this._firestore,new Ch(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const c=Fd(e);return s?(jm("Transaction.set",s),this._delegate.set(c,t,s)):this._delegate.set(c,t),this}update(e,t,s,...c){const f=Fd(e);return 2===arguments.length?this._delegate.update(f,t):this._delegate.update(f,t,s,...c),this}delete(e){const t=Fd(e);return this._delegate.delete(t),this}}class Qv{constructor(e){this._delegate=e}set(e,t,s){const c=Fd(e);return s?(jm("WriteBatch.set",s),this._delegate.set(c,t,s)):this._delegate.set(c,t),this}update(e,t,s,...c){const f=Fd(e);return 2===arguments.length?this._delegate.update(f,t):this._delegate.update(f,t,s,...c),this}delete(e){const t=Fd(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Dh{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new Um(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Tf(this._firestore,s),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=Dh.INSTANCES;let c=s.get(e);c||(c=new WeakMap,s.set(e,c));let f=c.get(t);return f||(f=new Dh(e,new zm(e),t),c.set(t,f)),f}}Dh.INSTANCES=new WeakMap;class Xa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new zm(e)}static forPath(e,t,s){if(e.length%2!=0)throw new hn("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Xa(t,new Hs(t._delegate,s,new Ln(e)))}static forKey(e,t,s){return new Xa(t,new Hs(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new Sf(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Sf(this.firestore,By(this._delegate,e))}catch(t){throw ml(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,et.m9)(e))instanceof Hs&&Cv(this._delegate,e)}set(e,t){t=jm("DocumentReference.set",t);try{return t?Vv(this._delegate,e,t):Vv(this._delegate,e)}catch(s){throw ml(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?jv(this._delegate,e):jv(this._delegate,e,t,...s)}catch(c){throw ml(c,"updateDoc()","DocumentReference.update()")}}delete(){return function iE(r){return Ip(Fi(r.firestore,zs),[new C(r._key,us.none())])}(this._delegate)}onSnapshot(...e){const t=Jv(e),s=v0(e,c=>new wp(this.firestore,new Ch(this.firestore._delegate,this._userDataWriter,c._key,c._document,c.metadata,this._delegate.converter)));return Zy(this._delegate,t,s)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Z_(r){r=Fi(r,Hs);const e=Fi(r.firestore,zs),t=Vo(e),s=new bh(e);return function yv(r,e){const t=new si;return r.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return(s=(0,de.Z)(function*(c,f,E){try{const k=yield function(G,J){const ue=jn(G);return ue.persistence.runTransaction("read document","readonly",tt=>ue.localDocuments.getDocument(tt,J))}(c,f);k.isFoundDocument()?E.resolve(k):k.isNoDocument()?E.resolve(null):E.reject(new hn(Ht.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(k){const G=I(k,`Failed to get document '${f} from cache`);E.reject(G)}}),function(c,f,E){return s.apply(this,arguments)})(yield wm(r),e,t);var s})),t.promise}(t,r._key).then(c=>new Ch(e,s,r._key,c,new Cf(null!==c&&c.hasLocalMutations,!0),r.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function Uv(r){r=Fi(r,Hs);const e=Fi(r.firestore,zs);return D_(Vo(e),r._key,{source:"server"}).then(t=>Df(e,r,t))}(this._delegate):function Vm(r){r=Fi(r,Hs);const e=Fi(r.firestore,zs);return D_(Vo(e),r._key).then(t=>Df(e,r,t))}(this._delegate),t.then(s=>new wp(this.firestore,new Ch(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new Xa(this.firestore,this._delegate.withConverter(e?Dh.getInstance(this.firestore,e):null))}}function ml(r,e,t){return r.message=r.message.replace(e,t),r}function Jv(r){for(const e of r)if("object"==typeof e&&!Ig(e))return e;return{}}function v0(r,e){var t,s;let c;return c=Ig(r[0])?r[0]:Ig(r[1])?r[1]:"function"==typeof r[0]?{next:r[0],error:r[1],complete:r[2]}:{next:r[1],error:r[2],complete:r[3]},{next:f=>{c.next&&c.next(e(f))},error:null===(t=c.error)||void 0===t?void 0:t.bind(c),complete:null===(s=c.complete)||void 0===s?void 0:s.bind(c)}}class wp{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Xa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Yy(this._delegate,e._delegate)}}class Tf extends wp{data(e){const t=this._delegate.data(e);return function cc(r,e){r||Kn()}(void 0!==t),t}}class Vl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new zm(e)}where(e,t,s){try{return new Vl(this.firestore,wf(this._delegate,function kv(r,e,t){const s=e,c=km("where",r);return yp._create(c,s,t)}(e,t,s)))}catch(c){throw ml(c,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Vl(this.firestore,wf(this._delegate,function Nv(r,e="asc"){const t=e,s=km("orderBy",r);return Nm._create(s,t)}(e,t)))}catch(s){throw ml(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Vl(this.firestore,wf(this._delegate,function j_(r){return Ev("limit",r),Fm._create("limit",r,"F")}(e)))}catch(t){throw ml(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Vl(this.firestore,wf(this._delegate,function H_(r){return Ev("limitToLast",r),Fm._create("limitToLast",r,"L")}(e)))}catch(t){throw ml(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Vl(this.firestore,wf(this._delegate,function z_(...r){return wh._create("startAt",r,!0)}(...e)))}catch(t){throw ml(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Vl(this.firestore,wf(this._delegate,function G_(...r){return wh._create("startAfter",r,!1)}(...e)))}catch(t){throw ml(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Vl(this.firestore,wf(this._delegate,function $m(...r){return Lm._create("endBefore",r,!1)}(...e)))}catch(t){throw ml(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Vl(this.firestore,wf(this._delegate,function Fv(...r){return Lm._create("endAt",r,!0)}(...e)))}catch(t){throw ml(t,"endAt()","Query.endAt()")}}isEqual(e){return Sm(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function X_(r){r=Fi(r,Za);const e=Fi(r.firestore,zs),t=Vo(e),s=new bh(e);return function vv(r,e){const t=new si;return r.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return(s=(0,de.Z)(function*(c,f,E){try{const k=yield af(c,f,!0),G=new Sc(f,k.sr),J=G.nc(k.documents),ue=G.applyChanges(J,!1);E.resolve(ue.snapshot)}catch(k){const G=I(k,`Failed to execute query '${f} against cache`);E.reject(G)}}),function(c,f,E){return s.apply(this,arguments)})(yield wm(r),e,t);var s})),t.promise}(t,r._query).then(c=>new bf(e,s,r,c))}(this._delegate):"server"===(null==e?void 0:e.source)?function Q_(r){r=Fi(r,Za);const e=Fi(r.firestore,zs),t=Vo(e),s=new bh(e);return bm(t,r._query,{source:"server"}).then(c=>new bf(e,s,r,c))}(this._delegate):function _g(r){r=Fi(r,Za);const e=Fi(r.firestore,zs),t=Vo(e),s=new bh(e);return vg(r._query),bm(t,r._query).then(c=>new bf(e,s,r,c))}(this._delegate),t.then(s=>new tv(this.firestore,new bf(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=Jv(e),s=v0(e,c=>new tv(this.firestore,new bf(this.firestore._delegate,this._userDataWriter,this._delegate,c._snapshot)));return Zy(this._delegate,t,s)}withConverter(e){return new Vl(this.firestore,this._delegate.withConverter(e?Dh.getInstance(this.firestore,e):null))}}class ev{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Tf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class tv{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Vl(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Tf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new ev(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new Tf(this._firestore,s))})}isEqual(e){return Yy(this._delegate,e._delegate)}}class Sf extends Vl{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Xa(this.firestore,e):null}doc(e){try{return new Xa(this.firestore,void 0===e?vf(this._delegate):vf(this._delegate,e))}catch(t){throw ml(t,"doc()","CollectionReference.doc()")}}add(e){return function J_(r,e){const t=Fi(r.firestore,zs),s=vf(r),c=Bm(r.converter,e);return Ip(t,[mg(Ih(r.firestore),"addDoc",s._key,c,null!==r.converter,{}).toMutation(s._key,us.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new Xa(this.firestore,t))}isEqual(e){return Cv(this._delegate,e._delegate)}withConverter(e){return new Sf(this.firestore,this._delegate.withConverter(e?Dh.getInstance(this.firestore,e):null))}}function Fd(r){return Fi(r,Hs)}class Wm{constructor(...e){this._delegate=new kd(...e)}static documentId(){return new Wm(ps.keyField().canonicalString())}isEqual(e){return(e=(0,et.m9)(e))instanceof kd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Th{constructor(e){this._delegate=e}static serverTimestamp(){const e=function u0(){return new Rm("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Th(e)}static delete(){const e=function c0(){return new hp("deleteField")}();return e._methodName="FieldValue.delete",new Th(e)}static arrayUnion(...e){const t=function d0(...r){return new Mv("arrayUnion",r)}(...e);return t._methodName="FieldValue.arrayUnion",new Th(t)}static arrayRemove(...e){const t=function h0(...r){return new Pv("arrayRemove",r)}(...e);return t._methodName="FieldValue.arrayRemove",new Th(t)}static increment(e){const t=function f0(r){return new Ef("increment",r)}(e);return t._methodName="FieldValue.increment",new Th(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const e_={Firestore:Hm,GeoPoint:xm,Timestamp:ci,Blob:Eg,Transaction:Gm,WriteBatch:Qv,DocumentReference:Xa,DocumentSnapshot:wp,Query:Vl,QueryDocumentSnapshot:Tf,QuerySnapshot:tv,CollectionReference:Sf,FieldPath:Wm,FieldValue:Th,setLogLevel:function y0(r){!function lc(r){Js.setLogLevel(r)}(r)},CACHE_SIZE_UNLIMITED:-1};!function _0(r){(function t_(r,e){r.INTERNAL.registerComponent(new Y.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),c=t.getProvider("firestore").getImmediate();return e(s,c)},"PUBLIC").setServiceProps(Object.assign({},e_)))})(r,(e,t)=>new Hm(e,t,new Xv)),r.registerVersion("@firebase/firestore-compat","0.3.8")}(Re.Z);var Sh=j(1205),E0=j(6217),I0=j(9260);function w0(r,e){return function n_(r,e=m.z){return new ee.y(t=>{let s;return null!=e?e.schedule(()=>{s=r.onSnapshot({includeMetadataChanges:!0},t)}):s=r.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=s&&s()}})}(r,e)}function nv(r,e){return w0(r,e).pipe((0,ae.U)(t=>({payload:t,type:"query"})))}function Km(r,e){return nv(r,e).pipe((0,_e.O)(void 0),ye(),(0,ae.U)(([t,s])=>{const c=s.payload.docChanges(),f=c.map(E=>({type:E.type,payload:E}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((E,k)=>{const G=c.find(ue=>ue.doc.ref.isEqual(E.ref)),J=null==t?void 0:t.payload.docs.find(ue=>ue.ref.isEqual(E.ref));G&&JSON.stringify(G.doc.metadata)===JSON.stringify(E.metadata)||!G&&J&&JSON.stringify(J.metadata)===JSON.stringify(E.metadata)||f.push({type:"modified",payload:{oldIndex:k,newIndex:k,type:"modified",doc:E}})}),f}))}function C0(r,e,t){return Km(r,t).pipe((0,Ee.R)((s,c)=>function b0(r,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(r=function i_(r,e){switch(e.type){case"added":if(!r[e.newIndex]||!r[e.newIndex].doc.ref.isEqual(e.doc.ref))return rv(r,e.newIndex,0,e);break;case"modified":if(null==r[e.oldIndex]||r[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=r.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return rv(r,e.newIndex,1,e)}break;case"removed":if(r[e.oldIndex]&&r[e.oldIndex].doc.ref.isEqual(e.doc.ref))return rv(r,e.oldIndex,1)}return r}(r,s))}),r}(s,c.map(f=>f.payload),e),[]),(0,Ke.x)(),(0,ae.U)(s=>s.map(c=>({type:c.type,payload:c}))))}function rv(r,e,t,...s){const c=r.slice();return c.splice(e,t,...s),c}function s_(r){return(!r||0===r.length)&&(r=["added","removed","modified"]),r}class o_{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=Km(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ae.U)(s=>s.filter(c=>e.indexOf(c.type)>-1)))),t.pipe((0,_e.O)(void 0),ye(),(0,We.h)(([s,c])=>c.length>0||!s),(0,ae.U)(([s,c])=>c),Se.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ee.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=s_(e);return C0(this.query,t,this.afs.schedulers.outsideAngular).pipe(Se.iC)}valueChanges(e={}){return nv(this.query,this.afs.schedulers.outsideAngular).pipe((0,ae.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),Se.iC)}get(e){return(0,ce.D)(this.query.get(e)).pipe(Se.iC)}add(e){return this.ref.add(e)}doc(e){return new a_(this.ref.doc(e),this.afs)}}class a_{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:c,query:f}=u_(s,t);return new o_(c,f,this.afs)}snapshotChanges(){return function r_(r,e){return w0(r,e).pipe((0,_e.O)(void 0),ye(),(0,ae.U)(([t,s])=>s.exists?null!=t&&t.exists?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Se.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ae.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ce.D)(this.ref.get(e)).pipe(Se.iC)}}class D0{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Km(this.query,this.afs.schedulers.outsideAngular).pipe((0,ae.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,We.h)(t=>t.length>0),Se.iC):Km(this.query,this.afs.schedulers.outsideAngular).pipe(Se.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ee.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=s_(e);return C0(this.query,t,this.afs.schedulers.outsideAngular).pipe(Se.iC)}valueChanges(e={}){return nv(this.query,this.afs.schedulers.outsideAngular).pipe((0,ae.U)(s=>s.payload.docs.map(c=>e.idField?Object.assign({[e.idField]:c.id},c.data()):c.data())),Se.iC)}get(e){return(0,ce.D)(this.query.get(e)).pipe(Se.iC)}}const l_=new _.OlP("angularfire2.enableFirestorePersistence"),c_=new _.OlP("angularfire2.firestore.persistenceSettings"),T0=new _.OlP("angularfire2.firestore.settings"),S0=new _.OlP("angularfire2.firestore.use-emulator");function u_(r,e=(t=>t)){return{query:e(r),ref:r}}let Cp=(()=>{class r{constructor(t,s,c,f,E,k,G,J,ue,tt,Bt,fn,Mn,Fn,gr,ai,ki){this.schedulers=G;const li=(0,ct.on)(t,k,s),$a=ue;tt&&(0,Sh.nw)(li,k,Bt,Mn,Fn,gr,fn,ai),[this.firestore,this.persistenceEnabled$]=(0,ct.cc)(`${li.name}.firestore`,"AngularFirestore",li.name,()=>{const Ps=k.runOutsideAngular(()=>li.firestore());if(f&&Ps.settings(f),$a&&Ps.useEmulator(...$a),c&&!(0,At.PM)(E)){const bs=()=>{try{return(0,ce.D)(Ps.enablePersistence(J||void 0).then(()=>!0,()=>!1))}catch(Ba){return typeof console<"u"&&console.warn(Ba),(0,$e.of)(!1)}};return[Ps,k.runOutsideAngular(bs)]}return[Ps,(0,$e.of)(!1)]},[f,$a,c])}collection(t,s){let c;c="string"==typeof t?this.firestore.collection(t):t;const{ref:f,query:E}=u_(c,s),k=this.schedulers.ngZone.run(()=>f);return new o_(k,E,this)}collectionGroup(t,s){const c=s||(E=>E),f=this.firestore.collectionGroup(t);return new D0(c(f),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const c=this.schedulers.ngZone.run(()=>s);return new a_(c,this)}createId(){return this.firestore.collection("_").doc().id}}return r.\u0275fac=function(t){return new(t||r)(_.LFG(ct.Dh),_.LFG(ct.xv,8),_.LFG(l_,8),_.LFG(T0,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(Se.HU),_.LFG(c_,8),_.LFG(S0,8),_.LFG(Sh.zQ,8),_.LFG(Sh.Qv,8),_.LFG(Sh.L6,8),_.LFG(Sh._Q,8),_.LFG(Sh.rT,8),_.LFG(Sh.lh,8),_.LFG(Sh.f7,8),_.LFG(E0.nm,8))},r.\u0275prov=_.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),d_=(()=>{class r{constructor(){I0.Z.registerVersion("angularfire",Se.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:r,providers:[{provide:l_,useValue:!0},{provide:c_,useValue:t}]}}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=_.oAB({type:r}),r.\u0275inj=_.cJS({providers:[Cp]}),r})()},2011:(In,Et,j)=>{"use strict";j.d(Et,{Dh:()=>Me,GT:()=>Se,cc:()=>We,hO:()=>Ke,on:()=>ye,pX:()=>$e,xv:()=>ze});var _=j(4650),m=j(9260),ee=j(4976);In=j.hmd(In);const ce=["ngOnDestroy"],$e=(Re,de,_t,Y={})=>new Proxy(Re,{get:(it,et)=>_t.runOutsideAngular(()=>{var Pt;if(Re[et])return!(null===(Pt=null==Y?void 0:Y.spy)||void 0===Pt)&&Pt.get&&Y.spy.get(et,Re[et]),Re[et];if(ce.indexOf(et)>-1)return()=>{};const Ue=de.toPromise().then(ke=>{const Ne=ke&&ke[et];return"function"==typeof Ne?Ne.bind(ke):Ne&&Ne.then?Ne.then(De=>_t.run(()=>De)):_t.run(()=>Ne)});return new Proxy(()=>{},{get:(ke,Ne)=>Ue[Ne],apply:(ke,Ne,De)=>Ue.then(je=>{var gt;const Dt=je&&je(...De);return!(null===(gt=null==Y?void 0:Y.spy)||void 0===gt)&&gt.apply&&Y.spy.apply(et,De,Dt),Dt})})})}),Se=(Re,de)=>{de.forEach(_t=>{Object.getOwnPropertyNames(_t.prototype||_t).forEach(Y=>{Object.defineProperty(Re.prototype,Y,Object.getOwnPropertyDescriptor(_t.prototype||_t,Y))})})};class _e{constructor(de){return de}}const Me=new _.OlP("angularfire2.app.options"),ze=new _.OlP("angularfire2.app.name");function ye(Re,de,_t){const it="object"==typeof _t&&_t||{};it.name=it.name||"string"==typeof _t&&_t||"[DEFAULT]";const Pt=m.Z.apps.filter(Ue=>Ue&&Ue.name===it.name)[0]||de.runOutsideAngular(()=>m.Z.initializeApp(Re,it));try{JSON.stringify(Re)!==JSON.stringify(Pt.options)&&ae("error",`${Pt.name} Firebase App already initialized with different options${In.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new _e(Pt)}const ae=(Re,...de)=>{(0,_.X6Q)()&&typeof console<"u"&&console[Re](...de)},Ee={provide:_e,useFactory:ye,deps:[Me,_.R0b,[new _.FiY,ze]]};let Ke=(()=>{class Re{constructor(_t){m.Z.registerVersion("angularfire",ee.q4.full,"core"),m.Z.registerVersion("angularfire",ee.q4.full,"app-compat"),m.Z.registerVersion("angular",_.q4F.full,_t.toString())}static initializeApp(_t,Y){return{ngModule:Re,providers:[{provide:Me,useValue:_t},{provide:ze,useValue:Y}]}}}return Re.\u0275fac=function(_t){return new(_t||Re)(_.LFG(_.Lbi))},Re.\u0275mod=_.oAB({type:Re}),Re.\u0275inj=_.cJS({providers:[Ee]}),Re})();function We(Re,de,_t,Y,it){const[,et,Pt]=globalThis.\u0275AngularfireInstanceCache.find(Ue=>Ue[0]===Re)||[];if(et)return function ct(Re,de){try{return Re.toString()===de.toString()}catch{return Re===de}}(it,Pt)||(xe("error",`${de} was already initialized on the ${_t} Firebase App with different settings.${At?" You may need to reload as Firebase is not HMR aware.":""}`),xe("warn",{is:it,was:Pt})),et;{const Ue=Y();return globalThis.\u0275AngularfireInstanceCache.push([Re,Ue,it]),Ue}}const At=!!In.hot,xe=(Re,...de)=>{(0,_.X6Q)()&&typeof console<"u"&&console[Re](...de)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(In,Et,j)=>{"use strict";j.d(Et,{q4:()=>xr,iC:()=>Qo,fc:()=>nu,HU:()=>Uo,vb:()=>Hr,JM:()=>xl});var _=j(4650),m=j(259),ee=j(5861),ce=j(6881),$e=j(2090),Se=j(4859),_e=j(1877);const Me=(P,B)=>B.some(Z=>P instanceof Z);let ze,ye;const Ke=new WeakMap,We=new WeakMap,ct=new WeakMap,At=new WeakMap,xe=new WeakMap;let _t={get(P,B,Z){if(P instanceof IDBTransaction){if("done"===B)return We.get(P);if("objectStoreNames"===B)return P.objectStoreNames||ct.get(P);if("store"===B)return Z.objectStoreNames[1]?void 0:Z.objectStore(Z.objectStoreNames[0])}return Pt(P[B])},set:(P,B,Z)=>(P[B]=Z,!0),has:(P,B)=>P instanceof IDBTransaction&&("done"===B||"store"===B)||B in P};function et(P){return"function"==typeof P?function it(P){return P!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ee(){return ye||(ye=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(P)?function(...B){return P.apply(Ue(this),B),Pt(Ke.get(this))}:function(...B){return Pt(P.apply(Ue(this),B))}:function(B,...Z){const Te=P.call(Ue(this),B,...Z);return ct.set(Te,B.sort?B.sort():[B]),Pt(Te)}}(P):(P instanceof IDBTransaction&&function de(P){if(We.has(P))return;const B=new Promise((Z,Te)=>{const dt=()=>{P.removeEventListener("complete",Rt),P.removeEventListener("error",Wt),P.removeEventListener("abort",Wt)},Rt=()=>{Z(),dt()},Wt=()=>{Te(P.error||new DOMException("AbortError","AbortError")),dt()};P.addEventListener("complete",Rt),P.addEventListener("error",Wt),P.addEventListener("abort",Wt)});We.set(P,B)}(P),Me(P,function ae(){return ze||(ze=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(P,_t):P)}function Pt(P){if(P instanceof IDBRequest)return function Re(P){const B=new Promise((Z,Te)=>{const dt=()=>{P.removeEventListener("success",Rt),P.removeEventListener("error",Wt)},Rt=()=>{Z(Pt(P.result)),dt()},Wt=()=>{Te(P.error),dt()};P.addEventListener("success",Rt),P.addEventListener("error",Wt)});return B.then(Z=>{Z instanceof IDBCursor&&Ke.set(Z,P)}).catch(()=>{}),xe.set(B,P),B}(P);if(At.has(P))return At.get(P);const B=et(P);return B!==P&&(At.set(P,B),xe.set(B,P)),B}const Ue=P=>xe.get(P),De=["get","getKey","getAll","getAllKeys","count"],je=["put","add","delete","clear"],gt=new Map;function Dt(P,B){if(!(P instanceof IDBDatabase)||B in P||"string"!=typeof B)return;if(gt.get(B))return gt.get(B);const Z=B.replace(/FromIndex$/,""),Te=B!==Z,dt=je.includes(Z);if(!(Z in(Te?IDBIndex:IDBObjectStore).prototype)||!dt&&!De.includes(Z))return;const Rt=function(){var Wt=(0,ee.Z)(function*(Un,...Nn){const ir=this.transaction(Un,dt?"readwrite":"readonly");let jr=ir.store;return Te&&(jr=jr.index(Nn.shift())),(yield Promise.all([jr[Z](...Nn),dt&&ir.done]))[0]});return function(Nn){return Wt.apply(this,arguments)}}();return gt.set(B,Rt),Rt}!function Y(P){_t=P(_t)}(P=>({...P,get:(B,Z,Te)=>Dt(B,Z)||P.get(B,Z,Te),has:(B,Z)=>!!Dt(B,Z)||P.has(B,Z)}));const ht="@firebase/installations",Mt="0.6.4",yt=1e4,Fe=`w:${Mt}`,Ve="FIS_v2",Be="https://firebaseinstallations.googleapis.com/v1",ft=36e5,Dn=new $e.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function kt(P){return P instanceof $e.ZR&&P.code.includes("request-failed")}function Ae({projectId:P}){return`${Be}/projects/${P}/installations`}function St(P){return{token:P.token,requestStatus:2,expiresIn:hr(P.expiresIn),creationTime:Date.now()}}function gn(P,B){return On.apply(this,arguments)}function On(){return(On=(0,ee.Z)(function*(P,B){const Te=(yield B.json()).error;return Dn.create("request-failed",{requestName:P,serverCode:Te.code,serverMessage:Te.message,serverStatus:Te.status})})).apply(this,arguments)}function Yn({apiKey:P}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":P})}function cn(P){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,ee.Z)(function*(P){const B=yield P();return B.status>=500&&B.status<600?P():B})).apply(this,arguments)}function hr(P){return Number(P.replace("s","000"))}function bn(){return(bn=(0,ee.Z)(function*({appConfig:P,heartbeatServiceProvider:B},{fid:Z}){const Te=Ae(P),dt=Yn(P),Rt=B.getImmediate({optional:!0});if(Rt){const ir=yield Rt.getHeartbeatsHeader();ir&&dt.append("x-firebase-client",ir)}const Un={method:"POST",headers:dt,body:JSON.stringify({fid:Z,authVersion:Ve,appId:P.appId,sdkVersion:Fe})},Nn=yield cn(()=>fetch(Te,Un));if(Nn.ok){const ir=yield Nn.json();return{fid:ir.fid||Z,registrationStatus:2,refreshToken:ir.refreshToken,authToken:St(ir.authToken)}}throw yield gn("Create Installation",Nn)})).apply(this,arguments)}function zn(P){return new Promise(B=>{setTimeout(B,P)})}const Cr=/^[cdef][\w-]{21}$/,di="";function wi(){try{const P=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(P),P[0]=112+P[0]%16;const Z=function Gn(P){return function yi(P){return btoa(String.fromCharCode(...P)).replace(/\+/g,"-").replace(/\//g,"_")}(P).substr(0,22)}(P);return Cr.test(Z)?Z:di}catch{return di}}function qn(P){return`${P.appName}!${P.appId}`}const ln=new Map;function yn(P,B){const Z=qn(P);Dr(Z,B),function Qr(P,B){const Z=function pi(){return!zr&&"BroadcastChannel"in self&&(zr=new BroadcastChannel("[Firebase] FID Change"),zr.onmessage=P=>{Dr(P.data.key,P.data.fid)}),zr}();Z&&Z.postMessage({key:P,fid:B}),function Lr(){0===ln.size&&zr&&(zr.close(),zr=null)}()}(Z,B)}function Dr(P,B){const Z=ln.get(P);if(Z)for(const Te of Z)Te(B)}let zr=null;const gi="firebase-installations-database",ur=1,lr="firebase-installations-store";let yr=null;function Ai(){return yr||(yr=function ke(P,B,{blocked:Z,upgrade:Te,blocking:dt,terminated:Rt}={}){const Wt=indexedDB.open(P,B),Un=Pt(Wt);return Te&&Wt.addEventListener("upgradeneeded",Nn=>{Te(Pt(Wt.result),Nn.oldVersion,Nn.newVersion,Pt(Wt.transaction))}),Z&&Wt.addEventListener("blocked",()=>Z()),Un.then(Nn=>{Rt&&Nn.addEventListener("close",()=>Rt()),dt&&Nn.addEventListener("versionchange",()=>dt())}).catch(()=>{}),Un}(gi,ur,{upgrade:(P,B)=>{0===B&&P.createObjectStore(lr)}})),yr}function mr(P,B){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,ee.Z)(function*(P,B){const Z=qn(P),dt=(yield Ai()).transaction(lr,"readwrite"),Rt=dt.objectStore(lr),Wt=yield Rt.get(Z);return yield Rt.put(B,Z),yield dt.done,(!Wt||Wt.fid!==B.fid)&&yn(P,B.fid),B})).apply(this,arguments)}function Ze(P){return nt.apply(this,arguments)}function nt(){return(nt=(0,ee.Z)(function*(P){const B=qn(P),Te=(yield Ai()).transaction(lr,"readwrite");yield Te.objectStore(lr).delete(B),yield Te.done})).apply(this,arguments)}function en(P,B){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,ee.Z)(function*(P,B){const Z=qn(P),dt=(yield Ai()).transaction(lr,"readwrite"),Rt=dt.objectStore(lr),Wt=yield Rt.get(Z),Un=B(Wt);return void 0===Un?yield Rt.delete(Z):yield Rt.put(Un,Z),yield dt.done,Un&&(!Wt||Wt.fid!==Un.fid)&&yn(P,Un.fid),Un})).apply(this,arguments)}function we(P){return Ie.apply(this,arguments)}function Ie(){return Ie=(0,ee.Z)(function*(P){let B;const Z=yield en(P.appConfig,Te=>{const dt=function qe(P){return rt(P||{fid:wi(),registrationStatus:0})}(Te),Rt=function Ot(P,B){if(0===B.registrationStatus){if(!navigator.onLine)return{installationEntry:B,registrationPromise:Promise.reject(Dn.create("app-offline"))};const Z={fid:B.fid,registrationStatus:1,registrationTime:Date.now()},Te=function ut(P,B){return un.apply(this,arguments)}(P,Z);return{installationEntry:Z,registrationPromise:Te}}return 1===B.registrationStatus?{installationEntry:B,registrationPromise:ot(P)}:{installationEntry:B}}(P,dt);return B=Rt.registrationPromise,Rt.installationEntry});return Z.fid===di?{installationEntry:yield B}:{installationEntry:Z,registrationPromise:B}}),Ie.apply(this,arguments)}function un(){return un=(0,ee.Z)(function*(P,B){try{const Z=yield function tr(P,B){return bn.apply(this,arguments)}(P,B);return mr(P.appConfig,Z)}catch(Z){throw kt(Z)&&409===Z.customData.serverCode?yield Ze(P.appConfig):yield mr(P.appConfig,{fid:B.fid,registrationStatus:0}),Z}}),un.apply(this,arguments)}function ot(P){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,ee.Z)(function*(P){let B=yield ve(P.appConfig);for(;1===B.registrationStatus;)yield zn(100),B=yield ve(P.appConfig);if(0===B.registrationStatus){const{installationEntry:Z,registrationPromise:Te}=yield we(P);return Te||Z}return B})).apply(this,arguments)}function ve(P){return en(P,B=>{if(!B)throw Dn.create("installation-not-found");return rt(B)})}function rt(P){return function Nt(P){return 1===P.registrationStatus&&P.registrationTime+yt<Date.now()}(P)?{fid:P.fid,registrationStatus:0}:P}function Ce(){return(Ce=(0,ee.Z)(function*({appConfig:P,heartbeatServiceProvider:B},Z){const Te=function Tt(P,{fid:B}){return`${Ae(P)}/${B}/authTokens:generate`}(P,Z),dt=function xn(P,{refreshToken:B}){const Z=Yn(P);return Z.append("Authorization",function _r(P){return`${Ve} ${P}`}(B)),Z}(P,Z),Rt=B.getImmediate({optional:!0});if(Rt){const ir=yield Rt.getHeartbeatsHeader();ir&&dt.append("x-firebase-client",ir)}const Un={method:"POST",headers:dt,body:JSON.stringify({installation:{sdkVersion:Fe,appId:P.appId}})},Nn=yield cn(()=>fetch(Te,Un));if(Nn.ok)return St(yield Nn.json());throw yield gn("Generate Auth Token",Nn)})).apply(this,arguments)}function It(P){return Qt.apply(this,arguments)}function Qt(){return Qt=(0,ee.Z)(function*(P,B=!1){let Z;const Te=yield en(P.appConfig,Rt=>{if(!kn(Rt))throw Dn.create("not-registered");const Wt=Rt.authToken;if(!B&&function wn(P){return 2===P.requestStatus&&!function Qn(P){const B=Date.now();return B<P.creationTime||P.creationTime+P.expiresIn<B+ft}(P)}(Wt))return Rt;if(1===Wt.requestStatus)return Z=function Xe(P,B){return He.apply(this,arguments)}(P,B),Rt;{if(!navigator.onLine)throw Dn.create("app-offline");const Un=function Jn(P){const B={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},P),{authToken:B})}(Rt);return Z=function Gt(P,B){return pn.apply(this,arguments)}(P,Un),Un}});return Z?yield Z:Te.authToken}),Qt.apply(this,arguments)}function He(){return(He=(0,ee.Z)(function*(P,B){let Z=yield Ct(P.appConfig);for(;1===Z.authToken.requestStatus;)yield zn(100),Z=yield Ct(P.appConfig);const Te=Z.authToken;return 0===Te.requestStatus?It(P,B):Te})).apply(this,arguments)}function Ct(P){return en(P,B=>{if(!kn(B))throw Dn.create("not-registered");return function Wn(P){return 1===P.requestStatus&&P.requestTime+yt<Date.now()}(B.authToken)?Object.assign(Object.assign({},B),{authToken:{requestStatus:0}}):B})}function pn(){return pn=(0,ee.Z)(function*(P,B){try{const Z=yield function he(P,B){return Ce.apply(this,arguments)}(P,B),Te=Object.assign(Object.assign({},B),{authToken:Z});return yield mr(P.appConfig,Te),Z}catch(Z){if(!kt(Z)||401!==Z.customData.serverCode&&404!==Z.customData.serverCode){const Te=Object.assign(Object.assign({},B),{authToken:{requestStatus:0}});yield mr(P.appConfig,Te)}else yield Ze(P.appConfig);throw Z}}),pn.apply(this,arguments)}function kn(P){return void 0!==P&&2===P.registrationStatus}function ys(){return(ys=(0,ee.Z)(function*(P){const B=P,{installationEntry:Z,registrationPromise:Te}=yield we(B);return Te?Te.catch(console.error):It(B).catch(console.error),Z.fid})).apply(this,arguments)}function Vi(){return Vi=(0,ee.Z)(function*(P,B=!1){const Z=P;return yield function ji(P){return An.apply(this,arguments)}(Z),(yield It(Z,B)).token}),Vi.apply(this,arguments)}function An(){return(An=(0,ee.Z)(function*(P){const{registrationPromise:B}=yield we(P);B&&(yield B)})).apply(this,arguments)}function be(P){return Dn.create("missing-app-config-values",{valueName:P})}const Ye="installations",Je=P=>{const B=P.getProvider("app").getImmediate(),Z=function se(P){if(!P||!P.options)throw be("App Configuration");if(!P.name)throw be("App Name");const B=["projectId","apiKey","appId"];for(const Z of B)if(!P.options[Z])throw be(Z);return{appName:P.name,projectId:P.options.projectId,apiKey:P.options.apiKey,appId:P.options.appId}}(B);return{app:B,appConfig:Z,heartbeatServiceProvider:(0,ce._getProvider)(B,"heartbeat"),_delete:()=>Promise.resolve()}},Qe=P=>{const B=P.getProvider("app").getImmediate(),Z=(0,ce._getProvider)(B,Ye).getImmediate();return{getId:()=>function Xn(P){return ys.apply(this,arguments)}(Z),getToken:dt=>function vi(P){return Vi.apply(this,arguments)}(Z,dt)}};(function Vt(){(0,ce._registerComponent)(new Se.wA(Ye,Je,"PUBLIC")),(0,ce._registerComponent)(new Se.wA("installations-internal",Qe,"PRIVATE"))})(),(0,ce.registerVersion)(ht,Mt),(0,ce.registerVersion)(ht,Mt,"esm2017");const Lt="@firebase/remote-config",er=new $e.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Yi{constructor(B,Z,Te,dt){this.client=B,this.storage=Z,this.storageCache=Te,this.logger=dt}isCachedDataFresh(B,Z){if(!Z)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Te=Date.now()-Z,dt=Te<=B;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Te}. Cache max age millis (minimumFetchIntervalMillis setting): ${B}. Is cache hit: ${dt}.`),dt}fetch(B){var Z=this;return(0,ee.Z)(function*(){const[Te,dt]=yield Promise.all([Z.storage.getLastSuccessfulFetchTimestampMillis(),Z.storage.getLastSuccessfulFetchResponse()]);if(dt&&Z.isCachedDataFresh(B.cacheMaxAgeMillis,Te))return dt;B.eTag=dt&&dt.eTag;const Rt=yield Z.client.fetch(B),Wt=[Z.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Rt.status&&Wt.push(Z.storage.setLastSuccessfulFetchResponse(Rt)),yield Promise.all(Wt),Rt})()}}function oo(P=navigator){return P.languages&&P.languages[0]||P.language}class Os{constructor(B,Z,Te,dt,Rt,Wt){this.firebaseInstallations=B,this.sdkVersion=Z,this.namespace=Te,this.projectId=dt,this.apiKey=Rt,this.appId=Wt}fetch(B){var Z=this;return(0,ee.Z)(function*(){const[Te,dt]=yield Promise.all([Z.firebaseInstallations.getId(),Z.firebaseInstallations.getToken()]),Wt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${Z.projectId}/namespaces/${Z.namespace}:fetch?key=${Z.apiKey}`,Un={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":B.eTag||"*"},Nn={sdk_version:Z.sdkVersion,app_instance_id:Te,app_instance_id_token:dt,app_id:Z.appId,language_code:oo()},ir={method:"POST",headers:Un,body:JSON.stringify(Nn)},jr=fetch(Wt,ir),Nr=new Promise((Ti,Io)=>{B.signal.addEventListener(()=>{const iu=new Error("The operation was aborted.");iu.name="AbortError",Io(iu)})});let Po;try{yield Promise.race([jr,Nr]),Po=yield jr}catch(Ti){let Io="fetch-client-network";throw"AbortError"===(null==Ti?void 0:Ti.name)&&(Io="fetch-timeout"),er.create(Io,{originalErrorMessage:null==Ti?void 0:Ti.message})}let ws=Po.status;const Rl=Po.headers.get("ETag")||void 0;let Vs,Wl;if(200===Po.status){let Ti;try{Ti=yield Po.json()}catch(Io){throw er.create("fetch-client-parse",{originalErrorMessage:null==Io?void 0:Io.message})}Vs=Ti.entries,Wl=Ti.state}if("INSTANCE_STATE_UNSPECIFIED"===Wl?ws=500:"NO_CHANGE"===Wl?ws=304:("NO_TEMPLATE"===Wl||"EMPTY_CONFIG"===Wl)&&(Vs={}),304!==ws&&200!==ws)throw er.create("fetch-status",{httpStatus:ws});return{status:ws,eTag:Rl,config:Vs}})()}}class As{constructor(B,Z){this.client=B,this.storage=Z}fetch(B){var Z=this;return(0,ee.Z)(function*(){const Te=(yield Z.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return Z.attemptFetch(B,Te)})()}attemptFetch(B,{throttleEndTimeMillis:Z,backoffCount:Te}){var dt=this;return(0,ee.Z)(function*(){yield function Ta(P,B){return new Promise((Z,Te)=>{const dt=Math.max(B-Date.now(),0),Rt=setTimeout(Z,dt);P.addEventListener(()=>{clearTimeout(Rt),Te(er.create("fetch-throttle",{throttleEndTimeMillis:B}))})})}(B.signal,Z);try{const Rt=yield dt.client.fetch(B);return yield dt.storage.deleteThrottleMetadata(),Rt}catch(Rt){if(!function ko(P){if(!(P instanceof $e.ZR&&P.customData))return!1;const B=Number(P.customData.httpStatus);return 429===B||500===B||503===B||504===B}(Rt))throw Rt;const Wt={throttleEndTimeMillis:Date.now()+(0,$e.$s)(Te),backoffCount:Te+1};return yield dt.storage.setThrottleMetadata(Wt),dt.attemptFetch(B,Wt)}})()}}class Qa{constructor(B,Z,Te,dt,Rt){this.app=B,this._client=Z,this._storageCache=Te,this._storage=dt,this._logger=Rt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function lo(P,B){const Z=P.target.error||void 0;return er.create(B,{originalErrorMessage:Z&&(null==Z?void 0:Z.message)})}const ds="app_namespace_store";class Ua{constructor(B,Z,Te,dt=function os(){return new Promise((P,B)=>{try{const Z=indexedDB.open("firebase_remote_config",1);Z.onerror=Te=>{B(lo(Te,"storage-open"))},Z.onsuccess=Te=>{P(Te.target.result)},Z.onupgradeneeded=Te=>{0===Te.oldVersion&&Te.target.result.createObjectStore(ds,{keyPath:"compositeKey"})}}catch(Z){B(er.create("storage-open",{originalErrorMessage:null==Z?void 0:Z.message}))}})}()){this.appId=B,this.appName=Z,this.namespace=Te,this.openDbPromise=dt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(B){return this.set("last_fetch_status",B)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(B){return this.set("last_successful_fetch_timestamp_millis",B)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(B){return this.set("last_successful_fetch_response",B)}getActiveConfig(){return this.get("active_config")}setActiveConfig(B){return this.set("active_config",B)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(B){return this.set("active_config_etag",B)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(B){return this.set("throttle_metadata",B)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(B){var Z=this;return(0,ee.Z)(function*(){const Te=yield Z.openDbPromise;return new Promise((dt,Rt)=>{const Un=Te.transaction([ds],"readonly").objectStore(ds),Nn=Z.createCompositeKey(B);try{const ir=Un.get(Nn);ir.onerror=jr=>{Rt(lo(jr,"storage-get"))},ir.onsuccess=jr=>{const Nr=jr.target.result;dt(Nr?Nr.value:void 0)}}catch(ir){Rt(er.create("storage-get",{originalErrorMessage:null==ir?void 0:ir.message}))}})})()}set(B,Z){var Te=this;return(0,ee.Z)(function*(){const dt=yield Te.openDbPromise;return new Promise((Rt,Wt)=>{const Nn=dt.transaction([ds],"readwrite").objectStore(ds),ir=Te.createCompositeKey(B);try{const jr=Nn.put({compositeKey:ir,value:Z});jr.onerror=Nr=>{Wt(lo(Nr,"storage-set"))},jr.onsuccess=()=>{Rt()}}catch(jr){Wt(er.create("storage-set",{originalErrorMessage:null==jr?void 0:jr.message}))}})})()}delete(B){var Z=this;return(0,ee.Z)(function*(){const Te=yield Z.openDbPromise;return new Promise((dt,Rt)=>{const Un=Te.transaction([ds],"readwrite").objectStore(ds),Nn=Z.createCompositeKey(B);try{const ir=Un.delete(Nn);ir.onerror=jr=>{Rt(lo(jr,"storage-delete"))},ir.onsuccess=()=>{dt()}}catch(ir){Rt(er.create("storage-delete",{originalErrorMessage:null==ir?void 0:ir.message}))}})})()}createCompositeKey(B){return[this.appId,this.appName,this.namespace,B].join()}}class Ho{constructor(B){this.storage=B}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var B=this;return(0,ee.Z)(function*(){const Z=B.storage.getLastFetchStatus(),Te=B.storage.getLastSuccessfulFetchTimestampMillis(),dt=B.storage.getActiveConfig(),Rt=yield Z;Rt&&(B.lastFetchStatus=Rt);const Wt=yield Te;Wt&&(B.lastSuccessfulFetchTimestampMillis=Wt);const Un=yield dt;Un&&(B.activeConfig=Un)})()}setLastFetchStatus(B){return this.lastFetchStatus=B,this.storage.setLastFetchStatus(B)}setLastSuccessfulFetchTimestampMillis(B){return this.lastSuccessfulFetchTimestampMillis=B,this.storage.setLastSuccessfulFetchTimestampMillis(B)}setActiveConfig(B){return this.activeConfig=B,this.storage.setActiveConfig(B)}}function uo(){return ho.apply(this,arguments)}function ho(){return(ho=(0,ee.Z)(function*(){if(!(0,$e.hl)())return!1;try{return yield(0,$e.eu)()}catch{return!1}})).apply(this,arguments)}!function co(){(0,ce._registerComponent)(new Se.wA("remote-config",function P(B,{instanceIdentifier:Z}){const Te=B.getProvider("app").getImmediate(),dt=B.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw er.create("registration-window");if(!(0,$e.hl)())throw er.create("indexed-db-unavailable");const{projectId:Rt,apiKey:Wt,appId:Un}=Te.options;if(!Rt)throw er.create("registration-project-id");if(!Wt)throw er.create("registration-api-key");if(!Un)throw er.create("registration-app-id");const Nn=new Ua(Un,Te.name,Z=Z||"firebase"),ir=new Ho(Nn),jr=new _e.Yd(Lt);jr.logLevel=_e.in.ERROR;const Nr=new Os(dt,ce.SDK_VERSION,Z,Rt,Wt,Un),Po=new As(Nr,Nn),ws=new Yi(Po,Nn,ir,jr),Rl=new Qa(Te,ws,ir,Nn,jr);return function Er(P){const B=(0,$e.m9)(P);B._initializePromise||(B._initializePromise=B._storageCache.loadFromStorage().then(()=>{B._isInitializationComplete=!0}))}(Rl),Rl},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)(Lt,"0.4.4"),(0,ce.registerVersion)(Lt,"0.4.4","esm2017")}();const fa=(P,B)=>B.some(Z=>P instanceof Z);let fo,_s;const ra=new WeakMap,xs=new WeakMap,zi=new WeakMap,Zi=new WeakMap,bo=new WeakMap;let go={get(P,B,Z){if(P instanceof IDBTransaction){if("done"===B)return xs.get(P);if("objectStoreNames"===B)return P.objectStoreNames||zi.get(P);if("store"===B)return Z.objectStoreNames[1]?void 0:Z.objectStore(Z.objectStoreNames[0])}return as(P[B])},set:(P,B,Z)=>(P[B]=Z,!0),has:(P,B)=>P instanceof IDBTransaction&&("done"===B||"store"===B)||B in P};function Ja(P){return"function"==typeof P?function ia(P){return P!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function No(){return _s||(_s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(P)?function(...B){return P.apply(Xi(this),B),as(ra.get(this))}:function(...B){return as(P.apply(Xi(this),B))}:function(B,...Z){const Te=P.call(Xi(this),B,...Z);return zi.set(Te,B.sort?B.sort():[B]),as(Te)}}(P):(P instanceof IDBTransaction&&function po(P){if(xs.has(P))return;const B=new Promise((Z,Te)=>{const dt=()=>{P.removeEventListener("complete",Rt),P.removeEventListener("error",Wt),P.removeEventListener("abort",Wt)},Rt=()=>{Z(),dt()},Wt=()=>{Te(P.error||new DOMException("AbortError","AbortError")),dt()};P.addEventListener("complete",Rt),P.addEventListener("error",Wt),P.addEventListener("abort",Wt)});xs.set(P,B)}(P),fa(P,function na(){return fo||(fo=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(P,go):P)}function as(P){if(P instanceof IDBRequest)return function Pi(P){const B=new Promise((Z,Te)=>{const dt=()=>{P.removeEventListener("success",Rt),P.removeEventListener("error",Wt)},Rt=()=>{Z(as(P.result)),dt()},Wt=()=>{Te(P.error),dt()};P.addEventListener("success",Rt),P.addEventListener("error",Wt)});return B.then(Z=>{Z instanceof IDBCursor&&ra.set(Z,P)}).catch(()=>{}),bo.set(B,P),B}(P);if(Zi.has(P))return Zi.get(P);const B=Ja(P);return B!==P&&(Zi.set(P,B),bo.set(B,P)),B}const Xi=P=>bo.get(P);function Do(P,B,{blocked:Z,upgrade:Te,blocking:dt,terminated:Rt}={}){const Wt=indexedDB.open(P,B),Un=as(Wt);return Te&&Wt.addEventListener("upgradeneeded",Nn=>{Te(as(Wt.result),Nn.oldVersion,Nn.newVersion,as(Wt.transaction))}),Z&&Wt.addEventListener("blocked",()=>Z()),Un.then(Nn=>{Rt&&Nn.addEventListener("close",()=>Rt()),dt&&Nn.addEventListener("versionchange",()=>dt())}).catch(()=>{}),Un}function Gi(P,{blocked:B}={}){const Z=indexedDB.deleteDatabase(P);return B&&Z.addEventListener("blocked",()=>B()),as(Z).then(()=>{})}const Va=["get","getKey","getAll","getAllKeys","count"],Ns=["put","add","delete","clear"],To=new Map;function sa(P,B){if(!(P instanceof IDBDatabase)||B in P||"string"!=typeof B)return;if(To.get(B))return To.get(B);const Z=B.replace(/FromIndex$/,""),Te=B!==Z,dt=Ns.includes(Z);if(!(Z in(Te?IDBIndex:IDBObjectStore).prototype)||!dt&&!Va.includes(Z))return;const Rt=function(){var Wt=(0,ee.Z)(function*(Un,...Nn){const ir=this.transaction(Un,dt?"readwrite":"readonly");let jr=ir.store;return Te&&(jr=jr.index(Nn.shift())),(yield Promise.all([jr[Z](...Nn),dt&&ir.done]))[0]});return function(Nn){return Wt.apply(this,arguments)}}();return To.set(B,Rt),Rt}!function Oi(P){go=P(go)}(P=>({...P,get:(B,Z,Te)=>sa(B,Z)||P.get(B,Z,Te),has:(B,Z)=>!!sa(B,Z)||P.has(B,Z)}));const Tr="/firebase-messaging-sw.js",So="/firebase-cloud-messaging-push-scope",pa="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",oa="https://fcmregistrations.googleapis.com/v1",b="google.c.a.c_id",q="google.c.a.c_l",T="google.c.a.ts",W="google.c.a.e";var M=(()=>{return(P=M||(M={})).PUSH_RECEIVED="push-received",P.NOTIFICATION_CLICKED="notification-clicked",M;var P})();function F(P){const B=new Uint8Array(P);return btoa(String.fromCharCode(...B)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function L(P){const Z=(P+"=".repeat((4-P.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Te=atob(Z),dt=new Uint8Array(Te.length);for(let Rt=0;Rt<Te.length;++Rt)dt[Rt]=Te.charCodeAt(Rt);return dt}const ne="fcm_token_details_db",vt=5,Tn="fcm_token_object_Store";function ii(){return ii=(0,ee.Z)(function*(P){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Rt=>Rt.name).includes(ne))return null;let B=null;return(yield Do(ne,vt,{upgrade:(Te=(0,ee.Z)(function*(dt,Rt,Wt,Un){var Nn;if(Rt<2||!dt.objectStoreNames.contains(Tn))return;const ir=Un.objectStore(Tn),jr=yield ir.index("fcmSenderId").get(P);if(yield ir.clear(),jr)if(2===Rt){const Nr=jr;if(!Nr.auth||!Nr.p256dh||!Nr.endpoint)return;B={token:Nr.fcmToken,createTime:null!==(Nn=Nr.createTime)&&void 0!==Nn?Nn:Date.now(),subscriptionOptions:{auth:Nr.auth,p256dh:Nr.p256dh,endpoint:Nr.endpoint,swScope:Nr.swScope,vapidKey:"string"==typeof Nr.vapidKey?Nr.vapidKey:F(Nr.vapidKey)}}}else if(3===Rt){const Nr=jr;B={token:Nr.fcmToken,createTime:Nr.createTime,subscriptionOptions:{auth:F(Nr.auth),p256dh:F(Nr.p256dh),endpoint:Nr.endpoint,swScope:Nr.swScope,vapidKey:F(Nr.vapidKey)}}}else if(4===Rt){const Nr=jr;B={token:Nr.fcmToken,createTime:Nr.createTime,subscriptionOptions:{auth:F(Nr.auth),p256dh:F(Nr.p256dh),endpoint:Nr.endpoint,swScope:Nr.swScope,vapidKey:F(Nr.vapidKey)}}}}),function(Rt,Wt,Un,Nn){return Te.apply(this,arguments)})})).close(),yield Gi(ne),yield Gi("fcm_vapid_details_db"),yield Gi("undefined"),function Qi(P){if(!P||!P.subscriptionOptions)return!1;const{subscriptionOptions:B}=P;return"number"==typeof P.createTime&&P.createTime>0&&"string"==typeof P.token&&P.token.length>0&&"string"==typeof B.auth&&B.auth.length>0&&"string"==typeof B.p256dh&&B.p256dh.length>0&&"string"==typeof B.endpoint&&B.endpoint.length>0&&"string"==typeof B.swScope&&B.swScope.length>0&&"string"==typeof B.vapidKey&&B.vapidKey.length>0}(B)?B:null;var Te}),ii.apply(this,arguments)}const hs="firebase-messaging-database",Ao=1,xi="firebase-messaging-store";let ja=null;function ts(){return ja||(ja=Do(hs,Ao,{upgrade:(P,B)=>{0===B&&P.createObjectStore(xi)}})),ja}function Ks(P){return qs.apply(this,arguments)}function qs(){return qs=(0,ee.Z)(function*(P){const B=Sa(P),Te=yield(yield ts()).transaction(xi).objectStore(xi).get(B);if(Te)return Te;{const dt=yield function $r(P){return ii.apply(this,arguments)}(P.appConfig.senderId);if(dt)return yield aa(P,dt),dt}}),qs.apply(this,arguments)}function aa(P,B){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,ee.Z)(function*(P,B){const Z=Sa(P),dt=(yield ts()).transaction(xi,"readwrite");return yield dt.objectStore(xi).put(B,Z),yield dt.done,B})).apply(this,arguments)}function el(){return(el=(0,ee.Z)(function*(P){const B=Sa(P),Te=(yield ts()).transaction(xi,"readwrite");yield Te.objectStore(xi).delete(B),yield Te.done})).apply(this,arguments)}function Sa({appConfig:P}){return P.appId}const ns=new $e.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Rs(P,B){return tl.apply(this,arguments)}function tl(){return(tl=(0,ee.Z)(function*(P,B){const Z=yield ls(P),Te=Go(B),dt={method:"POST",headers:Z,body:JSON.stringify(Te)};let Rt;try{Rt=yield(yield fetch(ga(P.appConfig),dt)).json()}catch(Wt){throw ns.create("token-subscribe-failed",{errorInfo:null==Wt?void 0:Wt.toString()})}if(Rt.error)throw ns.create("token-subscribe-failed",{errorInfo:Rt.error.message});if(!Rt.token)throw ns.create("token-subscribe-no-token");return Rt.token})).apply(this,arguments)}function zo(){return(zo=(0,ee.Z)(function*(P,B){const Z=yield ls(P),Te=Go(B.subscriptionOptions),dt={method:"PATCH",headers:Z,body:JSON.stringify(Te)};let Rt;try{Rt=yield(yield fetch(`${ga(P.appConfig)}/${B.token}`,dt)).json()}catch(Wt){throw ns.create("token-update-failed",{errorInfo:null==Wt?void 0:Wt.toString()})}if(Rt.error)throw ns.create("token-update-failed",{errorInfo:Rt.error.message});if(!Rt.token)throw ns.create("token-update-no-token");return Rt.token})).apply(this,arguments)}function Fo(P,B){return nl.apply(this,arguments)}function nl(){return(nl=(0,ee.Z)(function*(P,B){const Te={method:"DELETE",headers:yield ls(P)};try{const Rt=yield(yield fetch(`${ga(P.appConfig)}/${B}`,Te)).json();if(Rt.error)throw ns.create("token-unsubscribe-failed",{errorInfo:Rt.error.message})}catch(dt){throw ns.create("token-unsubscribe-failed",{errorInfo:null==dt?void 0:dt.toString()})}})).apply(this,arguments)}function ga({projectId:P}){return`${oa}/projects/${P}/registrations`}function ls(P){return xo.apply(this,arguments)}function xo(){return(xo=(0,ee.Z)(function*({appConfig:P,installations:B}){const Z=yield B.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":P.apiKey,"x-goog-firebase-installations-auth":`FIS ${Z}`})})).apply(this,arguments)}function Go({p256dh:P,auth:B,endpoint:Z,vapidKey:Te}){const dt={web:{endpoint:Z,auth:B,p256dh:P}};return Te!==pa&&(dt.web.applicationPubKey=Te),dt}const Zs=6048e5;function xa(){return xa=(0,ee.Z)(function*(P){const B=yield function vl(P,B){return mo.apply(this,arguments)}(P.swRegistration,P.vapidKey),Z={vapidKey:P.vapidKey,swScope:P.swRegistration.scope,endpoint:B.endpoint,auth:F(B.getKey("auth")),p256dh:F(B.getKey("p256dh"))},Te=yield Ks(P.firebaseDependencies);if(Te){if(function jl(P,B){return B.vapidKey===P.vapidKey&&B.endpoint===P.endpoint&&B.auth===P.auth&&B.p256dh===P.p256dh}(Te.subscriptionOptions,Z))return Date.now()>=Te.createTime+Zs?function Vr(P,B){return Ro.apply(this,arguments)}(P,{token:Te.token,createTime:Date.now(),subscriptionOptions:Z}):Te.token;try{yield Fo(P.firebaseDependencies,Te.token)}catch(dt){console.warn(dt)}return Ra(P.firebaseDependencies,Z)}return Ra(P.firebaseDependencies,Z)}),xa.apply(this,arguments)}function Fs(){return Fs=(0,ee.Z)(function*(P){const B=yield Ks(P.firebaseDependencies);B&&(yield Fo(P.firebaseDependencies,B.token),yield function yl(P){return el.apply(this,arguments)}(P.firebaseDependencies));const Z=yield P.swRegistration.pushManager.getSubscription();return!Z||Z.unsubscribe()}),Fs.apply(this,arguments)}function Ro(){return Ro=(0,ee.Z)(function*(P,B){try{const Z=yield function Aa(P,B){return zo.apply(this,arguments)}(P.firebaseDependencies,B),Te=Object.assign(Object.assign({},B),{token:Z,createTime:Date.now()});return yield aa(P.firebaseDependencies,Te),Z}catch(Z){throw yield function cs(P){return Fs.apply(this,arguments)}(P),Z}}),Ro.apply(this,arguments)}function Ra(P,B){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,ee.Z)(function*(P,B){const Te={token:yield Rs(P,B),createTime:Date.now(),subscriptionOptions:B};return yield aa(P,Te),Te.token})).apply(this,arguments)}function mo(){return(mo=(0,ee.Z)(function*(P,B){return(yield P.pushManager.getSubscription())||P.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:L(B)})})).apply(this,arguments)}function Sr(P){const B={from:P.from,collapseKey:P.collapse_key,messageId:P.fcmMessageId};return function Hl(P,B){if(!B.notification)return;P.notification={};const Z=B.notification.title;Z&&(P.notification.title=Z);const Te=B.notification.body;Te&&(P.notification.body=Te);const dt=B.notification.image;dt&&(P.notification.image=dt);const Rt=B.notification.icon;Rt&&(P.notification.icon=Rt)}(B,P),function _l(P,B){B.data&&(P.data=B.data)}(B,P),function $(P,B){var Z,Te,dt,Rt,Wt;if(!(B.fcmOptions||null!==(Z=B.notification)&&void 0!==Z&&Z.click_action))return;P.fcmOptions={};const Un=null!==(dt=null===(Te=B.fcmOptions)||void 0===Te?void 0:Te.link)&&void 0!==dt?dt:null===(Rt=B.notification)||void 0===Rt?void 0:Rt.click_action;Un&&(P.fcmOptions.link=Un);const Nn=null===(Wt=B.fcmOptions)||void 0===Wt?void 0:Wt.analytics_label;Nn&&(P.fcmOptions.analyticsLabel=Nn)}(B,P),B}function H(P,B){const Z=[];for(let Te=0;Te<P.length;Te++)Z.push(P.charAt(Te)),Te<B.length&&Z.push(B.charAt(Te));return Z.join("")}function Le(P){return ns.create("missing-app-config-values",{valueName:P})}H("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),H("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Zt{constructor(B,Z,Te){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const dt=function ie(P){if(!P||!P.options)throw Le("App Configuration Object");if(!P.name)throw Le("App Name");const B=["projectId","apiKey","appId","messagingSenderId"],{options:Z}=P;for(const Te of B)if(!Z[Te])throw Le(Te);return{appName:P.name,projectId:Z.projectId,apiKey:Z.apiKey,appId:Z.appId,senderId:Z.messagingSenderId}}(B);this.firebaseDependencies={app:B,appConfig:dt,installations:Z,analyticsProvider:Te}}_delete(){return Promise.resolve()}}function Jt(P){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,ee.Z)(function*(P){try{P.swRegistration=yield navigator.serviceWorker.register(Tr,{scope:So}),P.swRegistration.update().catch(()=>{})}catch(B){throw ns.create("failed-service-worker-registration",{browserErrorMessage:null==B?void 0:B.message})}})).apply(this,arguments)}function Kr(){return(Kr=(0,ee.Z)(function*(P,B){if(!B&&!P.swRegistration&&(yield Jt(P)),B||!P.swRegistration){if(!(B instanceof ServiceWorkerRegistration))throw ns.create("invalid-sw-registration");P.swRegistration=B}})).apply(this,arguments)}function wr(){return(wr=(0,ee.Z)(function*(P,B){B?P.vapidKey=B:P.vapidKey||(P.vapidKey=pa)})).apply(this,arguments)}function bi(){return bi=(0,ee.Z)(function*(P,B){if(!navigator)throw ns.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ns.create("permission-blocked");return yield function Br(P,B){return wr.apply(this,arguments)}(P,null==B?void 0:B.vapidKey),yield function Ar(P,B){return Kr.apply(this,arguments)}(P,null==B?void 0:B.serviceWorkerRegistration),function fs(P){return xa.apply(this,arguments)}(P)}),bi.apply(this,arguments)}function Wo(){return(Wo=(0,ee.Z)(function*(P,B,Z){const Te=function yo(P){switch(P){case M.NOTIFICATION_CLICKED:return"notification_open";case M.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(B);(yield P.firebaseDependencies.analyticsProvider.get()).logEvent(Te,{message_id:Z[b],message_name:Z[q],message_time:Z[T],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Es(){return Es=(0,ee.Z)(function*(P,B){const Z=B.data;if(!Z.isFirebaseMessaging)return;P.onMessageHandler&&Z.messageType===M.PUSH_RECEIVED&&("function"==typeof P.onMessageHandler?P.onMessageHandler(Sr(Z)):P.onMessageHandler.next(Sr(Z)));const Te=Z.data;(function Q(P){return"object"==typeof P&&!!P&&b in P})(Te)&&"1"===Te[W]&&(yield function Bi(P,B,Z){return Wo.apply(this,arguments)}(P,Z.messageType,Te))}),Es.apply(this,arguments)}const Xs="@firebase/messaging",Qs=P=>{const B=new Zt(P.getProvider("app").getImmediate(),P.getProvider("installations-internal").getImmediate(),P.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",Z=>function Ko(P,B){return Es.apply(this,arguments)}(B,Z)),B},rl=P=>{const B=P.getProvider("messaging").getImmediate();return{getToken:Te=>function Ri(P,B){return bi.apply(this,arguments)}(B,Te)}};function Rc(){return qo.apply(this,arguments)}function qo(){return(qo=(0,ee.Z)(function*(){try{yield(0,$e.eu)()}catch{return!1}return typeof window<"u"&&(0,$e.hl)()&&(0,$e.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function El(){(0,ce._registerComponent)(new Se.wA("messaging",Qs,"PUBLIC")),(0,ce._registerComponent)(new Se.wA("messaging-internal",rl,"PRIVATE")),(0,ce.registerVersion)(Xs,"0.12.4"),(0,ce.registerVersion)(Xs,"0.12.4","esm2017")}();const mi="analytics",Yc="firebase_id",Kn="origin",dr=6e4,cc="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",jn="https://www.googletagmanager.com/gtag/js",Ht=new _e.Yd("@firebase/analytics"),si=new $e.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function il(P){if(!P.startsWith(jn)){const B=si.create("invalid-gtag-resource",{gtagURL:P});return Ht.warn(B.message),""}return P}function uc(P){return Promise.all(P.map(B=>B.catch(Z=>Z)))}function $o(){return($o=(0,ee.Z)(function*(P,B,Z,Te,dt,Rt){const Wt=Te[dt];try{if(Wt)yield B[Wt];else{const Nn=(yield uc(Z)).find(ir=>ir.measurementId===dt);Nn&&(yield B[Nn.appId])}}catch(Un){Ht.error(Un)}P("config",dt,Rt)})).apply(this,arguments)}function Mc(){return(Mc=(0,ee.Z)(function*(P,B,Z,Te,dt){try{let Rt=[];if(dt&&dt.send_to){let Wt=dt.send_to;Array.isArray(Wt)||(Wt=[Wt]);const Un=yield uc(Z);for(const Nn of Wt){const ir=Un.find(Nr=>Nr.measurementId===Nn),jr=ir&&B[ir.appId];if(!jr){Rt=[];break}Rt.push(jr)}}0===Rt.length&&(Rt=Object.values(B)),yield Promise.all(Rt),P("event",Te,dt||{})}catch(Rt){Ht.error(Rt)}})).apply(this,arguments)}const la=30,sr=new class ci{constructor(B={},Z=1e3){this.throttleMetadata=B,this.intervalMillis=Z}getThrottleMetadata(B){return this.throttleMetadata[B]}setThrottleMetadata(B,Z){this.throttleMetadata[B]=Z}deleteThrottleMetadata(B){delete this.throttleMetadata[B]}};function Pc(P){return new Headers({Accept:"application/json","x-goog-api-key":P})}function Ni(){return(Ni=(0,ee.Z)(function*(P){var B;const{appId:Z,apiKey:Te}=P,dt={method:"GET",headers:Pc(Te)},Rt=cc.replace("{app-id}",Z),Wt=yield fetch(Rt,dt);if(200!==Wt.status&&304!==Wt.status){let Un="";try{const Nn=yield Wt.json();null!==(B=Nn.error)&&void 0!==B&&B.message&&(Un=Nn.error.message)}catch{}throw si.create("config-fetch-failed",{httpStatus:Wt.status,responseMessage:Un})}return Wt.json()})).apply(this,arguments)}function Ln(){return(Ln=(0,ee.Z)(function*(P,B=sr,Z){const{appId:Te,apiKey:dt,measurementId:Rt}=P.options;if(!Te)throw si.create("no-app-id");if(!dt){if(Rt)return{measurementId:Rt,appId:Te};throw si.create("no-api-key")}const Wt=B.getThrottleMetadata(Te)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Un=new hc;return setTimeout((0,ee.Z)(function*(){Un.abort()}),void 0!==Z?Z:dr),zl({appId:Te,apiKey:dt,measurementId:Rt},Wt,Un,B)})).apply(this,arguments)}function zl(P,B,Z){return dc.apply(this,arguments)}function dc(){return dc=(0,ee.Z)(function*(P,{throttleEndTimeMillis:B,backoffCount:Z},Te,dt=sr){var Rt;const{appId:Wt,measurementId:Un}=P;try{yield function Cl(P,B){return new Promise((Z,Te)=>{const dt=Math.max(B-Date.now(),0),Rt=setTimeout(Z,dt);P.addEventListener(()=>{clearTimeout(Rt),Te(si.create("fetch-throttle",{throttleEndTimeMillis:B}))})})}(Te,B)}catch(Nn){if(Un)return Ht.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Un} provided in the "measurementId" field in the local Firebase config. [${null==Nn?void 0:Nn.message}]`),{appId:Wt,measurementId:Un};throw Nn}try{const Nn=yield function Ei(P){return Ni.apply(this,arguments)}(P);return dt.deleteThrottleMetadata(Wt),Nn}catch(Nn){const ir=Nn;if(!function Qc(P){if(!(P instanceof $e.ZR&&P.customData))return!1;const B=Number(P.customData.httpStatus);return 429===B||500===B||503===B||504===B}(ir)){if(dt.deleteThrottleMetadata(Wt),Un)return Ht.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Un} provided in the "measurementId" field in the local Firebase config. [${null==ir?void 0:ir.message}]`),{appId:Wt,measurementId:Un};throw Nn}const jr=503===Number(null===(Rt=null==ir?void 0:ir.customData)||void 0===Rt?void 0:Rt.httpStatus)?(0,$e.$s)(Z,dt.intervalMillis,la):(0,$e.$s)(Z,dt.intervalMillis),Nr={throttleEndTimeMillis:Date.now()+jr,backoffCount:Z+1};return dt.setThrottleMetadata(Wt,Nr),Ht.debug(`Calling attemptFetch again in ${jr} millis`),zl(P,Nr,Te,dt)}}),dc.apply(this,arguments)}class hc{constructor(){this.listeners=[]}addEventListener(B){this.listeners.push(B)}abort(){this.listeners.forEach(B=>B())}}let bl,Eu;function Jc(){return(Jc=(0,ee.Z)(function*(P,B,Z,Te,dt){if(dt&&dt.global)P("event",Z,Te);else{const Rt=yield B;P("event",Z,Object.assign(Object.assign({},Te),{send_to:Rt}))}})).apply(this,arguments)}function Pr(){return(Pr=(0,ee.Z)(function*(){if(!(0,$e.hl)())return Ht.warn(si.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,$e.eu)()}catch(P){return Ht.warn(si.create("indexeddb-unavailable",{errorInfo:null==P?void 0:P.toString()}).message),!1}return!0})).apply(this,arguments)}function x(){return x=(0,ee.Z)(function*(P,B,Z,Te,dt,Rt,Wt){var Un;const Nn=function ps(P){return Ln.apply(this,arguments)}(P);Nn.then(ws=>{Z[ws.measurementId]=ws.appId,P.options.measurementId&&ws.measurementId!==P.options.measurementId&&Ht.warn(`The measurement ID in the local Firebase config (${P.options.measurementId}) does not match the measurement ID fetched from the server (${ws.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ws=>Ht.error(ws)),B.push(Nn);const ir=function ui(){return Pr.apply(this,arguments)}().then(ws=>{if(ws)return Te.getId()}),[jr,Nr]=yield Promise.all([Nn,ir]);(function pr(P){const B=window.document.getElementsByTagName("script");for(const Z of Object.values(B))if(Z.src&&Z.src.includes(jn)&&Z.src.includes(P))return Z;return null})(Rt)||function Ma(P,B){const Z=function Il(P,B){let Z;return window.trustedTypes&&(Z=window.trustedTypes.createPolicy(P,B)),Z}("firebase-js-sdk-policy",{createScriptURL:il}),Te=document.createElement("script"),dt=`${jn}?l=${P}&id=${B}`;Te.src=Z?null==Z?void 0:Z.createScriptURL(dt):dt,Te.async=!0,document.head.appendChild(Te)}(Rt,jr.measurementId),Eu&&(dt("consent","default",Eu),function ca(P){Eu=P}(void 0)),dt("js",new Date);const Po=null!==(Un=null==Wt?void 0:Wt.config)&&void 0!==Un?Un:{};return Po[Kn]="firebase",Po.update=!0,null!=Nr&&(Po[Yc]=Nr),dt("config",jr.measurementId,Po),bl&&(dt("set",bl),function Yo(P){bl=P}(void 0)),jr.measurementId}),x.apply(this,arguments)}class w{constructor(B){this.app=B}_delete(){return delete O[this.app.options.appId],Promise.resolve()}}let O={},z=[];const re={};let Ut,En,le="dataLayer",lt="gtag",Hn=!1;function rs(P,B,Z){!function Ii(){const P=[];if((0,$e.ru)()&&P.push("This is a browser extension environment."),(0,$e.zI)()||P.push("Cookies are not available."),P.length>0){const B=P.map((Te,dt)=>`(${dt+1}) ${Te}`).join(" "),Z=si.create("invalid-analytics-context",{errorInfo:B});Ht.warn(Z.message)}}();const Te=P.options.appId;if(!Te)throw si.create("no-app-id");if(!P.options.apiKey){if(!P.options.measurementId)throw si.create("no-api-key");Ht.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${P.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=O[Te])throw si.create("already-exists",{id:Te});if(!Hn){!function $d(P){let B=[];Array.isArray(window[P])?B=window[P]:window[P]=B}(le);const{wrappedGtag:Rt,gtagCore:Wt}=function ma(P,B,Z,Te,dt){let Rt=function(...Wt){window[Te].push(arguments)};return window[dt]&&"function"==typeof window[dt]&&(Rt=window[dt]),window[dt]=function eo(P,B,Z,Te){function Rt(){return Rt=(0,ee.Z)(function*(Wt,...Un){try{if("event"===Wt){const[Nn,ir]=Un;yield function wl(P,B,Z,Te,dt){return Mc.apply(this,arguments)}(P,B,Z,Nn,ir)}else if("config"===Wt){const[Nn,ir]=Un;yield function Zc(P,B,Z,Te,dt,Rt){return $o.apply(this,arguments)}(P,B,Z,Te,Nn,ir)}else if("consent"===Wt){const[Nn]=Un;P("consent","update",Nn)}else if("get"===Wt){const[Nn,ir,jr]=Un;P("get",Nn,ir,jr)}else if("set"===Wt){const[Nn]=Un;P("set",Nn)}else P(Wt,...Un)}catch(Nn){Ht.error(Nn)}}),Rt.apply(this,arguments)}return function dt(Wt){return Rt.apply(this,arguments)}}(Rt,P,B,Z),{gtagCore:Rt,wrappedGtag:window[dt]}}(O,z,re,le,lt);En=Rt,Ut=Wt,Hn=!0}return O[Te]=function S(P,B,Z,Te,dt,Rt,Wt){return x.apply(this,arguments)}(P,z,re,B,Ut,le,Z),new w(P)}function Mo(){return Is.apply(this,arguments)}function Is(){return(Is=(0,ee.Z)(function*(){if((0,$e.ru)()||!(0,$e.zI)()||!(0,$e.hl)())return!1;try{return yield(0,$e.eu)()}catch{return!1}})).apply(this,arguments)}const rd="@firebase/analytics";!function sd(){(0,ce._registerComponent)(new Se.wA(mi,(B,{options:Z})=>rs(B.getProvider("app").getImmediate(),B.getProvider("installations-internal").getImmediate(),Z),"PUBLIC")),(0,ce._registerComponent)(new Se.wA("analytics-internal",function P(B){try{const Z=B.getProvider(mi).getImmediate();return{logEvent:(Te,dt,Rt)=>function Bd(P,B,Z,Te){P=(0,$e.m9)(P),function Oc(P,B,Z,Te,dt){return Jc.apply(this,arguments)}(En,O[P.app.options.appId],B,Z,Te).catch(dt=>Ht.error(dt))}(Z,Te,dt,Rt)}}catch(Z){throw si.create("interop-component-reg-failed",{reason:Z})}},"PRIVATE")),(0,ce.registerVersion)(rd,"0.10.0"),(0,ce.registerVersion)(rd,"0.10.0","esm2017")}();var Iu=j(4408),kc=j(7565);const Fc=new class Nc extends kc.v{}(class Ud extends Iu.o{constructor(B,Z){super(B,Z),this.scheduler=B,this.work=Z}schedule(B,Z=0){return Z>0?super.schedule(B,Z):(this.delay=Z,this.state=B,this.scheduler.flush(this),this)}execute(B,Z){return Z>0||this.closed?super.execute(B,Z):this._execute(B,Z)}requestAsyncId(B,Z,Te=0){return null!=Te&&Te>0||null==Te&&this.delay>0?super.requestAsyncId(B,Z,Te):(B.flush(this),0)}});var Bs=j(4986),od=j(8505),ol=j(5363),tu=j(9468);const xr=new _.GfV("7.5.0"),Sl="__angularfire_symbol__analyticsIsSupportedValue",Us="__angularfire_symbol__analyticsIsSupported",Ui="__angularfire_symbol__remoteConfigIsSupportedValue",Al="__angularfire_symbol__remoteConfigIsSupported",va="__angularfire_symbol__messagingIsSupportedValue",gs="__angularfire_symbol__messagingIsSupported";function xl(P,B,Z){if(B){if(1===B.length)return B[0];const Rt=B.filter(Wt=>Wt.app===Z);if(1===Rt.length)return Rt[0]}return Z.container.getProvider(P).getImmediate({optional:!0})}globalThis[Us]||(globalThis[Us]=Mo().then(P=>globalThis[Sl]=P).catch(()=>globalThis[Sl]=!1)),globalThis[gs]||(globalThis[gs]=Rc().then(P=>globalThis[va]=P).catch(()=>globalThis[va]=!1)),globalThis[Al]||(globalThis[Al]=uo().then(P=>globalThis[Ui]=P).catch(()=>globalThis[Ui]=!1));const Hr=(P,B)=>{const Z=B?[B]:(0,m.C6)(),Te=[];return Z.forEach(dt=>{dt.container.getProvider(P).instances.forEach(Wt=>{Te.includes(Wt)||Te.push(Wt)})}),Te};function ro(){}class Lc{constructor(B,Z=Fc){this.zone=B,this.delegate=Z}now(){return this.delegate.now()}schedule(B,Z,Te){const dt=this.zone;return this.delegate.schedule(function(Wt){dt.runGuarded(()=>{B.apply(this,[Wt])})},Z,Te)}}class gc{constructor(B){this.zone=B,this.task=null}call(B,Z){const Te=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ro,{},ro,ro)),Z.pipe((0,od.b)({next:Te,complete:Te,error:Te})).subscribe(B).add(Te)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Uo=(()=>{class P{constructor(Z){this.ngZone=Z,this.outsideAngular=Z.runOutsideAngular(()=>new Lc(Zone.current)),this.insideAngular=Z.run(()=>new Lc(Zone.current,Bs.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return P.\u0275fac=function(Z){return new(Z||P)(_.LFG(_.R0b))},P.\u0275prov=_.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})();function Pa(){const P=globalThis.\u0275AngularFireScheduler;if(!P)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return P}function nu(P){return P.pipe((0,ol.Q)(Pa().outsideAngular))}function Qo(P){return Pa(),function ru(P){return function(Z){return(Z=Z.lift(new gc(P.ngZone))).pipe((0,tu.R)(P.outsideAngular),(0,ol.Q)(P.insideAngular))}}(Pa())(P)}},2090:(In,Et,j)=>{"use strict";j.d(Et,{$s:()=>Ze,BH:()=>et,DV:()=>hr,Dv:()=>Dr,G6:()=>Fe,GJ:()=>cn,L:()=>ze,LL:()=>zt,Pz:()=>it,Sg:()=>Pt,UG:()=>Ne,UI:()=>tr,US:()=>Se,Wj:()=>pi,Wl:()=>St,Yr:()=>yt,ZB:()=>Ee,ZR:()=>nn,aH:()=>Y,b$:()=>gt,cI:()=>Ae,dS:()=>gi,eu:()=>Be,g5:()=>ee,gK:()=>Qr,gQ:()=>Gn,h$:()=>Me,hl:()=>Ve,hu:()=>m,jU:()=>De,lb:()=>Lr,m9:()=>Yt,ne:()=>qn,p$:()=>ae,pd:()=>wi,r3:()=>Cn,ru:()=>je,tV:()=>ye,uI:()=>ke,ug:()=>ur,vZ:()=>bn,w1:()=>ht,w9:()=>xn,xO:()=>Cr,xb:()=>_r,z$:()=>Ue,zI:()=>ft,zd:()=>di});const _={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},m=function(we,Ie){if(!we)throw ee(Ie)},ee=function(we){return new Error("Firebase Database ("+_.SDK_VERSION+") INTERNAL ASSERT FAILED: "+we)},ce=function(we){const Ie=[];let qe=0;for(let Ot=0;Ot<we.length;Ot++){let ut=we.charCodeAt(Ot);ut<128?Ie[qe++]=ut:ut<2048?(Ie[qe++]=ut>>6|192,Ie[qe++]=63&ut|128):55296==(64512&ut)&&Ot+1<we.length&&56320==(64512&we.charCodeAt(Ot+1))?(ut=65536+((1023&ut)<<10)+(1023&we.charCodeAt(++Ot)),Ie[qe++]=ut>>18|240,Ie[qe++]=ut>>12&63|128,Ie[qe++]=ut>>6&63|128,Ie[qe++]=63&ut|128):(Ie[qe++]=ut>>12|224,Ie[qe++]=ut>>6&63|128,Ie[qe++]=63&ut|128)}return Ie},Se={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(we,Ie){if(!Array.isArray(we))throw Error("encodeByteArray takes an array as a parameter");this.init_();const qe=Ie?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ot=[];for(let ut=0;ut<we.length;ut+=3){const un=we[ut],ot=ut+1<we.length,Ge=ot?we[ut+1]:0,ve=ut+2<we.length,rt=ve?we[ut+2]:0;let Ce=(15&Ge)<<2|rt>>6,Tt=63&rt;ve||(Tt=64,ot||(Ce=64)),Ot.push(qe[un>>2],qe[(3&un)<<4|Ge>>4],qe[Ce],qe[Tt])}return Ot.join("")},encodeString(we,Ie){return this.HAS_NATIVE_SUPPORT&&!Ie?btoa(we):this.encodeByteArray(ce(we),Ie)},decodeString(we,Ie){return this.HAS_NATIVE_SUPPORT&&!Ie?atob(we):function(we){const Ie=[];let qe=0,Ot=0;for(;qe<we.length;){const ut=we[qe++];if(ut<128)Ie[Ot++]=String.fromCharCode(ut);else if(ut>191&&ut<224){const un=we[qe++];Ie[Ot++]=String.fromCharCode((31&ut)<<6|63&un)}else if(ut>239&&ut<365){const ve=((7&ut)<<18|(63&we[qe++])<<12|(63&we[qe++])<<6|63&we[qe++])-65536;Ie[Ot++]=String.fromCharCode(55296+(ve>>10)),Ie[Ot++]=String.fromCharCode(56320+(1023&ve))}else{const un=we[qe++],ot=we[qe++];Ie[Ot++]=String.fromCharCode((15&ut)<<12|(63&un)<<6|63&ot)}}return Ie.join("")}(this.decodeStringToByteArray(we,Ie))},decodeStringToByteArray(we,Ie){this.init_();const qe=Ie?this.charToByteMapWebSafe_:this.charToByteMap_,Ot=[];for(let ut=0;ut<we.length;){const un=qe[we.charAt(ut++)],Ge=ut<we.length?qe[we.charAt(ut)]:0;++ut;const rt=ut<we.length?qe[we.charAt(ut)]:64;++ut;const he=ut<we.length?qe[we.charAt(ut)]:64;if(++ut,null==un||null==Ge||null==rt||null==he)throw new _e;Ot.push(un<<2|Ge>>4),64!==rt&&(Ot.push(Ge<<4&240|rt>>2),64!==he&&Ot.push(rt<<6&192|he))}return Ot},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let we=0;we<this.ENCODED_VALS.length;we++)this.byteToCharMap_[we]=this.ENCODED_VALS.charAt(we),this.charToByteMap_[this.byteToCharMap_[we]]=we,this.byteToCharMapWebSafe_[we]=this.ENCODED_VALS_WEBSAFE.charAt(we),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[we]]=we,we>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(we)]=we,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(we)]=we)}}};class _e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Me=function(we){const Ie=ce(we);return Se.encodeByteArray(Ie,!0)},ze=function(we){return Me(we).replace(/\./g,"")},ye=function(we){try{return Se.decodeString(we,!0)}catch(Ie){console.error("base64Decode failed: ",Ie)}return null};function ae(we){return Ee(void 0,we)}function Ee(we,Ie){if(!(Ie instanceof Object))return Ie;switch(Ie.constructor){case Date:return new Date(Ie.getTime());case Object:void 0===we&&(we={});break;case Array:we=[];break;default:return Ie}for(const qe in Ie)!Ie.hasOwnProperty(qe)||!Ke(qe)||(we[qe]=Ee(we[qe],Ie[qe]));return we}function Ke(we){return"__proto__"!==we}const Re=()=>{try{return function We(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const we=process.env.__FIREBASE_DEFAULTS__;return we?JSON.parse(we):void 0})()||(()=>{if(typeof document>"u")return;let we;try{we=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const Ie=we&&ye(we[1]);return Ie&&JSON.parse(Ie)})()}catch(we){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${we}`)}},Y=()=>{var we;return null===(we=Re())||void 0===we?void 0:we.config},it=we=>{var Ie;return null===(Ie=Re())||void 0===Ie?void 0:Ie[`_${we}`]};class et{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Ie,qe)=>{this.resolve=Ie,this.reject=qe})}wrapCallback(Ie){return(qe,Ot)=>{qe?this.reject(qe):this.resolve(Ot),"function"==typeof Ie&&(this.promise.catch(()=>{}),1===Ie.length?Ie(qe):Ie(qe,Ot))}}}function Pt(we,Ie){if(we.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ot=Ie||"demo-project",ut=we.iat||0,un=we.sub||we.user_id;if(!un)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ot=Object.assign({iss:`https://securetoken.google.com/${Ot}`,aud:Ot,iat:ut,exp:ut+3600,auth_time:ut,sub:un,user_id:un,firebase:{sign_in_provider:"custom",identities:{}}},we);return[ze(JSON.stringify({alg:"none",type:"JWT"})),ze(JSON.stringify(ot)),""].join(".")}function Ue(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ke(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ue())}function Ne(){var we;const Ie=null===(we=Re())||void 0===we?void 0:we.forceEnvironment;if("node"===Ie)return!0;if("browser"===Ie)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function De(){return"object"==typeof self&&self.self===self}function je(){const we="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof we&&void 0!==we.id}function gt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ht(){const we=Ue();return we.indexOf("MSIE ")>=0||we.indexOf("Trident/")>=0}function yt(){return!0===_.NODE_CLIENT||!0===_.NODE_ADMIN}function Fe(){return!Ne()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ve(){try{return"object"==typeof indexedDB}catch{return!1}}function Be(){return new Promise((we,Ie)=>{try{let qe=!0;const Ot="validate-browser-context-for-indexeddb-analytics-module",ut=self.indexedDB.open(Ot);ut.onsuccess=()=>{ut.result.close(),qe||self.indexedDB.deleteDatabase(Ot),we(!0)},ut.onupgradeneeded=()=>{qe=!1},ut.onerror=()=>{var un;Ie((null===(un=ut.error)||void 0===un?void 0:un.message)||"")}}catch(qe){Ie(qe)}})}function ft(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class nn extends Error{constructor(Ie,qe,Ot){super(qe),this.code=Ie,this.customData=Ot,this.name="FirebaseError",Object.setPrototypeOf(this,nn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zt.prototype.create)}}class zt{constructor(Ie,qe,Ot){this.service=Ie,this.serviceName=qe,this.errors=Ot}create(Ie,...qe){const Ot=qe[0]||{},ut=`${this.service}/${Ie}`,un=this.errors[Ie],ot=un?function Dn(we,Ie){return we.replace(kt,(qe,Ot)=>{const ut=Ie[Ot];return null!=ut?String(ut):`<${Ot}?>`})}(un,Ot):"Error";return new nn(ut,`${this.serviceName}: ${ot} (${ut}).`,Ot)}}const kt=/\{\$([^}]+)}/g;function Ae(we){return JSON.parse(we)}function St(we){return JSON.stringify(we)}const gn=function(we){let Ie={},qe={},Ot={},ut="";try{const un=we.split(".");Ie=Ae(ye(un[0])||""),qe=Ae(ye(un[1])||""),ut=un[2],Ot=qe.d||{},delete qe.d}catch{}return{header:Ie,claims:qe,data:Ot,signature:ut}},xn=function(we){const qe=gn(we).claims;return!!qe&&"object"==typeof qe&&qe.hasOwnProperty("iat")},cn=function(we){const Ie=gn(we).claims;return"object"==typeof Ie&&!0===Ie.admin};function Cn(we,Ie){return Object.prototype.hasOwnProperty.call(we,Ie)}function hr(we,Ie){if(Object.prototype.hasOwnProperty.call(we,Ie))return we[Ie]}function _r(we){for(const Ie in we)if(Object.prototype.hasOwnProperty.call(we,Ie))return!1;return!0}function tr(we,Ie,qe){const Ot={};for(const ut in we)Object.prototype.hasOwnProperty.call(we,ut)&&(Ot[ut]=Ie.call(qe,we[ut],ut,we));return Ot}function bn(we,Ie){if(we===Ie)return!0;const qe=Object.keys(we),Ot=Object.keys(Ie);for(const ut of qe){if(!Ot.includes(ut))return!1;const un=we[ut],ot=Ie[ut];if(zn(un)&&zn(ot)){if(!bn(un,ot))return!1}else if(un!==ot)return!1}for(const ut of Ot)if(!qe.includes(ut))return!1;return!0}function zn(we){return null!==we&&"object"==typeof we}function Cr(we){const Ie=[];for(const[qe,Ot]of Object.entries(we))Array.isArray(Ot)?Ot.forEach(ut=>{Ie.push(encodeURIComponent(qe)+"="+encodeURIComponent(ut))}):Ie.push(encodeURIComponent(qe)+"="+encodeURIComponent(Ot));return Ie.length?"&"+Ie.join("&"):""}function di(we){const Ie={};return we.replace(/^\?/,"").split("&").forEach(Ot=>{if(Ot){const[ut,un]=Ot.split("=");Ie[decodeURIComponent(ut)]=decodeURIComponent(un)}}),Ie}function wi(we){const Ie=we.indexOf("?");if(!Ie)return"";const qe=we.indexOf("#",Ie);return we.substring(Ie,qe>0?qe:void 0)}class Gn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Ie=1;Ie<this.blockSize;++Ie)this.pad_[Ie]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Ie,qe){qe||(qe=0);const Ot=this.W_;if("string"==typeof Ie)for(let he=0;he<16;he++)Ot[he]=Ie.charCodeAt(qe)<<24|Ie.charCodeAt(qe+1)<<16|Ie.charCodeAt(qe+2)<<8|Ie.charCodeAt(qe+3),qe+=4;else for(let he=0;he<16;he++)Ot[he]=Ie[qe]<<24|Ie[qe+1]<<16|Ie[qe+2]<<8|Ie[qe+3],qe+=4;for(let he=16;he<80;he++){const Ce=Ot[he-3]^Ot[he-8]^Ot[he-14]^Ot[he-16];Ot[he]=4294967295&(Ce<<1|Ce>>>31)}let rt,Nt,ut=this.chain_[0],un=this.chain_[1],ot=this.chain_[2],Ge=this.chain_[3],ve=this.chain_[4];for(let he=0;he<80;he++){he<40?he<20?(rt=Ge^un&(ot^Ge),Nt=1518500249):(rt=un^ot^Ge,Nt=1859775393):he<60?(rt=un&ot|Ge&(un|ot),Nt=2400959708):(rt=un^ot^Ge,Nt=3395469782);const Ce=(ut<<5|ut>>>27)+rt+ve+Nt+Ot[he]&4294967295;ve=Ge,Ge=ot,ot=4294967295&(un<<30|un>>>2),un=ut,ut=Ce}this.chain_[0]=this.chain_[0]+ut&4294967295,this.chain_[1]=this.chain_[1]+un&4294967295,this.chain_[2]=this.chain_[2]+ot&4294967295,this.chain_[3]=this.chain_[3]+Ge&4294967295,this.chain_[4]=this.chain_[4]+ve&4294967295}update(Ie,qe){if(null==Ie)return;void 0===qe&&(qe=Ie.length);const Ot=qe-this.blockSize;let ut=0;const un=this.buf_;let ot=this.inbuf_;for(;ut<qe;){if(0===ot)for(;ut<=Ot;)this.compress_(Ie,ut),ut+=this.blockSize;if("string"==typeof Ie){for(;ut<qe;)if(un[ot]=Ie.charCodeAt(ut),++ot,++ut,ot===this.blockSize){this.compress_(un),ot=0;break}}else for(;ut<qe;)if(un[ot]=Ie[ut],++ot,++ut,ot===this.blockSize){this.compress_(un),ot=0;break}}this.inbuf_=ot,this.total_+=qe}digest(){const Ie=[];let qe=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ut=this.blockSize-1;ut>=56;ut--)this.buf_[ut]=255&qe,qe/=256;this.compress_(this.buf_);let Ot=0;for(let ut=0;ut<5;ut++)for(let un=24;un>=0;un-=8)Ie[Ot]=this.chain_[ut]>>un&255,++Ot;return Ie}}function qn(we,Ie){const qe=new ln(we,Ie);return qe.subscribe.bind(qe)}class ln{constructor(Ie,qe){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=qe,this.task.then(()=>{Ie(this)}).catch(Ot=>{this.error(Ot)})}next(Ie){this.forEachObserver(qe=>{qe.next(Ie)})}error(Ie){this.forEachObserver(qe=>{qe.error(Ie)}),this.close(Ie)}complete(){this.forEachObserver(Ie=>{Ie.complete()}),this.close()}subscribe(Ie,qe,Ot){let ut;if(void 0===Ie&&void 0===qe&&void 0===Ot)throw new Error("Missing Observer.");ut=function on(we,Ie){if("object"!=typeof we||null===we)return!1;for(const qe of Ie)if(qe in we&&"function"==typeof we[qe])return!0;return!1}(Ie,["next","error","complete"])?Ie:{next:Ie,error:qe,complete:Ot},void 0===ut.next&&(ut.next=Jr),void 0===ut.error&&(ut.error=Jr),void 0===ut.complete&&(ut.complete=Jr);const un=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ut.error(this.finalError):ut.complete()}catch{}}),this.observers.push(ut),un}unsubscribeOne(Ie){void 0===this.observers||void 0===this.observers[Ie]||(delete this.observers[Ie],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Ie){if(!this.finalized)for(let qe=0;qe<this.observers.length;qe++)this.sendOne(qe,Ie)}sendOne(Ie,qe){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Ie])try{qe(this.observers[Ie])}catch(Ot){typeof console<"u"&&console.error&&console.error(Ot)}})}close(Ie){this.finalized||(this.finalized=!0,void 0!==Ie&&(this.finalError=Ie),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Jr(){}const Dr=function(we,Ie,qe,Ot){let ut;if(Ot<Ie?ut="at least "+Ie:Ot>qe&&(ut=0===qe?"none":"no more than "+qe),ut)throw new Error(we+" failed: Was called with "+Ot+(1===Ot?" argument.":" arguments.")+" Expects "+ut+".")};function Qr(we,Ie){return`${we} failed: ${Ie} argument `}function pi(we,Ie,qe,Ot){if((!Ot||qe)&&"function"!=typeof qe)throw new Error(Qr(we,Ie)+"must be a valid function.")}function Lr(we,Ie,qe,Ot){if((!Ot||qe)&&("object"!=typeof qe||null===qe))throw new Error(Qr(we,Ie)+"must be a valid context object.")}const gi=function(we){const Ie=[];let qe=0;for(let Ot=0;Ot<we.length;Ot++){let ut=we.charCodeAt(Ot);if(ut>=55296&&ut<=56319){const un=ut-55296;Ot++,m(Ot<we.length,"Surrogate pair missing trail surrogate."),ut=65536+(un<<10)+(we.charCodeAt(Ot)-56320)}ut<128?Ie[qe++]=ut:ut<2048?(Ie[qe++]=ut>>6|192,Ie[qe++]=63&ut|128):ut<65536?(Ie[qe++]=ut>>12|224,Ie[qe++]=ut>>6&63|128,Ie[qe++]=63&ut|128):(Ie[qe++]=ut>>18|240,Ie[qe++]=ut>>12&63|128,Ie[qe++]=ut>>6&63|128,Ie[qe++]=63&ut|128)}return Ie},ur=function(we){let Ie=0;for(let qe=0;qe<we.length;qe++){const Ot=we.charCodeAt(qe);Ot<128?Ie++:Ot<2048?Ie+=2:Ot>=55296&&Ot<=56319?(Ie+=4,qe++):Ie+=3}return Ie},yr=1e3,Ai=2,mr=144e5,Kt=.5;function Ze(we,Ie=yr,qe=Ai){const Ot=Ie*Math.pow(qe,we),ut=Math.round(Kt*Ot*(Math.random()-.5)*2);return Math.min(mr,Ot+ut)}function Yt(we){return we&&we._delegate?we._delegate:we}},9613:(In,Et,j)=>{"use strict";j.d(Et,{c:()=>At});var _=j(3577),m=j(3457);let ee;const $e=xe=>xe.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Se=xe=>(void 0===ee&&(ee=void 0===xe.style.animationName&&void 0!==xe.style.webkitAnimationName?"-webkit-":""),ee),_e=(xe,Re,de)=>{const _t=Re.startsWith("animation")?Se(xe):"";xe.style.setProperty(_t+Re,de)},Me=(xe,Re)=>{const de=Re.startsWith("animation")?Se(xe):"";xe.style.removeProperty(de+Re)},ae=[],ct=(xe=[],Re)=>{if(void 0!==Re){const de=Array.isArray(Re)?Re:[Re];return[...xe,...de]}return xe},At=xe=>{let Re,de,_t,Y,it,et,De,Ve,Be,ft,wt,kt,Ae,Pt=[],Ue=[],ke=[],Ne=!1,je={},gt=[],Dt=[],ht={},Mt=0,yt=!1,Fe=!1,nn=!0,zt=!1,Dn=!0,St=!1;const gn=xe,On=[],Yn=[],xn=[],cn=[],Cn=[],hr=[],_r=[],tr=[],bn=[],zn=[],yi="function"==typeof AnimationEffect||void 0!==m.w&&"function"==typeof m.w.AnimationEffect,Cr="function"==typeof Element&&"function"==typeof Element.prototype.animate&&yi,wi=()=>zn,on=(me,Je)=>((null!=Je&&Je.oneTimeCallback?Yn:On).push({c:me,o:Je}),Ae),Dr=()=>{if(Cr)zn.forEach(me=>{me.cancel()}),zn.length=0;else{const me=xn.slice();(0,_.r)(()=>{me.forEach(Je=>{Me(Je,"animation-name"),Me(Je,"animation-duration"),Me(Je,"animation-timing-function"),Me(Je,"animation-iteration-count"),Me(Je,"animation-delay"),Me(Je,"animation-play-state"),Me(Je,"animation-fill-mode"),Me(Je,"animation-direction")})})}},Qr=()=>{Cn.forEach(me=>{null!=me&&me.parentNode&&me.parentNode.removeChild(me)}),Cn.length=0},en=()=>void 0!==it?it:De?De.getFill():"both",Yt=()=>void 0!==Be?Be:void 0!==et?et:De?De.getDirection():"normal",we=()=>yt?"linear":void 0!==_t?_t:De?De.getEasing():"linear",Ie=()=>Fe?0:void 0!==ft?ft:void 0!==de?de:De?De.getDuration():0,qe=()=>void 0!==Y?Y:De?De.getIterations():1,Ot=()=>void 0!==wt?wt:void 0!==Re?Re:De?De.getDelay():0,Ct=()=>{0!==Mt&&(Mt--,0===Mt&&((()=>{cr(),tr.forEach(Lt=>Lt()),bn.forEach(Lt=>Lt());const me=nn?1:0,Je=gt,Qe=Dt,Vt=ht;xn.forEach(Lt=>{const Xt=Lt.classList;Je.forEach(an=>Xt.add(an)),Qe.forEach(an=>Xt.remove(an));for(const an in Vt)Vt.hasOwnProperty(an)&&_e(Lt,an,Vt[an])}),On.forEach(Lt=>Lt.c(me,Ae)),Yn.forEach(Lt=>Lt.c(me,Ae)),Yn.length=0,Dn=!0,nn&&(zt=!0),nn=!0})(),De&&De.animationFinish()))},Gt=(me=!0)=>{Qr();const Je=(xe=>(xe.forEach(Re=>{for(const de in Re)if(Re.hasOwnProperty(de)){const _t=Re[de];if("easing"===de)Re["animation-timing-function"]=_t,delete Re[de];else{const Y=$e(de);Y!==de&&(Re[Y]=_t,delete Re[de])}}}),xe))(Pt);xn.forEach(Qe=>{if(Je.length>0){const Vt=((xe=[])=>xe.map(Re=>{const de=Re.offset,_t=[];for(const Y in Re)Re.hasOwnProperty(Y)&&"offset"!==Y&&_t.push(`${Y}: ${Re[Y]};`);return`${100*de}% { ${_t.join(" ")} }`}).join(" "))(Je);kt=void 0!==xe?xe:(xe=>{let Re=ae.indexOf(xe);return Re<0&&(Re=ae.push(xe)-1),`ion-animation-${Re}`})(Vt);const Lt=((xe,Re,de)=>{var _t;const Y=(xe=>{const Re=void 0!==xe.getRootNode?xe.getRootNode():xe;return Re.head||Re})(de),it=Se(de),et=Y.querySelector("#"+xe);if(et)return et;const Pt=(null!==(_t=de.ownerDocument)&&void 0!==_t?_t:document).createElement("style");return Pt.id=xe,Pt.textContent=`@${it}keyframes ${xe} { ${Re} } @${it}keyframes ${xe}-alt { ${Re} }`,Y.appendChild(Pt),Pt})(kt,Vt,Qe);Cn.push(Lt),_e(Qe,"animation-duration",`${Ie()}ms`),_e(Qe,"animation-timing-function",we()),_e(Qe,"animation-delay",`${Ot()}ms`),_e(Qe,"animation-fill-mode",en()),_e(Qe,"animation-direction",Yt());const Xt=qe()===1/0?"infinite":qe().toString();_e(Qe,"animation-iteration-count",Xt),_e(Qe,"animation-play-state","paused"),me&&_e(Qe,"animation-name",`${Lt.id}-alt`),(0,_.r)(()=>{_e(Qe,"animation-name",Lt.id||null)})}})},kn=(me=!0)=>{(()=>{hr.forEach(Vt=>Vt()),_r.forEach(Vt=>Vt());const me=Ue,Je=ke,Qe=je;xn.forEach(Vt=>{const Lt=Vt.classList;me.forEach(Xt=>Lt.add(Xt)),Je.forEach(Xt=>Lt.remove(Xt));for(const Xt in Qe)Qe.hasOwnProperty(Xt)&&_e(Vt,Xt,Qe[Xt])})})(),Pt.length>0&&(Cr?(xn.forEach(me=>{const Je=me.animate(Pt,{id:gn,delay:Ot(),duration:Ie(),easing:we(),iterations:qe(),fill:en(),direction:Yt()});Je.pause(),zn.push(Je)}),zn.length>0&&(zn[0].onfinish=()=>{Ct()})):Gt(me)),Ne=!0},wn=me=>{if(me=Math.min(Math.max(me,0),.9999),Cr)zn.forEach(Je=>{Je.currentTime=Je.effect.getComputedTiming().delay+Ie()*me,Je.pause()});else{const Je=`-${Ie()*me}ms`;xn.forEach(Qe=>{Pt.length>0&&(_e(Qe,"animation-delay",Je),_e(Qe,"animation-play-state","paused"))})}},Qn=me=>{zn.forEach(Je=>{Je.effect.updateTiming({delay:Ot(),duration:Ie(),easing:we(),iterations:qe(),fill:en(),direction:Yt()})}),void 0!==me&&wn(me)},Jn=(me=!0,Je)=>{(0,_.r)(()=>{xn.forEach(Qe=>{_e(Qe,"animation-name",kt||null),_e(Qe,"animation-duration",`${Ie()}ms`),_e(Qe,"animation-timing-function",we()),_e(Qe,"animation-delay",void 0!==Je?`-${Je*Ie()}ms`:`${Ot()}ms`),_e(Qe,"animation-fill-mode",en()||null),_e(Qe,"animation-direction",Yt()||null);const Vt=qe()===1/0?"infinite":qe().toString();_e(Qe,"animation-iteration-count",Vt),me&&_e(Qe,"animation-name",`${kt}-alt`),(0,_.r)(()=>{_e(Qe,"animation-name",kt||null)})})})},Wn=(me=!1,Je=!0,Qe)=>(me&&cn.forEach(Vt=>{Vt.update(me,Je,Qe)}),Cr?Qn(Qe):Jn(Je,Qe),Ae),Vi=()=>{Ne&&(Cr?zn.forEach(me=>{me.pause()}):xn.forEach(me=>{_e(me,"animation-play-state","paused")}),St=!0)},An=()=>{Ve=void 0,Ct()},cr=()=>{Ve&&clearTimeout(Ve)},Li=me=>new Promise(Je=>{null!=me&&me.sync&&(Fe=!0,on(()=>Fe=!1,{oneTimeCallback:!0})),Ne||kn(),zt&&(Cr?(wn(0),Qn()):Jn(),zt=!1),Dn&&(Mt=cn.length+1,Dn=!1),on(()=>Je(),{oneTimeCallback:!0}),cn.forEach(Qe=>{Qe.play()}),Cr?(zn.forEach(me=>{me.play()}),(0===Pt.length||0===xn.length)&&Ct()):(()=>{if(cr(),(0,_.r)(()=>{xn.forEach(me=>{Pt.length>0&&_e(me,"animation-play-state","running")})}),0===Pt.length||0===xn.length)Ct();else{const me=Ot()||0,Je=Ie()||0,Qe=qe()||1;isFinite(Qe)&&(Ve=setTimeout(An,me+Je*Qe+100)),((xe,Re)=>{let de;const _t={passive:!0},it=et=>{xe===et.target&&(de&&de(),cr(),(0,_.r)(()=>{xn.forEach(me=>{Me(me,"animation-duration"),Me(me,"animation-delay"),Me(me,"animation-play-state")}),(0,_.r)(Ct)}))};xe&&(xe.addEventListener("webkitAnimationEnd",it,_t),xe.addEventListener("animationend",it,_t),de=()=>{xe.removeEventListener("webkitAnimationEnd",it,_t),xe.removeEventListener("animationend",it,_t)})})(xn[0])}})(),St=!1}),se=(me,Je)=>{const Qe=Pt[0];return void 0===Qe||void 0!==Qe.offset&&0!==Qe.offset?Pt=[{offset:0,[me]:Je},...Pt]:Qe[me]=Je,Ae};return Ae={parentAnimation:De,elements:xn,childAnimations:cn,id:gn,animationFinish:Ct,from:se,to:(me,Je)=>{const Qe=Pt[Pt.length-1];return void 0===Qe||void 0!==Qe.offset&&1!==Qe.offset?Pt=[...Pt,{offset:1,[me]:Je}]:Qe[me]=Je,Ae},fromTo:(me,Je,Qe)=>se(me,Je).to(me,Qe),parent:me=>(De=me,Ae),play:Li,pause:()=>(cn.forEach(me=>{me.pause()}),Vi(),Ae),stop:()=>{cn.forEach(me=>{me.stop()}),Ne&&(Dr(),Ne=!1),yt=!1,Fe=!1,Dn=!0,Be=void 0,ft=void 0,wt=void 0,Mt=0,zt=!1,nn=!0,St=!1},destroy:me=>(cn.forEach(Je=>{Je.destroy(me)}),(me=>{Dr(),me&&Qr()})(me),xn.length=0,cn.length=0,Pt.length=0,On.length=0,Yn.length=0,Ne=!1,Dn=!0,Ae),keyframes:me=>{const Je=Pt!==me;return Pt=me,Je&&(me=>{Cr?wi().forEach(Je=>{if(Je.effect.setKeyframes)Je.effect.setKeyframes(me);else{const Qe=new KeyframeEffect(Je.effect.target,me,Je.effect.getTiming());Je.effect=Qe}}):Gt()})(Pt),Ae},addAnimation:me=>{if(null!=me)if(Array.isArray(me))for(const Je of me)Je.parent(Ae),cn.push(Je);else me.parent(Ae),cn.push(me);return Ae},addElement:me=>{if(null!=me)if(1===me.nodeType)xn.push(me);else if(me.length>=0)for(let Je=0;Je<me.length;Je++)xn.push(me[Je]);else console.error("Invalid addElement value");return Ae},update:Wn,fill:me=>(it=me,Wn(!0),Ae),direction:me=>(et=me,Wn(!0),Ae),iterations:me=>(Y=me,Wn(!0),Ae),duration:me=>(!Cr&&0===me&&(me=1),de=me,Wn(!0),Ae),easing:me=>(_t=me,Wn(!0),Ae),delay:me=>(Re=me,Wn(!0),Ae),getWebAnimations:wi,getKeyframes:()=>Pt,getFill:en,getDirection:Yt,getDelay:Ot,getIterations:qe,getEasing:we,getDuration:Ie,afterAddRead:me=>(tr.push(me),Ae),afterAddWrite:me=>(bn.push(me),Ae),afterClearStyles:(me=[])=>{for(const Je of me)ht[Je]="";return Ae},afterStyles:(me={})=>(ht=me,Ae),afterRemoveClass:me=>(Dt=ct(Dt,me),Ae),afterAddClass:me=>(gt=ct(gt,me),Ae),beforeAddRead:me=>(hr.push(me),Ae),beforeAddWrite:me=>(_r.push(me),Ae),beforeClearStyles:(me=[])=>{for(const Je of me)je[Je]="";return Ae},beforeStyles:(me={})=>(je=me,Ae),beforeRemoveClass:me=>(ke=ct(ke,me),Ae),beforeAddClass:me=>(Ue=ct(Ue,me),Ae),onFinish:on,isRunning:()=>0!==Mt&&!St,progressStart:(me=!1,Je)=>(cn.forEach(Qe=>{Qe.progressStart(me,Je)}),Vi(),yt=me,Ne||kn(),Wn(!1,!0,Je),Ae),progressStep:me=>(cn.forEach(Je=>{Je.progressStep(me)}),wn(me),Ae),progressEnd:(me,Je,Qe)=>(yt=!1,cn.forEach(Vt=>{Vt.progressEnd(me,Je,Qe)}),void 0!==Qe&&(ft=Qe),zt=!1,nn=!0,0===me?(Be="reverse"===Yt()?"normal":"reverse","reverse"===Be&&(nn=!1),Cr?(Wn(),wn(1-Je)):(wt=(1-Je)*Ie()*-1,Wn(!1,!1))):1===me&&(Cr?(Wn(),wn(Je)):(wt=Je*Ie()*-1,Wn(!1,!1))),void 0!==me&&(on(()=>{ft=void 0,Be=void 0,wt=void 0},{oneTimeCallback:!0}),De||Li()),Ae)}}},3982:(In,Et,j)=>{"use strict";j.d(Et,{E:()=>ye,a:()=>_,s:()=>Me});const _=ae=>{try{if(ae instanceof _e)return ae.value;if(!ce()||"string"!=typeof ae||""===ae)return ae;if(ae.includes("onload="))return"";const Ee=document.createDocumentFragment(),Ke=document.createElement("div");Ee.appendChild(Ke),Ke.innerHTML=ae,Se.forEach(xe=>{const Re=Ee.querySelectorAll(xe);for(let de=Re.length-1;de>=0;de--){const _t=Re[de];_t.parentNode?_t.parentNode.removeChild(_t):Ee.removeChild(_t);const Y=ee(_t);for(let it=0;it<Y.length;it++)m(Y[it])}});const We=ee(Ee);for(let xe=0;xe<We.length;xe++)m(We[xe]);const ct=document.createElement("div");ct.appendChild(Ee);const At=ct.querySelector("div");return null!==At?At.innerHTML:ct.innerHTML}catch(Ee){return console.error(Ee),""}},m=ae=>{if(ae.nodeType&&1!==ae.nodeType)return;if(typeof NamedNodeMap<"u"&&!(ae.attributes instanceof NamedNodeMap))return void ae.remove();for(let Ke=ae.attributes.length-1;Ke>=0;Ke--){const We=ae.attributes.item(Ke),ct=We.name;if(!$e.includes(ct.toLowerCase())){ae.removeAttribute(ct);continue}const At=We.value,xe=ae[ct];(null!=At&&At.toLowerCase().includes("javascript:")||null!=xe&&xe.toLowerCase().includes("javascript:"))&&ae.removeAttribute(ct)}const Ee=ee(ae);for(let Ke=0;Ke<Ee.length;Ke++)m(Ee[Ke])},ee=ae=>null!=ae.children?ae.children:ae.childNodes,ce=()=>{var ae;const Ee=window,Ke=null===(ae=null==Ee?void 0:Ee.Ionic)||void 0===ae?void 0:ae.config;return!Ke||(Ke.get?Ke.get("sanitizerEnabled",!0):!0===Ke.sanitizerEnabled||void 0===Ke.sanitizerEnabled)},$e=["class","id","href","src","name","slot"],Se=["script","style","iframe","meta","link","object","embed"];class _e{constructor(Ee){this.value=Ee}}const Me=ae=>{const Ee=window,Ke=Ee.Ionic;if(!Ke||!Ke.config||"Object"===Ke.config.constructor.name)return Ee.Ionic=Ee.Ionic||{},Ee.Ionic.config=Object.assign(Object.assign({},Ee.Ionic.config),ae),Ee.Ionic.config},ye=!1},6782:(In,Et,j)=>{"use strict";j.d(Et,{C:()=>$e,a:()=>ee,d:()=>ce});var _=j(5861),m=j(3577);const ee=function(){var Se=(0,_.Z)(function*(_e,Me,ze,ye,ae,Ee){var Ke;if(_e)return _e.attachViewToDom(Me,ze,ae,ye);if(!(Ee||"string"==typeof ze||ze instanceof HTMLElement))throw new Error("framework delegate is missing");const We="string"==typeof ze?null===(Ke=Me.ownerDocument)||void 0===Ke?void 0:Ke.createElement(ze):ze;return ye&&ye.forEach(ct=>We.classList.add(ct)),ae&&Object.assign(We,ae),Me.appendChild(We),yield new Promise(ct=>(0,m.c)(We,ct)),We});return function(Me,ze,ye,ae,Ee,Ke){return Se.apply(this,arguments)}}(),ce=(Se,_e)=>{if(_e){if(Se)return Se.removeViewFromDom(_e.parentElement,_e);_e.remove()}return Promise.resolve()},$e=()=>{let Se,_e;return{attachViewToDom:function(){var ye=(0,_.Z)(function*(ae,Ee,Ke={},We=[]){var ct,At;if(Se=ae,Ee){const Re="string"==typeof Ee?null===(ct=Se.ownerDocument)||void 0===ct?void 0:ct.createElement(Ee):Ee;We.forEach(de=>Re.classList.add(de)),Object.assign(Re,Ke),Se.appendChild(Re),yield new Promise(de=>(0,m.c)(Re,de))}else if(Se.children.length>0&&("ION-MODAL"===Se.tagName||"ION-POPOVER"===Se.tagName)&&!Se.children[0].classList.contains("ion-delegate-host")){const de=null===(At=Se.ownerDocument)||void 0===At?void 0:At.createElement("div");de.classList.add("ion-delegate-host"),We.forEach(_t=>de.classList.add(_t)),de.append(...Se.children),Se.appendChild(de)}const xe=document.querySelector("ion-app")||document.body;return _e=document.createComment("ionic teleport"),Se.parentNode.insertBefore(_e,Se),xe.appendChild(Se),Se});return function(Ee,Ke){return ye.apply(this,arguments)}}(),removeViewFromDom:()=>(Se&&_e&&(_e.parentNode.insertBefore(Se,_e),_e.remove()),Promise.resolve())}}},4349:(In,Et,j)=>{"use strict";j.d(Et,{G:()=>$e});class m{constructor(_e,Me,ze,ye,ae){this.id=Me,this.name=ze,this.disableScroll=ae,this.priority=1e6*ye+Me,this.ctrl=_e}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const _e=this.ctrl.capture(this.name,this.id,this.priority);return _e&&this.disableScroll&&this.ctrl.disableScroll(this.id),_e}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class ee{constructor(_e,Me,ze,ye){this.id=Me,this.disable=ze,this.disableScroll=ye,this.ctrl=_e}block(){if(this.ctrl){if(this.disable)for(const _e of this.disable)this.ctrl.disableGesture(_e,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const _e of this.disable)this.ctrl.enableGesture(_e,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const ce="backdrop-no-scroll",$e=new class _{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(_e){var Me;return new m(this,this.newID(),_e.name,null!==(Me=_e.priority)&&void 0!==Me?Me:0,!!_e.disableScroll)}createBlocker(_e={}){return new ee(this,this.newID(),_e.disable,!!_e.disableScroll)}start(_e,Me,ze){return this.canStart(_e)?(this.requestedStart.set(Me,ze),!0):(this.requestedStart.delete(Me),!1)}capture(_e,Me,ze){if(!this.start(_e,Me,ze))return!1;const ye=this.requestedStart;let ae=-1e4;if(ye.forEach(Ee=>{ae=Math.max(ae,Ee)}),ae===ze){this.capturedId=Me,ye.clear();const Ee=new CustomEvent("ionGestureCaptured",{detail:{gestureName:_e}});return document.dispatchEvent(Ee),!0}return ye.delete(Me),!1}release(_e){this.requestedStart.delete(_e),this.capturedId===_e&&(this.capturedId=void 0)}disableGesture(_e,Me){let ze=this.disabledGestures.get(_e);void 0===ze&&(ze=new Set,this.disabledGestures.set(_e,ze)),ze.add(Me)}enableGesture(_e,Me){const ze=this.disabledGestures.get(_e);void 0!==ze&&ze.delete(Me)}disableScroll(_e){this.disabledScroll.add(_e),1===this.disabledScroll.size&&document.body.classList.add(ce)}enableScroll(_e){this.disabledScroll.delete(_e),0===this.disabledScroll.size&&document.body.classList.remove(ce)}canStart(_e){return!(void 0!==this.capturedId||this.isDisabled(_e))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(_e){const Me=this.disabledGestures.get(_e);return!!(Me&&Me.size>0)}newID(){return this.gestureId++,this.gestureId}}},7593:(In,Et,j)=>{"use strict";j.r(Et),j.d(Et,{MENU_BACK_BUTTON_PRIORITY:()=>$e,OVERLAY_BACK_BUTTON_PRIORITY:()=>ce,blockHardwareBackButton:()=>m,startHardwareBackButton:()=>ee});var _=j(5861);const m=()=>{document.addEventListener("backbutton",()=>{})},ee=()=>{const Se=document;let _e=!1;Se.addEventListener("backbutton",()=>{if(_e)return;let Me=0,ze=[];const ye=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(Ke,We){ze.push({priority:Ke,handler:We,id:Me++})}}});Se.dispatchEvent(ye);const ae=function(){var Ke=(0,_.Z)(function*(We){try{if(null!=We&&We.handler){const ct=We.handler(Ee);null!=ct&&(yield ct)}}catch(ct){console.error(ct)}});return function(ct){return Ke.apply(this,arguments)}}(),Ee=()=>{if(ze.length>0){let Ke={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};ze.forEach(We=>{We.priority>=Ke.priority&&(Ke=We)}),_e=!0,ze=ze.filter(We=>We.id!==Ke.id),ae(Ke).then(()=>_e=!1)}};Ee()})},ce=100,$e=99},3577:(In,Et,j)=>{"use strict";j.d(Et,{a:()=>Me,b:()=>ze,c:()=>ee,d:()=>At,e:()=>ct,f:()=>We,g:()=>ye,h:()=>Ke,i:()=>_e,j:()=>it,k:()=>$e,l:()=>xe,m:()=>ce,n:()=>Ee,o:()=>Re,p:()=>_t,q:()=>Y,r:()=>ae,s:()=>Pt,t:()=>_,u:()=>et,v:()=>de});const _=(Ue,ke=0)=>new Promise(Ne=>{m(Ue,ke,Ne)}),m=(Ue,ke=0,Ne)=>{let De,je;const gt={passive:!0},ht=()=>{De&&De()},Mt=yt=>{(void 0===yt||Ue===yt.target)&&(ht(),Ne(yt))};return Ue&&(Ue.addEventListener("webkitTransitionEnd",Mt,gt),Ue.addEventListener("transitionend",Mt,gt),je=setTimeout(Mt,ke+500),De=()=>{je&&(clearTimeout(je),je=void 0),Ue.removeEventListener("webkitTransitionEnd",Mt,gt),Ue.removeEventListener("transitionend",Mt,gt)}),ht},ee=(Ue,ke)=>{Ue.componentOnReady?Ue.componentOnReady().then(Ne=>ke(Ne)):ae(()=>ke(Ue))},ce=Ue=>void 0!==Ue.componentOnReady,$e=(Ue,ke=[])=>{const Ne={};return ke.forEach(De=>{Ue.hasAttribute(De)&&(null!==Ue.getAttribute(De)&&(Ne[De]=Ue.getAttribute(De)),Ue.removeAttribute(De))}),Ne},Se=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],_e=(Ue,ke)=>{let Ne=Se;return ke&&ke.length>0&&(Ne=Ne.filter(De=>!ke.includes(De))),$e(Ue,Ne)},Me=(Ue,ke,Ne,De)=>{var je;if(typeof window<"u"){const gt=window,Dt=null===(je=null==gt?void 0:gt.Ionic)||void 0===je?void 0:je.config;if(Dt){const ht=Dt.get("_ael");if(ht)return ht(Ue,ke,Ne,De);if(Dt._ael)return Dt._ael(Ue,ke,Ne,De)}}return Ue.addEventListener(ke,Ne,De)},ze=(Ue,ke,Ne,De)=>{var je;if(typeof window<"u"){const gt=window,Dt=null===(je=null==gt?void 0:gt.Ionic)||void 0===je?void 0:je.config;if(Dt){const ht=Dt.get("_rel");if(ht)return ht(Ue,ke,Ne,De);if(Dt._rel)return Dt._rel(Ue,ke,Ne,De)}}return Ue.removeEventListener(ke,Ne,De)},ye=(Ue,ke=Ue)=>Ue.shadowRoot||ke,ae=Ue=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Ue):"function"==typeof requestAnimationFrame?requestAnimationFrame(Ue):setTimeout(Ue),Ee=Ue=>!!Ue.shadowRoot&&!!Ue.attachShadow,Ke=Ue=>{const ke=Ue.closest("ion-item");return ke?ke.querySelector("ion-label"):null},We=Ue=>{if(Ue.focus(),Ue.classList.contains("ion-focusable")){const ke=Ue.closest("ion-app");ke&&ke.setFocus([Ue])}},ct=(Ue,ke)=>{let Ne;const De=Ue.getAttribute("aria-labelledby"),je=Ue.id;let gt=null!==De&&""!==De.trim()?De:ke+"-lbl",Dt=null!==De&&""!==De.trim()?document.getElementById(De):Ke(Ue);return Dt?(null===De&&(Dt.id=gt),Ne=Dt.textContent,Dt.setAttribute("aria-hidden","true")):""!==je.trim()&&(Dt=document.querySelector(`label[for="${je}"]`),Dt&&(""!==Dt.id?gt=Dt.id:Dt.id=gt=`${je}-lbl`,Ne=Dt.textContent)),{label:Dt,labelId:gt,labelText:Ne}},At=(Ue,ke,Ne,De,je)=>{if(Ue||Ee(ke)){let gt=ke.querySelector("input.aux-input");gt||(gt=ke.ownerDocument.createElement("input"),gt.type="hidden",gt.classList.add("aux-input"),ke.appendChild(gt)),gt.disabled=je,gt.name=Ne,gt.value=De||""}},xe=(Ue,ke,Ne)=>Math.max(Ue,Math.min(ke,Ne)),Re=(Ue,ke)=>{if(!Ue){const Ne="ASSERT: "+ke;throw console.error(Ne),new Error(Ne)}},de=Ue=>Ue.timeStamp||Date.now(),_t=Ue=>{if(Ue){const ke=Ue.changedTouches;if(ke&&ke.length>0){const Ne=ke[0];return{x:Ne.clientX,y:Ne.clientY}}if(void 0!==Ue.pageX)return{x:Ue.pageX,y:Ue.pageY}}return{x:0,y:0}},Y=Ue=>{const ke="rtl"===document.dir;switch(Ue){case"start":return ke;case"end":return!ke;default:throw new Error(`"${Ue}" is not a valid value for [side]. Use "start" or "end" instead.`)}},it=(Ue,ke)=>{const Ne=Ue._original||Ue;return{_original:Ue,emit:et(Ne.emit.bind(Ne),ke)}},et=(Ue,ke=0)=>{let Ne;return(...De)=>{clearTimeout(Ne),Ne=setTimeout(Ue,ke,...De)}},Pt=(Ue,ke)=>{if(null!=Ue||(Ue={}),null!=ke||(ke={}),Ue===ke)return!0;const Ne=Object.keys(Ue);if(Ne.length!==Object.keys(ke).length)return!1;for(const De of Ne)if(!(De in ke)||Ue[De]!==ke[De])return!1;return!0}},3457:(In,Et,j)=>{"use strict";j.d(Et,{w:()=>_});const _=typeof window<"u"?window:void 0},1898:(In,Et,j)=>{"use strict";j.r(Et),j.d(Et,{GESTURE_CONTROLLER:()=>_.G,createGesture:()=>ze});var _=j(4349);const m=(Ke,We,ct,At)=>{const xe=ee(Ke)?{capture:!!At.capture,passive:!!At.passive}:!!At.capture;let Re,de;return Ke.__zone_symbol__addEventListener?(Re="__zone_symbol__addEventListener",de="__zone_symbol__removeEventListener"):(Re="addEventListener",de="removeEventListener"),Ke[Re](We,ct,xe),()=>{Ke[de](We,ct,xe)}},ee=Ke=>{if(void 0===ce)try{const We=Object.defineProperty({},"passive",{get:()=>{ce=!0}});Ke.addEventListener("optsTest",()=>{},We)}catch{ce=!1}return!!ce};let ce;const _e=Ke=>Ke instanceof Document?Ke:Ke.ownerDocument,ze=Ke=>{let We=!1,ct=!1,At=!0,xe=!1;const Re=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},Ke),de=Re.canStart,_t=Re.onWillStart,Y=Re.onStart,it=Re.onEnd,et=Re.notCaptured,Pt=Re.onMove,Ue=Re.threshold,ke=Re.passive,Ne=Re.blurOnStart,De={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},je=((Ke,We,ct)=>{const At=ct*(Math.PI/180),xe="x"===Ke,Re=Math.cos(At),de=We*We;let _t=0,Y=0,it=!1,et=0;return{start(Pt,Ue){_t=Pt,Y=Ue,et=0,it=!0},detect(Pt,Ue){if(!it)return!1;const ke=Pt-_t,Ne=Ue-Y,De=ke*ke+Ne*Ne;if(De<de)return!1;const je=Math.sqrt(De),gt=(xe?ke:Ne)/je;return et=gt>Re?1:gt<-Re?-1:0,it=!1,!0},isGesture:()=>0!==et,getDirection:()=>et}})(Re.direction,Re.threshold,Re.maxAngle),gt=_.G.createGesture({name:Ke.gestureName,priority:Ke.gesturePriority,disableScroll:Ke.disableScroll}),Mt=()=>{We&&(xe=!1,Pt&&Pt(De))},yt=()=>!!gt.capture()&&(We=!0,At=!1,De.startX=De.currentX,De.startY=De.currentY,De.startTime=De.currentTime,_t?_t(De).then(Ve):Ve(),!0),Ve=()=>{Ne&&(()=>{if(typeof document<"u"){const zt=document.activeElement;null!=zt&&zt.blur&&zt.blur()}})(),Y&&Y(De),At=!0},Be=()=>{We=!1,ct=!1,xe=!1,At=!0,gt.release()},ft=zt=>{const Dn=We,kt=At;if(Be(),kt){if(ye(De,zt),Dn)return void(it&&it(De));et&&et(De)}},wt=((Ke,We,ct,At,xe)=>{let Re,de,_t,Y,it,et,Pt,Ue=0;const ke=Fe=>{Ue=Date.now()+2e3,We(Fe)&&(!de&&ct&&(de=m(Ke,"touchmove",ct,xe)),_t||(_t=m(Fe.target,"touchend",De,xe)),Y||(Y=m(Fe.target,"touchcancel",De,xe)))},Ne=Fe=>{Ue>Date.now()||We(Fe)&&(!et&&ct&&(et=m(_e(Ke),"mousemove",ct,xe)),Pt||(Pt=m(_e(Ke),"mouseup",je,xe)))},De=Fe=>{gt(),At&&At(Fe)},je=Fe=>{Dt(),At&&At(Fe)},gt=()=>{de&&de(),_t&&_t(),Y&&Y(),de=_t=Y=void 0},Dt=()=>{et&&et(),Pt&&Pt(),et=Pt=void 0},ht=()=>{gt(),Dt()},Mt=(Fe=!0)=>{Fe?(Re||(Re=m(Ke,"touchstart",ke,xe)),it||(it=m(Ke,"mousedown",Ne,xe))):(Re&&Re(),it&&it(),Re=it=void 0,ht())};return{enable:Mt,stop:ht,destroy:()=>{Mt(!1),At=ct=We=void 0}}})(Re.el,zt=>{const Dn=Ee(zt);return!(ct||!At||(ae(zt,De),De.startX=De.currentX,De.startY=De.currentY,De.startTime=De.currentTime=Dn,De.velocityX=De.velocityY=De.deltaX=De.deltaY=0,De.event=zt,de&&!1===de(De))||(gt.release(),!gt.start()))&&(ct=!0,0===Ue?yt():(je.start(De.startX,De.startY),!0))},zt=>{We?!xe&&At&&(xe=!0,ye(De,zt),requestAnimationFrame(Mt)):(ye(De,zt),je.detect(De.currentX,De.currentY)&&(!je.isGesture()||!yt())&&nn())},ft,{capture:!1,passive:ke}),nn=()=>{Be(),wt.stop(),et&&et(De)};return{enable(zt=!0){zt||(We&&ft(void 0),Be()),wt.enable(zt)},destroy(){gt.destroy(),wt.destroy()}}},ye=(Ke,We)=>{if(!We)return;const ct=Ke.currentX,At=Ke.currentY,xe=Ke.currentTime;ae(We,Ke);const Re=Ke.currentX,de=Ke.currentY,Y=(Ke.currentTime=Ee(We))-xe;if(Y>0&&Y<100){const et=(de-At)/Y;Ke.velocityX=(Re-ct)/Y*.7+.3*Ke.velocityX,Ke.velocityY=.7*et+.3*Ke.velocityY}Ke.deltaX=Re-Ke.startX,Ke.deltaY=de-Ke.startY,Ke.event=We},ae=(Ke,We)=>{let ct=0,At=0;if(Ke){const xe=Ke.changedTouches;if(xe&&xe.length>0){const Re=xe[0];ct=Re.clientX,At=Re.clientY}else void 0!==Ke.pageX&&(ct=Ke.pageX,At=Ke.pageY)}We.currentX=ct,We.currentY=At},Ee=Ke=>Ke.timeStamp||Date.now()},4083:(In,Et,j)=>{"use strict";j.d(Et,{B:()=>ae,H:()=>ht,a:()=>ys,b:()=>ve,c:()=>zt,d:()=>St,e:()=>Li,f:()=>Ae,g:()=>Dn,h:()=>gt,i:()=>Ze,j:()=>Ee,p:()=>Vi,r:()=>Xe,w:()=>Ur});var _=j(5861);let ee,ce,$e,Se=!1,_e=!1,Me=!1,ze=!1,ye=!1;const ae={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},Ee=se=>{const be=new URL(se,Xn.$resourcesUrl$);return be.origin!==Jn.location.origin?be.href:be.pathname},de="s-id",_t="sty-id",Y="c-id",et="http://www.w3.org/1999/xlink",Pt={},De=se=>"object"==(se=typeof se)||"function"===se;function je(se){var be,Ye,me;return null!==(me=null===(Ye=null===(be=se.head)||void 0===be?void 0:be.querySelector('meta[name="csp-nonce"]'))||void 0===Ye?void 0:Ye.getAttribute("content"))&&void 0!==me?me:void 0}const gt=(se,be,...Ye)=>{let me=null,Je=null,Qe=null,Vt=!1,Lt=!1;const Xt=[],an=rr=>{for(let er=0;er<rr.length;er++)me=rr[er],Array.isArray(me)?an(me):null!=me&&"boolean"!=typeof me&&((Vt="function"!=typeof se&&!De(me))&&(me=String(me)),Vt&&Lt?Xt[Xt.length-1].$text$+=me:Xt.push(Vt?Dt(null,me):me),Lt=Vt)};if(an(Ye),be){be.key&&(Je=be.key),be.name&&(Qe=be.name);{const rr=be.className||be.class;rr&&(be.class="object"!=typeof rr?rr:Object.keys(rr).filter(er=>rr[er]).join(" "))}}if("function"==typeof se)return se(null===be?{}:be,Xt,yt);const vn=Dt(se,null);return vn.$attrs$=be,Xt.length>0&&(vn.$children$=Xt),vn.$key$=Je,vn.$name$=Qe,vn},Dt=(se,be)=>({$flags$:0,$tag$:se,$text$:be,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),ht={},yt={forEach:(se,be)=>se.map(Fe).forEach(be),map:(se,be)=>se.map(Fe).map(be).map(Ve)},Fe=se=>({vattrs:se.$attrs$,vchildren:se.$children$,vkey:se.$key$,vname:se.$name$,vtag:se.$tag$,vtext:se.$text$}),Ve=se=>{if("function"==typeof se.vtag){const Ye=Object.assign({},se.vattrs);return se.vkey&&(Ye.key=se.vkey),se.vname&&(Ye.name=se.vname),gt(se.vtag,Ye,...se.vchildren||[])}const be=Dt(se.vtag,se.vtext);return be.$attrs$=se.vattrs,be.$children$=se.vchildren,be.$key$=se.vkey,be.$name$=se.vname,be},ft=(se,be,Ye,me,Je,Qe,Vt)=>{let Lt,Xt,an,vn;if(1===Qe.nodeType){for(Lt=Qe.getAttribute(Y),Lt&&(Xt=Lt.split("."),(Xt[0]===Vt||"0"===Xt[0])&&(an={$flags$:0,$hostId$:Xt[0],$nodeId$:Xt[1],$depth$:Xt[2],$index$:Xt[3],$tag$:Qe.tagName.toLowerCase(),$elm$:Qe,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},be.push(an),Qe.removeAttribute(Y),se.$children$||(se.$children$=[]),se.$children$[an.$index$]=an,se=an,me&&"0"===an.$depth$&&(me[an.$index$]=an.$elm$))),vn=Qe.childNodes.length-1;vn>=0;vn--)ft(se,be,Ye,me,Je,Qe.childNodes[vn],Vt);if(Qe.shadowRoot)for(vn=Qe.shadowRoot.childNodes.length-1;vn>=0;vn--)ft(se,be,Ye,me,Je,Qe.shadowRoot.childNodes[vn],Vt)}else if(8===Qe.nodeType)Xt=Qe.nodeValue.split("."),(Xt[1]===Vt||"0"===Xt[1])&&(Lt=Xt[0],an={$flags$:0,$hostId$:Xt[1],$nodeId$:Xt[2],$depth$:Xt[3],$index$:Xt[4],$elm$:Qe,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===Lt?(an.$elm$=Qe.nextSibling,an.$elm$&&3===an.$elm$.nodeType&&(an.$text$=an.$elm$.textContent,be.push(an),Qe.remove(),se.$children$||(se.$children$=[]),se.$children$[an.$index$]=an,me&&"0"===an.$depth$&&(me[an.$index$]=an.$elm$))):an.$hostId$===Vt&&("s"===Lt?(an.$tag$="slot",Qe["s-sn"]=Xt[5]?an.$name$=Xt[5]:"",Qe["s-sr"]=!0,me&&(an.$elm$=Wn.createElement(an.$tag$),an.$name$&&an.$elm$.setAttribute("name",an.$name$),Qe.parentNode.insertBefore(an.$elm$,Qe),Qe.remove(),"0"===an.$depth$&&(me[an.$index$]=an.$elm$)),Ye.push(an),se.$children$||(se.$children$=[]),se.$children$[an.$index$]=an):"r"===Lt&&(me?Qe.remove():(Je["s-cr"]=Qe,Qe["s-cn"]=!0))));else if(se&&"style"===se.$tag$){const rr=Dt(null,Qe.textContent);rr.$elm$=Qe,rr.$index$="0",se.$children$=[rr]}},wt=(se,be)=>{if(1===se.nodeType){let Ye=0;for(;Ye<se.childNodes.length;Ye++)wt(se.childNodes[Ye],be);if(se.shadowRoot)for(Ye=0;Ye<se.shadowRoot.childNodes.length;Ye++)wt(se.shadowRoot.childNodes[Ye],be)}else if(8===se.nodeType){const Ye=se.nodeValue.split(".");"o"===Ye[0]&&(be.set(Ye[1]+"."+Ye[2],se),se.nodeValue="",se["s-en"]=Ye[3])}},zt=se=>Qn.push(se),Dn=se=>Qt(se).$modeName$,Ae=se=>Qt(se).$hostElement$,St=(se,be,Ye)=>{const me=Ae(se);return{emit:Je=>gn(me,be,{bubbles:!!(4&Ye),composed:!!(2&Ye),cancelable:!!(1&Ye),detail:Je})}},gn=(se,be,Ye)=>{const me=Xn.ce(be,Ye);return se.dispatchEvent(me),me},On=new WeakMap,Yn=(se,be,Ye)=>{let me=wn.get(se);ji&&Ye?(me=me||new CSSStyleSheet,"string"==typeof me?me=be:me.replaceSync(be)):me=be,wn.set(se,me)},xn=(se,be,Ye,me)=>{var Je;let Qe=Cn(be,Ye);const Vt=wn.get(Qe);if(se=11===se.nodeType?se:Wn,Vt)if("string"==typeof Vt){let Xt,Lt=On.get(se=se.head||se);if(Lt||On.set(se,Lt=new Set),!Lt.has(Qe)){if(se.host&&(Xt=se.querySelector(`[${_t}="${Qe}"]`)))Xt.innerHTML=Vt;else{Xt=Wn.createElement("style"),Xt.innerHTML=Vt;const an=null!==(Je=Xn.$nonce$)&&void 0!==Je?Je:je(Wn);null!=an&&Xt.setAttribute("nonce",an),se.insertBefore(Xt,se.querySelector("link"))}Lt&&Lt.add(Qe)}}else se.adoptedStyleSheets.includes(Vt)||(se.adoptedStyleSheets=[...se.adoptedStyleSheets,Vt]);return Qe},Cn=(se,be)=>"sc-"+(be&&32&se.$flags$?se.$tagName$+"-"+be:se.$tagName$),hr=se=>se.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),_r=(se,be,Ye,me,Je,Qe)=>{if(Ye!==me){let Vt=Ct(se,be),Lt=be.toLowerCase();if("class"===be){const Xt=se.classList,an=bn(Ye),vn=bn(me);Xt.remove(...an.filter(rr=>rr&&!vn.includes(rr))),Xt.add(...vn.filter(rr=>rr&&!an.includes(rr)))}else if("style"===be){for(const Xt in Ye)(!me||null==me[Xt])&&(Xt.includes("-")?se.style.removeProperty(Xt):se.style[Xt]="");for(const Xt in me)(!Ye||me[Xt]!==Ye[Xt])&&(Xt.includes("-")?se.style.setProperty(Xt,me[Xt]):se.style[Xt]=me[Xt])}else if("key"!==be)if("ref"===be)me&&me(se);else if(Vt||"o"!==be[0]||"n"!==be[1]){const Xt=De(me);if((Vt||Xt&&null!==me)&&!Je)try{if(se.tagName.includes("-"))se[be]=me;else{const vn=null==me?"":me;"list"===be?Vt=!1:(null==Ye||se[be]!=vn)&&(se[be]=vn)}}catch{}let an=!1;Lt!==(Lt=Lt.replace(/^xlink\:?/,""))&&(be=Lt,an=!0),null==me||!1===me?(!1!==me||""===se.getAttribute(be))&&(an?se.removeAttributeNS(et,be):se.removeAttribute(be)):(!Vt||4&Qe||Je)&&!Xt&&(me=!0===me?"":me,an?se.setAttributeNS(et,be,me):se.setAttribute(be,me))}else be="-"===be[2]?be.slice(3):Ct(Jn,Lt)?Lt.slice(2):Lt[2]+be.slice(3),Ye&&Xn.rel(se,be,Ye,!1),me&&Xn.ael(se,be,me,!1)}},tr=/\s/,bn=se=>se?se.split(tr):[],zn=(se,be,Ye,me)=>{const Je=11===be.$elm$.nodeType&&be.$elm$.host?be.$elm$.host:be.$elm$,Qe=se&&se.$attrs$||Pt,Vt=be.$attrs$||Pt;for(me in Qe)me in Vt||_r(Je,me,Qe[me],void 0,Ye,be.$flags$);for(me in Vt)_r(Je,me,Qe[me],Vt[me],Ye,be.$flags$)},yi=(se,be,Ye,me)=>{const Je=be.$children$[Ye];let Vt,Lt,Xt,Qe=0;if(Se||(Me=!0,"slot"===Je.$tag$&&(ee&&me.classList.add(ee+"-s"),Je.$flags$|=Je.$children$?2:1)),null!==Je.$text$)Vt=Je.$elm$=Wn.createTextNode(Je.$text$);else if(1&Je.$flags$)Vt=Je.$elm$=Wn.createTextNode("");else{if(ze||(ze="svg"===Je.$tag$),Vt=Je.$elm$=Wn.createElementNS(ze?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&Je.$flags$?"slot-fb":Je.$tag$),ze&&"foreignObject"===Je.$tag$&&(ze=!1),zn(null,Je,ze),(se=>null!=se)(ee)&&Vt["s-si"]!==ee&&Vt.classList.add(Vt["s-si"]=ee),Je.$children$)for(Qe=0;Qe<Je.$children$.length;++Qe)Lt=yi(se,Je,Qe,Vt),Lt&&Vt.appendChild(Lt);"svg"===Je.$tag$?ze=!1:"foreignObject"===Vt.tagName&&(ze=!0)}return Vt["s-hn"]=$e,3&Je.$flags$&&(Vt["s-sr"]=!0,Vt["s-cr"]=ce,Vt["s-sn"]=Je.$name$||"",Xt=se&&se.$children$&&se.$children$[Ye],Xt&&Xt.$tag$===Je.$tag$&&se.$elm$&&Cr(se.$elm$,!1)),Vt},Cr=(se,be)=>{Xn.$flags$|=1;const Ye=se.childNodes;for(let me=Ye.length-1;me>=0;me--){const Je=Ye[me];Je["s-hn"]!==$e&&Je["s-ol"]&&(yn(Je).insertBefore(Je,ln(Je)),Je["s-ol"].remove(),Je["s-ol"]=void 0,Me=!0),be&&Cr(Je,be)}Xn.$flags$&=-2},di=(se,be,Ye,me,Je,Qe)=>{let Lt,Vt=se["s-cr"]&&se["s-cr"].parentNode||se;for(Vt.shadowRoot&&Vt.tagName===$e&&(Vt=Vt.shadowRoot);Je<=Qe;++Je)me[Je]&&(Lt=yi(null,Ye,Je,se),Lt&&(me[Je].$elm$=Lt,Vt.insertBefore(Lt,ln(be))))},wi=(se,be,Ye)=>{for(let me=be;me<=Ye;++me){const Je=se[me];if(Je){const Qe=Je.$elm$;pi(Je),Qe&&(_e=!0,Qe["s-ol"]?Qe["s-ol"].remove():Cr(Qe,!0),Qe.remove())}}},qn=(se,be)=>se.$tag$===be.$tag$&&("slot"===se.$tag$?se.$name$===be.$name$:se.$key$===be.$key$),ln=se=>se&&se["s-ol"]||se,yn=se=>(se["s-ol"]?se["s-ol"]:se).parentNode,on=(se,be)=>{const Ye=be.$elm$=se.$elm$,me=se.$children$,Je=be.$children$,Qe=be.$tag$,Vt=be.$text$;let Lt;null===Vt?(ze="svg"===Qe||"foreignObject"!==Qe&&ze,"slot"===Qe||zn(se,be,ze),null!==me&&null!==Je?((se,be,Ye,me)=>{let Wr,$i,Je=0,Qe=0,Vt=0,Lt=0,Xt=be.length-1,an=be[0],vn=be[Xt],rr=me.length-1,er=me[0],vr=me[rr];for(;Je<=Xt&&Qe<=rr;)if(null==an)an=be[++Je];else if(null==vn)vn=be[--Xt];else if(null==er)er=me[++Qe];else if(null==vr)vr=me[--rr];else if(qn(an,er))on(an,er),an=be[++Je],er=me[++Qe];else if(qn(vn,vr))on(vn,vr),vn=be[--Xt],vr=me[--rr];else if(qn(an,vr))("slot"===an.$tag$||"slot"===vr.$tag$)&&Cr(an.$elm$.parentNode,!1),on(an,vr),se.insertBefore(an.$elm$,vn.$elm$.nextSibling),an=be[++Je],vr=me[--rr];else if(qn(vn,er))("slot"===an.$tag$||"slot"===vr.$tag$)&&Cr(vn.$elm$.parentNode,!1),on(vn,er),se.insertBefore(vn.$elm$,an.$elm$),vn=be[--Xt],er=me[++Qe];else{for(Vt=-1,Lt=Je;Lt<=Xt;++Lt)if(be[Lt]&&null!==be[Lt].$key$&&be[Lt].$key$===er.$key$){Vt=Lt;break}Vt>=0?($i=be[Vt],$i.$tag$!==er.$tag$?Wr=yi(be&&be[Qe],Ye,Vt,se):(on($i,er),be[Vt]=void 0,Wr=$i.$elm$),er=me[++Qe]):(Wr=yi(be&&be[Qe],Ye,Qe,se),er=me[++Qe]),Wr&&yn(an.$elm$).insertBefore(Wr,ln(an.$elm$))}Je>Xt?di(se,null==me[rr+1]?null:me[rr+1].$elm$,Ye,me,Qe,rr):Qe>rr&&wi(be,Je,Xt)})(Ye,me,be,Je):null!==Je?(null!==se.$text$&&(Ye.textContent=""),di(Ye,null,be,Je,0,Je.length-1)):null!==me&&wi(me,0,me.length-1),ze&&"svg"===Qe&&(ze=!1)):(Lt=Ye["s-cr"])?Lt.parentNode.textContent=Vt:se.$text$!==Vt&&(Ye.data=Vt)},Jr=se=>{const be=se.childNodes;let Ye,me,Je,Qe,Vt,Lt;for(me=0,Je=be.length;me<Je;me++)if(Ye=be[me],1===Ye.nodeType){if(Ye["s-sr"])for(Vt=Ye["s-sn"],Ye.hidden=!1,Qe=0;Qe<Je;Qe++)if(Lt=be[Qe].nodeType,be[Qe]["s-hn"]!==Ye["s-hn"]||""!==Vt){if(1===Lt&&Vt===be[Qe].getAttribute("slot")){Ye.hidden=!0;break}}else if(1===Lt||3===Lt&&""!==be[Qe].textContent.trim()){Ye.hidden=!0;break}Jr(Ye)}},Dr=[],Qr=se=>{let be,Ye,me,Je,Qe,Vt,Lt=0;const Xt=se.childNodes,an=Xt.length;for(;Lt<an;Lt++){if(be=Xt[Lt],be["s-sr"]&&(Ye=be["s-cr"])&&Ye.parentNode)for(me=Ye.parentNode.childNodes,Je=be["s-sn"],Vt=me.length-1;Vt>=0;Vt--)Ye=me[Vt],!Ye["s-cn"]&&!Ye["s-nr"]&&Ye["s-hn"]!==be["s-hn"]&&(zr(Ye,Je)?(Qe=Dr.find(vn=>vn.$nodeToRelocate$===Ye),_e=!0,Ye["s-sn"]=Ye["s-sn"]||Je,Qe?Qe.$slotRefNode$=be:Dr.push({$slotRefNode$:be,$nodeToRelocate$:Ye}),Ye["s-sr"]&&Dr.map(vn=>{zr(vn.$nodeToRelocate$,Ye["s-sn"])&&(Qe=Dr.find(rr=>rr.$nodeToRelocate$===Ye),Qe&&!vn.$slotRefNode$&&(vn.$slotRefNode$=Qe.$slotRefNode$))})):Dr.some(vn=>vn.$nodeToRelocate$===Ye)||Dr.push({$nodeToRelocate$:Ye}));1===be.nodeType&&Qr(be)}},zr=(se,be)=>1===se.nodeType?null===se.getAttribute("slot")&&""===be||se.getAttribute("slot")===be:se["s-sn"]===be||""===be,pi=se=>{se.$attrs$&&se.$attrs$.ref&&se.$attrs$.ref(null),se.$children$&&se.$children$.map(pi)},gi=(se,be)=>{be&&!se.$onRenderResolve$&&be["s-p"]&&be["s-p"].push(new Promise(Ye=>se.$onRenderResolve$=Ye))},ur=(se,be)=>{if(se.$flags$|=16,!(4&se.$flags$))return gi(se,se.$ancestorComponent$),Ur(()=>lr(se,be));se.$flags$|=512},lr=(se,be)=>{const me=se.$lazyInstance$;let Je;return be&&(se.$flags$|=256,se.$queuedListeners$&&(se.$queuedListeners$.map(([Qe,Vt])=>en(me,Qe,Vt)),se.$queuedListeners$=null),Je=en(me,"componentWillLoad")),Je=yr(Je,()=>en(me,"componentWillRender")),yr(Je,()=>Ai(se,me,be))},yr=(se,be)=>se instanceof Promise?se.then(be):be(),Ai=function(){var se=(0,_.Z)(function*(be,Ye,me){const Je=be.$hostElement$,Vt=Je["s-rc"];me&&(se=>{const be=se.$cmpMeta$,Ye=se.$hostElement$,me=be.$flags$,Qe=xn(Ye.shadowRoot?Ye.shadowRoot:Ye.getRootNode(),be,se.$modeName$);10&me&&(Ye["s-sc"]=Qe,Ye.classList.add(Qe+"-h"),2&me&&Ye.classList.add(Qe+"-s"))})(be);mr(be,Ye),Vt&&(Vt.map(Xt=>Xt()),Je["s-rc"]=void 0);{const Xt=Je["s-p"],an=()=>Kt(be);0===Xt.length?an():(Promise.all(Xt).then(an),be.$flags$|=4,Xt.length=0)}});return function(Ye,me,Je){return se.apply(this,arguments)}}(),mr=(se,be,Ye)=>{try{be=be.render&&be.render(),se.$flags$&=-17,se.$flags$|=2,((se,be)=>{const Ye=se.$hostElement$,me=se.$cmpMeta$,Je=se.$vnode$||Dt(null,null),Qe=(se=>se&&se.$tag$===ht)(be)?be:gt(null,null,be);if($e=Ye.tagName,me.$attrsToReflect$&&(Qe.$attrs$=Qe.$attrs$||{},me.$attrsToReflect$.map(([Vt,Lt])=>Qe.$attrs$[Lt]=Ye[Vt])),Qe.$tag$=null,Qe.$flags$|=4,se.$vnode$=Qe,Qe.$elm$=Je.$elm$=Ye.shadowRoot||Ye,ee=Ye["s-sc"],ce=Ye["s-cr"],Se=0!=(1&me.$flags$),_e=!1,on(Je,Qe),Xn.$flags$|=1,Me){Qr(Qe.$elm$);let Vt,Lt,Xt,an,vn,rr,er=0;for(;er<Dr.length;er++)Vt=Dr[er],Lt=Vt.$nodeToRelocate$,Lt["s-ol"]||(Xt=Wn.createTextNode(""),Xt["s-nr"]=Lt,Lt.parentNode.insertBefore(Lt["s-ol"]=Xt,Lt));for(er=0;er<Dr.length;er++)if(Vt=Dr[er],Lt=Vt.$nodeToRelocate$,Vt.$slotRefNode$){for(an=Vt.$slotRefNode$.parentNode,vn=Vt.$slotRefNode$.nextSibling,Xt=Lt["s-ol"];Xt=Xt.previousSibling;)if(rr=Xt["s-nr"],rr&&rr["s-sn"]===Lt["s-sn"]&&an===rr.parentNode&&(rr=rr.nextSibling,!rr||!rr["s-nr"])){vn=rr;break}(!vn&&an!==Lt.parentNode||Lt.nextSibling!==vn)&&Lt!==vn&&(!Lt["s-hn"]&&Lt["s-ol"]&&(Lt["s-hn"]=Lt["s-ol"].parentNode.nodeName),an.insertBefore(Lt,vn))}else 1===Lt.nodeType&&(Lt.hidden=!0)}_e&&Jr(Qe.$elm$),Xn.$flags$&=-2,Dr.length=0})(se,be)}catch(me){Gt(me,se.$hostElement$)}return null},Kt=se=>{const Ye=se.$hostElement$,Je=se.$lazyInstance$,Qe=se.$ancestorComponent$;en(Je,"componentDidRender"),64&se.$flags$?en(Je,"componentDidUpdate"):(se.$flags$|=64,Yt(Ye),en(Je,"componentDidLoad"),se.$onReadyResolve$(Ye),Qe||nt()),se.$onInstanceResolve$(Ye),se.$onRenderResolve$&&(se.$onRenderResolve$(),se.$onRenderResolve$=void 0),512&se.$flags$&&Ci(()=>ur(se,!1)),se.$flags$&=-517},Ze=se=>{{const be=Qt(se),Ye=be.$hostElement$.isConnected;return Ye&&2==(18&be.$flags$)&&ur(be,!1),Ye}},nt=se=>{Yt(Wn.documentElement),Ci(()=>gn(Jn,"appload",{detail:{namespace:"ionic"}}))},en=(se,be,Ye)=>{if(se&&se[be])try{return se[be](Ye)}catch(me){Gt(me)}},Yt=se=>se.classList.add("hydrated"),qe=(se,be,Ye)=>{if(be.$members$){se.watchers&&(be.$watchers$=se.watchers);const me=Object.entries(be.$members$),Je=se.prototype;if(me.map(([Qe,[Vt]])=>{31&Vt||2&Ye&&32&Vt?Object.defineProperty(Je,Qe,{get(){return((se,be)=>Qt(this).$instanceValues$.get(be))(0,Qe)},set(Lt){((se,be,Ye,me)=>{const Je=Qt(se),Qe=Je.$hostElement$,Vt=Je.$instanceValues$.get(be),Lt=Je.$flags$,Xt=Je.$lazyInstance$;Ye=((se,be)=>null==se||De(se)?se:4&be?"false"!==se&&(""===se||!!se):2&be?parseFloat(se):1&be?String(se):se)(Ye,me.$members$[be][0]);const an=Number.isNaN(Vt)&&Number.isNaN(Ye);if((!(8&Lt)||void 0===Vt)&&Ye!==Vt&&!an&&(Je.$instanceValues$.set(be,Ye),Xt)){if(me.$watchers$&&128&Lt){const rr=me.$watchers$[be];rr&&rr.map(er=>{try{Xt[er](Ye,Vt,be)}catch(vr){Gt(vr,Qe)}})}2==(18&Lt)&&ur(Je,!1)}})(this,Qe,Lt,be)},configurable:!0,enumerable:!0}):1&Ye&&64&Vt&&Object.defineProperty(Je,Qe,{value(...Lt){const Xt=Qt(this);return Xt.$onInstancePromise$.then(()=>Xt.$lazyInstance$[Qe](...Lt))}})}),1&Ye){const Qe=new Map;Je.attributeChangedCallback=function(Vt,Lt,Xt){Xn.jmp(()=>{const an=Qe.get(Vt);if(this.hasOwnProperty(an))Xt=this[an],delete this[an];else if(Je.hasOwnProperty(an)&&"number"==typeof this[an]&&this[an]==Xt)return;this[an]=(null!==Xt||"boolean"!=typeof this[an])&&Xt})},se.observedAttributes=me.filter(([Vt,Lt])=>15&Lt[0]).map(([Vt,Lt])=>{const Xt=Lt[1]||Vt;return Qe.set(Xt,Vt),512&Lt[0]&&be.$attrsToReflect$.push([Vt,Xt]),Xt})}}return se},Ot=function(){var se=(0,_.Z)(function*(be,Ye,me,Je,Qe){if(!(32&Ye.$flags$)){Ye.$flags$|=32;{if((Qe=kn(me)).then){const an=()=>{};Qe=yield Qe,an()}Qe.isProxied||(me.$watchers$=Qe.watchers,qe(Qe,me,2),Qe.isProxied=!0);const Xt=()=>{};Ye.$flags$|=8;try{new Qe(Ye)}catch(an){Gt(an)}Ye.$flags$&=-9,Ye.$flags$|=128,Xt(),ut(Ye.$lazyInstance$)}if(Qe.style){let Xt=Qe.style;"string"!=typeof Xt&&(Xt=Xt[Ye.$modeName$=(se=>Qn.map(be=>be(se)).find(be=>!!be))(be)]);const an=Cn(me,Ye.$modeName$);if(!wn.has(an)){const vn=()=>{};Yn(an,Xt,!!(1&me.$flags$)),vn()}}}const Vt=Ye.$ancestorComponent$,Lt=()=>ur(Ye,!0);Vt&&Vt["s-rc"]?Vt["s-rc"].push(Lt):Lt()});return function(Ye,me,Je,Qe,Vt){return se.apply(this,arguments)}}(),ut=se=>{en(se,"connectedCallback")},ot=se=>{const be=se["s-cr"]=Wn.createComment("");be["s-cn"]=!0,se.insertBefore(be,se.firstChild)},ve=(se,be={})=>{var Ye;const Je=[],Qe=be.exclude||[],Vt=Jn.customElements,Lt=Wn.head,Xt=Lt.querySelector("meta[charset]"),an=Wn.createElement("style"),vn=[],rr=Wn.querySelectorAll(`[${_t}]`);let er,vr=!0,Wr=0;for(Object.assign(Xn,be),Xn.$resourcesUrl$=new URL(be.resourcesUrl||"./",Wn.baseURI).href,Xn.$flags$|=2;Wr<rr.length;Wr++)Yn(rr[Wr].getAttribute(_t),hr(rr[Wr].innerHTML),!0);se.map($i=>{$i[1].map(mt=>{const at={$flags$:mt[0],$tagName$:mt[1],$members$:mt[2],$listeners$:mt[3]};at.$members$=mt[2],at.$listeners$=mt[3],at.$attrsToReflect$=[],at.$watchers$={};const xt=at.$tagName$,tn=class extends HTMLElement{constructor(dn){super(dn),He(dn=this,at),1&at.$flags$&&dn.attachShadow({mode:"open",delegatesFocus:!!(16&at.$flags$)})}connectedCallback(){er&&(clearTimeout(er),er=null),vr?vn.push(this):Xn.jmp(()=>(se=>{if(!(1&Xn.$flags$)){const be=Qt(se),Ye=be.$cmpMeta$,me=()=>{};if(1&be.$flags$)rt(se,be,Ye.$listeners$),ut(be.$lazyInstance$);else{let Je;if(be.$flags$|=1,Je=se.getAttribute(de),Je){if(1&Ye.$flags$){const Qe=xn(se.shadowRoot,Ye,se.getAttribute("s-mode"));se.classList.remove(Qe+"-h",Qe+"-s")}((se,be,Ye,me)=>{const Qe=se.shadowRoot,Vt=[],Xt=Qe?[]:null,an=me.$vnode$=Dt(be,null);Xn.$orgLocNodes$||wt(Wn.body,Xn.$orgLocNodes$=new Map),se[de]=Ye,se.removeAttribute(de),ft(an,Vt,[],Xt,se,se,Ye),Vt.map(vn=>{const rr=vn.$hostId$+"."+vn.$nodeId$,er=Xn.$orgLocNodes$.get(rr),vr=vn.$elm$;er&&vi&&""===er["s-en"]&&er.parentNode.insertBefore(vr,er.nextSibling),Qe||(vr["s-hn"]=be,er&&(vr["s-ol"]=er,vr["s-ol"]["s-nr"]=vr)),Xn.$orgLocNodes$.delete(rr)}),Qe&&Xt.map(vn=>{vn&&Qe.appendChild(vn)})})(se,Ye.$tagName$,Je,be)}Je||12&Ye.$flags$&&ot(se);{let Qe=se;for(;Qe=Qe.parentNode||Qe.host;)if(1===Qe.nodeType&&Qe.hasAttribute("s-id")&&Qe["s-p"]||Qe["s-p"]){gi(be,be.$ancestorComponent$=Qe);break}}Ye.$members$&&Object.entries(Ye.$members$).map(([Qe,[Vt]])=>{if(31&Vt&&se.hasOwnProperty(Qe)){const Lt=se[Qe];delete se[Qe],se[Qe]=Lt}}),Ot(se,be,Ye)}me()}})(this))}disconnectedCallback(){Xn.jmp(()=>(se=>{if(!(1&Xn.$flags$)){const be=Qt(this),Ye=be.$lazyInstance$;be.$rmListeners$&&(be.$rmListeners$.map(me=>me()),be.$rmListeners$=void 0),en(Ye,"disconnectedCallback")}})())}componentOnReady(){return Qt(this).$onReadyPromise$}};at.$lazyBundleId$=$i[0],!Qe.includes(xt)&&!Vt.get(xt)&&(Je.push(xt),Vt.define(xt,qe(tn,at,1)))})});{an.innerHTML=Je+"{visibility:hidden}.hydrated{visibility:inherit}",an.setAttribute("data-styles","");const $i=null!==(Ye=Xn.$nonce$)&&void 0!==Ye?Ye:je(Wn);null!=$i&&an.setAttribute("nonce",$i),Lt.insertBefore(an,Xt?Xt.nextSibling:Lt.firstChild)}vr=!1,vn.length?vn.map($i=>$i.connectedCallback()):Xn.jmp(()=>er=setTimeout(nt,30))},rt=(se,be,Ye,me)=>{Ye&&Ye.map(([Je,Qe,Vt])=>{const Lt=he(se,Je),Xt=Nt(be,Vt),an=Ce(Je);Xn.ael(Lt,Qe,Xt,an),(be.$rmListeners$=be.$rmListeners$||[]).push(()=>Xn.rel(Lt,Qe,Xt,an))})},Nt=(se,be)=>Ye=>{try{256&se.$flags$?se.$lazyInstance$[be](Ye):(se.$queuedListeners$=se.$queuedListeners$||[]).push([be,Ye])}catch(me){Gt(me)}},he=(se,be)=>4&be?Wn:8&be?Jn:16&be?Wn.body:se,Ce=se=>0!=(2&se),It=new WeakMap,Qt=se=>It.get(se),Xe=(se,be)=>It.set(be.$lazyInstance$=se,be),He=(se,be)=>{const Ye={$flags$:0,$hostElement$:se,$cmpMeta$:be,$instanceValues$:new Map};return Ye.$onInstancePromise$=new Promise(me=>Ye.$onInstanceResolve$=me),Ye.$onReadyPromise$=new Promise(me=>Ye.$onReadyResolve$=me),se["s-p"]=[],se["s-rc"]=[],rt(se,Ye,be.$listeners$),It.set(se,Ye)},Ct=(se,be)=>be in se,Gt=(se,be)=>(0,console.error)(se,be),pn=new Map,kn=(se,be,Ye)=>{const me=se.$tagName$.replace(/-/g,"_"),Je=se.$lazyBundleId$,Qe=pn.get(Je);return Qe?Qe[me]:j(863)(`./${Je}.entry.js`).then(Vt=>(pn.set(Je,Vt),Vt[me]),Gt)},wn=new Map,Qn=[],Jn=typeof window<"u"?window:{},Wn=Jn.document||{head:{}},Xn={$flags$:0,$resourcesUrl$:"",jmp:se=>se(),raf:se=>requestAnimationFrame(se),ael:(se,be,Ye,me)=>se.addEventListener(be,Ye,me),rel:(se,be,Ye,me)=>se.removeEventListener(be,Ye,me),ce:(se,be)=>new CustomEvent(se,be)},ys=se=>{Object.assign(Xn,se)},vi=!0,Vi=se=>Promise.resolve(se),ji=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),An=[],cr=[],ri=(se,be)=>Ye=>{se.push(Ye),ye||(ye=!0,be&&4&Xn.$flags$?Ci(kr):Xn.raf(kr))},qi=se=>{for(let be=0;be<se.length;be++)try{se[be](performance.now())}catch(Ye){Gt(Ye)}se.length=0},kr=()=>{qi(An),qi(cr),(ye=An.length>0)&&Xn.raf(kr)},Ci=se=>Vi().then(se),Li=ri(An,!1),Ur=ri(cr,!0)},8126:(In,Et,j)=>{"use strict";j.d(Et,{m:()=>ae});var _=j(5861),m=j(7593),ee=j(3577),ce=j(5273),$e=j(9613);const Se=Ee=>(0,$e.c)().duration(Ee?400:300),_e=Ee=>{let Ke,We;const ct=Ee.width+8,At=(0,$e.c)(),xe=(0,$e.c)();Ee.isEndSide?(Ke=ct+"px",We="0px"):(Ke=-ct+"px",We="0px"),At.addElement(Ee.menuInnerEl).fromTo("transform",`translateX(${Ke})`,`translateX(${We})`);const de="ios"===(0,ce.b)(Ee),_t=de?.2:.25;return xe.addElement(Ee.backdropEl).fromTo("opacity",.01,_t),Se(de).addAnimation([At,xe])},Me=Ee=>{let Ke,We;const ct=(0,ce.b)(Ee),At=Ee.width;Ee.isEndSide?(Ke=-At+"px",We=At+"px"):(Ke=At+"px",We=-At+"px");const xe=(0,$e.c)().addElement(Ee.menuInnerEl).fromTo("transform",`translateX(${We})`,"translateX(0px)"),Re=(0,$e.c)().addElement(Ee.contentEl).fromTo("transform","translateX(0px)",`translateX(${Ke})`),de=(0,$e.c)().addElement(Ee.backdropEl).fromTo("opacity",.01,.32);return Se("ios"===ct).addAnimation([xe,Re,de])},ze=Ee=>{const Ke=(0,ce.b)(Ee),We=Ee.width*(Ee.isEndSide?-1:1)+"px",ct=(0,$e.c)().addElement(Ee.contentEl).fromTo("transform","translateX(0px)",`translateX(${We})`);return Se("ios"===Ke).addAnimation(ct)},ae=(()=>{const Ee=new Map,Ke=[],We=function(){var Ve=(0,_.Z)(function*(Be){const ft=yield Y(Be);return!!ft&&ft.open()});return function(ft){return Ve.apply(this,arguments)}}(),ct=function(){var Ve=(0,_.Z)(function*(Be){const ft=yield void 0!==Be?Y(Be):it();return void 0!==ft&&ft.close()});return function(ft){return Ve.apply(this,arguments)}}(),At=function(){var Ve=(0,_.Z)(function*(Be){const ft=yield Y(Be);return!!ft&&ft.toggle()});return function(ft){return Ve.apply(this,arguments)}}(),xe=function(){var Ve=(0,_.Z)(function*(Be,ft){const wt=yield Y(ft);return wt&&(wt.disabled=!Be),wt});return function(ft,wt){return Ve.apply(this,arguments)}}(),Re=function(){var Ve=(0,_.Z)(function*(Be,ft){const wt=yield Y(ft);return wt&&(wt.swipeGesture=Be),wt});return function(ft,wt){return Ve.apply(this,arguments)}}(),de=function(){var Ve=(0,_.Z)(function*(Be){if(null!=Be){const ft=yield Y(Be);return void 0!==ft&&ft.isOpen()}return void 0!==(yield it())});return function(ft){return Ve.apply(this,arguments)}}(),_t=function(){var Ve=(0,_.Z)(function*(Be){const ft=yield Y(Be);return!!ft&&!ft.disabled});return function(ft){return Ve.apply(this,arguments)}}(),Y=function(){var Ve=(0,_.Z)(function*(Be){return yield Fe(),"start"===Be||"end"===Be?yt(nn=>nn.side===Be&&!nn.disabled)||yt(nn=>nn.side===Be):null!=Be?yt(wt=>wt.menuId===Be):yt(wt=>!wt.disabled)||(Ke.length>0?Ke[0].el:void 0)});return function(ft){return Ve.apply(this,arguments)}}(),it=function(){var Ve=(0,_.Z)(function*(){return yield Fe(),Dt()});return function(){return Ve.apply(this,arguments)}}(),et=function(){var Ve=(0,_.Z)(function*(){return yield Fe(),ht()});return function(){return Ve.apply(this,arguments)}}(),Pt=function(){var Ve=(0,_.Z)(function*(){return yield Fe(),Mt()});return function(){return Ve.apply(this,arguments)}}(),Ue=(Ve,Be)=>{Ee.set(Ve,Be)},De=Ve=>{const Be=Ve.side;Ke.filter(ft=>ft.side===Be&&ft!==Ve).forEach(ft=>ft.disabled=!0)},je=function(){var Ve=(0,_.Z)(function*(Be,ft,wt){if(Mt())return!1;if(ft){const nn=yield it();nn&&Be.el!==nn&&(yield nn.setOpen(!1,!1))}return Be._setOpen(ft,wt)});return function(ft,wt,nn){return Ve.apply(this,arguments)}}(),Dt=()=>yt(Ve=>Ve._isOpen),ht=()=>Ke.map(Ve=>Ve.el),Mt=()=>Ke.some(Ve=>Ve.isAnimating),yt=Ve=>{const Be=Ke.find(Ve);if(void 0!==Be)return Be.el},Fe=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(Ve=>new Promise(Be=>(0,ee.c)(Ve,Be))));return Ue("reveal",ze),Ue("push",Me),Ue("overlay",_e),typeof document<"u"&&document.addEventListener("ionBackButton",Ve=>{const Be=Dt();Be&&Ve.detail.register(m.MENU_BACK_BUTTON_PRIORITY,()=>Be.close())}),{registerAnimation:Ue,get:Y,getMenus:et,getOpen:it,isEnabled:_t,swipeGesture:Re,isAnimating:Pt,isOpen:de,enable:xe,toggle:At,close:ct,open:We,_getOpenSync:Dt,_createAnimation:(Ve,Be)=>{const ft=Ee.get(Ve);if(!ft)throw new Error("animation not registered");return ft(Be)},_register:Ve=>{Ke.indexOf(Ve)<0&&(Ve.disabled||De(Ve),Ke.push(Ve))},_unregister:Ve=>{const Be=Ke.indexOf(Ve);Be>-1&&Ke.splice(Be,1)},_setOpen:je,_setActiveMenu:De}})()},1178:(In,Et,j)=>{"use strict";j.d(Et,{a:()=>m,b:()=>ee,p:()=>_});const _=(ce,...$e)=>console.warn(`[Ionic Warning]: ${ce}`,...$e),m=(ce,...$e)=>console.error(`[Ionic Error]: ${ce}`,...$e),ee=(ce,...$e)=>console.error(`<${ce.tagName.toLowerCase()}> must be used inside ${$e.join(" or ")}.`)},9866:(In,Et,j)=>{"use strict";j.d(Et,{L:()=>ce,a:()=>$e,b:()=>Se,c:()=>_e,d:()=>Me,e:()=>Pt,g:()=>Ne,l:()=>et,s:()=>Ue,t:()=>ae});var _=j(5861),m=j(4083),ee=j(3577);const ce="ionViewWillEnter",$e="ionViewDidEnter",Se="ionViewWillLeave",_e="ionViewDidLeave",Me="ionViewWillUnload",ae=De=>new Promise((je,gt)=>{(0,m.w)(()=>{Ee(De),Ke(De).then(Dt=>{Dt.animation&&Dt.animation.destroy(),We(De),je(Dt)},Dt=>{We(De),gt(Dt)})})}),Ee=De=>{const je=De.enteringEl,gt=De.leavingEl;ke(je,gt,De.direction),De.showGoBack?je.classList.add("can-go-back"):je.classList.remove("can-go-back"),Ue(je,!1),je.style.setProperty("pointer-events","none"),gt&&(Ue(gt,!1),gt.style.setProperty("pointer-events","none"))},Ke=function(){var De=(0,_.Z)(function*(je){const gt=yield ct(je);return gt&&m.B.isBrowser?At(gt,je):xe(je)});return function(gt){return De.apply(this,arguments)}}(),We=De=>{const je=De.enteringEl,gt=De.leavingEl;je.classList.remove("ion-page-invisible"),je.style.removeProperty("pointer-events"),void 0!==gt&&(gt.classList.remove("ion-page-invisible"),gt.style.removeProperty("pointer-events"))},ct=function(){var De=(0,_.Z)(function*(je){return je.leavingEl&&je.animated&&0!==je.duration?je.animationBuilder?je.animationBuilder:"ios"===je.mode?(yield Promise.resolve().then(j.bind(j,3551))).iosTransitionAnimation:(yield Promise.resolve().then(j.bind(j,1138))).mdTransitionAnimation:void 0});return function(gt){return De.apply(this,arguments)}}(),At=function(){var De=(0,_.Z)(function*(je,gt){yield Re(gt,!0);const Dt=je(gt.baseEl,gt);Y(gt.enteringEl,gt.leavingEl);const ht=yield _t(Dt,gt);return gt.progressCallback&&gt.progressCallback(void 0),ht&&it(gt.enteringEl,gt.leavingEl),{hasCompleted:ht,animation:Dt}});return function(gt,Dt){return De.apply(this,arguments)}}(),xe=function(){var De=(0,_.Z)(function*(je){const gt=je.enteringEl,Dt=je.leavingEl;return yield Re(je,!1),Y(gt,Dt),it(gt,Dt),{hasCompleted:!0}});return function(gt){return De.apply(this,arguments)}}(),Re=function(){var De=(0,_.Z)(function*(je,gt){(void 0!==je.deepWait?je.deepWait:gt)&&(yield Promise.all([Pt(je.enteringEl),Pt(je.leavingEl)])),yield de(je.viewIsReady,je.enteringEl)});return function(gt,Dt){return De.apply(this,arguments)}}(),de=function(){var De=(0,_.Z)(function*(je,gt){je&&(yield je(gt))});return function(gt,Dt){return De.apply(this,arguments)}}(),_t=(De,je)=>{const gt=je.progressCallback,Dt=new Promise(ht=>{De.onFinish(Mt=>ht(1===Mt))});return gt?(De.progressStart(!0),gt(De)):De.play(),Dt},Y=(De,je)=>{et(je,Se),et(De,ce)},it=(De,je)=>{et(De,$e),et(je,_e)},et=(De,je)=>{if(De){const gt=new CustomEvent(je,{bubbles:!1,cancelable:!1});De.dispatchEvent(gt)}},Pt=function(){var De=(0,_.Z)(function*(je){const gt=je;if(gt){if(null!=gt.componentOnReady){if(null!=(yield gt.componentOnReady()))return}else if(null!=gt.__registerHost)return void(yield new Promise(ht=>(0,ee.r)(ht)));yield Promise.all(Array.from(gt.children).map(Pt))}});return function(gt){return De.apply(this,arguments)}}(),Ue=(De,je)=>{je?(De.setAttribute("aria-hidden","true"),De.classList.add("ion-page-hidden")):(De.hidden=!1,De.removeAttribute("aria-hidden"),De.classList.remove("ion-page-hidden"))},ke=(De,je,gt)=>{void 0!==De&&(De.style.zIndex="back"===gt?"99":"101"),void 0!==je&&(je.style.zIndex="100")},Ne=De=>De.classList.contains("ion-page")?De:De.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||De},5273:(In,Et,j)=>{"use strict";j.d(Et,{a:()=>ae,b:()=>Mt,c:()=>ee,g:()=>ye,i:()=>yt});var _=j(4083);class m{constructor(){this.m=new Map}reset(Ve){this.m=new Map(Object.entries(Ve))}get(Ve,Be){const ft=this.m.get(Ve);return void 0!==ft?ft:Be}getBoolean(Ve,Be=!1){const ft=this.m.get(Ve);return void 0===ft?Be:"string"==typeof ft?"true"===ft:!!ft}getNumber(Ve,Be){const ft=parseFloat(this.m.get(Ve));return isNaN(ft)?void 0!==Be?Be:NaN:ft}set(Ve,Be){this.m.set(Ve,Be)}}const ee=new m,ze="ionic-persist-config",ye=Fe=>Ee(Fe),ae=(Fe,Ve)=>("string"==typeof Fe&&(Ve=Fe,Fe=void 0),ye(Fe).includes(Ve)),Ee=(Fe=window)=>{if(typeof Fe>"u")return[];Fe.Ionic=Fe.Ionic||{};let Ve=Fe.Ionic.platforms;return null==Ve&&(Ve=Fe.Ionic.platforms=Ke(Fe),Ve.forEach(Be=>Fe.document.documentElement.classList.add(`plt-${Be}`))),Ve},Ke=Fe=>{const Ve=ee.get("platform");return Object.keys(Dt).filter(Be=>{const ft=null==Ve?void 0:Ve[Be];return"function"==typeof ft?ft(Fe):Dt[Be](Fe)})},ct=Fe=>!!(je(Fe,/iPad/i)||je(Fe,/Macintosh/i)&&it(Fe)),Re=Fe=>je(Fe,/android|sink/i),it=Fe=>gt(Fe,"(any-pointer:coarse)"),Pt=Fe=>Ue(Fe)||ke(Fe),Ue=Fe=>!!(Fe.cordova||Fe.phonegap||Fe.PhoneGap),ke=Fe=>{const Ve=Fe.Capacitor;return!(null==Ve||!Ve.isNative)},je=(Fe,Ve)=>Ve.test(Fe.navigator.userAgent),gt=(Fe,Ve)=>{var Be;return null===(Be=Fe.matchMedia)||void 0===Be?void 0:Be.call(Fe,Ve).matches},Dt={ipad:ct,iphone:Fe=>je(Fe,/iPhone/i),ios:Fe=>je(Fe,/iPhone|iPod/i)||ct(Fe),android:Re,phablet:Fe=>{const Ve=Fe.innerWidth,Be=Fe.innerHeight,ft=Math.min(Ve,Be),wt=Math.max(Ve,Be);return ft>390&&ft<520&&wt>620&&wt<800},tablet:Fe=>{const Ve=Fe.innerWidth,Be=Fe.innerHeight,ft=Math.min(Ve,Be),wt=Math.max(Ve,Be);return ct(Fe)||(Fe=>Re(Fe)&&!je(Fe,/mobile/i))(Fe)||ft>460&&ft<820&&wt>780&&wt<1400},cordova:Ue,capacitor:ke,electron:Fe=>je(Fe,/electron/i),pwa:Fe=>{var Ve;return!!(null!==(Ve=Fe.matchMedia)&&void 0!==Ve&&Ve.call(Fe,"(display-mode: standalone)").matches||Fe.navigator.standalone)},mobile:it,mobileweb:Fe=>it(Fe)&&!Pt(Fe),desktop:Fe=>!it(Fe),hybrid:Pt};let ht;const Mt=Fe=>Fe&&(0,_.g)(Fe)||ht,yt=(Fe={})=>{if(typeof window>"u")return;const Ve=window.document,Be=window,ft=Be.Ionic=Be.Ionic||{},wt={};Fe._ael&&(wt.ael=Fe._ael),Fe._rel&&(wt.rel=Fe._rel),Fe._ce&&(wt.ce=Fe._ce),(0,_.a)(wt);const nn=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(Fe=>{try{const Ve=Fe.sessionStorage.getItem(ze);return null!==Ve?JSON.parse(Ve):{}}catch{return{}}})(Be)),{persistConfig:!1}),ft.config),(Fe=>{const Ve={};return Fe.location.search.slice(1).split("&").map(Be=>Be.split("=")).map(([Be,ft])=>[decodeURIComponent(Be),decodeURIComponent(ft)]).filter(([Be])=>((Fe,Ve)=>Fe.substr(0,Ve.length)===Ve)(Be,"ionic:")).map(([Be,ft])=>[Be.slice("ionic:".length),ft]).forEach(([Be,ft])=>{Ve[Be]=ft}),Ve})(Be)),Fe);ee.reset(nn),ee.getBoolean("persistConfig")&&((Fe,Ve)=>{try{Fe.sessionStorage.setItem(ze,JSON.stringify(Ve))}catch{return}})(Be,nn),Ee(Be),ft.config=ee,ft.mode=ht=ee.get("mode",Ve.documentElement.getAttribute("mode")||(ae(Be,"ios")?"ios":"md")),ee.set("mode",ht),Ve.documentElement.setAttribute("mode",ht),Ve.documentElement.classList.add(ht),ee.getBoolean("_testing")&&ee.set("animated",!1);const zt=kt=>{var Ae;return null===(Ae=kt.tagName)||void 0===Ae?void 0:Ae.startsWith("ION-")},Dn=kt=>["ios","md"].includes(kt);(0,_.c)(kt=>{for(;kt;){const Ae=kt.mode||kt.getAttribute("mode");if(Ae){if(Dn(Ae))return Ae;zt(kt)&&console.warn('Invalid ionic mode: "'+Ae+'", expected: "ios" or "md"')}kt=kt.parentElement}return ht})}},3551:(In,Et,j)=>{"use strict";j.r(Et),j.d(Et,{iosTransitionAnimation:()=>Ke,shadow:()=>_e});var _=j(9613),m=j(9866);j(3457),j(4083);const Se=We=>document.querySelector(`${We}.ion-cloned-element`),_e=We=>We.shadowRoot||We,Me=We=>{const ct="ION-TABS"===We.tagName?We:We.querySelector("ion-tabs"),At="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=ct){const xe=ct.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=xe?xe.querySelector(At):null}return We.querySelector(At)},ze=(We,ct)=>{const At="ION-TABS"===We.tagName?We:We.querySelector("ion-tabs");let xe=[];if(null!=At){const Re=At.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=Re&&(xe=Re.querySelectorAll("ion-buttons"))}else xe=We.querySelectorAll("ion-buttons");for(const Re of xe){const de=Re.closest("ion-header"),_t=de&&!de.classList.contains("header-collapse-condense-inactive"),Y=Re.querySelector("ion-back-button"),it=Re.classList.contains("buttons-collapse");if(null!==Y&&("start"===Re.slot||""===Re.slot)&&(it&&_t&&ct||!it))return Y}return null},ae=(We,ct,At,xe,Re,de)=>{const _t=ct?`calc(100% - ${de.right+4}px)`:de.left-4+"px",Y=ct?"7px":"-7px",it=ct?"-4px":"4px",et=ct?"-4px":"4px",Pt=ct?"right":"left",Ue=ct?"left":"right",De=At?[{offset:0,opacity:1,transform:`translate3d(${it}, ${de.top-46}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${Y}, ${Re.top-40}px, 0) scale(2.1)`}]:[{offset:0,opacity:0,transform:`translate3d(${Y}, ${Re.top-40}px, 0) scale(2.1)`},{offset:1,opacity:1,transform:`translate3d(${it}, ${de.top-46}px, 0) scale(1)`}],Dt=At?[{offset:0,opacity:1,transform:`translate3d(${et}, ${de.top-46}px, 0) scale(1)`},{offset:.2,opacity:0,transform:`translate3d(${et}, ${de.top-41}px, 0) scale(0.6)`},{offset:1,opacity:0,transform:`translate3d(${et}, ${de.top-41}px, 0) scale(0.6)`}]:[{offset:0,opacity:0,transform:`translate3d(${et}, ${de.top-41}px, 0) scale(0.6)`},{offset:1,opacity:1,transform:`translate3d(${et}, ${de.top-46}px, 0) scale(1)`}],ht=(0,_.c)(),Mt=(0,_.c)(),yt=Se("ion-back-button"),Fe=_e(yt).querySelector(".button-text"),Ve=_e(yt).querySelector("ion-icon");yt.text=xe.text,yt.mode=xe.mode,yt.icon=xe.icon,yt.color=xe.color,yt.disabled=xe.disabled,yt.style.setProperty("display","block"),yt.style.setProperty("position","fixed"),Mt.addElement(Ve),ht.addElement(Fe),ht.beforeStyles({"transform-origin":`${Pt} center`}).beforeAddWrite(()=>{xe.style.setProperty("display","none"),yt.style.setProperty(Pt,_t)}).afterAddWrite(()=>{xe.style.setProperty("display",""),yt.style.setProperty("display","none"),yt.style.removeProperty(Pt)}).keyframes(De),Mt.beforeStyles({"transform-origin":`${Ue} center`}).keyframes(Dt),We.addAnimation([ht,Mt])},Ee=(We,ct,At,xe,Re,de)=>{const _t=ct?`calc(100% - ${Re.right}px)`:`${Re.left}px`,Y=ct?"-18px":"18px",it=ct?"right":"left",Ue=At?[{offset:0,opacity:0,transform:`translate3d(${Y}, ${de.top-4}px, 0) scale(0.49)`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0, ${Re.top-2}px, 0) scale(1)`}]:[{offset:0,opacity:.99,transform:`translate3d(0, ${Re.top-2}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${Y}, ${de.top-4}px, 0) scale(0.5)`}],ke=Se("ion-title"),Ne=(0,_.c)();ke.innerText=xe.innerText,ke.size=xe.size,ke.color=xe.color,Ne.addElement(ke),Ne.beforeStyles({"transform-origin":`${it} center`,height:"46px",display:"",position:"relative",[it]:_t}).beforeAddWrite(()=>{xe.style.setProperty("display","none")}).afterAddWrite(()=>{xe.style.setProperty("display",""),ke.style.setProperty("display","none")}).keyframes(Ue),We.addAnimation(Ne)},Ke=(We,ct)=>{var At;try{const xe="cubic-bezier(0.32,0.72,0,1)",Re="opacity",de="transform",_t="0%",it="rtl"===We.ownerDocument.dir,et=it?"-99.5%":"99.5%",Pt=it?"33%":"-33%",Ue=ct.enteringEl,ke=ct.leavingEl,Ne="back"===ct.direction,De=Ue.querySelector(":scope > ion-content"),je=Ue.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),gt=Ue.querySelectorAll(":scope > ion-header > ion-toolbar"),Dt=(0,_.c)(),ht=(0,_.c)();if(Dt.addElement(Ue).duration((null!==(At=ct.duration)&&void 0!==At?At:0)||540).easing(ct.easing||xe).fill("both").beforeRemoveClass("ion-page-invisible"),ke&&null!=We){const Ve=(0,_.c)();Ve.addElement(We),Dt.addAnimation(Ve)}if(De||0!==gt.length||0!==je.length?(ht.addElement(De),ht.addElement(je)):ht.addElement(Ue.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Dt.addAnimation(ht),Ne?ht.beforeClearStyles([Re]).fromTo("transform",`translateX(${Pt})`,`translateX(${_t})`).fromTo(Re,.8,1):ht.beforeClearStyles([Re]).fromTo("transform",`translateX(${et})`,`translateX(${_t})`),De){const Ve=_e(De).querySelector(".transition-effect");if(Ve){const Be=Ve.querySelector(".transition-cover"),ft=Ve.querySelector(".transition-shadow"),wt=(0,_.c)(),nn=(0,_.c)(),zt=(0,_.c)();wt.addElement(Ve).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),nn.addElement(Be).beforeClearStyles([Re]).fromTo(Re,0,.1),zt.addElement(ft).beforeClearStyles([Re]).fromTo(Re,.03,.7),wt.addAnimation([nn,zt]),ht.addAnimation([wt])}}const Mt=Ue.querySelector("ion-header.header-collapse-condense"),{forward:yt,backward:Fe}=((We,ct,At,xe,Re)=>{const de=ze(xe,At),_t=Me(Re),Y=Me(xe),it=ze(Re,At),et=null!==de&&null!==_t&&!At,Pt=null!==Y&&null!==it&&At;if(et){const Ue=_t.getBoundingClientRect(),ke=de.getBoundingClientRect();Ee(We,ct,At,_t,Ue,ke),ae(We,ct,At,de,Ue,ke)}else if(Pt){const Ue=Y.getBoundingClientRect(),ke=it.getBoundingClientRect();Ee(We,ct,At,Y,Ue,ke),ae(We,ct,At,it,Ue,ke)}return{forward:et,backward:Pt}})(Dt,it,Ne,Ue,ke);if(gt.forEach(Ve=>{const Be=(0,_.c)();Be.addElement(Ve),Dt.addAnimation(Be);const ft=(0,_.c)();ft.addElement(Ve.querySelector("ion-title"));const wt=(0,_.c)(),nn=Array.from(Ve.querySelectorAll("ion-buttons,[menuToggle]")),zt=Ve.closest("ion-header"),Dn=null==zt?void 0:zt.classList.contains("header-collapse-condense-inactive");let kt;kt=nn.filter(Ne?Yn=>{const xn=Yn.classList.contains("buttons-collapse");return xn&&!Dn||!xn}:Yn=>!Yn.classList.contains("buttons-collapse")),wt.addElement(kt);const Ae=(0,_.c)();Ae.addElement(Ve.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const St=(0,_.c)();St.addElement(_e(Ve).querySelector(".toolbar-background"));const gn=(0,_.c)(),On=Ve.querySelector("ion-back-button");if(On&&gn.addElement(On),Be.addAnimation([ft,wt,Ae,St,gn]),wt.fromTo(Re,.01,1),Ae.fromTo(Re,.01,1),Ne)Dn||ft.fromTo("transform",`translateX(${Pt})`,`translateX(${_t})`).fromTo(Re,.01,1),Ae.fromTo("transform",`translateX(${Pt})`,`translateX(${_t})`),gn.fromTo(Re,.01,1);else if(Mt||ft.fromTo("transform",`translateX(${et})`,`translateX(${_t})`).fromTo(Re,.01,1),Ae.fromTo("transform",`translateX(${et})`,`translateX(${_t})`),St.beforeClearStyles([Re,"transform"]),(null==zt?void 0:zt.translucent)?St.fromTo("transform",it?"translateX(-100%)":"translateX(100%)","translateX(0px)"):St.fromTo(Re,.01,"var(--opacity)"),yt||gn.fromTo(Re,.01,1),On&&!yt){const xn=(0,_.c)();xn.addElement(_e(On).querySelector(".button-text")).fromTo("transform",it?"translateX(-100px)":"translateX(100px)","translateX(0px)"),Be.addAnimation(xn)}}),ke){const Ve=(0,_.c)(),Be=ke.querySelector(":scope > ion-content"),ft=ke.querySelectorAll(":scope > ion-header > ion-toolbar"),wt=ke.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(Be||0!==ft.length||0!==wt.length?(Ve.addElement(Be),Ve.addElement(wt)):Ve.addElement(ke.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Dt.addAnimation(Ve),Ne){Ve.beforeClearStyles([Re]).fromTo("transform",`translateX(${_t})`,it?"translateX(-100%)":"translateX(100%)");const nn=(0,m.g)(ke);Dt.afterAddWrite(()=>{"normal"===Dt.getDirection()&&nn.style.setProperty("display","none")})}else Ve.fromTo("transform",`translateX(${_t})`,`translateX(${Pt})`).fromTo(Re,1,.8);if(Be){const nn=_e(Be).querySelector(".transition-effect");if(nn){const zt=nn.querySelector(".transition-cover"),Dn=nn.querySelector(".transition-shadow"),kt=(0,_.c)(),Ae=(0,_.c)(),St=(0,_.c)();kt.addElement(nn).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Ae.addElement(zt).beforeClearStyles([Re]).fromTo(Re,.1,0),St.addElement(Dn).beforeClearStyles([Re]).fromTo(Re,.7,.03),kt.addAnimation([Ae,St]),Ve.addAnimation([kt])}}ft.forEach(nn=>{const zt=(0,_.c)();zt.addElement(nn);const Dn=(0,_.c)();Dn.addElement(nn.querySelector("ion-title"));const kt=(0,_.c)(),Ae=nn.querySelectorAll("ion-buttons,[menuToggle]"),St=nn.closest("ion-header"),gn=null==St?void 0:St.classList.contains("header-collapse-condense-inactive"),On=Array.from(Ae).filter(_r=>{const tr=_r.classList.contains("buttons-collapse");return tr&&!gn||!tr});kt.addElement(On);const Yn=(0,_.c)(),xn=nn.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");xn.length>0&&Yn.addElement(xn);const cn=(0,_.c)();cn.addElement(_e(nn).querySelector(".toolbar-background"));const Cn=(0,_.c)(),hr=nn.querySelector("ion-back-button");if(hr&&Cn.addElement(hr),zt.addAnimation([Dn,kt,Yn,Cn,cn]),Dt.addAnimation(zt),Cn.fromTo(Re,.99,0),kt.fromTo(Re,.99,0),Yn.fromTo(Re,.99,0),Ne){if(gn||Dn.fromTo("transform",`translateX(${_t})`,it?"translateX(-100%)":"translateX(100%)").fromTo(Re,.99,0),Yn.fromTo("transform",`translateX(${_t})`,it?"translateX(-100%)":"translateX(100%)"),cn.beforeClearStyles([Re,"transform"]),(null==St?void 0:St.translucent)?cn.fromTo("transform","translateX(0px)",it?"translateX(-100%)":"translateX(100%)"):cn.fromTo(Re,"var(--opacity)",0),hr&&!Fe){const tr=(0,_.c)();tr.addElement(_e(hr).querySelector(".button-text")).fromTo("transform",`translateX(${_t})`,`translateX(${(it?-124:124)+"px"})`),zt.addAnimation(tr)}}else gn||Dn.fromTo("transform",`translateX(${_t})`,`translateX(${Pt})`).fromTo(Re,.99,0).afterClearStyles([de,Re]),Yn.fromTo("transform",`translateX(${_t})`,`translateX(${Pt})`).afterClearStyles([de,Re]),Cn.afterClearStyles([Re]),Dn.afterClearStyles([Re]),kt.afterClearStyles([Re])})}return Dt}catch(xe){throw xe}}},1138:(In,Et,j)=>{"use strict";j.r(Et),j.d(Et,{mdTransitionAnimation:()=>$e});var _=j(9613),m=j(9866);j(3457),j(4083);const $e=(Se,_e)=>{var Me,ze,ye;const Ke="back"===_e.direction,ct=_e.leavingEl,At=(0,m.g)(_e.enteringEl),xe=At.querySelector("ion-toolbar"),Re=(0,_.c)();if(Re.addElement(At).fill("both").beforeRemoveClass("ion-page-invisible"),Ke?Re.duration((null!==(Me=_e.duration)&&void 0!==Me?Me:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):Re.duration((null!==(ze=_e.duration)&&void 0!==ze?ze:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),xe){const de=(0,_.c)();de.addElement(xe),Re.addAnimation(de)}if(ct&&Ke){Re.duration((null!==(ye=_e.duration)&&void 0!==ye?ye:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const de=(0,_.c)();de.addElement((0,m.g)(ct)).onFinish(_t=>{1===_t&&de.elements.length>0&&de.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),Re.addAnimation(de)}return Re}},2583:(In,Et,j)=>{"use strict";j.d(Et,{B:()=>wt,G:()=>nn,a:()=>ye,b:()=>ae,c:()=>ct,d:()=>zt,e:()=>Dn,f:()=>je,g:()=>Dt,h:()=>yt,i:()=>Ve,j:()=>xe,k:()=>Me,m:()=>Ke,n:()=>_t,o:()=>Ne,s:()=>ft,t:()=>At});var _=j(5861),m=j(5273),ee=j(6782),ce=j(7593),$e=j(3577),Se=j(1178);let _e=0;const Me=new WeakMap,ze=kt=>({create:Ae=>Re(kt,Ae),dismiss:(Ae,St,gn)=>Ue(document,Ae,St,kt,gn),getTop:()=>(0,_.Z)(function*(){return Ne(document,kt)})()}),ye=ze("ion-alert"),ae=ze("ion-action-sheet"),Ke=ze("ion-modal"),ct=ze("ion-popover"),At=ze("ion-toast"),xe=kt=>{typeof document<"u"&&Pt(document);const Ae=_e++;kt.overlayIndex=Ae,kt.hasAttribute("id")||(kt.id=`ion-overlay-${Ae}`)},Re=(kt,Ae)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(kt).then(()=>{const St=document.createElement(kt);return St.classList.add("overlay-hidden"),Object.assign(St,Object.assign(Object.assign({},Ae),{hasController:!0})),ht(document).appendChild(St),new Promise(gn=>(0,$e.c)(St,gn))}):Promise.resolve(),de='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',_t=(kt,Ae)=>{let St=kt.querySelector(de);const gn=null==St?void 0:St.shadowRoot;gn&&(St=gn.querySelector(de)||St),St?(0,$e.f)(St):Ae.focus()},it=(kt,Ae)=>{const St=Array.from(kt.querySelectorAll(de));let gn=St.length>0?St[St.length-1]:null;const On=null==gn?void 0:gn.shadowRoot;On&&(gn=On.querySelector(de)||gn),gn?gn.focus():Ae.focus()},Pt=kt=>{0===_e&&(_e=1,kt.addEventListener("focus",Ae=>{((kt,Ae)=>{const St=Ne(Ae,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),gn=kt.target;St&&gn&&!St.classList.contains("ion-disable-focus-trap")&&(St.shadowRoot?(()=>{if(St.contains(gn))St.lastFocus=gn;else{const xn=St.lastFocus;_t(St,St),xn===Ae.activeElement&&it(St,St),St.lastFocus=Ae.activeElement}})():(()=>{if(St===gn)St.lastFocus=void 0;else{const xn=(0,$e.g)(St);if(!xn.contains(gn))return;const cn=xn.querySelector(".ion-overlay-wrapper");if(!cn)return;if(cn.contains(gn))St.lastFocus=gn;else{const Cn=St.lastFocus;_t(cn,St),Cn===Ae.activeElement&&it(cn,St),St.lastFocus=Ae.activeElement}}})())})(Ae,kt)},!0),kt.addEventListener("ionBackButton",Ae=>{const St=Ne(kt);null!=St&&St.backdropDismiss&&Ae.detail.register(ce.OVERLAY_BACK_BUTTON_PRIORITY,()=>St.dismiss(void 0,wt))}),kt.addEventListener("keydown",Ae=>{if("Escape"===Ae.key){const St=Ne(kt);null!=St&&St.backdropDismiss&&St.dismiss(void 0,wt)}}))},Ue=(kt,Ae,St,gn,On)=>{const Yn=Ne(kt,gn,On);return Yn?Yn.dismiss(Ae,St):Promise.reject("overlay does not exist")},Ne=(kt,Ae,St)=>{const gn=((kt,Ae)=>(void 0===Ae&&(Ae="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(kt.querySelectorAll(Ae)).filter(St=>St.overlayIndex>0)))(kt,Ae).filter(On=>!(kt=>kt.classList.contains("overlay-hidden"))(On));return void 0===St?gn[gn.length-1]:gn.find(On=>On.id===St)},De=(kt=!1)=>{const St=ht(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");St&&(kt?St.setAttribute("aria-hidden","true"):St.removeAttribute("aria-hidden"))},je=function(){var kt=(0,_.Z)(function*(Ae,St,gn,On,Yn){var xn,cn;if(Ae.presented)return;De(!0),Ae.presented=!0,Ae.willPresent.emit(),null===(xn=Ae.willPresentShorthand)||void 0===xn||xn.emit();const Cn=(0,m.b)(Ae),hr=Ae.enterAnimation?Ae.enterAnimation:m.c.get(St,"ios"===Cn?gn:On);(yield Mt(Ae,hr,Ae.el,Yn))&&(Ae.didPresent.emit(),null===(cn=Ae.didPresentShorthand)||void 0===cn||cn.emit()),"ION-TOAST"!==Ae.el.tagName&&gt(Ae.el),Ae.keyboardClose&&(null===document.activeElement||!Ae.el.contains(document.activeElement))&&Ae.el.focus()});return function(St,gn,On,Yn,xn){return kt.apply(this,arguments)}}(),gt=function(){var kt=(0,_.Z)(function*(Ae){let St=document.activeElement;if(!St)return;const gn=null==St?void 0:St.shadowRoot;gn&&(St=gn.querySelector(de)||St),yield Ae.onDidDismiss(),St.focus()});return function(St){return kt.apply(this,arguments)}}(),Dt=function(){var kt=(0,_.Z)(function*(Ae,St,gn,On,Yn,xn,cn){var Cn,hr;if(!Ae.presented)return!1;De(!1),Ae.presented=!1;try{Ae.el.style.setProperty("pointer-events","none"),Ae.willDismiss.emit({data:St,role:gn}),null===(Cn=Ae.willDismissShorthand)||void 0===Cn||Cn.emit({data:St,role:gn});const _r=(0,m.b)(Ae),tr=Ae.leaveAnimation?Ae.leaveAnimation:m.c.get(On,"ios"===_r?Yn:xn);gn!==nn&&(yield Mt(Ae,tr,Ae.el,cn)),Ae.didDismiss.emit({data:St,role:gn}),null===(hr=Ae.didDismissShorthand)||void 0===hr||hr.emit({data:St,role:gn}),Me.delete(Ae),Ae.el.classList.add("overlay-hidden"),Ae.el.style.removeProperty("pointer-events"),void 0!==Ae.el.lastFocus&&(Ae.el.lastFocus=void 0)}catch(_r){console.error(_r)}return Ae.el.remove(),!0});return function(St,gn,On,Yn,xn,cn,Cn){return kt.apply(this,arguments)}}(),ht=kt=>kt.querySelector("ion-app")||kt.body,Mt=function(){var kt=(0,_.Z)(function*(Ae,St,gn,On){gn.classList.remove("overlay-hidden");const xn=St(Ae.el,On);(!Ae.animated||!m.c.getBoolean("animated",!0))&&xn.duration(0),Ae.keyboardClose&&xn.beforeAddWrite(()=>{const Cn=gn.ownerDocument.activeElement;null!=Cn&&Cn.matches("input,ion-input, ion-textarea")&&Cn.blur()});const cn=Me.get(Ae)||[];return Me.set(Ae,[...cn,xn]),yield xn.play(),!0});return function(St,gn,On,Yn){return kt.apply(this,arguments)}}(),yt=(kt,Ae)=>{let St;const gn=new Promise(On=>St=On);return Fe(kt,Ae,On=>{St(On.detail)}),gn},Fe=(kt,Ae,St)=>{const gn=On=>{(0,$e.b)(kt,Ae,gn),St(On)};(0,$e.a)(kt,Ae,gn)},Ve=kt=>"cancel"===kt||kt===wt,Be=kt=>kt(),ft=(kt,Ae)=>{if("function"==typeof kt)return m.c.get("_zoneGate",Be)(()=>{try{return kt(Ae)}catch(gn){throw gn}})},wt="backdrop",nn="gesture",zt=kt=>{let St,Ae=!1;const gn=(0,ee.C)(),On=(cn=!1)=>{if(St&&!cn)return{delegate:St,inline:Ae};const{el:Cn,hasController:hr,delegate:_r}=kt;return Ae=null!==Cn.parentNode&&!hr,St=Ae?_r||gn:_r,{inline:Ae,delegate:St}};return{attachViewToDom:function(){var cn=(0,_.Z)(function*(Cn){const{delegate:hr}=On(!0);if(hr)return yield hr.attachViewToDom(kt.el,Cn);const{hasController:_r}=kt;if(_r&&void 0!==Cn)throw new Error("framework delegate is missing");return null});return function(hr){return cn.apply(this,arguments)}}(),removeViewFromDom:()=>{const{delegate:cn}=On();cn&&void 0!==kt.el&&cn.removeViewFromDom(kt.el.parentElement,kt.el)}}},Dn=()=>{let kt;const Ae=()=>{kt&&(kt(),kt=void 0)};return{addClickListener:(gn,On)=>{Ae();const Yn=void 0!==On?document.getElementById(On):null;Yn?kt=((cn,Cn)=>{const hr=()=>{Cn.present()};return cn.addEventListener("click",hr),()=>{cn.removeEventListener("click",hr)}})(Yn,gn):(0,Se.p)(`A trigger element with the ID "${On}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,gn)},removeClickListener:Ae}}},6738:(In,Et,j)=>{"use strict";j.d(Et,{H:()=>tr,a:()=>zt,b:()=>ot,c:()=>Ge,d:()=>rt,g:()=>Nt,h:()=>hr,r:()=>Re});var _=j(5861);let $e,Se,ee=0,ce=!1,_e=!1;const Me=typeof window<"u"?window:{},ze=Me.CSS,ye=Me.document||{head:{}},ae={$flags$:0,$resourcesUrl$:"",jmp:he=>he(),raf:he=>requestAnimationFrame(he),ael:(he,Ce,Tt,It)=>he.addEventListener(Ce,Tt,It),rel:(he,Ce,Tt,It)=>he.removeEventListener(Ce,Tt,It)},Ee=(()=>(ye.head.attachShadow+"").indexOf("[native")>-1)(),Ke=he=>Promise.resolve(he),We=(()=>{try{return new CSSStyleSheet,!0}catch{}return!1})(),ct={},At=new WeakMap,xe=he=>At.get(he),Re=(he,Ce)=>At.set(Ce.$lazyInstance$=he,Ce),_t=(he,Ce)=>Ce in he,Y=he=>console.error(he),it=new Map,Pt=new Map,Ue=[],ke=[],Ne=[],De=(he,Ce)=>Tt=>{he.push(Tt),ce||(ce=!0,Ce&&4&ae.$flags$?ht(Dt):ae.raf(Dt))},gt=(he,Ce)=>{let Tt=0,It=0;for(;Tt<he.length&&(It=performance.now())<Ce;)try{he[Tt++](It)}catch(Qt){Y(Qt)}Tt===he.length?he.length=0:0!==Tt&&he.splice(0,Tt)},Dt=()=>{ee++,(he=>{for(let Ce=0;Ce<he.length;Ce++)try{he[Ce](performance.now())}catch(Tt){Y(Tt)}he.length=0})(Ue);const he=2==(6&ae.$flags$)?performance.now()+10*Math.ceil(ee*(1/22)):1/0;gt(ke,he),gt(Ne,he),ke.length>0&&(Ne.push(...ke),ke.length=0),(ce=Ue.length+ke.length+Ne.length>0)?ae.raf(Dt):ee=0},ht=he=>Ke().then(he),Mt=De(Ue,!1),yt=De(ke,!0),Fe={},wt=he=>"object"==(he=typeof he)||"function"===he,zt=()=>ze&&ze.supports&&ze.supports("color","var(--c)")?Ke():j.e(4952).then(j.t.bind(j,9723,23)).then(()=>(ae.$cssShim$=Me.__cssshim)?ae.$cssShim$.i():0),On=new WeakMap,Cn=(he,Ce)=>"sc-"+he,hr=(he,Ce,...Tt)=>{let It=null,Qt=!1,Xe=!1,He=[];const Ct=pn=>{for(let kn=0;kn<pn.length;kn++)It=pn[kn],Array.isArray(It)?Ct(It):null!=It&&"boolean"!=typeof It&&((Qt="function"!=typeof he&&!wt(It))&&(It=String(It)),Qt&&Xe?He[He.length-1].$text$+=It:He.push(Qt?_r(null,It):It),Xe=Qt)};if(Ct(Tt),Ce){const pn=Ce.className||Ce.class;pn&&(Ce.class="object"!=typeof pn?pn:Object.keys(pn).filter(kn=>pn[kn]).join(" "))}const Gt=_r(he,null);return Gt.$attrs$=Ce,He.length>0&&(Gt.$children$=He),Gt},_r=(he,Ce)=>({$flags$:0,$tag$:he,$text$:Ce,$elm$:null,$children$:null,$attrs$:null}),tr={},zn=(he,Ce,Tt,It,Qt,Xe)=>{if(Tt!==It){let He=_t(he,Ce),Ct=Ce.toLowerCase();if("class"===Ce){const Gt=he.classList,pn=Cr(Tt),kn=Cr(It);Gt.remove(...pn.filter(wn=>wn&&!kn.includes(wn))),Gt.add(...kn.filter(wn=>wn&&!pn.includes(wn)))}else if("style"===Ce){for(const Gt in Tt)(!It||null==It[Gt])&&(Gt.includes("-")?he.style.removeProperty(Gt):he.style[Gt]="");for(const Gt in It)(!Tt||It[Gt]!==Tt[Gt])&&(Gt.includes("-")?he.style.setProperty(Gt,It[Gt]):he.style[Gt]=It[Gt])}else if("ref"===Ce)It&&It(he);else if(He||"o"!==Ce[0]||"n"!==Ce[1]){const Gt=wt(It);if((He||Gt&&null!==It)&&!Qt)try{if(he.tagName.includes("-"))he[Ce]=It;else{let pn=null==It?"":It;"list"===Ce?He=!1:(null==Tt||he[Ce]!=pn)&&(he[Ce]=pn)}}catch{}null==It||!1===It?he.removeAttribute(Ce):(!He||4&Xe||Qt)&&!Gt&&he.setAttribute(Ce,It=!0===It?"":It)}else Ce="-"===Ce[2]?Ce.slice(3):_t(Me,Ct)?Ct.slice(2):Ct[2]+Ce.slice(3),Tt&&ae.rel(he,Ce,Tt,!1),It&&ae.ael(he,Ce,It,!1)}},yi=/\s/,Cr=he=>he?he.split(yi):[],di=(he,Ce,Tt,It)=>{const Qt=11===Ce.$elm$.nodeType&&Ce.$elm$.host?Ce.$elm$.host:Ce.$elm$,Xe=he&&he.$attrs$||Fe,He=Ce.$attrs$||Fe;for(It in Xe)It in He||zn(Qt,It,Xe[It],void 0,Tt,Ce.$flags$);for(It in He)zn(Qt,It,Xe[It],He[It],Tt,Ce.$flags$)},wi=(he,Ce,Tt,It)=>{let He,Ct,Qt=Ce.$children$[Tt],Xe=0;if(null!==Qt.$text$)He=Qt.$elm$=ye.createTextNode(Qt.$text$);else{if(_e||(_e="svg"===Qt.$tag$),He=Qt.$elm$=ye.createElementNS(_e?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",Qt.$tag$),_e&&"foreignObject"===Qt.$tag$&&(_e=!1),di(null,Qt,_e),(he=>null!=he)($e)&&He["s-si"]!==$e&&He.classList.add(He["s-si"]=$e),Qt.$children$)for(Xe=0;Xe<Qt.$children$.length;++Xe)Ct=wi(he,Qt,Xe),Ct&&He.appendChild(Ct);"svg"===Qt.$tag$?_e=!1:"foreignObject"===He.tagName&&(_e=!0)}return He},Gn=(he,Ce,Tt,It,Qt,Xe)=>{let Ct,He=he;for(He.shadowRoot&&He.tagName===Se&&(He=He.shadowRoot);Qt<=Xe;++Qt)It[Qt]&&(Ct=wi(null,Tt,Qt),Ct&&(It[Qt].$elm$=Ct,He.insertBefore(Ct,Ce)))},qn=(he,Ce,Tt,It,Qt)=>{for(;Ce<=Tt;++Ce)(It=he[Ce])&&(Qt=It.$elm$,Jr(It),Qt.remove())},yn=(he,Ce)=>he.$tag$===Ce.$tag$,on=(he,Ce)=>{const Tt=Ce.$elm$=he.$elm$,It=he.$children$,Qt=Ce.$children$,Xe=Ce.$tag$,He=Ce.$text$;null===He?(_e="svg"===Xe||"foreignObject"!==Xe&&_e,di(he,Ce,_e),null!==It&&null!==Qt?((he,Ce,Tt,It)=>{let Qn,Qt=0,Xe=0,He=Ce.length-1,Ct=Ce[0],Gt=Ce[He],pn=It.length-1,kn=It[0],wn=It[pn];for(;Qt<=He&&Xe<=pn;)null==Ct?Ct=Ce[++Qt]:null==Gt?Gt=Ce[--He]:null==kn?kn=It[++Xe]:null==wn?wn=It[--pn]:yn(Ct,kn)?(on(Ct,kn),Ct=Ce[++Qt],kn=It[++Xe]):yn(Gt,wn)?(on(Gt,wn),Gt=Ce[--He],wn=It[--pn]):yn(Ct,wn)?(on(Ct,wn),he.insertBefore(Ct.$elm$,Gt.$elm$.nextSibling),Ct=Ce[++Qt],wn=It[--pn]):yn(Gt,kn)?(on(Gt,kn),he.insertBefore(Gt.$elm$,Ct.$elm$),Gt=Ce[--He],kn=It[++Xe]):(Qn=wi(Ce&&Ce[Xe],Tt,Xe),kn=It[++Xe],Qn&&Ct.$elm$.parentNode.insertBefore(Qn,Ct.$elm$));Qt>He?Gn(he,null==It[pn+1]?null:It[pn+1].$elm$,Tt,It,Xe,pn):Xe>pn&&qn(Ce,Qt,He)})(Tt,It,Ce,Qt):null!==Qt?(null!==he.$text$&&(Tt.textContent=""),Gn(Tt,null,Ce,Qt,0,Qt.length-1)):null!==It&&qn(It,0,It.length-1),_e&&"svg"===Xe&&(_e=!1)):he.$text$!==He&&(Tt.data=He)},Jr=he=>{he.$attrs$&&he.$attrs$.ref&&he.$attrs$.ref(null),he.$children$&&he.$children$.forEach(Jr)},Qr=(he,Ce)=>{Ce&&!he.$onRenderResolve$&&Ce["s-p"].push(new Promise(Tt=>he.$onRenderResolve$=Tt))},zr=(he,Ce,Tt,It)=>{if(Ce.$flags$|=16,4&Ce.$flags$)return void(Ce.$flags$|=512);const He=Ce.$lazyInstance$,Ct=()=>pi(he,Ce,Tt,He,It);return Qr(Ce,Ce.$ancestorComponent$),It&&(Ce.$flags$|=256,Ce.$queuedListeners$&&(Ce.$queuedListeners$.forEach(([pn,kn])=>yr(He,pn,kn)),Ce.$queuedListeners$=null)),Ai(void 0,()=>yt(Ct))},pi=(he,Ce,Tt,It,Qt)=>{const He=he["s-rc"];Qt&&((he,Ce,Tt)=>{const Qt=((he,Ce,Tt,It)=>{let Qt=Cn(Ce.$tagName$),Xe=Pt.get(Qt);if(he=11===he.nodeType?he:ye,Xe)if("string"==typeof Xe){let Ct,He=On.get(he=he.head||he);if(He||On.set(he,He=new Set),!He.has(Qt)){if(ae.$cssShim$){Ct=ae.$cssShim$.createHostStyle(It,Qt,Xe,!!(10&Ce.$flags$));const Gt=Ct["s-sc"];Gt&&(Qt=Gt,He=null)}else Ct=ye.createElement("style"),Ct.innerHTML=Xe;he.insertBefore(Ct,he.querySelector("link")),He&&He.add(Qt)}}else he.adoptedStyleSheets.includes(Xe)||(he.adoptedStyleSheets=[...he.adoptedStyleSheets,Xe]);return Qt})(Ee&&he.shadowRoot?he.shadowRoot:he.getRootNode(),Ce,0,he);10&Ce.$flags$&&(he["s-sc"]=Qt,he.classList.add(Qt+"-h"))})(he,Tt);((he,Ce,Tt,It)=>{Se=he.tagName;const Qt=Ce.$vnode$||_r(null,null),Xe=(he=>he&&he.$tag$===tr)(It)?It:hr(null,null,It);Xe.$tag$=null,Xe.$flags$|=4,Ce.$vnode$=Xe,Xe.$elm$=Qt.$elm$=he.shadowRoot||he,$e=he["s-sc"],on(Qt,Xe)})(he,Ce,0,Lr(It)),ae.$cssShim$&&ae.$cssShim$.updateHost(he),Ce.$flags$&=-17,Ce.$flags$|=2,He&&(He.forEach(Gt=>Gt()),he["s-rc"]=void 0);{const Gt=he["s-p"],pn=()=>gi(he,Ce,Tt);0===Gt.length?pn():(Promise.all(Gt).then(pn),Ce.$flags$|=4,Gt.length=0)}},Lr=(he,Ce)=>{try{he=he.render()}catch(Tt){Y(Tt)}return he},gi=(he,Ce,Tt)=>{const Qt=Ce.$lazyInstance$,Xe=Ce.$ancestorComponent$;64&Ce.$flags$||(Ce.$flags$|=64,mr(he),yr(Qt,"componentDidLoad"),Ce.$onReadyResolve$(he),Xe||lr()),Ce.$onInstanceResolve$(he),Ce.$onRenderResolve$&&(Ce.$onRenderResolve$(),Ce.$onRenderResolve$=void 0),512&Ce.$flags$&&ht(()=>zr(he,Ce,Tt,!1)),Ce.$flags$&=-517},lr=he=>{mr(ye.documentElement),ae.$flags$|=2},yr=(he,Ce,Tt)=>{if(he&&he[Ce])try{return he[Ce](Tt)}catch(It){Y(It)}},Ai=(he,Ce)=>he&&he.then?he.then(Ce):Ce(),mr=he=>he.classList.add("hydrated"),qe=(he,Ce,Tt)=>{if(Ce.$members$){const It=Object.entries(Ce.$members$),Qt=he.prototype;if(It.forEach(([Xe,[He]])=>{31&He||2&Tt&&32&He?Object.defineProperty(Qt,Xe,{get(){return((he,Ce)=>xe(this).$instanceValues$.get(Ce))(0,Xe)},set(Ct){((he,Ce,Tt,It)=>{const Qt=xe(he),Xe=Qt.$hostElement$,He=Qt.$instanceValues$.get(Ce),Ct=Qt.$flags$,Gt=Qt.$lazyInstance$;Tt=((he,Ce)=>null==he||wt(he)?he:4&Ce?"false"!==he&&(""===he||!!he):2&Ce?parseFloat(he):1&Ce?String(he):he)(Tt,It.$members$[Ce][0]),Tt!==He&&(!(8&Ct)||void 0===He)&&(Qt.$instanceValues$.set(Ce,Tt),Gt&&2==(18&Ct)&&zr(Xe,Qt,It,!1))})(this,Xe,Ct,Ce)},configurable:!0,enumerable:!0}):1&Tt&&64&He&&Object.defineProperty(Qt,Xe,{value(...Ct){const Gt=xe(this);return Gt.$onInstancePromise$.then(()=>Gt.$lazyInstance$[Xe](...Ct))}})}),1&Tt){const Xe=new Map;Qt.attributeChangedCallback=function(He,Ct,Gt){ae.jmp(()=>{const pn=Xe.get(He);this[pn]=(null!==Gt||"boolean"!=typeof this[pn])&&Gt})},he.observedAttributes=It.filter(([He,Ct])=>15&Ct[0]).map(([He,Ct])=>{const Gt=Ct[1]||He;return Xe.set(Gt,He),Gt})}}return he},Ot=function(){var he=(0,_.Z)(function*(Ce,Tt,It,Qt,Xe){if(!(32&Tt.$flags$)){Tt.$flags$|=32;{if(Xe=((he,Ce,Tt)=>{const It=he.$tagName$.replace(/-/g,"_"),Qt=he.$lazyBundleIds$,Xe=it.get(Qt);return Xe?Xe[It]:j(5899)(`./${Qt}.entry.js`).then(He=>(it.set(Qt,He),He[It]),Y)})(It),Xe.then){const kn=()=>{};Xe=yield Xe,kn()}Xe.isProxied||(qe(Xe,It,2),Xe.isProxied=!0);const pn=()=>{};Tt.$flags$|=8;try{new Xe(Tt)}catch(kn){Y(kn)}Tt.$flags$&=-9,pn()}const Gt=Cn(It.$tagName$);if(!Pt.has(Gt)&&Xe.style){const pn=()=>{};let kn=Xe.style;8&It.$flags$&&(kn=yield j.e(5487).then(j.bind(j,5487)).then(wn=>wn.scopeCss(kn,Gt,!1))),((he,Ce,Tt)=>{let It=Pt.get(he);We&&Tt?(It=It||new CSSStyleSheet,It.replace(Ce)):It=Ce,Pt.set(he,It)})(Gt,kn,!!(1&It.$flags$)),pn()}}const He=Tt.$ancestorComponent$,Ct=()=>zr(Ce,Tt,It,!0);He&&He["s-rc"]?He["s-rc"].push(Ct):Ct()});return function(Tt,It,Qt,Xe,He){return he.apply(this,arguments)}}(),ut=(he,Ce)=>{if(!(1&ae.$flags$)){const Tt=()=>{},It=xe(he);if(Ce.$listeners$&&(It.$rmListeners$=((he,Ce,Tt)=>{Ce.$queuedListeners$=Ce.$queuedListeners$||[];const It=Tt.map(([Qt,Xe,He])=>{const Ct=((he,Ce)=>32&Ce?ye.body:he)(he,Qt),Gt=((he,Ce)=>Tt=>{256&he.$flags$?he.$lazyInstance$[Ce](Tt):he.$queuedListeners$.push([Ce,Tt])})(Ce,He),pn=(he=>0!=(2&he))(Qt);return ae.ael(Ct,Xe,Gt,pn),()=>ae.rel(Ct,Xe,Gt,pn)});return()=>It.forEach(Qt=>Qt())})(he,It,Ce.$listeners$)),!(1&It.$flags$)){It.$flags$|=1;{let Qt=he;for(;Qt=Qt.parentNode||Qt.host;)if(Qt["s-p"]){Qr(It,It.$ancestorComponent$=Qt);break}}Ce.$members$&&Object.entries(Ce.$members$).forEach(([Qt,[Xe]])=>{if(31&Xe&&he.hasOwnProperty(Qt)){const He=he[Qt];delete he[Qt],he[Qt]=He}}),ht(()=>Ot(he,It,Ce))}Tt()}},ot=(he,Ce={})=>{const It=[],Qt=Ce.exclude||[],Xe=Me.customElements,He=ye.head,Ct=He.querySelector("meta[charset]"),Gt=ye.createElement("style"),pn=[];let kn,wn=!0;Object.assign(ae,Ce),ae.$resourcesUrl$=new URL(Ce.resourcesUrl||"./",ye.baseURI).href,Ce.syncQueue&&(ae.$flags$|=4),he.forEach(Qn=>Qn[1].forEach(Jn=>{const Wn={$flags$:Jn[0],$tagName$:Jn[1],$members$:Jn[2],$listeners$:Jn[3]};Wn.$members$=Jn[2],Wn.$listeners$=Jn[3],!Ee&&1&Wn.$flags$&&(Wn.$flags$|=8);const Xn=Wn.$tagName$,ys=class extends HTMLElement{constructor(vi){super(vi),(he=>{const Ce={$flags$:0,$hostElement$:he,$instanceValues$:new Map};Ce.$onInstancePromise$=new Promise(Tt=>Ce.$onInstanceResolve$=Tt),Ce.$onReadyPromise$=new Promise(Tt=>Ce.$onReadyResolve$=Tt),he["s-p"]=[],he["s-rc"]=[],At.set(he,Ce)})(vi=this),1&Wn.$flags$&&(Ee?vi.attachShadow({mode:"open"}):"shadowRoot"in vi||(vi.shadowRoot=vi))}connectedCallback(){kn&&(clearTimeout(kn),kn=null),wn?pn.push(this):ae.jmp(()=>ut(this,Wn))}disconnectedCallback(){ae.jmp(()=>(he=>{if(!(1&ae.$flags$)){const Ce=xe(he),Tt=Ce.$lazyInstance$;Ce.$rmListeners$&&(Ce.$rmListeners$(),Ce.$rmListeners$=void 0),ae.$cssShim$&&ae.$cssShim$.removeHost(he),yr(Tt,"componentDidUnload")}})(this))}forceUpdate(){((he,Ce)=>{{const Tt=xe(he);Tt.$hostElement$.isConnected&&2==(18&Tt.$flags$)&&zr(he,Tt,Ce,!1)}})(this,Wn)}componentOnReady(){return xe(this).$onReadyPromise$}};Wn.$lazyBundleIds$=Qn[0],!Qt.includes(Xn)&&!Xe.get(Xn)&&(It.push(Xn),Xe.define(Xn,qe(ys,Wn,1)))})),Gt.innerHTML=It+"{visibility:hidden}.hydrated{visibility:inherit}",Gt.setAttribute("data-styles",""),He.insertBefore(Gt,Ct?Ct.nextSibling:He.firstChild),wn=!1,pn.length>0?pn.forEach(Qn=>Qn.connectedCallback()):ae.jmp(()=>kn=setTimeout(lr,30))},Ge=(he,Ce,Tt)=>{const It=Nt(he);return{emit:Qt=>{const Xe=new CustomEvent(Ce,{bubbles:!!(4&Tt),composed:!!(2&Tt),cancelable:!!(1&Tt),detail:Qt});return It.dispatchEvent(Xe),Xe}}},rt=(he,Ce)=>Ce in ct?ct[Ce]:"window"===Ce?Me:"document"===Ce?ye:"isServer"!==Ce&&"isPrerender"!==Ce&&("isClient"===Ce||("resourcesUrl"===Ce||"publicPath"===Ce?(he=>{const Ce=new URL(".",ae.$resourcesUrl$);return Ce.origin!==Me.location.origin?Ce.href:Ce.pathname})():"queue"===Ce?{write:yt,read:Mt,tick:{then:Tt=>ht(Tt)}}:void 0)),Nt=he=>xe(he).$hostElement$},7556:(In,Et,j)=>{"use strict";j.d(Et,{e:()=>_e});var _=j(5861),m=j(9808),ee=j(4650),ce=j(1762),$e=j(1205),Se=j(529);let _e=(()=>{class Me{constructor(ye,ae,Ee){this.afs=ye,this.afAuth=ae,this.http=Ee,this.updateLogin()}updateLogin(){this.afAuth.authState.subscribe(ye=>{ye?(this.userData=ye,localStorage.setItem("user",JSON.stringify(this.userData)),Me.logged=!0):(this.userData=null,localStorage.removeItem("user"),Me.logged=!1)}),console.log("Logged: "+Me.logged),console.log("JWT: "+this.getJWT())}checkLogged(){return null===localStorage.getItem("user")?(this.userData=null,Me.logged=!1,!1):(Me.logged=!0,!0)}doSignup(ye){var ae=this;return(0,_.Z)(function*(){try{yield ae.afAuth.createUserWithEmailAndPassword(ye.email,ye.password),ae.updateLogin()}catch(Ee){console.log(Ee)}})()}doLogin(ye){var ae=this;return(0,_.Z)(function*(){try{const Ee=yield ae.afAuth.signInWithEmailAndPassword(ye.email,ye.password);if(Ee.user)return ae.updateLogin(),Ee}catch(Ee){return Ee}})()}doLogout(){var ye=this;return(0,_.Z)(function*(){try{yield ye.afAuth.signOut(),ye.updateLogin()}catch(ae){console.log(ae)}})()}fetchJWT(){var ye=this;return(0,_.Z)(function*(){const ae=(yield(0,m.n)(ye.http.post("http://localhost:3000/api/login",{email:"test@test.com"}))).token;ae&&ye.setJWT(ae)})()}setJWT(ye){localStorage.setItem("JWT",ye),this.token=ye}getUser(){return JSON.parse(localStorage.getItem("user")||"{}")}getJWT(){return localStorage.getItem("JWT")}}return Me.logged=!1,Me.\u0275fac=function(ye){return new(ye||Me)(ee.LFG(ce.ST),ee.LFG($e.zQ),ee.LFG(Se.eN))},Me.\u0275prov=ee.Yz7({token:Me,factory:Me.\u0275fac,providedIn:"root"}),Me})()},2340:(In,Et,j)=>{"use strict";j.d(Et,{N:()=>_});const _={production:!0,firebase:{apiKey:"AIzaSyAx5viaf5WoWezx2kxJ8fnpWElWMypde0s",authDomain:"hightracks-46986.firebaseapp.com",projectId:"hightracks-46986",storageBucket:"hightracks-46986.appspot.com",messagingSenderId:"643779822309",appId:"1:643779822309:web:10e7cb0f1b7b47128c8a0c"},url:"http://localhost:3000/api/"}},1183:(In,Et,j)=>{"use strict";var _=j(4650),m=j(1481),ee=j(1194),ce=j(650);const $e=[{path:"",loadChildren:()=>j.e(2282).then(j.bind(j,2282)).then(u=>u.routes)},{path:"login",loadChildren:()=>j.e(338).then(j.bind(j,338)).then(u=>u.routes)}];var Se=j(1205),_e=j(9751),Me=j(9646),ze=j(8996),ye=j(4986),ae=j(4482),Ee=j(5403),We=j(4004),ct=j(3900),At=j(4976),xe=j(2011),Re=j(3942),de=j(5861),_t=j(6881),Y=j(2090),it=j(4859);const et="firebasestorage.googleapis.com",Pt="storageBucket";class De extends Y.ZR{constructor(a,l,p=0){super(gt(a),`Firebase Storage: ${l} (${gt(a)})`),this.status_=p,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,De.prototype)}get status(){return this.status_}set status(a){this.status_=a}_codeEquals(a){return gt(a)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(a){this.customData.serverResponse=a,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var je=(()=>{return(u=je||(je={})).UNKNOWN="unknown",u.OBJECT_NOT_FOUND="object-not-found",u.BUCKET_NOT_FOUND="bucket-not-found",u.PROJECT_NOT_FOUND="project-not-found",u.QUOTA_EXCEEDED="quota-exceeded",u.UNAUTHENTICATED="unauthenticated",u.UNAUTHORIZED="unauthorized",u.UNAUTHORIZED_APP="unauthorized-app",u.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",u.INVALID_CHECKSUM="invalid-checksum",u.CANCELED="canceled",u.INVALID_EVENT_NAME="invalid-event-name",u.INVALID_URL="invalid-url",u.INVALID_DEFAULT_BUCKET="invalid-default-bucket",u.NO_DEFAULT_BUCKET="no-default-bucket",u.CANNOT_SLICE_BLOB="cannot-slice-blob",u.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",u.NO_DOWNLOAD_URL="no-download-url",u.INVALID_ARGUMENT="invalid-argument",u.INVALID_ARGUMENT_COUNT="invalid-argument-count",u.APP_DELETED="app-deleted",u.INVALID_ROOT_OPERATION="invalid-root-operation",u.INVALID_FORMAT="invalid-format",u.INTERNAL_ERROR="internal-error",u.UNSUPPORTED_ENVIRONMENT="unsupported-environment",je;var u})();function gt(u){return"storage/"+u}function Dt(){return new De(je.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Be(){return new De(je.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ft(){return new De(je.CANCELED,"User canceled the upload/download.")}function Dn(){return new De(je.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function gn(u){return new De(je.INVALID_ARGUMENT,u)}function On(){return new De(je.APP_DELETED,"The Firebase app was deleted.")}function Yn(u){return new De(je.INVALID_ROOT_OPERATION,"The operation '"+u+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function xn(u,a){return new De(je.INVALID_FORMAT,"String does not match format '"+u+"': "+a)}function cn(u){throw new De(je.INTERNAL_ERROR,"Internal error: "+u)}class Cn{constructor(a,l){this.bucket=a,this.path_=l}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const a=encodeURIComponent;return"/b/"+a(this.bucket)+"/o/"+a(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(a,l){let p;try{p=Cn.makeFromUrl(a,l)}catch{return new Cn(a,"")}if(""===p.path)return p;throw function nn(u){return new De(je.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+u+"'.")}(a)}static makeFromUrl(a,l){let p=null;const I="([A-Za-z0-9.\\-_]+)",te=new RegExp("^gs://"+I+"(/(.*))?$","i");function Oe(ss){ss.path_=decodeURIComponent(ss.path)}const qt=l.replace(/[.]/g,"\\."),Cs=[{regex:te,indices:{bucket:1,path:3},postModify:function R(ss){"/"===ss.path.charAt(ss.path.length-1)&&(ss.path_=ss.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${qt}/v[A-Za-z0-9_]+/b/${I}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:Oe},{regex:new RegExp(`^https?://${l===et?"(?:storage.googleapis.com|storage.cloud.google.com)":l}/${I}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:Oe}];for(let ss=0;ss<Cs.length;ss++){const yu=Cs[ss],oc=yu.regex.exec(a);if(oc){let Sc=oc[yu.indices.path];Sc||(Sc=""),p=new Cn(oc[yu.indices.bucket],Sc),yu.postModify(p);break}}if(null==p)throw function wt(u){return new De(je.INVALID_URL,"Invalid URL '"+u+"'.")}(a);return p}}class hr{constructor(a){this.promise_=Promise.reject(a)}getPromise(){return this.promise_}cancel(a=!1){}}function Cr(u){return"string"==typeof u||u instanceof String}function di(u){return wi()&&u instanceof Blob}function wi(){return typeof Blob<"u"&&!(0,Y.UG)()}function Gn(u,a,l,p){if(p<a)throw gn(`Invalid value for '${u}'. Expected ${a} or greater.`);if(p>l)throw gn(`Invalid value for '${u}'. Expected ${l} or less.`)}function qn(u,a,l){let p=a;return null==l&&(p=`https://${a}`),`${l}://${p}/v0${u}`}function ln(u){const a=encodeURIComponent;let l="?";for(const p in u)u.hasOwnProperty(p)&&(l=l+(a(p)+"=")+a(u[p])+"&");return l=l.slice(0,-1),l}var yn=(()=>{return(u=yn||(yn={}))[u.NO_ERROR=0]="NO_ERROR",u[u.NETWORK_ERROR=1]="NETWORK_ERROR",u[u.ABORT=2]="ABORT",yn;var u})();function on(u,a){const l=u>=500&&u<600,I=-1!==[408,429].indexOf(u),R=-1!==a.indexOf(u);return l||I||R}class Jr{constructor(a,l,p,I,R,V,te,pe,Oe,Ft,qt,sn=!0){this.url_=a,this.method_=l,this.headers_=p,this.body_=I,this.successCodes_=R,this.additionalRetryCodes_=V,this.callback_=te,this.errorCallback_=pe,this.timeout_=Oe,this.progressCallback_=Ft,this.connectionFactory_=qt,this.retry=sn,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Rn,Zn)=>{this.resolve_=Rn,this.reject_=Zn,this.start_()})}start_(){const l=(p,I)=>{const R=this.resolve_,V=this.reject_,te=I.connection;if(I.wasSuccessCode)try{const pe=this.callback_(te,te.getResponse());!function bn(u){return void 0!==u}(pe)?R():R(pe)}catch(pe){V(pe)}else if(null!==te){const pe=Dt();pe.serverResponse=te.getErrorText(),V(this.errorCallback_?this.errorCallback_(te,pe):pe)}else V(I.canceled?this.appDelete_?On():ft():Be())};this.canceled_?l(0,new Dr(!1,null,!0)):this.backoffId_=function _r(u,a,l){let p=1,I=null,R=null,V=!1,te=0;function pe(){return 2===te}let Oe=!1;function Ft(...oi){Oe||(Oe=!0,a.apply(null,oi))}function qt(oi){I=setTimeout(()=>{I=null,u(Rn,pe())},oi)}function sn(){R&&clearTimeout(R)}function Rn(oi,...Mi){if(Oe)return void sn();if(oi)return sn(),void Ft.call(null,oi,...Mi);if(pe()||V)return sn(),void Ft.call(null,oi,...Mi);let Cs;p<64&&(p*=2),1===te?(te=2,Cs=0):Cs=1e3*(p+Math.random()),qt(Cs)}let Zn=!1;function Mr(oi){Zn||(Zn=!0,sn(),!Oe&&(null!==I?(oi||(te=2),clearTimeout(I),qt(0)):oi||(te=1)))}return qt(0),R=setTimeout(()=>{V=!0,Mr(!0)},l),Mr}((p,I)=>{if(I)return void p(!1,new Dr(!1,null,!0));const R=this.connectionFactory_();this.pendingConnection_=R;const V=te=>{null!==this.progressCallback_&&this.progressCallback_(te.loaded,te.lengthComputable?te.total:-1)};null!==this.progressCallback_&&R.addUploadProgressListener(V),R.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&R.removeUploadProgressListener(V),this.pendingConnection_=null;const te=R.getErrorCode()===yn.NO_ERROR,pe=R.getStatus();if(!te||on(pe,this.additionalRetryCodes_)&&this.retry){const Ft=R.getErrorCode()===yn.ABORT;return void p(!1,new Dr(!1,null,Ft))}const Oe=-1!==this.successCodes_.indexOf(pe);p(!0,new Dr(Oe,R))})},l,this.timeout_)}getPromise(){return this.promise_}cancel(a){this.canceled_=!0,this.appDelete_=a||!1,null!==this.backoffId_&&function tr(u){u(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Dr{constructor(a,l,p){this.wasSuccessCode=a,this.connection=l,this.canceled=!!p}}function lr(...u){const a=function ur(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==a){const l=new a;for(let p=0;p<u.length;p++)l.append(u[p]);return l.getBlob()}if(wi())return new Blob(u);throw new De(je.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const mr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Kt{constructor(a,l){this.data=a,this.contentType=l||null}}function Ze(u,a){switch(u){case mr.RAW:return new Kt(nt(a));case mr.BASE64:case mr.BASE64URL:return new Kt(Yt(u,a));case mr.DATA_URL:return new Kt(function Ie(u){const a=new we(u);return a.base64?Yt(mr.BASE64,a.rest):function en(u){let a;try{a=decodeURIComponent(u)}catch{throw xn(mr.DATA_URL,"Malformed data URL.")}return nt(a)}(a.rest)}(a),function qe(u){return new we(u).contentType}(a))}throw Dt()}function nt(u){const a=[];for(let l=0;l<u.length;l++){let p=u.charCodeAt(l);p<=127?a.push(p):p<=2047?a.push(192|p>>6,128|63&p):55296==(64512&p)?l<u.length-1&&56320==(64512&u.charCodeAt(l+1))?(p=65536|(1023&p)<<10|1023&u.charCodeAt(++l),a.push(240|p>>18,128|p>>12&63,128|p>>6&63,128|63&p)):a.push(239,191,189):56320==(64512&p)?a.push(239,191,189):a.push(224|p>>12,128|p>>6&63,128|63&p)}return new Uint8Array(a)}function Yt(u,a){switch(u){case mr.BASE64:{const I=-1!==a.indexOf("-"),R=-1!==a.indexOf("_");if(I||R)throw xn(u,"Invalid character '"+(I?"-":"_")+"' found: is it base64url encoded?");break}case mr.BASE64URL:{const I=-1!==a.indexOf("+"),R=-1!==a.indexOf("/");if(I||R)throw xn(u,"Invalid character '"+(I?"+":"/")+"' found: is it base64 encoded?");a=a.replace(/-/g,"+").replace(/_/g,"/");break}}let l;try{l=function Ai(u){if(typeof atob>"u")throw function St(u){return new De(je.UNSUPPORTED_ENVIRONMENT,`${u} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(u)}(a)}catch(I){throw I.message.includes("polyfill")?I:xn(u,"Invalid character found")}const p=new Uint8Array(l.length);for(let I=0;I<l.length;I++)p[I]=l.charCodeAt(I);return p}class we{constructor(a){this.base64=!1,this.contentType=null;const l=a.match(/^data:([^,]+)?,/);if(null===l)throw xn(mr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const p=l[1]||null;null!=p&&(this.base64=function Ot(u,a){return u.length>=a.length&&u.substring(u.length-a.length)===a}(p,";base64"),this.contentType=this.base64?p.substring(0,p.length-7):p),this.rest=a.substring(a.indexOf(",")+1)}}class ut{constructor(a,l){let p=0,I="";di(a)?(this.data_=a,p=a.size,I=a.type):a instanceof ArrayBuffer?(l?this.data_=new Uint8Array(a):(this.data_=new Uint8Array(a.byteLength),this.data_.set(new Uint8Array(a))),p=this.data_.length):a instanceof Uint8Array&&(l?this.data_=a:(this.data_=new Uint8Array(a.length),this.data_.set(a)),p=a.length),this.size_=p,this.type_=I}size(){return this.size_}type(){return this.type_}slice(a,l){if(di(this.data_)){const I=function yr(u,a,l){return u.webkitSlice?u.webkitSlice(a,l):u.mozSlice?u.mozSlice(a,l):u.slice?u.slice(a,l):null}(this.data_,a,l);return null===I?null:new ut(I)}{const p=new Uint8Array(this.data_.buffer,a,l-a);return new ut(p,!0)}}static getBlob(...a){if(wi()){const l=a.map(p=>p instanceof ut?p.data_:p);return new ut(lr.apply(null,l))}{const l=a.map(V=>Cr(V)?Ze(mr.RAW,V).data:V.data_);let p=0;l.forEach(V=>{p+=V.byteLength});const I=new Uint8Array(p);let R=0;return l.forEach(V=>{for(let te=0;te<V.length;te++)I[R++]=V[te]}),new ut(I,!0)}}uploadData(){return this.data_}}function un(u){let a;try{a=JSON.parse(u)}catch{return null}return function yi(u){return"object"==typeof u&&!Array.isArray(u)}(a)?a:null}function ve(u){const a=u.lastIndexOf("/",u.length-2);return-1===a?u:u.slice(a+1)}function rt(u,a){return a}class Nt{constructor(a,l,p,I){this.server=a,this.local=l||a,this.writable=!!p,this.xform=I||rt}}let he=null;function Tt(){if(he)return he;const u=[];u.push(new Nt("bucket")),u.push(new Nt("generation")),u.push(new Nt("metageneration")),u.push(new Nt("name","fullPath",!0));const l=new Nt("name");l.xform=function a(R,V){return function Ce(u){return!Cr(u)||u.length<2?u:ve(u)}(V)},u.push(l);const I=new Nt("size");return I.xform=function p(R,V){return void 0!==V?Number(V):V},u.push(I),u.push(new Nt("timeCreated")),u.push(new Nt("updated")),u.push(new Nt("md5Hash",null,!0)),u.push(new Nt("cacheControl",null,!0)),u.push(new Nt("contentDisposition",null,!0)),u.push(new Nt("contentEncoding",null,!0)),u.push(new Nt("contentLanguage",null,!0)),u.push(new Nt("contentType",null,!0)),u.push(new Nt("metadata","customMetadata",!0)),he=u,he}function Xe(u,a,l){const p=un(a);return null===p?null:function Qt(u,a,l){const p={type:"file"},I=l.length;for(let R=0;R<I;R++){const V=l[R];p[V.local]=V.xform(p,a[V.server])}return function It(u,a){Object.defineProperty(u,"ref",{get:function l(){const R=new Cn(u.bucket,u.fullPath);return a._makeStorageReference(R)}})}(p,u),p}(u,p,l)}function Ct(u,a){const l={},p=a.length;for(let I=0;I<p;I++){const R=a[I];R.writable&&(l[R.server]=u[R.local])}return JSON.stringify(l)}const Gt="prefixes",pn="items";class Qn{constructor(a,l,p,I){this.url=a,this.method=l,this.handler=p,this.timeout=I,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Jn(u){if(!u)throw Dt()}function Wn(u,a){return function l(p,I){const R=Xe(u,I,a);return Jn(null!==R),R}}function vi(u){return function a(l,p){let I;return I=401===l.getStatus()?l.getErrorText().includes("Firebase App Check token is invalid")?function Fe(){return new De(je.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function yt(){return new De(je.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===l.getStatus()?function Mt(u){return new De(je.QUOTA_EXCEEDED,"Quota for bucket '"+u+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(u.bucket):403===l.getStatus()?function Ve(u){return new De(je.UNAUTHORIZED,"User does not have permission to access '"+u+"'.")}(u.path):p,I.status=l.getStatus(),I.serverResponse=p.serverResponse,I}}function Vi(u){const a=vi(u);return function l(p,I){let R=a(p,I);return 404===p.getStatus()&&(R=function ht(u){return new De(je.OBJECT_NOT_FOUND,"Object '"+u+"' does not exist.")}(u.path)),R.serverResponse=I.serverResponse,R}}function ji(u,a,l){const I=qn(a.fullServerUrl(),u.host,u._protocol),V=u.maxOperationRetryTime,te=new Qn(I,"GET",Wn(u,l),V);return te.errorHandler=Vi(a),te}function An(u,a,l,p,I){const R={};R.prefix=a.isRoot?"":a.path+"/",l&&l.length>0&&(R.delimiter=l),p&&(R.pageToken=p),I&&(R.maxResults=I);const te=qn(a.bucketOnlyServerUrl(),u.host,u._protocol),Oe=u.maxOperationRetryTime,Ft=new Qn(te,"GET",function Xn(u,a){return function l(p,I){const R=function wn(u,a,l){const p=un(l);return null===p?null:function kn(u,a,l){const p={prefixes:[],items:[],nextPageToken:l.nextPageToken};if(l[Gt])for(const I of l[Gt]){const R=I.replace(/\/$/,""),V=u._makeStorageReference(new Cn(a,R));p.prefixes.push(V)}if(l[pn])for(const I of l[pn]){const R=u._makeStorageReference(new Cn(a,I.name));p.items.push(R)}return p}(u,a,p)}(u,a,I);return Jn(null!==R),R}}(u,a.bucket),Oe);return Ft.urlParams=R,Ft.errorHandler=vi(a),Ft}function Li(u,a,l){const p=Object.assign({},l);return p.fullPath=u.path,p.size=a.size(),p.contentType||(p.contentType=function Ci(u,a){return u&&u.contentType||a&&a.type()||"application/octet-stream"}(null,a)),p}class se{constructor(a,l,p,I){this.current=a,this.total=l,this.finalized=!!p,this.metadata=I||null}}function be(u,a){let l=null;try{l=u.getResponseHeader("X-Goog-Upload-Status")}catch{Jn(!1)}return Jn(!!l&&-1!==(a||["active"]).indexOf(l)),l}const Vt={STATE_CHANGED:"state_changed"},Lt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Xt(u){switch(u){case"running":case"pausing":case"canceling":return Lt.RUNNING;case"paused":return Lt.PAUSED;case"success":return Lt.SUCCESS;case"canceled":return Lt.CANCELED;default:return Lt.ERROR}}class an{constructor(a,l,p){if(function zn(u){return"function"==typeof u}(a)||null!=l||null!=p)this.next=a,this.error=null!=l?l:void 0,this.complete=null!=p?p:void 0;else{const R=a;this.next=R.next,this.error=R.error,this.complete=R.complete}}}function vn(u){return(...a)=>{Promise.resolve().then(()=>u(...a))}}let rr=null;class er{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=yn.NO_ERROR,this.sendPromise_=new Promise(a=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=yn.ABORT,a()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=yn.NETWORK_ERROR,a()}),this.xhr_.addEventListener("load",()=>{a()})})}send(a,l,p,I){if(this.sent_)throw cn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(l,a,!0),void 0!==I)for(const R in I)I.hasOwnProperty(R)&&this.xhr_.setRequestHeader(R,I[R].toString());return void 0!==p?this.xhr_.send(p):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw cn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw cn("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw cn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw cn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(a){return this.xhr_.getResponseHeader(a)}addUploadProgressListener(a){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",a)}removeUploadProgressListener(a){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",a)}}class vr extends er{initXhr(){this.xhr_.responseType="text"}}function Wr(){return rr?rr():new vr}class tn{constructor(a,l,p=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=a,this._blob=l,this._metadata=p,this._mappings=Tt(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=I=>{if(this._request=void 0,this._chunkMultiplier=1,I._codeEquals(je.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const R=this.isExponentialBackoffExpired();if(on(I.status,[])){if(!R)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();I=Be()}this._error=I,this._transition("error")}},this._metadataErrorHandler=I=>{this._request=void 0,I._codeEquals(je.CANCELED)?this.completeTransitions_():(this._error=I,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((I,R)=>{this._resolve=I,this._reject=R,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const a=this._transferred;return l=>this._updateProgress(a+l)}_shouldDoResumable(a){return a.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(a){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([l,p])=>{switch(this._state){case"running":a(l,p);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((a,l)=>{const p=function Ye(u,a,l,p,I){const R=a.bucketOnlyServerUrl(),V=Li(a,p,I),te={name:V.fullPath},pe=qn(R,u.host,u._protocol),Ft={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${p.size()}`,"X-Goog-Upload-Header-Content-Type":V.contentType,"Content-Type":"application/json; charset=utf-8"},qt=Ct(V,l),Zn=new Qn(pe,"POST",function Rn(Mr){let oi;be(Mr);try{oi=Mr.getResponseHeader("X-Goog-Upload-URL")}catch{Jn(!1)}return Jn(Cr(oi)),oi},u.maxUploadRetryTime);return Zn.urlParams=te,Zn.headers=Ft,Zn.body=qt,Zn.errorHandler=vi(a),Zn}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),I=this._ref.storage._makeRequest(p,Wr,a,l);this._request=I,I.getPromise().then(R=>{this._request=void 0,this._uploadUrl=R,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const a=this._uploadUrl;this._resolveToken((l,p)=>{const I=function me(u,a,l,p){const pe=new Qn(l,"POST",function R(Oe){const Ft=be(Oe,["active","final"]);let qt=null;try{qt=Oe.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Jn(!1)}qt||Jn(!1);const sn=Number(qt);return Jn(!isNaN(sn)),new se(sn,p.size(),"final"===Ft)},u.maxUploadRetryTime);return pe.headers={"X-Goog-Upload-Command":"query"},pe.errorHandler=vi(a),pe}(this._ref.storage,this._ref._location,a,this._blob),R=this._ref.storage._makeRequest(I,Wr,l,p);this._request=R,R.getPromise().then(V=>{this._request=void 0,this._updateProgress(V.current),this._needToFetchStatus=!1,V.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const a=262144*this._chunkMultiplier,l=new se(this._transferred,this._blob.size()),p=this._uploadUrl;this._resolveToken((I,R)=>{let V;try{V=function Qe(u,a,l,p,I,R,V,te){const pe=new se(0,0);if(V?(pe.current=V.current,pe.total=V.total):(pe.current=0,pe.total=p.size()),p.size()!==pe.total)throw function kt(){return new De(je.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const Oe=pe.total-pe.current;let Ft=Oe;I>0&&(Ft=Math.min(Ft,I));const qt=pe.current;let Rn="";Rn=0===Ft?"finalize":Oe===Ft?"upload, finalize":"upload";const Zn={"X-Goog-Upload-Command":Rn,"X-Goog-Upload-Offset":`${pe.current}`},Mr=p.slice(qt,qt+Ft);if(null===Mr)throw Dn();const Cs=new Qn(l,"POST",function oi(ss,yu){const oc=be(ss,["active","final"]),vu=pe.current+Ft,Sc=p.size();let Yu;return Yu="final"===oc?Wn(a,R)(ss,yu):null,new se(vu,Sc,"final"===oc,Yu)},a.maxUploadRetryTime);return Cs.headers=Zn,Cs.body=Mr.uploadData(),Cs.progressCallback=te||null,Cs.errorHandler=vi(u),Cs}(this._ref._location,this._ref.storage,p,this._blob,a,this._mappings,l,this._makeProgressCallback())}catch(pe){return this._error=pe,void this._transition("error")}const te=this._ref.storage._makeRequest(V,Wr,I,R,!1);this._request=te,te.getPromise().then(pe=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(pe.current),pe.finalized?(this._metadata=pe.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((a,l)=>{const p=ji(this._ref.storage,this._ref._location,this._mappings),I=this._ref.storage._makeRequest(p,Wr,a,l);this._request=I,I.getPromise().then(R=>{this._request=void 0,this._metadata=R,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((a,l)=>{const p=function Ur(u,a,l,p,I){const R=a.bucketOnlyServerUrl(),V={"X-Goog-Upload-Protocol":"multipart"},pe=function te(){let Cs="";for(let ss=0;ss<2;ss++)Cs+=Math.random().toString().slice(2);return Cs}();V["Content-Type"]="multipart/related; boundary="+pe;const Oe=Li(a,p,I),Ft=Ct(Oe,l),Rn=ut.getBlob("--"+pe+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Ft+"\r\n--"+pe+"\r\nContent-Type: "+Oe.contentType+"\r\n\r\n",p,"\r\n--"+pe+"--");if(null===Rn)throw Dn();const Zn={name:Oe.fullPath},Mr=qn(R,u.host,u._protocol),Mi=u.maxUploadRetryTime,Ms=new Qn(Mr,"POST",Wn(u,l),Mi);return Ms.urlParams=Zn,Ms.headers=V,Ms.body=Rn.uploadData(),Ms.errorHandler=vi(a),Ms}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),I=this._ref.storage._makeRequest(p,Wr,a,l);this._request=I,I.getPromise().then(R=>{this._request=void 0,this._metadata=R,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(a){const l=this._transferred;this._transferred=a,this._transferred!==l&&this._notifyObservers()}_transition(a){if(this._state!==a)switch(a){case"canceling":case"pausing":this._state=a,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const l="paused"===this._state;this._state=a,l&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=a,this._notifyObservers();break;case"canceled":this._error=ft(),this._state=a,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const a=Xt(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:a,metadata:this._metadata,task:this,ref:this._ref}}on(a,l,p,I){const R=new an(l||void 0,p||void 0,I||void 0);return this._addObserver(R),()=>{this._removeObserver(R)}}then(a,l){return this._promise.then(a,l)}catch(a){return this.then(null,a)}_addObserver(a){this._observers.push(a),this._notifyObserver(a)}_removeObserver(a){const l=this._observers.indexOf(a);-1!==l&&this._observers.splice(l,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(l=>{this._notifyObserver(l)})}_finishPromise(){if(void 0!==this._resolve){let a=!0;switch(Xt(this._state)){case Lt.SUCCESS:vn(this._resolve.bind(null,this.snapshot))();break;case Lt.CANCELED:case Lt.ERROR:vn(this._reject.bind(null,this._error))();break;default:a=!1}a&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(a){switch(Xt(this._state)){case Lt.RUNNING:case Lt.PAUSED:a.next&&vn(a.next.bind(a,this.snapshot))();break;case Lt.SUCCESS:a.complete&&vn(a.complete.bind(a))();break;default:a.error&&vn(a.error.bind(a,this._error))()}}resume(){const a="paused"===this._state||"pausing"===this._state;return a&&this._transition("running"),a}pause(){const a="running"===this._state;return a&&this._transition("pausing"),a}cancel(){const a="running"===this._state||"pausing"===this._state;return a&&this._transition("canceling"),a}}class dn{constructor(a,l){this._service=a,this._location=l instanceof Cn?l:Cn.makeFromUrl(l,a.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(a,l){return new dn(a,l)}get root(){const a=new Cn(this._location.bucket,"");return this._newRef(this._service,a)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ve(this._location.path)}get storage(){return this._service}get parent(){const a=function ot(u){if(0===u.length)return null;const a=u.lastIndexOf("/");return-1===a?"":u.slice(0,a)}(this._location.path);if(null===a)return null;const l=new Cn(this._location.bucket,a);return new dn(this._service,l)}_throwIfRoot(a){if(""===this._location.path)throw Yn(a)}}function _i(u,a,l){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,de.Z)(function*(u,a,l){const I=yield Hi(u,{pageToken:l});a.prefixes.push(...I.prefixes),a.items.push(...I.items),null!=I.nextPageToken&&(yield _i(u,a,I.nextPageToken))})).apply(this,arguments)}function Hi(u,a){null!=a&&"number"==typeof a.maxResults&&Gn("options.maxResults",1,1e3,a.maxResults);const l=a||{},p=An(u.storage,u._location,"/",l.pageToken,l.maxResults);return u.storage.makeRequestWithTokens(p,Wr)}function Yi(u){u._throwIfRoot("getDownloadURL");const a=function ri(u,a,l){const I=qn(a.fullServerUrl(),u.host,u._protocol),V=u.maxOperationRetryTime,te=new Qn(I,"GET",function ys(u,a){return function l(p,I){const R=Xe(u,I,a);return Jn(null!==R),function He(u,a,l,p){const I=un(a);if(null===I||!Cr(I.downloadTokens))return null;const R=I.downloadTokens;if(0===R.length)return null;const V=encodeURIComponent;return R.split(",").map(Oe=>{const qt=u.fullPath;return qn("/b/"+V(u.bucket)+"/o/"+V(qt),l,p)+ln({alt:"media",token:Oe})})[0]}(R,I,u.host,u._protocol)}}(u,l),V);return te.errorHandler=Vi(a),te}(u.storage,u._location,Tt());return u.storage.makeRequestWithTokens(a,Wr).then(l=>{if(null===l)throw function Ae(){return new De(je.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return l})}function Os(u,a){const l=function Ge(u,a){const l=a.split("/").filter(p=>p.length>0).join("/");return 0===u.length?l:u+"/"+l}(u._location.path,a),p=new Cn(u._location.bucket,l);return new dn(u.storage,p)}function As(u,a){if(u instanceof lo){const l=u;if(null==l._bucket)throw function zt(){return new De(je.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Pt+"' property when initializing the app?")}();const p=new dn(l,l._bucket);return null!=a?As(p,a):p}return void 0!==a?Os(u,a):u}function ao(u,a){if(a&&function Ta(u){return/^[A-Za-z]+:\/\//.test(u)}(a)){if(u instanceof lo)return function ko(u,a){return new dn(u,a)}(u,a);throw gn("To use ref(service, url), the first argument must be a Storage instance.")}return As(u,a)}function da(u,a){const l=null==a?void 0:a[Pt];return null==l?null:Cn.makeFromBucketSpec(l,u)}class lo{constructor(a,l,p,I,R){this.app=a,this._authProvider=l,this._appCheckProvider=p,this._url=I,this._firebaseVersion=R,this._bucket=null,this._host=et,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=I?Cn.makeFromBucketSpec(I,this._host):da(this._host,this.app.options)}get host(){return this._host}set host(a){this._host=a,this._bucket=null!=this._url?Cn.makeFromBucketSpec(this._url,a):da(a,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(a){Gn("time",0,Number.POSITIVE_INFINITY,a),this._maxUploadRetryTime=a}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(a){Gn("time",0,Number.POSITIVE_INFINITY,a),this._maxOperationRetryTime=a}_getAuthToken(){var a=this;return(0,de.Z)(function*(){if(a._overrideAuthToken)return a._overrideAuthToken;const l=a._authProvider.getImmediate({optional:!0});if(l){const p=yield l.getToken();if(null!==p)return p.accessToken}return null})()}_getAppCheckToken(){var a=this;return(0,de.Z)(function*(){const l=a._appCheckProvider.getImmediate({optional:!0});return l?(yield l.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(a=>a.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(a){return new dn(this,a)}_makeRequest(a,l,p,I,R=!0){if(this._deleted)return new hr(On());{const V=function gi(u,a,l,p,I,R,V=!0){const te=ln(u.urlParams),pe=u.url+te,Oe=Object.assign({},u.headers);return function pi(u,a){a&&(u["X-Firebase-GMPID"]=a)}(Oe,a),function Qr(u,a){null!==a&&a.length>0&&(u.Authorization="Firebase "+a)}(Oe,l),function zr(u,a){u["X-Firebase-Storage-Version"]="webjs/"+(null!=a?a:"AppManager")}(Oe,R),function Lr(u,a){null!==a&&(u["X-Firebase-AppCheck"]=a)}(Oe,p),new Jr(pe,u.method,Oe,u.body,u.successCodes,u.additionalRetryCodes,u.handler,u.errorHandler,u.timeout,u.progressCallback,I,V)}(a,this._appId,p,I,l,this._firebaseVersion,R);return this._requests.add(V),V.getPromise().then(()=>this._requests.delete(V),()=>this._requests.delete(V)),V}}makeRequestWithTokens(a,l){var p=this;return(0,de.Z)(function*(){const[I,R]=yield Promise.all([p._getAuthToken(),p._getAppCheckToken()]);return p._makeRequest(a,l,I,R).getPromise()})()}}const ds="@firebase/storage";function _s(u,a){return ao(u=(0,Y.m9)(u),a)}function Zi(u,{instanceIdentifier:a}){const l=u.getProvider("app").getImmediate(),p=u.getProvider("auth-internal"),I=u.getProvider("app-check-internal");return new lo(l,p,I,a,_t.SDK_VERSION)}!function bo(){(0,_t._registerComponent)(new it.wA("storage",Zi,"PUBLIC").setMultipleInstances(!0)),(0,_t.registerVersion)(ds,"0.11.2",""),(0,_t.registerVersion)(ds,"0.11.2","esm2017")}();class Pi{constructor(a,l,p){this._delegate=a,this.task=l,this.ref=p}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class po{constructor(a,l){this._delegate=a,this._ref=l,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Pi(this._delegate.snapshot,this,this._ref)}then(a,l){return this._delegate.then(p=>{if(a)return a(new Pi(p,this,this._ref))},l)}on(a,l,p,I){let R;return l&&(R="function"==typeof l?V=>l(new Pi(V,this,this._ref)):{next:l.next?V=>l.next(new Pi(V,this,this._ref)):void 0,complete:l.complete||void 0,error:l.error||void 0}),this._delegate.on(a,R,p||void 0,I||void 0)}}class go{constructor(a,l){this._delegate=a,this._service=l}get prefixes(){return this._delegate.prefixes.map(a=>new Oi(a,this._service))}get items(){return this._delegate.items.map(a=>new Oi(a,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Oi{constructor(a,l){this._delegate=a,this.storage=l}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(a){const l=function na(u,a){return Os(u,a)}(this._delegate,a);return new Oi(l,this.storage)}get root(){return new Oi(this._delegate.root,this.storage)}get parent(){const a=this._delegate.parent;return null==a?null:new Oi(a,this.storage)}put(a,l){return this._throwIfRoot("put"),new po(function co(u,a,l){return function ei(u,a,l){return u._throwIfRoot("uploadBytesResumable"),new tn(u,new ut(a),l)}(u=(0,Y.m9)(u),a,l)}(this._delegate,a,l),this)}putString(a,l=mr.RAW,p){this._throwIfRoot("putString");const I=Ze(l,a),R=Object.assign({},p);return null==R.contentType&&null!=I.contentType&&(R.contentType=I.contentType),new po(new tn(this._delegate,new ut(I.data,!0),R),this)}listAll(){return function ho(u){return function Oo(u){const a={prefixes:[],items:[]};return _i(u,a).then(()=>a)}(u=(0,Y.m9)(u))}(this._delegate).then(a=>new go(a,this.storage))}list(a){return function uo(u,a){return Hi(u=(0,Y.m9)(u),a)}(this._delegate,a||void 0).then(l=>new go(l,this.storage))}getMetadata(){return function ti(u){return function jo(u){u._throwIfRoot("getMetadata");const a=ji(u.storage,u._location,Tt());return u.storage.makeRequestWithTokens(a,Wr)}(u=(0,Y.m9)(u))}(this._delegate)}updateMetadata(a){return function ks(u,a){return function ua(u,a){u._throwIfRoot("updateMetadata");const l=function qi(u,a,l,p){const R=qn(a.fullServerUrl(),u.host,u._protocol),te=Ct(l,p),Oe=u.maxOperationRetryTime,Ft=new Qn(R,"PATCH",Wn(u,p),Oe);return Ft.headers={"Content-Type":"application/json; charset=utf-8"},Ft.body=te,Ft.errorHandler=Vi(a),Ft}(u.storage,u._location,a,Tt());return u.storage.makeRequestWithTokens(l,Wr)}(u=(0,Y.m9)(u),a)}(this._delegate,a)}getDownloadURL(){return function fa(u){return Yi(u=(0,Y.m9)(u))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function fo(u){return function oo(u){u._throwIfRoot("deleteObject");const a=function kr(u,a){const p=qn(a.fullServerUrl(),u.host,u._protocol),te=new Qn(p,"DELETE",function V(pe,Oe){},u.maxOperationRetryTime);return te.successCodes=[200,204],te.errorHandler=Vi(a),te}(u.storage,u._location);return u.storage.makeRequestWithTokens(a,Wr)}(u=(0,Y.m9)(u))}(this._delegate)}_throwIfRoot(a){if(""===this._delegate._location.path)throw Yn(a)}}class ia{constructor(a,l){this.app=a,this._delegate=l}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(a){if(Ja(a))throw gn("ref() expected a child path but got a URL, use refFromURL instead.");return new Oi(_s(this._delegate,a),this)}refFromURL(a){if(!Ja(a))throw gn("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Cn.makeFromUrl(a,this._delegate.host)}catch{throw gn("refFromUrl() expected a valid full URL but got an invalid one.")}return new Oi(_s(this._delegate,a),this)}setMaxUploadRetryTime(a){this._delegate.maxUploadRetryTime=a}setMaxOperationRetryTime(a){this._delegate.maxOperationRetryTime=a}useEmulator(a,l,p={}){!function ra(u,a,l,p={}){!function Qa(u,a,l,p={}){u.host=`${a}:${l}`,u._protocol="http";const{mockUserToken:I}=p;I&&(u._overrideAuthToken="string"==typeof I?I:(0,Y.Sg)(I,u.app.options.projectId))}(u,a,l,p)}(this._delegate,a,l,p)}}function Ja(u){return/^[A-Za-z]+:\/\//.test(u)}function Gi(u,{instanceIdentifier:a}){const l=u.getProvider("app-compat").getImmediate(),p=u.getProvider("storage").getImmediate({identifier:a});return new ia(l,p)}!function Va(u){const a={TaskState:Lt,TaskEvent:Vt,StringFormat:mr,Storage:ia,Reference:Oi};u.INTERNAL.registerComponent(new it.wA("storage-compat",Gi,"PUBLIC").setServiceProps(a).setMultipleInstances(!0)),u.registerVersion("@firebase/storage-compat","0.3.2")}(Re.Z);var Ns=j(6217),To=j(9260);function Tr(u){const a=function sa(u){return new _e.y(a=>{const l=V=>a.next(V);l(u.snapshot);const R=u.on("state_changed",l);return u.then(V=>{l(V),a.complete()},V=>{l(u.snapshot),(V=>{a.error(V)})(V)}),function(){R()}}).pipe(function Ke(u,a=ye.z){return(0,ae.e)((l,p)=>{let I=null,R=null,V=null;const te=()=>{if(I){I.unsubscribe(),I=null;const Oe=R;R=null,p.next(Oe)}};function pe(){const Oe=V+u,Ft=a.now();if(Ft<Oe)return I=this.schedule(void 0,Oe-Ft),void p.add(I);te()}l.subscribe((0,Ee.x)(p,Oe=>{R=Oe,V=a.now(),I||(I=a.schedule(pe,u),p.add(I))},()=>{te(),p.complete()},void 0,()=>{R=I=null}))})}(0))}(u);return{task:u,then:u.then.bind(u),catch:u.catch.bind(u),pause:u.pause.bind(u),cancel:u.cancel.bind(u),resume:u.resume.bind(u),snapshotChanges:()=>a,percentageChanges:()=>a.pipe((0,We.U)(l=>l.bytesTransferred/l.totalBytes*100))}}function So(u){return{getDownloadURL:()=>(0,Me.of)(void 0).pipe(At.fc,(0,ct.w)(()=>u.getDownloadURL()),At.iC),getMetadata:()=>(0,Me.of)(void 0).pipe(At.fc,(0,ct.w)(()=>u.getMetadata()),At.iC),delete:()=>(0,ze.D)(u.delete()),child:a=>So(u.child(a)),updateMetadata:a=>(0,ze.D)(u.updateMetadata(a)),put:(a,l)=>Tr(u.put(a,l)),putString:(a,l,p)=>Tr(u.putString(a,l,p)),list:a=>(0,ze.D)(u.list(a)),listAll:()=>(0,ze.D)(u.listAll())}}const pa=new _.OlP("angularfire2.storageBucket"),oa=new _.OlP("angularfire2.storage.maxUploadRetryTime"),b=new _.OlP("angularfire2.storage.maxOperationRetryTime"),q=new _.OlP("angularfire2.storage.use-emulator");let T=(()=>{class u{constructor(l,p,I,R,V,te,pe,Oe,Ft,qt){const sn=(0,xe.on)(l,V,p);this.storage=(0,xe.cc)(`${sn.name}.storage.${I}`,"AngularFireStorage",sn.name,()=>{const Rn=V.runOutsideAngular(()=>sn.storage(I||void 0)),Zn=Ft;return Zn&&Rn.useEmulator(...Zn),pe&&Rn.setMaxUploadRetryTime(pe),Oe&&Rn.setMaxOperationRetryTime(Oe),Rn},[pe,Oe])}ref(l){return So(this.storage.ref(l))}refFromURL(l){return So(this.storage.refFromURL(l))}upload(l,p,I){return So(this.storage.ref(l)).put(p,I)}}return u.\u0275fac=function(l){return new(l||u)(_.LFG(xe.Dh),_.LFG(xe.xv,8),_.LFG(pa,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(At.HU),_.LFG(oa,8),_.LFG(b,8),_.LFG(q,8),_.LFG(Ns.nm,8))},u.\u0275prov=_.Yz7({token:u,factory:u.\u0275fac,providedIn:"any"}),u})(),ge=(()=>{class u{}return u.\u0275fac=function(l){return new(l||u)},u.\u0275mod=_.oAB({type:u}),u.\u0275inj=_.cJS({}),u})(),M=(()=>{class u{constructor(){To.Z.registerVersion("angularfire",At.q4.full,"gcs-compat")}}return u.\u0275fac=function(l){return new(l||u)},u.\u0275mod=_.oAB({type:u}),u.\u0275inj=_.cJS({providers:[T],imports:[ge]}),u})();var F=j(1762),L=j(6451),ne=j(3099),vt=j(5026),Tn=j(1884),$r=j(8421),ii=j(4671),Qi=j(5032),hs=j(7669);j(3042);var ts=j(1877);const Ks="@firebase/database";let aa="";function Ys(u){aa=u}class yl{constructor(a){this.domStorage_=a,this.prefix_="firebase:"}set(a,l){null==l?this.domStorage_.removeItem(this.prefixedName_(a)):this.domStorage_.setItem(this.prefixedName_(a),(0,Y.Wl)(l))}get(a){const l=this.domStorage_.getItem(this.prefixedName_(a));return null==l?null:(0,Y.cI)(l)}remove(a){this.domStorage_.removeItem(this.prefixedName_(a))}prefixedName_(a){return this.prefix_+a}toString(){return this.domStorage_.toString()}}class el{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(a,l){null==l?delete this.cache_[a]:this.cache_[a]=l}get(a){return(0,Y.r3)(this.cache_,a)?this.cache_[a]:null}remove(a){delete this.cache_[a]}}const Sa=function(u){try{if(typeof window<"u"&&typeof window[u]<"u"){const a=window[u];return a.setItem("firebase:sentinel","cache"),a.removeItem("firebase:sentinel"),new yl(a)}}catch{}return new el},Ha=Sa("localStorage"),ns=Sa("sessionStorage"),Rs=new ts.Yd("@firebase/database"),tl=function(){let u=1;return function(){return u++}}(),Aa=function(u){const a=(0,Y.dS)(u),l=new Y.gQ;l.update(a);const p=l.digest();return Y.US.encodeByteArray(p)},zo=function(...u){let a="";for(let l=0;l<u.length;l++){const p=u[l];Array.isArray(p)||p&&"object"==typeof p&&"number"==typeof p.length?a+=zo.apply(null,p):a+="object"==typeof p?(0,Y.Wl)(p):p,a+=" "}return a};let Fo=null,nl=!0;const ga=function(u,a){(0,Y.hu)(!a||!0===u||!1===u,"Can't turn on custom loggers persistently."),!0===u?(Rs.logLevel=ts.in.VERBOSE,Fo=Rs.log.bind(Rs),a&&ns.set("logging_enabled",!0)):"function"==typeof u?Fo=u:(Fo=null,ns.remove("logging_enabled"))},ls=function(...u){if(!0===nl&&(nl=!1,null===Fo&&!0===ns.get("logging_enabled")&&ga(!0)),Fo){const a=zo.apply(null,u);Fo(a)}},xo=function(u){return function(...a){ls(u,...a)}},Go=function(...u){const a="FIREBASE INTERNAL ERROR: "+zo(...u);Rs.error(a)},Zs=function(...u){const a=`FIREBASE FATAL ERROR: ${zo(...u)}`;throw Rs.error(a),new Error(a)},fs=function(...u){const a="FIREBASE WARNING: "+zo(...u);Rs.warn(a)},cs=function(u){return"number"==typeof u&&(u!=u||u===Number.POSITIVE_INFINITY||u===Number.NEGATIVE_INFINITY)},Vr="[MIN_NAME]",Ro="[MAX_NAME]",Ra=function(u,a){if(u===a)return 0;if(u===Vr||a===Ro)return-1;if(a===Vr||u===Ro)return 1;{const l=Zt(u),p=Zt(a);return null!==l?null!==p?l-p==0?u.length-a.length:l-p:-1:null!==p?1:u<a?-1:1}},Lo=function(u,a){return u===a?0:u<a?-1:1},vl=function(u,a){if(a&&u in a)return a[u];throw new Error("Missing required key ("+u+") in object: "+(0,Y.Wl)(a))},mo=function(u){if("object"!=typeof u||null===u)return(0,Y.Wl)(u);const a=[];for(const p in u)a.push(p);a.sort();let l="{";for(let p=0;p<a.length;p++)0!==p&&(l+=","),l+=(0,Y.Wl)(a[p]),l+=":",l+=mo(u[a[p]]);return l+="}",l},jl=function(u,a){const l=u.length;if(l<=a)return[u];const p=[];for(let I=0;I<l;I+=a)p.push(u.substring(I,I+a>l?l:I+a));return p};function Sr(u,a){for(const l in u)u.hasOwnProperty(l)&&a(l,u[l])}const Hl=function(u){(0,Y.hu)(!cs(u),"Invalid JSON number");const p=1023;let I,R,V,te,pe;0===u?(R=0,V=0,I=1/u==-1/0?1:0):(I=u<0,(u=Math.abs(u))>=Math.pow(2,1-p)?(te=Math.min(Math.floor(Math.log(u)/Math.LN2),p),R=te+p,V=Math.round(u*Math.pow(2,52-te)-Math.pow(2,52))):(R=0,V=Math.round(u/Math.pow(2,-1074))));const Oe=[];for(pe=52;pe;pe-=1)Oe.push(V%2?1:0),V=Math.floor(V/2);for(pe=11;pe;pe-=1)Oe.push(R%2?1:0),R=Math.floor(R/2);Oe.push(I?1:0),Oe.reverse();const Ft=Oe.join("");let qt="";for(pe=0;pe<64;pe+=8){let sn=parseInt(Ft.substr(pe,8),2).toString(16);1===sn.length&&(sn="0"+sn),qt+=sn}return qt.toLowerCase()},H=new RegExp("^-?(0*)\\d{1,10}$"),Zt=function(u){if(H.test(u)){const a=Number(u);if(a>=-2147483648&&a<=2147483647)return a}return null},Jt=function(u){try{u()}catch(a){setTimeout(()=>{throw fs("Exception was thrown by user callback.",a.stack||""),a},Math.floor(0))}},Vn=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ar=function(u,a){const l=setTimeout(u,a);return"number"==typeof l&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(l):"object"==typeof l&&l.unref&&l.unref(),l};class Kr{constructor(a,l){this.appName_=a,this.appCheckProvider=l,this.appCheck=null==l?void 0:l.getImmediate({optional:!0}),this.appCheck||null==l||l.get().then(p=>this.appCheck=p)}getToken(a){return this.appCheck?this.appCheck.getToken(a):new Promise((l,p)=>{setTimeout(()=>{this.appCheck?this.getToken(a).then(l,p):l(null)},0)})}addTokenChangeListener(a){var l;null===(l=this.appCheckProvider)||void 0===l||l.get().then(p=>p.addTokenListener(a))}notifyForInvalidToken(){fs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Br{constructor(a,l,p){this.appName_=a,this.firebaseOptions_=l,this.authProvider_=p,this.auth_=null,this.auth_=p.getImmediate({optional:!0}),this.auth_||p.onInit(I=>this.auth_=I)}getToken(a){return this.auth_?this.auth_.getToken(a).catch(l=>l&&"auth/token-not-initialized"===l.code?(ls("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(l)):new Promise((l,p)=>{setTimeout(()=>{this.auth_?this.getToken(a).then(l,p):l(null)},0)})}addTokenChangeListener(a){this.auth_?this.auth_.addAuthTokenListener(a):this.authProvider_.get().then(l=>l.addAuthTokenListener(a))}removeTokenChangeListener(a){this.authProvider_.get().then(l=>l.removeAuthTokenListener(a))}notifyForInvalidToken(){let a='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';a+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',fs(a)}}let wr=(()=>{class u{constructor(l){this.accessToken=l}getToken(l){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(l){l(this.accessToken)}removeTokenChangeListener(l){}notifyForInvalidToken(){}}return u.OWNER="owner",u})();const Ko=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Qs="websocket",rl="long_polling";class El{constructor(a,l,p,I,R=!1,V="",te=!1,pe=!1){this.secure=l,this.namespace=p,this.webSocketOnly=I,this.nodeAdmin=R,this.persistenceKey=V,this.includeNamespaceInQueryParams=te,this.isUsingEmulator=pe,this._host=a.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ha.get("host:"+a)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(a){a!==this.internalHost&&(this.internalHost=a,this.isCacheableHost()&&Ha.set("host:"+this._host,this.internalHost))}toString(){let a=this.toURLString();return this.persistenceKey&&(a+="<"+this.persistenceKey+">"),a}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function qo(u,a,l){let p;if((0,Y.hu)("string"==typeof a,"typeof type must == string"),(0,Y.hu)("object"==typeof l,"typeof params must == object"),a===Qs)p=(u.secure?"wss://":"ws://")+u.internalHost+"/.ws?";else{if(a!==rl)throw new Error("Unknown connection type: "+a);p=(u.secure?"https://":"http://")+u.internalHost+"/.lp?"}(function Rc(u){return u.host!==u.internalHost||u.isCustomHost()||u.includeNamespaceInQueryParams})(u)&&(l.ns=u.namespace);const I=[];return Sr(l,(R,V)=>{I.push(R+"="+V)}),p+I.join("&")}class qc{constructor(){this.counters_={}}incrementCounter(a,l=1){(0,Y.r3)(this.counters_,a)||(this.counters_[a]=0),this.counters_[a]+=l}get(){return(0,Y.p$)(this.counters_)}}const Wi={},vo={};function Js(u){const a=u.toString();return Wi[a]||(Wi[a]=new qc),Wi[a]}class lc{constructor(a){this.onMessage_=a,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(a,l){this.closeAfterResponse=a,this.onClose=l,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(a,l){for(this.pendingResponses[a]=l;this.pendingResponses[this.currentResponseNum];){const p=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let I=0;I<p.length;++I)p[I]&&Jt(()=>{this.onMessage_(p[I])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class $o{constructor(a,l,p,I,R,V,te){this.connId=a,this.repoInfo=l,this.applicationId=p,this.appCheckToken=I,this.authToken=R,this.transportSessionId=V,this.lastSessionId=te,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=xo(a),this.stats_=Js(l),this.urlFn=pe=>(this.appCheckToken&&(pe.ac=this.appCheckToken),qo(l,rl,pe))}open(a,l){this.curSegmentNum=0,this.onDisconnect_=l,this.myPacketOrderer=new lc(a),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(u){if((0,Y.Yr)()||"complete"===document.readyState)u();else{let a=!1;const l=function(){document.body?a||(a=!0,u()):setTimeout(l,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",l,!1),window.addEventListener("load",l,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&l()}),window.attachEvent("onload",l))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new wl((...R)=>{const[V,te,pe,Oe,Ft]=R;if(this.incrementIncomingBytes_(R),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===V)this.id=te,this.password=pe;else{if("close"!==V)throw new Error("Unrecognized command received: "+V);te?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(te,()=>{this.onClosed_()})):this.onClosed_()}},(...R)=>{const[V,te]=R;this.incrementIncomingBytes_(R),this.myPacketOrderer.handleResponse(V,te)},()=>{this.onClosed_()},this.urlFn);const p={start:"t"};p.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(p.cb=this.scriptTagHolder.uniqueCallbackIdentifier),p.v="5",this.transportSessionId&&(p.s=this.transportSessionId),this.lastSessionId&&(p.ls=this.lastSessionId),this.applicationId&&(p.p=this.applicationId),this.appCheckToken&&(p.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Ko.test(location.hostname)&&(p.r="f");const I=this.urlFn(p);this.log_("Connecting via long-poll to "+I),this.scriptTagHolder.addTag(I,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){$o.forceAllow_=!0}static forceDisallow(){$o.forceDisallow_=!0}static isAvailable(){return!((0,Y.Yr)()||!$o.forceAllow_&&($o.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(a){const l=(0,Y.Wl)(a);this.bytesSent+=l.length,this.stats_.incrementCounter("bytes_sent",l.length);const p=(0,Y.h$)(l),I=jl(p,1840);for(let R=0;R<I.length;R++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,I.length,I[R]),this.curSegmentNum++}addDisconnectPingFrame(a,l){if((0,Y.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const p={dframe:"t"};p.id=a,p.pw=l,this.myDisconnFrame.src=this.urlFn(p),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(a){const l=(0,Y.Wl)(a).length;this.bytesReceived+=l,this.stats_.incrementCounter("bytes_received",l)}}class wl{constructor(a,l,p,I){if(this.onDisconnect=p,this.urlFn=I,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,Y.Yr)())this.commandCB=a,this.onMessageCB=l;else{this.uniqueCallbackIdentifier=tl(),window["pLPCommand"+this.uniqueCallbackIdentifier]=a,window["pRTLPCB"+this.uniqueCallbackIdentifier]=l,this.myIFrame=wl.createIFrame_();let R="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(R='<script>document.domain="'+document.domain+'";<\/script>');const V="<html><body>"+R+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(V),this.myIFrame.doc.close()}catch(te){ls("frame writing exception"),te.stack&&ls(te.stack),ls(te)}}}static createIFrame_(){const a=document.createElement("iframe");if(a.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(a);try{a.contentWindow.document||ls("No IE domain setting required")}catch{const p=document.domain;a.src="javascript:void((function(){document.open();document.domain='"+p+"';document.close();})())"}return a.contentDocument?a.doc=a.contentDocument:a.contentWindow?a.doc=a.contentWindow.document:a.document&&(a.doc=a.document),a}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const a=this.onDisconnect;a&&(this.onDisconnect=null,a())}startLongPoll(a,l){for(this.myID=a,this.myPW=l,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const a={};a.id=this.myID,a.pw=this.myPW,a.ser=this.currentSerial;let l=this.urlFn(a),p="",I=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+p.length<=1870;){const V=this.pendingSegs.shift();p=p+"&seg"+I+"="+V.seg+"&ts"+I+"="+V.ts+"&d"+I+"="+V.d,I++}return l+=p,this.addLongPollTag_(l,this.currentSerial),!0}return!1}enqueueSegment(a,l,p){this.pendingSegs.push({seg:a,ts:l,d:p}),this.alive&&this.newRequest_()}addLongPollTag_(a,l){this.outstandingRequests.add(l);const p=()=>{this.outstandingRequests.delete(l),this.newRequest_()},I=setTimeout(p,Math.floor(25e3));this.addTag(a,()=>{clearTimeout(I),p()})}addTag(a,l){(0,Y.Yr)()?this.doNodeLongPoll(a,l):setTimeout(()=>{try{if(!this.sendNewPolls)return;const p=this.myIFrame.doc.createElement("script");p.type="text/javascript",p.async=!0,p.src=a,p.onload=p.onreadystatechange=function(){const I=p.readyState;(!I||"loaded"===I||"complete"===I)&&(p.onload=p.onreadystatechange=null,p.parentNode&&p.parentNode.removeChild(p),l())},p.onerror=()=>{ls("Long-poll script failed to load: "+a),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(p)}catch{}},Math.floor(1))}}let ma=null;typeof MozWebSocket<"u"?ma=MozWebSocket:typeof WebSocket<"u"&&(ma=WebSocket);let pr=(()=>{class u{constructor(l,p,I,R,V,te,pe){this.connId=l,this.applicationId=I,this.appCheckToken=R,this.authToken=V,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=xo(this.connId),this.stats_=Js(p),this.connURL=u.connectionURL_(p,te,pe,R,I),this.nodeAdmin=p.nodeAdmin}static connectionURL_(l,p,I,R,V){const te={v:"5"};return!(0,Y.Yr)()&&typeof location<"u"&&location.hostname&&Ko.test(location.hostname)&&(te.r="f"),p&&(te.s=p),I&&(te.ls=I),R&&(te.ac=R),V&&(te.p=V),qo(l,Qs,te)}open(l,p){this.onDisconnect=p,this.onMessage=l,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ha.set("previous_websocket_failure",!0);try{let I;if((0,Y.Yr)()){I={headers:{"User-Agent":`Firebase/5/${aa}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(I.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(I.headers["X-Firebase-AppCheck"]=this.appCheckToken);const V=process.env,te=0===this.connURL.indexOf("wss://")?V.HTTPS_PROXY||V.https_proxy:V.HTTP_PROXY||V.http_proxy;te&&(I.proxy={origin:te})}this.mySock=new ma(this.connURL,[],I)}catch(I){this.log_("Error instantiating WebSocket.");const R=I.message||I.data;return R&&this.log_(R),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=I=>{this.handleIncomingFrame(I)},this.mySock.onerror=I=>{this.log_("WebSocket error.  Closing connection.");const R=I.message||I.data;R&&this.log_(R),this.onClosed_()}}start(){}static forceDisallow(){u.forceDisallow_=!0}static isAvailable(){let l=!1;if(typeof navigator<"u"&&navigator.userAgent){const I=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);I&&I.length>1&&parseFloat(I[1])<4.4&&(l=!0)}return!l&&null!==ma&&!u.forceDisallow_}static previouslyFailed(){return Ha.isInMemoryStorage||!0===Ha.get("previous_websocket_failure")}markConnectionHealthy(){Ha.remove("previous_websocket_failure")}appendFrame_(l){if(this.frames.push(l),this.frames.length===this.totalFrames){const p=this.frames.join("");this.frames=null;const I=(0,Y.cI)(p);this.onMessage(I)}}handleNewFrameCount_(l){this.totalFrames=l,this.frames=[]}extractFrameCount_(l){if((0,Y.hu)(null===this.frames,"We already have a frame buffer"),l.length<=6){const p=Number(l);if(!isNaN(p))return this.handleNewFrameCount_(p),null}return this.handleNewFrameCount_(1),l}handleIncomingFrame(l){if(null===this.mySock)return;const p=l.data;if(this.bytesReceived+=p.length,this.stats_.incrementCounter("bytes_received",p.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(p);else{const I=this.extractFrameCount_(p);null!==I&&this.appendFrame_(I)}}send(l){this.resetKeepAlive();const p=(0,Y.Wl)(l);this.bytesSent+=p.length,this.stats_.incrementCounter("bytes_sent",p.length);const I=jl(p,16384);I.length>1&&this.sendString_(String(I.length));for(let R=0;R<I.length;R++)this.sendString_(I[R])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(l){try{this.mySock.send(l)}catch(p){this.log_("Exception thrown from WebSocket.send():",p.message||p.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return u.responsesRequiredToBeHealthy=2,u.healthyTimeout=3e4,u})(),la=(()=>{class u{constructor(l){this.initTransports_(l)}static get ALL_TRANSPORTS(){return[$o,pr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(l){const p=pr&&pr.isAvailable();let I=p&&!pr.previouslyFailed();if(l.webSocketOnly&&(p||fs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),I=!0),I)this.transports_=[pr];else{const R=this.transports_=[];for(const V of u.ALL_TRANSPORTS)V&&V.isAvailable()&&R.push(V);u.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return u.globalTransportInitialized_=!1,u})();class Oc{constructor(a,l,p,I,R,V,te,pe,Oe,Ft){this.id=a,this.repoInfo_=l,this.applicationId_=p,this.appCheckToken_=I,this.authToken_=R,this.onMessage_=V,this.onReady_=te,this.onDisconnect_=pe,this.onKill_=Oe,this.lastSessionId=Ft,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=xo("c:"+this.id+":"),this.transportManager_=new la(l),this.log_("Connection created"),this.start_()}start_(){const a=this.transportManager_.initialTransport();this.conn_=new a(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=a.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.conn_),p=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(l,p)},Math.floor(0));const I=a.healthyTimeout||0;I>0&&(this.healthyTimeout_=Ar(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(I)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(a){return l=>{a===this.conn_?this.onConnectionLost_(l):a===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(a){return l=>{2!==this.state_&&(a===this.rx_?this.onPrimaryMessageReceived_(l):a===this.secondaryConn_?this.onSecondaryMessageReceived_(l):this.log_("message on old connection"))}}sendRequest(a){this.sendData_({t:"d",d:a})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(a){if("t"in a){const l=a.t;"a"===l?this.upgradeIfSecondaryHealthy_():"r"===l?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===l&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(a){const l=vl("t",a),p=vl("d",a);if("c"===l)this.onSecondaryControl_(p);else{if("d"!==l)throw new Error("Unknown protocol layer: "+l);this.pendingDataMessages.push(p)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(a){const l=vl("t",a),p=vl("d",a);"c"===l?this.onControl_(p):"d"===l&&this.onDataMessage_(p)}onDataMessage_(a){this.onPrimaryResponse_(),this.onMessage_(a)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(a){const l=vl("t",a);if("d"in a){const p=a.d;if("h"===l){const I=Object.assign({},p);this.repoInfo_.isUsingEmulator&&(I.h=this.repoInfo_.host),this.onHandshake_(I)}else if("n"===l){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let I=0;I<this.pendingDataMessages.length;++I)this.onDataMessage_(this.pendingDataMessages[I]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===l?this.onConnectionShutdown_(p):"r"===l?this.onReset_(p):"e"===l?Go("Server Error: "+p):"o"===l?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Go("Unknown control packet command: "+l)}}onHandshake_(a){const l=a.ts,p=a.v,I=a.h;this.sessionId=a.s,this.repoInfo_.host=I,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,l),"5"!==p&&fs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const a=this.transportManager_.upgradeTransport();a&&this.startUpgrade_(a)}startUpgrade_(a){this.secondaryConn_=new a(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=a.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.secondaryConn_),p=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(l,p),Ar(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(a){this.log_("Reset packet received.  New host: "+a),this.repoInfo_.host=a,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(a,l){this.log_("Realtime connection established."),this.conn_=a,this.state_=1,this.onReady_&&(this.onReady_(l,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ar(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const a=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===a||this.rx_===a)&&this.close()}onConnectionLost_(a){this.conn_=null,a||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ha.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(a){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(a),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(a){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(a)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Jc{put(a,l,p,I){}merge(a,l,p,I){}refreshAuthToken(a){}refreshAppCheckToken(a){}onDisconnectPut(a,l,p){}onDisconnectMerge(a,l,p){}onDisconnectCancel(a,l){}reportStats(a){}}class Ds{constructor(a){this.allowedEvents_=a,this.listeners_={},(0,Y.hu)(Array.isArray(a)&&a.length>0,"Requires a non-empty array")}trigger(a,...l){if(Array.isArray(this.listeners_[a])){const p=[...this.listeners_[a]];for(let I=0;I<p.length;I++)p[I].callback.apply(p[I].context,l)}}on(a,l,p){this.validateEventType_(a),this.listeners_[a]=this.listeners_[a]||[],this.listeners_[a].push({callback:l,context:p});const I=this.getInitialEvent(a);I&&l.apply(p,I)}off(a,l,p){this.validateEventType_(a);const I=this.listeners_[a]||[];for(let R=0;R<I.length;R++)if(I[R].callback===l&&(!p||p===I[R].context))return void I.splice(R,1)}validateEventType_(a){(0,Y.hu)(this.allowedEvents_.find(l=>l===a),"Unknown event: "+a)}}class es extends Ds{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,Y.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new es}getInitialEvent(a){return(0,Y.hu)("online"===a,"Unknown event type: "+a),[this.online_]}currentlyOnline(){return this.online_}}const Dl=32,Gl=768;class qr{constructor(a,l){if(void 0===l){this.pieces_=a.split("/");let p=0;for(let I=0;I<this.pieces_.length;I++)this.pieces_[I].length>0&&(this.pieces_[p]=this.pieces_[I],p++);this.pieces_.length=p,this.pieceNum_=0}else this.pieces_=a,this.pieceNum_=l}toString(){let a="";for(let l=this.pieceNum_;l<this.pieces_.length;l++)""!==this.pieces_[l]&&(a+="/"+this.pieces_[l]);return a||"/"}}function Rr(){return new qr("")}function Yr(u){return u.pieceNum_>=u.pieces_.length?null:u.pieces_[u.pieceNum_]}function $t(u){return u.pieces_.length-u.pieceNum_}function Di(u){let a=u.pieceNum_;return a<u.pieces_.length&&a++,new qr(u.pieces_,a)}function to(u){return u.pieceNum_<u.pieces_.length?u.pieces_[u.pieces_.length-1]:null}function ca(u,a=0){return u.pieces_.slice(u.pieceNum_+a)}function Yo(u){if(u.pieceNum_>=u.pieces_.length)return null;const a=[];for(let l=u.pieceNum_;l<u.pieces_.length-1;l++)a.push(u.pieces_[l]);return new qr(a,0)}function ui(u,a){const l=[];for(let p=u.pieceNum_;p<u.pieces_.length;p++)l.push(u.pieces_[p]);if(a instanceof qr)for(let p=a.pieceNum_;p<a.pieces_.length;p++)l.push(a.pieces_[p]);else{const p=a.split("/");for(let I=0;I<p.length;I++)p[I].length>0&&l.push(p[I])}return new qr(l,0)}function Pr(u){return u.pieceNum_>=u.pieces_.length}function S(u,a){const l=Yr(u),p=Yr(a);if(null===l)return a;if(l===p)return S(Di(u),Di(a));throw new Error("INTERNAL ERROR: innerPath ("+a+") is not within outerPath ("+u+")")}function x(u,a){const l=ca(u,0),p=ca(a,0);for(let I=0;I<l.length&&I<p.length;I++){const R=Ra(l[I],p[I]);if(0!==R)return R}return l.length===p.length?0:l.length<p.length?-1:1}function w(u,a){if($t(u)!==$t(a))return!1;for(let l=u.pieceNum_,p=a.pieceNum_;l<=u.pieces_.length;l++,p++)if(u.pieces_[l]!==a.pieces_[p])return!1;return!0}function O(u,a){let l=u.pieceNum_,p=a.pieceNum_;if($t(u)>$t(a))return!1;for(;l<u.pieces_.length;){if(u.pieces_[l]!==a.pieces_[p])return!1;++l,++p}return!0}class z{constructor(a,l){this.errorPrefix_=l,this.parts_=ca(a,0),this.byteLength_=Math.max(1,this.parts_.length);for(let p=0;p<this.parts_.length;p++)this.byteLength_+=(0,Y.ug)(this.parts_[p]);lt(this)}}function lt(u){if(u.byteLength_>Gl)throw new Error(u.errorPrefix_+"has a key path longer than "+Gl+" bytes ("+u.byteLength_+").");if(u.parts_.length>Dl)throw new Error(u.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Dl+") or object contains a cycle "+Ut(u))}function Ut(u){return 0===u.parts_.length?"":"in property '"+u.parts_.join(".")+"'"}class En extends Ds{constructor(){let a,l;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(l="visibilitychange",a="hidden"):typeof document.mozHidden<"u"?(l="mozvisibilitychange",a="mozHidden"):typeof document.msHidden<"u"?(l="msvisibilitychange",a="msHidden"):typeof document.webkitHidden<"u"&&(l="webkitvisibilitychange",a="webkitHidden")),this.visible_=!0,l&&document.addEventListener(l,()=>{const p=!document[a];p!==this.visible_&&(this.visible_=p,this.trigger("visible",p))},!1)}static getInstance(){return new En}getInitialEvent(a){return(0,Y.hu)("visible"===a,"Unknown event type: "+a),[this.visible_]}}const Hn=1e3;let _o,Is=(()=>{class u extends Jc{constructor(l,p,I,R,V,te,pe,Oe){if(super(),this.repoInfo_=l,this.applicationId_=p,this.onDataUpdate_=I,this.onConnectStatus_=R,this.onServerInfoUpdate_=V,this.authTokenProvider_=te,this.appCheckTokenProvider_=pe,this.authOverride_=Oe,this.id=u.nextPersistentConnectionId_++,this.log_=xo("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Hn,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,Oe&&!(0,Y.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");En.getInstance().on("visible",this.onVisible_,this),-1===l.host.indexOf("fblocal")&&es.getInstance().on("online",this.onOnline_,this)}sendRequest(l,p,I){const R=++this.requestNumber_,V={r:R,a:l,b:p};this.log_((0,Y.Wl)(V)),(0,Y.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(V),I&&(this.requestCBHash_[R]=I)}get(l){this.initConnection_();const p=new Y.BH,R={action:"g",request:{p:l._path.toString(),q:l._queryObject},onComplete:te=>{const pe=te.d;"ok"===te.s?p.resolve(pe):p.reject(pe)}};return this.outstandingGets_.push(R),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),p.promise}listen(l,p,I,R){this.initConnection_();const V=l._queryIdentifier,te=l._path.toString();this.log_("Listen called for "+te+" "+V),this.listens.has(te)||this.listens.set(te,new Map),(0,Y.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,Y.hu)(!this.listens.get(te).has(V),"listen() called twice for same path/queryId.");const pe={onComplete:R,hashFn:p,query:l,tag:I};this.listens.get(te).set(V,pe),this.connected_&&this.sendListen_(pe)}sendGet_(l){const p=this.outstandingGets_[l];this.sendRequest("g",p.request,I=>{delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),p.onComplete&&p.onComplete(I)})}sendListen_(l){const p=l.query,I=p._path.toString(),R=p._queryIdentifier;this.log_("Listen on "+I+" for "+R);const V={p:I};l.tag&&(V.q=p._queryObject,V.t=l.tag),V.h=l.hashFn(),this.sendRequest("q",V,pe=>{const Oe=pe.d,Ft=pe.s;u.warnOnListenWarnings_(Oe,p),(this.listens.get(I)&&this.listens.get(I).get(R))===l&&(this.log_("listen response",pe),"ok"!==Ft&&this.removeListen_(I,R),l.onComplete&&l.onComplete(Ft,Oe))})}static warnOnListenWarnings_(l,p){if(l&&"object"==typeof l&&(0,Y.r3)(l,"w")){const I=(0,Y.DV)(l,"w");if(Array.isArray(I)&&~I.indexOf("no_index")){const R='".indexOn": "'+p._queryParams.getIndex().toString()+'"',V=p._path.toString();fs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${R} at ${V} to your security rules for better performance.`)}}}refreshAuthToken(l){this.authToken_=l,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(l)}reduceReconnectDelayIfAdminCredential_(l){(l&&40===l.length||(0,Y.GJ)(l))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(l){this.appCheckToken_=l,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const l=this.authToken_,p=(0,Y.w9)(l)?"auth":"gauth",I={cred:l};null===this.authOverride_?I.noauth=!0:"object"==typeof this.authOverride_&&(I.authvar=this.authOverride_),this.sendRequest(p,I,R=>{const V=R.s,te=R.d||"error";this.authToken_===l&&("ok"===V?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(V,te))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},l=>{const p=l.s,I=l.d||"error";"ok"===p?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(p,I)})}unlisten(l,p){const I=l._path.toString(),R=l._queryIdentifier;this.log_("Unlisten called for "+I+" "+R),(0,Y.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(I,R)&&this.connected_&&this.sendUnlisten_(I,R,l._queryObject,p)}sendUnlisten_(l,p,I,R){this.log_("Unlisten on "+l+" for "+p);const V={p:l};R&&(V.q=I,V.t=R),this.sendRequest("n",V)}onDisconnectPut(l,p,I){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",l,p,I):this.onDisconnectRequestQueue_.push({pathString:l,action:"o",data:p,onComplete:I})}onDisconnectMerge(l,p,I){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",l,p,I):this.onDisconnectRequestQueue_.push({pathString:l,action:"om",data:p,onComplete:I})}onDisconnectCancel(l,p){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",l,null,p):this.onDisconnectRequestQueue_.push({pathString:l,action:"oc",data:null,onComplete:p})}sendOnDisconnect_(l,p,I,R){const V={p,d:I};this.log_("onDisconnect "+l,V),this.sendRequest(l,V,te=>{R&&setTimeout(()=>{R(te.s,te.d)},Math.floor(0))})}put(l,p,I,R){this.putInternal("p",l,p,I,R)}merge(l,p,I,R){this.putInternal("m",l,p,I,R)}putInternal(l,p,I,R,V){this.initConnection_();const te={p,d:I};void 0!==V&&(te.h=V),this.outstandingPuts_.push({action:l,request:te,onComplete:R}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+p)}sendPut_(l){const p=this.outstandingPuts_[l].action,I=this.outstandingPuts_[l].request,R=this.outstandingPuts_[l].onComplete;this.outstandingPuts_[l].queued=this.connected_,this.sendRequest(p,I,V=>{this.log_(p+" response",V),delete this.outstandingPuts_[l],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),R&&R(V.s,V.d)})}reportStats(l){if(this.connected_){const p={c:l};this.log_("reportStats",p),this.sendRequest("s",p,I=>{"ok"!==I.s&&this.log_("reportStats","Error sending stats: "+I.d)})}}onDataMessage_(l){if("r"in l){this.log_("from server: "+(0,Y.Wl)(l));const p=l.r,I=this.requestCBHash_[p];I&&(delete this.requestCBHash_[p],I(l.b))}else{if("error"in l)throw"A server-side error has occurred: "+l.error;"a"in l&&this.onDataPush_(l.a,l.b)}}onDataPush_(l,p){this.log_("handleServerMessage",l,p),"d"===l?this.onDataUpdate_(p.p,p.d,!1,p.t):"m"===l?this.onDataUpdate_(p.p,p.d,!0,p.t):"c"===l?this.onListenRevoked_(p.p,p.q):"ac"===l?this.onAuthRevoked_(p.s,p.d):"apc"===l?this.onAppCheckRevoked_(p.s,p.d):"sd"===l?this.onSecurityDebugPacket_(p):Go("Unrecognized action received from server: "+(0,Y.Wl)(l)+"\nAre you using the latest client?")}onReady_(l,p){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(l),this.lastSessionId=p,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(l){(0,Y.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(l))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(l){l&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Hn,this.realtime_||this.scheduleConnect_(0)),this.visible_=l}onOnline_(l){l?(this.log_("Browser went online."),this.reconnectDelay_=Hn,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Hn),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const l=(new Date).getTime()-this.lastConnectionAttemptTime_;let p=Math.max(0,this.reconnectDelay_-l);p=Math.random()*p,this.log_("Trying to reconnect in "+p+"ms"),this.scheduleConnect_(p),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var l=this;return(0,de.Z)(function*(){if(l.shouldReconnect_()){l.log_("Making a connection attempt"),l.lastConnectionAttemptTime_=(new Date).getTime(),l.lastConnectionEstablishedTime_=null;const p=l.onDataMessage_.bind(l),I=l.onReady_.bind(l),R=l.onRealtimeDisconnect_.bind(l),V=l.id+":"+u.nextConnectionId_++,te=l.lastSessionId;let pe=!1,Oe=null;const Ft=function(){Oe?Oe.close():(pe=!0,R())};l.realtime_={close:Ft,sendRequest:function(Rn){(0,Y.hu)(Oe,"sendRequest call when we're not connected not allowed."),Oe.sendRequest(Rn)}};const sn=l.forceTokenRefresh_;l.forceTokenRefresh_=!1;try{const[Rn,Zn]=yield Promise.all([l.authTokenProvider_.getToken(sn),l.appCheckTokenProvider_.getToken(sn)]);pe?ls("getToken() completed but was canceled"):(ls("getToken() completed. Creating connection."),l.authToken_=Rn&&Rn.accessToken,l.appCheckToken_=Zn&&Zn.token,Oe=new Oc(V,l.repoInfo_,l.applicationId_,l.appCheckToken_,l.authToken_,p,I,R,Mr=>{fs(Mr+" ("+l.repoInfo_.toString()+")"),l.interrupt("server_kill")},te))}catch(Rn){l.log_("Failed to get token: "+Rn),pe||(l.repoInfo_.nodeAdmin&&fs(Rn),Ft())}}})()}interrupt(l){ls("Interrupting connection for reason: "+l),this.interruptReasons_[l]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(l){ls("Resuming connection for reason: "+l),delete this.interruptReasons_[l],(0,Y.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Hn,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(l){const p=l-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:p})}cancelSentTransactions_(){for(let l=0;l<this.outstandingPuts_.length;l++){const p=this.outstandingPuts_[l];p&&"h"in p.request&&p.queued&&(p.onComplete&&p.onComplete("disconnect"),delete this.outstandingPuts_[l],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(l,p){let I;I=p?p.map(V=>mo(V)).join("$"):"default";const R=this.removeListen_(l,I);R&&R.onComplete&&R.onComplete("permission_denied")}removeListen_(l,p){const I=new qr(l).toString();let R;if(this.listens.has(I)){const V=this.listens.get(I);R=V.get(p),V.delete(p),0===V.size&&this.listens.delete(I)}else R=void 0;return R}onAuthRevoked_(l,p){ls("Auth token revoked: "+l+"/"+p),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===l||"permission_denied"===l)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(l,p){ls("App check token revoked: "+l+"/"+p),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===l||"permission_denied"===l)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(l){this.securityDebugCallback_?this.securityDebugCallback_(l):"msg"in l&&console.log("FIREBASE: "+l.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const l of this.listens.values())for(const p of l.values())this.sendListen_(p);for(let l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){const l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(let l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)}sendConnectStats_(){const l={};let p="js";(0,Y.Yr)()&&(p=this.repoInfo_.nodeAdmin?"admin_node":"node"),l["sdk."+p+"."+aa.replace(/\./g,"-")]=1,(0,Y.uI)()?l["framework.cordova"]=1:(0,Y.b$)()&&(l["framework.reactnative"]=1),this.reportStats(l)}shouldReconnect_(){const l=es.getInstance().currentlyOnline();return(0,Y.xb)(this.interruptReasons_)&&l}}return u.nextPersistentConnectionId_=0,u.nextConnectionId_=0,u})();class Or{constructor(a,l){this.name=a,this.node=l}static Wrap(a,l){return new Or(a,l)}}class fc{getCompare(){return this.compare.bind(this)}indexedValueChanged(a,l){const p=new Or(Vr,a),I=new Or(Vr,l);return 0!==this.compare(p,I)}minPost(){return Or.MIN}}class eu extends fc{static get __EMPTY_NODE(){return _o}static set __EMPTY_NODE(a){_o=a}compare(a,l){return Ra(a.name,l.name)}isDefinedOn(a){throw(0,Y.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(a,l){return!1}minPost(){return Or.MIN}maxPost(){return new Or(Ro,_o)}makePost(a,l){return(0,Y.hu)("string"==typeof a,"KeyIndex indexValue must always be a string."),new Or(a,_o)}toString(){return".key"}}const Bo=new eu;class Tl{constructor(a,l,p,I,R=null){this.isReverse_=I,this.resultGenerator_=R,this.nodeStack_=[];let V=1;for(;!a.isEmpty();)if(V=l?p(a.key,l):1,I&&(V*=-1),V<0)a=this.isReverse_?a.left:a.right;else{if(0===V){this.nodeStack_.push(a);break}this.nodeStack_.push(a),a=this.isReverse_?a.right:a.left}}getNext(){if(0===this.nodeStack_.length)return null;let l,a=this.nodeStack_.pop();if(l=this.resultGenerator_?this.resultGenerator_(a.key,a.value):{key:a.key,value:a.value},this.isReverse_)for(a=a.left;!a.isEmpty();)this.nodeStack_.push(a),a=a.right;else for(a=a.right;!a.isEmpty();)this.nodeStack_.push(a),a=a.left;return l}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const a=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(a.key,a.value):{key:a.key,value:a.value}}}let sd,sl=(()=>{class u{constructor(l,p,I,R,V){this.key=l,this.value=p,this.color=null!=I?I:u.RED,this.left=null!=R?R:Zo.EMPTY_NODE,this.right=null!=V?V:Zo.EMPTY_NODE}copy(l,p,I,R,V){return new u(null!=l?l:this.key,null!=p?p:this.value,null!=I?I:this.color,null!=R?R:this.left,null!=V?V:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(l){return this.left.inorderTraversal(l)||!!l(this.key,this.value)||this.right.inorderTraversal(l)}reverseTraversal(l){return this.right.reverseTraversal(l)||l(this.key,this.value)||this.left.reverseTraversal(l)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(l,p,I){let R=this;const V=I(l,R.key);return R=V<0?R.copy(null,null,null,R.left.insert(l,p,I),null):0===V?R.copy(null,p,null,null,null):R.copy(null,null,null,null,R.right.insert(l,p,I)),R.fixUp_()}removeMin_(){if(this.left.isEmpty())return Zo.EMPTY_NODE;let l=this;return!l.left.isRed_()&&!l.left.left.isRed_()&&(l=l.moveRedLeft_()),l=l.copy(null,null,null,l.left.removeMin_(),null),l.fixUp_()}remove(l,p){let I,R;if(I=this,p(l,I.key)<0)!I.left.isEmpty()&&!I.left.isRed_()&&!I.left.left.isRed_()&&(I=I.moveRedLeft_()),I=I.copy(null,null,null,I.left.remove(l,p),null);else{if(I.left.isRed_()&&(I=I.rotateRight_()),!I.right.isEmpty()&&!I.right.isRed_()&&!I.right.left.isRed_()&&(I=I.moveRedRight_()),0===p(l,I.key)){if(I.right.isEmpty())return Zo.EMPTY_NODE;R=I.right.min_(),I=I.copy(R.key,R.value,null,null,I.right.removeMin_())}I=I.copy(null,null,null,null,I.right.remove(l,p))}return I.fixUp_()}isRed_(){return this.color}fixUp_(){let l=this;return l.right.isRed_()&&!l.left.isRed_()&&(l=l.rotateLeft_()),l.left.isRed_()&&l.left.left.isRed_()&&(l=l.rotateRight_()),l.left.isRed_()&&l.right.isRed_()&&(l=l.colorFlip_()),l}moveRedLeft_(){let l=this.colorFlip_();return l.right.left.isRed_()&&(l=l.copy(null,null,null,null,l.right.rotateRight_()),l=l.rotateLeft_(),l=l.colorFlip_()),l}moveRedRight_(){let l=this.colorFlip_();return l.left.left.isRed_()&&(l=l.rotateRight_(),l=l.colorFlip_()),l}rotateLeft_(){const l=this.copy(null,null,u.RED,null,this.right.left);return this.right.copy(null,null,this.color,l,null)}rotateRight_(){const l=this.copy(null,null,u.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,l)}colorFlip_(){const l=this.left.copy(null,null,!this.left.color,null,null),p=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,l,p)}checkMaxDepth_(){const l=this.check_();return Math.pow(2,l)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const l=this.left.check_();if(l!==this.right.check_())throw new Error("Black depths differ");return l+(this.isRed_()?0:1)}}return u.RED=!0,u.BLACK=!1,u})();class Zo{constructor(a,l=Zo.EMPTY_NODE){this.comparator_=a,this.root_=l}insert(a,l){return new Zo(this.comparator_,this.root_.insert(a,l,this.comparator_).copy(null,null,sl.BLACK,null,null))}remove(a){return new Zo(this.comparator_,this.root_.remove(a,this.comparator_).copy(null,null,sl.BLACK,null,null))}get(a){let l,p=this.root_;for(;!p.isEmpty();){if(l=this.comparator_(a,p.key),0===l)return p.value;l<0?p=p.left:l>0&&(p=p.right)}return null}getPredecessorKey(a){let l,p=this.root_,I=null;for(;!p.isEmpty();){if(l=this.comparator_(a,p.key),0===l){if(p.left.isEmpty())return I?I.key:null;for(p=p.left;!p.right.isEmpty();)p=p.right;return p.key}l<0?p=p.left:l>0&&(I=p,p=p.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(a){return this.root_.inorderTraversal(a)}reverseTraversal(a){return this.root_.reverseTraversal(a)}getIterator(a){return new Tl(this.root_,null,this.comparator_,!1,a)}getIteratorFrom(a,l){return new Tl(this.root_,a,this.comparator_,!1,l)}getReverseIteratorFrom(a,l){return new Tl(this.root_,a,this.comparator_,!0,l)}getReverseIterator(a){return new Tl(this.root_,null,this.comparator_,!0,a)}}function rd(u,a){return Ra(u.name,a.name)}function id(u,a){return Ra(u,a)}Zo.EMPTY_NODE=new class Bd{copy(a,l,p,I,R){return this}insert(a,l,p){return new sl(a,l,null)}remove(a,l){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(a){return!1}reverseTraversal(a){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Ud=function(u){return"number"==typeof u?"number:"+Hl(u):"string:"+u},kc=function(u){if(u.isLeafNode()){const a=u.val();(0,Y.hu)("string"==typeof a||"number"==typeof a||"object"==typeof a&&(0,Y.r3)(a,".sv"),"Priority must be a string or number.")}else(0,Y.hu)(u===sd||u.isEmpty(),"priority of unexpected type.");(0,Y.hu)(u===sd||u.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Nc,wu,Bs,Fc=(()=>{class u{constructor(l,p=u.__childrenNodeConstructor.EMPTY_NODE){this.value_=l,this.priorityNode_=p,this.lazyHash_=null,(0,Y.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),kc(this.priorityNode_)}static set __childrenNodeConstructor(l){Nc=l}static get __childrenNodeConstructor(){return Nc}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(l){return new u(this.value_,l)}getImmediateChild(l){return".priority"===l?this.priorityNode_:u.__childrenNodeConstructor.EMPTY_NODE}getChild(l){return Pr(l)?this:".priority"===Yr(l)?this.priorityNode_:u.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(l,p){return null}updateImmediateChild(l,p){return".priority"===l?this.updatePriority(p):p.isEmpty()&&".priority"!==l?this:u.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(l,p).updatePriority(this.priorityNode_)}updateChild(l,p){const I=Yr(l);return null===I?p:p.isEmpty()&&".priority"!==I?this:((0,Y.hu)(".priority"!==I||1===$t(l),".priority must be the last token in a path"),this.updateImmediateChild(I,u.__childrenNodeConstructor.EMPTY_NODE.updateChild(Di(l),p)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(l,p){return!1}val(l){return l&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let l="";this.priorityNode_.isEmpty()||(l+="priority:"+Ud(this.priorityNode_.val())+":");const p=typeof this.value_;l+=p+":",l+="number"===p?Hl(this.value_):this.value_,this.lazyHash_=Aa(l)}return this.lazyHash_}getValue(){return this.value_}compareTo(l){return l===u.__childrenNodeConstructor.EMPTY_NODE?1:l instanceof u.__childrenNodeConstructor?-1:((0,Y.hu)(l.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(l))}compareToLeafNode_(l){const p=typeof l.value_,I=typeof this.value_,R=u.VALUE_TYPE_ORDER.indexOf(p),V=u.VALUE_TYPE_ORDER.indexOf(I);return(0,Y.hu)(R>=0,"Unknown leaf type: "+p),(0,Y.hu)(V>=0,"Unknown leaf type: "+I),R===V?"object"===I?0:this.value_<l.value_?-1:this.value_===l.value_?0:1:V-R}withIndex(){return this}isIndexed(){return!0}equals(l){return l===this||!!l.isLeafNode()&&(this.value_===l.value_&&this.priorityNode_.equals(l.priorityNode_))}}return u.VALUE_TYPE_ORDER=["object","boolean","number","string"],u})();const xr=new class tu extends fc{compare(a,l){const p=a.node.getPriority(),I=l.node.getPriority(),R=p.compareTo(I);return 0===R?Ra(a.name,l.name):R}isDefinedOn(a){return!a.getPriority().isEmpty()}indexedValueChanged(a,l){return!a.getPriority().equals(l.getPriority())}minPost(){return Or.MIN}maxPost(){return new Or(Ro,new Fc("[PRIORITY-POST]",Bs))}makePost(a,l){const p=wu(a);return new Or(l,new Fc("[PRIORITY-POST]",p))}toString(){return".priority"}},Sl=Math.log(2);class Us{constructor(a){this.count=parseInt(Math.log(a+1)/Sl,10),this.current_=this.count-1;const I=(R=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=a+1&I}nextBitIsOne(){const a=!(this.bits_&1<<this.current_);return this.current_--,a}}const Ui=function(u,a,l,p){u.sort(a);const I=function(pe,Oe){const Ft=Oe-pe;let qt,sn;if(0===Ft)return null;if(1===Ft)return qt=u[pe],sn=l?l(qt):qt,new sl(sn,qt.node,sl.BLACK,null,null);{const Rn=parseInt(Ft/2,10)+pe,Zn=I(pe,Rn),Mr=I(Rn+1,Oe);return qt=u[Rn],sn=l?l(qt):qt,new sl(sn,qt.node,sl.BLACK,Zn,Mr)}},te=function(pe){let Oe=null,Ft=null,qt=u.length;const sn=function(Zn,Mr){const oi=qt-Zn,Mi=qt;qt-=Zn;const Ms=I(oi+1,Mi),Cs=u[oi],ss=l?l(Cs):Cs;Rn(new sl(ss,Cs.node,Mr,null,Ms))},Rn=function(Zn){Oe?(Oe.left=Zn,Oe=Zn):(Ft=Zn,Oe=Zn)};for(let Zn=0;Zn<pe.count;++Zn){const Mr=pe.nextBitIsOne(),oi=Math.pow(2,pe.count-(Zn+1));Mr?sn(oi,sl.BLACK):(sn(oi,sl.BLACK),sn(oi,sl.RED))}return Ft}(new Us(u.length));return new Zo(p||a,te)};let Al;const va={};class gs{constructor(a,l){this.indexes_=a,this.indexSet_=l}static get Default(){return(0,Y.hu)(va&&xr,"ChildrenNode.ts has not been loaded"),Al=Al||new gs({".priority":va},{".priority":xr}),Al}get(a){const l=(0,Y.DV)(this.indexes_,a);if(!l)throw new Error("No index defined for "+a);return l instanceof Zo?l:null}hasIndex(a){return(0,Y.r3)(this.indexSet_,a.toString())}addIndex(a,l){(0,Y.hu)(a!==Bo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const p=[];let I=!1;const R=l.getIterator(Or.Wrap);let te,V=R.getNext();for(;V;)I=I||a.isDefinedOn(V.node),p.push(V),V=R.getNext();te=I?Ui(p,a.getCompare()):va;const pe=a.toString(),Oe=Object.assign({},this.indexSet_);Oe[pe]=a;const Ft=Object.assign({},this.indexes_);return Ft[pe]=te,new gs(Ft,Oe)}addToIndexes(a,l){const p=(0,Y.UI)(this.indexes_,(I,R)=>{const V=(0,Y.DV)(this.indexSet_,R);if((0,Y.hu)(V,"Missing index implementation for "+R),I===va){if(V.isDefinedOn(a.node)){const te=[],pe=l.getIterator(Or.Wrap);let Oe=pe.getNext();for(;Oe;)Oe.name!==a.name&&te.push(Oe),Oe=pe.getNext();return te.push(a),Ui(te,V.getCompare())}return va}{const te=l.get(a.name);let pe=I;return te&&(pe=pe.remove(new Or(a.name,te))),pe.insert(a,a.node)}});return new gs(p,this.indexSet_)}removeFromIndexes(a,l){const p=(0,Y.UI)(this.indexes_,I=>{if(I===va)return I;{const R=l.get(a.name);return R?I.remove(new Or(a.name,R)):I}});return new gs(p,this.indexSet_)}}let pc,ni=(()=>{class u{constructor(l,p,I){this.children_=l,this.priorityNode_=p,this.indexMap_=I,this.lazyHash_=null,this.priorityNode_&&kc(this.priorityNode_),this.children_.isEmpty()&&(0,Y.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return pc||(pc=new u(new Zo(id),null,gs.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||pc}updatePriority(l){return this.children_.isEmpty()?this:new u(this.children_,l,this.indexMap_)}getImmediateChild(l){if(".priority"===l)return this.getPriority();{const p=this.children_.get(l);return null===p?pc:p}}getChild(l){const p=Yr(l);return null===p?this:this.getImmediateChild(p).getChild(Di(l))}hasChild(l){return null!==this.children_.get(l)}updateImmediateChild(l,p){if((0,Y.hu)(p,"We should always be passing snapshot nodes"),".priority"===l)return this.updatePriority(p);{const I=new Or(l,p);let R,V;p.isEmpty()?(R=this.children_.remove(l),V=this.indexMap_.removeFromIndexes(I,this.children_)):(R=this.children_.insert(l,p),V=this.indexMap_.addToIndexes(I,this.children_));const te=R.isEmpty()?pc:this.priorityNode_;return new u(R,te,V)}}updateChild(l,p){const I=Yr(l);if(null===I)return p;{(0,Y.hu)(".priority"!==Yr(l)||1===$t(l),".priority must be the last token in a path");const R=this.getImmediateChild(I).updateChild(Di(l),p);return this.updateImmediateChild(I,R)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(l){if(this.isEmpty())return null;const p={};let I=0,R=0,V=!0;if(this.forEachChild(xr,(te,pe)=>{p[te]=pe.val(l),I++,V&&u.INTEGER_REGEXP_.test(te)?R=Math.max(R,Number(te)):V=!1}),!l&&V&&R<2*I){const te=[];for(const pe in p)te[pe]=p[pe];return te}return l&&!this.getPriority().isEmpty()&&(p[".priority"]=this.getPriority().val()),p}hash(){if(null===this.lazyHash_){let l="";this.getPriority().isEmpty()||(l+="priority:"+Ud(this.getPriority().val())+":"),this.forEachChild(xr,(p,I)=>{const R=I.hash();""!==R&&(l+=":"+p+":"+R)}),this.lazyHash_=""===l?"":Aa(l)}return this.lazyHash_}getPredecessorChildName(l,p,I){const R=this.resolveIndex_(I);if(R){const V=R.getPredecessorKey(new Or(l,p));return V?V.name:null}return this.children_.getPredecessorKey(l)}getFirstChildName(l){const p=this.resolveIndex_(l);if(p){const I=p.minKey();return I&&I.name}return this.children_.minKey()}getFirstChild(l){const p=this.getFirstChildName(l);return p?new Or(p,this.children_.get(p)):null}getLastChildName(l){const p=this.resolveIndex_(l);if(p){const I=p.maxKey();return I&&I.name}return this.children_.maxKey()}getLastChild(l){const p=this.getLastChildName(l);return p?new Or(p,this.children_.get(p)):null}forEachChild(l,p){const I=this.resolveIndex_(l);return I?I.inorderTraversal(R=>p(R.name,R.node)):this.children_.inorderTraversal(p)}getIterator(l){return this.getIteratorFrom(l.minPost(),l)}getIteratorFrom(l,p){const I=this.resolveIndex_(p);if(I)return I.getIteratorFrom(l,R=>R);{const R=this.children_.getIteratorFrom(l.name,Or.Wrap);let V=R.peek();for(;null!=V&&p.compare(V,l)<0;)R.getNext(),V=R.peek();return R}}getReverseIterator(l){return this.getReverseIteratorFrom(l.maxPost(),l)}getReverseIteratorFrom(l,p){const I=this.resolveIndex_(p);if(I)return I.getReverseIteratorFrom(l,R=>R);{const R=this.children_.getReverseIteratorFrom(l.name,Or.Wrap);let V=R.peek();for(;null!=V&&p.compare(V,l)>0;)R.getNext(),V=R.peek();return R}}compareTo(l){return this.isEmpty()?l.isEmpty()?0:-1:l.isLeafNode()||l.isEmpty()?1:l===Cu?-1:0}withIndex(l){if(l===Bo||this.indexMap_.hasIndex(l))return this;{const p=this.indexMap_.addIndex(l,this.children_);return new u(this.children_,this.priorityNode_,p)}}isIndexed(l){return l===Bo||this.indexMap_.hasIndex(l)}equals(l){if(l===this)return!0;if(l.isLeafNode())return!1;{const p=l;if(this.getPriority().equals(p.getPriority())){if(this.children_.count()===p.children_.count()){const I=this.getIterator(xr),R=p.getIterator(xr);let V=I.getNext(),te=R.getNext();for(;V&&te;){if(V.name!==te.name||!V.node.equals(te.node))return!1;V=I.getNext(),te=R.getNext()}return null===V&&null===te}return!1}return!1}}resolveIndex_(l){return l===Bo?null:this.indexMap_.get(l.toString())}}return u.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,u})();const Cu=new class no extends ni{constructor(){super(new Zo(id),ni.EMPTY_NODE,gs.Default)}compareTo(a){return a===this?0:1}equals(a){return a===this}getPriority(){return this}getImmediateChild(a){return ni.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Or,{MIN:{value:new Or(Vr,ni.EMPTY_NODE)},MAX:{value:new Or(Ro,Cu)}}),eu.__EMPTY_NODE=ni.EMPTY_NODE,Fc.__childrenNodeConstructor=ni,function Iu(u){sd=u}(Cu),function ol(u){Bs=u}(Cu);const xl=!0;function Hr(u,a=null){if(null===u)return ni.EMPTY_NODE;if("object"==typeof u&&".priority"in u&&(a=u[".priority"]),(0,Y.hu)(null===a||"string"==typeof a||"number"==typeof a||"object"==typeof a&&".sv"in a,"Invalid priority type found: "+typeof a),"object"==typeof u&&".value"in u&&null!==u[".value"]&&(u=u[".value"]),"object"!=typeof u||".sv"in u)return new Fc(u,Hr(a));if(u instanceof Array||!xl){let l=ni.EMPTY_NODE;return Sr(u,(p,I)=>{if((0,Y.r3)(u,p)&&"."!==p.substring(0,1)){const R=Hr(I);(R.isLeafNode()||!R.isEmpty())&&(l=l.updateImmediateChild(p,R))}}),l.updatePriority(Hr(a))}{const l=[];let p=!1;if(Sr(u,(V,te)=>{if("."!==V.substring(0,1)){const pe=Hr(te);pe.isEmpty()||(p=p||!pe.getPriority().isEmpty(),l.push(new Or(V,pe)))}}),0===l.length)return ni.EMPTY_NODE;const R=Ui(l,rd,V=>V.name,id);if(p){const V=Ui(l,xr.getCompare());return new ni(R,Hr(a),new gs({".priority":V},{".priority":xr}))}return new ni(R,Hr(a),gs.Default)}}!function od(u){wu=u}(Hr);class ro extends fc{constructor(a){super(),this.indexPath_=a,(0,Y.hu)(!Pr(a)&&".priority"!==Yr(a),"Can't create PathIndex with empty path or .priority key")}extractChild(a){return a.getChild(this.indexPath_)}isDefinedOn(a){return!a.getChild(this.indexPath_).isEmpty()}compare(a,l){const p=this.extractChild(a.node),I=this.extractChild(l.node),R=p.compareTo(I);return 0===R?Ra(a.name,l.name):R}makePost(a,l){const p=Hr(a),I=ni.EMPTY_NODE.updateChild(this.indexPath_,p);return new Or(l,I)}maxPost(){const a=ni.EMPTY_NODE.updateChild(this.indexPath_,Cu);return new Or(Ro,a)}toString(){return ca(this.indexPath_,0).join("/")}}const gc=new class Lc extends fc{compare(a,l){const p=a.node.compareTo(l.node);return 0===p?Ra(a.name,l.name):p}isDefinedOn(a){return!0}indexedValueChanged(a,l){return!a.equals(l)}minPost(){return Or.MIN}maxPost(){return Or.MAX}makePost(a,l){const p=Hr(a);return new Or(l,p)}toString(){return".value"}};function Uo(u){return{type:"value",snapshotNode:u}}function Pa(u,a){return{type:"child_added",snapshotNode:a,childName:u}}function Xo(u,a){return{type:"child_removed",snapshotNode:a,childName:u}}function Eo(u,a,l){return{type:"child_changed",snapshotNode:a,childName:u,oldSnap:l}}class za{constructor(a){this.index_=a}updateChild(a,l,p,I,R,V){(0,Y.hu)(a.isIndexed(this.index_),"A node must be indexed if only a child is updated");const te=a.getImmediateChild(l);return te.getChild(I).equals(p.getChild(I))&&te.isEmpty()===p.isEmpty()||(null!=V&&(p.isEmpty()?a.hasChild(l)?V.trackChildChange(Xo(l,te)):(0,Y.hu)(a.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):te.isEmpty()?V.trackChildChange(Pa(l,p)):V.trackChildChange(Eo(l,p,te))),a.isLeafNode()&&p.isEmpty())?a:a.updateImmediateChild(l,p).withIndex(this.index_)}updateFullNode(a,l,p){return null!=p&&(a.isLeafNode()||a.forEachChild(xr,(I,R)=>{l.hasChild(I)||p.trackChildChange(Xo(I,R))}),l.isLeafNode()||l.forEachChild(xr,(I,R)=>{if(a.hasChild(I)){const V=a.getImmediateChild(I);V.equals(R)||p.trackChildChange(Eo(I,R,V))}else p.trackChildChange(Pa(I,R))})),l.withIndex(this.index_)}updatePriority(a,l){return a.isEmpty()?ni.EMPTY_NODE:a.updatePriority(l)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Qo{constructor(a){this.indexedFilter_=new za(a.getIndex()),this.index_=a.getIndex(),this.startPost_=Qo.getStartPost_(a),this.endPost_=Qo.getEndPost_(a),this.startIsInclusive_=!a.startAfterSet_,this.endIsInclusive_=!a.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(a){const l=this.startIsInclusive_?this.index_.compare(this.getStartPost(),a)<=0:this.index_.compare(this.getStartPost(),a)<0,p=this.endIsInclusive_?this.index_.compare(a,this.getEndPost())<=0:this.index_.compare(a,this.getEndPost())<0;return l&&p}updateChild(a,l,p,I,R,V){return this.matches(new Or(l,p))||(p=ni.EMPTY_NODE),this.indexedFilter_.updateChild(a,l,p,I,R,V)}updateFullNode(a,l,p){l.isLeafNode()&&(l=ni.EMPTY_NODE);let I=l.withIndex(this.index_);I=I.updatePriority(ni.EMPTY_NODE);const R=this;return l.forEachChild(xr,(V,te)=>{R.matches(new Or(V,te))||(I=I.updateImmediateChild(V,ni.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(a,I,p)}updatePriority(a,l){return a}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(a){if(a.hasStart()){const l=a.getIndexStartName();return a.getIndex().makePost(a.getIndexStartValue(),l)}return a.getIndex().minPost()}static getEndPost_(a){if(a.hasEnd()){const l=a.getIndexEndName();return a.getIndex().makePost(a.getIndexEndValue(),l)}return a.getIndex().maxPost()}}class ru{constructor(a){this.withinDirectionalStart=l=>this.reverse_?this.withinEndPost(l):this.withinStartPost(l),this.withinDirectionalEnd=l=>this.reverse_?this.withinStartPost(l):this.withinEndPost(l),this.withinStartPost=l=>{const p=this.index_.compare(this.rangedFilter_.getStartPost(),l);return this.startIsInclusive_?p<=0:p<0},this.withinEndPost=l=>{const p=this.index_.compare(l,this.rangedFilter_.getEndPost());return this.endIsInclusive_?p<=0:p<0},this.rangedFilter_=new Qo(a),this.index_=a.getIndex(),this.limit_=a.getLimit(),this.reverse_=!a.isViewFromLeft(),this.startIsInclusive_=!a.startAfterSet_,this.endIsInclusive_=!a.endBeforeSet_}updateChild(a,l,p,I,R,V){return this.rangedFilter_.matches(new Or(l,p))||(p=ni.EMPTY_NODE),a.getImmediateChild(l).equals(p)?a:a.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(a,l,p,I,R,V):this.fullLimitUpdateChild_(a,l,p,R,V)}updateFullNode(a,l,p){let I;if(l.isLeafNode()||l.isEmpty())I=ni.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<l.numChildren()&&l.isIndexed(this.index_)){let R;I=ni.EMPTY_NODE.withIndex(this.index_),R=this.reverse_?l.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let V=0;for(;R.hasNext()&&V<this.limit_;){const te=R.getNext();if(this.withinDirectionalStart(te)){if(!this.withinDirectionalEnd(te))break;I=I.updateImmediateChild(te.name,te.node),V++}}}else{let R;I=l.withIndex(this.index_),I=I.updatePriority(ni.EMPTY_NODE),R=this.reverse_?I.getReverseIterator(this.index_):I.getIterator(this.index_);let V=0;for(;R.hasNext();){const te=R.getNext();V<this.limit_&&this.withinDirectionalStart(te)&&this.withinDirectionalEnd(te)?V++:I=I.updateImmediateChild(te.name,ni.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(a,I,p)}updatePriority(a,l){return a}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(a,l,p,I,R){let V;if(this.reverse_){const qt=this.index_.getCompare();V=(sn,Rn)=>qt(Rn,sn)}else V=this.index_.getCompare();const te=a;(0,Y.hu)(te.numChildren()===this.limit_,"");const pe=new Or(l,p),Oe=this.reverse_?te.getFirstChild(this.index_):te.getLastChild(this.index_),Ft=this.rangedFilter_.matches(pe);if(te.hasChild(l)){const qt=te.getImmediateChild(l);let sn=I.getChildAfterChild(this.index_,Oe,this.reverse_);for(;null!=sn&&(sn.name===l||te.hasChild(sn.name));)sn=I.getChildAfterChild(this.index_,sn,this.reverse_);const Rn=null==sn?1:V(sn,pe);if(Ft&&!p.isEmpty()&&Rn>=0)return null!=R&&R.trackChildChange(Eo(l,p,qt)),te.updateImmediateChild(l,p);{null!=R&&R.trackChildChange(Xo(l,qt));const Mr=te.updateImmediateChild(l,ni.EMPTY_NODE);return null!=sn&&this.rangedFilter_.matches(sn)?(null!=R&&R.trackChildChange(Pa(sn.name,sn.node)),Mr.updateImmediateChild(sn.name,sn.node)):Mr}}return p.isEmpty()?a:Ft&&V(Oe,pe)>=0?(null!=R&&(R.trackChildChange(Xo(Oe.name,Oe.node)),R.trackChildChange(Pa(l,p))),te.updateImmediateChild(l,p).updateImmediateChild(Oe.name,ni.EMPTY_NODE)):a}}class Ga{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=xr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,Y.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,Y.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Vr}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,Y.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,Y.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ro}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,Y.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===xr}copy(){const a=new Ga;return a.limitSet_=this.limitSet_,a.limit_=this.limit_,a.startSet_=this.startSet_,a.startAfterSet_=this.startAfterSet_,a.indexStartValue_=this.indexStartValue_,a.startNameSet_=this.startNameSet_,a.indexStartName_=this.indexStartName_,a.endSet_=this.endSet_,a.endBeforeSet_=this.endBeforeSet_,a.indexEndValue_=this.indexEndValue_,a.endNameSet_=this.endNameSet_,a.indexEndName_=this.indexEndName_,a.index_=this.index_,a.viewFrom_=this.viewFrom_,a}}function Z(u,a,l){const p=u.copy();return p.startSet_=!0,void 0===a&&(a=null),p.indexStartValue_=a,null!=l?(p.startNameSet_=!0,p.indexStartName_=l):(p.startNameSet_=!1,p.indexStartName_=""),p}function dt(u,a,l){const p=u.copy();return p.endSet_=!0,void 0===a&&(a=null),p.indexEndValue_=a,void 0!==l?(p.endNameSet_=!0,p.indexEndName_=l):(p.endNameSet_=!1,p.indexEndName_=""),p}function Wt(u,a){const l=u.copy();return l.index_=a,l}function Un(u){const a={};if(u.isDefault())return a;let l;if(u.index_===xr?l="$priority":u.index_===gc?l="$value":u.index_===Bo?l="$key":((0,Y.hu)(u.index_ instanceof ro,"Unrecognized index type!"),l=u.index_.toString()),a.orderBy=(0,Y.Wl)(l),u.startSet_){const p=u.startAfterSet_?"startAfter":"startAt";a[p]=(0,Y.Wl)(u.indexStartValue_),u.startNameSet_&&(a[p]+=","+(0,Y.Wl)(u.indexStartName_))}if(u.endSet_){const p=u.endBeforeSet_?"endBefore":"endAt";a[p]=(0,Y.Wl)(u.indexEndValue_),u.endNameSet_&&(a[p]+=","+(0,Y.Wl)(u.indexEndName_))}return u.limitSet_&&(u.isViewFromLeft()?a.limitToFirst=u.limit_:a.limitToLast=u.limit_),a}function Nn(u){const a={};if(u.startSet_&&(a.sp=u.indexStartValue_,u.startNameSet_&&(a.sn=u.indexStartName_),a.sin=!u.startAfterSet_),u.endSet_&&(a.ep=u.indexEndValue_,u.endNameSet_&&(a.en=u.indexEndName_),a.ein=!u.endBeforeSet_),u.limitSet_){a.l=u.limit_;let l=u.viewFrom_;""===l&&(l=u.isViewFromLeft()?"l":"r"),a.vf=l}return u.index_!==xr&&(a.i=u.index_.toString()),a}class ir extends Jc{constructor(a,l,p,I){super(),this.repoInfo_=a,this.onDataUpdate_=l,this.authTokenProvider_=p,this.appCheckTokenProvider_=I,this.log_=xo("p:rest:"),this.listens_={}}reportStats(a){throw new Error("Method not implemented.")}static getListenId_(a,l){return void 0!==l?"tag$"+l:((0,Y.hu)(a._queryParams.isDefault(),"should have a tag if it's not a default query."),a._path.toString())}listen(a,l,p,I){const R=a._path.toString();this.log_("Listen called for "+R+" "+a._queryIdentifier);const V=ir.getListenId_(a,p),te={};this.listens_[V]=te;const pe=Un(a._queryParams);this.restRequest_(R+".json",pe,(Oe,Ft)=>{let qt=Ft;if(404===Oe&&(qt=null,Oe=null),null===Oe&&this.onDataUpdate_(R,qt,!1,p),(0,Y.DV)(this.listens_,V)===te){let sn;sn=Oe?401===Oe?"permission_denied":"rest_error:"+Oe:"ok",I(sn,null)}})}unlisten(a,l){const p=ir.getListenId_(a,l);delete this.listens_[p]}get(a){const l=Un(a._queryParams),p=a._path.toString(),I=new Y.BH;return this.restRequest_(p+".json",l,(R,V)=>{let te=V;404===R&&(te=null,R=null),null===R?(this.onDataUpdate_(p,te,!1,null),I.resolve(te)):I.reject(new Error(te))}),I.promise}refreshAuthToken(a){}restRequest_(a,l={},p){return l.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([I,R])=>{I&&I.accessToken&&(l.auth=I.accessToken),R&&R.token&&(l.ac=R.token);const V=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+a+"?ns="+this.repoInfo_.namespace+(0,Y.xO)(l);this.log_("Sending REST request for "+V);const te=new XMLHttpRequest;te.onreadystatechange=()=>{if(p&&4===te.readyState){this.log_("REST Response for "+V+" received. status:",te.status,"response:",te.responseText);let pe=null;if(te.status>=200&&te.status<300){try{pe=(0,Y.cI)(te.responseText)}catch{fs("Failed to parse JSON response for "+V+": "+te.responseText)}p(null,pe)}else 401!==te.status&&404!==te.status&&fs("Got unsuccessful REST response for "+V+" Status: "+te.status),p(te.status);p=null}},te.open("GET",V,!0),te.send()})}}class jr{constructor(){this.rootNode_=ni.EMPTY_NODE}getNode(a){return this.rootNode_.getChild(a)}updateSnapshot(a,l){this.rootNode_=this.rootNode_.updateChild(a,l)}}function Nr(){return{value:null,children:new Map}}function Po(u,a,l){if(Pr(a))u.value=l,u.children.clear();else if(null!==u.value)u.value=u.value.updateChild(a,l);else{const p=Yr(a);u.children.has(p)||u.children.set(p,Nr()),Po(u.children.get(p),a=Di(a),l)}}function ws(u,a){if(Pr(a))return u.value=null,u.children.clear(),!0;if(null!==u.value){if(u.value.isLeafNode())return!1;{const l=u.value;return u.value=null,l.forEachChild(xr,(p,I)=>{Po(u,new qr(p),I)}),ws(u,a)}}if(u.children.size>0){const l=Yr(a);return a=Di(a),u.children.has(l)&&ws(u.children.get(l),a)&&u.children.delete(l),0===u.children.size}return!0}function Rl(u,a,l){null!==u.value?l(a,u.value):function Vs(u,a){u.children.forEach((l,p)=>{a(p,l)})}(u,(p,I)=>{Rl(I,new qr(a.toString()+"/"+p),l)})}class Wl{constructor(a){this.collection_=a,this.last_=null}get(){const a=this.collection_.get(),l=Object.assign({},a);return this.last_&&Sr(this.last_,(p,I)=>{l[p]=l[p]-I}),this.last_=a,l}}class jd{constructor(a,l){this.server_=l,this.statsToReport_={},this.statsListener_=new Wl(a);const p=1e4+2e4*Math.random();Ar(this.reportStats_.bind(this),Math.floor(p))}reportStats_(){const a=this.statsListener_.get(),l={};let p=!1;Sr(a,(I,R)=>{R>0&&(0,Y.r3)(this.statsToReport_,I)&&(l[I]=R,p=!0)}),p&&this.server_.reportStats(l),Ar(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var io=(()=>{return(u=io||(io={}))[u.OVERWRITE=0]="OVERWRITE",u[u.MERGE=1]="MERGE",u[u.ACK_USER_WRITE=2]="ACK_USER_WRITE",u[u.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",io;var u})();function hi(u){return{fromUser:!1,fromServer:!0,queryId:u,tagged:!0}}class Si{constructor(a,l,p){this.path=a,this.affectedTree=l,this.revert=p,this.type=io.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(a){if(Pr(this.path)){if(null!=this.affectedTree.value)return(0,Y.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const l=this.affectedTree.subtree(new qr(a));return new Si(Rr(),l,this.revert)}}return(0,Y.hu)(Yr(this.path)===a,"operationForChild called for unrelated child."),new Si(Di(this.path),this.affectedTree,this.revert)}}class al{constructor(a,l){this.source=a,this.path=l,this.type=io.LISTEN_COMPLETE}operationForChild(a){return Pr(this.path)?new al(this.source,Rr()):new al(this.source,Di(this.path))}}class _a{constructor(a,l,p){this.source=a,this.path=l,this.snap=p,this.type=io.OVERWRITE}operationForChild(a){return Pr(this.path)?new _a(this.source,Rr(),this.snap.getImmediateChild(a)):new _a(this.source,Di(this.path),this.snap)}}class Kl{constructor(a,l,p){this.source=a,this.path=l,this.children=p,this.type=io.MERGE}operationForChild(a){if(Pr(this.path)){const l=this.children.subtree(new qr(a));return l.isEmpty()?null:l.value?new _a(this.source,Rr(),l.value):new Kl(this.source,Rr(),l)}return(0,Y.hu)(Yr(this.path)===a,"Can't get a merge for a child not on the path of the operation"),new Kl(this.source,Di(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ql{constructor(a,l,p){this.node_=a,this.fullyInitialized_=l,this.filtered_=p}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(a){if(Pr(a))return this.isFullyInitialized()&&!this.filtered_;const l=Yr(a);return this.isCompleteForChild(l)}isCompleteForChild(a){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(a)}getNode(){return this.node_}}class xh{constructor(a){this.query_=a,this.index_=this.query_._queryParams.getIndex()}}function Du(u,a,l,p,I,R){const V=p.filter(te=>te.type===l);V.sort((te,pe)=>function Dp(u,a,l){if(null==a.childName||null==l.childName)throw(0,Y.g5)("Should only compare child_ events.");const p=new Or(a.childName,a.snapshotNode),I=new Or(l.childName,l.snapshotNode);return u.index_.compare(p,I)}(u,te,pe)),V.forEach(te=>{const pe=function Rh(u,a,l){return"value"===a.type||"child_removed"===a.type||(a.prevName=l.getPredecessorChildName(a.childName,a.snapshotNode,u.index_)),a}(u,te,R);I.forEach(Oe=>{Oe.respondsTo(te.type)&&a.push(Oe.createEvent(pe,u.query_))})})}function Mh(u,a){return{eventCache:u,serverCache:a}}function Ml(u,a,l,p){return Mh(new ql(a,l,p),u.serverCache)}function Ph(u,a,l,p){return Mh(u.eventCache,new ql(a,l,p))}function ad(u){return u.eventCache.isFullyInitialized()?u.eventCache.getNode():null}function ll(u){return u.serverCache.isFullyInitialized()?u.serverCache.getNode():null}let zd;class ms{constructor(a,l=(()=>(zd||(zd=new Zo(Lo)),zd))()){this.value=a,this.children=l}static fromObject(a){let l=new ms(null);return Sr(a,(p,I)=>{l=l.set(new qr(p),I)}),l}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(a,l){if(null!=this.value&&l(this.value))return{path:Rr(),value:this.value};if(Pr(a))return null;{const p=Yr(a),I=this.children.get(p);if(null!==I){const R=I.findRootMostMatchingPathAndValue(Di(a),l);return null!=R?{path:ui(new qr(p),R.path),value:R.value}:null}return null}}findRootMostValueAndPath(a){return this.findRootMostMatchingPathAndValue(a,()=>!0)}subtree(a){if(Pr(a))return this;{const l=Yr(a),p=this.children.get(l);return null!==p?p.subtree(Di(a)):new ms(null)}}set(a,l){if(Pr(a))return new ms(l,this.children);{const p=Yr(a),R=(this.children.get(p)||new ms(null)).set(Di(a),l),V=this.children.insert(p,R);return new ms(this.value,V)}}remove(a){if(Pr(a))return this.children.isEmpty()?new ms(null):new ms(null,this.children);{const l=Yr(a),p=this.children.get(l);if(p){const I=p.remove(Di(a));let R;return R=I.isEmpty()?this.children.remove(l):this.children.insert(l,I),null===this.value&&R.isEmpty()?new ms(null):new ms(this.value,R)}return this}}get(a){if(Pr(a))return this.value;{const l=Yr(a),p=this.children.get(l);return p?p.get(Di(a)):null}}setTree(a,l){if(Pr(a))return l;{const p=Yr(a),R=(this.children.get(p)||new ms(null)).setTree(Di(a),l);let V;return V=R.isEmpty()?this.children.remove(p):this.children.insert(p,R),new ms(this.value,V)}}fold(a){return this.fold_(Rr(),a)}fold_(a,l){const p={};return this.children.inorderTraversal((I,R)=>{p[I]=R.fold_(ui(a,I),l)}),l(a,this.value,p)}findOnPath(a,l){return this.findOnPath_(a,Rr(),l)}findOnPath_(a,l,p){const I=!!this.value&&p(l,this.value);if(I)return I;if(Pr(a))return null;{const R=Yr(a),V=this.children.get(R);return V?V.findOnPath_(Di(a),ui(l,R),p):null}}foreachOnPath(a,l){return this.foreachOnPath_(a,Rr(),l)}foreachOnPath_(a,l,p){if(Pr(a))return this;{this.value&&p(l,this.value);const I=Yr(a),R=this.children.get(I);return R?R.foreachOnPath_(Di(a),ui(l,I),p):new ms(null)}}foreach(a){this.foreach_(Rr(),a)}foreach_(a,l){this.children.inorderTraversal((p,I)=>{I.foreach_(ui(a,p),l)}),this.value&&l(a,this.value)}foreachChild(a){this.children.inorderTraversal((l,p)=>{p.value&&a(l,p.value)})}}class Wa{constructor(a){this.writeTree_=a}static empty(){return new Wa(new ms(null))}}function Oa(u,a,l){if(Pr(a))return new Wa(new ms(l));{const p=u.writeTree_.findRootMostValueAndPath(a);if(null!=p){const I=p.path;let R=p.value;const V=S(I,a);return R=R.updateChild(V,l),new Wa(u.writeTree_.set(I,R))}{const I=new ms(l),R=u.writeTree_.setTree(a,I);return new Wa(R)}}}function $c(u,a,l){let p=u;return Sr(l,(I,R)=>{p=Oa(p,ui(a,I),R)}),p}function Pl(u,a){if(Pr(a))return Wa.empty();{const l=u.writeTree_.setTree(a,new ms(null));return new Wa(l)}}function mc(u,a){return null!=yc(u,a)}function yc(u,a){const l=u.writeTree_.findRootMostValueAndPath(a);return null!=l?u.writeTree_.get(l.path).getChild(S(l.path,a)):null}function Oh(u){const a=[],l=u.writeTree_.value;return null!=l?l.isLeafNode()||l.forEachChild(xr,(p,I)=>{a.push(new Or(p,I))}):u.writeTree_.children.inorderTraversal((p,I)=>{null!=I.value&&a.push(new Or(p,I.value))}),a}function Ea(u,a){if(Pr(a))return u;{const l=yc(u,a);return new Wa(null!=l?new ms(l):u.writeTree_.subtree(a))}}function su(u){return u.writeTree_.isEmpty()}function Ol(u,a){return cd(Rr(),u.writeTree_,a)}function cd(u,a,l){if(null!=a.value)return l.updateChild(u,a.value);{let p=null;return a.children.inorderTraversal((I,R)=>{".priority"===I?((0,Y.hu)(null!==R.value,"Priority writes must always be leaf nodes"),p=R.value):l=cd(ui(u,I),R,l)}),!l.getChild(u).isEmpty()&&null!==p&&(l=l.updateChild(ui(u,".priority"),p)),l}}function vc(u,a){return Rf(a,u)}function Tu(u,a){if(u.snap)return O(u.path,a);for(const l in u.children)if(u.children.hasOwnProperty(l)&&O(ui(u.path,l),a))return!0;return!1}function Zl(u){return u.visible}function fd(u,a,l){let p=Wa.empty();for(let I=0;I<u.length;++I){const R=u[I];if(a(R)){const V=R.path;let te;if(R.snap)O(l,V)?(te=S(l,V),p=Oa(p,te,R.snap)):O(V,l)&&(te=S(V,l),p=Oa(p,Rr(),R.snap.getChild(te)));else{if(!R.children)throw(0,Y.g5)("WriteRecord should have .snap or .children");if(O(l,V))te=S(l,V),p=$c(p,te,R.children);else if(O(V,l))if(te=S(V,l),Pr(te))p=$c(p,Rr(),R.children);else{const pe=(0,Y.DV)(R.children,Yr(te));if(pe){const Oe=pe.getChild(Di(te));p=Oa(p,Rr(),Oe)}}}}}return p}function Su(u,a,l,p,I){if(p||I){const R=Ea(u.visibleWrites,a);return!I&&su(R)?l:I||null!=l||mc(R,Rr())?Ol(fd(u.allWrites,function(Oe){return(Oe.visible||I)&&(!p||!~p.indexOf(Oe.writeId))&&(O(Oe.path,a)||O(a,Oe.path))},a),l||ni.EMPTY_NODE):null}{const R=yc(u.visibleWrites,a);if(null!=R)return R;{const V=Ea(u.visibleWrites,a);return su(V)?l:null!=l||mc(V,Rr())?Ol(V,l||ni.EMPTY_NODE):null}}}function js(u,a,l,p){return Su(u.writeTree,u.treePath,a,l,p)}function pd(u,a){return function _c(u,a,l){let p=ni.EMPTY_NODE;const I=yc(u.visibleWrites,a);if(I)return I.isLeafNode()||I.forEachChild(xr,(R,V)=>{p=p.updateImmediateChild(R,V)}),p;if(l){const R=Ea(u.visibleWrites,a);return l.forEachChild(xr,(V,te)=>{const pe=Ol(Ea(R,new qr(V)),te);p=p.updateImmediateChild(V,pe)}),Oh(R).forEach(V=>{p=p.updateImmediateChild(V.name,V.node)}),p}return Oh(Ea(u.visibleWrites,a)).forEach(V=>{p=p.updateImmediateChild(V.name,V.node)}),p}(u.writeTree,u.treePath,a)}function Xl(u,a,l,p){return function kh(u,a,l,p,I){(0,Y.hu)(p||I,"Either existingEventSnap or existingServerSnap must exist");const R=ui(a,l);if(mc(u.visibleWrites,R))return null;{const V=Ea(u.visibleWrites,R);return su(V)?I.getChild(l):Ol(V,I.getChild(l))}}(u.writeTree,u.treePath,a,l,p)}function ou(u,a){return function Tp(u,a){return yc(u.visibleWrites,a)}(u.writeTree,ui(u.treePath,a))}function Gd(u,a,l){return function Nh(u,a,l,p){const I=ui(a,l),R=yc(u.visibleWrites,I);return null!=R?R:p.isCompleteForChild(l)?Ol(Ea(u.visibleWrites,I),p.getNode().getImmediateChild(l)):null}(u.writeTree,u.treePath,a,l)}function Au(u,a){return Rf(ui(u.treePath,a),u.writeTree)}function Rf(u,a){return{treePath:u,writeTree:a}}class Fh{constructor(){this.changeMap=new Map}trackChildChange(a){const l=a.type,p=a.childName;(0,Y.hu)("child_added"===l||"child_changed"===l||"child_removed"===l,"Only child changes supported for tracking"),(0,Y.hu)(".priority"!==p,"Only non-priority child changes can be tracked.");const I=this.changeMap.get(p);if(I){const R=I.type;if("child_added"===l&&"child_removed"===R)this.changeMap.set(p,Eo(p,a.snapshotNode,I.snapshotNode));else if("child_removed"===l&&"child_added"===R)this.changeMap.delete(p);else if("child_removed"===l&&"child_changed"===R)this.changeMap.set(p,Xo(p,I.oldSnap));else if("child_changed"===l&&"child_added"===R)this.changeMap.set(p,Pa(p,a.snapshotNode));else{if("child_changed"!==l||"child_changed"!==R)throw(0,Y.g5)("Illegal combination of changes: "+a+" occurred after "+I);this.changeMap.set(p,Eo(p,a.snapshotNode,I.oldSnap))}}else this.changeMap.set(p,a)}getChanges(){return Array.from(this.changeMap.values())}}const Lh=new class Zr{getCompleteChild(a){return null}getChildAfterChild(a,l,p){return null}};class xu{constructor(a,l,p=null){this.writes_=a,this.viewCache_=l,this.optCompleteServerCache_=p}getCompleteChild(a){const l=this.viewCache_.eventCache;if(l.isCompleteForChild(a))return l.getNode().getImmediateChild(a);{const p=null!=this.optCompleteServerCache_?new ql(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Gd(this.writes_,a,p)}}getChildAfterChild(a,l,p){const I=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ll(this.viewCache_),R=function Ia(u,a,l,p,I,R){return function Ec(u,a,l,p,I,R,V){let te;const pe=Ea(u.visibleWrites,a),Oe=yc(pe,Rr());if(null!=Oe)te=Oe;else{if(null==l)return[];te=Ol(pe,l)}if(te=te.withIndex(V),te.isEmpty()||te.isLeafNode())return[];{const Ft=[],qt=V.getCompare(),sn=R?te.getReverseIteratorFrom(p,V):te.getIteratorFrom(p,V);let Rn=sn.getNext();for(;Rn&&Ft.length<I;)0!==qt(Rn,p)&&Ft.push(Rn),Rn=sn.getNext();return Ft}}(u.writeTree,u.treePath,a,l,p,I,R)}(this.writes_,I,l,1,p,a);return 0===R.length?null:R[0]}}function Kd(u,a,l,p,I,R){const V=a.eventCache;if(null!=ou(p,l))return a;{let te,pe;if(Pr(l))if((0,Y.hu)(a.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),a.serverCache.isFiltered()){const Oe=ll(a),qt=pd(p,Oe instanceof ni?Oe:ni.EMPTY_NODE);te=u.filter.updateFullNode(a.eventCache.getNode(),qt,R)}else{const Oe=js(p,ll(a));te=u.filter.updateFullNode(a.eventCache.getNode(),Oe,R)}else{const Oe=Yr(l);if(".priority"===Oe){(0,Y.hu)(1===$t(l),"Can't have a priority with additional path components");const Ft=V.getNode();pe=a.serverCache.getNode();const qt=Xl(p,l,Ft,pe);te=null!=qt?u.filter.updatePriority(Ft,qt):V.getNode()}else{const Ft=Di(l);let qt;if(V.isCompleteForChild(Oe)){pe=a.serverCache.getNode();const sn=Xl(p,l,V.getNode(),pe);qt=null!=sn?V.getNode().getImmediateChild(Oe).updateChild(Ft,sn):V.getNode().getImmediateChild(Oe)}else qt=Gd(p,Oe,a.serverCache);te=null!=qt?u.filter.updateChild(V.getNode(),Oe,qt,Ft,I,R):V.getNode()}}return Ml(a,te,V.isFullyInitialized()||Pr(l),u.filter.filtersNodes())}}function Ql(u,a,l,p,I,R,V,te){const pe=a.serverCache;let Oe;const Ft=V?u.filter:u.filter.getIndexedFilter();if(Pr(l))Oe=Ft.updateFullNode(pe.getNode(),p,null);else if(Ft.filtersNodes()&&!pe.isFiltered()){const Rn=pe.getNode().updateChild(l,p);Oe=Ft.updateFullNode(pe.getNode(),Rn,null)}else{const Rn=Yr(l);if(!pe.isCompleteForPath(l)&&$t(l)>1)return a;const Zn=Di(l),oi=pe.getNode().getImmediateChild(Rn).updateChild(Zn,p);Oe=".priority"===Rn?Ft.updatePriority(pe.getNode(),oi):Ft.updateChild(pe.getNode(),Rn,oi,Zn,Lh,null)}const qt=Ph(a,Oe,pe.isFullyInitialized()||Pr(l),Ft.filtersNodes());return Kd(u,qt,l,I,new xu(I,qt,R),te)}function Ru(u,a,l,p,I,R,V){const te=a.eventCache;let pe,Oe;const Ft=new xu(I,a,R);if(Pr(l))Oe=u.filter.updateFullNode(a.eventCache.getNode(),p,V),pe=Ml(a,Oe,!0,u.filter.filtersNodes());else{const qt=Yr(l);if(".priority"===qt)Oe=u.filter.updatePriority(a.eventCache.getNode(),p),pe=Ml(a,Oe,te.isFullyInitialized(),te.isFiltered());else{const sn=Di(l),Rn=te.getNode().getImmediateChild(qt);let Zn;if(Pr(sn))Zn=p;else{const Mr=Ft.getCompleteChild(qt);Zn=null!=Mr?".priority"===to(sn)&&Mr.getChild(Yo(sn)).isEmpty()?Mr:Mr.updateChild(sn,p):ni.EMPTY_NODE}pe=Rn.equals(Zn)?a:Ml(a,u.filter.updateChild(te.getNode(),qt,Zn,sn,Ft,V),te.isFullyInitialized(),u.filter.filtersNodes())}}return pe}function wc(u,a){return u.eventCache.isCompleteForChild(a)}function qd(u,a,l){return l.foreach((p,I)=>{a=a.updateChild(p,I)}),a}function Cc(u,a,l,p,I,R,V,te){if(a.serverCache.getNode().isEmpty()&&!a.serverCache.isFullyInitialized())return a;let Oe,pe=a;Oe=Pr(l)?p:new ms(null).setTree(l,p);const Ft=a.serverCache.getNode();return Oe.children.inorderTraversal((qt,sn)=>{if(Ft.hasChild(qt)){const Zn=qd(0,a.serverCache.getNode().getImmediateChild(qt),sn);pe=Ql(u,pe,new qr(qt),Zn,I,R,V,te)}}),Oe.children.inorderTraversal((qt,sn)=>{const Rn=!a.serverCache.isCompleteForChild(qt)&&null===sn.value;if(!Ft.hasChild(qt)&&!Rn){const Mr=qd(0,a.serverCache.getNode().getImmediateChild(qt),sn);pe=Ql(u,pe,new qr(qt),Mr,I,R,V,te)}}),pe}class Pf{constructor(a,l){this.query_=a,this.eventRegistrations_=[];const p=this.query_._queryParams,I=new za(p.getIndex()),R=function Vd(u){return u.loadsAllData()?new za(u.getIndex()):u.hasLimit()?new ru(u):new Qo(u)}(p);this.processor_=function au(u){return{filter:u}}(R);const V=l.serverCache,te=l.eventCache,pe=I.updateFullNode(ni.EMPTY_NODE,V.getNode(),null),Oe=R.updateFullNode(ni.EMPTY_NODE,te.getNode(),null),Ft=new ql(pe,V.isFullyInitialized(),I.filtersNodes()),qt=new ql(Oe,te.isFullyInitialized(),R.filtersNodes());this.viewCache_=Mh(qt,Ft),this.eventGenerator_=new xh(this.query_)}get query(){return this.query_}}function ka(u,a){const l=ll(u.viewCache_);return l&&(u.query._queryParams.loadsAllData()||!Pr(a)&&!l.getImmediateChild(Yr(a)).isEmpty())?l.getChild(a):null}function us(u){return 0===u.eventRegistrations_.length}function md(u,a,l){const p=[];if(l){(0,Y.hu)(null==a,"A cancel should cancel all event registrations.");const I=u.query._path;u.eventRegistrations_.forEach(R=>{const V=R.createCancelEvent(l,I);V&&p.push(V)})}if(a){let I=[];for(let R=0;R<u.eventRegistrations_.length;++R){const V=u.eventRegistrations_[R];if(V.matches(a)){if(a.hasAnyCallback()){I=I.concat(u.eventRegistrations_.slice(R+1));break}}else I.push(V)}u.eventRegistrations_=I}else u.eventRegistrations_=[];return p}function kl(u,a,l,p){a.type===io.MERGE&&null!==a.source.queryId&&((0,Y.hu)(ll(u.viewCache_),"We should always have a full cache before handling merges"),(0,Y.hu)(ad(u.viewCache_),"Missing event cache, even though we have a server cache"));const I=u.viewCache_,R=function wa(u,a,l,p,I){const R=new Fh;let V,te;if(l.type===io.OVERWRITE){const Oe=l;Oe.source.fromUser?V=Ru(u,a,Oe.path,Oe.snap,p,I,R):((0,Y.hu)(Oe.source.fromServer,"Unknown source."),te=Oe.source.tagged||a.serverCache.isFiltered()&&!Pr(Oe.path),V=Ql(u,a,Oe.path,Oe.snap,p,I,te,R))}else if(l.type===io.MERGE){const Oe=l;Oe.source.fromUser?V=function lu(u,a,l,p,I,R,V){let te=a;return p.foreach((pe,Oe)=>{const Ft=ui(l,pe);wc(a,Yr(Ft))&&(te=Ru(u,te,Ft,Oe,I,R,V))}),p.foreach((pe,Oe)=>{const Ft=ui(l,pe);wc(a,Yr(Ft))||(te=Ru(u,te,Ft,Oe,I,R,V))}),te}(u,a,Oe.path,Oe.children,p,I,R):((0,Y.hu)(Oe.source.fromServer,"Unknown source."),te=Oe.source.tagged||a.serverCache.isFiltered(),V=Cc(u,a,Oe.path,Oe.children,p,I,te,R))}else if(l.type===io.ACK_USER_WRITE){const Oe=l;V=Oe.revert?function Mf(u,a,l,p,I,R){let V;if(null!=ou(p,l))return a;{const te=new xu(p,a,I),pe=a.eventCache.getNode();let Oe;if(Pr(l)||".priority"===Yr(l)){let Ft;if(a.serverCache.isFullyInitialized())Ft=js(p,ll(a));else{const qt=a.serverCache.getNode();(0,Y.hu)(qt instanceof ni,"serverChildren would be complete if leaf node"),Ft=pd(p,qt)}Oe=u.filter.updateFullNode(pe,Ft,R)}else{const Ft=Yr(l);let qt=Gd(p,Ft,a.serverCache);null==qt&&a.serverCache.isCompleteForChild(Ft)&&(qt=pe.getImmediateChild(Ft)),Oe=null!=qt?u.filter.updateChild(pe,Ft,qt,Di(l),te,R):a.eventCache.getNode().hasChild(Ft)?u.filter.updateChild(pe,Ft,ni.EMPTY_NODE,Di(l),te,R):pe,Oe.isEmpty()&&a.serverCache.isFullyInitialized()&&(V=js(p,ll(a)),V.isLeafNode()&&(Oe=u.filter.updateFullNode(Oe,V,R)))}return V=a.serverCache.isFullyInitialized()||null!=ou(p,Rr()),Ml(a,Oe,V,u.filter.filtersNodes())}}(u,a,Oe.path,p,I,R):function Jo(u,a,l,p,I,R,V){if(null!=ou(I,l))return a;const te=a.serverCache.isFiltered(),pe=a.serverCache;if(null!=p.value){if(Pr(l)&&pe.isFullyInitialized()||pe.isCompleteForPath(l))return Ql(u,a,l,pe.getNode().getChild(l),I,R,te,V);if(Pr(l)){let Oe=new ms(null);return pe.getNode().forEachChild(Bo,(Ft,qt)=>{Oe=Oe.set(new qr(Ft),qt)}),Cc(u,a,l,Oe,I,R,te,V)}return a}{let Oe=new ms(null);return p.foreach((Ft,qt)=>{const sn=ui(l,Ft);pe.isCompleteForPath(sn)&&(Oe=Oe.set(Ft,pe.getNode().getChild(sn)))}),Cc(u,a,l,Oe,I,R,te,V)}}(u,a,Oe.path,Oe.affectedTree,p,I,R)}else{if(l.type!==io.LISTEN_COMPLETE)throw(0,Y.g5)("Unknown operation type: "+l.type);V=function cl(u,a,l,p,I){const R=a.serverCache;return Kd(u,Ph(a,R.getNode(),R.isFullyInitialized()||Pr(l),R.isFiltered()),l,p,Lh,I)}(u,a,l.path,p,R)}const pe=R.getChanges();return function Ic(u,a,l){const p=a.eventCache;if(p.isFullyInitialized()){const I=p.getNode().isLeafNode()||p.getNode().isEmpty(),R=ad(u);(l.length>0||!u.eventCache.isFullyInitialized()||I&&!p.getNode().equals(R)||!p.getNode().getPriority().equals(R.getPriority()))&&l.push(Uo(ad(a)))}}(a,V,pe),{viewCache:V,changes:pe}}(u.processor_,I,a,l,p);return function Wd(u,a){(0,Y.hu)(a.eventCache.getNode().isIndexed(u.filter.getIndex()),"Event snap not indexed"),(0,Y.hu)(a.serverCache.getNode().isIndexed(u.filter.getIndex()),"Server snap not indexed")}(u.processor_,R.viewCache),(0,Y.hu)(R.viewCache.serverCache.isFullyInitialized()||!I.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),u.viewCache_=R.viewCache,uu(u,R.changes,R.viewCache.eventCache.getNode(),null)}function uu(u,a,l,p){return function Hd(u,a,l,p){const I=[],R=[];return a.forEach(V=>{"child_changed"===V.type&&u.index_.indexedValueChanged(V.oldSnap,V.snapshotNode)&&R.push(function nu(u,a){return{type:"child_moved",snapshotNode:a,childName:u}}(V.childName,V.snapshotNode))}),Du(u,I,"child_removed",a,p,l),Du(u,I,"child_added",a,p,l),Du(u,I,"child_moved",R,p,l),Du(u,I,"child_changed",a,p,l),Du(u,I,"value",a,p,l),I}(u.eventGenerator_,a,l,p?[p]:u.eventRegistrations_)}let Bc,rn;class Nl{constructor(){this.views=new Map}}function vd(u,a,l,p){const I=a.source.queryId;if(null!==I){const R=u.views.get(I);return(0,Y.hu)(null!=R,"SyncTree gave us an op for an invalid query."),kl(R,a,l,p)}{let R=[];for(const V of u.views.values())R=R.concat(kl(V,a,l,p));return R}}function kf(u,a,l,p,I){const V=u.views.get(a._queryIdentifier);if(!V){let te=js(l,I?p:null),pe=!1;te?pe=!0:p instanceof ni?(te=pd(l,p),pe=!1):(te=ni.EMPTY_NODE,pe=!1);const Oe=Mh(new ql(te,pe,!1),new ql(p,I,!1));return new Pf(a,Oe)}return V}function y(u){const a=[];for(const l of u.views.values())l.query._queryParams.loadsAllData()||a.push(l);return a}function A(u,a){let l=null;for(const p of u.views.values())l=l||ka(p,a);return l}function K(u,a){return a._queryParams.loadsAllData()?bt(u):u.views.get(a._queryIdentifier)}function oe(u,a){return null!=K(u,a)}function st(u){return null!=bt(u)}function bt(u){for(const a of u.views.values())if(a.query._queryParams.loadsAllData())return a;return null}let ar=1;class Ki{constructor(a){this.listenProvider_=a,this.syncPointTree_=new ms(null),this.pendingWriteTree_=function Sp(){return{visibleWrites:Wa.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Ca(u,a,l,p,I){return function ud(u,a,l,p,I){(0,Y.hu)(p>u.lastWriteId,"Stacking an older write on top of newer ones"),void 0===I&&(I=!0),u.allWrites.push({path:a,snap:l,writeId:p,visible:I}),I&&(u.visibleWrites=Oa(u.visibleWrites,a,l)),u.lastWriteId=p}(u.pendingWriteTree_,a,l,p,I),I?ku(u,new _a({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},a,l)):[]}function ec(u,a,l=!1){const p=function Yl(u,a){for(let l=0;l<u.allWrites.length;l++){const p=u.allWrites[l];if(p.writeId===a)return p}return null}(u.pendingWriteTree_,a);if(function wo(u,a){const l=u.allWrites.findIndex(te=>te.writeId===a);(0,Y.hu)(l>=0,"removeWrite called with nonexistent writeId.");const p=u.allWrites[l];u.allWrites.splice(l,1);let I=p.visible,R=!1,V=u.allWrites.length-1;for(;I&&V>=0;){const te=u.allWrites[V];te.visible&&(V>=l&&Tu(te,p.path)?I=!1:O(p.path,te.path)&&(R=!0)),V--}return!!I&&(R?(function hd(u){u.visibleWrites=fd(u.allWrites,Zl,Rr()),u.lastWriteId=u.allWrites.length>0?u.allWrites[u.allWrites.length-1].writeId:-1}(u),!0):(p.snap?u.visibleWrites=Pl(u.visibleWrites,p.path):Sr(p.children,pe=>{u.visibleWrites=Pl(u.visibleWrites,ui(p.path,pe))}),!0))}(u.pendingWriteTree_,a)){let R=new ms(null);return null!=p.snap?R=R.set(Rr(),!0):Sr(p.children,V=>{R=R.set(new qr(V),!0)}),ku(u,new Si(p.path,R,l))}return[]}function is(u,a,l){return ku(u,new _a({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},a,l))}function tc(u,a,l,p,I=!1){const R=a._path,V=u.syncPointTree_.get(R);let te=[];if(V&&("default"===a._queryIdentifier||oe(V,a))){const pe=function g(u,a,l,p){const I=a._queryIdentifier,R=[];let V=[];const te=st(u);if("default"===I)for(const[pe,Oe]of u.views.entries())V=V.concat(md(Oe,l,p)),us(Oe)&&(u.views.delete(pe),Oe.query._queryParams.loadsAllData()||R.push(Oe.query));else{const pe=u.views.get(I);pe&&(V=V.concat(md(pe,l,p)),us(pe)&&(u.views.delete(I),pe.query._queryParams.loadsAllData()||R.push(pe.query)))}return te&&!st(u)&&R.push(new(function Jl(){return(0,Y.hu)(Bc,"Reference.ts has not been loaded"),Bc}())(a._repo,a._path)),{removed:R,events:V}}(V,a,l,p);(function $h(u){return 0===u.views.size})(V)&&(u.syncPointTree_=u.syncPointTree_.remove(R));const Oe=pe.removed;if(te=pe.events,!I){const Ft=-1!==Oe.findIndex(sn=>sn._queryParams.loadsAllData()),qt=u.syncPointTree_.findOnPath(R,(sn,Rn)=>st(Rn));if(Ft&&!qt){const sn=u.syncPointTree_.subtree(R);if(!sn.isEmpty()){const Rn=function bg(u){return u.fold((a,l,p)=>{if(l&&st(l))return[bt(l)];{let I=[];return l&&(I=y(l)),Sr(p,(R,V)=>{I=I.concat(V)}),I}})}(sn);for(let Zn=0;Zn<Rn.length;++Zn){const Mr=Rn[Zn],oi=Mr.query,Mi=Nf(u,Mr);u.listenProvider_.startListening(Ts(oi),Jd(u,oi),Mi.hashFn,Mi.onComplete)}}}!qt&&Oe.length>0&&!p&&(Ft?u.listenProvider_.stopListening(Ts(a),null):Oe.forEach(sn=>{const Rn=u.queryToTagMap.get(Bh(sn));u.listenProvider_.stopListening(Ts(sn),Rn)}))}!function Vh(u,a){for(let l=0;l<a.length;++l){const p=a[l];if(!p._queryParams.loadsAllData()){const I=Bh(p),R=u.queryToTagMap.get(I);u.queryToTagMap.delete(I),u.tagToQueryMap.delete(R)}}}(u,Oe)}return te}function Ou(u,a,l,p){const I=eh(u,p);if(null!=I){const R=Nu(I),V=R.path,te=R.queryId,pe=S(V,a);return Uh(u,V,new _a(hi(te),pe,l))}return[]}function _d(u,a,l,p=!1){const I=a._path;let R=null,V=!1;u.syncPointTree_.foreachOnPath(I,(sn,Rn)=>{const Zn=S(sn,I);R=R||A(Rn,Zn),V=V||st(Rn)});let pe,te=u.syncPointTree_.get(I);te?(V=V||st(te),R=R||A(te,Rr())):(te=new Nl,u.syncPointTree_=u.syncPointTree_.set(I,te)),null!=R?pe=!0:(pe=!1,R=ni.EMPTY_NODE,u.syncPointTree_.subtree(I).foreachChild((Rn,Zn)=>{const Mr=A(Zn,Rr());Mr&&(R=R.updateImmediateChild(Rn,Mr))}));const Oe=oe(te,a);if(!Oe&&!a._queryParams.loadsAllData()){const sn=Bh(a);(0,Y.hu)(!u.queryToTagMap.has(sn),"View does not exist, but we have a tag");const Rn=function Zm(){return ar++}();u.queryToTagMap.set(sn,Rn),u.tagToQueryMap.set(Rn,sn)}let qt=function C(u,a,l,p,I,R){const V=kf(u,a,p,I,R);return u.views.has(a._queryIdentifier)||u.views.set(a._queryIdentifier,V),function cu(u,a){u.eventRegistrations_.push(a)}(V,l),function yd(u,a){const l=u.viewCache_.eventCache,p=[];return l.getNode().isLeafNode()||l.getNode().forEachChild(xr,(R,V)=>{p.push(Pa(R,V))}),l.isFullyInitialized()&&p.push(Uo(l.getNode())),uu(u,p,l.getNode(),a)}(V,l)}(te,a,l,vc(u.pendingWriteTree_,I),R,pe);if(!Oe&&!V&&!p){const sn=K(te,a);qt=qt.concat(function Id(u,a,l){const p=a._path,I=Jd(u,a),R=Nf(u,l),V=u.listenProvider_.startListening(Ts(a),I,R.hashFn,R.onComplete),te=u.syncPointTree_.subtree(p);if(I)(0,Y.hu)(!st(te.value),"If we're adding a query, it shouldn't be shadowed");else{const pe=te.fold((Oe,Ft,qt)=>{if(!Pr(Oe)&&Ft&&st(Ft))return[bt(Ft).query];{let sn=[];return Ft&&(sn=sn.concat(y(Ft).map(Rn=>Rn.query))),Sr(qt,(Rn,Zn)=>{sn=sn.concat(Zn)}),sn}});for(let Oe=0;Oe<pe.length;++Oe){const Ft=pe[Oe];u.listenProvider_.stopListening(Ts(Ft),Jd(u,Ft))}}return V}(u,a,sn))}return qt}function Ed(u,a,l){const I=u.pendingWriteTree_,R=u.syncPointTree_.findOnPath(a,(V,te)=>{const Oe=A(te,S(V,a));if(Oe)return Oe});return Su(I,a,R,l,!0)}function ku(u,a){return Cg(a,u.syncPointTree_,null,vc(u.pendingWriteTree_,Rr()))}function Cg(u,a,l,p){if(Pr(u.path))return Qd(u,a,l,p);{const I=a.get(Rr());null==l&&null!=I&&(l=A(I,Rr()));let R=[];const V=Yr(u.path),te=u.operationForChild(V),pe=a.children.get(V);if(pe&&te){const Oe=l?l.getImmediateChild(V):null,Ft=Au(p,V);R=R.concat(Cg(te,pe,Oe,Ft))}return I&&(R=R.concat(vd(I,u,p,l))),R}}function Qd(u,a,l,p){const I=a.get(Rr());null==l&&null!=I&&(l=A(I,Rr()));let R=[];return a.children.inorderTraversal((V,te)=>{const pe=l?l.getImmediateChild(V):null,Oe=Au(p,V),Ft=u.operationForChild(V);Ft&&(R=R.concat(Qd(Ft,te,pe,Oe)))}),I&&(R=R.concat(vd(I,u,p,l))),R}function Nf(u,a){const l=a.query,p=Jd(u,l);return{hashFn:()=>(function gd(u){return u.viewCache_.serverCache.getNode()}(a)||ni.EMPTY_NODE).hash(),onComplete:I=>{if("ok"===I)return p?function Uc(u,a,l){const p=eh(u,l);if(p){const I=Nu(p),R=I.path,V=I.queryId,te=S(R,a);return Uh(u,R,new al(hi(V),te))}return[]}(u,l._path,p):function Pu(u,a){return ku(u,new al({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},a))}(u,l._path);{const R=function Q(u,a){let l="Unknown Error";"too_big"===u?l="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===u?l="Client doesn't have permission to access the desired data.":"unavailable"===u&&(l="The service is unavailable");const p=new Error(u+" at "+a._path.toString()+": "+l);return p.code=u.toUpperCase(),p}(I,l);return tc(u,l,null,R)}}}}function Jd(u,a){const l=Bh(a);return u.queryToTagMap.get(l)}function Bh(u){return u._path.toString()+"$"+u._queryIdentifier}function eh(u,a){return u.tagToQueryMap.get(a)}function Nu(u){const a=u.indexOf("$");return(0,Y.hu)(-1!==a&&a<u.length-1,"Bad queryKey."),{queryId:u.substr(a+1),path:new qr(u.substr(0,a))}}function Uh(u,a,l){const p=u.syncPointTree_.get(a);return(0,Y.hu)(p,"Missing sync point for query tag that we're tracking"),vd(p,l,vc(u.pendingWriteTree_,a),null)}function Ts(u){return u._queryParams.loadsAllData()&&!u._queryParams.isDefault()?new(function or(){return(0,Y.hu)(rn,"Reference.ts has not been loaded"),rn}())(u._repo,u._path):u}class nc{constructor(a){this.node_=a}getImmediateChild(a){const l=this.node_.getImmediateChild(a);return new nc(l)}node(){return this.node_}}class wd{constructor(a,l){this.syncTree_=a,this.path_=l}getImmediateChild(a){const l=ui(this.path_,a);return new wd(this.syncTree_,l)}node(){return Ed(this.syncTree_,this.path_)}}const Ap=function(u){return(u=u||{}).timestamp=u.timestamp||(new Date).getTime(),u},Cd=function(u,a,l){return u&&"object"==typeof u?((0,Y.hu)(".sv"in u,"Unexpected leaf node or priority contents"),"string"==typeof u[".sv"]?Fu(u[".sv"],a,l):"object"==typeof u[".sv"]?Dg(u[".sv"],a):void(0,Y.hu)(!1,"Unexpected server value: "+JSON.stringify(u,null,2))):u},Fu=function(u,a,l){if("timestamp"===u)return l.timestamp;(0,Y.hu)(!1,"Unexpected server value: "+u)},Dg=function(u,a,l){u.hasOwnProperty("increment")||(0,Y.hu)(!1,"Unexpected server value: "+JSON.stringify(u,null,2));const p=u.increment;"number"!=typeof p&&(0,Y.hu)(!1,"Unexpected increment value: "+p);const I=a.node();if((0,Y.hu)(null!==I&&typeof I<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!I.isLeafNode())return p;const V=I.getValue();return"number"!=typeof V?p:V+p},jh=function(u,a,l,p){return xp(a,new wd(l,u),p)},th=function(u,a,l){return xp(u,new nc(a),l)};function xp(u,a,l){const p=u.getPriority().val(),I=Cd(p,a.getImmediateChild(".priority"),l);let R;if(u.isLeafNode()){const V=u,te=Cd(V.getValue(),a,l);return te!==V.getValue()||I!==V.getPriority().val()?new Fc(te,Hr(I)):u}{const V=u;return R=V,I!==V.getPriority().val()&&(R=R.updatePriority(new Fc(I))),V.forEachChild(xr,(te,pe)=>{const Oe=xp(pe,a.getImmediateChild(te),l);Oe!==pe&&(R=R.updateImmediateChild(te,Oe))}),R}}class du{constructor(a="",l=null,p={children:{},childCount:0}){this.name=a,this.parent=l,this.node=p}}function hu(u,a){let l=a instanceof qr?a:new qr(a),p=u,I=Yr(l);for(;null!==I;){const R=(0,Y.DV)(p.node.children,I)||{children:{},childCount:0};p=new du(I,p,R),l=Di(l),I=Yr(l)}return p}function Fl(u){return u.node.value}function Hh(u,a){u.node.value=a,Rp(u)}function nh(u){return u.node.childCount>0}function Ff(u,a){Sr(u.node.children,(l,p)=>{a(new du(l,u,p))})}function Lf(u,a,l,p){l&&!p&&a(u),Ff(u,I=>{Lf(I,a,!0,p)}),l&&p&&a(u)}function zh(u){return new qr(null===u.parent?u.name:zh(u.parent)+"/"+u.name)}function Rp(u){null!==u.parent&&function Lu(u,a,l){const p=function Tg(u){return void 0===Fl(u)&&!nh(u)}(l),I=(0,Y.r3)(u.node.children,a);p&&I?(delete u.node.children[a],u.node.childCount--,Rp(u)):!p&&!I&&(u.node.children[a]=l.node,u.node.childCount++,Rp(u))}(u.parent,u.name,u)}const $u=/[\[\].#$\/\u0000-\u001F\u007F]/,Sg=/[\[\].#$\u0000-\u001F\u007F]/,$f=10485760,Gh=function(u){return"string"==typeof u&&0!==u.length&&!$u.test(u)},bc=function(u){return"string"==typeof u&&0!==u.length&&!Sg.test(u)},Wh=function(u){return null===u||"string"==typeof u||"number"==typeof u&&!cs(u)||u&&"object"==typeof u&&(0,Y.r3)(u,".sv")},Ka=function(u,a,l,p){p&&void 0===a||Bu((0,Y.gK)(u,"value"),a,l)},Bu=function(u,a,l){const p=l instanceof qr?new z(l,u):l;if(void 0===a)throw new Error(u+"contains undefined "+Ut(p));if("function"==typeof a)throw new Error(u+"contains a function "+Ut(p)+" with contents = "+a.toString());if(cs(a))throw new Error(u+"contains "+a.toString()+" "+Ut(p));if("string"==typeof a&&a.length>$f/3&&(0,Y.ug)(a)>$f)throw new Error(u+"contains a string greater than "+$f+" utf8 bytes "+Ut(p)+" ('"+a.substring(0,50)+"...')");if(a&&"object"==typeof a){let I=!1,R=!1;if(Sr(a,(V,te)=>{if(".value"===V)I=!0;else if(".priority"!==V&&".sv"!==V&&(R=!0,!Gh(V)))throw new Error(u+" contains an invalid key ("+V+") "+Ut(p)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function re(u,a){u.parts_.length>0&&(u.byteLength_+=1),u.parts_.push(a),u.byteLength_+=(0,Y.ug)(a),lt(u)})(p,V),Bu(u,te,p),function le(u){const a=u.parts_.pop();u.byteLength_-=(0,Y.ug)(a),u.parts_.length>0&&(u.byteLength_-=1)}(p)}),I&&R)throw new Error(u+' contains ".value" child '+Ut(p)+" in addition to actual children.")}},ic=function(u,a,l,p){if(p&&void 0===a)return;const I=(0,Y.gK)(u,"values");if(!a||"object"!=typeof a||Array.isArray(a))throw new Error(I+" must be an object containing the children to replace.");const R=[];Sr(a,(V,te)=>{const pe=new qr(V);if(Bu(I,te,ui(l,pe)),".priority"===to(pe)&&!Wh(te))throw new Error(I+"contains an invalid value for '"+pe.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");R.push(pe)}),function(u,a){let l,p;for(l=0;l<a.length;l++){p=a[l];const R=ca(p);for(let V=0;V<R.length;V++)if((".priority"!==R[V]||V!==R.length-1)&&!Gh(R[V]))throw new Error(u+"contains an invalid key ("+R[V]+") in path "+p.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}a.sort(x);let I=null;for(l=0;l<a.length;l++){if(p=a[l],null!==I&&O(I,p))throw new Error(u+"contains a path "+I.toString()+" that is ancestor of another path "+p.toString());I=p}}(I,R)},fu=function(u,a,l){if(!l||void 0!==a){if(cs(a))throw new Error((0,Y.gK)(u,"priority")+"is "+a.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Wh(a))throw new Error((0,Y.gK)(u,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Vc=function(u,a,l,p){if(!(p&&void 0===l||Gh(l)))throw new Error((0,Y.gK)(u,a)+'was an invalid key = "'+l+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ih=function(u,a,l,p){if(!(p&&void 0===l||bc(l)))throw new Error((0,Y.gK)(u,a)+'was an invalid path = "'+l+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Mp=function(u,a,l,p){l&&(l=l.replace(/^\/*\.info(\/|$)/,"/")),ih(u,a,l,p)},dl=function(u,a){if(".info"===Yr(a))throw new Error(u+" failed = Can't modify data under /.info/")},Bf=function(u,a){const l=a.path.toString();if("string"!=typeof a.repoInfo.host||0===a.repoInfo.host.length||!Gh(a.repoInfo.namespace)&&"localhost"!==a.repoInfo.host.split(":")[0]||0!==l.length&&!function(u){return u&&(u=u.replace(/^\/*\.info(\/|$)/,"/")),bc(u)}(l))throw new Error((0,Y.gK)(u,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Pp{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function sh(u,a){let l=null;for(let p=0;p<a.length;p++){const I=a[p],R=I.getPath();null!==l&&!w(R,l.path)&&(u.eventLists_.push(l),l=null),null===l&&(l={events:[],path:R}),l.events.push(I)}l&&u.eventLists_.push(l)}function Kh(u,a,l){sh(u,l),bd(u,p=>w(p,a))}function hl(u,a,l){sh(u,l),bd(u,p=>O(p,a)||O(a,p))}function bd(u,a){u.recursionDepth_++;let l=!0;for(let p=0;p<u.eventLists_.length;p++){const I=u.eventLists_[p];I&&(a(I.path)?(pu(u.eventLists_[p]),u.eventLists_[p]=null):l=!1)}l&&(u.eventLists_=[]),u.recursionDepth_--}function pu(u){for(let a=0;a<u.events.length;a++){const l=u.events[a];if(null!==l){u.events[a]=null;const p=l.getEventRunner();Fo&&ls("event: "+l.toString()),Jt(p)}}}const Uu="repo_interrupt",Qm=25;class Ag{constructor(a,l,p,I){this.repoInfo_=a,this.forceRestClient_=l,this.authTokenProvider_=p,this.appCheckProvider_=I,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Pp,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Nr(),this.transactionQueueTree_=new du,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function xg(u){const l=u.infoData_.getNode(new qr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+l}function qh(u){return Ap({timestamp:xg(u)})}function oh(u,a,l,p,I){u.dataUpdateCount++;const R=new qr(a);l=u.interceptServerDataCallback_?u.interceptServerDataCallback_(a,l):l;let V=[];if(I)if(p){const pe=(0,Y.UI)(l,Oe=>Hr(Oe));V=function Zd(u,a,l,p){const I=eh(u,p);if(I){const R=Nu(I),V=R.path,te=R.queryId,pe=S(V,a),Oe=ms.fromObject(l);return Uh(u,V,new Kl(hi(te),pe,Oe))}return[]}(u.serverSyncTree_,R,pe,I)}else{const pe=Hr(l);V=Ou(u.serverSyncTree_,R,pe,I)}else if(p){const pe=(0,Y.UI)(l,Oe=>Hr(Oe));V=function Yd(u,a,l){const p=ms.fromObject(l);return ku(u,new Kl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},a,p))}(u.serverSyncTree_,R,pe)}else{const pe=Hr(l);V=is(u.serverSyncTree_,R,pe)}let te=R;V.length>0&&(te=Td(u,R)),hl(u.eventQueue_,te,V)}function Ll(u,a){Uf(u,"connected",a),!1===a&&function Mg(u){Dd(u,"onDisconnectEvents");const a=qh(u),l=Nr();Rl(u.onDisconnect_,Rr(),(I,R)=>{const V=jh(I,R,u.serverSyncTree_,a);Po(l,I,V)});let p=[];Rl(l,Rr(),(I,R)=>{p=p.concat(is(u.serverSyncTree_,I,R));const V=Dc(u,I);Td(u,V)}),u.onDisconnect_=Nr(),hl(u.eventQueue_,Rr(),p)}(u)}function Uf(u,a,l){const p=new qr("/.info/"+a),I=Hr(l);u.infoData_.updateSnapshot(p,I);const R=is(u.infoSyncTree_,p,I);hl(u.eventQueue_,p,R)}function Vf(u){return u.nextWriteId_++}function Rg(u,a,l,p,I){Dd(u,"set",{path:a.toString(),value:l,priority:p});const R=qh(u),V=Hr(l,p),te=Ed(u.serverSyncTree_,a),pe=th(V,te,R),Oe=Vf(u),Ft=Ca(u.serverSyncTree_,a,pe,Oe,!0);sh(u.eventQueue_,Ft),u.server_.put(a.toString(),V.val(!0),(sn,Rn)=>{const Zn="ok"===sn;Zn||fs("set at "+a+" failed: "+sn);const Mr=ec(u.serverSyncTree_,Oe,!Zn);hl(u.eventQueue_,a,Mr),gu(0,I,sn,Rn)});const qt=Dc(u,a);Td(u,qt),hl(u.eventQueue_,qt,[])}function Op(u,a,l){u.server_.onDisconnectCancel(a.toString(),(p,I)=>{"ok"===p&&ws(u.onDisconnect_,a),gu(0,l,p,I)})}function Yh(u,a,l,p){const I=Hr(l);u.server_.onDisconnectPut(a.toString(),I.val(!0),(R,V)=>{"ok"===R&&Po(u.onDisconnect_,a,I),gu(0,p,R,V)})}function Fp(u,a,l){let p;p=".info"===Yr(a._path)?tc(u.infoSyncTree_,a,l):tc(u.serverSyncTree_,a,l),Kh(u.eventQueue_,a._path,p)}function fl(u){u.persistentConnection_&&u.persistentConnection_.interrupt(Uu)}function Dd(u,...a){let l="";u.persistentConnection_&&(l=u.persistentConnection_.id+":"),ls(l,...a)}function gu(u,a,l,p){a&&Jt(()=>{if("ok"===l)a(null);else{const I=(l||"error").toUpperCase();let R=I;p&&(R+=": "+p);const V=new Error(R);V.code=I,a(V)}})}function ah(u,a,l){return Ed(u.serverSyncTree_,a,l)||ni.EMPTY_NODE}function Vu(u,a=u.transactionQueueTree_){if(a||ch(u,a),Fl(a)){const l=Xr(u,a);(0,Y.hu)(l.length>0,"Sending zero length transaction queue"),l.every(I=>0===I.status)&&function Lp(u,a,l){const p=l.map(Oe=>Oe.currentWriteId),I=ah(u,a,p);let R=I;const V=I.hash();for(let Oe=0;Oe<l.length;Oe++){const Ft=l[Oe];(0,Y.hu)(0===Ft.status,"tryToSendTransactionQueue_: items in queue should all be run."),Ft.status=1,Ft.retryCount++;const qt=S(a,Ft.path);R=R.updateChild(qt,Ft.currentOutputSnapshotRaw)}const te=R.val(!0),pe=a;u.server_.put(pe.toString(),te,Oe=>{Dd(u,"transaction put response",{path:pe.toString(),status:Oe});let Ft=[];if("ok"===Oe){const qt=[];for(let sn=0;sn<l.length;sn++)l[sn].status=2,Ft=Ft.concat(ec(u.serverSyncTree_,l[sn].currentWriteId)),l[sn].onComplete&&qt.push(()=>l[sn].onComplete(null,!0,l[sn].currentOutputSnapshotResolved)),l[sn].unwatcher();ch(u,hu(u.transactionQueueTree_,a)),Vu(u,u.transactionQueueTree_),hl(u.eventQueue_,a,Ft);for(let sn=0;sn<qt.length;sn++)Jt(qt[sn])}else{if("datastale"===Oe)for(let qt=0;qt<l.length;qt++)l[qt].status=3===l[qt].status?4:0;else{fs("transaction at "+pe.toString()+" failed: "+Oe);for(let qt=0;qt<l.length;qt++)l[qt].status=4,l[qt].abortReason=Oe}Td(u,a)}},V)}(u,zh(a),l)}else nh(a)&&Ff(a,l=>{Vu(u,l)})}function Td(u,a){const l=$p(u,a),p=zh(l);return function Fa(u,a,l){if(0===a.length)return;const p=[];let I=[];const V=a.filter(te=>0===te.status).map(te=>te.currentWriteId);for(let te=0;te<a.length;te++){const pe=a[te],Oe=S(l,pe.path);let qt,Ft=!1;if((0,Y.hu)(null!==Oe,"rerunTransactionsUnderNode_: relativePath should not be null."),4===pe.status)Ft=!0,qt=pe.abortReason,I=I.concat(ec(u.serverSyncTree_,pe.currentWriteId,!0));else if(0===pe.status)if(pe.retryCount>=Qm)Ft=!0,qt="maxretry",I=I.concat(ec(u.serverSyncTree_,pe.currentWriteId,!0));else{const sn=ah(u,pe.path,V);pe.currentInputSnapshot=sn;const Rn=a[te].update(sn.val());if(void 0!==Rn){Bu("transaction failed: Data returned ",Rn,pe.path);let Zn=Hr(Rn);"object"==typeof Rn&&null!=Rn&&(0,Y.r3)(Rn,".priority")||(Zn=Zn.updatePriority(sn.getPriority()));const oi=pe.currentWriteId,Mi=qh(u),Ms=th(Zn,sn,Mi);pe.currentOutputSnapshotRaw=Zn,pe.currentOutputSnapshotResolved=Ms,pe.currentWriteId=Vf(u),V.splice(V.indexOf(oi),1),I=I.concat(Ca(u.serverSyncTree_,pe.path,Ms,pe.currentWriteId,pe.applyLocally)),I=I.concat(ec(u.serverSyncTree_,oi,!0))}else Ft=!0,qt="nodata",I=I.concat(ec(u.serverSyncTree_,pe.currentWriteId,!0))}hl(u.eventQueue_,l,I),I=[],Ft&&(a[te].status=2,setTimeout(a[te].unwatcher,Math.floor(0)),a[te].onComplete&&p.push("nodata"===qt?()=>a[te].onComplete(null,!1,a[te].currentInputSnapshot):()=>a[te].onComplete(new Error(qt),!1,null)))}ch(u,u.transactionQueueTree_);for(let te=0;te<p.length;te++)Jt(p[te]);Vu(u,u.transactionQueueTree_)}(u,Xr(u,l),p),p}function $p(u,a){let l,p=u.transactionQueueTree_;for(l=Yr(a);null!==l&&void 0===Fl(p);)p=hu(p,l),l=Yr(a=Di(a));return p}function Xr(u,a){const l=[];return lh(u,a,l),l.sort((p,I)=>p.order-I.order),l}function lh(u,a,l){const p=Fl(a);if(p)for(let I=0;I<p.length;I++)l.push(p[I]);Ff(a,I=>{lh(u,I,l)})}function ch(u,a){const l=Fl(a);if(l){let p=0;for(let I=0;I<l.length;I++)2!==l[I].status&&(l[p]=l[I],p++);l.length=p,Hh(a,l.length>0?l:void 0)}Ff(a,p=>{ch(u,p)})}function Dc(u,a){const l=zh($p(u,a)),p=hu(u.transactionQueueTree_,a);return function rh(u,a,l){let p=l?u:u.parent;for(;null!==p;){if(a(p))return!0;p=p.parent}}(p,I=>{ju(u,I)}),ju(u,p),Lf(p,I=>{ju(u,I)}),l}function ju(u,a){const l=Fl(a);if(l){const p=[];let I=[],R=-1;for(let V=0;V<l.length;V++)3===l[V].status||(1===l[V].status?((0,Y.hu)(R===V-1,"All SENT items should be at beginning of queue."),R=V,l[V].status=3,l[V].abortReason="set"):((0,Y.hu)(0===l[V].status,"Unexpected transaction status in abort"),l[V].unwatcher(),I=I.concat(ec(u.serverSyncTree_,l[V].currentWriteId,!0)),l[V].onComplete&&p.push(l[V].onComplete.bind(null,new Error("set"),!1,null))));-1===R?Hh(a,void 0):l.length=R+1,hl(u.eventQueue_,zh(a),I);for(let V=0;V<p.length;V++)Jt(p[V])}}const Bp=function(u,a){const l=Sd(u),p=l.namespace;return"firebase.com"===l.domain&&Zs(l.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!p||"undefined"===p)&&"localhost"!==l.domain&&Zs("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),l.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&fs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new El(l.host,l.secure,p,"ws"===l.scheme||"wss"===l.scheme,a,"",p!==l.subdomain),path:new qr(l.pathString)}},Sd=function(u){let a="",l="",p="",I="",R="",V=!0,te="https",pe=443;if("string"==typeof u){let Oe=u.indexOf("//");Oe>=0&&(te=u.substring(0,Oe-1),u=u.substring(Oe+2));let Ft=u.indexOf("/");-1===Ft&&(Ft=u.length);let qt=u.indexOf("?");-1===qt&&(qt=u.length),a=u.substring(0,Math.min(Ft,qt)),Ft<qt&&(I=function Pg(u){let a="";const l=u.split("/");for(let p=0;p<l.length;p++)if(l[p].length>0){let I=l[p];try{I=decodeURIComponent(I.replace(/\+/g," "))}catch{}a+="/"+I}return a}(u.substring(Ft,qt)));const sn=function Hu(u){const a={};"?"===u.charAt(0)&&(u=u.substring(1));for(const l of u.split("&")){if(0===l.length)continue;const p=l.split("=");2===p.length?a[decodeURIComponent(p[0])]=decodeURIComponent(p[1]):fs(`Invalid query segment '${l}' in query '${u}'`)}return a}(u.substring(Math.min(u.length,qt)));Oe=a.indexOf(":"),Oe>=0?(V="https"===te||"wss"===te,pe=parseInt(a.substring(Oe+1),10)):Oe=a.length;const Rn=a.slice(0,Oe);if("localhost"===Rn.toLowerCase())l="localhost";else if(Rn.split(".").length<=2)l=Rn;else{const Zn=a.indexOf(".");p=a.substring(0,Zn).toLowerCase(),l=a.substring(Zn+1),R=p}"ns"in sn&&(R=sn.ns)}return{host:a,port:pe,domain:l,subdomain:p,secure:V,scheme:te,pathString:I,namespace:R}},Up="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",zu=function(){let u=0;const a=[];return function(l){const p=l===u;let I;u=l;const R=new Array(8);for(I=7;I>=0;I--)R[I]=Up.charAt(l%64),l=Math.floor(l/64);(0,Y.hu)(0===l,"Cannot push at time == 0");let V=R.join("");if(p){for(I=11;I>=0&&63===a[I];I--)a[I]=0;a[I]++}else for(I=0;I<12;I++)a[I]=Math.floor(64*Math.random());for(I=0;I<12;I++)V+=Up.charAt(a[I]);return(0,Y.hu)(20===V.length,"nextPushId: Length should be 20."),V}}();class Og{constructor(a,l,p,I){this.eventType=a,this.eventRegistration=l,this.snapshot=p,this.prevName=I}getPath(){const a=this.snapshot.ref;return"value"===this.eventType?a._path:a.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,Y.Wl)(this.snapshot.exportVal())}}class Vp{constructor(a,l,p){this.eventRegistration=a,this.error=l,this.path=p}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Xh{constructor(a,l){this.snapshotCallback=a,this.cancelCallback=l}onValue(a,l){this.snapshotCallback.call(null,a,l)}onCancel(a){return(0,Y.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,a)}get hasCancelCallback(){return!!this.cancelCallback}matches(a){return this.snapshotCallback===a.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===a.snapshotCallback.userCallback&&this.snapshotCallback.context===a.snapshotCallback.context}}class Gu{constructor(a,l){this._repo=a,this._path=l}cancel(){const a=new Y.BH;return Op(this._repo,this._path,a.wrapCallback(()=>{})),a.promise}remove(){dl("OnDisconnect.remove",this._path);const a=new Y.BH;return Yh(this._repo,this._path,null,a.wrapCallback(()=>{})),a.promise}set(a){dl("OnDisconnect.set",this._path),Ka("OnDisconnect.set",a,this._path,!1);const l=new Y.BH;return Yh(this._repo,this._path,a,l.wrapCallback(()=>{})),l.promise}setWithPriority(a,l){dl("OnDisconnect.setWithPriority",this._path),Ka("OnDisconnect.setWithPriority",a,this._path,!1),fu("OnDisconnect.setWithPriority",l,!1);const p=new Y.BH;return function kp(u,a,l,p,I){const R=Hr(l,p);u.server_.onDisconnectPut(a.toString(),R.val(!0),(V,te)=>{"ok"===V&&Po(u.onDisconnect_,a,R),gu(0,I,V,te)})}(this._repo,this._path,a,l,p.wrapCallback(()=>{})),p.promise}update(a){dl("OnDisconnect.update",this._path),ic("OnDisconnect.update",a,this._path,!1);const l=new Y.BH;return function Np(u,a,l,p){if((0,Y.xb)(l))return ls("onDisconnect().update() called with empty data.  Don't do anything."),void gu(0,p,"ok",void 0);u.server_.onDisconnectMerge(a.toString(),l,(I,R)=>{"ok"===I&&Sr(l,(V,te)=>{const pe=Hr(te);Po(u.onDisconnect_,ui(a,V),pe)}),gu(0,p,I,R)})}(this._repo,this._path,a,l.wrapCallback(()=>{})),l.promise}}class qa{constructor(a,l,p,I){this._repo=a,this._path=l,this._queryParams=p,this._orderByCalled=I}get key(){return Pr(this._path)?null:to(this._path)}get ref(){return new Tc(this._repo,this._path)}get _queryIdentifier(){const a=Nn(this._queryParams),l=mo(a);return"{}"===l?"default":l}get _queryObject(){return Nn(this._queryParams)}isEqual(a){if(!((a=(0,Y.m9)(a))instanceof qa))return!1;const l=this._repo===a._repo,p=w(this._path,a._path);return l&&p&&this._queryIdentifier===a._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Eu(u){let a="";for(let l=u.pieceNum_;l<u.pieces_.length;l++)""!==u.pieces_[l]&&(a+="/"+encodeURIComponent(String(u.pieces_[l])));return a||"/"}(this._path)}}function uh(u,a){if(!0===u._orderByCalled)throw new Error(a+": You can't combine multiple orderBy calls.")}function $l(u){let a=null,l=null;if(u.hasStart()&&(a=u.getIndexStartValue()),u.hasEnd()&&(l=u.getIndexEndValue()),u.getIndex()===Bo){const p="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",I="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(u.hasStart()){if(u.getIndexStartName()!==Vr)throw new Error(p);if("string"!=typeof a)throw new Error(I)}if(u.hasEnd()){if(u.getIndexEndName()!==Ro)throw new Error(p);if("string"!=typeof l)throw new Error(I)}}else if(u.getIndex()===xr){if(null!=a&&!Wh(a)||null!=l&&!Wh(l))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,Y.hu)(u.getIndex()instanceof ro||u.getIndex()===gc,"unknown index type."),null!=a&&"object"==typeof a||null!=l&&"object"==typeof l)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Qh(u){if(u.hasStart()&&u.hasEnd()&&u.hasLimit()&&!u.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Tc extends qa{constructor(a,l){super(a,l,new Ga,!1)}get parent(){const a=Yo(this._path);return null===a?null:new Tc(this._repo,a)}get root(){let a=this;for(;null!==a.parent;)a=a.parent;return a}}class Ad{constructor(a,l,p){this._node=a,this.ref=l,this._index=p}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(a){const l=new qr(a),p=pl(this.ref,a);return new Ad(this._node.getChild(l),p,xr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(a){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(p,I)=>a(new Ad(I,pl(this.ref,p),xr)))}hasChild(a){const l=new qr(a);return!this._node.getChild(l).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ty(u,a){return(u=(0,Y.m9)(u))._checkNotDeleted("ref"),void 0!==a?pl(u._root,a):u._root}function jp(u,a){(u=(0,Y.m9)(u))._checkNotDeleted("refFromURL");const l=Bp(a,u._repo.repoInfo_.nodeAdmin);Bf("refFromURL",l);const p=l.repoInfo;return!u._repo.repoInfo_.isCustomHost()&&p.host!==u._repo.repoInfo_.host&&Zs("refFromURL: Host name does not match the current database: (found "+p.host+" but expected "+u._repo.repoInfo_.host+")"),ty(u,l.path.toString())}function pl(u,a){return null===Yr((u=(0,Y.m9)(u))._path)?Mp("child","path",a,!1):ih("child","path",a,!1),new Tc(u._repo,ui(u._path,a))}function zp(u,a){u=(0,Y.m9)(u),dl("set",u._path),Ka("set",a,u._path,!1);const l=new Y.BH;return Rg(u._repo,u._path,a,null,l.wrapCallback(()=>{})),l.promise}function ny(u,a){ic("update",a,u._path,!1);const l=new Y.BH;return function jf(u,a,l,p){Dd(u,"update",{path:a.toString(),value:l});let I=!0;const R=qh(u),V={};if(Sr(l,(te,pe)=>{I=!1,V[te]=jh(ui(a,te),Hr(pe),u.serverSyncTree_,R)}),I)ls("update() called with empty data.  Don't do anything."),gu(0,p,"ok",void 0);else{const te=Vf(u),pe=function Mu(u,a,l,p){!function dd(u,a,l,p){(0,Y.hu)(p>u.lastWriteId,"Stacking an older merge on top of newer ones"),u.allWrites.push({path:a,children:l,writeId:p,visible:!0}),u.visibleWrites=$c(u.visibleWrites,a,l),u.lastWriteId=p}(u.pendingWriteTree_,a,l,p);const I=ms.fromObject(l);return ku(u,new Kl({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},a,I))}(u.serverSyncTree_,a,V,te);sh(u.eventQueue_,pe),u.server_.merge(a.toString(),l,(Oe,Ft)=>{const qt="ok"===Oe;qt||fs("update at "+a+" failed: "+Oe);const sn=ec(u.serverSyncTree_,te,!qt),Rn=sn.length>0?Td(u,a):a;hl(u.eventQueue_,Rn,sn),gu(0,p,Oe,Ft)}),Sr(l,Oe=>{const Ft=Dc(u,ui(a,Oe));Td(u,Ft)}),hl(u.eventQueue_,a,[])}}(u._repo,u._path,a,l.wrapCallback(()=>{})),l.promise}function Wf(u){u=(0,Y.m9)(u);const a=new Xh(()=>{}),l=new Co(a);return function ey(u,a,l){const p=function Xd(u,a){const l=a._path;let p=null;u.syncPointTree_.foreachOnPath(l,(Oe,Ft)=>{const qt=S(Oe,l);p=p||A(Ft,qt)});let I=u.syncPointTree_.get(l);I?p=p||A(I,Rr()):(I=new Nl,u.syncPointTree_=u.syncPointTree_.set(l,I));const R=null!=p,V=R?new ql(p,!0,!1):null;return function Of(u){return ad(u.viewCache_)}(kf(I,a,vc(u.pendingWriteTree_,a._path),R?V.getNode():ni.EMPTY_NODE,R))}(u.serverSyncTree_,a);return null!=p?Promise.resolve(p):u.server_.get(a).then(I=>{const R=Hr(I).withIndex(a._queryParams.getIndex());let V;if(_d(u.serverSyncTree_,a,l,!0),a._queryParams.loadsAllData())V=is(u.serverSyncTree_,a._path,R);else{const te=Jd(u.serverSyncTree_,a);V=Ou(u.serverSyncTree_,a._path,R,te)}return hl(u.eventQueue_,a._path,V),tc(u.serverSyncTree_,a,l,null,!0),R},I=>(Dd(u,"get for query "+(0,Y.Wl)(a)+" failed: "+I),Promise.reject(new Error(I))))}(u._repo,u,l).then(p=>new Ad(p,new Tc(u._repo,u._path),u._queryParams.getIndex()))}class Co{constructor(a){this.callbackContext=a}respondsTo(a){return"value"===a}createEvent(a,l){const p=l._queryParams.getIndex();return new Og("value",this,new Ad(a.snapshotNode,new Tc(l._repo,l._path),p))}getEventRunner(a){return"cancel"===a.getEventType()?()=>this.callbackContext.onCancel(a.error):()=>this.callbackContext.onValue(a.snapshot,null)}createCancelEvent(a,l){return this.callbackContext.hasCancelCallback?new Vp(this,a,l):null}matches(a){return a instanceof Co&&(!a.callbackContext||!this.callbackContext||a.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Kf{constructor(a,l){this.eventType=a,this.callbackContext=l}respondsTo(a){let l="children_added"===a?"child_added":a;return l="children_removed"===l?"child_removed":l,this.eventType===l}createCancelEvent(a,l){return this.callbackContext.hasCancelCallback?new Vp(this,a,l):null}createEvent(a,l){(0,Y.hu)(null!=a.childName,"Child events should have a childName.");const p=pl(new Tc(l._repo,l._path),a.childName),I=l._queryParams.getIndex();return new Og(a.type,this,new Ad(a.snapshotNode,p,I),a.prevName)}getEventRunner(a){return"cancel"===a.getEventType()?()=>this.callbackContext.onCancel(a.error):()=>this.callbackContext.onValue(a.snapshot,a.prevName)}matches(a){return a instanceof Kf&&this.eventType===a.eventType&&(!this.callbackContext||!a.callbackContext||this.callbackContext.matches(a.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Jh(u,a,l,p,I){let R;if("object"==typeof p&&(R=void 0,I=p),"function"==typeof p&&(R=p),I&&I.onlyOnce){const pe=l,Oe=(Ft,qt)=>{Fp(u._repo,u,te),pe(Ft,qt)};Oe.userCallback=l.userCallback,Oe.context=l.context,l=Oe}const V=new Xh(l,R||void 0),te="value"===a?new Co(V):new Kf(a,V);return function Hf(u,a,l){let p;p=".info"===Yr(a._path)?_d(u.infoSyncTree_,a,l):_d(u.serverSyncTree_,a,l),Kh(u.eventQueue_,a._path,p)}(u._repo,u,te),()=>Fp(u._repo,u,te)}function Wp(u,a,l,p){return Jh(u,"value",a,l,p)}function Ng(u,a,l,p){return Jh(u,"child_added",a,l,p)}function ef(u,a,l,p){return Jh(u,"child_changed",a,l,p)}function Fg(u,a,l,p){return Jh(u,"child_moved",a,l,p)}function dh(u,a,l,p){return Jh(u,"child_removed",a,l,p)}function hh(u,a,l){let p=null;const I=l?new Xh(l):null;"value"===a?p=new Co(I):a&&(p=new Kf(a,I)),Fp(u._repo,u,p)}class Bl{}class Lg extends Bl{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){Ka("endAt",this._value,a._path,!0);const l=dt(a._queryParams,this._value,this._key);if(Qh(l),$l(l),a._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new qa(a._repo,a._path,l,a._orderByCalled)}}class Kp extends Bl{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){Ka("endBefore",this._value,a._path,!1);const l=function Rt(u,a,l){let p;return p=dt(u,a,u.index_===Bo||l?l:Vr),p.endBeforeSet_=!0,p}(a._queryParams,this._value,this._key);if(Qh(l),$l(l),a._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new qa(a._repo,a._path,l,a._orderByCalled)}}class jc extends Bl{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){Ka("startAt",this._value,a._path,!0);const l=Z(a._queryParams,this._value,this._key);if(Qh(l),$l(l),a._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new qa(a._repo,a._path,l,a._orderByCalled)}}class qp extends Bl{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){Ka("startAfter",this._value,a._path,!1);const l=function Te(u,a,l){let p;return p=Z(u,a,u.index_===Bo||l?l:Ro),p.startAfterSet_=!0,p}(a._queryParams,this._value,this._key);if(Qh(l),$l(l),a._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new qa(a._repo,a._path,l,a._orderByCalled)}}class ry extends Bl{constructor(a){super(),this._limit=a}_apply(a){if(a._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new qa(a._repo,a._path,function P(u,a){const l=u.copy();return l.limitSet_=!0,l.limit_=a,l.viewFrom_="l",l}(a._queryParams,this._limit),a._orderByCalled)}}class nf extends Bl{constructor(a){super(),this._limit=a}_apply(a){if(a._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new qa(a._repo,a._path,function B(u,a){const l=u.copy();return l.limitSet_=!0,l.limit_=a,l.viewFrom_="r",l}(a._queryParams,this._limit),a._orderByCalled)}}class Zp extends Bl{constructor(a){super(),this._path=a}_apply(a){uh(a,"orderByChild");const l=new qr(this._path);if(Pr(l))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const p=new ro(l),I=Wt(a._queryParams,p);return $l(I),new qa(a._repo,a._path,I,!0)}}class Xp extends Bl{_apply(a){uh(a,"orderByKey");const l=Wt(a._queryParams,Bo);return $l(l),new qa(a._repo,a._path,l,!0)}}class Bg extends Bl{_apply(a){uh(a,"orderByPriority");const l=Wt(a._queryParams,xr);return $l(l),new qa(a._repo,a._path,l,!0)}}class qu extends Bl{_apply(a){uh(a,"orderByValue");const l=Wt(a._queryParams,gc);return $l(l),new qa(a._repo,a._path,l,!0)}}class af extends Bl{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){if(Ka("equalTo",this._value,a._path,!1),a._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(a._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Lg(this._value,this._key)._apply(new jc(this._value,this._key)._apply(a))}}function sc(u,...a){let l=(0,Y.m9)(u);for(const p of a)l=p._apply(l);return l}(function ul(u){(0,Y.hu)(!Bc,"__referenceConstructor has already been defined"),Bc=u})(Tc),function Bn(u){(0,Y.hu)(!rn,"__referenceConstructor has already been defined"),rn=u}(Tc);const Ug="FIREBASE_DATABASE_EMULATOR_HOST",Xf={};let Qf=!1;function lf(u,a,l,p,I){let R=p||u.options.databaseURL;void 0===R&&(u.options.projectId||Zs("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ls("Using default host for project ",u.options.projectId),R=`${u.options.projectId}-default-rtdb.firebaseio.com`);let pe,Oe,V=Bp(R,I),te=V.repoInfo;typeof process<"u"&&process.env&&(Oe=process.env[Ug]),Oe?(pe=!0,R=`http://${Oe}?ns=${te.namespace}`,V=Bp(R,I),te=V.repoInfo):pe=!V.repoInfo.secure;const Ft=I&&pe?new wr(wr.OWNER):new Br(u.name,u.options,a);Bf("Invalid Firebase Database URL",V),Pr(V.path)||Zs("Database URL must point to the root of a Firebase Database (not including a child path).");const qt=function Hg(u,a,l,p){let I=Xf[a.name];I||(I={},Xf[a.name]=I);let R=I[u.toURLString()];return R&&Zs("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),R=new Ag(u,Qf,l,p),I[u.toURLString()]=R,R}(te,u,Ft,new Kr(u.name,l));return new Jf(qt,u)}class Jf{constructor(a,l){this._repoInternal=a,this.app=l,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Jm(u,a,l){if(u.stats_=Js(u.repoInfo_),u.forceRestClient_||Vn())u.server_=new ir(u.repoInfo_,(p,I,R,V)=>{oh(u,p,I,R,V)},u.authTokenProvider_,u.appCheckProvider_),setTimeout(()=>Ll(u,!0),0);else{if(typeof l<"u"&&null!==l){if("object"!=typeof l)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,Y.Wl)(l)}catch(p){throw new Error("Invalid authOverride provided: "+p)}}u.persistentConnection_=new Is(u.repoInfo_,a,(p,I,R,V)=>{oh(u,p,I,R,V)},p=>{Ll(u,p)},p=>{!function Na(u,a){Sr(a,(l,p)=>{Uf(u,l,p)})}(u,p)},u.authTokenProvider_,u.appCheckProvider_,l),u.server_=u.persistentConnection_}u.authTokenProvider_.addTokenChangeListener(p=>{u.server_.refreshAuthToken(p)}),u.appCheckProvider_.addTokenChangeListener(p=>{u.server_.refreshAppCheckToken(p.token)}),u.statsReporter_=function ac(u,a){const l=u.toString();return vo[l]||(vo[l]=a()),vo[l]}(u.repoInfo_,()=>new jd(u.stats_,u.server_)),u.infoData_=new jr,u.infoSyncTree_=new Ki({startListening:(p,I,R,V)=>{let te=[];const pe=u.infoData_.getNode(p._path);return pe.isEmpty()||(te=is(u.infoSyncTree_,p._path,pe),setTimeout(()=>{V("ok")},0)),te},stopListening:()=>{}}),Uf(u,"connected",!1),u.serverSyncTree_=new Ki({startListening:(p,I,R,V)=>(u.server_.listen(p,R,I,(te,pe)=>{const Oe=V(te,pe);hl(u.eventQueue_,p._path,Oe)}),[]),stopListening:(p,I)=>{u.server_.unlisten(p,I)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Tc(this._repo,Rr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function jg(u,a){const l=Xf[a];(!l||l[u.key]!==u)&&Zs(`Database ${a}(${u.repoInfo_}) has already been deleted.`),fl(u),delete l[u.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(a){null===this._rootInternal&&Zs("Cannot call "+a+" on a deleted database.")}}function ph(){la.IS_TRANSPORT_INITIALIZED&&fs("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Qp(){ph(),$o.forceDisallow()}function cf(){ph(),pr.forceDisallow(),$o.forceAllow()}function eg(u,a){ga(u,a)}const tg={".sv":"timestamp"};class La{constructor(a,l){this.committed=a,this.snapshot=l}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Is.prototype.simpleListen=function(u,a){this.sendRequest("q",{p:u},a)},Is.prototype.echo=function(u,a){this.sendRequest("echo",{d:u},a)},function tp(u){Ys(_t.SDK_VERSION),(0,_t._registerComponent)(new it.wA("database",(a,{instanceIdentifier:l})=>lf(a.getProvider("app").getImmediate(),a.getProvider("auth-internal"),a.getProvider("app-check-internal"),l),"PUBLIC").setMultipleInstances(!0)),(0,_t.registerVersion)(Ks,"0.14.4",u),(0,_t.registerVersion)(Ks,"0.14.4","esm2017")}();const Gg=new ts.Yd("@firebase/database-compat"),Wg=function(u){Gg.warn("FIREBASE WARNING: "+u)};class cy{constructor(a){this._delegate=a}cancel(a){(0,Y.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,Y.Wj)("OnDisconnect.cancel","onComplete",a,!0);const l=this._delegate.cancel();return a&&l.then(()=>a(null),p=>a(p)),l}remove(a){(0,Y.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,Y.Wj)("OnDisconnect.remove","onComplete",a,!0);const l=this._delegate.remove();return a&&l.then(()=>a(null),p=>a(p)),l}set(a,l){(0,Y.Dv)("OnDisconnect.set",1,2,arguments.length),(0,Y.Wj)("OnDisconnect.set","onComplete",l,!0);const p=this._delegate.set(a);return l&&p.then(()=>l(null),I=>l(I)),p}setWithPriority(a,l,p){(0,Y.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,Y.Wj)("OnDisconnect.setWithPriority","onComplete",p,!0);const I=this._delegate.setWithPriority(a,l);return p&&I.then(()=>p(null),R=>p(R)),I}update(a,l){if((0,Y.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(a)){const I={};for(let R=0;R<a.length;++R)I[""+R]=a[R];a=I,Wg("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,Y.Wj)("OnDisconnect.update","onComplete",l,!0);const p=this._delegate.update(a);return l&&p.then(()=>l(null),I=>l(I)),p}}class ig{constructor(a,l){this.committed=a,this.snapshot=l}toJSON(){return(0,Y.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Hc{constructor(a,l){this._database=a,this._delegate=l}val(){return(0,Y.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,Y.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,Y.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,Y.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(a){return(0,Y.Dv)("DataSnapshot.child",0,1,arguments.length),a=String(a),ih("DataSnapshot.child","path",a,!1),new Hc(this._database,this._delegate.child(a))}hasChild(a){return(0,Y.Dv)("DataSnapshot.hasChild",1,1,arguments.length),ih("DataSnapshot.hasChild","path",a,!1),this._delegate.hasChild(a)}getPriority(){return(0,Y.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(a){return(0,Y.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,Y.Wj)("DataSnapshot.forEach","action",a,!1),this._delegate.forEach(l=>a(new Hc(this._database,l)))}hasChildren(){return(0,Y.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,Y.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,Y.Dv)("DataSnapshot.ref",0,0,arguments.length),new Da(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ba{constructor(a,l){this.database=a,this._delegate=l}on(a,l,p,I){var R;(0,Y.Dv)("Query.on",2,4,arguments.length),(0,Y.Wj)("Query.on","callback",l,!1);const V=ba.getCancelAndContextArgs_("Query.on",p,I),te=(Oe,Ft)=>{l.call(V.context,new Hc(this.database,Oe),Ft)};te.userCallback=l,te.context=V.context;const pe=null===(R=V.cancel)||void 0===R?void 0:R.bind(V.context);switch(a){case"value":return Wp(this._delegate,te,pe),l;case"child_added":return Ng(this._delegate,te,pe),l;case"child_removed":return dh(this._delegate,te,pe),l;case"child_changed":return ef(this._delegate,te,pe),l;case"child_moved":return Fg(this._delegate,te,pe),l;default:throw new Error((0,Y.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(a,l,p){if((0,Y.Dv)("Query.off",0,3,arguments.length),function(u,a,l){if(void 0!==a)switch(a){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,Y.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,a),(0,Y.Wj)("Query.off","callback",l,!0),(0,Y.lb)("Query.off","context",p,!0),l){const I=()=>{};I.userCallback=l,I.context=p,hh(this._delegate,a,I)}else hh(this._delegate,a)}get(){return Wf(this._delegate).then(a=>new Hc(this.database,a))}once(a,l,p,I){(0,Y.Dv)("Query.once",1,4,arguments.length),(0,Y.Wj)("Query.once","callback",l,!0);const R=ba.getCancelAndContextArgs_("Query.once",p,I),V=new Y.BH,te=(Oe,Ft)=>{const qt=new Hc(this.database,Oe);l&&l.call(R.context,qt,Ft),V.resolve(qt)};te.userCallback=l,te.context=R.context;const pe=Oe=>{R.cancel&&R.cancel.call(R.context,Oe),V.reject(Oe)};switch(a){case"value":Wp(this._delegate,te,pe,{onlyOnce:!0});break;case"child_added":Ng(this._delegate,te,pe,{onlyOnce:!0});break;case"child_removed":dh(this._delegate,te,pe,{onlyOnce:!0});break;case"child_changed":ef(this._delegate,te,pe,{onlyOnce:!0});break;case"child_moved":Fg(this._delegate,te,pe,{onlyOnce:!0});break;default:throw new Error((0,Y.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return V.promise}limitToFirst(a){return(0,Y.Dv)("Query.limitToFirst",1,1,arguments.length),new ba(this.database,sc(this._delegate,function $g(u){if("number"!=typeof u||Math.floor(u)!==u||u<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new ry(u)}(a)))}limitToLast(a){return(0,Y.Dv)("Query.limitToLast",1,1,arguments.length),new ba(this.database,sc(this._delegate,function Wu(u){if("number"!=typeof u||Math.floor(u)!==u||u<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new nf(u)}(a)))}orderByChild(a){return(0,Y.Dv)("Query.orderByChild",1,1,arguments.length),new ba(this.database,sc(this._delegate,function fh(u){if("$key"===u)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===u)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===u)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ih("orderByChild","path",u,!1),new Zp(u)}(a)))}orderByKey(){return(0,Y.Dv)("Query.orderByKey",0,0,arguments.length),new ba(this.database,sc(this._delegate,function rf(){return new Xp}()))}orderByPriority(){return(0,Y.Dv)("Query.orderByPriority",0,0,arguments.length),new ba(this.database,sc(this._delegate,function Ku(){return new Bg}()))}orderByValue(){return(0,Y.Dv)("Query.orderByValue",0,0,arguments.length),new ba(this.database,sc(this._delegate,function sf(){return new qu}()))}startAt(a=null,l){return(0,Y.Dv)("Query.startAt",0,2,arguments.length),new ba(this.database,sc(this._delegate,function Yf(u=null,a){return Vc("startAt","key",a,!0),new jc(u,a)}(a,l)))}startAfter(a=null,l){return(0,Y.Dv)("Query.startAfter",0,2,arguments.length),new ba(this.database,sc(this._delegate,function Yp(u,a){return Vc("startAfter","key",a,!0),new qp(u,a)}(a,l)))}endAt(a=null,l){return(0,Y.Dv)("Query.endAt",0,2,arguments.length),new ba(this.database,sc(this._delegate,function tf(u,a){return Vc("endAt","key",a,!0),new Lg(u,a)}(a,l)))}endBefore(a=null,l){return(0,Y.Dv)("Query.endBefore",0,2,arguments.length),new ba(this.database,sc(this._delegate,function qf(u,a){return Vc("endBefore","key",a,!0),new Kp(u,a)}(a,l)))}equalTo(a,l){return(0,Y.Dv)("Query.equalTo",1,2,arguments.length),new ba(this.database,sc(this._delegate,function Zf(u,a){return Vc("equalTo","key",a,!0),new af(u,a)}(a,l)))}toString(){return(0,Y.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,Y.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(a){if((0,Y.Dv)("Query.isEqual",1,1,arguments.length),!(a instanceof ba))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(a._delegate)}static getCancelAndContextArgs_(a,l,p){const I={cancel:void 0,context:void 0};if(l&&p)I.cancel=l,(0,Y.Wj)(a,"cancel",I.cancel,!0),I.context=p,(0,Y.lb)(a,"context",I.context,!0);else if(l)if("object"==typeof l&&null!==l)I.context=l;else{if("function"!=typeof l)throw new Error((0,Y.gK)(a,"cancelOrContext")+" must either be a cancel callback or a context object.");I.cancel=l}return I}get ref(){return new Da(this.database,new Tc(this._delegate._repo,this._delegate._path))}}class Da extends ba{constructor(a,l){super(a,new qa(l._repo,l._path,new Ga,!1)),this.database=a,this._delegate=l}getKey(){return(0,Y.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(a){return(0,Y.Dv)("Reference.child",1,1,arguments.length),"number"==typeof a&&(a=String(a)),new Da(this.database,pl(this._delegate,a))}getParent(){(0,Y.Dv)("Reference.parent",0,0,arguments.length);const a=this._delegate.parent;return a?new Da(this.database,a):null}getRoot(){return(0,Y.Dv)("Reference.root",0,0,arguments.length),new Da(this.database,this._delegate.root)}set(a,l){(0,Y.Dv)("Reference.set",1,2,arguments.length),(0,Y.Wj)("Reference.set","onComplete",l,!0);const p=zp(this._delegate,a);return l&&p.then(()=>l(null),I=>l(I)),p}update(a,l){if((0,Y.Dv)("Reference.update",1,2,arguments.length),Array.isArray(a)){const I={};for(let R=0;R<a.length;++R)I[""+R]=a[R];a=I,Wg("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}dl("Reference.update",this._delegate._path),(0,Y.Wj)("Reference.update","onComplete",l,!0);const p=ny(this._delegate,a);return l&&p.then(()=>l(null),I=>l(I)),p}setWithPriority(a,l,p){(0,Y.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,Y.Wj)("Reference.setWithPriority","onComplete",p,!0);const I=function Gf(u,a,l){if(dl("setWithPriority",u._path),Ka("setWithPriority",a,u._path,!1),fu("setWithPriority",l,!1),".length"===u.key||".keys"===u.key)throw"setWithPriority failed: "+u.key+" is a read-only object.";const p=new Y.BH;return Rg(u._repo,u._path,a,l,p.wrapCallback(()=>{})),p.promise}(this._delegate,a,l);return p&&I.then(()=>p(null),R=>p(R)),I}remove(a){(0,Y.Dv)("Reference.remove",0,1,arguments.length),(0,Y.Wj)("Reference.remove","onComplete",a,!0);const l=function xd(u){return dl("remove",u._path),zp(u,null)}(this._delegate);return a&&l.then(()=>a(null),p=>a(p)),l}transaction(a,l,p){(0,Y.Dv)("Reference.transaction",1,3,arguments.length),(0,Y.Wj)("Reference.transaction","transactionUpdate",a,!1),(0,Y.Wj)("Reference.transaction","onComplete",l,!0),function(u,a,l,p){if(void 0!==l&&"boolean"!=typeof l)throw new Error((0,Y.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,p);const I=function oy(u,a,l){var p;if(u=(0,Y.m9)(u),dl("Reference.transaction",u._path),".length"===u.key||".keys"===u.key)throw"Reference.transaction failed: "+u.key+" is a read-only object.";const I=null===(p=null==l?void 0:l.applyLocally)||void 0===p||p,R=new Y.BH,te=Wp(u,()=>{});return function Zh(u,a,l,p,I,R){Dd(u,"transaction on "+a);const V={path:a,update:l,onComplete:p,status:null,order:tl(),applyLocally:R,retryCount:0,unwatcher:I,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},te=ah(u,a,void 0);V.currentInputSnapshot=te;const pe=V.update(te.val());if(void 0===pe)V.unwatcher(),V.currentOutputSnapshotRaw=null,V.currentOutputSnapshotResolved=null,V.onComplete&&V.onComplete(null,!1,V.currentInputSnapshot);else{Bu("transaction failed: Data returned ",pe,V.path),V.status=0;const Oe=hu(u.transactionQueueTree_,a),Ft=Fl(Oe)||[];let qt;Ft.push(V),Hh(Oe,Ft),"object"==typeof pe&&null!==pe&&(0,Y.r3)(pe,".priority")?(qt=(0,Y.DV)(pe,".priority"),(0,Y.hu)(Wh(qt),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):qt=(Ed(u.serverSyncTree_,a)||ni.EMPTY_NODE).getPriority().val();const sn=qh(u),Rn=Hr(pe,qt),Zn=th(Rn,te,sn);V.currentOutputSnapshotRaw=Rn,V.currentOutputSnapshotResolved=Zn,V.currentWriteId=Vf(u);const Mr=Ca(u.serverSyncTree_,a,Zn,V.currentWriteId,V.applyLocally);hl(u.eventQueue_,a,Mr),Vu(u,u.transactionQueueTree_)}}(u._repo,u._path,a,(pe,Oe,Ft)=>{let qt=null;pe?R.reject(pe):(qt=new Ad(Ft,new Tc(u._repo,u._path),xr),R.resolve(new La(Oe,qt)))},te,I),R.promise}(this._delegate,a,{applyLocally:p}).then(R=>new ig(R.committed,new Hc(this.database,R.snapshot)));return l&&I.then(R=>l(null,R.committed,R.snapshot),R=>l(R,!1,null)),I}setPriority(a,l){(0,Y.Dv)("Reference.setPriority",1,2,arguments.length),(0,Y.Wj)("Reference.setPriority","onComplete",l,!0);const p=function Gp(u,a){u=(0,Y.m9)(u),dl("setPriority",u._path),fu("setPriority",a,!1);const l=new Y.BH;return Rg(u._repo,ui(u._path,".priority"),a,null,l.wrapCallback(()=>{})),l.promise}(this._delegate,a);return l&&p.then(()=>l(null),I=>l(I)),p}push(a,l){(0,Y.Dv)("Reference.push",0,2,arguments.length),(0,Y.Wj)("Reference.push","onComplete",l,!0);const p=function kg(u,a){u=(0,Y.m9)(u),dl("push",u._path),Ka("push",a,u._path,!0);const l=xg(u._repo),p=zu(l),I=pl(u,p),R=pl(u,p);let V;return V=null!=a?zp(R,a).then(()=>R):Promise.resolve(R),I.then=V.then.bind(V),I.catch=V.then.bind(V,void 0),I}(this._delegate,a),I=p.then(V=>new Da(this.database,V));l&&I.then(()=>l(null),V=>l(V));const R=new Da(this.database,p);return R.then=I.then.bind(I),R.catch=I.catch.bind(I,void 0),R}onDisconnect(){return dl("Reference.onDisconnect",this._delegate._path),new cy(new Gu(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class zc{constructor(a,l){this._delegate=a,this.app=l,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Qp,forceLongPolling:cf}}useEmulator(a,l,p={}){!function ep(u,a,l,p={}){(u=(0,Y.m9)(u))._checkNotDeleted("useEmulator"),u._instanceStarted&&Zs("Cannot call useEmulator() after instance has already been initialized.");const I=u._repoInternal;let R;if(I.repoInfo_.nodeAdmin)p.mockUserToken&&Zs('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),R=new wr(wr.OWNER);else if(p.mockUserToken){const V="string"==typeof p.mockUserToken?p.mockUserToken:(0,Y.Sg)(p.mockUserToken,u.app.options.projectId);R=new wr(V)}!function Vg(u,a,l,p){u.repoInfo_=new El(`${a}:${l}`,!1,u.repoInfo_.namespace,u.repoInfo_.webSocketOnly,u.repoInfo_.nodeAdmin,u.repoInfo_.persistenceKey,u.repoInfo_.includeNamespaceInQueryParams,!0),p&&(u.authTokenProvider_=p)}(I,a,l,R)}(this._delegate,a,l,p)}ref(a){if((0,Y.Dv)("database.ref",0,1,arguments.length),a instanceof Da){const l=jp(this._delegate,a.toString());return new Da(this,l)}{const l=ty(this._delegate,a);return new Da(this,l)}}refFromURL(a){(0,Y.Dv)("database.refFromURL",1,1,arguments.length);const p=jp(this._delegate,a);return new Da(this,p)}goOffline(){return(0,Y.Dv)("database.goOffline",0,0,arguments.length),function zg(u){(u=(0,Y.m9)(u))._checkNotDeleted("goOffline"),fl(u._repo)}(this._delegate)}goOnline(){return(0,Y.Dv)("database.goOnline",0,0,arguments.length),function iy(u){(u=(0,Y.m9)(u))._checkNotDeleted("goOnline"),function zf(u){u.persistentConnection_&&u.persistentConnection_.resume(Uu)}(u._repo)}(this._delegate)}}zc.ServerValue={TIMESTAMP:function ng(){return tg}(),increment:u=>function sy(u){return{".sv":{increment:u}}}(u)};var gh=Object.freeze({__proto__:null,initStandalone:function mu({app:u,url:a,version:l,customAuthImpl:p,namespace:I,nodeAdmin:R=!1}){Ys(l);const V=new it.zt("auth-internal",new it.H0("database-standalone"));return V.setComponent(new it.wA("auth-internal",()=>p,"PRIVATE")),{instance:new zc(lf(u,V,void 0,a,R),u),namespace:I}}});const sg=zc.ServerValue;function df(u){return null==u}function hf(u){return"function"==typeof u.set}function Gc(u,a){return hf(a)?a:u.ref(a)}function ff(u,a){if(function qg(u){return"string"==typeof u}(u))return a.stringCase();if(hf(u))return a.firebaseCase();if(function og(u){return"function"==typeof u.exportVal}(u))return a.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof u)}function Ul(u,a,l="on",p=ye.z){return new _e.y(I=>{let R=null;return R=u[l](a,(V,te)=>{p.schedule(()=>{I.next({snapshot:V,prevKey:te})}),"once"===l&&p.schedule(()=>I.complete())},V=>{p.schedule(()=>I.error(V))}),"on"===l?{unsubscribe(){null!=R&&u.off(a,R)}}:{unsubscribe(){}}}).pipe((0,We.U)(I=>{const{snapshot:R,prevKey:V}=I;let te=null;return R.exists()&&(te=R.key),{type:a,payload:R,prevKey:V,key:te}}),(0,ne.B)())}function pf(u,a){const l=u.length;for(let p=0;p<l;p++)if(u[p].payload.key===a)return p;return-1}function uy(u,a){const{payload:l,prevKey:p,key:I}=a,R=pf(u,I),V=function Md(u,a){if(df(a))return 0;{const l=pf(u,a);return-1===l?u.length:l+1}}(u,p);switch(a.type){case"value":if(a.payload&&a.payload.exists()){let te=null;a.payload.forEach(pe=>{const Oe={payload:pe,type:"value",prevKey:te,key:pe.key};return te=pe.key,u=[...u,Oe],!1})}return u;case"child_added":if(R>-1){const te=u[R-1];(te&&te.key||null)!==p&&(u=u.filter(pe=>pe.payload.key!==l.key)).splice(V,0,a)}else{if(null==p)return[a,...u];(u=u.slice()).splice(V,0,a)}return u;case"child_removed":return u.filter(te=>te.payload.key!==l.key);case"child_changed":return u.map(te=>te.payload.key===I?a:te);case"child_moved":if(R>-1){const te=u.splice(R,1)[0];return(u=u.slice()).splice(V,0,te),u}return u;default:return u}}function gf(u){return(df(u)||0===u.length)&&(u=["child_added","child_removed","child_changed","child_moved"]),u}function yh(u,a,l){return function mh(u,a,l){return Ul(u,"value","once",l).pipe((0,ct.w)(p=>{const I=[(0,Me.of)(p)];return a.forEach(R=>I.push(Ul(u,R,"on",l))),(0,L.T)(...I).pipe((0,vt.R)(uy,[]))}),(0,Tn.x)())}(u,a=gf(a),l)}function np(u,a,l){const p=(a=gf(a)).map(I=>Ul(u,I,"on",l));return(0,L.T)(...p)}function dy(u,a){return function(p,I){return ff(p,{stringCase:()=>u.child(p)[a](I),firebaseCase:()=>p[a](I),snapshotCase:()=>p.ref[a](I)})}}function hy(u){return function(l){return l?ff(l,{stringCase:()=>u.child(l).remove(),firebaseCase:()=>l.remove(),snapshotCase:()=>l.ref.remove()}):u.remove()}}function lg(u,a){return function(){return Ul(u,"value","on",a)}}!function Rd(u){u.INTERNAL.registerComponent(new it.wA("database-compat",(a,{instanceIdentifier:l})=>{const p=a.getProvider("app-compat").getImmediate(),I=a.getProvider("database").getImmediate({identifier:l});return new zc(I,p)},"PUBLIC").setServiceProps({Reference:Da,Query:ba,Database:zc,DataSnapshot:Hc,enableLogging:eg,INTERNAL:gh,ServerValue:sg}).setMultipleInstances(!0)),u.registerVersion("@firebase/database-compat","0.3.4")}(Re.Z);const cg=new _.OlP("angularfire2.realtimeDatabaseURL"),py=new _.OlP("angularfire2.database.use-emulator");let ug=(()=>{class u{constructor(l,p,I,R,V,te,pe,Oe,Ft,qt,sn,Rn,Zn,Mr,oi){this.schedulers=te;const Mi=pe,Ms=(0,xe.on)(l,V,p);Oe&&(0,Se.nw)(Ms,V,Ft,sn,Rn,Zn,qt,Mr),this.database=(0,xe.cc)(`${Ms.name}.database.${I}`,"AngularFireDatabase",Ms.name,()=>{const Cs=V.runOutsideAngular(()=>Ms.database(I||void 0));return Mi&&Cs.useEmulator(...Mi),Cs},[Mi])}list(l,p){const I=this.schedulers.ngZone.runOutsideAngular(()=>Gc(this.database,l));let R=I;return p&&(R=p(I)),function Zg(u,a){const l=a.schedulers.outsideAngular,p=a.schedulers.ngZone.run(()=>u.ref);return{query:u,update:dy(p,"update"),set:dy(p,"set"),push:I=>p.push(I),remove:hy(p),snapshotChanges:I=>yh(u,I,l).pipe(At.iC),stateChanges:I=>np(u,I,l).pipe(At.iC),auditTrail:I=>function Yg(u,a,l){return function ag(u,a,l){return function Wc(u,a){return Ul(u,"value","on",a).pipe((0,We.U)(l=>{let p;return l.payload.forEach(I=>(p=I.key,!1)),{data:l,lastKeyToLoad:p}}))}(u,l).pipe(function Ao(...u){const a=(0,hs.jO)(u);return(0,ae.e)((l,p)=>{const I=u.length,R=new Array(I);let V=u.map(()=>!1),te=!1;for(let pe=0;pe<I;pe++)(0,$r.Xf)(u[pe]).subscribe((0,Ee.x)(p,Oe=>{R[pe]=Oe,!te&&!V[pe]&&(V[pe]=!0,(te=V.every(ii.y))&&(V=null))},Qi.Z));l.subscribe((0,Ee.x)(p,pe=>{if(te){const Oe=[pe,...R];p.next(a?a(...Oe):Oe)}}))})}(a),(0,We.U)(([I,R])=>{const V=I.lastKeyToLoad,te=R.map(pe=>pe.key);return{actions:R,lastKeyToLoad:V,loadedKeys:te}}),function xi(u){return(0,ae.e)((a,l)=>{let p=!1,I=0;a.subscribe((0,Ee.x)(l,R=>(p||(p=!u(R,I++)))&&l.next(R)))})}(I=>-1===I.loadedKeys.indexOf(I.lastKeyToLoad)),(0,We.U)(I=>I.actions))}(u,np(u,a).pipe((0,vt.R)((I,R)=>[...I,R],[])),l)}(u,I,l).pipe(At.iC),valueChanges:(I,R)=>yh(u,I,l).pipe((0,We.U)(te=>te.map(pe=>R&&R.idField?Object.assign(Object.assign({},pe.payload.val()),{[R.idField]:pe.key}):pe.payload.val())),At.iC)}}(R,this)}object(l){return function fy(u,a){return{query:u,snapshotChanges:()=>lg(u,a.schedulers.outsideAngular)().pipe(At.iC),update:l=>u.ref.update(l),set:l=>u.ref.set(l),remove:()=>u.ref.remove(),valueChanges:()=>lg(u,a.schedulers.outsideAngular)().pipe(At.iC,(0,We.U)(p=>p.payload.exists()?p.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Gc(this.database,l)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return u.\u0275fac=function(l){return new(l||u)(_.LFG(xe.Dh),_.LFG(xe.xv,8),_.LFG(cg,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(At.HU),_.LFG(py,8),_.LFG(Se.zQ,8),_.LFG(Se.Qv,8),_.LFG(Se.L6,8),_.LFG(Se._Q,8),_.LFG(Se.rT,8),_.LFG(Se.lh,8),_.LFG(Se.f7,8),_.LFG(Ns.nm,8))},u.\u0275prov=_.Yz7({token:u,factory:u.\u0275fac,providedIn:"any"}),u})(),Xg=(()=>{class u{constructor(){To.Z.registerVersion("angularfire",At.q4.full,"rtdb-compat")}}return u.\u0275fac=function(l){return new(l||u)},u.\u0275mod=_.oAB({type:u}),u.\u0275inj=_.cJS({providers:[ug]}),u})();var mf=j(7556);let gy=(()=>{class u{constructor(l){this.authService=l,this.authService.fetchJWT()}}return u.\u0275fac=function(l){return new(l||u)(_.Y36(mf.e))},u.\u0275cmp=_.Xpm({type:u,selectors:[["app-root"]],standalone:!0,features:[_.jDz],decls:2,vars:0,template:function(l,p){1&l&&(_.TgZ(0,"ion-app"),_._UZ(1,"ion-router-outlet"),_.qZA())},dependencies:[ce.Pc,ce.dr,ce.jP,Se.ww,F.yb,M,Xg]}),u})();var vh=j(2340),Qg=j(529),rp=j(6738);vh.N.production&&(0,_.G48)(),(0,m.Cg)(gy,{providers:[(0,Qg.h_)(),{provide:ee.wN,useClass:ce.r4},(0,_.RIp)(ce.Pc.forRoot({})),(0,ee.bU)($e),(0,_.RIp)(xe.hO.initializeApp(vh.N.firebase))]}),window,(0,rp.a)().then(()=>{(0,rp.b)([["pwa-camera-modal",[[1,"pwa-camera-modal",{facingMode:[1,"facing-mode"],present:[64],dismiss:[64]}]]],["pwa-action-sheet",[[1,"pwa-action-sheet",{header:[1],cancelable:[4],options:[16],open:[32]}]]],["pwa-toast",[[1,"pwa-toast",{message:[1],duration:[2],closing:[32]}]]],["pwa-camera",[[1,"pwa-camera",{facingMode:[1,"facing-mode"],handlePhoto:[16],handleNoDeviceError:[16],noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"],photo:[32],photoSrc:[32],showShutterOverlay:[32],flashIndex:[32],hasCamera:[32],rotation:[32],deviceError:[32]}]]],["pwa-camera-modal-instance",[[1,"pwa-camera-modal-instance",{facingMode:[1,"facing-mode"],noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"]},[[32,"keyup","handleBackdropKeyUp"]]]]]],undefined)})},1135:(In,Et,j)=>{"use strict";j.d(Et,{X:()=>m});var _=j(7579);class m extends _.x{constructor(ce){super(),this._value=ce}get value(){return this.getValue()}_subscribe(ce){const $e=super._subscribe(ce);return!$e.closed&&ce.next(this._value),$e}getValue(){const{hasError:ce,thrownError:$e,_value:Se}=this;if(ce)throw $e;return this._throwIfClosed(),Se}next(ce){super.next(this._value=ce)}}},9751:(In,Et,j)=>{"use strict";j.d(Et,{y:()=>Me});var _=j(930),m=j(727),ee=j(8822),ce=j(9635),$e=j(2416),Se=j(576),_e=j(2806);let Me=(()=>{class Ee{constructor(We){We&&(this._subscribe=We)}lift(We){const ct=new Ee;return ct.source=this,ct.operator=We,ct}subscribe(We,ct,At){const xe=function ae(Ee){return Ee&&Ee instanceof _.Lv||function ye(Ee){return Ee&&(0,Se.m)(Ee.next)&&(0,Se.m)(Ee.error)&&(0,Se.m)(Ee.complete)}(Ee)&&(0,m.Nn)(Ee)}(We)?We:new _.Hp(We,ct,At);return(0,_e.x)(()=>{const{operator:Re,source:de}=this;xe.add(Re?Re.call(xe,de):de?this._subscribe(xe):this._trySubscribe(xe))}),xe}_trySubscribe(We){try{return this._subscribe(We)}catch(ct){We.error(ct)}}forEach(We,ct){return new(ct=ze(ct))((At,xe)=>{const Re=new _.Hp({next:de=>{try{We(de)}catch(_t){xe(_t),Re.unsubscribe()}},error:xe,complete:At});this.subscribe(Re)})}_subscribe(We){var ct;return null===(ct=this.source)||void 0===ct?void 0:ct.subscribe(We)}[ee.L](){return this}pipe(...We){return(0,ce.U)(We)(this)}toPromise(We){return new(We=ze(We))((ct,At)=>{let xe;this.subscribe(Re=>xe=Re,Re=>At(Re),()=>ct(xe))})}}return Ee.create=Ke=>new Ee(Ke),Ee})();function ze(Ee){var Ke;return null!==(Ke=null!=Ee?Ee:$e.v.Promise)&&void 0!==Ke?Ke:Promise}},7579:(In,Et,j)=>{"use strict";j.d(Et,{x:()=>_e});var _=j(9751),m=j(727);const ce=(0,j(3888).d)(ze=>function(){ze(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var $e=j(8737),Se=j(2806);let _e=(()=>{class ze extends _.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ae){const Ee=new Me(this,this);return Ee.operator=ae,Ee}_throwIfClosed(){if(this.closed)throw new ce}next(ae){(0,Se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ee of this.currentObservers)Ee.next(ae)}})}error(ae){(0,Se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ae;const{observers:Ee}=this;for(;Ee.length;)Ee.shift().error(ae)}})}complete(){(0,Se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ae}=this;for(;ae.length;)ae.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ae;return(null===(ae=this.observers)||void 0===ae?void 0:ae.length)>0}_trySubscribe(ae){return this._throwIfClosed(),super._trySubscribe(ae)}_subscribe(ae){return this._throwIfClosed(),this._checkFinalizedStatuses(ae),this._innerSubscribe(ae)}_innerSubscribe(ae){const{hasError:Ee,isStopped:Ke,observers:We}=this;return Ee||Ke?m.Lc:(this.currentObservers=null,We.push(ae),new m.w0(()=>{this.currentObservers=null,(0,$e.P)(We,ae)}))}_checkFinalizedStatuses(ae){const{hasError:Ee,thrownError:Ke,isStopped:We}=this;Ee?ae.error(Ke):We&&ae.complete()}asObservable(){const ae=new _.y;return ae.source=this,ae}}return ze.create=(ye,ae)=>new Me(ye,ae),ze})();class Me extends _e{constructor(ye,ae){super(),this.destination=ye,this.source=ae}next(ye){var ae,Ee;null===(Ee=null===(ae=this.destination)||void 0===ae?void 0:ae.next)||void 0===Ee||Ee.call(ae,ye)}error(ye){var ae,Ee;null===(Ee=null===(ae=this.destination)||void 0===ae?void 0:ae.error)||void 0===Ee||Ee.call(ae,ye)}complete(){var ye,ae;null===(ae=null===(ye=this.destination)||void 0===ye?void 0:ye.complete)||void 0===ae||ae.call(ye)}_subscribe(ye){var ae,Ee;return null!==(Ee=null===(ae=this.source)||void 0===ae?void 0:ae.subscribe(ye))&&void 0!==Ee?Ee:m.Lc}}},930:(In,Et,j)=>{"use strict";j.d(Et,{Hp:()=>At,Lv:()=>Ee});var _=j(576),m=j(727),ee=j(2416),ce=j(7849),$e=j(5032);const Se=ze("C",void 0,void 0);function ze(Y,it,et){return{kind:Y,value:it,error:et}}var ye=j(3410),ae=j(2806);class Ee extends m.w0{constructor(it){super(),this.isStopped=!1,it?(this.destination=it,(0,m.Nn)(it)&&it.add(this)):this.destination=_t}static create(it,et,Pt){return new At(it,et,Pt)}next(it){this.isStopped?de(function Me(Y){return ze("N",Y,void 0)}(it),this):this._next(it)}error(it){this.isStopped?de(function _e(Y){return ze("E",void 0,Y)}(it),this):(this.isStopped=!0,this._error(it))}complete(){this.isStopped?de(Se,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(it){this.destination.next(it)}_error(it){try{this.destination.error(it)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ke=Function.prototype.bind;function We(Y,it){return Ke.call(Y,it)}class ct{constructor(it){this.partialObserver=it}next(it){const{partialObserver:et}=this;if(et.next)try{et.next(it)}catch(Pt){xe(Pt)}}error(it){const{partialObserver:et}=this;if(et.error)try{et.error(it)}catch(Pt){xe(Pt)}else xe(it)}complete(){const{partialObserver:it}=this;if(it.complete)try{it.complete()}catch(et){xe(et)}}}class At extends Ee{constructor(it,et,Pt){let Ue;if(super(),(0,_.m)(it)||!it)Ue={next:null!=it?it:void 0,error:null!=et?et:void 0,complete:null!=Pt?Pt:void 0};else{let ke;this&&ee.v.useDeprecatedNextContext?(ke=Object.create(it),ke.unsubscribe=()=>this.unsubscribe(),Ue={next:it.next&&We(it.next,ke),error:it.error&&We(it.error,ke),complete:it.complete&&We(it.complete,ke)}):Ue=it}this.destination=new ct(Ue)}}function xe(Y){ee.v.useDeprecatedSynchronousErrorHandling?(0,ae.O)(Y):(0,ce.h)(Y)}function de(Y,it){const{onStoppedNotification:et}=ee.v;et&&ye.z.setTimeout(()=>et(Y,it))}const _t={closed:!0,next:$e.Z,error:function Re(Y){throw Y},complete:$e.Z}},727:(In,Et,j)=>{"use strict";j.d(Et,{Lc:()=>Se,w0:()=>$e,Nn:()=>_e});var _=j(576);const ee=(0,j(3888).d)(ze=>function(ae){ze(this),this.message=ae?`${ae.length} errors occurred during unsubscription:\n${ae.map((Ee,Ke)=>`${Ke+1}) ${Ee.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ae});var ce=j(8737);class $e{constructor(ye){this.initialTeardown=ye,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ye;if(!this.closed){this.closed=!0;const{_parentage:ae}=this;if(ae)if(this._parentage=null,Array.isArray(ae))for(const We of ae)We.remove(this);else ae.remove(this);const{initialTeardown:Ee}=this;if((0,_.m)(Ee))try{Ee()}catch(We){ye=We instanceof ee?We.errors:[We]}const{_finalizers:Ke}=this;if(Ke){this._finalizers=null;for(const We of Ke)try{Me(We)}catch(ct){ye=null!=ye?ye:[],ct instanceof ee?ye=[...ye,...ct.errors]:ye.push(ct)}}if(ye)throw new ee(ye)}}add(ye){var ae;if(ye&&ye!==this)if(this.closed)Me(ye);else{if(ye instanceof $e){if(ye.closed||ye._hasParent(this))return;ye._addParent(this)}(this._finalizers=null!==(ae=this._finalizers)&&void 0!==ae?ae:[]).push(ye)}}_hasParent(ye){const{_parentage:ae}=this;return ae===ye||Array.isArray(ae)&&ae.includes(ye)}_addParent(ye){const{_parentage:ae}=this;this._parentage=Array.isArray(ae)?(ae.push(ye),ae):ae?[ae,ye]:ye}_removeParent(ye){const{_parentage:ae}=this;ae===ye?this._parentage=null:Array.isArray(ae)&&(0,ce.P)(ae,ye)}remove(ye){const{_finalizers:ae}=this;ae&&(0,ce.P)(ae,ye),ye instanceof $e&&ye._removeParent(this)}}$e.EMPTY=(()=>{const ze=new $e;return ze.closed=!0,ze})();const Se=$e.EMPTY;function _e(ze){return ze instanceof $e||ze&&"closed"in ze&&(0,_.m)(ze.remove)&&(0,_.m)(ze.add)&&(0,_.m)(ze.unsubscribe)}function Me(ze){(0,_.m)(ze)?ze():ze.unsubscribe()}},2416:(In,Et,j)=>{"use strict";j.d(Et,{v:()=>_});const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9808:(In,Et,j)=>{"use strict";j.d(Et,{n:()=>m});var _=j(6805);function m(ee,ce){const $e="object"==typeof ce;return new Promise((Se,_e)=>{let ze,Me=!1;ee.subscribe({next:ye=>{ze=ye,Me=!0},error:_e,complete:()=>{Me?Se(ze):$e?Se(ce.defaultValue):_e(new _.K)}})})}},7272:(In,Et,j)=>{"use strict";j.d(Et,{z:()=>$e});var _=j(8189),ee=j(7669),ce=j(8996);function $e(...Se){return function m(){return(0,_.J)(1)}()((0,ce.D)(Se,(0,ee.yG)(Se)))}},515:(In,Et,j)=>{"use strict";j.d(Et,{E:()=>m});const m=new(j(9751).y)($e=>$e.complete())},8996:(In,Et,j)=>{"use strict";j.d(Et,{D:()=>it});var _=j(8421),m=j(5363),ee=j(9468),Se=j(9751),Me=j(2202),ze=j(576),ye=j(9672);function Ee(et,Pt){if(!et)throw new Error("Iterable cannot be null");return new Se.y(Ue=>{(0,ye.f)(Ue,Pt,()=>{const ke=et[Symbol.asyncIterator]();(0,ye.f)(Ue,Pt,()=>{ke.next().then(Ne=>{Ne.done?Ue.complete():Ue.next(Ne.value)})},0,!0)})})}var Ke=j(3670),We=j(8239),ct=j(1144),At=j(6495),xe=j(2206),Re=j(4532),de=j(3260);function it(et,Pt){return Pt?function Y(et,Pt){if(null!=et){if((0,Ke.c)(et))return function ce(et,Pt){return(0,_.Xf)(et).pipe((0,ee.R)(Pt),(0,m.Q)(Pt))}(et,Pt);if((0,ct.z)(et))return function _e(et,Pt){return new Se.y(Ue=>{let ke=0;return Pt.schedule(function(){ke===et.length?Ue.complete():(Ue.next(et[ke++]),Ue.closed||this.schedule())})})}(et,Pt);if((0,We.t)(et))return function $e(et,Pt){return(0,_.Xf)(et).pipe((0,ee.R)(Pt),(0,m.Q)(Pt))}(et,Pt);if((0,xe.D)(et))return Ee(et,Pt);if((0,At.T)(et))return function ae(et,Pt){return new Se.y(Ue=>{let ke;return(0,ye.f)(Ue,Pt,()=>{ke=et[Me.h](),(0,ye.f)(Ue,Pt,()=>{let Ne,De;try{({value:Ne,done:De}=ke.next())}catch(je){return void Ue.error(je)}De?Ue.complete():Ue.next(Ne)},0,!0)}),()=>(0,ze.m)(null==ke?void 0:ke.return)&&ke.return()})}(et,Pt);if((0,de.L)(et))return function _t(et,Pt){return Ee((0,de.Q)(et),Pt)}(et,Pt)}throw(0,Re.z)(et)}(et,Pt):(0,_.Xf)(et)}},8421:(In,Et,j)=>{"use strict";j.d(Et,{Xf:()=>Ke});var _=j(655),m=j(1144),ee=j(8239),ce=j(9751),$e=j(3670),Se=j(2206),_e=j(4532),Me=j(6495),ze=j(3260),ye=j(576),ae=j(7849),Ee=j(8822);function Ke(Y){if(Y instanceof ce.y)return Y;if(null!=Y){if((0,$e.c)(Y))return function We(Y){return new ce.y(it=>{const et=Y[Ee.L]();if((0,ye.m)(et.subscribe))return et.subscribe(it);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Y);if((0,m.z)(Y))return function ct(Y){return new ce.y(it=>{for(let et=0;et<Y.length&&!it.closed;et++)it.next(Y[et]);it.complete()})}(Y);if((0,ee.t)(Y))return function At(Y){return new ce.y(it=>{Y.then(et=>{it.closed||(it.next(et),it.complete())},et=>it.error(et)).then(null,ae.h)})}(Y);if((0,Se.D)(Y))return Re(Y);if((0,Me.T)(Y))return function xe(Y){return new ce.y(it=>{for(const et of Y)if(it.next(et),it.closed)return;it.complete()})}(Y);if((0,ze.L)(Y))return function de(Y){return Re((0,ze.Q)(Y))}(Y)}throw(0,_e.z)(Y)}function Re(Y){return new ce.y(it=>{(function _t(Y,it){var et,Pt,Ue,ke;return(0,_.mG)(this,void 0,void 0,function*(){try{for(et=(0,_.KL)(Y);!(Pt=yield et.next()).done;)if(it.next(Pt.value),it.closed)return}catch(Ne){Ue={error:Ne}}finally{try{Pt&&!Pt.done&&(ke=et.return)&&(yield ke.call(et))}finally{if(Ue)throw Ue.error}}it.complete()})})(Y,it).catch(et=>it.error(et))})}},6451:(In,Et,j)=>{"use strict";j.d(Et,{T:()=>Se});var _=j(8189),m=j(8421),ee=j(515),ce=j(7669),$e=j(8996);function Se(..._e){const Me=(0,ce.yG)(_e),ze=(0,ce._6)(_e,1/0),ye=_e;return ye.length?1===ye.length?(0,m.Xf)(ye[0]):(0,_.J)(ze)((0,$e.D)(ye,Me)):ee.E}},9646:(In,Et,j)=>{"use strict";j.d(Et,{of:()=>ee});var _=j(7669),m=j(8996);function ee(...ce){const $e=(0,_.yG)(ce);return(0,m.D)(ce,$e)}},5403:(In,Et,j)=>{"use strict";j.d(Et,{x:()=>m});var _=j(930);function m(ce,$e,Se,_e,Me){return new ee(ce,$e,Se,_e,Me)}class ee extends _.Lv{constructor($e,Se,_e,Me,ze,ye){super($e),this.onFinalize=ze,this.shouldUnsubscribe=ye,this._next=Se?function(ae){try{Se(ae)}catch(Ee){$e.error(Ee)}}:super._next,this._error=Me?function(ae){try{Me(ae)}catch(Ee){$e.error(Ee)}finally{this.unsubscribe()}}:super._error,this._complete=_e?function(){try{_e()}catch(ae){$e.error(ae)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var $e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Se}=this;super.unsubscribe(),!Se&&(null===($e=this.onFinalize)||void 0===$e||$e.call(this))}}}},4351:(In,Et,j)=>{"use strict";j.d(Et,{b:()=>ee});var _=j(5577),m=j(576);function ee(ce,$e){return(0,m.m)($e)?(0,_.z)(ce,$e,1):(0,_.z)(ce,1)}},6590:(In,Et,j)=>{"use strict";j.d(Et,{d:()=>ee});var _=j(4482),m=j(5403);function ee(ce){return(0,_.e)(($e,Se)=>{let _e=!1;$e.subscribe((0,m.x)(Se,Me=>{_e=!0,Se.next(Me)},()=>{_e||Se.next(ce),Se.complete()}))})}},1884:(In,Et,j)=>{"use strict";j.d(Et,{x:()=>ce});var _=j(4671),m=j(4482),ee=j(5403);function ce(Se,_e=_.y){return Se=null!=Se?Se:$e,(0,m.e)((Me,ze)=>{let ye,ae=!0;Me.subscribe((0,ee.x)(ze,Ee=>{const Ke=_e(Ee);(ae||!Se(ye,Ke))&&(ae=!1,ye=Ke,ze.next(Ee))}))})}function $e(Se,_e){return Se===_e}},9300:(In,Et,j)=>{"use strict";j.d(Et,{h:()=>ee});var _=j(4482),m=j(5403);function ee(ce,$e){return(0,_.e)((Se,_e)=>{let Me=0;Se.subscribe((0,m.x)(_e,ze=>ce.call($e,ze,Me++)&&_e.next(ze)))})}},590:(In,Et,j)=>{"use strict";j.d(Et,{P:()=>_e});var _=j(6805),m=j(9300),ee=j(5698),ce=j(6590),$e=j(8068),Se=j(4671);function _e(Me,ze){const ye=arguments.length>=2;return ae=>ae.pipe(Me?(0,m.h)((Ee,Ke)=>Me(Ee,Ke,ae)):Se.y,(0,ee.q)(1),ye?(0,ce.d)(ze):(0,$e.T)(()=>new _.K))}},4004:(In,Et,j)=>{"use strict";j.d(Et,{U:()=>ee});var _=j(4482),m=j(5403);function ee(ce,$e){return(0,_.e)((Se,_e)=>{let Me=0;Se.subscribe((0,m.x)(_e,ze=>{_e.next(ce.call($e,ze,Me++))}))})}},8189:(In,Et,j)=>{"use strict";j.d(Et,{J:()=>ee});var _=j(5577),m=j(4671);function ee(ce=1/0){return(0,_.z)(m.y,ce)}},5577:(In,Et,j)=>{"use strict";j.d(Et,{z:()=>Me});var _=j(4004),m=j(8421),ee=j(4482),ce=j(9672),$e=j(5403),_e=j(576);function Me(ze,ye,ae=1/0){return(0,_e.m)(ye)?Me((Ee,Ke)=>(0,_.U)((We,ct)=>ye(Ee,We,Ke,ct))((0,m.Xf)(ze(Ee,Ke))),ae):("number"==typeof ye&&(ae=ye),(0,ee.e)((Ee,Ke)=>function Se(ze,ye,ae,Ee,Ke,We,ct,At){const xe=[];let Re=0,de=0,_t=!1;const Y=()=>{_t&&!xe.length&&!Re&&ye.complete()},it=Pt=>Re<Ee?et(Pt):xe.push(Pt),et=Pt=>{We&&ye.next(Pt),Re++;let Ue=!1;(0,m.Xf)(ae(Pt,de++)).subscribe((0,$e.x)(ye,ke=>{null==Ke||Ke(ke),We?it(ke):ye.next(ke)},()=>{Ue=!0},void 0,()=>{if(Ue)try{for(Re--;xe.length&&Re<Ee;){const ke=xe.shift();ct?(0,ce.f)(ye,ct,()=>et(ke)):et(ke)}Y()}catch(ke){ye.error(ke)}}))};return ze.subscribe((0,$e.x)(ye,it,()=>{_t=!0,Y()})),()=>{null==At||At()}}(Ee,Ke,ze,ae)))}},5363:(In,Et,j)=>{"use strict";j.d(Et,{Q:()=>ce});var _=j(9672),m=j(4482),ee=j(5403);function ce($e,Se=0){return(0,m.e)((_e,Me)=>{_e.subscribe((0,ee.x)(Me,ze=>(0,_.f)(Me,$e,()=>Me.next(ze),Se),()=>(0,_.f)(Me,$e,()=>Me.complete(),Se),ze=>(0,_.f)(Me,$e,()=>Me.error(ze),Se)))})}},5026:(In,Et,j)=>{"use strict";j.d(Et,{R:()=>ce});var _=j(4482),m=j(5403);function ce($e,Se){return(0,_.e)(function ee($e,Se,_e,Me,ze){return(ye,ae)=>{let Ee=_e,Ke=Se,We=0;ye.subscribe((0,m.x)(ae,ct=>{const At=We++;Ke=Ee?$e(Ke,ct,At):(Ee=!0,ct),Me&&ae.next(Ke)},ze&&(()=>{Ee&&ae.next(Ke),ae.complete()})))}}($e,Se,arguments.length>=2,!0))}},3099:(In,Et,j)=>{"use strict";j.d(Et,{B:()=>$e});var _=j(8421),m=j(7579),ee=j(930),ce=j(4482);function $e(_e={}){const{connector:Me=(()=>new m.x),resetOnError:ze=!0,resetOnComplete:ye=!0,resetOnRefCountZero:ae=!0}=_e;return Ee=>{let Ke,We,ct,At=0,xe=!1,Re=!1;const de=()=>{null==We||We.unsubscribe(),We=void 0},_t=()=>{de(),Ke=ct=void 0,xe=Re=!1},Y=()=>{const it=Ke;_t(),null==it||it.unsubscribe()};return(0,ce.e)((it,et)=>{At++,!Re&&!xe&&de();const Pt=ct=null!=ct?ct:Me();et.add(()=>{At--,0===At&&!Re&&!xe&&(We=Se(Y,ae))}),Pt.subscribe(et),!Ke&&At>0&&(Ke=new ee.Hp({next:Ue=>Pt.next(Ue),error:Ue=>{Re=!0,de(),We=Se(_t,ze,Ue),Pt.error(Ue)},complete:()=>{xe=!0,de(),We=Se(_t,ye),Pt.complete()}}),(0,_.Xf)(it).subscribe(Ke))})(Ee)}}function Se(_e,Me,...ze){if(!0===Me)return void _e();if(!1===Me)return;const ye=new ee.Hp({next:()=>{ye.unsubscribe(),_e()}});return Me(...ze).subscribe(ye)}},8675:(In,Et,j)=>{"use strict";j.d(Et,{O:()=>ce});var _=j(7272),m=j(7669),ee=j(4482);function ce(...$e){const Se=(0,m.yG)($e);return(0,ee.e)((_e,Me)=>{(Se?(0,_.z)($e,_e,Se):(0,_.z)($e,_e)).subscribe(Me)})}},9468:(In,Et,j)=>{"use strict";j.d(Et,{R:()=>m});var _=j(4482);function m(ee,ce=0){return(0,_.e)(($e,Se)=>{Se.add(ee.schedule(()=>$e.subscribe(Se),ce))})}},3900:(In,Et,j)=>{"use strict";j.d(Et,{w:()=>ce});var _=j(8421),m=j(4482),ee=j(5403);function ce($e,Se){return(0,m.e)((_e,Me)=>{let ze=null,ye=0,ae=!1;const Ee=()=>ae&&!ze&&Me.complete();_e.subscribe((0,ee.x)(Me,Ke=>{null==ze||ze.unsubscribe();let We=0;const ct=ye++;(0,_.Xf)($e(Ke,ct)).subscribe(ze=(0,ee.x)(Me,At=>Me.next(Se?Se(Ke,At,ct,We++):At),()=>{ze=null,Ee()}))},()=>{ae=!0,Ee()}))})}},5698:(In,Et,j)=>{"use strict";j.d(Et,{q:()=>ce});var _=j(515),m=j(4482),ee=j(5403);function ce($e){return $e<=0?()=>_.E:(0,m.e)((Se,_e)=>{let Me=0;Se.subscribe((0,ee.x)(_e,ze=>{++Me<=$e&&(_e.next(ze),$e<=Me&&_e.complete())}))})}},8505:(In,Et,j)=>{"use strict";j.d(Et,{b:()=>$e});var _=j(576),m=j(4482),ee=j(5403),ce=j(4671);function $e(Se,_e,Me){const ze=(0,_.m)(Se)||_e||Me?{next:Se,error:_e,complete:Me}:Se;return ze?(0,m.e)((ye,ae)=>{var Ee;null===(Ee=ze.subscribe)||void 0===Ee||Ee.call(ze);let Ke=!0;ye.subscribe((0,ee.x)(ae,We=>{var ct;null===(ct=ze.next)||void 0===ct||ct.call(ze,We),ae.next(We)},()=>{var We;Ke=!1,null===(We=ze.complete)||void 0===We||We.call(ze),ae.complete()},We=>{var ct;Ke=!1,null===(ct=ze.error)||void 0===ct||ct.call(ze,We),ae.error(We)},()=>{var We,ct;Ke&&(null===(We=ze.unsubscribe)||void 0===We||We.call(ze)),null===(ct=ze.finalize)||void 0===ct||ct.call(ze)}))}):ce.y}},8068:(In,Et,j)=>{"use strict";j.d(Et,{T:()=>ce});var _=j(6805),m=j(4482),ee=j(5403);function ce(Se=$e){return(0,m.e)((_e,Me)=>{let ze=!1;_e.subscribe((0,ee.x)(Me,ye=>{ze=!0,Me.next(ye)},()=>ze?Me.complete():Me.error(Se())))})}function $e(){return new _.K}},4408:(In,Et,j)=>{"use strict";j.d(Et,{o:()=>$e});var _=j(727);class m extends _.w0{constructor(_e,Me){super()}schedule(_e,Me=0){return this}}const ee={setInterval(Se,_e,...Me){const{delegate:ze}=ee;return null!=ze&&ze.setInterval?ze.setInterval(Se,_e,...Me):setInterval(Se,_e,...Me)},clearInterval(Se){const{delegate:_e}=ee;return((null==_e?void 0:_e.clearInterval)||clearInterval)(Se)},delegate:void 0};var ce=j(8737);class $e extends m{constructor(_e,Me){super(_e,Me),this.scheduler=_e,this.work=Me,this.pending=!1}schedule(_e,Me=0){var ze;if(this.closed)return this;this.state=_e;const ye=this.id,ae=this.scheduler;return null!=ye&&(this.id=this.recycleAsyncId(ae,ye,Me)),this.pending=!0,this.delay=Me,this.id=null!==(ze=this.id)&&void 0!==ze?ze:this.requestAsyncId(ae,this.id,Me),this}requestAsyncId(_e,Me,ze=0){return ee.setInterval(_e.flush.bind(_e,this),ze)}recycleAsyncId(_e,Me,ze=0){if(null!=ze&&this.delay===ze&&!1===this.pending)return Me;null!=Me&&ee.clearInterval(Me)}execute(_e,Me){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ze=this._execute(_e,Me);if(ze)return ze;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(_e,Me){let ye,ze=!1;try{this.work(_e)}catch(ae){ze=!0,ye=ae||new Error("Scheduled action threw falsy error")}if(ze)return this.unsubscribe(),ye}unsubscribe(){if(!this.closed){const{id:_e,scheduler:Me}=this,{actions:ze}=Me;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ce.P)(ze,this),null!=_e&&(this.id=this.recycleAsyncId(Me,_e,null)),this.delay=null,super.unsubscribe()}}}},7565:(In,Et,j)=>{"use strict";j.d(Et,{v:()=>ee});var _=j(6063);class m{constructor($e,Se=m.now){this.schedulerActionCtor=$e,this.now=Se}schedule($e,Se=0,_e){return new this.schedulerActionCtor(this,$e).schedule(_e,Se)}}m.now=_.l.now;class ee extends m{constructor($e,Se=m.now){super($e,Se),this.actions=[],this._active=!1}flush($e){const{actions:Se}=this;if(this._active)return void Se.push($e);let _e;this._active=!0;do{if(_e=$e.execute($e.state,$e.delay))break}while($e=Se.shift());if(this._active=!1,_e){for(;$e=Se.shift();)$e.unsubscribe();throw _e}}}},4986:(In,Et,j)=>{"use strict";j.d(Et,{z:()=>ee});var _=j(4408);const ee=new(j(7565).v)(_.o)},6063:(In,Et,j)=>{"use strict";j.d(Et,{l:()=>_});const _={now:()=>(_.delegate||Date).now(),delegate:void 0}},3410:(In,Et,j)=>{"use strict";j.d(Et,{z:()=>_});const _={setTimeout(m,ee,...ce){const{delegate:$e}=_;return null!=$e&&$e.setTimeout?$e.setTimeout(m,ee,...ce):setTimeout(m,ee,...ce)},clearTimeout(m){const{delegate:ee}=_;return((null==ee?void 0:ee.clearTimeout)||clearTimeout)(m)},delegate:void 0}},2202:(In,Et,j)=>{"use strict";j.d(Et,{h:()=>m});const m=function _(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(In,Et,j)=>{"use strict";j.d(Et,{L:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(In,Et,j)=>{"use strict";j.d(Et,{K:()=>m});const m=(0,j(3888).d)(ee=>function(){ee(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(In,Et,j)=>{"use strict";j.d(Et,{_6:()=>Se,jO:()=>ce,yG:()=>$e});var _=j(576);function ee(_e){return _e[_e.length-1]}function ce(_e){return(0,_.m)(ee(_e))?_e.pop():void 0}function $e(_e){return function m(_e){return _e&&(0,_.m)(_e.schedule)}(ee(_e))?_e.pop():void 0}function Se(_e,Me){return"number"==typeof ee(_e)?_e.pop():Me}},4742:(In,Et,j)=>{"use strict";j.d(Et,{D:()=>$e});const{isArray:_}=Array,{getPrototypeOf:m,prototype:ee,keys:ce}=Object;function $e(_e){if(1===_e.length){const Me=_e[0];if(_(Me))return{args:Me,keys:null};if(function Se(_e){return _e&&"object"==typeof _e&&m(_e)===ee}(Me)){const ze=ce(Me);return{args:ze.map(ye=>Me[ye]),keys:ze}}}return{args:_e,keys:null}}},8737:(In,Et,j)=>{"use strict";function _(m,ee){if(m){const ce=m.indexOf(ee);0<=ce&&m.splice(ce,1)}}j.d(Et,{P:()=>_})},3888:(In,Et,j)=>{"use strict";function _(m){const ce=m($e=>{Error.call($e),$e.stack=(new Error).stack});return ce.prototype=Object.create(Error.prototype),ce.prototype.constructor=ce,ce}j.d(Et,{d:()=>_})},1810:(In,Et,j)=>{"use strict";function _(m,ee){return m.reduce((ce,$e,Se)=>(ce[$e]=ee[Se],ce),{})}j.d(Et,{n:()=>_})},2806:(In,Et,j)=>{"use strict";j.d(Et,{O:()=>ce,x:()=>ee});var _=j(2416);let m=null;function ee($e){if(_.v.useDeprecatedSynchronousErrorHandling){const Se=!m;if(Se&&(m={errorThrown:!1,error:null}),$e(),Se){const{errorThrown:_e,error:Me}=m;if(m=null,_e)throw Me}}else $e()}function ce($e){_.v.useDeprecatedSynchronousErrorHandling&&m&&(m.errorThrown=!0,m.error=$e)}},9672:(In,Et,j)=>{"use strict";function _(m,ee,ce,$e=0,Se=!1){const _e=ee.schedule(function(){ce(),Se?m.add(this.schedule(null,$e)):this.unsubscribe()},$e);if(m.add(_e),!Se)return _e}j.d(Et,{f:()=>_})},4671:(In,Et,j)=>{"use strict";function _(m){return m}j.d(Et,{y:()=>_})},1144:(In,Et,j)=>{"use strict";j.d(Et,{z:()=>_});const _=m=>m&&"number"==typeof m.length&&"function"!=typeof m},2206:(In,Et,j)=>{"use strict";j.d(Et,{D:()=>m});var _=j(576);function m(ee){return Symbol.asyncIterator&&(0,_.m)(null==ee?void 0:ee[Symbol.asyncIterator])}},576:(In,Et,j)=>{"use strict";function _(m){return"function"==typeof m}j.d(Et,{m:()=>_})},3670:(In,Et,j)=>{"use strict";j.d(Et,{c:()=>ee});var _=j(8822),m=j(576);function ee(ce){return(0,m.m)(ce[_.L])}},6495:(In,Et,j)=>{"use strict";j.d(Et,{T:()=>ee});var _=j(2202),m=j(576);function ee(ce){return(0,m.m)(null==ce?void 0:ce[_.h])}},8239:(In,Et,j)=>{"use strict";j.d(Et,{t:()=>m});var _=j(576);function m(ee){return(0,_.m)(null==ee?void 0:ee.then)}},3260:(In,Et,j)=>{"use strict";j.d(Et,{L:()=>ce,Q:()=>ee});var _=j(655),m=j(576);function ee($e){return(0,_.FC)(this,arguments,function*(){const _e=$e.getReader();try{for(;;){const{value:Me,done:ze}=yield(0,_.qq)(_e.read());if(ze)return yield(0,_.qq)(void 0);yield yield(0,_.qq)(Me)}}finally{_e.releaseLock()}})}function ce($e){return(0,m.m)(null==$e?void 0:$e.getReader)}},4482:(In,Et,j)=>{"use strict";j.d(Et,{A:()=>m,e:()=>ee});var _=j(576);function m(ce){return(0,_.m)(null==ce?void 0:ce.lift)}function ee(ce){return $e=>{if(m($e))return $e.lift(function(Se){try{return ce(Se,this)}catch(_e){this.error(_e)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(In,Et,j)=>{"use strict";j.d(Et,{Z:()=>ce});var _=j(4004);const{isArray:m}=Array;function ce($e){return(0,_.U)(Se=>function ee($e,Se){return m(Se)?$e(...Se):$e(Se)}($e,Se))}},5032:(In,Et,j)=>{"use strict";function _(){}j.d(Et,{Z:()=>_})},9635:(In,Et,j)=>{"use strict";j.d(Et,{U:()=>ee,z:()=>m});var _=j(4671);function m(...ce){return ee(ce)}function ee(ce){return 0===ce.length?_.y:1===ce.length?ce[0]:function(Se){return ce.reduce((_e,Me)=>Me(_e),Se)}}},7849:(In,Et,j)=>{"use strict";j.d(Et,{h:()=>ee});var _=j(2416),m=j(3410);function ee(ce){m.z.setTimeout(()=>{const{onUnhandledError:$e}=_.v;if(!$e)throw ce;$e(ce)})}},4532:(In,Et,j)=>{"use strict";function _(m){return new TypeError(`You provided ${null!==m&&"object"==typeof m?"an invalid object":`'${m}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}j.d(Et,{z:()=>_})},863:(In,Et,j)=>{var _={"./ion-accordion_2.entry.js":[9654,8592,9654],"./ion-action-sheet.entry.js":[3648,8592,3648],"./ion-alert.entry.js":[1118,8592,1118],"./ion-app_8.entry.js":[53,8592,53],"./ion-avatar_3.entry.js":[4753,4753],"./ion-back-button.entry.js":[2073,8592,2073],"./ion-backdrop.entry.js":[8939,8939],"./ion-breadcrumb_2.entry.js":[7544,8592,7544],"./ion-button_2.entry.js":[5652,5652],"./ion-card_5.entry.js":[388,388],"./ion-checkbox.entry.js":[9922,8592,9922],"./ion-chip.entry.js":[657,657],"./ion-col_3.entry.js":[9824,9824],"./ion-datetime-button.entry.js":[9230,7879,9230],"./ion-datetime_3.entry.js":[4959,7879,8592,4959],"./ion-fab_3.entry.js":[3510,8592,5836],"./ion-img.entry.js":[1033,1033],"./ion-infinite-scroll_2.entry.js":[8034,8592,8034],"./ion-input.entry.js":[1217,8592,1217],"./ion-item-option_3.entry.js":[2933,8592,2933],"./ion-item_8.entry.js":[4711,8592,4711],"./ion-loading.entry.js":[9434,9434],"./ion-menu_3.entry.js":[8136,8592,8136],"./ion-modal.entry.js":[2349,8592,2349],"./ion-nav_2.entry.js":[5349,8592,5349],"./ion-picker-column-internal.entry.js":[7602,8592,7602],"./ion-picker-internal.entry.js":[9016,9016],"./ion-popover.entry.js":[3804,3804],"./ion-progress-bar.entry.js":[4174,4174],"./ion-radio_2.entry.js":[4432,8592,4432],"./ion-range.entry.js":[1709,8592,1709],"./ion-refresher_2.entry.js":[3326,8592,3326],"./ion-reorder_2.entry.js":[3583,8592,3583],"./ion-ripple-effect.entry.js":[9958,9958],"./ion-route_4.entry.js":[4330,4330],"./ion-searchbar.entry.js":[8628,8592,8628],"./ion-segment_2.entry.js":[9325,8592,9325],"./ion-select_3.entry.js":[2773,8592,2773],"./ion-spinner.entry.js":[4908,8592,4908],"./ion-split-pane.entry.js":[9536,9536],"./ion-tab-bar_2.entry.js":[438,8592,438],"./ion-tab_2.entry.js":[1536,1536],"./ion-text.entry.js":[4376,4376],"./ion-textarea.entry.js":[6560,8592,6560],"./ion-toast.entry.js":[6120,6120],"./ion-toggle.entry.js":[5168,8592,5168]};function m(ee){if(!j.o(_,ee))return Promise.resolve().then(()=>{var Se=new Error("Cannot find module '"+ee+"'");throw Se.code="MODULE_NOT_FOUND",Se});var ce=_[ee],$e=ce[0];return Promise.all(ce.slice(1).map(j.e)).then(()=>j($e))}m.keys=()=>Object.keys(_),m.id=863,In.exports=m},5899:(In,Et,j)=>{var _={"./pwa-action-sheet.entry.js":[2987,2987],"./pwa-camera-modal-instance.entry.js":[3527,3527],"./pwa-camera-modal.entry.js":[5836,7839],"./pwa-camera.entry.js":[7943,7943],"./pwa-toast.entry.js":[3822,3822]};function m(ee){if(!j.o(_,ee))return Promise.resolve().then(()=>{var Se=new Error("Cannot find module '"+ee+"'");throw Se.code="MODULE_NOT_FOUND",Se});var ce=_[ee],$e=ce[0];return j.e(ce[1]).then(()=>j($e))}m.keys=()=>Object.keys(_),m.id=5899,In.exports=m},655:(In,Et,j)=>{"use strict";function ce(ht,Mt){var yt={};for(var Fe in ht)Object.prototype.hasOwnProperty.call(ht,Fe)&&Mt.indexOf(Fe)<0&&(yt[Fe]=ht[Fe]);if(null!=ht&&"function"==typeof Object.getOwnPropertySymbols){var Ve=0;for(Fe=Object.getOwnPropertySymbols(ht);Ve<Fe.length;Ve++)Mt.indexOf(Fe[Ve])<0&&Object.prototype.propertyIsEnumerable.call(ht,Fe[Ve])&&(yt[Fe[Ve]]=ht[Fe[Ve]])}return yt}function $e(ht,Mt,yt,Fe){var ft,Ve=arguments.length,Be=Ve<3?Mt:null===Fe?Fe=Object.getOwnPropertyDescriptor(Mt,yt):Fe;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Be=Reflect.decorate(ht,Mt,yt,Fe);else for(var wt=ht.length-1;wt>=0;wt--)(ft=ht[wt])&&(Be=(Ve<3?ft(Be):Ve>3?ft(Mt,yt,Be):ft(Mt,yt))||Be);return Ve>3&&Be&&Object.defineProperty(Mt,yt,Be),Be}function Ee(ht,Mt,yt,Fe){return new(yt||(yt=Promise))(function(Be,ft){function wt(Dn){try{zt(Fe.next(Dn))}catch(kt){ft(kt)}}function nn(Dn){try{zt(Fe.throw(Dn))}catch(kt){ft(kt)}}function zt(Dn){Dn.done?Be(Dn.value):function Ve(Be){return Be instanceof yt?Be:new yt(function(ft){ft(Be)})}(Dn.value).then(wt,nn)}zt((Fe=Fe.apply(ht,Mt||[])).next())})}function Y(ht){return this instanceof Y?(this.v=ht,this):new Y(ht)}function it(ht,Mt,yt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ve,Fe=yt.apply(ht,Mt||[]),Be=[];return Ve={},ft("next"),ft("throw"),ft("return"),Ve[Symbol.asyncIterator]=function(){return this},Ve;function ft(Ae){Fe[Ae]&&(Ve[Ae]=function(St){return new Promise(function(gn,On){Be.push([Ae,St,gn,On])>1||wt(Ae,St)})})}function wt(Ae,St){try{!function nn(Ae){Ae.value instanceof Y?Promise.resolve(Ae.value.v).then(zt,Dn):kt(Be[0][2],Ae)}(Fe[Ae](St))}catch(gn){kt(Be[0][3],gn)}}function zt(Ae){wt("next",Ae)}function Dn(Ae){wt("throw",Ae)}function kt(Ae,St){Ae(St),Be.shift(),Be.length&&wt(Be[0][0],Be[0][1])}}function Pt(ht){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var yt,Mt=ht[Symbol.asyncIterator];return Mt?Mt.call(ht):(ht=function At(ht){var Mt="function"==typeof Symbol&&Symbol.iterator,yt=Mt&&ht[Mt],Fe=0;if(yt)return yt.call(ht);if(ht&&"number"==typeof ht.length)return{next:function(){return ht&&Fe>=ht.length&&(ht=void 0),{value:ht&&ht[Fe++],done:!ht}}};throw new TypeError(Mt?"Object is not iterable.":"Symbol.iterator is not defined.")}(ht),yt={},Fe("next"),Fe("throw"),Fe("return"),yt[Symbol.asyncIterator]=function(){return this},yt);function Fe(Be){yt[Be]=ht[Be]&&function(ft){return new Promise(function(wt,nn){!function Ve(Be,ft,wt,nn){Promise.resolve(nn).then(function(zt){Be({value:zt,done:wt})},ft)}(wt,nn,(ft=ht[Be](ft)).done,ft.value)})}}}j.d(Et,{FC:()=>it,KL:()=>Pt,_T:()=>ce,gn:()=>$e,mG:()=>Ee,qq:()=>Y})},6895:(In,Et,j)=>{"use strict";j.d(Et,{Do:()=>de,EM:()=>ho,HT:()=>ce,JF:()=>No,K0:()=>Se,Mx:()=>Vi,O5:()=>be,PM:()=>co,S$:()=>At,V_:()=>ze,Ye:()=>_t,b0:()=>Re,bD:()=>ha,ez:()=>ds,q:()=>ee,sg:()=>Li,tP:()=>er,uU:()=>_i,w_:()=>$e});var _=j(4650);let m=null;function ee(){return m}function ce($){m||(m=$)}class $e{}const Se=new _.OlP("DocumentToken");let _e=(()=>{class ${historyGo(H){throw new Error("Not implemented")}}return $.\u0275fac=function(H){return new(H||$)},$.\u0275prov=_.Yz7({token:$,factory:function(){return function Me(){return(0,_.LFG)(ye)}()},providedIn:"platform"}),$})();const ze=new _.OlP("Location Initialized");let ye=(()=>{class $ extends _e{constructor(H){super(),this._doc=H,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ee().getBaseHref(this._doc)}onPopState(H){const ie=ee().getGlobalEventTarget(this._doc,"window");return ie.addEventListener("popstate",H,!1),()=>ie.removeEventListener("popstate",H)}onHashChange(H){const ie=ee().getGlobalEventTarget(this._doc,"window");return ie.addEventListener("hashchange",H,!1),()=>ie.removeEventListener("hashchange",H)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(H){this._location.pathname=H}pushState(H,ie,Le){ae()?this._history.pushState(H,ie,Le):this._location.hash=Le}replaceState(H,ie,Le){ae()?this._history.replaceState(H,ie,Le):this._location.hash=Le}forward(){this._history.forward()}back(){this._history.back()}historyGo(H=0){this._history.go(H)}getState(){return this._history.state}}return $.\u0275fac=function(H){return new(H||$)(_.LFG(Se))},$.\u0275prov=_.Yz7({token:$,factory:function(){return function Ee(){return new ye((0,_.LFG)(Se))}()},providedIn:"platform"}),$})();function ae(){return!!window.history.pushState}function Ke($,Q){if(0==$.length)return Q;if(0==Q.length)return $;let H=0;return $.endsWith("/")&&H++,Q.startsWith("/")&&H++,2==H?$+Q.substring(1):1==H?$+Q:$+"/"+Q}function We($){const Q=$.match(/#|\?|$/),H=Q&&Q.index||$.length;return $.slice(0,H-("/"===$[H-1]?1:0))+$.slice(H)}function ct($){return $&&"?"!==$[0]?"?"+$:$}let At=(()=>{class ${historyGo(H){throw new Error("Not implemented")}}return $.\u0275fac=function(H){return new(H||$)},$.\u0275prov=_.Yz7({token:$,factory:function(){return(0,_.f3M)(Re)},providedIn:"root"}),$})();const xe=new _.OlP("appBaseHref");let Re=(()=>{class $ extends At{constructor(H,ie){var Le,Zt,Jt;super(),this._platformLocation=H,this._removeListenerFns=[],this._baseHref=null!==(Le=null!==(Zt=null!=ie?ie:this._platformLocation.getBaseHrefFromDOM())&&void 0!==Zt?Zt:null===(Jt=(0,_.f3M)(Se).location)||void 0===Jt?void 0:Jt.origin)&&void 0!==Le?Le:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(H){this._removeListenerFns.push(this._platformLocation.onPopState(H),this._platformLocation.onHashChange(H))}getBaseHref(){return this._baseHref}prepareExternalUrl(H){return Ke(this._baseHref,H)}path(H=!1){const ie=this._platformLocation.pathname+ct(this._platformLocation.search),Le=this._platformLocation.hash;return Le&&H?`${ie}${Le}`:ie}pushState(H,ie,Le,Zt){const Jt=this.prepareExternalUrl(Le+ct(Zt));this._platformLocation.pushState(H,ie,Jt)}replaceState(H,ie,Le,Zt){const Jt=this.prepareExternalUrl(Le+ct(Zt));this._platformLocation.replaceState(H,ie,Jt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(H=0){var ie,Le;null===(ie=(Le=this._platformLocation).historyGo)||void 0===ie||ie.call(Le,H)}}return $.\u0275fac=function(H){return new(H||$)(_.LFG(_e),_.LFG(xe,8))},$.\u0275prov=_.Yz7({token:$,factory:$.\u0275fac,providedIn:"root"}),$})(),de=(()=>{class $ extends At{constructor(H,ie){super(),this._platformLocation=H,this._baseHref="",this._removeListenerFns=[],null!=ie&&(this._baseHref=ie)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(H){this._removeListenerFns.push(this._platformLocation.onPopState(H),this._platformLocation.onHashChange(H))}getBaseHref(){return this._baseHref}path(H=!1){let ie=this._platformLocation.hash;return null==ie&&(ie="#"),ie.length>0?ie.substring(1):ie}prepareExternalUrl(H){const ie=Ke(this._baseHref,H);return ie.length>0?"#"+ie:ie}pushState(H,ie,Le,Zt){let Jt=this.prepareExternalUrl(Le+ct(Zt));0==Jt.length&&(Jt=this._platformLocation.pathname),this._platformLocation.pushState(H,ie,Jt)}replaceState(H,ie,Le,Zt){let Jt=this.prepareExternalUrl(Le+ct(Zt));0==Jt.length&&(Jt=this._platformLocation.pathname),this._platformLocation.replaceState(H,ie,Jt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(H=0){var ie,Le;null===(ie=(Le=this._platformLocation).historyGo)||void 0===ie||ie.call(Le,H)}}return $.\u0275fac=function(H){return new(H||$)(_.LFG(_e),_.LFG(xe,8))},$.\u0275prov=_.Yz7({token:$,factory:$.\u0275fac}),$})(),_t=(()=>{class ${constructor(H){this._subject=new _.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=H;const ie=this._locationStrategy.getBaseHref();this._basePath=function Pt($){if(new RegExp("^(https?:)?//").test($)){const[,H]=$.split(/\/\/[^\/]+/);return H}return $}(We(et(ie))),this._locationStrategy.onPopState(Le=>{this._subject.emit({url:this.path(!0),pop:!0,state:Le.state,type:Le.type})})}ngOnDestroy(){var H;null===(H=this._urlChangeSubscription)||void 0===H||H.unsubscribe(),this._urlChangeListeners=[]}path(H=!1){return this.normalize(this._locationStrategy.path(H))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(H,ie=""){return this.path()==this.normalize(H+ct(ie))}normalize(H){return $.stripTrailingSlash(function it($,Q){if(!$||!Q.startsWith($))return Q;const H=Q.substring($.length);return""===H||["/",";","?","#"].includes(H[0])?H:Q}(this._basePath,et(H)))}prepareExternalUrl(H){return H&&"/"!==H[0]&&(H="/"+H),this._locationStrategy.prepareExternalUrl(H)}go(H,ie="",Le=null){this._locationStrategy.pushState(Le,"",H,ie),this._notifyUrlChangeListeners(this.prepareExternalUrl(H+ct(ie)),Le)}replaceState(H,ie="",Le=null){this._locationStrategy.replaceState(Le,"",H,ie),this._notifyUrlChangeListeners(this.prepareExternalUrl(H+ct(ie)),Le)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(H=0){var ie,Le;null===(ie=(Le=this._locationStrategy).historyGo)||void 0===ie||ie.call(Le,H)}onUrlChange(H){return this._urlChangeListeners.push(H),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ie=>{this._notifyUrlChangeListeners(ie.url,ie.state)})),()=>{const ie=this._urlChangeListeners.indexOf(H);var Le;this._urlChangeListeners.splice(ie,1),0===this._urlChangeListeners.length&&(null===(Le=this._urlChangeSubscription)||void 0===Le||Le.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(H="",ie){this._urlChangeListeners.forEach(Le=>Le(H,ie))}subscribe(H,ie,Le){return this._subject.subscribe({next:H,error:ie,complete:Le})}}return $.normalizeQueryParams=ct,$.joinWithSlash=Ke,$.stripTrailingSlash=We,$.\u0275fac=function(H){return new(H||$)(_.LFG(At))},$.\u0275prov=_.Yz7({token:$,factory:function(){return function Y(){return new _t((0,_.LFG)(At))}()},providedIn:"root"}),$})();function et($){return $.replace(/\/index.html$/,"")}var De=(()=>((De=De||{})[De.Format=0]="Format",De[De.Standalone=1]="Standalone",De))(),je=(()=>((je=je||{})[je.Narrow=0]="Narrow",je[je.Abbreviated=1]="Abbreviated",je[je.Wide=2]="Wide",je[je.Short=3]="Short",je))(),gt=(()=>((gt=gt||{})[gt.Short=0]="Short",gt[gt.Medium=1]="Medium",gt[gt.Long=2]="Long",gt[gt.Full=3]="Full",gt))(),Dt=(()=>((Dt=Dt||{})[Dt.Decimal=0]="Decimal",Dt[Dt.Group=1]="Group",Dt[Dt.List=2]="List",Dt[Dt.PercentSign=3]="PercentSign",Dt[Dt.PlusSign=4]="PlusSign",Dt[Dt.MinusSign=5]="MinusSign",Dt[Dt.Exponential=6]="Exponential",Dt[Dt.SuperscriptingExponent=7]="SuperscriptingExponent",Dt[Dt.PerMille=8]="PerMille",Dt[Dt.Infinity=9]="Infinity",Dt[Dt.NaN=10]="NaN",Dt[Dt.TimeSeparator=11]="TimeSeparator",Dt[Dt.CurrencyDecimal=12]="CurrencyDecimal",Dt[Dt.CurrencyGroup=13]="CurrencyGroup",Dt))();function nn($,Q){return tr((0,_.cg1)($)[_.wAp.DateFormat],Q)}function zt($,Q){return tr((0,_.cg1)($)[_.wAp.TimeFormat],Q)}function Dn($,Q){return tr((0,_.cg1)($)[_.wAp.DateTimeFormat],Q)}function kt($,Q){const H=(0,_.cg1)($),ie=H[_.wAp.NumberSymbols][Q];if(typeof ie>"u"){if(Q===Dt.CurrencyDecimal)return H[_.wAp.NumberSymbols][Dt.Decimal];if(Q===Dt.CurrencyGroup)return H[_.wAp.NumberSymbols][Dt.Group]}return ie}function cn($){if(!$[_.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${$[_.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function tr($,Q){for(let H=Q;H>-1;H--)if(typeof $[H]<"u")return $[H];throw new Error("Locale data API: locale data undefined")}function bn($){const[Q,H]=$.split(":");return{hours:+Q,minutes:+H}}const di=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,wi={},Gn=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var qn=(()=>((qn=qn||{})[qn.Short=0]="Short",qn[qn.ShortGMT=1]="ShortGMT",qn[qn.Long=2]="Long",qn[qn.Extended=3]="Extended",qn))(),ln=(()=>((ln=ln||{})[ln.FullYear=0]="FullYear",ln[ln.Month=1]="Month",ln[ln.Date=2]="Date",ln[ln.Hours=3]="Hours",ln[ln.Minutes=4]="Minutes",ln[ln.Seconds=5]="Seconds",ln[ln.FractionalSeconds=6]="FractionalSeconds",ln[ln.Day=7]="Day",ln))(),yn=(()=>((yn=yn||{})[yn.DayPeriods=0]="DayPeriods",yn[yn.Days=1]="Days",yn[yn.Months=2]="Months",yn[yn.Eras=3]="Eras",yn))();function on($,Q,H,ie){let Le=function ut($){if(ot($))return $;if("number"==typeof $&&!isNaN($))return new Date($);if("string"==typeof $){if($=$.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test($)){const[Le,Zt=1,Jt=1]=$.split("-").map(Vn=>+Vn);return Jr(Le,Zt-1,Jt)}const H=parseFloat($);if(!isNaN($-H))return new Date(H);let ie;if(ie=$.match(di))return function un($){const Q=new Date(0);let H=0,ie=0;const Le=$[8]?Q.setUTCFullYear:Q.setFullYear,Zt=$[8]?Q.setUTCHours:Q.setHours;$[9]&&(H=Number($[9]+$[10]),ie=Number($[9]+$[11])),Le.call(Q,Number($[1]),Number($[2])-1,Number($[3]));const Jt=Number($[4]||0)-H,Vn=Number($[5]||0)-ie,Ar=Number($[6]||0),Kr=Math.floor(1e3*parseFloat("0."+($[7]||0)));return Zt.call(Q,Jt,Vn,Ar,Kr),Q}(ie)}const Q=new Date($);if(!ot(Q))throw new Error(`Unable to convert "${$}" into a date`);return Q}($);Q=Dr(H,Q)||Q;let Vn,Jt=[];for(;Q;){if(Vn=Gn.exec(Q),!Vn){Jt.push(Q);break}{Jt=Jt.concat(Vn.slice(1));const Br=Jt.pop();if(!Br)break;Q=Br}}let Ar=Le.getTimezoneOffset();ie&&(Ar=Ie(ie,Ar),Le=function Ot($,Q,H){const ie=H?-1:1,Le=$.getTimezoneOffset();return function qe($,Q){return($=new Date($.getTime())).setMinutes($.getMinutes()+Q),$}($,ie*(Ie(Q,Le)-Le))}(Le,ie,!0));let Kr="";return Jt.forEach(Br=>{const wr=function we($){if(Yt[$])return Yt[$];let Q;switch($){case"G":case"GG":case"GGG":Q=ur(yn.Eras,je.Abbreviated);break;case"GGGG":Q=ur(yn.Eras,je.Wide);break;case"GGGGG":Q=ur(yn.Eras,je.Narrow);break;case"y":Q=Lr(ln.FullYear,1,0,!1,!0);break;case"yy":Q=Lr(ln.FullYear,2,0,!0,!0);break;case"yyy":Q=Lr(ln.FullYear,3,0,!1,!0);break;case"yyyy":Q=Lr(ln.FullYear,4,0,!1,!0);break;case"Y":Q=en(1);break;case"YY":Q=en(2,!0);break;case"YYY":Q=en(3);break;case"YYYY":Q=en(4);break;case"M":case"L":Q=Lr(ln.Month,1,1);break;case"MM":case"LL":Q=Lr(ln.Month,2,1);break;case"MMM":Q=ur(yn.Months,je.Abbreviated);break;case"MMMM":Q=ur(yn.Months,je.Wide);break;case"MMMMM":Q=ur(yn.Months,je.Narrow);break;case"LLL":Q=ur(yn.Months,je.Abbreviated,De.Standalone);break;case"LLLL":Q=ur(yn.Months,je.Wide,De.Standalone);break;case"LLLLL":Q=ur(yn.Months,je.Narrow,De.Standalone);break;case"w":Q=nt(1);break;case"ww":Q=nt(2);break;case"W":Q=nt(1,!0);break;case"d":Q=Lr(ln.Date,1);break;case"dd":Q=Lr(ln.Date,2);break;case"c":case"cc":Q=Lr(ln.Day,1);break;case"ccc":Q=ur(yn.Days,je.Abbreviated,De.Standalone);break;case"cccc":Q=ur(yn.Days,je.Wide,De.Standalone);break;case"ccccc":Q=ur(yn.Days,je.Narrow,De.Standalone);break;case"cccccc":Q=ur(yn.Days,je.Short,De.Standalone);break;case"E":case"EE":case"EEE":Q=ur(yn.Days,je.Abbreviated);break;case"EEEE":Q=ur(yn.Days,je.Wide);break;case"EEEEE":Q=ur(yn.Days,je.Narrow);break;case"EEEEEE":Q=ur(yn.Days,je.Short);break;case"a":case"aa":case"aaa":Q=ur(yn.DayPeriods,je.Abbreviated);break;case"aaaa":Q=ur(yn.DayPeriods,je.Wide);break;case"aaaaa":Q=ur(yn.DayPeriods,je.Narrow);break;case"b":case"bb":case"bbb":Q=ur(yn.DayPeriods,je.Abbreviated,De.Standalone,!0);break;case"bbbb":Q=ur(yn.DayPeriods,je.Wide,De.Standalone,!0);break;case"bbbbb":Q=ur(yn.DayPeriods,je.Narrow,De.Standalone,!0);break;case"B":case"BB":case"BBB":Q=ur(yn.DayPeriods,je.Abbreviated,De.Format,!0);break;case"BBBB":Q=ur(yn.DayPeriods,je.Wide,De.Format,!0);break;case"BBBBB":Q=ur(yn.DayPeriods,je.Narrow,De.Format,!0);break;case"h":Q=Lr(ln.Hours,1,-12);break;case"hh":Q=Lr(ln.Hours,2,-12);break;case"H":Q=Lr(ln.Hours,1);break;case"HH":Q=Lr(ln.Hours,2);break;case"m":Q=Lr(ln.Minutes,1);break;case"mm":Q=Lr(ln.Minutes,2);break;case"s":Q=Lr(ln.Seconds,1);break;case"ss":Q=Lr(ln.Seconds,2);break;case"S":Q=Lr(ln.FractionalSeconds,1);break;case"SS":Q=Lr(ln.FractionalSeconds,2);break;case"SSS":Q=Lr(ln.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":Q=yr(qn.Short);break;case"ZZZZZ":Q=yr(qn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":Q=yr(qn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":Q=yr(qn.Long);break;default:return null}return Yt[$]=Q,Q}(Br);Kr+=wr?wr(Le,H,Ar):"''"===Br?"'":Br.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Kr}function Jr($,Q,H){const ie=new Date(0);return ie.setFullYear($,Q,H),ie.setHours(0,0,0),ie}function Dr($,Q){const H=function Mt($){return(0,_.cg1)($)[_.wAp.LocaleId]}($);if(wi[H]=wi[H]||{},wi[H][Q])return wi[H][Q];let ie="";switch(Q){case"shortDate":ie=nn($,gt.Short);break;case"mediumDate":ie=nn($,gt.Medium);break;case"longDate":ie=nn($,gt.Long);break;case"fullDate":ie=nn($,gt.Full);break;case"shortTime":ie=zt($,gt.Short);break;case"mediumTime":ie=zt($,gt.Medium);break;case"longTime":ie=zt($,gt.Long);break;case"fullTime":ie=zt($,gt.Full);break;case"short":const Le=Dr($,"shortTime"),Zt=Dr($,"shortDate");ie=Qr(Dn($,gt.Short),[Le,Zt]);break;case"medium":const Jt=Dr($,"mediumTime"),Vn=Dr($,"mediumDate");ie=Qr(Dn($,gt.Medium),[Jt,Vn]);break;case"long":const Ar=Dr($,"longTime"),Kr=Dr($,"longDate");ie=Qr(Dn($,gt.Long),[Ar,Kr]);break;case"full":const Br=Dr($,"fullTime"),wr=Dr($,"fullDate");ie=Qr(Dn($,gt.Full),[Br,wr])}return ie&&(wi[H][Q]=ie),ie}function Qr($,Q){return Q&&($=$.replace(/\{([^}]+)}/g,function(H,ie){return null!=Q&&ie in Q?Q[ie]:H})),$}function zr($,Q,H="-",ie,Le){let Zt="";($<0||Le&&$<=0)&&(Le?$=1-$:($=-$,Zt=H));let Jt=String($);for(;Jt.length<Q;)Jt="0"+Jt;return ie&&(Jt=Jt.slice(Jt.length-Q)),Zt+Jt}function Lr($,Q,H=0,ie=!1,Le=!1){return function(Zt,Jt){let Vn=function gi($,Q){switch($){case ln.FullYear:return Q.getFullYear();case ln.Month:return Q.getMonth();case ln.Date:return Q.getDate();case ln.Hours:return Q.getHours();case ln.Minutes:return Q.getMinutes();case ln.Seconds:return Q.getSeconds();case ln.FractionalSeconds:return Q.getMilliseconds();case ln.Day:return Q.getDay();default:throw new Error(`Unknown DateType value "${$}".`)}}($,Zt);if((H>0||Vn>-H)&&(Vn+=H),$===ln.Hours)0===Vn&&-12===H&&(Vn=12);else if($===ln.FractionalSeconds)return function pi($,Q){return zr($,3).substring(0,Q)}(Vn,Q);const Ar=kt(Jt,Dt.MinusSign);return zr(Vn,Q,Ar,ie,Le)}}function ur($,Q,H=De.Format,ie=!1){return function(Le,Zt){return function lr($,Q,H,ie,Le,Zt){switch(H){case yn.Months:return function Ve($,Q,H){const ie=(0,_.cg1)($),Zt=tr([ie[_.wAp.MonthsFormat],ie[_.wAp.MonthsStandalone]],Q);return tr(Zt,H)}(Q,Le,ie)[$.getMonth()];case yn.Days:return function Fe($,Q,H){const ie=(0,_.cg1)($),Zt=tr([ie[_.wAp.DaysFormat],ie[_.wAp.DaysStandalone]],Q);return tr(Zt,H)}(Q,Le,ie)[$.getDay()];case yn.DayPeriods:const Jt=$.getHours(),Vn=$.getMinutes();if(Zt){const Kr=function Cn($){const Q=(0,_.cg1)($);return cn(Q),(Q[_.wAp.ExtraData][2]||[]).map(ie=>"string"==typeof ie?bn(ie):[bn(ie[0]),bn(ie[1])])}(Q),Br=function hr($,Q,H){const ie=(0,_.cg1)($);cn(ie);const Zt=tr([ie[_.wAp.ExtraData][0],ie[_.wAp.ExtraData][1]],Q)||[];return tr(Zt,H)||[]}(Q,Le,ie),wr=Kr.findIndex(Ri=>{if(Array.isArray(Ri)){const[bi,Bi]=Ri,Wo=Jt>=bi.hours&&Vn>=bi.minutes,yo=Jt<Bi.hours||Jt===Bi.hours&&Vn<Bi.minutes;if(bi.hours<Bi.hours){if(Wo&&yo)return!0}else if(Wo||yo)return!0}else if(Ri.hours===Jt&&Ri.minutes===Vn)return!0;return!1});if(-1!==wr)return Br[wr]}return function yt($,Q,H){const ie=(0,_.cg1)($),Zt=tr([ie[_.wAp.DayPeriodsFormat],ie[_.wAp.DayPeriodsStandalone]],Q);return tr(Zt,H)}(Q,Le,ie)[Jt<12?0:1];case yn.Eras:return function Be($,Q){return tr((0,_.cg1)($)[_.wAp.Eras],Q)}(Q,ie)[$.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${H}`)}}(Le,Zt,$,Q,H,ie)}}function yr($){return function(Q,H,ie){const Le=-1*ie,Zt=kt(H,Dt.MinusSign),Jt=Le>0?Math.floor(Le/60):Math.ceil(Le/60);switch($){case qn.Short:return(Le>=0?"+":"")+zr(Jt,2,Zt)+zr(Math.abs(Le%60),2,Zt);case qn.ShortGMT:return"GMT"+(Le>=0?"+":"")+zr(Jt,1,Zt);case qn.Long:return"GMT"+(Le>=0?"+":"")+zr(Jt,2,Zt)+":"+zr(Math.abs(Le%60),2,Zt);case qn.Extended:return 0===ie?"Z":(Le>=0?"+":"")+zr(Jt,2,Zt)+":"+zr(Math.abs(Le%60),2,Zt);default:throw new Error(`Unknown zone width "${$}"`)}}}const Ai=0,mr=4;function Ze($){return Jr($.getFullYear(),$.getMonth(),$.getDate()+(mr-$.getDay()))}function nt($,Q=!1){return function(H,ie){let Le;if(Q){const Zt=new Date(H.getFullYear(),H.getMonth(),1).getDay()-1,Jt=H.getDate();Le=1+Math.floor((Jt+Zt)/7)}else{const Zt=Ze(H),Jt=function Kt($){const Q=Jr($,Ai,1).getDay();return Jr($,0,1+(Q<=mr?mr:mr+7)-Q)}(Zt.getFullYear()),Vn=Zt.getTime()-Jt.getTime();Le=1+Math.round(Vn/6048e5)}return zr(Le,$,kt(ie,Dt.MinusSign))}}function en($,Q=!1){return function(H,ie){return zr(Ze(H).getFullYear(),$,kt(ie,Dt.MinusSign),Q)}}const Yt={};function Ie($,Q){$=$.replace(/:/g,"");const H=Date.parse("Jan 01, 1970 00:00:00 "+$)/6e4;return isNaN(H)?Q:H}function ot($){return $ instanceof Date&&!isNaN($.valueOf())}function Vi($,Q){Q=encodeURIComponent(Q);for(const H of $.split(";")){const ie=H.indexOf("="),[Le,Zt]=-1==ie?[H,""]:[H.slice(0,ie),H.slice(ie+1)];if(Le.trim()===Q)return decodeURIComponent(Zt)}return null}class Ci{constructor(Q,H,ie,Le){this.$implicit=Q,this.ngForOf=H,this.index=ie,this.count=Le}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Li=(()=>{class ${set ngForOf(H){this._ngForOf=H,this._ngForOfDirty=!0}set ngForTrackBy(H){this._trackByFn=H}get ngForTrackBy(){return this._trackByFn}constructor(H,ie,Le){this._viewContainer=H,this._template=ie,this._differs=Le,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(H){H&&(this._template=H)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const H=this._ngForOf;!this._differ&&H&&(this._differ=this._differs.find(H).create(this.ngForTrackBy))}if(this._differ){const H=this._differ.diff(this._ngForOf);H&&this._applyChanges(H)}}_applyChanges(H){const ie=this._viewContainer;H.forEachOperation((Le,Zt,Jt)=>{if(null==Le.previousIndex)ie.createEmbeddedView(this._template,new Ci(Le.item,this._ngForOf,-1,-1),null===Jt?void 0:Jt);else if(null==Jt)ie.remove(null===Zt?void 0:Zt);else if(null!==Zt){const Vn=ie.get(Zt);ie.move(Vn,Jt),Ur(Vn,Le)}});for(let Le=0,Zt=ie.length;Le<Zt;Le++){const Vn=ie.get(Le).context;Vn.index=Le,Vn.count=Zt,Vn.ngForOf=this._ngForOf}H.forEachIdentityChange(Le=>{Ur(ie.get(Le.currentIndex),Le)})}static ngTemplateContextGuard(H,ie){return!0}}return $.\u0275fac=function(H){return new(H||$)(_.Y36(_.s_b),_.Y36(_.Rgc),_.Y36(_.ZZ4))},$.\u0275dir=_.lG2({type:$,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),$})();function Ur($,Q){$.context.$implicit=Q.item}let be=(()=>{class ${constructor(H,ie){this._viewContainer=H,this._context=new Ye,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ie}set ngIf(H){this._context.$implicit=this._context.ngIf=H,this._updateView()}set ngIfThen(H){me("ngIfThen",H),this._thenTemplateRef=H,this._thenViewRef=null,this._updateView()}set ngIfElse(H){me("ngIfElse",H),this._elseTemplateRef=H,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(H,ie){return!0}}return $.\u0275fac=function(H){return new(H||$)(_.Y36(_.s_b),_.Y36(_.Rgc))},$.\u0275dir=_.lG2({type:$,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),$})();class Ye{constructor(){this.$implicit=null,this.ngIf=null}}function me($,Q){if(Q&&!Q.createEmbeddedView)throw new Error(`${$} must be a TemplateRef, but received '${(0,_.AaK)(Q)}'.`)}let er=(()=>{class ${constructor(H){this._viewContainerRef=H,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(H){if(H.ngTemplateOutlet||H.ngTemplateOutletInjector){const ie=this._viewContainerRef;if(this._viewRef&&ie.remove(ie.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:Le,ngTemplateOutletContext:Zt,ngTemplateOutletInjector:Jt}=this;this._viewRef=ie.createEmbeddedView(Le,Zt,Jt?{injector:Jt}:void 0)}else this._viewRef=null}else this._viewRef&&H.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return $.\u0275fac=function(H){return new(H||$)(_.Y36(_.s_b))},$.\u0275dir=_.lG2({type:$,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[_.TTD]}),$})();const vs=new _.OlP("DATE_PIPE_DEFAULT_TIMEZONE"),Oo=new _.OlP("DATE_PIPE_DEFAULT_OPTIONS");let _i=(()=>{class ${constructor(H,ie,Le){this.locale=H,this.defaultTimezone=ie,this.defaultOptions=Le}transform(H,ie,Le,Zt){if(null==H||""===H||H!=H)return null;try{var Jt,Vn,Ar,Kr,Br;const wr=null!==(Jt=null!=ie?ie:null===(Vn=this.defaultOptions)||void 0===Vn?void 0:Vn.dateFormat)&&void 0!==Jt?Jt:"mediumDate",Ri=null!==(Ar=null!==(Kr=null!=Le?Le:null===(Br=this.defaultOptions)||void 0===Br?void 0:Br.timezone)&&void 0!==Kr?Kr:this.defaultTimezone)&&void 0!==Ar?Ar:void 0;return on(H,wr,Zt||this.locale,Ri)}catch(wr){throw function Wr($,Q){return new _.vHH(2100,!1)}()}}}return $.\u0275fac=function(H){return new(H||$)(_.Y36(_.soG,16),_.Y36(vs,24),_.Y36(Oo,24))},$.\u0275pipe=_.Yjl({name:"date",type:$,pure:!0,standalone:!0}),$})(),ds=(()=>{class ${}return $.\u0275fac=function(H){return new(H||$)},$.\u0275mod=_.oAB({type:$}),$.\u0275inj=_.cJS({}),$})();const ha="browser",Ws="server";function co($){return $===Ws}let ho=(()=>{class ${}return $.\u0275prov=(0,_.Yz7)({token:$,providedIn:"root",factory:()=>new fa((0,_.LFG)(Se),window)}),$})();class fa{constructor(Q,H){this.document=Q,this.window=H,this.offset=()=>[0,0]}setOffset(Q){this.offset=Array.isArray(Q)?()=>Q:Q}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(Q){this.supportsScrolling()&&this.window.scrollTo(Q[0],Q[1])}scrollToAnchor(Q){if(!this.supportsScrolling())return;const H=function _s($,Q){const H=$.getElementById(Q)||$.getElementsByName(Q)[0];if(H)return H;if("function"==typeof $.createTreeWalker&&$.body&&($.body.createShadowRoot||$.body.attachShadow)){const ie=$.createTreeWalker($.body,NodeFilter.SHOW_ELEMENT);let Le=ie.currentNode;for(;Le;){const Zt=Le.shadowRoot;if(Zt){const Jt=Zt.getElementById(Q)||Zt.querySelector(`[name="${Q}"]`);if(Jt)return Jt}Le=ie.nextNode()}}return null}(this.document,Q);H&&(this.scrollToElement(H),H.focus())}setHistoryScrollRestoration(Q){if(this.supportScrollRestoration()){const H=this.window.history;H&&H.scrollRestoration&&(H.scrollRestoration=Q)}}scrollToElement(Q){const H=Q.getBoundingClientRect(),ie=H.left+this.window.pageXOffset,Le=H.top+this.window.pageYOffset,Zt=this.offset();this.window.scrollTo(ie-Zt[0],Le-Zt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const Q=fo(this.window.history)||fo(Object.getPrototypeOf(this.window.history));return!(!Q||!Q.writable&&!Q.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function fo($){return Object.getOwnPropertyDescriptor($,"scrollRestoration")}class No{}},529:(In,Et,j)=>{"use strict";j.d(Et,{UA:()=>Dt,eN:()=>Mt,h_:()=>Jr});var _=j(6895),m=j(4650),ee=j(9646),ce=j(9751),$e=j(4351),Se=j(9300),_e=j(4004);class Me{}class ze{}class ye{constructor(Ze){this.normalizedNames=new Map,this.lazyUpdate=null,Ze?this.lazyInit="string"==typeof Ze?()=>{this.headers=new Map,Ze.split("\n").forEach(nt=>{const en=nt.indexOf(":");if(en>0){const Yt=nt.slice(0,en),we=Yt.toLowerCase(),Ie=nt.slice(en+1).trim();this.maybeSetNormalizedName(Yt,we),this.headers.has(we)?this.headers.get(we).push(Ie):this.headers.set(we,[Ie])}})}:()=>{this.headers=new Map,Object.entries(Ze).forEach(([nt,en])=>{let Yt;if(Yt="string"==typeof en?[en]:"number"==typeof en?[en.toString()]:en.map(we=>we.toString()),Yt.length>0){const we=nt.toLowerCase();this.headers.set(we,Yt),this.maybeSetNormalizedName(nt,we)}})}:this.headers=new Map}has(Ze){return this.init(),this.headers.has(Ze.toLowerCase())}get(Ze){this.init();const nt=this.headers.get(Ze.toLowerCase());return nt&&nt.length>0?nt[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(Ze){return this.init(),this.headers.get(Ze.toLowerCase())||null}append(Ze,nt){return this.clone({name:Ze,value:nt,op:"a"})}set(Ze,nt){return this.clone({name:Ze,value:nt,op:"s"})}delete(Ze,nt){return this.clone({name:Ze,value:nt,op:"d"})}maybeSetNormalizedName(Ze,nt){this.normalizedNames.has(nt)||this.normalizedNames.set(nt,Ze)}init(){this.lazyInit&&(this.lazyInit instanceof ye?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(Ze=>this.applyUpdate(Ze)),this.lazyUpdate=null))}copyFrom(Ze){Ze.init(),Array.from(Ze.headers.keys()).forEach(nt=>{this.headers.set(nt,Ze.headers.get(nt)),this.normalizedNames.set(nt,Ze.normalizedNames.get(nt))})}clone(Ze){const nt=new ye;return nt.lazyInit=this.lazyInit&&this.lazyInit instanceof ye?this.lazyInit:this,nt.lazyUpdate=(this.lazyUpdate||[]).concat([Ze]),nt}applyUpdate(Ze){const nt=Ze.name.toLowerCase();switch(Ze.op){case"a":case"s":let en=Ze.value;if("string"==typeof en&&(en=[en]),0===en.length)return;this.maybeSetNormalizedName(Ze.name,nt);const Yt=("a"===Ze.op?this.headers.get(nt):void 0)||[];Yt.push(...en),this.headers.set(nt,Yt);break;case"d":const we=Ze.value;if(we){let Ie=this.headers.get(nt);if(!Ie)return;Ie=Ie.filter(qe=>-1===we.indexOf(qe)),0===Ie.length?(this.headers.delete(nt),this.normalizedNames.delete(nt)):this.headers.set(nt,Ie)}else this.headers.delete(nt),this.normalizedNames.delete(nt)}}forEach(Ze){this.init(),Array.from(this.normalizedNames.keys()).forEach(nt=>Ze(this.normalizedNames.get(nt),this.headers.get(nt)))}}class Ee{encodeKey(Ze){return At(Ze)}encodeValue(Ze){return At(Ze)}decodeKey(Ze){return decodeURIComponent(Ze)}decodeValue(Ze){return decodeURIComponent(Ze)}}const We=/%(\d[a-f0-9])/gi,ct={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function At(Kt){return encodeURIComponent(Kt).replace(We,(Ze,nt)=>{var en;return null!==(en=ct[nt])&&void 0!==en?en:Ze})}function xe(Kt){return`${Kt}`}class Re{constructor(Ze={}){if(this.updates=null,this.cloneFrom=null,this.encoder=Ze.encoder||new Ee,Ze.fromString){if(Ze.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Ke(Kt,Ze){const nt=new Map;return Kt.length>0&&Kt.replace(/^\?/,"").split("&").forEach(Yt=>{const we=Yt.indexOf("="),[Ie,qe]=-1==we?[Ze.decodeKey(Yt),""]:[Ze.decodeKey(Yt.slice(0,we)),Ze.decodeValue(Yt.slice(we+1))],Ot=nt.get(Ie)||[];Ot.push(qe),nt.set(Ie,Ot)}),nt}(Ze.fromString,this.encoder)}else Ze.fromObject?(this.map=new Map,Object.keys(Ze.fromObject).forEach(nt=>{const en=Ze.fromObject[nt],Yt=Array.isArray(en)?en.map(xe):[xe(en)];this.map.set(nt,Yt)})):this.map=null}has(Ze){return this.init(),this.map.has(Ze)}get(Ze){this.init();const nt=this.map.get(Ze);return nt?nt[0]:null}getAll(Ze){return this.init(),this.map.get(Ze)||null}keys(){return this.init(),Array.from(this.map.keys())}append(Ze,nt){return this.clone({param:Ze,value:nt,op:"a"})}appendAll(Ze){const nt=[];return Object.keys(Ze).forEach(en=>{const Yt=Ze[en];Array.isArray(Yt)?Yt.forEach(we=>{nt.push({param:en,value:we,op:"a"})}):nt.push({param:en,value:Yt,op:"a"})}),this.clone(nt)}set(Ze,nt){return this.clone({param:Ze,value:nt,op:"s"})}delete(Ze,nt){return this.clone({param:Ze,value:nt,op:"d"})}toString(){return this.init(),this.keys().map(Ze=>{const nt=this.encoder.encodeKey(Ze);return this.map.get(Ze).map(en=>nt+"="+this.encoder.encodeValue(en)).join("&")}).filter(Ze=>""!==Ze).join("&")}clone(Ze){const nt=new Re({encoder:this.encoder});return nt.cloneFrom=this.cloneFrom||this,nt.updates=(this.updates||[]).concat(Ze),nt}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(Ze=>this.map.set(Ze,this.cloneFrom.map.get(Ze))),this.updates.forEach(Ze=>{switch(Ze.op){case"a":case"s":const nt=("a"===Ze.op?this.map.get(Ze.param):void 0)||[];nt.push(xe(Ze.value)),this.map.set(Ze.param,nt);break;case"d":if(void 0===Ze.value){this.map.delete(Ze.param);break}{let en=this.map.get(Ze.param)||[];const Yt=en.indexOf(xe(Ze.value));-1!==Yt&&en.splice(Yt,1),en.length>0?this.map.set(Ze.param,en):this.map.delete(Ze.param)}}}),this.cloneFrom=this.updates=null)}}class _t{constructor(){this.map=new Map}set(Ze,nt){return this.map.set(Ze,nt),this}get(Ze){return this.map.has(Ze)||this.map.set(Ze,Ze.defaultValue()),this.map.get(Ze)}delete(Ze){return this.map.delete(Ze),this}has(Ze){return this.map.has(Ze)}keys(){return this.map.keys()}}function it(Kt){return typeof ArrayBuffer<"u"&&Kt instanceof ArrayBuffer}function et(Kt){return typeof Blob<"u"&&Kt instanceof Blob}function Pt(Kt){return typeof FormData<"u"&&Kt instanceof FormData}class ke{constructor(Ze,nt,en,Yt){let we;if(this.url=nt,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=Ze.toUpperCase(),function Y(Kt){switch(Kt){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Yt?(this.body=void 0!==en?en:null,we=Yt):we=en,we&&(this.reportProgress=!!we.reportProgress,this.withCredentials=!!we.withCredentials,we.responseType&&(this.responseType=we.responseType),we.headers&&(this.headers=we.headers),we.context&&(this.context=we.context),we.params&&(this.params=we.params)),this.headers||(this.headers=new ye),this.context||(this.context=new _t),this.params){const Ie=this.params.toString();if(0===Ie.length)this.urlWithParams=nt;else{const qe=nt.indexOf("?");this.urlWithParams=nt+(-1===qe?"?":qe<nt.length-1?"&":"")+Ie}}else this.params=new Re,this.urlWithParams=nt}serializeBody(){return null===this.body?null:it(this.body)||et(this.body)||Pt(this.body)||function Ue(Kt){return typeof URLSearchParams<"u"&&Kt instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Re?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Pt(this.body)?null:et(this.body)?this.body.type||null:it(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Re?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(Ze={}){var nt;const en=Ze.method||this.method,Yt=Ze.url||this.url,we=Ze.responseType||this.responseType,Ie=void 0!==Ze.body?Ze.body:this.body,qe=void 0!==Ze.withCredentials?Ze.withCredentials:this.withCredentials,Ot=void 0!==Ze.reportProgress?Ze.reportProgress:this.reportProgress;let ut=Ze.headers||this.headers,un=Ze.params||this.params;const ot=null!==(nt=Ze.context)&&void 0!==nt?nt:this.context;return void 0!==Ze.setHeaders&&(ut=Object.keys(Ze.setHeaders).reduce((Ge,ve)=>Ge.set(ve,Ze.setHeaders[ve]),ut)),Ze.setParams&&(un=Object.keys(Ze.setParams).reduce((Ge,ve)=>Ge.set(ve,Ze.setParams[ve]),un)),new ke(en,Yt,Ie,{params:un,headers:ut,context:ot,reportProgress:Ot,responseType:we,withCredentials:qe})}}var Ne=(()=>((Ne=Ne||{})[Ne.Sent=0]="Sent",Ne[Ne.UploadProgress=1]="UploadProgress",Ne[Ne.ResponseHeader=2]="ResponseHeader",Ne[Ne.DownloadProgress=3]="DownloadProgress",Ne[Ne.Response=4]="Response",Ne[Ne.User=5]="User",Ne))();class De{constructor(Ze,nt=200,en="OK"){this.headers=Ze.headers||new ye,this.status=void 0!==Ze.status?Ze.status:nt,this.statusText=Ze.statusText||en,this.url=Ze.url||null,this.ok=this.status>=200&&this.status<300}}class je extends De{constructor(Ze={}){super(Ze),this.type=Ne.ResponseHeader}clone(Ze={}){return new je({headers:Ze.headers||this.headers,status:void 0!==Ze.status?Ze.status:this.status,statusText:Ze.statusText||this.statusText,url:Ze.url||this.url||void 0})}}class gt extends De{constructor(Ze={}){super(Ze),this.type=Ne.Response,this.body=void 0!==Ze.body?Ze.body:null}clone(Ze={}){return new gt({body:void 0!==Ze.body?Ze.body:this.body,headers:Ze.headers||this.headers,status:void 0!==Ze.status?Ze.status:this.status,statusText:Ze.statusText||this.statusText,url:Ze.url||this.url||void 0})}}class Dt extends De{constructor(Ze){super(Ze,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${Ze.url||"(unknown url)"}`:`Http failure response for ${Ze.url||"(unknown url)"}: ${Ze.status} ${Ze.statusText}`,this.error=Ze.error||null}}function ht(Kt,Ze){return{body:Ze,headers:Kt.headers,context:Kt.context,observe:Kt.observe,params:Kt.params,reportProgress:Kt.reportProgress,responseType:Kt.responseType,withCredentials:Kt.withCredentials}}let Mt=(()=>{class Kt{constructor(nt){this.handler=nt}request(nt,en,Yt={}){let we;if(nt instanceof ke)we=nt;else{let Ot,ut;Ot=Yt.headers instanceof ye?Yt.headers:new ye(Yt.headers),Yt.params&&(ut=Yt.params instanceof Re?Yt.params:new Re({fromObject:Yt.params})),we=new ke(nt,en,void 0!==Yt.body?Yt.body:null,{headers:Ot,context:Yt.context,params:ut,reportProgress:Yt.reportProgress,responseType:Yt.responseType||"json",withCredentials:Yt.withCredentials})}const Ie=(0,ee.of)(we).pipe((0,$e.b)(Ot=>this.handler.handle(Ot)));if(nt instanceof ke||"events"===Yt.observe)return Ie;const qe=Ie.pipe((0,Se.h)(Ot=>Ot instanceof gt));switch(Yt.observe||"body"){case"body":switch(we.responseType){case"arraybuffer":return qe.pipe((0,_e.U)(Ot=>{if(null!==Ot.body&&!(Ot.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Ot.body}));case"blob":return qe.pipe((0,_e.U)(Ot=>{if(null!==Ot.body&&!(Ot.body instanceof Blob))throw new Error("Response is not a Blob.");return Ot.body}));case"text":return qe.pipe((0,_e.U)(Ot=>{if(null!==Ot.body&&"string"!=typeof Ot.body)throw new Error("Response is not a string.");return Ot.body}));default:return qe.pipe((0,_e.U)(Ot=>Ot.body))}case"response":return qe;default:throw new Error(`Unreachable: unhandled observe type ${Yt.observe}}`)}}delete(nt,en={}){return this.request("DELETE",nt,en)}get(nt,en={}){return this.request("GET",nt,en)}head(nt,en={}){return this.request("HEAD",nt,en)}jsonp(nt,en){return this.request("JSONP",nt,{params:(new Re).append(en,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(nt,en={}){return this.request("OPTIONS",nt,en)}patch(nt,en,Yt={}){return this.request("PATCH",nt,ht(Yt,en))}post(nt,en,Yt={}){return this.request("POST",nt,ht(Yt,en))}put(nt,en,Yt={}){return this.request("PUT",nt,ht(Yt,en))}}return Kt.\u0275fac=function(nt){return new(nt||Kt)(m.LFG(Me))},Kt.\u0275prov=m.Yz7({token:Kt,factory:Kt.\u0275fac}),Kt})();function yt(Kt,Ze){return Ze(Kt)}const ft=new m.OlP("HTTP_INTERCEPTOR_FNS");let nn=(()=>{class Kt extends Me{constructor(nt,en){super(),this.backend=nt,this.injector=en,this.chain=null}handle(nt){if(null===this.chain){const en=Array.from(new Set(this.injector.get(ft)));this.chain=en.reduceRight((Yt,we)=>function Ve(Kt,Ze,nt){return(en,Yt)=>nt.runInContext(()=>Ze(en,we=>Kt(we,Yt)))}(Yt,we,this.injector),yt)}return this.chain(nt,en=>this.backend.handle(en))}}return Kt.\u0275fac=function(nt){return new(nt||Kt)(m.LFG(ze),m.LFG(m.lqb))},Kt.\u0275prov=m.Yz7({token:Kt,factory:Kt.\u0275fac}),Kt})();const hr=/^\)\]\}',?\n/;let tr=(()=>{class Kt{constructor(nt){this.xhrFactory=nt}handle(nt){if("JSONP"===nt.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ce.y(en=>{const Yt=this.xhrFactory.build();if(Yt.open(nt.method,nt.urlWithParams),nt.withCredentials&&(Yt.withCredentials=!0),nt.headers.forEach((ve,rt)=>Yt.setRequestHeader(ve,rt.join(","))),nt.headers.has("Accept")||Yt.setRequestHeader("Accept","application/json, text/plain, */*"),!nt.headers.has("Content-Type")){const ve=nt.detectContentTypeHeader();null!==ve&&Yt.setRequestHeader("Content-Type",ve)}if(nt.responseType){const ve=nt.responseType.toLowerCase();Yt.responseType="json"!==ve?ve:"text"}const we=nt.serializeBody();let Ie=null;const qe=()=>{if(null!==Ie)return Ie;const ve=Yt.statusText||"OK",rt=new ye(Yt.getAllResponseHeaders()),Nt=function _r(Kt){return"responseURL"in Kt&&Kt.responseURL?Kt.responseURL:/^X-Request-URL:/m.test(Kt.getAllResponseHeaders())?Kt.getResponseHeader("X-Request-URL"):null}(Yt)||nt.url;return Ie=new je({headers:rt,status:Yt.status,statusText:ve,url:Nt}),Ie},Ot=()=>{let{headers:ve,status:rt,statusText:Nt,url:he}=qe(),Ce=null;204!==rt&&(Ce=typeof Yt.response>"u"?Yt.responseText:Yt.response),0===rt&&(rt=Ce?200:0);let Tt=rt>=200&&rt<300;if("json"===nt.responseType&&"string"==typeof Ce){const It=Ce;Ce=Ce.replace(hr,"");try{Ce=""!==Ce?JSON.parse(Ce):null}catch(Qt){Ce=It,Tt&&(Tt=!1,Ce={error:Qt,text:Ce})}}Tt?(en.next(new gt({body:Ce,headers:ve,status:rt,statusText:Nt,url:he||void 0})),en.complete()):en.error(new Dt({error:Ce,headers:ve,status:rt,statusText:Nt,url:he||void 0}))},ut=ve=>{const{url:rt}=qe(),Nt=new Dt({error:ve,status:Yt.status||0,statusText:Yt.statusText||"Unknown Error",url:rt||void 0});en.error(Nt)};let un=!1;const ot=ve=>{un||(en.next(qe()),un=!0);let rt={type:Ne.DownloadProgress,loaded:ve.loaded};ve.lengthComputable&&(rt.total=ve.total),"text"===nt.responseType&&Yt.responseText&&(rt.partialText=Yt.responseText),en.next(rt)},Ge=ve=>{let rt={type:Ne.UploadProgress,loaded:ve.loaded};ve.lengthComputable&&(rt.total=ve.total),en.next(rt)};return Yt.addEventListener("load",Ot),Yt.addEventListener("error",ut),Yt.addEventListener("timeout",ut),Yt.addEventListener("abort",ut),nt.reportProgress&&(Yt.addEventListener("progress",ot),null!==we&&Yt.upload&&Yt.upload.addEventListener("progress",Ge)),Yt.send(we),en.next({type:Ne.Sent}),()=>{Yt.removeEventListener("error",ut),Yt.removeEventListener("abort",ut),Yt.removeEventListener("load",Ot),Yt.removeEventListener("timeout",ut),nt.reportProgress&&(Yt.removeEventListener("progress",ot),null!==we&&Yt.upload&&Yt.upload.removeEventListener("progress",Ge)),Yt.readyState!==Yt.DONE&&Yt.abort()}})}}return Kt.\u0275fac=function(nt){return new(nt||Kt)(m.LFG(_.JF))},Kt.\u0275prov=m.Yz7({token:Kt,factory:Kt.\u0275fac}),Kt})();const bn=new m.OlP("XSRF_ENABLED"),yi=new m.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),di=new m.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class wi{}let Gn=(()=>{class Kt{constructor(nt,en,Yt){this.doc=nt,this.platform=en,this.cookieName=Yt,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const nt=this.doc.cookie||"";return nt!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,_.Mx)(nt,this.cookieName),this.lastCookieString=nt),this.lastToken}}return Kt.\u0275fac=function(nt){return new(nt||Kt)(m.LFG(_.K0),m.LFG(m.Lbi),m.LFG(yi))},Kt.\u0275prov=m.Yz7({token:Kt,factory:Kt.\u0275fac}),Kt})();function qn(Kt,Ze){const nt=Kt.url.toLowerCase();if(!(0,m.f3M)(bn)||"GET"===Kt.method||"HEAD"===Kt.method||nt.startsWith("http://")||nt.startsWith("https://"))return Ze(Kt);const en=(0,m.f3M)(wi).getToken(),Yt=(0,m.f3M)(di);return null!=en&&!Kt.headers.has(Yt)&&(Kt=Kt.clone({headers:Kt.headers.set(Yt,en)})),Ze(Kt)}function Jr(...Kt){const Ze=[Mt,tr,nn,{provide:Me,useExisting:nn},{provide:ze,useExisting:tr},{provide:ft,useValue:qn,multi:!0},{provide:bn,useValue:!0},{provide:wi,useClass:Gn}];for(const nt of Kt)Ze.push(...nt.\u0275providers);return(0,m.MR2)(Ze)}},4650:(In,Et,j)=>{"use strict";j.d(Et,{$8M:()=>eo,$WT:()=>Wn,$Z:()=>Yf,AFp:()=>UE,ALo:()=>c,AaK:()=>Me,BQk:()=>lp,CHM:()=>L,CRH:()=>vE,CZH:()=>p_,CqO:()=>lv,D6c:()=>xw,DdM:()=>i_,EJc:()=>GI,EiD:()=>Ca,EpF:()=>om,F$t:()=>Ty,F4k:()=>am,FYo:()=>Vc,FiY:()=>Ii,G48:()=>fw,Gf:()=>mE,GfV:()=>Bf,GkF:()=>_u,Gpc:()=>ae,Hsn:()=>dm,JOm:()=>Uo,JVY:()=>Pf,JZr:()=>At,KtG:()=>ne,L6k:()=>gd,LAX:()=>ka,LFG:()=>yr,LMc:()=>Mw,Lbi:()=>jI,Lck:()=>Jv,MMx:()=>ev,MR2:()=>Nu,NdJ:()=>by,OlP:()=>Ni,Oqu:()=>fg,P3R:()=>Xd,PXZ:()=>ow,Q6J:()=>Ey,QGY:()=>Cy,Qsj:()=>ih,R0b:()=>nd,RDi:()=>Lh,RIp:()=>Uh,Rgc:()=>ki,SBq:()=>ic,Sil:()=>KI,Suo:()=>yE,TTD:()=>uo,TgZ:()=>ap,X6Q:()=>hw,XFs:()=>bn,Xpm:()=>Tt,Xts:()=>Nf,Y36:()=>jc,YKP:()=>ml,YNc:()=>rm,Yjl:()=>kn,Yz7:()=>kt,Z0I:()=>On,ZZ4:()=>Z0,_Bn:()=>Dh,_UZ:()=>im,_Vd:()=>Ka,_uU:()=>bv,aQg:()=>X0,c2e:()=>HI,cJS:()=>St,cg1:()=>Mm,dDg:()=>nw,dqk:()=>Gn,eBb:()=>Of,eJc:()=>k0,ekj:()=>bm,eoX:()=>YE,f3M:()=>mr,g9A:()=>jE,h0i:()=>Xa,hij:()=>Am,iGM:()=>gE,iPO:()=>cw,ifc:()=>Ot,ip1:()=>BE,jDz:()=>Sf,kL8:()=>Pm,lG2:()=>pn,lqb:()=>Fl,lri:()=>KE,mCW:()=>Bc,n5z:()=>Zc,oAB:()=>He,oxw:()=>uv,pB0:()=>us,q3G:()=>is,q4F:()=>Pp,qLn:()=>pu,qOj:()=>mf,qZA:()=>Pd,qzn:()=>cl,rWj:()=>qE,s9C:()=>hm,sBO:()=>pw,s_b:()=>Ba,soG:()=>g_,tb:()=>XE,tp0:()=>$s,uIk:()=>yu,vHH:()=>xe,vpe:()=>Fn,wAp:()=>Fr,xi3:()=>G,xp6:()=>lh,ynx:()=>sm,z2F:()=>m_,z3N:()=>Jo,zSh:()=>jh,zs3:()=>Gu});var _=j(7579),m=j(727),ee=j(9751),ce=j(6451),$e=j(3099);function Se(n){for(let i in n)if(n[i]===Se)return i;throw Error("Could not find renamed property on target object.")}function _e(n,i){for(const o in i)i.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=i[o])}function Me(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Me).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function ze(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const ye=Se({__forward_ref__:Se});function ae(n){return n.__forward_ref__=ae,n.toString=function(){return Me(this())},n}function Ee(n){return Ke(n)?n():n}function Ke(n){return"function"==typeof n&&n.hasOwnProperty(ye)&&n.__forward_ref__===ae}function We(n){return n&&!!n.\u0275providers}const At="https://g.co/ng/security#xss";class xe extends Error{constructor(i,o){super(Re(i,o)),this.code=i}}function Re(n,i){return`NG0${Math.abs(n)}${i?": "+i.trim():""}`}function de(n){return"string"==typeof n?n:null==n?"":String(n)}function _t(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():de(n)}function Pt(n,i){throw new xe(-201,!1)}function ft(n,i){null==n&&function wt(n,i,o,d){throw new Error(`ASSERTION ERROR: ${n}`+(null==d?"":` [Expected=> ${o} ${d} ${i} <=Actual]`))}(i,n,null,"!=")}function kt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function St(n){return{providers:n.providers||[],imports:n.imports||[]}}function gn(n){return Yn(n,Cn)||Yn(n,_r)}function On(n){return null!==gn(n)}function Yn(n,i){return n.hasOwnProperty(i)?n[i]:null}function cn(n){return n&&(n.hasOwnProperty(hr)||n.hasOwnProperty(tr))?n[hr]:null}const Cn=Se({\u0275prov:Se}),hr=Se({\u0275inj:Se}),_r=Se({ngInjectableDef:Se}),tr=Se({ngInjectorDef:Se});var bn=(()=>((bn=bn||{})[bn.Default=0]="Default",bn[bn.Host=1]="Host",bn[bn.Self=2]="Self",bn[bn.SkipSelf=4]="SkipSelf",bn[bn.Optional=8]="Optional",bn))();let zn;function Cr(n){const i=zn;return zn=n,i}function di(n,i,o){const d=gn(n);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:o&bn.Optional?null:void 0!==i?i:void Pt(Me(n))}const Gn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),on={},Jr="__NG_DI_FLAG__",Dr="ngTempTokenPath",Qr="ngTokenPath",zr=/\n/gm,pi="\u0275",Lr="__source";let gi;function ur(n){const i=gi;return gi=n,i}function lr(n,i=bn.Default){if(void 0===gi)throw new xe(-203,!1);return null===gi?di(n,void 0,i):gi.get(n,i&bn.Optional?null:void 0,i)}function yr(n,i=bn.Default){return(function yi(){return zn}()||lr)(Ee(n),i)}function mr(n,i=bn.Default){return yr(n,Kt(i))}function Kt(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Ze(n){const i=[];for(let o=0;o<n.length;o++){const d=Ee(n[o]);if(Array.isArray(d)){if(0===d.length)throw new xe(900,!1);let h,v=bn.Default;for(let D=0;D<d.length;D++){const N=d[D],U=en(N);"number"==typeof U?-1===U?h=N.token:v|=U:h=N}i.push(yr(h,v))}else i.push(yr(d))}return i}function nt(n,i){return n[Jr]=i,n.prototype[Jr]=i,n}function en(n){return n[Jr]}function Ie(n){return{toString:n}.toString()}var qe=(()=>((qe=qe||{})[qe.OnPush=0]="OnPush",qe[qe.Default=1]="Default",qe))(),Ot=(()=>{return(n=Ot||(Ot={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Ot;var n})();const ut={},un=[],ot=Se({\u0275cmp:Se}),Ge=Se({\u0275dir:Se}),ve=Se({\u0275pipe:Se}),rt=Se({\u0275mod:Se}),Nt=Se({\u0275fac:Se}),he=Se({__NG_ELEMENT_ID__:Se});let Ce=0;function Tt(n){return Ie(()=>{const i=ys(n),o={...i,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===qe.OnPush,directiveDefs:null,pipeDefs:null,dependencies:i.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||Ot.Emulated,id:"c"+Ce++,styles:n.styles||un,_:null,schemas:n.schemas||null,tView:null};vi(o);const d=n.dependencies;return o.directiveDefs=Vi(d,!1),o.pipeDefs=Vi(d,!0),o})}function Qt(n){return wn(n)||Qn(n)}function Xe(n){return null!==n}function He(n){return Ie(()=>({type:n.type,bootstrap:n.bootstrap||un,declarations:n.declarations||un,imports:n.imports||un,exports:n.exports||un,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Gt(n,i){if(null==n)return ut;const o={};for(const d in n)if(n.hasOwnProperty(d)){let h=n[d],v=h;Array.isArray(h)&&(v=h[1],h=h[0]),o[h]=d,i&&(i[h]=v)}return o}function pn(n){return Ie(()=>{const i=ys(n);return vi(i),i})}function kn(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function wn(n){return n[ot]||null}function Qn(n){return n[Ge]||null}function Jn(n){return n[ve]||null}function Wn(n){const i=wn(n)||Qn(n)||Jn(n);return null!==i&&i.standalone}function Xn(n,i){const o=n[rt]||null;if(!o&&!0===i)throw new Error(`Type ${Me(n)} does not have '\u0275mod' property.`);return o}function ys(n){const i={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||un,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Gt(n.inputs,i),outputs:Gt(n.outputs)}}function vi(n){var i;null===(i=n.features)||void 0===i||i.forEach(o=>o(n))}function Vi(n,i){if(!n)return null;const o=i?Jn:Qt;return()=>("function"==typeof n?n():n).map(d=>o(d)).filter(Xe)}const ji=0,An=1,cr=2,ri=3,qi=4,kr=5,Ci=6,Li=7,Ur=8,se=9,be=10,Ye=11,me=12,Je=13,Qe=14,Vt=15,Lt=16,Xt=17,an=18,vn=19,rr=20,er=21,vr=22,$i=1,mt=2,at=7,xt=8,tn=9,dn=10;function Er(n){return Array.isArray(n)&&"object"==typeof n[$i]}function Ir(n){return Array.isArray(n)&&!0===n[$i]}function ei(n){return 0!=(4&n.flags)}function vs(n){return n.componentOffset>-1}function Oo(n){return 1==(1&n.flags)}function _i(n){return!!n.template}function Ss(n){return 0!=(256&n[cr])}function ti(n,i){return n.hasOwnProperty(Nt)?n[Nt]:null}class ks{constructor(i,o,d){this.previousValue=i,this.currentValue=o,this.firstChange=d}isFirstChange(){return this.firstChange}}function uo(){return ho}function ho(n){return n.type.prototype.ngOnChanges&&(n.setInput=fo),fa}function fa(){const n=na(this),i=null==n?void 0:n.current;if(i){const o=n.previous;if(o===ut)n.previous=i;else for(let d in i)o[d]=i[d];n.current=null,this.ngOnChanges(i)}}function fo(n,i,o,d){const h=this.declaredInputs[o],v=na(n)||function No(n,i){return n[_s]=i}(n,{previous:ut,current:null}),D=v.current||(v.current={}),N=v.previous,U=N[h];D[h]=new ks(U&&U.currentValue,i,N===ut),n[d]=i}uo.ngInherit=!0;const _s="__ngSimpleChanges__";function na(n){return n[_s]||null}const zi=function(n,i,o){};function Pi(n){for(;Array.isArray(n);)n=n[ji];return n}function go(n,i){return Pi(i[n])}function Oi(n,i){return Pi(i[n.index])}function Ja(n,i){return n.data[i]}function Xi(n,i){const o=i[n];return Er(o)?o:o[ji]}function Gi(n){return 64==(64&n[cr])}function Ns(n,i){return null==i?null:n[i]}function To(n){n[an]=0}function sa(n,i){n[kr]+=i;let o=n,d=n[ri];for(;null!==d&&(1===i&&1===o[kr]||-1===i&&0===o[kr]);)d[kr]+=i,o=d,d=d[ri]}const Tr={lFrame:ls(null),bindingsEnabled:!0};function T(){return Tr.bindingsEnabled}function M(){return Tr.lFrame.lView}function F(){return Tr.lFrame.tView}function L(n){return Tr.lFrame.contextLView=n,n[Ur]}function ne(n){return Tr.lFrame.contextLView=null,n}function vt(){let n=Tn();for(;null!==n&&64===n.type;)n=n.parent;return n}function Tn(){return Tr.lFrame.currentTNode}function ii(n,i){const o=Tr.lFrame;o.currentTNode=n,o.isParent=i}function Qi(){return Tr.lFrame.isParent}function hs(){Tr.lFrame.isParent=!1}function ts(){const n=Tr.lFrame;let i=n.bindingRootIndex;return-1===i&&(i=n.bindingRootIndex=n.tView.bindingStartIndex),i}function aa(){return Tr.lFrame.bindingIndex++}function Sa(n,i){const o=Tr.lFrame;o.bindingIndex=o.bindingRootIndex=n,ns(i)}function ns(n){Tr.lFrame.currentDirectiveIndex=n}function tl(){return Tr.lFrame.currentQueryIndex}function Aa(n){Tr.lFrame.currentQueryIndex=n}function zo(n){const i=n[An];return 2===i.type?i.declTNode:1===i.type?n[Ci]:null}function Fo(n,i,o){if(o&bn.SkipSelf){let h=i,v=n;for(;!(h=h.parent,null!==h||o&bn.Host||(h=zo(v),null===h||(v=v[Vt],10&h.type))););if(null===h)return!1;i=h,n=v}const d=Tr.lFrame=ga();return d.currentTNode=i,d.lView=n,!0}function nl(n){const i=ga(),o=n[An];Tr.lFrame=i,i.currentTNode=o.firstChild,i.lView=n,i.tView=o,i.contextLView=n,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function ga(){const n=Tr.lFrame,i=null===n?null:n.child;return null===i?ls(n):i}function ls(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function xo(){const n=Tr.lFrame;return Tr.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Go=xo;function Zs(){const n=xo();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function cs(){return Tr.lFrame.selectedIndex}function Fs(n){Tr.lFrame.selectedIndex=n}function Vr(){const n=Tr.lFrame;return Ja(n.tView,n.selectedIndex)}function Sr(n,i){for(let X=i.directiveStart,fe=i.directiveEnd;X<fe;X++){const pt=n.data[X].type.prototype,{ngAfterContentInit:jt,ngAfterContentChecked:mn,ngAfterViewInit:Pn,ngAfterViewChecked:nr,ngOnDestroy:br}=pt;var o,d,h,v,D,N,U;jt&&(null!==(o=n.contentHooks)&&void 0!==o?o:n.contentHooks=[]).push(-X,jt),mn&&((null!==(d=n.contentHooks)&&void 0!==d?d:n.contentHooks=[]).push(X,mn),(null!==(h=n.contentCheckHooks)&&void 0!==h?h:n.contentCheckHooks=[]).push(X,mn)),Pn&&(null!==(v=n.viewHooks)&&void 0!==v?v:n.viewHooks=[]).push(-X,Pn),nr&&((null!==(D=n.viewHooks)&&void 0!==D?D:n.viewHooks=[]).push(X,nr),(null!==(N=n.viewCheckHooks)&&void 0!==N?N:n.viewCheckHooks=[]).push(X,nr)),null!=br&&(null!==(U=n.destroyHooks)&&void 0!==U?U:n.destroyHooks=[]).push(X,br)}}function Hl(n,i,o){Q(n,i,3,o)}function _l(n,i,o,d){(3&n[cr])===o&&Q(n,i,o,d)}function $(n,i){let o=n[cr];(3&o)===i&&(o&=2047,o+=1,n[cr]=o)}function Q(n,i,o,d){const v=null!=d?d:-1,D=i.length-1;let N=0;for(let U=void 0!==d?65535&n[an]:0;U<D;U++)if("number"==typeof i[U+1]){if(N=i[U],null!=d&&N>=d)break}else i[U]<0&&(n[an]+=65536),(N<v||-1==v)&&(H(n,o,i,U),n[an]=(4294901760&n[an])+U+2),U++}function H(n,i,o,d){const h=o[d]<0,v=o[d+1],N=n[h?-o[d]:o[d]];if(h){if(n[cr]>>11<n[an]>>16&&(3&n[cr])===i){n[cr]+=2048,zi(4,N,v);try{v.call(N)}finally{zi(5,N,v)}}}else{zi(4,N,v);try{v.call(N)}finally{zi(5,N,v)}}}const ie=-1;class Le{constructor(i,o,d){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=d}}function bi(n,i,o){let d=0;for(;d<o.length;){const h=o[d];if("number"==typeof h){if(0!==h)break;d++;const v=o[d++],D=o[d++],N=o[d++];n.setAttribute(i,D,N,v)}else{const v=h,D=o[++d];Wo(v)?n.setProperty(i,v,D):n.setAttribute(i,v,D),d++}}return d}function Bi(n){return 3===n||4===n||6===n}function Wo(n){return 64===n.charCodeAt(0)}function yo(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let o=-1;for(let d=0;d<i.length;d++){const h=i[d];"number"==typeof h?o=h:0===o||Ko(n,o,h,null,-1===o||2===o?i[++d]:null)}}return n}function Ko(n,i,o,d,h){let v=0,D=n.length;if(-1===i)D=-1;else for(;v<n.length;){const N=n[v++];if("number"==typeof N){if(N===i){D=-1;break}if(N>i){D=v-1;break}}}for(;v<n.length;){const N=n[v];if("number"==typeof N)break;if(N===o){if(null===d)return void(null!==h&&(n[v+1]=h));if(d===n[v+1])return void(n[v+2]=h)}v++,null!==d&&v++,null!==h&&v++}-1!==D&&(n.splice(D,0,i),v=D+1),n.splice(v++,0,o),null!==d&&n.splice(v++,0,d),null!==h&&n.splice(v++,0,h)}function Es(n){return n!==ie}function Xs(n){return 32767&n}function Qs(n,i){let o=function Ls(n){return n>>16}(n),d=i;for(;o>0;)d=d[Vt],o--;return d}let rl=!0;function El(n){const i=rl;return rl=n,i}const qo=255,qc=5;let Wi=0;const vo={};function ac(n,i){const o=_n(n,i);if(-1!==o)return o;const d=i[An];d.firstCreatePass&&(n.injectorIndex=i.length,lc(d.data,n),lc(i,null),lc(d.blueprint,null));const h=Ji(n,i),v=n.injectorIndex;if(Es(h)){const D=Xs(h),N=Qs(h,i),U=N[An].data;for(let X=0;X<8;X++)i[v+X]=N[D+X]|U[D+X]}return i[v+8]=h,v}function lc(n,i){n.push(0,0,0,0,0,0,0,0,i)}function _n(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function Ji(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,d=null,h=i;for(;null!==h;){if(d=Mc(h),null===d)return ie;if(o++,h=h[Vt],-1!==d.injectorIndex)return d.injectorIndex|o<<16}return ie}function mi(n,i,o){!function Js(n,i,o){let d;"string"==typeof o?d=o.charCodeAt(0)||0:o.hasOwnProperty(he)&&(d=o[he]),null==d&&(d=o[he]=Wi++);const h=d&qo;i.data[n+(h>>qc)]|=1<<h}(n,i,o)}function Kn(n,i,o){if(o&bn.Optional||void 0!==n)return n;Pt()}function dr(n,i,o,d){if(o&bn.Optional&&void 0===d&&(d=null),!(o&(bn.Self|bn.Host))){const h=n[se],v=Cr(void 0);try{return h?h.get(i,d,o&bn.Optional):di(i,d,o&bn.Optional)}finally{Cr(v)}}return Kn(d,0,o)}function cc(n,i,o,d=bn.Default,h){if(null!==n){if(1024&i[cr]){const D=function wl(n,i,o,d,h){let v=n,D=i;for(;null!==v&&null!==D&&1024&D[cr]&&!(256&D[cr]);){const N=jn(v,D,o,d|bn.Self,vo);if(N!==vo)return N;let U=v.parent;if(!U){const X=D[er];if(X){const fe=X.get(o,vo,d);if(fe!==vo)return fe}U=Mc(D),D=D[Vt]}v=U}return h}(n,i,o,d,vo);if(D!==vo)return D}const v=jn(n,i,o,d,vo);if(v!==vo)return v}return dr(i,o,d,h)}function jn(n,i,o,d,h){const v=function il(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(he)?n[he]:void 0;return"number"==typeof i?i>=0?i&qo:$d:i}(o);if("function"==typeof v){if(!Fo(i,n,d))return d&bn.Host?Kn(h,0,d):dr(i,o,d,h);try{const D=v(d);if(null!=D||d&bn.Optional)return D;Pt()}finally{Go()}}else if("number"==typeof v){let D=null,N=_n(n,i),U=ie,X=d&bn.Host?i[Lt][Ci]:null;for((-1===N||d&bn.SkipSelf)&&(U=-1===N?Ji(n,i):i[N+8],U!==ie&&Il(d,!1)?(D=i[An],N=Xs(U),i=Qs(U,i)):N=-1);-1!==N;){const fe=i[An];if(uc(v,N,fe.data)){const Pe=Ht(N,i,o,D,d,X);if(Pe!==vo)return Pe}U=i[N+8],U!==ie&&Il(d,i[An].data[N+8]===X)&&uc(v,N,i)?(D=fe,N=Xs(U),i=Qs(U,i)):N=-1}}return h}function Ht(n,i,o,d,h,v){const D=i[An],N=D.data[n+8],fe=hn(N,D,o,null==d?vs(N)&&rl:d!=D&&0!=(3&N.type),h&bn.Host&&v===N);return null!==fe?si(i,D,fe,N):vo}function hn(n,i,o,d,h){const v=n.providerIndexes,D=i.data,N=1048575&v,U=n.directiveStart,fe=v>>20,pt=h?N+fe:n.directiveEnd;for(let jt=d?N:N+fe;jt<pt;jt++){const mn=D[jt];if(jt<U&&o===mn||jt>=U&&mn.type===o)return jt}if(h){const jt=D[U];if(jt&&_i(jt)&&jt.type===o)return U}return null}function si(n,i,o,d){let h=n[o];const v=i.data;if(function Zt(n){return n instanceof Le}(h)){const D=h;D.resolving&&function Y(n,i){const o=i?`. Dependency path: ${i.join(" > ")} > ${n}`:"";throw new xe(-200,`Circular dependency in DI detected for ${n}${o}`)}(_t(v[o]));const N=El(D.canSeeViewProviders);D.resolving=!0;const U=D.injectImpl?Cr(D.injectImpl):null;Fo(n,d,bn.Default);try{h=n[o]=D.factory(void 0,v,n,d),i.firstCreatePass&&o>=d.directiveStart&&function jl(n,i,o){const{ngOnChanges:d,ngOnInit:h,ngDoCheck:v}=i.type.prototype;if(d){var D,N;const Pe=ho(i);(null!==(D=o.preOrderHooks)&&void 0!==D?D:o.preOrderHooks=[]).push(n,Pe),(null!==(N=o.preOrderCheckHooks)&&void 0!==N?N:o.preOrderCheckHooks=[]).push(n,Pe)}var U,X,fe;h&&(null!==(U=o.preOrderHooks)&&void 0!==U?U:o.preOrderHooks=[]).push(0-n,h),v&&((null!==(X=o.preOrderHooks)&&void 0!==X?X:o.preOrderHooks=[]).push(n,v),(null!==(fe=o.preOrderCheckHooks)&&void 0!==fe?fe:o.preOrderCheckHooks=[]).push(n,v))}(o,v[o],i)}finally{null!==U&&Cr(U),El(N),D.resolving=!1,Go()}}return h}function uc(n,i,o){return!!(o[i+(n>>qc)]&1<<n)}function Il(n,i){return!(n&bn.Self||n&bn.Host&&i)}class Ma{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,d){return cc(this._tNode,this._lView,i,Kt(d),o)}}function $d(){return new Ma(vt(),M())}function Zc(n){return Ie(()=>{const i=n.prototype.constructor,o=i[Nt]||$o(i),d=Object.prototype;let h=Object.getPrototypeOf(n.prototype).constructor;for(;h&&h!==d;){const v=h[Nt]||$o(h);if(v&&v!==o)return v;h=Object.getPrototypeOf(h)}return v=>new v})}function $o(n){return Ke(n)?()=>{const i=$o(Ee(n));return i&&i()}:ti(n)}function Mc(n){const i=n[An],o=i.type;return 2===o?i.declTNode:1===o?n[Ci]:null}function eo(n){return function Yc(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const o=n.attrs;if(o){const d=o.length;let h=0;for(;h<d;){const v=o[h];if(Bi(v))break;if(0===v)h+=2;else if("number"==typeof v)for(h++;h<d&&"string"==typeof o[h];)h++;else{if(v===i)return o[h+1];h+=2}}}return null}(vt(),n)}const pr="__parameters__";function sr(n,i,o){return Ie(()=>{const d=function ci(n){return function(...o){if(n){const d=n(...o);for(const h in d)this[h]=d[h]}}}(i);function h(...v){if(this instanceof h)return d.apply(this,v),this;const D=new h(...v);return N.annotation=D,N;function N(U,X,fe){const Pe=U.hasOwnProperty(pr)?U[pr]:Object.defineProperty(U,pr,{value:[]})[pr];for(;Pe.length<=fe;)Pe.push(null);return(Pe[fe]=Pe[fe]||[]).push(D),U}}return o&&(h.prototype=Object.create(o.prototype)),h.prototype.ngMetadataName=n,h.annotationCls=h,h})}class Ni{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=kt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Rr(n,i){n.forEach(o=>Array.isArray(o)?Rr(o,i):i(o))}function Yr(n,i,o){i>=n.length?n.push(o):n.splice(i,0,o)}function $t(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function Di(n,i){const o=[];for(let d=0;d<n;d++)o.push(i);return o}function ui(n,i,o){let d=S(n,i);return d>=0?n[1|d]=o:(d=~d,function ca(n,i,o,d){let h=n.length;if(h==i)n.push(o,d);else if(1===h)n.push(d,n[0]),n[0]=o;else{for(h--,n.push(n[h-1],n[h]);h>i;)n[h]=n[h-2],h--;n[i]=o,n[i+1]=d}}(n,d,i,o)),d}function Pr(n,i){const o=S(n,i);if(o>=0)return n[1|o]}function S(n,i){return function w(n,i,o){let d=0,h=n.length>>o;for(;h!==d;){const v=d+(h-d>>1),D=n[v<<o];if(i===D)return v<<o;D>i?h=v:d=v+1}return~(h<<o)}(n,i,1)}const Ii=nt(sr("Optional"),8),$s=nt(sr("SkipSelf"),4);var Uo=(()=>((Uo=Uo||{})[Uo.Important=1]="Important",Uo[Uo.DashCase=2]="DashCase",Uo))();const za=new Map;let Qo=0;const Rt="__ngContext__";function Wt(n,i){Er(i)?(n[Rt]=i[rr],function Ga(n){za.set(n[rr],n)}(i)):n[Rt]=i}let Io;function iu(n,i){return Io(n,i)}function io(n){const i=n[ri];return Ir(i)?i[ri]:i}function hi(n){return al(n[Je])}function Si(n){return al(n[qi])}function al(n){for(;null!==n&&!Ir(n);)n=n[qi];return n}function _a(n,i,o,d,h){if(null!=d){let v,D=!1;Ir(d)?v=d:Er(d)&&(D=!0,d=d[ji]);const N=Pi(d);0===n&&null!==o?null==h?mc(i,o,N):Pl(i,o,N,h||null,!0):1===n&&null!==o?Pl(i,o,N,h||null,!0):2===n?function fd(n,i,o){const d=su(n,i);d&&function Oh(n,i,o,d){n.removeChild(i,o,d)}(n,d,i,o)}(i,N,D):3===n&&i.destroyNode(N),null!=v&&function Tp(n,i,o,d,h){const v=o[at];v!==Pi(o)&&_a(i,n,d,v,h);for(let N=dn;N<o.length;N++){const U=o[N];_c(U[An],U,n,i,d,v)}}(i,n,v,o,h)}}function Hd(n,i,o){return n.createElement(i,o)}function ad(n,i){const o=n[tn],d=o.indexOf(i),h=i[ri];512&i[cr]&&(i[cr]&=-513,sa(h,-1)),o.splice(d,1)}function ll(n,i){if(n.length<=dn)return;const o=dn+i,d=n[o];if(d){const h=d[Xt];null!==h&&h!==n&&ad(h,d),i>0&&(n[o-1][qi]=d[qi]);const v=$t(n,dn+i);!function Du(n,i){_c(n,i,i[Ye],2,null,null),i[ji]=null,i[Ci]=null}(d[An],d);const D=v[vn];null!==D&&D.detachView(v[An]),d[ri]=null,d[qi]=null,d[cr]&=-65}return d}function zd(n,i){if(!(128&i[cr])){const o=i[Ye];o.destroyNode&&_c(n,i,o,3,null,null),function Mh(n){let i=n[Je];if(!i)return ld(n[An],n);for(;i;){let o=null;if(Er(i))o=i[Je];else{const d=i[dn];d&&(o=d)}if(!o){for(;i&&!i[qi]&&i!==n;)Er(i)&&ld(i[An],i),i=i[ri];null===i&&(i=n),Er(i)&&ld(i[An],i),o=i&&i[qi]}i=o}}(i)}}function ld(n,i){if(!(128&i[cr])){i[cr]&=-65,i[cr]|=128,function Wa(n,i){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let d=0;d<o.length;d+=2){const h=i[o[d]];if(!(h instanceof Le)){const v=o[d+1];if(Array.isArray(v))for(let D=0;D<v.length;D+=2){const N=h[v[D]],U=v[D+1];zi(4,N,U);try{U.call(N)}finally{zi(5,N,U)}}else{zi(4,h,v);try{v.call(h)}finally{zi(5,h,v)}}}}}(n,i),function ms(n,i){const o=n.cleanup,d=i[Li];let h=-1;if(null!==o)for(let v=0;v<o.length-1;v+=2)if("string"==typeof o[v]){const D=o[v+3];D>=0?d[h=D]():d[h=-D].unsubscribe(),v+=2}else{const D=d[h=o[v+1]];o[v].call(D)}if(null!==d){for(let v=h+1;v<d.length;v++)(0,d[v])();i[Li]=null}}(n,i),1===i[An].type&&i[Ye].destroy();const o=i[Xt];if(null!==o&&Ir(i[ri])){o!==i[ri]&&ad(o,i);const d=i[vn];null!==d&&d.detachView(n)}!function P(n){za.delete(n[rr])}(i)}}function Oa(n,i,o){return function $c(n,i,o){let d=i;for(;null!==d&&40&d.type;)d=(i=d).parent;if(null===d)return o[ji];{const{componentOffset:h}=d;if(h>-1){const{encapsulation:v}=n.data[d.directiveStart+h];if(v===Ot.None||v===Ot.Emulated)return null}return Oi(d,o)}}(n,i.parent,o)}function Pl(n,i,o,d,h){n.insertBefore(i,o,d,h)}function mc(n,i,o){n.appendChild(i,o)}function yc(n,i,o,d,h){null!==d?Pl(n,i,o,d,h):mc(n,i,o)}function su(n,i){return n.parentNode(i)}function cd(n,i,o){return ud(n,i,o)}let dd,Xl,Zr,au,ud=function vc(n,i,o){return 40&n.type?Oi(n,o):null};function wo(n,i,o,d){const h=Oa(n,d,i),v=i[Ye],N=cd(d.parent||i[Ci],d,i);if(null!=h)if(Array.isArray(o))for(let U=0;U<o.length;U++)yc(v,h,o[U],N,!1);else yc(v,h,o,N,!1);void 0!==dd&&dd(v,d,i,o,h)}function Tu(n,i){if(null!==i){const o=i.type;if(3&o)return Oi(i,n);if(4&o)return Zl(-1,n[i.index]);if(8&o){const d=i.child;if(null!==d)return Tu(n,d);{const h=n[i.index];return Ir(h)?Zl(-1,h):Pi(h)}}if(32&o)return iu(i,n)()||Pi(n[i.index]);{const d=hd(n,i);return null!==d?Array.isArray(d)?d[0]:Tu(io(n[Lt]),d):Tu(n,i.next)}}return null}function hd(n,i){return null!==i?n[Lt][Ci].projection[i.projection]:null}function Zl(n,i){const o=dn+n+1;if(o<i.length){const d=i[o],h=d[An].firstChild;if(null!==h)return Tu(d,h)}return i[at]}function Su(n,i,o,d,h,v,D){for(;null!=o;){const N=d[o.index],U=o.type;if(D&&0===i&&(N&&Wt(Pi(N),d),o.flags|=2),32!=(32&o.flags))if(8&U)Su(n,i,o.child,d,h,v,!1),_a(i,n,h,N,v);else if(32&U){const X=iu(o,d);let fe;for(;fe=X();)_a(i,n,h,fe,v);_a(i,n,h,N,v)}else 16&U?Nh(n,i,d,o,h,v):_a(i,n,h,N,v);o=D?o.projectionNext:o.next}}function _c(n,i,o,d,h,v){Su(o,d,n.firstChild,i,h,v,!1)}function Nh(n,i,o,d,h,v){const D=o[Lt],U=D[Ci].projection[d.projection];if(Array.isArray(U))for(let X=0;X<U.length;X++)_a(i,n,h,U[X],v);else Su(n,i,U,D[ri],h,v,!0)}function js(n,i,o){""===o?n.removeAttribute(i,"class"):n.setAttribute(i,"class",o)}function pd(n,i,o){const{mergedAttrs:d,classes:h,styles:v}=o;null!==d&&bi(n,i,d),null!==h&&js(n,i,h),null!==v&&function Sp(n,i,o){n.setAttribute(i,"style",o)}(n,i,v)}function Ia(n){var i;return(null===(i=function ou(){if(void 0===Xl&&(Xl=null,Gn.trustedTypes))try{Xl=Gn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Xl}())||void 0===i?void 0:i.createHTML(n))||n}function Lh(n){Zr=n}function Kd(n){var i;return(null===(i=function Wd(){if(void 0===au&&(au=null,Gn.trustedTypes))try{au=Gn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return au}())||void 0===i?void 0:i.createScriptURL(n))||n}class Ql{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${At})`}}class Ru extends Ql{getTypeName(){return"HTML"}}class wc extends Ql{getTypeName(){return"Style"}}class lu extends Ql{getTypeName(){return"Script"}}class qd extends Ql{getTypeName(){return"URL"}}class Cc extends Ql{getTypeName(){return"ResourceURL"}}function Jo(n){return n instanceof Ql?n.changingThisBreaksApplicationSecurity:n}function cl(n,i){const o=function Mf(n){return n instanceof Ql&&n.getTypeName()||null}(n);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see ${At})`)}return o===i}function Pf(n){return new Ru(n)}function gd(n){return new wc(n)}function Of(n){return new lu(n)}function ka(n){return new qd(n)}function us(n){return new Cc(n)}class md{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const o=(new window.DOMParser).parseFromString(Ia(i),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(i):(o.removeChild(o.firstChild),o)}catch{return null}}}class kl{constructor(i){this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(i){const o=this.inertDocument.createElement("template");return o.innerHTML=Ia(i),o}}const uu=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Bc(n){return(n=String(n)).match(uu)?n:"unsafe:"+n}function Nl(n){const i={};for(const o of n.split(","))i[o]=!0;return i}function ul(...n){const i={};for(const o of n)for(const d in o)o.hasOwnProperty(d)&&(i[d]=!0);return i}const Jl=Nl("area,br,col,hr,img,wbr"),$h=Nl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),vd=Nl("rp,rt"),y=ul(Jl,ul($h,Nl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ul(vd,Nl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ul(vd,$h)),A=Nl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),st=ul(A,Nl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Nl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),bt=Nl("script,style,template");class rn{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let o=i.firstChild,d=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?d=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,d&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let h=this.checkClobberedElement(o,o.nextSibling);if(h){o=h;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(i){const o=i.nodeName.toLowerCase();if(!y.hasOwnProperty(o))return this.sanitizedSomething=!0,!bt.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const d=i.attributes;for(let h=0;h<d.length;h++){const v=d.item(h),D=v.name,N=D.toLowerCase();if(!st.hasOwnProperty(N)){this.sanitizedSomething=!0;continue}let U=v.value;A[N]&&(U=Bc(U)),this.buf.push(" ",D,'="',ar(U),'"')}return this.buf.push(">"),!0}endElement(i){const o=i.nodeName.toLowerCase();y.hasOwnProperty(o)&&!Jl.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(i){this.buf.push(ar(i))}checkClobberedElement(i,o){if(o&&(i.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return o}}const Bn=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,or=/([^\#-~ |!])/g;function ar(n){return n.replace(/&/g,"&amp;").replace(Bn,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(or,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ki;function Ca(n,i){let o=null;try{Ki=Ki||function cu(n){const i=new kl(n);return function yd(){try{return!!(new window.DOMParser).parseFromString(Ia(""),"text/html")}catch{return!1}}()?new md(i):i}(n);let d=i?String(i):"";o=Ki.getInertBodyElement(d);let h=5,v=d;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,d=v,v=o.innerHTML,o=Ki.getInertBodyElement(d)}while(d!==v);return Ia((new rn).sanitizeChildren(Mu(o)||o))}finally{if(o){const d=Mu(o)||o;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function Mu(n){return"content"in n&&function ec(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var is=(()=>((is=is||{})[is.NONE=0]="NONE",is[is.HTML=1]="HTML",is[is.STYLE=2]="STYLE",is[is.SCRIPT=3]="SCRIPT",is[is.URL=4]="URL",is[is.RESOURCE_URL=5]="RESOURCE_URL",is))();function Uc(n){const i=Qd();return i?i.sanitize(is.URL,n)||"":cl(n,"URL")?Jo(n):Bc(de(n))}function tc(n){const i=Qd();if(i)return Kd(i.sanitize(is.RESOURCE_URL,n)||"");if(cl(n,"ResourceURL"))return Kd(Jo(n));throw new xe(904,!1)}function Xd(n,i,o){return function Ed(n,i){return"src"===i&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===i&&("base"===n||"link"===n)?tc:Uc}(i,o)(n)}function Qd(){const n=M();return n&&n[me]}const Nf=new Ni("ENVIRONMENT_INITIALIZER"),Jd=new Ni("INJECTOR",-1),Bh=new Ni("INJECTOR_DEF_TYPES");class eh{get(i,o=on){if(o===on){const d=new Error(`NullInjectorError: No provider for ${Me(i)}!`);throw d.name="NullInjectorError",d}return o}}function Nu(n){return{\u0275providers:n}}function Uh(...n){return{\u0275providers:bg(0,n),\u0275fromNgModule:!0}}function bg(n,...i){const o=[],d=new Set;let h;return Rr(i,v=>{const D=v;Vh(D,o,[],d)&&(h||(h=[]),h.push(D))}),void 0!==h&&Ts(h,o),o}function Ts(n,i){for(let o=0;o<n.length;o++){const{providers:h}=n[o];Id(h,v=>{i.push(v)})}}function Vh(n,i,o,d){if(!(n=Ee(n)))return!1;let h=null,v=cn(n);const D=!v&&wn(n);if(v||D){if(D&&!D.standalone)return!1;h=n}else{const U=n.ngModule;if(v=cn(U),!v)return!1;h=U}const N=d.has(h);if(D){if(N)return!1;if(d.add(h),D.dependencies){const U="function"==typeof D.dependencies?D.dependencies():D.dependencies;for(const X of U)Vh(X,i,o,d)}}else{if(!v)return!1;{if(null!=v.imports&&!N){let X;d.add(h);try{Rr(v.imports,fe=>{Vh(fe,i,o,d)&&(X||(X=[]),X.push(fe))})}finally{}void 0!==X&&Ts(X,i)}if(!N){const X=ti(h)||(()=>new h);i.push({provide:h,useFactory:X,deps:un},{provide:Bh,useValue:h,multi:!0},{provide:Nf,useValue:()=>yr(h),multi:!0})}const U=v.providers;null==U||N||Id(U,fe=>{i.push(fe)})}}return h!==n&&void 0!==n.providers}function Id(n,i){for(let o of n)We(o)&&(o=o.\u0275providers),Array.isArray(o)?Id(o,i):i(o)}const nc=Se({provide:String,useValue:Se});function wd(n){return null!==n&&"object"==typeof n&&nc in n}function Fu(n){return"function"==typeof n}const jh=new Ni("Set Injector scope."),th={},xp={};let du;function hu(){return void 0===du&&(du=new eh),du}class Fl{}class Hh extends Fl{get destroyed(){return this._destroyed}constructor(i,o,d,h){super(),this.parent=o,this.source=d,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,$u(i,D=>this.processProvider(D)),this.records.set(Jd,rh(void 0,this)),h.has("environment")&&this.records.set(Fl,rh(void 0,this));const v=this.records.get(jh);null!=v&&"string"==typeof v.value&&this.scopes.add(v.value),this.injectorDefTypes=new Set(this.get(Bh.multi,un,bn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();for(const i of this._onDestroyHooks)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(i){this._onDestroyHooks.push(i)}runInContext(i){this.assertNotDestroyed();const o=ur(this),d=Cr(void 0);try{return i()}finally{ur(o),Cr(d)}}get(i,o=on,d=bn.Default){this.assertNotDestroyed(),d=Kt(d);const h=ur(this),v=Cr(void 0);try{if(!(d&bn.SkipSelf)){let N=this.records.get(i);if(void 0===N){const U=function Lu(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ni}(i)&&gn(i);N=U&&this.injectableDefInScope(U)?rh(nh(i),th):null,this.records.set(i,N)}if(null!=N)return this.hydrate(i,N)}return(d&bn.Self?hu():this.parent).get(i,o=d&bn.Optional&&o===on?null:o)}catch(D){if("NullInjectorError"===D.name){if((D[Dr]=D[Dr]||[]).unshift(Me(i)),h)throw D;return function Yt(n,i,o,d){const h=n[Dr];throw i[Lr]&&h.unshift(i[Lr]),n.message=function we(n,i,o,d=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==pi?n.slice(2):n;let h=Me(i);if(Array.isArray(i))h=i.map(Me).join(" -> ");else if("object"==typeof i){let v=[];for(let D in i)if(i.hasOwnProperty(D)){let N=i[D];v.push(D+":"+("string"==typeof N?JSON.stringify(N):Me(N)))}h=`{${v.join(", ")}}`}return`${o}${d?"("+d+")":""}[${h}]: ${n.replace(zr,"\n  ")}`}("\n"+n.message,h,o,d),n[Qr]=h,n[Dr]=null,n}(D,i,"R3InjectorError",this.source)}throw D}finally{Cr(v),ur(h)}}resolveInjectorInitializers(){const i=ur(this),o=Cr(void 0);try{const d=this.get(Nf.multi,un,bn.Self);for(const h of d)h()}finally{ur(i),Cr(o)}}toString(){const i=[],o=this.records;for(const d of o.keys())i.push(Me(d));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new xe(205,!1)}processProvider(i){let o=Fu(i=Ee(i))?i:Ee(i&&i.provide);const d=function Ff(n){return wd(n)?rh(void 0,n.useValue):rh(Lf(n),th)}(i);if(Fu(i)||!0!==i.multi)this.records.get(o);else{let h=this.records.get(o);h||(h=rh(void 0,th,!0),h.factory=()=>Ze(h.multi),this.records.set(o,h)),o=i,h.multi.push(i)}this.records.set(o,d)}hydrate(i,o){return o.value===th&&(o.value=xp,o.value=o.factory()),"object"==typeof o.value&&o.value&&function Rp(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(i){if(!i.providedIn)return!1;const o=Ee(i.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function nh(n){const i=gn(n),o=null!==i?i.factory:ti(n);if(null!==o)return o;if(n instanceof Ni)throw new xe(204,!1);if(n instanceof Function)return function Tg(n){const i=n.length;if(i>0)throw Di(i,"?"),new xe(204,!1);const o=function xn(n){return n&&(n[Cn]||n[_r])||null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new xe(204,!1)}function Lf(n,i,o){let d;if(Fu(n)){const h=Ee(n);return ti(h)||nh(h)}if(wd(n))d=()=>Ee(n.useValue);else if(function Cd(n){return!(!n||!n.useFactory)}(n))d=()=>n.useFactory(...Ze(n.deps||[]));else if(function Ap(n){return!(!n||!n.useExisting)}(n))d=()=>yr(Ee(n.useExisting));else{const h=Ee(n&&(n.useClass||n.provide));if(!function zh(n){return!!n.deps}(n))return ti(h)||nh(h);d=()=>new h(...Ze(n.deps))}return d}function rh(n,i,o=!1){return{factory:n,value:i,multi:o?[]:void 0}}function $u(n,i){for(const o of n)Array.isArray(o)?$u(o,i):o&&We(o)?$u(o.\u0275providers,i):i(o)}class Sg{}class $f{}class Wh{resolveComponentFactory(i){throw function Gh(n){const i=Error(`No component factory found for ${Me(n)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=n,i}(i)}}let Ka=(()=>{class n{}return n.NULL=new Wh,n})();function Bu(){return rc(vt(),M())}function rc(n,i){return new ic(Oi(n,i))}let ic=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=Bu,n})();function fu(n){return n instanceof ic?n.nativeElement:n}class Vc{}let ih=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Mp(){const n=M(),o=Xi(vt().index,n);return(Er(o)?o:n)[Ye]}(),n})(),dl=(()=>{class n{}return n.\u0275prov=kt({token:n,providedIn:"root",factory:()=>null}),n})();class Bf{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const Pp=new Bf("15.2.9"),sh={},Kh="ngOriginalError";function bd(n){return n[Kh]}class pu{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i);this._console.error("ERROR",i),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(i){let o=i&&bd(i);for(;o&&bd(o);)o=bd(o);return o||null}}function Na(n){return n instanceof Function?n():n}function Op(n,i,o){let d=n.length;for(;;){const h=n.indexOf(i,o);if(-1===h)return h;if(0===h||n.charCodeAt(h-1)<=32){const v=i.length;if(h+v===d||n.charCodeAt(h+v)<=32)return h}o=h+1}}const Yh="ng-template";function kp(n,i,o){let d=0,h=!0;for(;d<n.length;){let v=n[d++];if("string"==typeof v&&h){const D=n[d++];if(o&&"class"===v&&-1!==Op(D.toLowerCase(),i,0))return!0}else{if(1===v){for(;d<n.length&&"string"==typeof(v=n[d++]);)if(v.toLowerCase()===i)return!0;return!1}"number"==typeof v&&(h=!1)}}return!1}function Np(n){return 4===n.type&&n.value!==Yh}function Hf(n,i,o){return i===(4!==n.type||o?n.value:Yh)}function Fp(n,i,o){let d=4;const h=n.attrs||[],v=function Zh(n){for(let i=0;i<n.length;i++)if(Bi(n[i]))return i;return n.length}(h);let D=!1;for(let N=0;N<i.length;N++){const U=i[N];if("number"!=typeof U){if(!D)if(4&d){if(d=2|1&d,""!==U&&!Hf(n,U,o)||""===U&&1===i.length){if(fl(d))return!1;D=!0}}else{const X=8&d?U:i[++N];if(8&d&&null!==n.attrs){if(!kp(n.attrs,X,o)){if(fl(d))return!1;D=!0}continue}const Pe=zf(8&d?"class":U,h,Np(n),o);if(-1===Pe){if(fl(d))return!1;D=!0;continue}if(""!==X){let pt;pt=Pe>v?"":h[Pe+1].toLowerCase();const jt=8&d?pt:null;if(jt&&-1!==Op(jt,X,0)||2&d&&X!==pt){if(fl(d))return!1;D=!0}}}}else{if(!D&&!fl(d)&&!fl(U))return!1;if(D&&fl(U))continue;D=!1,d=U|1&d}}return fl(d)||D}function fl(n){return 0==(1&n)}function zf(n,i,o,d){if(null===i)return-1;let h=0;if(d||!o){let v=!1;for(;h<i.length;){const D=i[h];if(D===n)return h;if(3===D||6===D)v=!0;else{if(1===D||2===D){let N=i[++h];for(;"string"==typeof N;)N=i[++h];continue}if(4===D)break;if(0===D){h+=4;continue}}h+=v?1:2}return-1}return function ah(n,i){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const d=n[o];if("number"==typeof d)return-1;if(d===i)return o;o++}return-1}(i,n)}function Dd(n,i,o=!1){for(let d=0;d<i.length;d++)if(Fp(n,i[d],o))return!0;return!1}function Vu(n,i){e:for(let o=0;o<i.length;o++){const d=i[o];if(n.length===d.length){for(let h=0;h<n.length;h++)if(n[h]!==d[h])continue e;return!0}}return!1}function Lp(n,i){return n?":not("+i.trim()+")":i}function Td(n){let i=n[0],o=1,d=2,h="",v=!1;for(;o<n.length;){let D=n[o];if("string"==typeof D)if(2&d){const N=n[++o];h+="["+D+(N.length>0?'="'+N+'"':"")+"]"}else 8&d?h+="."+D:4&d&&(h+=" "+D);else""!==h&&!fl(D)&&(i+=Lp(v,h),h=""),d=D,v=v||!fl(d);o++}return""!==h&&(i+=Lp(v,h)),i}const Xr={};function lh(n){ch(F(),M(),cs()+n,!1)}function ch(n,i,o,d){if(!d)if(3==(3&i[cr])){const v=n.preOrderCheckHooks;null!==v&&Hl(i,v,o)}else{const v=n.preOrderHooks;null!==v&&_l(i,v,0,o)}Fs(o)}function Vp(n,i=null,o=null,d){const h=Xh(n,i,o,d);return h.resolveInjectorInitializers(),h}function Xh(n,i=null,o=null,d,h=new Set){const v=[o||un,Uh(n)];return d=d||("object"==typeof n?void 0:Me(n)),new Hh(v,i||hu(),d||null,h)}let Gu=(()=>{class n{static create(o,d){if(Array.isArray(o))return Vp({name:""},d,o,"");{var h;const v=null!==(h=o.name)&&void 0!==h?h:"";return Vp({name:v},o.parent,o.providers,v)}}}return n.THROW_IF_NOT_FOUND=on,n.NULL=new eh,n.\u0275prov=kt({token:n,providedIn:"any",factory:()=>yr(Jd)}),n.__NG_ELEMENT_ID__=-1,n})();function jc(n,i=bn.Default){const o=M();return null===o?yr(n,i):cc(vt(),o,Ee(n),i)}function Yf(){throw new Error("invalid")}function Yp(n,i){const o=n.contentQueries;if(null!==o)for(let d=0;d<o.length;d+=2){const v=o[d+1];if(-1!==v){const D=n.data[v];Aa(o[d]),D.contentQueries(2,i[v],v)}}}function nf(n,i,o,d,h,v,D,N,U,X,fe){const Pe=i.blueprint.slice();return Pe[ji]=h,Pe[cr]=76|d,(null!==fe||n&&1024&n[cr])&&(Pe[cr]|=1024),To(Pe),Pe[ri]=Pe[Vt]=n,Pe[Ur]=o,Pe[be]=D||n&&n[be],Pe[Ye]=N||n&&n[Ye],Pe[me]=U||n&&n[me]||null,Pe[se]=X||n&&n[se]||null,Pe[Ci]=v,Pe[rr]=function ru(){return Qo++}(),Pe[er]=fe,Pe[Lt]=2==i.type?n[Lt]:Pe,Pe}function Wu(n,i,o,d,h){let v=n.data[i];if(null===v)v=function Zp(n,i,o,d,h){const v=Tn(),D=Qi(),U=n.data[i]=function Qf(n,i,o,d,h,v){return{type:o,index:d,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:v,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,D?v:v&&v.parent,o,i,d,h);return null===n.firstChild&&(n.firstChild=U),null!==v&&(D?null==v.child&&null!==U.parent&&(v.child=U):null===v.next&&(v.next=U,U.prev=v)),U}(n,i,o,d,h),function yl(){return Tr.lFrame.inI18n}()&&(v.flags|=32);else if(64&v.type){v.type=o,v.value=d,v.attrs=h;const D=function $r(){const n=Tr.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}();v.injectorIndex=null===D?-1:D.injectorIndex}return ii(v,!0),v}function fh(n,i,o,d){if(0===o)return-1;const h=i.length;for(let v=0;v<o;v++)i.push(d),n.blueprint.push(d),n.data.push(null);return h}function Xp(n,i,o){nl(i);try{const d=n.viewQuery;null!==d&&Rd(1,d,o);const h=n.template;null!==h&&Bg(n,i,h,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Yp(n,i),n.staticViewQueries&&Rd(2,n.viewQuery,o);const v=n.components;null!==v&&function $g(n,i){for(let o=0;o<i.length;o++)ba(n,i[o])}(i,v)}catch(d){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),d}finally{i[cr]&=-5,Zs()}}function rf(n,i,o,d){const h=i[cr];if(128!=(128&h)){nl(i);try{To(i),function qs(n){return Tr.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&Bg(n,i,o,2,d);const D=3==(3&h);if(D){const X=n.preOrderCheckHooks;null!==X&&Hl(i,X,null)}else{const X=n.preOrderHooks;null!==X&&_l(i,X,0,null),$(i,0)}if(function cy(n){for(let i=hi(n);null!==i;i=Si(i)){if(!i[mt])continue;const o=i[tn];for(let d=0;d<o.length;d++){const h=o[d];512&h[cr]||sa(h[ri],1),h[cr]|=512}}}(i),function ly(n){for(let i=hi(n);null!==i;i=Si(i))for(let o=dn;o<i.length;o++){const d=i[o],h=d[An];Gi(d)&&rf(h,d,h.template,d[Ur])}}(i),null!==n.contentQueries&&Yp(n,i),D){const X=n.contentCheckHooks;null!==X&&Hl(i,X)}else{const X=n.contentHooks;null!==X&&_l(i,X,1),$(i,1)}!function qp(n,i){const o=n.hostBindingOpCodes;if(null!==o)try{for(let d=0;d<o.length;d++){const h=o[d];if(h<0)Fs(~h);else{const v=h,D=o[++d],N=o[++d];Sa(D,v),N(2,i[v])}}}finally{Fs(-1)}}(n,i);const N=n.components;null!==N&&function ry(n,i){for(let o=0;o<i.length;o++)ig(n,i[o])}(i,N);const U=n.viewQuery;if(null!==U&&Rd(2,U,d),D){const X=n.viewCheckHooks;null!==X&&Hl(i,X)}else{const X=n.viewHooks;null!==X&&_l(i,X,2),$(i,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),i[cr]&=-41,512&i[cr]&&(i[cr]&=-513,sa(i[ri],-1))}finally{Zs()}}}function Bg(n,i,o,d,h){const v=cs(),D=2&d;try{Fs(-1),D&&i.length>vr&&ch(n,i,vr,!1),zi(D?2:0,h),o(d,h)}finally{Fs(v),zi(D?3:1,h)}}function Ku(n,i,o){if(ei(i)){const h=i.directiveEnd;for(let v=i.directiveStart;v<h;v++){const D=n.data[v];D.contentQueries&&D.contentQueries(1,o[v],v)}}}function qu(n,i,o){T()&&(function iy(n,i,o,d){const h=o.directiveStart,v=o.directiveEnd;vs(o)&&function rg(n,i,o){const d=Oi(i,n),h=af(o),v=n[be],D=zc(n,nf(n,h,null,o.onPush?32:16,d,i,v,v.createRenderer(d,o),null,null,null));n[i.index]=D}(i,o,n.data[h+o.componentOffset]),n.firstCreatePass||ac(o,i),Wt(d,i);const D=o.initialInputs;for(let N=h;N<v;N++){const U=n.data[N],X=si(i,n,N,o);Wt(X,i),null!==D&&Gg(0,N-h,X,U,0,D),_i(U)&&(Xi(o.index,i)[Ur]=si(i,n,N,o))}}(n,i,o,Oi(o,i)),64==(64&o.flags)&&eg(n,i,o))}function sf(n,i,o=Oi){const d=i.localNames;if(null!==d){let h=i.index+1;for(let v=0;v<d.length;v+=2){const D=d[v+1],N=-1===D?o(i,n):n[D];n[h++]=N}}}function af(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=Zf(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):i}function Zf(n,i,o,d,h,v,D,N,U,X){const fe=vr+d,Pe=fe+h,pt=function sc(n,i){const o=[];for(let d=0;d<i;d++)o.push(d<n?null:Xr);return o}(fe,Pe),jt="function"==typeof X?X():X;return pt[An]={type:n,blueprint:pt,template:o,queries:null,viewQuery:N,declTNode:i,data:pt.slice().fill(null,fe),bindingStartIndex:fe,expandoStartIndex:Pe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof v?v():v,pipeRegistry:"function"==typeof D?D():D,firstChild:null,schemas:U,consts:jt,incompleteFirstPass:!1}}function Xf(n,i,o,d){const h=og(i);null===o?h.push(d):(h.push(o),n.firstCreatePass&&df(n).push(d,h.length-1))}function Vg(n,i,o,d){for(let h in n)if(n.hasOwnProperty(h)){o=null===o?{}:o;const v=n[h];null===d?lf(o,i,h,v):d.hasOwnProperty(h)&&lf(o,i,d[h],v)}return o}function lf(n,i,o,d){n.hasOwnProperty(o)?n[o].push(i,d):n[o]=[i,d]}function Ya(n,i,o,d,h,v,D,N){const U=Oi(i,o);let fe,X=i.inputs;!N&&null!=X&&(fe=X[d])?(ff(n,o,fe,d,h),vs(i)&&function Jf(n,i){const o=Xi(i,n);16&o[cr]||(o[cr]|=32)}(o,i.index)):3&i.type&&(d=function Hg(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(d),h=null!=D?D(h,i.value||"",d):h,v.setProperty(U,d,h))}function cf(n,i,o,d){if(T()){const h=null===d?null:{"":-1},v=function tg(n,i){const o=n.directiveRegistry;let d=null,h=null;if(o)for(let D=0;D<o.length;D++){const N=o[D];if(Dd(i,N.selectors,!1))if(d||(d=[]),_i(N))if(null!==N.findHostDirectiveDefs){const U=[];h=h||new Map,N.findHostDirectiveDefs(N,U,h),d.unshift(...U,N),ng(n,i,U.length)}else d.unshift(N),ng(n,i,0);else{var v;h=h||new Map,null===(v=N.findHostDirectiveDefs)||void 0===v||v.call(N,N,d,h),d.push(N)}}return null===d?null:[d,h]}(n,o);let D,N;null===v?D=N=null:[D,N]=v,null!==D&&Jp(n,i,o,D,h,N),h&&function sy(n,i,o){if(i){const d=n.localNames=[];for(let h=0;h<i.length;h+=2){const v=o[i[h+1]];if(null==v)throw new xe(-301,!1);d.push(i[h],v)}}}(o,d,h)}o.mergedAttrs=yo(o.mergedAttrs,o.attrs)}function Jp(n,i,o,d,h,v){for(let Pe=0;Pe<d.length;Pe++)mi(ac(o,i),n,d[Pe].type);!function oy(n,i,o){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+o,n.providerIndexes=i}(o,n.data.length,d.length);for(let Pe=0;Pe<d.length;Pe++){const pt=d[Pe];pt.providersResolver&&pt.providersResolver(pt)}let D=!1,N=!1,U=fh(n,i,d.length,null);for(let Pe=0;Pe<d.length;Pe++){const pt=d[Pe];o.mergedAttrs=yo(o.mergedAttrs,pt.hostAttrs),ay(n,o,i,U,pt),La(U,pt,h),null!==pt.contentQueries&&(o.flags|=4),(null!==pt.hostBindings||null!==pt.hostAttrs||0!==pt.hostVars)&&(o.flags|=64);const jt=pt.type.prototype;var X,fe;!D&&(jt.ngOnChanges||jt.ngOnInit||jt.ngDoCheck)&&((null!==(X=n.preOrderHooks)&&void 0!==X?X:n.preOrderHooks=[]).push(o.index),D=!0),N||!jt.ngOnChanges&&!jt.ngDoCheck||((null!==(fe=n.preOrderCheckHooks)&&void 0!==fe?fe:n.preOrderCheckHooks=[]).push(o.index),N=!0),U++}!function jg(n,i,o){const h=i.directiveEnd,v=n.data,D=i.attrs,N=[];let U=null,X=null;for(let fe=i.directiveStart;fe<h;fe++){const Pe=v[fe],pt=o?o.get(Pe):null,mn=pt?pt.outputs:null;U=Vg(Pe.inputs,fe,U,pt?pt.inputs:null),X=Vg(Pe.outputs,fe,X,mn);const Pn=null===U||null===D||Np(i)?null:Wg(U,fe,D);N.push(Pn)}null!==U&&(U.hasOwnProperty("class")&&(i.flags|=8),U.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=N,i.inputs=U,i.outputs=X}(n,o,v)}function eg(n,i,o){const d=o.directiveStart,h=o.directiveEnd,v=o.index,D=function Ha(){return Tr.lFrame.currentDirectiveIndex}();try{Fs(v);for(let N=d;N<h;N++){const U=n.data[N],X=i[N];ns(N),(null!==U.hostBindings||0!==U.hostVars||null!==U.hostAttrs)&&tp(U,X)}}finally{Fs(-1),ns(D)}}function tp(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function ng(n,i,o){var d;i.componentOffset=o,(null!==(d=n.components)&&void 0!==d?d:n.components=[]).push(i.index)}function La(n,i,o){if(o){if(i.exportAs)for(let d=0;d<i.exportAs.length;d++)o[i.exportAs[d]]=n;_i(i)&&(o[""]=n)}}function ay(n,i,o,d,h){n.data[d]=h;const v=h.factory||(h.factory=ti(h.type)),D=new Le(v,_i(h),jc);n.blueprint[d]=D,o[d]=D,function ep(n,i,o,d,h){const v=h.hostBindings;if(v){let D=n.hostBindingOpCodes;null===D&&(D=n.hostBindingOpCodes=[]);const N=~i.index;(function zg(n){let i=n.length;for(;i>0;){const o=n[--i];if("number"==typeof o&&o<0)return o}return 0})(D)!=N&&D.push(N),D.push(o,d,v)}}(n,i,d,fh(n,o,h.hostVars,Xr),h)}function gl(n,i,o,d,h,v){const D=Oi(n,i);!function uf(n,i,o,d,h,v,D){if(null==v)n.removeAttribute(i,h,o);else{const N=null==D?de(v):D(v,d||"",h);n.setAttribute(i,h,N,o)}}(i[Ye],D,v,n.value,o,d,h)}function Gg(n,i,o,d,h,v){const D=v[i];if(null!==D){const N=d.setInput;for(let U=0;U<D.length;){const X=D[U++],fe=D[U++],Pe=D[U++];null!==N?d.setInput(o,Pe,X,fe):o[fe]=Pe}}}function Wg(n,i,o){let d=null,h=0;for(;h<o.length;){const v=o[h];if(0!==v)if(5!==v){if("number"==typeof v)break;if(n.hasOwnProperty(v)){null===d&&(d=[]);const D=n[v];for(let N=0;N<D.length;N+=2)if(D[N]===i){d.push(v,D[N+1],o[h+1]);break}}h+=2}else h+=2;else h+=4}return d}function Kg(n,i,o,d){return[n,!0,!1,i,null,0,d,o,null,null]}function ig(n,i){const o=Xi(i,n);if(Gi(o)){const d=o[An];48&o[cr]?rf(d,o,d.template,o[Ur]):o[kr]>0&&Hc(o)}}function Hc(n){for(let d=hi(n);null!==d;d=Si(d))for(let h=dn;h<d.length;h++){const v=d[h];if(Gi(v))if(512&v[cr]){const D=v[An];rf(D,v,D.template,v[Ur])}else v[kr]>0&&Hc(v)}const o=n[An].components;if(null!==o)for(let d=0;d<o.length;d++){const h=Xi(o[d],n);Gi(h)&&h[kr]>0&&Hc(h)}}function ba(n,i){const o=Xi(i,n),d=o[An];(function Da(n,i){for(let o=i.length;o<n.blueprint.length;o++)i.push(n.blueprint[o])})(d,o),Xp(d,o,o[Ur])}function zc(n,i){return n[Je]?n[Qe][qi]=i:n[Je]=i,n[Qe]=i,i}function mu(n){for(;n;){n[cr]|=32;const i=io(n);if(Ss(n)&&!i)return n;n=i}return null}function gh(n,i,o,d=!0){const h=i[be];h.begin&&h.begin();try{rf(n,i,n.template,o)}catch(D){throw d&&Gc(i,D),D}finally{h.end&&h.end()}}function Rd(n,i,o){Aa(0),i(n,o)}function og(n){return n[Li]||(n[Li]=[])}function df(n){return n.cleanup||(n.cleanup=[])}function Gc(n,i){const o=n[se],d=o?o.get(pu,null):null;d&&d.handleError(i)}function ff(n,i,o,d,h){for(let v=0;v<o.length;){const D=o[v++],N=o[v++],U=i[D],X=n.data[D];null!==X.setInput?X.setInput(U,h,d,N):U[N]=h}}function mh(n,i,o){let d=o?n.styles:null,h=o?n.classes:null,v=0;if(null!==i)for(let D=0;D<i.length;D++){const N=i[D];"number"==typeof N?v=N:1==v?h=ze(h,N):2==v&&(d=ze(d,N+": "+i[++D]+";"))}o?n.styles=d:n.stylesWithoutHost=d,o?n.classes=h:n.classesWithoutHost=h}function pf(n,i,o,d,h=!1){for(;null!==o;){const v=i[o.index];if(null!==v&&d.push(Pi(v)),Ir(v))for(let N=dn;N<v.length;N++){const U=v[N],X=U[An].firstChild;null!==X&&pf(U[An],U,X,d)}const D=o.type;if(8&D)pf(n,i,o.child,d);else if(32&D){const N=iu(o,i);let U;for(;U=N();)d.push(U)}else if(16&D){const N=hd(i,o);if(Array.isArray(N))d.push(...N);else{const U=io(i[Lt]);pf(U[An],U,N,d,!0)}}o=h?o.projectionNext:o.next}return d}class Md{get rootNodes(){const i=this._lView,o=i[An];return pf(o,i,o.firstChild,[])}constructor(i,o){this._lView=i,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ur]}set context(i){this._lView[Ur]=i}get destroyed(){return 128==(128&this._lView[cr])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[ri];if(Ir(i)){const o=i[xt],d=o?o.indexOf(this):-1;d>-1&&(ll(i,d),$t(o,d))}this._attachedToViewContainer=!1}zd(this._lView[An],this._lView)}onDestroy(i){Xf(this._lView[An],this._lView,null,i)}markForCheck(){mu(this._cdRefInjectingView||this._lView)}detach(){this._lView[cr]&=-65}reattach(){this._lView[cr]|=64}detectChanges(){gh(this._lView[An],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new xe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Dp(n,i){_c(n,i,i[Ye],2,null,null)}(this._lView[An],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new xe(902,!1);this._appRef=i}}class uy extends Md{constructor(i){super(i),this._view=i}detectChanges(){const i=this._view;gh(i[An],i,i[Ur],!1)}checkNoChanges(){}get context(){return null}}class gf extends Ka{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=wn(i);return new Wc(o,this.ngModule)}}function yh(n){const i=[];for(let o in n)n.hasOwnProperty(o)&&i.push({propName:n[o],templateName:o});return i}class Yg{constructor(i,o){this.injector=i,this.parentInjector=o}get(i,o,d){d=Kt(d);const h=this.injector.get(i,sh,d);return h!==sh||o===sh?h:this.parentInjector.get(i,o,d)}}class Wc extends $f{get inputs(){return yh(this.componentDef.inputs)}get outputs(){return yh(this.componentDef.outputs)}constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=function Fa(n){return n.map(Td).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}create(i,o,d,h){var v;let D=(h=h||this.ngModule)instanceof Fl?h:null===(v=h)||void 0===v?void 0:v.injector;D&&null!==this.componentDef.getStandaloneInjector&&(D=this.componentDef.getStandaloneInjector(D)||D);const N=D?new Yg(i,D):i,U=N.get(Vc,null);if(null===U)throw new xe(407,!1);const X=N.get(dl,null),fe=U.createRenderer(null,this.componentDef),Pe=this.componentDef.selectors[0][0]||"div",pt=d?function Ug(n,i,o){return n.selectRootElement(i,o===Ot.ShadowDom)}(fe,d,this.componentDef.encapsulation):Hd(fe,Pe,function np(n){const i=n.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(Pe)),jt=this.componentDef.onPush?288:272,mn=Zf(0,null,null,1,0,null,null,null,null,null),Pn=nf(null,mn,null,jt,null,null,U,fe,X,N,null);let nr,br;nl(Pn);try{const Gr=this.componentDef;let Sn,fi=null;Gr.findHostDirectiveDefs?(Sn=[],fi=new Map,Gr.findHostDirectiveDefs(Gr,Sn,fi),Sn.push(Gr)):Sn=[Gr];const so=function hy(n,i){const o=n[An],d=vr;return n[d]=i,Wu(o,d,2,"#host",null)}(Pn,pt),ta=function Zg(n,i,o,d,h,v,D,N){const U=h[An];!function lg(n,i,o,d){for(const h of n)i.mergedAttrs=yo(i.mergedAttrs,h.hostAttrs);null!==i.mergedAttrs&&(mh(i,i.mergedAttrs,!0),null!==o&&pd(d,o,i))}(d,n,i,D);const X=v.createRenderer(i,o),fe=nf(h,af(o),null,o.onPush?32:16,h[n.index],n,v,X,N||null,null,null);return U.firstCreatePass&&ng(U,n,d.length-1),zc(h,fe),h[n.index]=fe}(so,pt,Gr,Sn,Pn,U,fe);br=Ja(mn,vr),pt&&function cg(n,i,o,d){if(d)bi(n,o,["ng-version",Pp.full]);else{const{attrs:h,classes:v}=function $p(n){const i=[],o=[];let d=1,h=2;for(;d<n.length;){let v=n[d];if("string"==typeof v)2===h?""!==v&&i.push(v,n[++d]):8===h&&o.push(v);else{if(!fl(h))break;h=v}d++}return{attrs:i,classes:o}}(i.selectors[0]);h&&bi(n,o,h),v&&v.length>0&&js(n,o,v.join(" "))}}(fe,Gr,pt,d),void 0!==o&&function py(n,i,o){const d=n.projection=[];for(let h=0;h<i.length;h++){const v=o[h];d.push(null!=v?Array.from(v):null)}}(br,this.ngContentSelectors,o),nr=function fy(n,i,o,d,h,v){const D=vt(),N=h[An],U=Oi(D,h);Jp(N,h,D,o,null,d);for(let fe=0;fe<o.length;fe++)Wt(si(h,N,D.directiveStart+fe,D),h);eg(N,h,D),U&&Wt(U,h);const X=si(h,N,D.directiveStart+D.componentOffset,D);if(n[Ur]=h[Ur]=X,null!==v)for(const fe of v)fe(X,i);return Ku(N,D,n),X}(ta,Gr,Sn,fi,Pn,[ug]),Xp(mn,Pn,null)}finally{Zs()}return new ag(this.componentType,nr,rc(br,Pn),Pn,br)}}class ag extends Sg{constructor(i,o,d,h,v){super(),this.location=d,this._rootLView=h,this._tNode=v,this.instance=o,this.hostView=this.changeDetectorRef=new uy(h),this.componentType=i}setInput(i,o){const d=this._tNode.inputs;let h;if(null!==d&&(h=d[i])){const v=this._rootLView;ff(v[An],v,h,i,o),mu(Xi(this._tNode.index,v))}}get injector(){return new Ma(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function ug(){const n=vt();Sr(M()[An],n)}function mf(n){let i=function Xg(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const d=[n];for(;i;){let h;if(_i(n))h=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new xe(903,!1);h=i.\u0275dir}if(h){if(o){d.push(h);const D=n;D.inputs=vh(n.inputs),D.declaredInputs=vh(n.declaredInputs),D.outputs=vh(n.outputs);const N=h.hostBindings;N&&dg(n,N);const U=h.viewQuery,X=h.contentQueries;if(U&&Qg(n,U),X&&rp(n,X),_e(n.inputs,h.inputs),_e(n.declaredInputs,h.declaredInputs),_e(n.outputs,h.outputs),_i(h)&&h.data.animation){const fe=n.data;fe.animation=(fe.animation||[]).concat(h.data.animation)}}const v=h.features;if(v)for(let D=0;D<v.length;D++){const N=v[D];N&&N.ngInherit&&N(n),N===mf&&(o=!1)}}i=Object.getPrototypeOf(i)}!function gy(n){let i=0,o=null;for(let d=n.length-1;d>=0;d--){const h=n[d];h.hostVars=i+=h.hostVars,h.hostAttrs=yo(h.hostAttrs,o=yo(o,h.hostAttrs))}}(d)}function vh(n){return n===ut?{}:n===un?[]:n}function Qg(n,i){const o=n.viewQuery;n.viewQuery=o?(d,h)=>{i(d,h),o(d,h)}:i}function rp(n,i){const o=n.contentQueries;n.contentQueries=o?(d,h,v)=>{i(d,h,v),o(d,h,v)}:i}function dg(n,i){const o=n.hostBindings;n.hostBindings=o?(d,h)=>{i(d,h),o(d,h)}:i}function Ft(n){return!!Rn(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Rn(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Mr(n,i,o){return n[i]=o}function Mi(n,i,o){return!Object.is(n[i],o)&&(n[i]=o,!0)}function yu(n,i,o,d){const h=M();return Mi(h,aa(),i)&&(F(),gl(Vr(),h,n,i,o,d)),yu}function vu(n,i,o,d){return Mi(n,aa(),o)?i+de(o)+d:Xr}function rm(n,i,o,d,h,v,D,N){const U=M(),X=F(),fe=n+vr,Pe=X.firstCreatePass?function E_(n,i,o,d,h,v,D,N,U){const X=i.consts,fe=Wu(i,n,4,D||null,Ns(X,N));cf(i,o,fe,Ns(X,U)),Sr(i,fe);const Pe=fe.tView=Zf(2,fe,d,h,v,i.directiveRegistry,i.pipeRegistry,null,i.schemas,X);return null!==i.queries&&(i.queries.template(i,fe),Pe.queries=i.queries.embeddedTView(fe)),fe}(fe,X,U,i,o,d,h,v,D):X.data[fe];ii(Pe,!1);const pt=U[Ye].createComment("");wo(X,U,pt,Pe),Wt(pt,U),zc(U,U[fe]=Kg(pt,U,pt,Pe)),Oo(Pe)&&qu(X,U,Pe),null!=D&&sf(U,Pe,N)}function Ey(n,i,o){const d=M();return Mi(d,aa(),i)&&Ya(F(),Vr(),d,n,i,d[Ye],o,!1),Ey}function hg(n,i,o,d,h){const D=h?"class":"style";ff(n,o,i.inputs[D],D,d)}function ap(n,i,o,d){const h=M(),v=F(),D=vr+n,N=h[Ye],U=v.firstCreatePass?function Iy(n,i,o,d,h,v){const D=i.consts,U=Wu(i,n,2,d,Ns(D,h));return cf(i,o,U,Ns(D,v)),null!==U.attrs&&mh(U,U.attrs,!1),null!==U.mergedAttrs&&mh(U,U.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,U),U}(D,v,h,i,o,d):v.data[D],X=h[D]=Hd(N,i,function mo(){return Tr.lFrame.currentNamespace}()),fe=Oo(U);return ii(U,!0),pd(N,X,U),32!=(32&U.flags)&&wo(v,h,X,U),0===function oa(){return Tr.lFrame.elementDepthCount}()&&Wt(X,h),function b(){Tr.lFrame.elementDepthCount++}(),fe&&(qu(v,h,U),Ku(v,U,h)),null!==d&&sf(h,U),ap}function Pd(){let n=vt();Qi()?hs():(n=n.parent,ii(n,!1));const i=n;!function q(){Tr.lFrame.elementDepthCount--}();const o=F();return o.firstCreatePass&&(Sr(o,n),ei(n)&&o.queries.elementEnd(n)),null!=i.classesWithoutHost&&function Kr(n){return 0!=(8&n.flags)}(i)&&hg(o,i,M(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function Br(n){return 0!=(16&n.flags)}(i)&&hg(o,i,M(),i.stylesWithoutHost,!1),Pd}function im(n,i,o,d){return ap(n,i,o,d),Pd(),im}function sm(n,i,o){const d=M(),h=F(),v=n+vr,D=h.firstCreatePass?function wy(n,i,o,d,h){const v=i.consts,D=Ns(v,d),N=Wu(i,n,8,"ng-container",D);return null!==D&&mh(N,D,!0),cf(i,o,N,Ns(v,h)),null!==i.queries&&i.queries.elementStart(i,N),N}(v,h,d,i,o):h.data[v];ii(D,!0);const N=d[v]=d[Ye].createComment("");return wo(h,d,N,D),Wt(N,d),Oo(D)&&(qu(h,d,D),Ku(h,D,d)),null!=o&&sf(d,D),sm}function lp(){let n=vt();const i=F();return Qi()?hs():(n=n.parent,ii(n,!1)),i.firstCreatePass&&(Sr(i,n),ei(n)&&i.queries.elementEnd(n)),lp}function _u(n,i,o){return sm(n,i,o),lp(),_u}function om(){return M()}function Cy(n){return!!n&&"function"==typeof n.then}function am(n){return!!n&&"function"==typeof n.subscribe}const lv=am;function by(n,i,o,d){const h=M(),v=F(),D=vt();return function cm(n,i,o,d,h,v,D){const N=Oo(d),X=n.firstCreatePass&&df(n),fe=i[Ur],Pe=og(i);let pt=!0;if(3&d.type||D){const Pn=Oi(d,i),nr=D?D(Pn):Pn,br=Pe.length,Gr=D?fi=>D(Pi(fi[d.index])):d.index;let Sn=null;if(!D&&N&&(Sn=function w_(n,i,o,d){const h=n.cleanup;if(null!=h)for(let v=0;v<h.length-1;v+=2){const D=h[v];if(D===o&&h[v+1]===d){const N=i[Li],U=h[v+2];return N.length>U?N[U]:null}"string"==typeof D&&(v+=2)}return null}(n,i,h,d.index)),null!==Sn)(Sn.__ngLastListenerFn__||Sn).__ngNextListenerFn__=v,Sn.__ngLastListenerFn__=v,pt=!1;else{v=um(d,i,fe,v,!1);const fi=o.listen(nr,h,v);Pe.push(v,fi),X&&X.push(h,Gr,br,br+1)}}else v=um(d,i,fe,v,!1);const jt=d.outputs;let mn;if(pt&&null!==jt&&(mn=jt[h])){const Pn=mn.length;if(Pn)for(let nr=0;nr<Pn;nr+=2){const so=i[mn[nr]][mn[nr+1]].subscribe(v),ta=Pe.length;Pe.push(v,so),X&&X.push(h,d.index,ta,-(ta+1))}}}(v,h,h[Ye],D,n,i,d),by}function cv(n,i,o,d){try{return zi(6,i,o),!1!==o(d)}catch(h){return Gc(n,h),!1}finally{zi(7,i,o)}}function um(n,i,o,d,h){return function v(D){if(D===Function)return d;mu(n.componentOffset>-1?Xi(n.index,i):i);let U=cv(i,o,d,D),X=v.__ngNextListenerFn__;for(;X;)U=cv(i,o,X,D)&&U,X=X.__ngNextListenerFn__;return h&&!1===U&&(D.preventDefault(),D.returnValue=!1),U}}function uv(n=1){return function fs(n){return(Tr.lFrame.contextLView=function xa(n,i){for(;n>0;)i=i[Vt],n--;return i}(n,Tr.lFrame.contextLView))[Ur]}(n)}function Dy(n,i){let o=null;const d=function gu(n){const i=n.attrs;if(null!=i){const o=i.indexOf(5);if(!(1&o))return i[o+1]}return null}(n);for(let h=0;h<i.length;h++){const v=i[h];if("*"!==v){if(null===d?Dd(n,v,!0):Vu(d,v))return h}else o=h}return o}function Ty(n){const i=M()[Lt][Ci];if(!i.projection){const d=i.projection=Di(n?n.length:1,null),h=d.slice();let v=i.child;for(;null!==v;){const D=n?Dy(v,n):0;null!==D&&(h[D]?h[D].projectionNext=v:d[D]=v,h[D]=v),v=v.next}}}function dm(n,i=0,o){const d=M(),h=F(),v=Wu(h,vr+n,16,null,o||null);null===v.projection&&(v.projection=i),hs(),32!=(32&v.flags)&&function kh(n,i,o){Nh(i[Ye],0,i,o,Oa(n,o,i),cd(o.parent||i[Ci],o,i))}(h,d,v)}function hm(n,i,o){return Sy(n,"",i,"",o),hm}function Sy(n,i,o,d,h){const v=M(),D=vu(v,i,o,d);return D!==Xr&&Ya(F(),Vr(),v,n,D,v[Ye],h,!1),Sy}function ym(n,i){return n<<17|i<<2}function Zu(n){return n>>17&32767}function vm(n){return 2|n}function Xu(n){return(131068&n)>>2}function Ay(n,i){return-131069&n|i<<2}function xy(n){return 1|n}function _m(n,i,o,d,h){const v=n[o+1],D=null===i;let N=d?Zu(v):Xu(v),U=!1;for(;0!==N&&(!1===U||D);){const fe=n[N+1];gv(n[N],i)&&(U=!0,n[N+1]=d?xy(fe):vm(fe)),N=d?Zu(fe):Xu(fe)}U&&(n[o+1]=d?vm(v):xy(v))}function gv(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&S(n,i)>=0}function bm(n,i){return function Kc(n,i,o,d){const h=M(),v=F(),D=function Ys(n){const i=Tr.lFrame,o=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,o}(2);v.firstUpdatePass&&function $y(n,i,o,d){const h=n.data;if(null===h[o+1]){const v=h[cs()],D=function Ly(n,i){return i>=n.expandoStartIndex}(n,o);(function Sm(n,i){return 0!=(n.flags&(i?8:16))})(v,d)&&null===i&&!D&&(i=!1),i=function _v(n,i,o,d){const h=function Rs(n){const i=Tr.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}(n);let v=d?i.residualClasses:i.residualStyles;if(null===h)0===(d?i.classBindings:i.styleBindings)&&(o=Od(o=Tm(null,n,i,o,d),i.attrs,d),v=null);else{const D=i.directiveStylingLast;if(-1===D||n[D]!==h)if(o=Tm(h,n,i,o,d),null===v){let U=function Dm(n,i,o){const d=o?i.classBindings:i.styleBindings;if(0!==Xu(d))return n[Zu(d)]}(n,i,d);void 0!==U&&Array.isArray(U)&&(U=Tm(null,n,i,U[1],d),U=Od(U,i.attrs,d),function Fi(n,i,o,d){n[Zu(o?i.classBindings:i.styleBindings)]=d}(n,i,d,U))}else v=function Ev(n,i,o){let d;const h=i.directiveEnd;for(let v=1+i.directiveStylingLast;v<h;v++)d=Od(d,n[v].hostAttrs,o);return Od(d,i.attrs,o)}(n,i,d)}return void 0!==v&&(d?i.residualClasses=v:i.residualStyles=v),o}(h,v,i,d),function My(n,i,o,d,h,v){let D=v?i.classBindings:i.styleBindings,N=Zu(D),U=Xu(D);n[d]=o;let fe,X=!1;if(Array.isArray(o)?(fe=o[1],(null===fe||S(o,fe)>0)&&(X=!0)):fe=o,h)if(0!==U){const pt=Zu(n[N+1]);n[d+1]=ym(pt,N),0!==pt&&(n[pt+1]=Ay(n[pt+1],d)),n[N+1]=function up(n,i){return 131071&n|i<<17}(n[N+1],d)}else n[d+1]=ym(N,0),0!==N&&(n[N+1]=Ay(n[N+1],d)),N=d;else n[d+1]=ym(U,0),0===N?N=d:n[U+1]=Ay(n[U+1],d),U=d;X&&(n[d+1]=vm(n[d+1])),_m(n,fe,d,!0),_m(n,fe,d,!1),function Py(n,i,o,d,h){const v=h?n.residualClasses:n.residualStyles;null!=v&&"string"==typeof i&&S(v,i)>=0&&(o[d+1]=xy(o[d+1]))}(i,fe,n,d,v),D=ym(N,U),v?i.classBindings=D:i.styleBindings=D}(h,v,i,o,D,d)}}(v,n,D,d),i!==Xr&&Mi(h,D,i)&&function By(n,i,o,d,h,v,D,N){if(!(3&i.type))return;const U=n.data,X=U[N+1],fe=function C_(n){return 1==(1&n)}(X)?wv(U,i,o,h,Xu(X),D):void 0;vf(fe)||(vf(v)||function pv(n){return 2==(2&n)}(X)&&(v=wv(U,null,o,h,N,D)),function Ec(n,i,o,d,h){if(i)h?n.addClass(o,d):n.removeClass(o,d);else{let v=-1===d.indexOf("-")?void 0:Uo.DashCase;null==h?n.removeStyle(o,d,v):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),v|=Uo.Important),n.setStyle(o,d,h,v))}}(d,D,go(cs(),o),h,v))}(v,v.data[cs()],h,h[Ye],n,h[D+1]=function Cv(n,i){return null==n||""===n||("string"==typeof i?n+=i:"object"==typeof n&&(n=Me(Jo(n)))),n}(i,o),d,D)}(n,i,null,!0),bm}function Tm(n,i,o,d,h){let v=null;const D=o.directiveEnd;let N=o.directiveStylingLast;for(-1===N?N=o.directiveStart:N++;N<D&&(v=i[N],d=Od(d,v.hostAttrs,h),v!==n);)N++;return null!==n&&(o.directiveStylingLast=N),d}function Od(n,i,o){const d=o?1:2;let h=-1;if(null!==i)for(let v=0;v<i.length;v++){const D=i[v];"number"==typeof D?h=D:h===d&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),ui(n,D,!!o||i[++v]))}return void 0===n?null:n}function wv(n,i,o,d,h,v){const D=null===i;let N;for(;h>0;){const U=n[h],X=Array.isArray(U),fe=X?U[1]:U,Pe=null===fe;let pt=o[h+1];pt===Xr&&(pt=Pe?un:void 0);let jt=Pe?Pr(pt,d):fe===d?pt:void 0;if(X&&!vf(jt)&&(jt=Pr(U,d)),vf(jt)&&(N=jt,D))return N;const mn=n[h+1];h=D?Zu(mn):Xu(mn)}if(null!==i){let U=v?i.residualClasses:i.residualStyles;null!=U&&(N=Pr(U,d))}return N}function vf(n){return void 0!==n}function bv(n,i=""){const o=M(),d=F(),h=n+vr,v=d.firstCreatePass?Wu(d,h,1,i,null):d.data[h],D=o[h]=function Kl(n,i){return n.createText(i)}(o[Ye],i);wo(d,o,D,v),ii(v,!1)}function fg(n){return Am("",n,""),fg}function Am(n,i,o){const d=M(),h=vu(d,n,i,o);return h!==Xr&&function Ul(n,i,o){const d=go(i,n);!function ql(n,i,o){n.setValue(i,o)}(n[Ye],d,o)}(d,cs(),h),Am}const Ef=void 0;var Gy=["en",[["a","p"],["AM","PM"],Ef],[["AM","PM"],Ef,Ef],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ef,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ef,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ef,"{1} 'at' {0}",Ef],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function zy(n){const o=Math.floor(Math.abs(n)),d=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===d?1:5}];let If={};function Mm(n){const i=function Om(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=pp(i);if(o)return o;const d=i.split("-")[0];if(o=pp(d),o)return o;if("en"===d)return Gy;throw new xe(701,!1)}function Pm(n){return Mm(n)[Fr.PluralCase]}function pp(n){return n in If||(If[n]=Gn.ng&&Gn.ng.common&&Gn.ng.common.locales&&Gn.ng.common.locales[n]),If[n]}var Fr=(()=>((Fr=Fr||{})[Fr.LocaleId=0]="LocaleId",Fr[Fr.DayPeriodsFormat=1]="DayPeriodsFormat",Fr[Fr.DayPeriodsStandalone=2]="DayPeriodsStandalone",Fr[Fr.DaysFormat=3]="DaysFormat",Fr[Fr.DaysStandalone=4]="DaysStandalone",Fr[Fr.MonthsFormat=5]="MonthsFormat",Fr[Fr.MonthsStandalone=6]="MonthsStandalone",Fr[Fr.Eras=7]="Eras",Fr[Fr.FirstDayOfWeek=8]="FirstDayOfWeek",Fr[Fr.WeekendRange=9]="WeekendRange",Fr[Fr.DateFormat=10]="DateFormat",Fr[Fr.TimeFormat=11]="TimeFormat",Fr[Fr.DateTimeFormat=12]="DateTimeFormat",Fr[Fr.NumberSymbols=13]="NumberSymbols",Fr[Fr.NumberFormats=14]="NumberFormats",Fr[Fr.CurrencyCode=15]="CurrencyCode",Fr[Fr.CurrencySymbol=16]="CurrencySymbol",Fr[Fr.CurrencyName=17]="CurrencyName",Fr[Fr.Currencies=18]="Currencies",Fr[Fr.Directionality=19]="Directionality",Fr[Fr.PluralCase=20]="PluralCase",Fr[Fr.ExtraData=21]="ExtraData",Fr))();const gp="en-US";let yp=gp;function Ig(n,i,o,d,h){if(n=Ee(n),Array.isArray(n))for(let v=0;v<n.length;v++)Ig(n[v],i,o,d,h);else{const v=F(),D=M();let N=Fu(n)?n:Ee(n.provide),U=Lf(n);const X=vt(),fe=1048575&X.providerIndexes,Pe=X.directiveStart,pt=X.providerIndexes>>20;if(Fu(n)||!n.multi){const jt=new Le(U,h,jc),mn=Hm(N,i,h?fe:fe+pt,Pe);-1===mn?(mi(ac(X,D),v,N),Jy(v,n,i.length),i.push(N),X.directiveStart++,X.directiveEnd++,h&&(X.providerIndexes+=1048576),o.push(jt),D.push(jt)):(o[mn]=jt,D[mn]=jt)}else{const jt=Hm(N,i,fe+pt,Pe),mn=Hm(N,i,fe,fe+pt),nr=mn>=0&&o[mn];if(h&&!nr||!h&&!(jt>=0&&o[jt])){mi(ac(X,D),v,N);const br=function Qv(n,i,o,d,h){const v=new Le(n,o,jc);return v.multi=[],v.index=i,v.componentProviders=0,Xv(v,h,d&&!o),v}(h?y0:zm,o.length,h,d,U);!h&&nr&&(o[mn].providerFactory=br),Jy(v,n,i.length,0),i.push(N),X.directiveStart++,X.directiveEnd++,h&&(X.providerIndexes+=1048576),o.push(br),D.push(br)}else Jy(v,n,jt>-1?jt:mn,Xv(o[h?mn:jt],U,!h&&d));!h&&d&&nr&&o[mn].componentProviders++}}}function Jy(n,i,o,d){const h=Fu(i),v=function Dg(n){return!!n.useClass}(i);if(h||v){const U=(v?Ee(i.useClass):i).prototype.ngOnDestroy;if(U){const X=n.destroyHooks||(n.destroyHooks=[]);if(!h&&i.multi){const fe=X.indexOf(o);-1===fe?X.push(o,[d,U]):X[fe+1].push(d,U)}else X.push(o,U)}}}function Xv(n,i,o){return o&&n.componentProviders++,n.multi.push(i)-1}function Hm(n,i,o,d){for(let h=o;h<d;h++)if(i[h]===n)return h;return-1}function zm(n,i,o,d){return Gm(this.multi,[])}function y0(n,i,o,d){const h=this.multi;let v;if(this.providerFactory){const D=this.providerFactory.componentProviders,N=si(o,o[An],this.providerFactory.index,d);v=N.slice(0,D),Gm(h,v);for(let U=D;U<N.length;U++)v.push(N[U])}else v=[],Gm(h,v);return v}function Gm(n,i){for(let o=0;o<n.length;o++)i.push((0,n[o])());return i}function Dh(n,i=[]){return o=>{o.providersResolver=(d,h)=>function Eg(n,i,o){const d=F();if(d.firstCreatePass){const h=_i(n);Ig(o,d.data,d.blueprint,h,!0),Ig(i,d.data,d.blueprint,h,!1)}}(d,h?h(n):n,i)}}class Xa{}class ml{}function Jv(n,i){return new wp(n,null!=i?i:null)}class wp extends Xa{constructor(i,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new gf(this);const d=Xn(i);this._bootstrapComponents=Na(d.bootstrap),this._r3Injector=Xh(i,o,[{provide:Xa,useValue:this},{provide:Ka,useValue:this.componentFactoryResolver}],Me(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class Tf extends ml{constructor(i){super(),this.moduleType=i}create(i){return new wp(this.moduleType,i)}}class Vl extends Xa{constructor(i,o,d){super(),this.componentFactoryResolver=new gf(this),this.instance=null;const h=new Hh([...i,{provide:Xa,useValue:this},{provide:Ka,useValue:this.componentFactoryResolver}],o||hu(),d,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function ev(n,i,o=null){return new Vl(n,i,o).injector}let tv=(()=>{class n{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const d=bg(0,o.type),h=d.length>0?ev([d],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,h)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=kt({token:n,providedIn:"environment",factory:()=>new n(yr(Fl))}),n})();function Sf(n){n.getStandaloneInjector=i=>i.get(tv).getOrCreateStandaloneInjector(n)}function i_(n,i,o){const d=ts()+n,h=M();return h[d]===Xr?Mr(h,d,o?i.call(o):i()):function oi(n,i){return n[i]}(h,d)}function r(n,i,o,d,h,v,D){const N=i+o;return function Ms(n,i,o,d){const h=Mi(n,i,o);return Mi(n,i+1,d)||h}(n,N,h,v)?Mr(n,N+2,D?d.call(D,h,v):d(h,v)):function Cp(n,i){const o=n[i];return o===Xr?void 0:o}(n,N+2)}function c(n,i){const o=F();let d;const h=n+vr;var v;o.firstCreatePass?(d=function f(n,i){if(i)for(let o=i.length-1;o>=0;o--){const d=i[o];if(n===d.name)return d}}(i,o.pipeRegistry),o.data[h]=d,d.onDestroy&&(null!==(v=o.destroyHooks)&&void 0!==v?v:o.destroyHooks=[]).push(h,d.onDestroy)):d=o.data[h];const D=d.factory||(d.factory=ti(d.type)),N=Cr(jc);try{const U=El(!1),X=D();return El(U),function I_(n,i,o,d){o>=n.data.length&&(n.data[o]=null,n.blueprint[o]=null),i[o]=d}(o,M(),h,X),X}finally{Cr(N)}}function G(n,i,o,d){const h=n+vr,v=M(),D=function as(n,i){return n[i]}(v,h);return function Bt(n,i){return n[An].data[i].pure}(v,h)?r(v,ts(),i,D.transform,o,d,D):D.transform(o,d)}function Mn(n){return i=>{setTimeout(n,void 0,i)}}const Fn=class fn extends _.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,o,d){let h=i,v=o||(()=>null),D=d;if(i&&"object"==typeof i){var N,U,X;const Pe=i;h=null===(N=Pe.next)||void 0===N?void 0:N.bind(Pe),v=null===(U=Pe.error)||void 0===U?void 0:U.bind(Pe),D=null===(X=Pe.complete)||void 0===X?void 0:X.bind(Pe)}this.__isAsync&&(v=Mn(v),h&&(h=Mn(h)),D&&(D=Mn(D)));const fe=super.subscribe({next:h,error:v,complete:D});return i instanceof m.w0&&i.add(fe),fe}};function gr(){return this._results[Symbol.iterator]()}class ai{get changes(){return this._changes||(this._changes=new Fn)}constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=ai.prototype;o[Symbol.iterator]||(o[Symbol.iterator]=gr)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){const d=this;d.dirty=!1;const h=function qr(n){return n.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function Gl(n,i,o){if(n.length!==i.length)return!1;for(let d=0;d<n.length;d++){let h=n[d],v=i[d];if(o&&(h=o(h),v=o(v)),v!==h)return!1}return!0}(d._results,h,o))&&(d._results=h,d.length=h.length,d.last=h[this.length-1],d.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let ki=(()=>{class n{}return n.__NG_ELEMENT_ID__=Ps,n})();const li=ki,$a=class extends li{constructor(i,o,d){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=d}createEmbeddedView(i,o){const d=this._declarationTContainer.tView,h=nf(this._declarationLView,d,i,16,null,d.declTNode,null,null,null,null,o||null);h[Xt]=this._declarationLView[this._declarationTContainer.index];const D=this._declarationLView[vn];return null!==D&&(h[vn]=D.createEmbeddedView(d)),Xp(d,h,i),new Md(h)}};function Ps(){return bs(vt(),M())}function bs(n,i){return 4&n.type?new $a(i,n,rc(n,i)):null}let Ba=(()=>{class n{}return n.__NG_ELEMENT_ID__=Ah,n})();function Ah(){return hE(vt(),M())}const gI=Ba,uE=class extends gI{constructor(i,o,d){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=d}get element(){return rc(this._hostTNode,this._hostLView)}get injector(){return new Ma(this._hostTNode,this._hostLView)}get parentInjector(){const i=Ji(this._hostTNode,this._hostLView);if(Es(i)){const o=Qs(i,this._hostLView),d=Xs(i);return new Ma(o[An].data[d+8],o)}return new Ma(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=dE(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-dn}createEmbeddedView(i,o,d){let h,v;"number"==typeof d?h=d:null!=d&&(h=d.index,v=d.injector);const D=i.createEmbeddedView(o||{},v);return this.insert(D,h),D}createComponent(i,o,d,h,v){const D=i&&!function Dl(n){return"function"==typeof n}(i);let N;if(D)N=o;else{const Pe=o||{};N=Pe.index,d=Pe.injector,h=Pe.projectableNodes,v=Pe.environmentInjector||Pe.ngModuleRef}const U=D?i:new Wc(wn(i)),X=d||this.parentInjector;if(!v&&null==U.ngModule){const pt=(D?X:this.parentInjector).get(Fl,null);pt&&(v=pt)}const fe=U.create(X,h,void 0,v);return this.insert(fe.hostView,N),fe}insert(i,o){const d=i._lView,h=d[An];if(function Va(n){return Ir(n[ri])}(d)){const fe=this.indexOf(i);if(-1!==fe)this.detach(fe);else{const Pe=d[ri],pt=new uE(Pe,Pe[Ci],Pe[ri]);pt.detach(pt.indexOf(i))}}const v=this._adjustIndex(o),D=this._lContainer;!function Ml(n,i,o,d){const h=dn+d,v=o.length;d>0&&(o[h-1][qi]=i),d<v-dn?(i[qi]=o[h],Yr(o,dn+d,i)):(o.push(i),i[qi]=null),i[ri]=o;const D=i[Xt];null!==D&&o!==D&&function Ph(n,i){const o=n[tn];i[Lt]!==i[ri][ri][Lt]&&(n[mt]=!0),null===o?n[tn]=[i]:o.push(i)}(D,i);const N=i[vn];null!==N&&N.insertView(n),i[cr]|=64}(h,d,D,v);const N=Zl(v,D),U=d[Ye],X=su(U,D[at]);return null!==X&&function Rh(n,i,o,d,h,v){d[ji]=h,d[Ci]=i,_c(n,d,o,1,h,v)}(h,D[Ci],U,d,X,N),i.attachToViewContainerRef(),Yr(A0(D),v,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=dE(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),d=ll(this._lContainer,o);d&&($t(A0(this._lContainer),o),zd(d[An],d))}detach(i){const o=this._adjustIndex(i,-1),d=ll(this._lContainer,o);return d&&null!=$t(A0(this._lContainer),o)?new Md(d):null}_adjustIndex(i,o=0){return null==i?this.length+o:i}};function dE(n){return n[xt]}function A0(n){return n[xt]||(n[xt]=[])}function hE(n,i){let o;const d=i[n.index];if(Ir(d))o=d;else{let h;if(8&n.type)h=Pi(d);else{const v=i[Ye];h=v.createComment("");const D=Oi(n,i);Pl(v,su(v,D),h,function Ol(n,i){return n.nextSibling(i)}(v,D),!1)}i[n.index]=o=Kg(d,i,h,n),zc(i,o)}return new uE(o,n,i)}class x0{constructor(i){this.queryList=i,this.matches=null}clone(){return new x0(this.queryList)}setDirty(){this.queryList.setDirty()}}class R0{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const d=null!==i.contentQueries?i.contentQueries[0]:o.length,h=[];for(let v=0;v<d;v++){const D=o.getByIndex(v);h.push(this.queries[D.indexInDeclarationView].clone())}return new R0(h)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==IE(i,o).matches&&this.queries[o].setDirty()}}class fE{constructor(i,o,d=null){this.predicate=i,this.flags=o,this.read=d}}class M0{constructor(i=[]){this.queries=i}elementStart(i,o){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let d=0;d<this.length;d++){const h=null!==o?o.length:0,v=this.getByIndex(d).embeddedTView(i,h);v&&(v.indexInDeclarationView=d,null!==o?o.push(v):o=[v])}return null!==o?new M0(o):null}template(i,o){for(let d=0;d<this.queries.length;d++)this.queries[d].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class P0{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new P0(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let d=i.parent;for(;null!==d&&8&d.type&&d.index!==o;)d=d.parent;return o===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const d=this.metadata.predicate;if(Array.isArray(d))for(let h=0;h<d.length;h++){const v=d[h];this.matchTNodeWithReadOption(i,o,mI(o,v)),this.matchTNodeWithReadOption(i,o,hn(o,i,v,!1,!1))}else d===ki?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,hn(o,i,d,!1,!1))}matchTNodeWithReadOption(i,o,d){if(null!==d){const h=this.metadata.read;if(null!==h)if(h===ic||h===Ba||h===ki&&4&o.type)this.addMatch(o.index,-2);else{const v=hn(o,i,h,!1,!1);null!==v&&this.addMatch(o.index,v)}else this.addMatch(o.index,d)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function mI(n,i){const o=n.localNames;if(null!==o)for(let d=0;d<o.length;d+=2)if(o[d]===i)return o[d+1];return null}function vI(n,i,o,d){return-1===o?function yI(n,i){return 11&n.type?rc(n,i):4&n.type?bs(n,i):null}(i,n):-2===o?function _I(n,i,o){return o===ic?rc(i,n):o===ki?bs(i,n):o===Ba?hE(i,n):void 0}(n,i,d):si(n,n[An],o,i)}function pE(n,i,o,d){const h=i[vn].queries[d];if(null===h.matches){const v=n.data,D=o.matches,N=[];for(let U=0;U<D.length;U+=2){const X=D[U];N.push(X<0?null:vI(i,v[X],D[U+1],o.metadata.read))}h.matches=N}return h.matches}function O0(n,i,o,d){const h=n.queries.getByIndex(o),v=h.matches;if(null!==v){const D=pE(n,i,h,o);for(let N=0;N<v.length;N+=2){const U=v[N];if(U>0)d.push(D[N/2]);else{const X=v[N+1],fe=i[-U];for(let Pe=dn;Pe<fe.length;Pe++){const pt=fe[Pe];pt[Xt]===pt[ri]&&O0(pt[An],pt,X,d)}if(null!==fe[tn]){const Pe=fe[tn];for(let pt=0;pt<Pe.length;pt++){const jt=Pe[pt];O0(jt[An],jt,X,d)}}}}}return d}function gE(n){const i=M(),o=F(),d=tl();Aa(d+1);const h=IE(o,d);if(n.dirty&&function Do(n){return 4==(4&n[cr])}(i)===(2==(2&h.metadata.flags))){if(null===h.matches)n.reset([]);else{const v=h.crossesNgTemplate?O0(o,i,d,[]):pE(o,i,h,d);n.reset(v,fu),n.notifyOnChanges()}return!0}return!1}function mE(n,i,o){const d=F();d.firstCreatePass&&(EE(d,new fE(n,i,o),-1),2==(2&i)&&(d.staticViewQueries=!0)),_E(d,M(),i)}function yE(n,i,o,d){const h=F();if(h.firstCreatePass){const v=vt();EE(h,new fE(i,o,d),v.index),function II(n,i){const o=n.contentQueries||(n.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,i)}(h,n),2==(2&o)&&(h.staticContentQueries=!0)}_E(h,M(),o)}function vE(){return function EI(n,i){return n[vn].queries[i].queryList}(M(),tl())}function _E(n,i,o){const d=new ai(4==(4&o));Xf(n,i,d,d.destroy),null===i[vn]&&(i[vn]=new R0),i[vn].queries.push(new x0(d))}function EE(n,i,o){null===n.queries&&(n.queries=new M0),n.queries.track(new P0(i,o))}function IE(n,i){return n.queries.getByIndex(i)}function k0(n){return!!Xn(n)}function f_(...n){}const BE=new Ni("Application Initializer");let p_=(()=>{class n{constructor(o){this.appInits=o,this.resolve=f_,this.reject=f_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,h)=>{this.resolve=d,this.reject=h})}runInitializers(){if(this.initialized)return;const o=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const v=this.appInits[h]();if(Cy(v))o.push(v);else if(lv(v)){const D=new Promise((N,U)=>{v.subscribe({complete:N,error:U})});o.push(D)}}Promise.all(o).then(()=>{d()}).catch(h=>{this.reject(h)}),0===o.length&&d(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(yr(BE,8))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const UE=new Ni("AppId",{providedIn:"root",factory:function VE(){return`${B0()}${B0()}${B0()}`}});function B0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const jE=new Ni("Platform Initializer"),jI=new Ni("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let HI=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const g_=new Ni("LocaleId",{providedIn:"root",factory:()=>mr(g_,bn.Optional|bn.SkipSelf)||function zI(){return typeof $localize<"u"&&$localize.locale||gp}()}),GI=new Ni("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class WI{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}let KI=(()=>{class n{compileModuleSync(o){return new Tf(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const d=this.compileModuleSync(o),v=Na(Xn(o).declarations).reduce((D,N)=>{const U=wn(N);return U&&D.push(new Wc(U)),D},[]);return new WI(d,v)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ZI=(()=>Promise.resolve(0))();function U0(n){typeof Zone>"u"?ZI.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class nd{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Fn(!1),this.onMicrotaskEmpty=new Fn(!1),this.onStable=new Fn(!1),this.onError=new Fn(!1),typeof Zone>"u")throw new xe(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!d&&o,h.shouldCoalesceRunChangeDetection=d,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function XI(){let n=Gn.requestAnimationFrame,i=Gn.cancelAnimationFrame;if(typeof Zone<"u"&&n&&i){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const d=i[Zone.__symbol__("OriginalDelegate")];d&&(i=d)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function ew(n){const i=()=>{!function JI(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Gn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,j0(n),n.isCheckStableRunning=!0,V0(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),j0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,d,h,v,D,N)=>{try{return GE(n),o.invokeTask(h,v,D,N)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===v.type||n.shouldCoalesceRunChangeDetection)&&i(),WE(n)}},onInvoke:(o,d,h,v,D,N,U)=>{try{return GE(n),o.invoke(h,v,D,N,U)}finally{n.shouldCoalesceRunChangeDetection&&i(),WE(n)}},onHasTask:(o,d,h,v)=>{o.hasTask(h,v),d===h&&("microTask"==v.change?(n._hasPendingMicrotasks=v.microTask,j0(n),V0(n)):"macroTask"==v.change&&(n.hasPendingMacrotasks=v.macroTask))},onHandleError:(o,d,h,v)=>(o.handleError(h,v),n.runOutsideAngular(()=>n.onError.emit(v)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!nd.isInAngularZone())throw new xe(909,!1)}static assertNotInAngularZone(){if(nd.isInAngularZone())throw new xe(909,!1)}run(i,o,d){return this._inner.run(i,o,d)}runTask(i,o,d,h){const v=this._inner,D=v.scheduleEventTask("NgZoneEvent: "+h,i,QI,f_,f_);try{return v.runTask(D,o,d)}finally{v.cancelTask(D)}}runGuarded(i,o,d){return this._inner.runGuarded(i,o,d)}runOutsideAngular(i){return this._outer.run(i)}}const QI={};function V0(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function j0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function GE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function WE(n){n._nesting--,V0(n)}class tw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Fn,this.onMicrotaskEmpty=new Fn,this.onStable=new Fn,this.onError=new Fn}run(i,o,d){return i.apply(o,d)}runGuarded(i,o,d){return i.apply(o,d)}runOutsideAngular(i){return i()}runTask(i,o,d,h){return i.apply(o,d)}}const KE=new Ni(""),qE=new Ni("");let H0,nw=(()=>{class n{constructor(o,d,h){this._ngZone=o,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,H0||(function rw(n){H0=n}(h),h.addToWindow(d)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{nd.assertNotInAngularZone(),U0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())U0(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(o)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,d,h){let v=-1;d&&d>0&&(v=setTimeout(()=>{this._callbacks=this._callbacks.filter(D=>D.timeoutId!==v),o(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:o,timeoutId:v,updateCb:h})}whenStable(o,d,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,d,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,d,h){return[]}}return n.\u0275fac=function(o){return new(o||n)(yr(nd),yr(YE),yr(qE))},n.\u0275prov=kt({token:n,factory:n.\u0275fac}),n})(),YE=(()=>{class n{constructor(){this._applications=new Map}registerApplication(o,d){this._applications.set(o,d)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,d=!0){var h,v;return null!==(h=null===(v=H0)||void 0===v?void 0:v.findTestabilityInTree(this,o,d))&&void 0!==h?h:null}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Af=!1;let bp=null;const z0=new Ni("PlatformDestroyListeners"),XE=new Ni("appBootstrapListener");class ow{constructor(i,o){this.name=i,this.token=o}}function cw(n){const{rootComponent:i,appProviders:o,platformProviders:d}=n;Af&&void 0!==i&&function Uf(n){if(function Vf(n){if(!wn(n))throw new xe(906,`The ${_t(n)} is not an Angular component, make sure it has the \`@Component\` decorator.`)}(n),!wn(n).standalone)throw new xe(907,`The ${_t(n)} component is not marked as standalone, but Angular expects to have a standalone component here. Please make sure the ${_t(n)} component has the \`standalone: true\` flag in the decorator.`)}(i);const h=function lw(n=[]){if(bp)return bp;const i=function JE(n=[],i){return Gu.create({name:i,providers:[{provide:jh,useValue:"platform"},{provide:z0,useValue:new Set([()=>bp=null])},...n]})}(n);return bp=i,function QE(n){const i=n.get(jE,null);i&&i.forEach(o=>o())}(i),i}(d),v=function nI(n,i){let o;return o="noop"===n?new tw:("zone.js"===n?void 0:n)||new nd(i),o}("zone.js",function tI(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}());return v.run(()=>{const N=ev([{provide:nd,useValue:v},...o||[]],h,"Environment Injector"),U=N.get(pu,null);if(Af&&!U)throw new xe(402,"No `ErrorHandler` found in the Dependency Injection tree.");let X;v.runOutsideAngular(()=>{X=v.onError.subscribe({next:pt=>{U.handleError(pt)}})});const fe=()=>N.destroy(),Pe=h.get(z0);return Pe.add(fe),N.onDestroy(()=>{X.unsubscribe(),Pe.delete(fe)}),function rI(n,i,o){try{const d=o();return Cy(d)?d.catch(h=>{throw i.runOutsideAngular(()=>n.handleError(h)),h}):d}catch(d){throw i.runOutsideAngular(()=>n.handleError(d)),d}}(U,v,()=>{const pt=N.get(p_);return pt.runInitializers(),pt.donePromise.then(()=>{!function kv(n){ft(n,"Expected localeId to be defined"),"string"==typeof n&&(yp=n.toLowerCase().replace(/_/g,"-"))}(N.get(g_,gp)||gp);const mn=N.get(m_);return void 0!==i&&mn.bootstrap(i),mn})})})}let m_=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(o,d,h){this._zone=o,this._injector=d,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new ee.y(N=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{N.next(this._stable),N.complete()})}),D=new ee.y(N=>{let U;this._zone.runOutsideAngular(()=>{U=this._zone.onStable.subscribe(()=>{nd.assertNotInAngularZone(),U0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,N.next(!0))})})});const X=this._zone.onUnstable.subscribe(()=>{nd.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{N.next(!1)}))});return()=>{U.unsubscribe(),X.unsubscribe()}});this.isStable=(0,ce.T)(v,D.pipe((0,$e.B)()))}bootstrap(o,d){Af&&this.warnIfDestroyed();const h=o instanceof $f;if(!this._injector.get(p_).done){const jt="Cannot bootstrap as there are still asynchronous initializers running."+(!h&&Wn(o)?"":" Bootstrap components in the `ngDoBootstrap` method of the root module.");throw new xe(405,Af&&jt)}let D;D=h?o:this._injector.get(Ka).resolveComponentFactory(o),this.componentTypes.push(D.componentType);const N=function sw(n){return n.isBoundToModule}(D)?void 0:this._injector.get(Xa),X=D.create(Gu.NULL,[],d||D.selector,N),fe=X.location.nativeElement,Pe=X.injector.get(KE,null);return null==Pe||Pe.registerApplication(fe),X.onDestroy(()=>{this.detachView(X.hostView),y_(this.components,X),null==Pe||Pe.unregisterApplication(fe)}),this._loadComponent(X),X}tick(){if(Af&&this.warnIfDestroyed(),this._runningTick)throw new xe(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){Af&&this.warnIfDestroyed();const d=o;this._views.push(d),d.attachToAppRef(this)}detachView(o){Af&&this.warnIfDestroyed();const d=o;y_(this._views,d),d.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o);const d=this._injector.get(XE,[]);d.push(...this._bootstrapListeners),d.forEach(h=>h(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return Af&&this.warnIfDestroyed(),this._destroyListeners.push(o),()=>y_(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new xe(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){Af&&this._destroyed&&console.warn(Re(406,"This instance of the `ApplicationRef` has already been destroyed."))}}return n.\u0275fac=function(o){return new(o||n)(yr(nd),yr(Fl),yr(pu))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function y_(n,i){const o=n.indexOf(i);o>-1&&n.splice(o,1)}function hw(){return!1}function fw(){}let pw=(()=>{class n{}return n.__NG_ELEMENT_ID__=gw,n})();function gw(n){return function mw(n,i,o){if(vs(n)&&!o){const d=Xi(n.index,i);return new Md(d,d)}return 47&n.type?new Md(i[Lt],i):null}(vt(),M(),16==(16&n))}class cI{constructor(){}supports(i){return Ft(i)}create(i){return new ww(i)}}const Iw=(n,i)=>i;class ww{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||Iw}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,d=this._removalsHead,h=0,v=null;for(;o||d;){const D=!d||o&&o.currentIndex<dI(d,h,v)?o:d,N=dI(D,h,v),U=D.currentIndex;if(D===d)h--,d=d._nextRemoved;else if(o=o._next,null==D.previousIndex)h++;else{v||(v=[]);const X=N-h,fe=U-h;if(X!=fe){for(let pt=0;pt<X;pt++){const jt=pt<v.length?v[pt]:v[pt]=0,mn=jt+pt;fe<=mn&&mn<X&&(v[pt]=jt+1)}v[D.previousIndex]=fe-X}}N!==U&&i(D,N,U)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!Ft(i))throw new xe(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let h,v,D,o=this._itHead,d=!1;if(Array.isArray(i)){this.length=i.length;for(let N=0;N<this.length;N++)v=i[N],D=this._trackByFn(N,v),null!==o&&Object.is(o.trackById,D)?(d&&(o=this._verifyReinsertion(o,v,D,N)),Object.is(o.item,v)||this._addIdentityChange(o,v)):(o=this._mismatch(o,v,D,N),d=!0),o=o._next}else h=0,function sn(n,i){if(Array.isArray(n))for(let o=0;o<n.length;o++)i(n[o]);else{const o=n[Symbol.iterator]();let d;for(;!(d=o.next()).done;)i(d.value)}}(i,N=>{D=this._trackByFn(h,N),null!==o&&Object.is(o.trackById,D)?(d&&(o=this._verifyReinsertion(o,N,D,h)),Object.is(o.item,N)||this._addIdentityChange(o,N)):(o=this._mismatch(o,N,D,h),d=!0),o=o._next,h++}),this.length=h;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,d,h){let v;return null===i?v=this._itTail:(v=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,v,h)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(d,h))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,v,h)):i=this._addAfter(new Cw(o,d),v,h),i}_verifyReinsertion(i,o,d,h){let v=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==v?i=this._reinsertAfter(v,i._prev,h):i.currentIndex!=h&&(i.currentIndex=h,this._addToMoves(i,h)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const h=i._prevRemoved,v=i._nextRemoved;return null===h?this._removalsHead=v:h._nextRemoved=v,null===v?this._removalsTail=h:v._prevRemoved=h,this._insertAfter(i,o,d),this._addToMoves(i,d),i}_moveAfter(i,o,d){return this._unlink(i),this._insertAfter(i,o,d),this._addToMoves(i,d),i}_addAfter(i,o,d){return this._insertAfter(i,o,d),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,d){const h=null===o?this._itHead:o._next;return i._next=h,i._prev=o,null===h?this._itTail=i:h._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new uI),this._linkedRecords.put(i),i.currentIndex=d,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,d=i._next;return null===o?this._itHead=d:o._next=d,null===d?this._itTail=o:d._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new uI),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class Cw{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class bw{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===o||o<=d.currentIndex)&&Object.is(d.trackById,i))return d;return null}remove(i){const o=i._prevDup,d=i._nextDup;return null===o?this._head=d:o._nextDup=d,null===d?this._tail=o:d._prevDup=o,null===this._head}}class uI{constructor(){this.map=new Map}put(i){const o=i.trackById;let d=this.map.get(o);d||(d=new bw,this.map.set(o,d)),d.add(i)}get(i,o){const h=this.map.get(i);return h?h.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function dI(n,i,o){const d=n.previousIndex;if(null===d)return d;let h=0;return o&&d<o.length&&(h=o[d]),d+i+h}class hI{constructor(){}supports(i){return i instanceof Map||Rn(i)}create(){return new Dw}}class Dw{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||Rn(i)))throw new xe(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(d,h)=>{if(o&&o.key===h)this._maybeAddToChanges(o,d),this._appendAfter=o,o=o._next;else{const v=this._getOrCreateRecordForKey(h,d);o=this._insertBeforeOrAppend(o,v)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let d=o;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const d=i._prev;return o._next=i,o._prev=d,i._prev=o,d&&(d._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const h=this._records.get(i);this._maybeAddToChanges(h,o);const v=h._prev,D=h._next;return v&&(v._next=D),D&&(D._prev=v),h._next=null,h._prev=null,h}const d=new Tw(i);return this._records.set(i,d),d.currentValue=o,this._addToAdditions(d),d}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(d=>o(i[d],d))}}class Tw{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function fI(){return new Z0([new cI])}let Z0=(()=>{class n{constructor(o){this.factories=o}static create(o,d){if(null!=d){const h=d.factories.slice();o=o.concat(h)}return new n(o)}static extend(o){return{provide:n,useFactory:d=>n.create(o,d||fI()),deps:[[n,new $s,new Ii]]}}find(o){const d=this.factories.find(h=>h.supports(o));if(null!=d)return d;throw new xe(901,!1)}}return n.\u0275prov=kt({token:n,providedIn:"root",factory:fI}),n})();function pI(){return new X0([new hI])}let X0=(()=>{class n{constructor(o){this.factories=o}static create(o,d){if(d){const h=d.factories.slice();o=o.concat(h)}return new n(o)}static extend(o){return{provide:n,useFactory:d=>n.create(o,d||pI()),deps:[[n,new $s,new Ii]]}}find(o){const d=this.factories.find(h=>h.supports(o));if(d)return d;throw new xe(901,!1)}}return n.\u0275prov=kt({token:n,providedIn:"root",factory:pI}),n})();function xw(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function Mw(n,i){const o=wn(n),d=i.elementInjector||hu();return new Wc(o).create(d,i.projectableNodes,i.hostElement,i.environmentInjector)}},433:(In,Et,j)=>{"use strict";j.d(Et,{qu:()=>oa,NI:()=>Lt,u:()=>lo,sg:()=>Os,u5:()=>W,JU:()=>ct,a5:()=>yi,JJ:()=>Gn,JL:()=>qn,F:()=>Je,On:()=>tn,UX:()=>ge,kI:()=>De,_Y:()=>dn});var _=j(4650),m=j(6895),ee=j(8996),ce=j(9751),$e=j(4742),Se=j(8421),_e=j(7669),Me=j(5403),ze=j(3268),ye=j(1810),Ee=j(4004);let Ke=(()=>{class M{constructor(L,ne){this._renderer=L,this._elementRef=ne,this.onChange=vt=>{},this.onTouched=()=>{}}setProperty(L,ne){this._renderer.setProperty(this._elementRef.nativeElement,L,ne)}registerOnTouched(L){this.onTouched=L}registerOnChange(L){this.onChange=L}setDisabledState(L){this.setProperty("disabled",L)}}return M.\u0275fac=function(L){return new(L||M)(_.Y36(_.Qsj),_.Y36(_.SBq))},M.\u0275dir=_.lG2({type:M}),M})(),We=(()=>{class M extends Ke{}return M.\u0275fac=function(){let F;return function(ne){return(F||(F=_.n5z(M)))(ne||M)}}(),M.\u0275dir=_.lG2({type:M,features:[_.qOj]}),M})();const ct=new _.OlP("NgValueAccessor"),Re={provide:ct,useExisting:(0,_.Gpc)(()=>Y),multi:!0},_t=new _.OlP("CompositionEventMode");let Y=(()=>{class M extends Ke{constructor(L,ne,vt){super(L,ne),this._compositionMode=vt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function de(){const M=(0,m.q)()?(0,m.q)().getUserAgent():"";return/android (\d+)/.test(M.toLowerCase())}())}writeValue(L){this.setProperty("value",null==L?"":L)}_handleInput(L){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(L)}_compositionStart(){this._composing=!0}_compositionEnd(L){this._composing=!1,this._compositionMode&&this.onChange(L)}}return M.\u0275fac=function(L){return new(L||M)(_.Y36(_.Qsj),_.Y36(_.SBq),_.Y36(_t,8))},M.\u0275dir=_.lG2({type:M,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(L,ne){1&L&&_.NdJ("input",function(Tn){return ne._handleInput(Tn.target.value)})("blur",function(){return ne.onTouched()})("compositionstart",function(){return ne._compositionStart()})("compositionend",function(Tn){return ne._compositionEnd(Tn.target.value)})},features:[_._Bn([Re]),_.qOj]}),M})();const it=!1;function et(M){return null==M||("string"==typeof M||Array.isArray(M))&&0===M.length}function Pt(M){return null!=M&&"number"==typeof M.length}const Ue=new _.OlP("NgValidators"),ke=new _.OlP("NgAsyncValidators"),Ne=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class De{static min(F){return function je(M){return F=>{if(et(F.value)||et(M))return null;const L=parseFloat(F.value);return!isNaN(L)&&L<M?{min:{min:M,actual:F.value}}:null}}(F)}static max(F){return function gt(M){return F=>{if(et(F.value)||et(M))return null;const L=parseFloat(F.value);return!isNaN(L)&&L>M?{max:{max:M,actual:F.value}}:null}}(F)}static required(F){return function Dt(M){return et(M.value)?{required:!0}:null}(F)}static requiredTrue(F){return function ht(M){return!0===M.value?null:{required:!0}}(F)}static email(F){return function Mt(M){return et(M.value)||Ne.test(M.value)?null:{email:!0}}(F)}static minLength(F){return function yt(M){return F=>et(F.value)||!Pt(F.value)?null:F.value.length<M?{minlength:{requiredLength:M,actualLength:F.value.length}}:null}(F)}static maxLength(F){return function Fe(M){return F=>Pt(F.value)&&F.value.length>M?{maxlength:{requiredLength:M,actualLength:F.value.length}}:null}(F)}static pattern(F){return function Ve(M){if(!M)return Be;let F,L;return"string"==typeof M?(L="","^"!==M.charAt(0)&&(L+="^"),L+=M,"$"!==M.charAt(M.length-1)&&(L+="$"),F=new RegExp(L)):(L=M.toString(),F=M),ne=>{if(et(ne.value))return null;const vt=ne.value;return F.test(vt)?null:{pattern:{requiredPattern:L,actualValue:vt}}}}(F)}static nullValidator(F){return null}static compose(F){return Ae(F)}static composeAsync(F){return gn(F)}}function Be(M){return null}function ft(M){return null!=M}function wt(M){const F=(0,_.QGY)(M)?(0,ee.D)(M):M;if(it&&!(0,_.CqO)(F)){let L="Expected async validator to return Promise or Observable.";throw"object"==typeof M&&(L+=" Are you using a synchronous validator where an async validator is expected?"),new _.vHH(-1101,L)}return F}function nn(M){let F={};return M.forEach(L=>{F=null!=L?{...F,...L}:F}),0===Object.keys(F).length?null:F}function zt(M,F){return F.map(L=>L(M))}function kt(M){return M.map(F=>function Dn(M){return!M.validate}(F)?F:L=>F.validate(L))}function Ae(M){if(!M)return null;const F=M.filter(ft);return 0==F.length?null:function(L){return nn(zt(L,F))}}function St(M){return null!=M?Ae(kt(M)):null}function gn(M){if(!M)return null;const F=M.filter(ft);return 0==F.length?null:function(L){return function ae(...M){const F=(0,_e.jO)(M),{args:L,keys:ne}=(0,$e.D)(M),vt=new ce.y(Tn=>{const{length:$r}=L;if(!$r)return void Tn.complete();const ii=new Array($r);let Qi=$r,hs=$r;for(let Ao=0;Ao<$r;Ao++){let xi=!1;(0,Se.Xf)(L[Ao]).subscribe((0,Me.x)(Tn,ja=>{xi||(xi=!0,hs--),ii[Ao]=ja},()=>Qi--,void 0,()=>{(!Qi||!xi)&&(hs||Tn.next(ne?(0,ye.n)(ne,ii):ii),Tn.complete())}))}});return F?vt.pipe((0,ze.Z)(F)):vt}(zt(L,F).map(wt)).pipe((0,Ee.U)(nn))}}function On(M){return null!=M?gn(kt(M)):null}function Yn(M,F){return null===M?[F]:Array.isArray(M)?[...M,F]:[M,F]}function xn(M){return M._rawValidators}function cn(M){return M._rawAsyncValidators}function Cn(M){return M?Array.isArray(M)?M:[M]:[]}function hr(M,F){return Array.isArray(M)?M.includes(F):M===F}function _r(M,F){const L=Cn(F);return Cn(M).forEach(vt=>{hr(L,vt)||L.push(vt)}),L}function tr(M,F){return Cn(F).filter(L=>!hr(M,L))}class bn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(F){this._rawValidators=F||[],this._composedValidatorFn=St(this._rawValidators)}_setAsyncValidators(F){this._rawAsyncValidators=F||[],this._composedAsyncValidatorFn=On(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(F){this._onDestroyCallbacks.push(F)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(F=>F()),this._onDestroyCallbacks=[]}reset(F){this.control&&this.control.reset(F)}hasError(F,L){return!!this.control&&this.control.hasError(F,L)}getError(F,L){return this.control?this.control.getError(F,L):null}}class zn extends bn{get formDirective(){return null}get path(){return null}}class yi extends bn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Cr{constructor(F){this._cd=F}get isTouched(){var F,L;return!(null===(F=this._cd)||void 0===F||null===(L=F.control)||void 0===L||!L.touched)}get isUntouched(){var F,L;return!(null===(F=this._cd)||void 0===F||null===(L=F.control)||void 0===L||!L.untouched)}get isPristine(){var F,L;return!(null===(F=this._cd)||void 0===F||null===(L=F.control)||void 0===L||!L.pristine)}get isDirty(){var F,L;return!(null===(F=this._cd)||void 0===F||null===(L=F.control)||void 0===L||!L.dirty)}get isValid(){var F,L;return!(null===(F=this._cd)||void 0===F||null===(L=F.control)||void 0===L||!L.valid)}get isInvalid(){var F,L;return!(null===(F=this._cd)||void 0===F||null===(L=F.control)||void 0===L||!L.invalid)}get isPending(){var F,L;return!(null===(F=this._cd)||void 0===F||null===(L=F.control)||void 0===L||!L.pending)}get isSubmitted(){var F;return!(null===(F=this._cd)||void 0===F||!F.submitted)}}let Gn=(()=>{class M extends Cr{constructor(L){super(L)}}return M.\u0275fac=function(L){return new(L||M)(_.Y36(yi,2))},M.\u0275dir=_.lG2({type:M,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(L,ne){2&L&&_.ekj("ng-untouched",ne.isUntouched)("ng-touched",ne.isTouched)("ng-pristine",ne.isPristine)("ng-dirty",ne.isDirty)("ng-valid",ne.isValid)("ng-invalid",ne.isInvalid)("ng-pending",ne.isPending)},features:[_.qOj]}),M})(),qn=(()=>{class M extends Cr{constructor(L){super(L)}}return M.\u0275fac=function(L){return new(L||M)(_.Y36(zn,10))},M.\u0275dir=_.lG2({type:M,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(L,ne){2&L&&_.ekj("ng-untouched",ne.isUntouched)("ng-touched",ne.isTouched)("ng-pristine",ne.isPristine)("ng-dirty",ne.isDirty)("ng-valid",ne.isValid)("ng-invalid",ne.isInvalid)("ng-pending",ne.isPending)("ng-submitted",ne.isSubmitted)},features:[_.qOj]}),M})();function Ai(M,F){return M?`with name: '${F}'`:`at index: ${F}`}const nt=!1,en="VALID",Yt="INVALID",we="PENDING",Ie="DISABLED";function qe(M){return(ot(M)?M.validators:M)||null}function ut(M,F){return(ot(F)?F.asyncValidators:M)||null}function ot(M){return null!=M&&!Array.isArray(M)&&"object"==typeof M}function Ge(M,F,L){const ne=M.controls;if(!(F?Object.keys(ne):ne).length)throw new _.vHH(1e3,nt?function mr(M){return`\n    There are no form controls registered with this ${M?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(F):"");if(!ne[L])throw new _.vHH(1001,nt?function Kt(M,F){return`Cannot find form control ${Ai(M,F)}`}(F,L):"")}function ve(M,F,L){M._forEachChild((ne,vt)=>{if(void 0===L[vt])throw new _.vHH(1002,nt?function Ze(M,F){return`Must supply a value for form control ${Ai(M,F)}`}(F,vt):"")})}class rt{constructor(F,L){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(F),this._assignAsyncValidators(L)}get validator(){return this._composedValidatorFn}set validator(F){this._rawValidators=this._composedValidatorFn=F}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(F){this._rawAsyncValidators=this._composedAsyncValidatorFn=F}get parent(){return this._parent}get valid(){return this.status===en}get invalid(){return this.status===Yt}get pending(){return this.status==we}get disabled(){return this.status===Ie}get enabled(){return this.status!==Ie}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(F){this._assignValidators(F)}setAsyncValidators(F){this._assignAsyncValidators(F)}addValidators(F){this.setValidators(_r(F,this._rawValidators))}addAsyncValidators(F){this.setAsyncValidators(_r(F,this._rawAsyncValidators))}removeValidators(F){this.setValidators(tr(F,this._rawValidators))}removeAsyncValidators(F){this.setAsyncValidators(tr(F,this._rawAsyncValidators))}hasValidator(F){return hr(this._rawValidators,F)}hasAsyncValidator(F){return hr(this._rawAsyncValidators,F)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(F={}){this.touched=!0,this._parent&&!F.onlySelf&&this._parent.markAsTouched(F)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(F=>F.markAllAsTouched())}markAsUntouched(F={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(L=>{L.markAsUntouched({onlySelf:!0})}),this._parent&&!F.onlySelf&&this._parent._updateTouched(F)}markAsDirty(F={}){this.pristine=!1,this._parent&&!F.onlySelf&&this._parent.markAsDirty(F)}markAsPristine(F={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(L=>{L.markAsPristine({onlySelf:!0})}),this._parent&&!F.onlySelf&&this._parent._updatePristine(F)}markAsPending(F={}){this.status=we,!1!==F.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!F.onlySelf&&this._parent.markAsPending(F)}disable(F={}){const L=this._parentMarkedDirty(F.onlySelf);this.status=Ie,this.errors=null,this._forEachChild(ne=>{ne.disable({...F,onlySelf:!0})}),this._updateValue(),!1!==F.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...F,skipPristineCheck:L}),this._onDisabledChange.forEach(ne=>ne(!0))}enable(F={}){const L=this._parentMarkedDirty(F.onlySelf);this.status=en,this._forEachChild(ne=>{ne.enable({...F,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:F.emitEvent}),this._updateAncestors({...F,skipPristineCheck:L}),this._onDisabledChange.forEach(ne=>ne(!1))}_updateAncestors(F){this._parent&&!F.onlySelf&&(this._parent.updateValueAndValidity(F),F.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(F){this._parent=F}getRawValue(){return this.value}updateValueAndValidity(F={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===en||this.status===we)&&this._runAsyncValidator(F.emitEvent)),!1!==F.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!F.onlySelf&&this._parent.updateValueAndValidity(F)}_updateTreeValidity(F={emitEvent:!0}){this._forEachChild(L=>L._updateTreeValidity(F)),this.updateValueAndValidity({onlySelf:!0,emitEvent:F.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ie:en}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(F){if(this.asyncValidator){this.status=we,this._hasOwnPendingAsyncValidator=!0;const L=wt(this.asyncValidator(this));this._asyncValidationSubscription=L.subscribe(ne=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ne,{emitEvent:F})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(F,L={}){this.errors=F,this._updateControlsErrors(!1!==L.emitEvent)}get(F){let L=F;return null==L||(Array.isArray(L)||(L=L.split(".")),0===L.length)?null:L.reduce((ne,vt)=>ne&&ne._find(vt),this)}getError(F,L){const ne=L?this.get(L):this;return ne&&ne.errors?ne.errors[F]:null}hasError(F,L){return!!this.getError(F,L)}get root(){let F=this;for(;F._parent;)F=F._parent;return F}_updateControlsErrors(F){this.status=this._calculateStatus(),F&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(F)}_initObservables(){this.valueChanges=new _.vpe,this.statusChanges=new _.vpe}_calculateStatus(){return this._allControlsDisabled()?Ie:this.errors?Yt:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(we)?we:this._anyControlsHaveStatus(Yt)?Yt:en}_anyControlsHaveStatus(F){return this._anyControls(L=>L.status===F)}_anyControlsDirty(){return this._anyControls(F=>F.dirty)}_anyControlsTouched(){return this._anyControls(F=>F.touched)}_updatePristine(F={}){this.pristine=!this._anyControlsDirty(),this._parent&&!F.onlySelf&&this._parent._updatePristine(F)}_updateTouched(F={}){this.touched=this._anyControlsTouched(),this._parent&&!F.onlySelf&&this._parent._updateTouched(F)}_registerOnCollectionChange(F){this._onCollectionChange=F}_setUpdateStrategy(F){ot(F)&&null!=F.updateOn&&(this._updateOn=F.updateOn)}_parentMarkedDirty(F){return!F&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(F){return null}_assignValidators(F){this._rawValidators=Array.isArray(F)?F.slice():F,this._composedValidatorFn=function Ot(M){return Array.isArray(M)?St(M):M||null}(this._rawValidators)}_assignAsyncValidators(F){this._rawAsyncValidators=Array.isArray(F)?F.slice():F,this._composedAsyncValidatorFn=function un(M){return Array.isArray(M)?On(M):M||null}(this._rawAsyncValidators)}}class Nt extends rt{constructor(F,L,ne){super(qe(L),ut(ne,L)),this.controls=F,this._initObservables(),this._setUpdateStrategy(L),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(F,L){return this.controls[F]?this.controls[F]:(this.controls[F]=L,L.setParent(this),L._registerOnCollectionChange(this._onCollectionChange),L)}addControl(F,L,ne={}){this.registerControl(F,L),this.updateValueAndValidity({emitEvent:ne.emitEvent}),this._onCollectionChange()}removeControl(F,L={}){this.controls[F]&&this.controls[F]._registerOnCollectionChange(()=>{}),delete this.controls[F],this.updateValueAndValidity({emitEvent:L.emitEvent}),this._onCollectionChange()}setControl(F,L,ne={}){this.controls[F]&&this.controls[F]._registerOnCollectionChange(()=>{}),delete this.controls[F],L&&this.registerControl(F,L),this.updateValueAndValidity({emitEvent:ne.emitEvent}),this._onCollectionChange()}contains(F){return this.controls.hasOwnProperty(F)&&this.controls[F].enabled}setValue(F,L={}){ve(this,!0,F),Object.keys(F).forEach(ne=>{Ge(this,!0,ne),this.controls[ne].setValue(F[ne],{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L)}patchValue(F,L={}){null!=F&&(Object.keys(F).forEach(ne=>{const vt=this.controls[ne];vt&&vt.patchValue(F[ne],{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L))}reset(F={},L={}){this._forEachChild((ne,vt)=>{ne.reset(F[vt],{onlySelf:!0,emitEvent:L.emitEvent})}),this._updatePristine(L),this._updateTouched(L),this.updateValueAndValidity(L)}getRawValue(){return this._reduceChildren({},(F,L,ne)=>(F[ne]=L.getRawValue(),F))}_syncPendingControls(){let F=this._reduceChildren(!1,(L,ne)=>!!ne._syncPendingControls()||L);return F&&this.updateValueAndValidity({onlySelf:!0}),F}_forEachChild(F){Object.keys(this.controls).forEach(L=>{const ne=this.controls[L];ne&&F(ne,L)})}_setUpControls(){this._forEachChild(F=>{F.setParent(this),F._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(F){for(const[L,ne]of Object.entries(this.controls))if(this.contains(L)&&F(ne))return!0;return!1}_reduceValue(){return this._reduceChildren({},(L,ne,vt)=>((ne.enabled||this.disabled)&&(L[vt]=ne.value),L))}_reduceChildren(F,L){let ne=F;return this._forEachChild((vt,Tn)=>{ne=L(ne,vt,Tn)}),ne}_allControlsDisabled(){for(const F of Object.keys(this.controls))if(this.controls[F].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(F){return this.controls.hasOwnProperty(F)?this.controls[F]:null}}class Tt extends Nt{}const Qt=new _.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Xe}),Xe="always";function He(M,F){return[...F.path,M]}function Ct(M,F,L=Xe){var ne,vt;wn(M,F),F.valueAccessor.writeValue(M.value),(M.disabled||"always"===L)&&(null===(ne=(vt=F.valueAccessor).setDisabledState)||void 0===ne||ne.call(vt,M.disabled)),function Jn(M,F){F.valueAccessor.registerOnChange(L=>{M._pendingValue=L,M._pendingChange=!0,M._pendingDirty=!0,"change"===M.updateOn&&Xn(M,F)})}(M,F),function ys(M,F){const L=(ne,vt)=>{F.valueAccessor.writeValue(ne),vt&&F.viewToModelUpdate(ne)};M.registerOnChange(L),F._registerOnDestroy(()=>{M._unregisterOnChange(L)})}(M,F),function Wn(M,F){F.valueAccessor.registerOnTouched(()=>{M._pendingTouched=!0,"blur"===M.updateOn&&M._pendingChange&&Xn(M,F),"submit"!==M.updateOn&&M.markAsTouched()})}(M,F),function kn(M,F){if(F.valueAccessor.setDisabledState){const L=ne=>{F.valueAccessor.setDisabledState(ne)};M.registerOnDisabledChange(L),F._registerOnDestroy(()=>{M._unregisterOnDisabledChange(L)})}}(M,F)}function Gt(M,F,L=!0){const ne=()=>{};F.valueAccessor&&(F.valueAccessor.registerOnChange(ne),F.valueAccessor.registerOnTouched(ne)),Qn(M,F),M&&(F._invokeOnDestroyCallbacks(),M._registerOnCollectionChange(()=>{}))}function pn(M,F){M.forEach(L=>{L.registerOnValidatorChange&&L.registerOnValidatorChange(F)})}function wn(M,F){const L=xn(M);null!==F.validator?M.setValidators(Yn(L,F.validator)):"function"==typeof L&&M.setValidators([L]);const ne=cn(M);null!==F.asyncValidator?M.setAsyncValidators(Yn(ne,F.asyncValidator)):"function"==typeof ne&&M.setAsyncValidators([ne]);const vt=()=>M.updateValueAndValidity();pn(F._rawValidators,vt),pn(F._rawAsyncValidators,vt)}function Qn(M,F){let L=!1;if(null!==M){if(null!==F.validator){const vt=xn(M);if(Array.isArray(vt)&&vt.length>0){const Tn=vt.filter($r=>$r!==F.validator);Tn.length!==vt.length&&(L=!0,M.setValidators(Tn))}}if(null!==F.asyncValidator){const vt=cn(M);if(Array.isArray(vt)&&vt.length>0){const Tn=vt.filter($r=>$r!==F.asyncValidator);Tn.length!==vt.length&&(L=!0,M.setAsyncValidators(Tn))}}}const ne=()=>{};return pn(F._rawValidators,ne),pn(F._rawAsyncValidators,ne),L}function Xn(M,F){M._pendingDirty&&M.markAsDirty(),M.setValue(M._pendingValue,{emitModelToViewChange:!1}),F.viewToModelUpdate(M._pendingValue),M._pendingChange=!1}function vi(M,F){wn(M,F)}function kr(M,F){if(!M.hasOwnProperty("model"))return!1;const L=M.model;return!!L.isFirstChange()||!Object.is(F,L.currentValue)}function Li(M,F){M._syncPendingControls(),F.forEach(L=>{const ne=L.control;"submit"===ne.updateOn&&ne._pendingChange&&(L.viewToModelUpdate(ne._pendingValue),ne._pendingChange=!1)})}function Ur(M,F){if(!F)return null;let L,ne,vt;return Array.isArray(F),F.forEach(Tn=>{Tn.constructor===Y?L=Tn:function Ci(M){return Object.getPrototypeOf(M.constructor)===We}(Tn)?ne=Tn:vt=Tn}),vt||ne||L||null}const Ye={provide:zn,useExisting:(0,_.Gpc)(()=>Je)},me=(()=>Promise.resolve())();let Je=(()=>{class M extends zn{constructor(L,ne,vt){super(),this.callSetDisabledState=vt,this.submitted=!1,this._directives=new Set,this.ngSubmit=new _.vpe,this.form=new Nt({},St(L),On(ne))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(L){me.then(()=>{const ne=this._findContainer(L.path);L.control=ne.registerControl(L.name,L.control),Ct(L.control,L,this.callSetDisabledState),L.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(L)})}getControl(L){return this.form.get(L.path)}removeControl(L){me.then(()=>{const ne=this._findContainer(L.path);ne&&ne.removeControl(L.name),this._directives.delete(L)})}addFormGroup(L){me.then(()=>{const ne=this._findContainer(L.path),vt=new Nt({});vi(vt,L),ne.registerControl(L.name,vt),vt.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(L){me.then(()=>{const ne=this._findContainer(L.path);ne&&ne.removeControl(L.name)})}getFormGroup(L){return this.form.get(L.path)}updateModel(L,ne){me.then(()=>{this.form.get(L.path).setValue(ne)})}setValue(L){this.control.setValue(L)}onSubmit(L){var ne;return this.submitted=!0,Li(this.form,this._directives),this.ngSubmit.emit(L),"dialog"===(null==L||null===(ne=L.target)||void 0===ne?void 0:ne.method)}onReset(){this.resetForm()}resetForm(L){this.form.reset(L),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(L){return L.pop(),L.length?this.form.get(L):this.form}}return M.\u0275fac=function(L){return new(L||M)(_.Y36(Ue,10),_.Y36(ke,10),_.Y36(Qt,8))},M.\u0275dir=_.lG2({type:M,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(L,ne){1&L&&_.NdJ("submit",function(Tn){return ne.onSubmit(Tn)})("reset",function(){return ne.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_._Bn([Ye]),_.qOj]}),M})();function Qe(M,F){const L=M.indexOf(F);L>-1&&M.splice(L,1)}function Vt(M){return"object"==typeof M&&null!==M&&2===Object.keys(M).length&&"value"in M&&"disabled"in M}const Lt=class extends rt{constructor(F=null,L,ne){super(qe(L),ut(ne,L)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(F),this._setUpdateStrategy(L),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ot(L)&&(L.nonNullable||L.initialValueIsDefault)&&(this.defaultValue=Vt(F)?F.value:F)}setValue(F,L={}){this.value=this._pendingValue=F,this._onChange.length&&!1!==L.emitModelToViewChange&&this._onChange.forEach(ne=>ne(this.value,!1!==L.emitViewToModelChange)),this.updateValueAndValidity(L)}patchValue(F,L={}){this.setValue(F,L)}reset(F=this.defaultValue,L={}){this._applyFormState(F),this.markAsPristine(L),this.markAsUntouched(L),this.setValue(this.value,L),this._pendingChange=!1}_updateValue(){}_anyControls(F){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(F){this._onChange.push(F)}_unregisterOnChange(F){Qe(this._onChange,F)}registerOnDisabledChange(F){this._onDisabledChange.push(F)}_unregisterOnDisabledChange(F){Qe(this._onDisabledChange,F)}_forEachChild(F){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(F){Vt(F)?(this.value=this._pendingValue=F.value,F.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=F}},at={provide:yi,useExisting:(0,_.Gpc)(()=>tn)},xt=(()=>Promise.resolve())();let tn=(()=>{class M extends yi{constructor(L,ne,vt,Tn,$r,ii){super(),this._changeDetectorRef=$r,this.callSetDisabledState=ii,this.control=new Lt,this._registered=!1,this.update=new _.vpe,this._parent=L,this._setValidators(ne),this._setAsyncValidators(vt),this.valueAccessor=Ur(0,Tn)}ngOnChanges(L){if(this._checkForErrors(),!this._registered||"name"in L){if(this._registered&&(this._checkName(),this.formDirective)){const ne=L.name.previousValue;this.formDirective.removeControl({name:ne,path:this._getPath(ne)})}this._setUpControl()}"isDisabled"in L&&this._updateDisabled(L),kr(L,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(L){this.viewModel=L,this.update.emit(L)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ct(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(L){xt.then(()=>{var ne;this.control.setValue(L,{emitViewToModelChange:!1}),null===(ne=this._changeDetectorRef)||void 0===ne||ne.markForCheck()})}_updateDisabled(L){const ne=L.isDisabled.currentValue,vt=0!==ne&&(0,_.D6c)(ne);xt.then(()=>{var Tn;vt&&!this.control.disabled?this.control.disable():!vt&&this.control.disabled&&this.control.enable(),null===(Tn=this._changeDetectorRef)||void 0===Tn||Tn.markForCheck()})}_getPath(L){return this._parent?He(L,this._parent):[L]}}return M.\u0275fac=function(L){return new(L||M)(_.Y36(zn,9),_.Y36(Ue,10),_.Y36(ke,10),_.Y36(ct,10),_.Y36(_.sBO,8),_.Y36(Qt,8))},M.\u0275dir=_.lG2({type:M,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[_._Bn([at]),_.qOj,_.TTD]}),M})(),dn=(()=>{class M{}return M.\u0275fac=function(L){return new(L||M)},M.\u0275dir=_.lG2({type:M,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),M})(),vs=(()=>{class M{}return M.\u0275fac=function(L){return new(L||M)},M.\u0275mod=_.oAB({type:M}),M.\u0275inj=_.cJS({}),M})();const jo=new _.OlP("NgModelWithFormControlWarning"),oo={provide:zn,useExisting:(0,_.Gpc)(()=>Os)};let Os=(()=>{class M extends zn{constructor(L,ne,vt){super(),this.callSetDisabledState=vt,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new _.vpe,this._setValidators(L),this._setAsyncValidators(ne)}ngOnChanges(L){this._checkFormPresent(),L.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Qn(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(L){const ne=this.form.get(L.path);return Ct(ne,L,this.callSetDisabledState),ne.updateValueAndValidity({emitEvent:!1}),this.directives.push(L),ne}getControl(L){return this.form.get(L.path)}removeControl(L){Gt(L.control||null,L,!1),function se(M,F){const L=M.indexOf(F);L>-1&&M.splice(L,1)}(this.directives,L)}addFormGroup(L){this._setUpFormContainer(L)}removeFormGroup(L){this._cleanUpFormContainer(L)}getFormGroup(L){return this.form.get(L.path)}addFormArray(L){this._setUpFormContainer(L)}removeFormArray(L){this._cleanUpFormContainer(L)}getFormArray(L){return this.form.get(L.path)}updateModel(L,ne){this.form.get(L.path).setValue(ne)}onSubmit(L){var ne;return this.submitted=!0,Li(this.form,this.directives),this.ngSubmit.emit(L),"dialog"===(null==L||null===(ne=L.target)||void 0===ne?void 0:ne.method)}onReset(){this.resetForm()}resetForm(L){this.form.reset(L),this.submitted=!1}_updateDomValue(){this.directives.forEach(L=>{const ne=L.control,vt=this.form.get(L.path);ne!==vt&&(Gt(ne||null,L),(M=>M instanceof Lt)(vt)&&(Ct(vt,L,this.callSetDisabledState),L.control=vt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(L){const ne=this.form.get(L.path);vi(ne,L),ne.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(L){if(this.form){const ne=this.form.get(L.path);ne&&function Vi(M,F){return Qn(M,F)}(ne,L)&&ne.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){wn(this.form,this),this._oldForm&&Qn(this._oldForm,this)}_checkFormPresent(){}}return M.\u0275fac=function(L){return new(L||M)(_.Y36(Ue,10),_.Y36(ke,10),_.Y36(Qt,8))},M.\u0275dir=_.lG2({type:M,selectors:[["","formGroup",""]],hostBindings:function(L,ne){1&L&&_.NdJ("submit",function(Tn){return ne.onSubmit(Tn)})("reset",function(){return ne.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_._Bn([oo]),_.qOj,_.TTD]}),M})();const Qa={provide:yi,useExisting:(0,_.Gpc)(()=>lo)};let lo=(()=>{class M extends yi{set isDisabled(L){}constructor(L,ne,vt,Tn,$r){super(),this._ngModelWarningConfig=$r,this._added=!1,this.update=new _.vpe,this._ngModelWarningSent=!1,this._parent=L,this._setValidators(ne),this._setAsyncValidators(vt),this.valueAccessor=Ur(0,Tn)}ngOnChanges(L){this._added||this._setUpControl(),kr(L,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(L){this.viewModel=L,this.update.emit(L)}get path(){return He(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return M._ngModelWarningSentOnce=!1,M.\u0275fac=function(L){return new(L||M)(_.Y36(zn,13),_.Y36(Ue,10),_.Y36(ke,10),_.Y36(ct,10),_.Y36(jo,8))},M.\u0275dir=_.lG2({type:M,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[_._Bn([Qa]),_.qOj,_.TTD]}),M})(),To=(()=>{class M{}return M.\u0275fac=function(L){return new(L||M)},M.\u0275mod=_.oAB({type:M}),M.\u0275inj=_.cJS({imports:[vs]}),M})();class sa extends rt{constructor(F,L,ne){super(qe(L),ut(ne,L)),this.controls=F,this._initObservables(),this._setUpdateStrategy(L),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(F){return this.controls[this._adjustIndex(F)]}push(F,L={}){this.controls.push(F),this._registerControl(F),this.updateValueAndValidity({emitEvent:L.emitEvent}),this._onCollectionChange()}insert(F,L,ne={}){this.controls.splice(F,0,L),this._registerControl(L),this.updateValueAndValidity({emitEvent:ne.emitEvent})}removeAt(F,L={}){let ne=this._adjustIndex(F);ne<0&&(ne=0),this.controls[ne]&&this.controls[ne]._registerOnCollectionChange(()=>{}),this.controls.splice(ne,1),this.updateValueAndValidity({emitEvent:L.emitEvent})}setControl(F,L,ne={}){let vt=this._adjustIndex(F);vt<0&&(vt=0),this.controls[vt]&&this.controls[vt]._registerOnCollectionChange(()=>{}),this.controls.splice(vt,1),L&&(this.controls.splice(vt,0,L),this._registerControl(L)),this.updateValueAndValidity({emitEvent:ne.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(F,L={}){ve(this,!1,F),F.forEach((ne,vt)=>{Ge(this,!1,vt),this.at(vt).setValue(ne,{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L)}patchValue(F,L={}){null!=F&&(F.forEach((ne,vt)=>{this.at(vt)&&this.at(vt).patchValue(ne,{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L))}reset(F=[],L={}){this._forEachChild((ne,vt)=>{ne.reset(F[vt],{onlySelf:!0,emitEvent:L.emitEvent})}),this._updatePristine(L),this._updateTouched(L),this.updateValueAndValidity(L)}getRawValue(){return this.controls.map(F=>F.getRawValue())}clear(F={}){this.controls.length<1||(this._forEachChild(L=>L._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:F.emitEvent}))}_adjustIndex(F){return F<0?F+this.length:F}_syncPendingControls(){let F=this.controls.reduce((L,ne)=>!!ne._syncPendingControls()||L,!1);return F&&this.updateValueAndValidity({onlySelf:!0}),F}_forEachChild(F){this.controls.forEach((L,ne)=>{F(L,ne)})}_updateValue(){this.value=this.controls.filter(F=>F.enabled||this.disabled).map(F=>F.value)}_anyControls(F){return this.controls.some(L=>L.enabled&&F(L))}_setUpControls(){this._forEachChild(F=>this._registerControl(F))}_allControlsDisabled(){for(const F of this.controls)if(F.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(F){F.setParent(this),F._registerOnCollectionChange(this._onCollectionChange)}_find(F){var L;return null!==(L=this.at(F))&&void 0!==L?L:null}}function pa(M){return!!M&&(void 0!==M.asyncValidators||void 0!==M.validators||void 0!==M.updateOn)}let oa=(()=>{class M{constructor(){this.useNonNullable=!1}get nonNullable(){const L=new M;return L.useNonNullable=!0,L}group(L,ne=null){const vt=this._reduceControls(L);let Tn={};return pa(ne)?Tn=ne:null!==ne&&(Tn.validators=ne.validator,Tn.asyncValidators=ne.asyncValidator),new Nt(vt,Tn)}record(L,ne=null){const vt=this._reduceControls(L);return new Tt(vt,ne)}control(L,ne,vt){let Tn={};return this.useNonNullable?(pa(ne)?Tn=ne:(Tn.validators=ne,Tn.asyncValidators=vt),new Lt(L,{...Tn,nonNullable:!0})):new Lt(L,ne,vt)}array(L,ne,vt){const Tn=L.map($r=>this._createControl($r));return new sa(Tn,ne,vt)}_reduceControls(L){const ne={};return Object.keys(L).forEach(vt=>{ne[vt]=this._createControl(L[vt])}),ne}_createControl(L){return L instanceof Lt||L instanceof rt?L:Array.isArray(L)?this.control(L[0],L.length>1?L[1]:null,L.length>2?L[2]:null):this.control(L)}}return M.\u0275fac=function(L){return new(L||M)},M.\u0275prov=_.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})(),W=(()=>{class M{static withConfig(L){var ne;return{ngModule:M,providers:[{provide:Qt,useValue:null!==(ne=L.callSetDisabledState)&&void 0!==ne?ne:Xe}]}}}return M.\u0275fac=function(L){return new(L||M)},M.\u0275mod=_.oAB({type:M}),M.\u0275inj=_.cJS({imports:[To]}),M})(),ge=(()=>{class M{static withConfig(L){var ne,vt;return{ngModule:M,providers:[{provide:jo,useValue:null!==(ne=L.warnOnNgModelWithFormControl)&&void 0!==ne?ne:"always"},{provide:Qt,useValue:null!==(vt=L.callSetDisabledState)&&void 0!==vt?vt:Xe}]}}}return M.\u0275fac=function(L){return new(L||M)},M.\u0275mod=_.oAB({type:M}),M.\u0275inj=_.cJS({imports:[To]}),M})()},1481:(In,Et,j)=>{"use strict";j.d(Et,{Cg:()=>St,Dx:()=>qn,H7:()=>qe});var _=j(6895),m=j(4650);class ee extends _.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ce extends ee{static makeCurrent(){(0,_.HT)(new ce)}onAndCancel(Ge,ve,rt){return Ge.addEventListener(ve,rt,!1),()=>{Ge.removeEventListener(ve,rt,!1)}}dispatchEvent(Ge,ve){Ge.dispatchEvent(ve)}remove(Ge){Ge.parentNode&&Ge.parentNode.removeChild(Ge)}createElement(Ge,ve){return(ve=ve||this.getDefaultDocument()).createElement(Ge)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Ge){return Ge.nodeType===Node.ELEMENT_NODE}isShadowRoot(Ge){return Ge instanceof DocumentFragment}getGlobalEventTarget(Ge,ve){return"window"===ve?window:"document"===ve?Ge:"body"===ve?Ge.body:null}getBaseHref(Ge){const ve=function Se(){return $e=$e||document.querySelector("base"),$e?$e.getAttribute("href"):null}();return null==ve?null:function Me(ot){_e=_e||document.createElement("a"),_e.setAttribute("href",ot);const Ge=_e.pathname;return"/"===Ge.charAt(0)?Ge:`/${Ge}`}(ve)}resetBaseElement(){$e=null}getUserAgent(){return window.navigator.userAgent}getCookie(Ge){return(0,_.Mx)(document.cookie,Ge)}}let _e,$e=null,Ke=(()=>{class ot{build(){return new XMLHttpRequest}}return ot.\u0275fac=function(ve){return new(ve||ot)},ot.\u0275prov=m.Yz7({token:ot,factory:ot.\u0275fac}),ot})();const We=new m.OlP("EventManagerPlugins");let ct=(()=>{class ot{constructor(ve,rt){this._zone=rt,this._eventNameToPlugin=new Map,ve.forEach(Nt=>{Nt.manager=this}),this._plugins=ve.slice().reverse()}addEventListener(ve,rt,Nt){return this._findPluginFor(rt).addEventListener(ve,rt,Nt)}addGlobalEventListener(ve,rt,Nt){return this._findPluginFor(rt).addGlobalEventListener(ve,rt,Nt)}getZone(){return this._zone}_findPluginFor(ve){const rt=this._eventNameToPlugin.get(ve);if(rt)return rt;const Nt=this._plugins;for(let he=0;he<Nt.length;he++){const Ce=Nt[he];if(Ce.supports(ve))return this._eventNameToPlugin.set(ve,Ce),Ce}throw new Error(`No event manager plugin found for event ${ve}`)}}return ot.\u0275fac=function(ve){return new(ve||ot)(m.LFG(We),m.LFG(m.R0b))},ot.\u0275prov=m.Yz7({token:ot,factory:ot.\u0275fac}),ot})();class At{constructor(Ge){this._doc=Ge}addGlobalEventListener(Ge,ve,rt){const Nt=(0,_.q)().getGlobalEventTarget(this._doc,Ge);if(!Nt)throw new Error(`Unsupported event target ${Nt} for event ${ve}`);return this.addEventListener(Nt,ve,rt)}}let xe=(()=>{class ot{constructor(){this.usageCount=new Map}addStyles(ve){for(const rt of ve)1===this.changeUsageCount(rt,1)&&this.onStyleAdded(rt)}removeStyles(ve){for(const rt of ve)0===this.changeUsageCount(rt,-1)&&this.onStyleRemoved(rt)}onStyleRemoved(ve){}onStyleAdded(ve){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(ve,rt){var Nt;const he=this.usageCount;let Ce=null!==(Nt=he.get(ve))&&void 0!==Nt?Nt:0;return Ce+=rt,Ce>0?he.set(ve,Ce):he.delete(ve),Ce}ngOnDestroy(){for(const ve of this.getAllStyles())this.onStyleRemoved(ve);this.usageCount.clear()}}return ot.\u0275fac=function(ve){return new(ve||ot)},ot.\u0275prov=m.Yz7({token:ot,factory:ot.\u0275fac}),ot})(),Re=(()=>{class ot extends xe{constructor(ve){super(),this.doc=ve,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(ve){for(const rt of this.hostNodes)this.addStyleToHost(rt,ve)}onStyleRemoved(ve){const rt=this.styleRef,Nt=rt.get(ve);null==Nt||Nt.forEach(he=>he.remove()),rt.delete(ve)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(ve){this.hostNodes.add(ve);for(const rt of this.getAllStyles())this.addStyleToHost(ve,rt)}removeHost(ve){this.hostNodes.delete(ve)}addStyleToHost(ve,rt){const Nt=this.doc.createElement("style");Nt.textContent=rt,ve.appendChild(Nt);const he=this.styleRef.get(rt);he?he.push(Nt):this.styleRef.set(rt,[Nt])}resetHostNodes(){const ve=this.hostNodes;ve.clear(),ve.add(this.doc.head)}}return ot.\u0275fac=function(ve){return new(ve||ot)(m.LFG(_.K0))},ot.\u0275prov=m.Yz7({token:ot,factory:ot.\u0275fac}),ot})();const de={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},_t=/%COMP%/g,ke=new m.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function je(ot,Ge){return Ge.flat(100).map(ve=>ve.replace(_t,ot))}function gt(ot){return Ge=>{if("__ngUnwrap__"===Ge)return ot;!1===ot(Ge)&&(Ge.preventDefault(),Ge.returnValue=!1)}}let Dt=(()=>{class ot{constructor(ve,rt,Nt,he){this.eventManager=ve,this.sharedStylesHost=rt,this.appId=Nt,this.removeStylesOnCompDestory=he,this.rendererByCompId=new Map,this.defaultRenderer=new ht(ve)}createRenderer(ve,rt){if(!ve||!rt)return this.defaultRenderer;const Nt=this.getOrCreateRenderer(ve,rt);return Nt instanceof ft?Nt.applyToHost(ve):Nt instanceof Be&&Nt.applyStyles(),Nt}getOrCreateRenderer(ve,rt){const Nt=this.rendererByCompId;let he=Nt.get(rt.id);if(!he){const Ce=this.eventManager,Tt=this.sharedStylesHost,It=this.removeStylesOnCompDestory;switch(rt.encapsulation){case m.ifc.Emulated:he=new ft(Ce,Tt,rt,this.appId,It);break;case m.ifc.ShadowDom:return new Ve(Ce,Tt,ve,rt);default:he=new Be(Ce,Tt,rt,It)}he.onDestroy=()=>Nt.delete(rt.id),Nt.set(rt.id,he)}return he}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return ot.\u0275fac=function(ve){return new(ve||ot)(m.LFG(ct),m.LFG(Re),m.LFG(m.AFp),m.LFG(ke))},ot.\u0275prov=m.Yz7({token:ot,factory:ot.\u0275fac}),ot})();class ht{constructor(Ge){this.eventManager=Ge,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Ge,ve){return ve?document.createElementNS(de[ve]||ve,Ge):document.createElement(Ge)}createComment(Ge){return document.createComment(Ge)}createText(Ge){return document.createTextNode(Ge)}appendChild(Ge,ve){(Fe(Ge)?Ge.content:Ge).appendChild(ve)}insertBefore(Ge,ve,rt){Ge&&(Fe(Ge)?Ge.content:Ge).insertBefore(ve,rt)}removeChild(Ge,ve){Ge&&Ge.removeChild(ve)}selectRootElement(Ge,ve){let rt="string"==typeof Ge?document.querySelector(Ge):Ge;if(!rt)throw new Error(`The selector "${Ge}" did not match any elements`);return ve||(rt.textContent=""),rt}parentNode(Ge){return Ge.parentNode}nextSibling(Ge){return Ge.nextSibling}setAttribute(Ge,ve,rt,Nt){if(Nt){ve=Nt+":"+ve;const he=de[Nt];he?Ge.setAttributeNS(he,ve,rt):Ge.setAttribute(ve,rt)}else Ge.setAttribute(ve,rt)}removeAttribute(Ge,ve,rt){if(rt){const Nt=de[rt];Nt?Ge.removeAttributeNS(Nt,ve):Ge.removeAttribute(`${rt}:${ve}`)}else Ge.removeAttribute(ve)}addClass(Ge,ve){Ge.classList.add(ve)}removeClass(Ge,ve){Ge.classList.remove(ve)}setStyle(Ge,ve,rt,Nt){Nt&(m.JOm.DashCase|m.JOm.Important)?Ge.style.setProperty(ve,rt,Nt&m.JOm.Important?"important":""):Ge.style[ve]=rt}removeStyle(Ge,ve,rt){rt&m.JOm.DashCase?Ge.style.removeProperty(ve):Ge.style[ve]=""}setProperty(Ge,ve,rt){Ge[ve]=rt}setValue(Ge,ve){Ge.nodeValue=ve}listen(Ge,ve,rt){return"string"==typeof Ge?this.eventManager.addGlobalEventListener(Ge,ve,gt(rt)):this.eventManager.addEventListener(Ge,ve,gt(rt))}}function Fe(ot){return"TEMPLATE"===ot.tagName&&void 0!==ot.content}class Ve extends ht{constructor(Ge,ve,rt,Nt){super(Ge),this.sharedStylesHost=ve,this.hostEl=rt,this.shadowRoot=rt.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const he=je(Nt.id,Nt.styles);for(const Ce of he){const Tt=document.createElement("style");Tt.textContent=Ce,this.shadowRoot.appendChild(Tt)}}nodeOrShadowRoot(Ge){return Ge===this.hostEl?this.shadowRoot:Ge}appendChild(Ge,ve){return super.appendChild(this.nodeOrShadowRoot(Ge),ve)}insertBefore(Ge,ve,rt){return super.insertBefore(this.nodeOrShadowRoot(Ge),ve,rt)}removeChild(Ge,ve){return super.removeChild(this.nodeOrShadowRoot(Ge),ve)}parentNode(Ge){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Ge)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Be extends ht{constructor(Ge,ve,rt,Nt,he=rt.id){super(Ge),this.sharedStylesHost=ve,this.removeStylesOnCompDestory=Nt,this.rendererUsageCount=0,this.styles=je(he,rt.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){var Ge;this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount)&&(null===(Ge=this.onDestroy)||void 0===Ge||Ge.call(this))}}class ft extends Be{constructor(Ge,ve,rt,Nt,he){const Ce=Nt+"-"+rt.id;super(Ge,ve,rt,he,Ce),this.contentAttr=function Ne(ot){return"_ngcontent-%COMP%".replace(_t,ot)}(Ce),this.hostAttr=function De(ot){return"_nghost-%COMP%".replace(_t,ot)}(Ce)}applyToHost(Ge){this.applyStyles(),this.setAttribute(Ge,this.hostAttr,"")}createElement(Ge,ve){const rt=super.createElement(Ge,ve);return super.setAttribute(rt,this.contentAttr,""),rt}}let wt=(()=>{class ot extends At{constructor(ve){super(ve)}supports(ve){return!0}addEventListener(ve,rt,Nt){return ve.addEventListener(rt,Nt,!1),()=>this.removeEventListener(ve,rt,Nt)}removeEventListener(ve,rt,Nt){return ve.removeEventListener(rt,Nt)}}return ot.\u0275fac=function(ve){return new(ve||ot)(m.LFG(_.K0))},ot.\u0275prov=m.Yz7({token:ot,factory:ot.\u0275fac}),ot})();const nn=["alt","control","meta","shift"],zt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Dn={alt:ot=>ot.altKey,control:ot=>ot.ctrlKey,meta:ot=>ot.metaKey,shift:ot=>ot.shiftKey};let kt=(()=>{class ot extends At{constructor(ve){super(ve)}supports(ve){return null!=ot.parseEventName(ve)}addEventListener(ve,rt,Nt){const he=ot.parseEventName(rt),Ce=ot.eventCallback(he.fullKey,Nt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,_.q)().onAndCancel(ve,he.domEventName,Ce))}static parseEventName(ve){const rt=ve.toLowerCase().split("."),Nt=rt.shift();if(0===rt.length||"keydown"!==Nt&&"keyup"!==Nt)return null;const he=ot._normalizeKey(rt.pop());let Ce="",Tt=rt.indexOf("code");if(Tt>-1&&(rt.splice(Tt,1),Ce="code."),nn.forEach(Qt=>{const Xe=rt.indexOf(Qt);Xe>-1&&(rt.splice(Xe,1),Ce+=Qt+".")}),Ce+=he,0!=rt.length||0===he.length)return null;const It={};return It.domEventName=Nt,It.fullKey=Ce,It}static matchEventFullKeyCode(ve,rt){let Nt=zt[ve.key]||ve.key,he="";return rt.indexOf("code.")>-1&&(Nt=ve.code,he="code."),!(null==Nt||!Nt)&&(Nt=Nt.toLowerCase()," "===Nt?Nt="space":"."===Nt&&(Nt="dot"),nn.forEach(Ce=>{Ce!==Nt&&(0,Dn[Ce])(ve)&&(he+=Ce+".")}),he+=Nt,he===rt)}static eventCallback(ve,rt,Nt){return he=>{ot.matchEventFullKeyCode(he,ve)&&Nt.runGuarded(()=>rt(he))}}static _normalizeKey(ve){return"esc"===ve?"escape":ve}}return ot.\u0275fac=function(ve){return new(ve||ot)(m.LFG(_.K0))},ot.\u0275prov=m.Yz7({token:ot,factory:ot.\u0275fac}),ot})();function St(ot,Ge){return(0,m.iPO)({rootComponent:ot,...On(Ge)})}function On(ot){var Ge;return{appProviders:[...zn,...null!==(Ge=null==ot?void 0:ot.providers)&&void 0!==Ge?Ge:[]],platformProviders:hr}}const hr=[{provide:m.Lbi,useValue:_.bD},{provide:m.g9A,useValue:function xn(){ce.makeCurrent()},multi:!0},{provide:_.K0,useFactory:function Cn(){return(0,m.RDi)(document),document},deps:[]}],zn=[{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function cn(){return new m.qLn},deps:[]},{provide:We,useClass:wt,multi:!0,deps:[_.K0,m.R0b,m.Lbi]},{provide:We,useClass:kt,multi:!0,deps:[_.K0]},{provide:Dt,useClass:Dt,deps:[ct,Re,m.AFp,ke]},{provide:m.FYo,useExisting:Dt},{provide:xe,useExisting:Re},{provide:Re,useClass:Re,deps:[_.K0]},{provide:ct,useClass:ct,deps:[We,m.R0b]},{provide:_.JF,useClass:Ke,deps:[]},[]];let qn=(()=>{class ot{constructor(ve){this._doc=ve}getTitle(){return this._doc.title}setTitle(ve){this._doc.title=ve||""}}return ot.\u0275fac=function(ve){return new(ve||ot)(m.LFG(_.K0))},ot.\u0275prov=m.Yz7({token:ot,factory:function(ve){let rt=null;return rt=ve?new ve:function Gn(){return new qn((0,m.LFG)(_.K0))}(),rt},providedIn:"root"}),ot})();typeof window<"u"&&window;let qe=(()=>{class ot{}return ot.\u0275fac=function(ve){return new(ve||ot)},ot.\u0275prov=m.Yz7({token:ot,factory:function(ve){let rt=null;return rt=ve?new(ve||ot):m.LFG(ut),rt},providedIn:"root"}),ot})(),ut=(()=>{class ot extends qe{constructor(ve){super(),this._doc=ve}sanitize(ve,rt){if(null==rt)return null;switch(ve){case m.q3G.NONE:return rt;case m.q3G.HTML:return(0,m.qzn)(rt,"HTML")?(0,m.z3N)(rt):(0,m.EiD)(this._doc,String(rt)).toString();case m.q3G.STYLE:return(0,m.qzn)(rt,"Style")?(0,m.z3N)(rt):rt;case m.q3G.SCRIPT:if((0,m.qzn)(rt,"Script"))return(0,m.z3N)(rt);throw new Error("unsafe value used in a script context");case m.q3G.URL:return(0,m.qzn)(rt,"URL")?(0,m.z3N)(rt):(0,m.mCW)(String(rt));case m.q3G.RESOURCE_URL:if((0,m.qzn)(rt,"ResourceURL"))return(0,m.z3N)(rt);throw new Error(`unsafe value used in a resource URL context (see ${m.JZr})`);default:throw new Error(`Unexpected SecurityContext ${ve} (see ${m.JZr})`)}}bypassSecurityTrustHtml(ve){return(0,m.JVY)(ve)}bypassSecurityTrustStyle(ve){return(0,m.L6k)(ve)}bypassSecurityTrustScript(ve){return(0,m.eBb)(ve)}bypassSecurityTrustUrl(ve){return(0,m.LAX)(ve)}bypassSecurityTrustResourceUrl(ve){return(0,m.pB0)(ve)}}return ot.\u0275fac=function(ve){return new(ve||ot)(m.LFG(_.K0))},ot.\u0275prov=m.Yz7({token:ot,factory:function(ve){let rt=null;return rt=ve?new ve:function Ot(ot){return new ut(ot.get(_.K0))}(m.LFG(m.zs3)),rt},providedIn:"root"}),ot})()},1194:(In,Et,j)=>{"use strict";j.d(Et,{gz:()=>As,y6:()=>na,OD:()=>Lt,eC:()=>cn,wN:()=>Js,F0:()=>hn,rH:()=>il,Bz:()=>Yr,Hx:()=>Ze,bU:()=>la});var _=j(4650),m=j(8996),ee=j(9646),ce=j(1135),$e=j(6805),Se=j(9751),_e=j(4742),Me=j(4671),ze=j(3268),ye=j(7669),ae=j(1810),Ee=j(5403),Ke=j(9672);function We(...S){const x=(0,ye.yG)(S),w=(0,ye.jO)(S),{args:O,keys:z}=(0,_e.D)(S);if(0===O.length)return(0,m.D)([],x);const re=new Se.y(function ct(S,x,w=Me.y){return O=>{At(x,()=>{const{length:z}=S,re=new Array(z);let le=z,lt=z;for(let Ut=0;Ut<z;Ut++)At(x,()=>{const En=(0,m.D)(S[Ut],x);let Hn=!1;En.subscribe((0,Ee.x)(O,$n=>{re[Ut]=$n,Hn||(Hn=!0,lt--),lt||O.next(w(re.slice()))},()=>{--le||O.complete()}))},O)},O)}}(O,x,z?le=>(0,ae.n)(z,le):Me.y));return w?re.pipe((0,ze.Z)(w)):re}function At(S,x,w){S?(0,Ke.f)(w,S,x):x()}var xe=j(7272),Re=j(8421);function de(S){return new Se.y(x=>{(0,Re.Xf)(S()).subscribe(x)})}var _t=j(9635),Y=j(576);function it(S,x){const w=(0,Y.m)(S)?S:()=>S,O=z=>z.error(w());return new Se.y(x?z=>x.schedule(O,0,z):O)}var et=j(515),Pt=j(727),Ue=j(4482);function ke(){return(0,Ue.e)((S,x)=>{let w=null;S._refCount++;const O=(0,Ee.x)(x,void 0,void 0,void 0,()=>{if(!S||S._refCount<=0||0<--S._refCount)return void(w=null);const z=S._connection,re=w;w=null,z&&(!re||z===re)&&z.unsubscribe(),x.unsubscribe()});S.subscribe(O),O.closed||(w=S.connect())})}class Ne extends Se.y{constructor(x,w){super(),this.source=x,this.subjectFactory=w,this._subject=null,this._refCount=0,this._connection=null,(0,Ue.A)(x)&&(this.lift=x.lift)}_subscribe(x){return this.getSubject().subscribe(x)}getSubject(){const x=this._subject;return(!x||x.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:x}=this;this._subject=this._connection=null,null==x||x.unsubscribe()}connect(){let x=this._connection;if(!x){x=this._connection=new Pt.w0;const w=this.getSubject();x.add(this.source.subscribe((0,Ee.x)(w,void 0,()=>{this._teardown(),w.complete()},O=>{this._teardown(),w.error(O)},()=>this._teardown()))),x.closed&&(this._connection=null,x=Pt.w0.EMPTY)}return x}refCount(){return ke()(this)}}var De=j(7579),je=j(6895),gt=j(4004),Dt=j(3900),ht=j(5698),Mt=j(8675),yt=j(9300),Fe=j(5577),Ve=j(590),Be=j(4351),ft=j(8505);function wt(S){return(0,Ue.e)((x,w)=>{let re,O=null,z=!1;O=x.subscribe((0,Ee.x)(w,void 0,void 0,le=>{re=(0,Re.Xf)(S(le,wt(S)(x))),O?(O.unsubscribe(),O=null,re.subscribe(w)):z=!0})),z&&(O.unsubscribe(),O=null,re.subscribe(w))})}var nn=j(5026);function zt(S){return S<=0?()=>et.E:(0,Ue.e)((x,w)=>{let O=[];x.subscribe((0,Ee.x)(w,z=>{O.push(z),S<O.length&&O.shift()},()=>{for(const z of O)w.next(z);w.complete()},void 0,()=>{O=null}))})}var Dn=j(8068),kt=j(6590);function Ae(S,x){const w=arguments.length>=2;return O=>O.pipe(S?(0,yt.h)((z,re)=>S(z,re,O)):Me.y,zt(1),w?(0,kt.d)(x):(0,Dn.T)(()=>new $e.K))}function On(S){return(0,Ue.e)((x,w)=>{try{x.subscribe(w)}finally{w.add(S)}})}var Yn=j(8189),xn=j(1481);const cn="primary",Cn=Symbol("RouteTitle");class hr{constructor(x){this.params=x||{}}has(x){return Object.prototype.hasOwnProperty.call(this.params,x)}get(x){if(this.has(x)){const w=this.params[x];return Array.isArray(w)?w[0]:w}return null}getAll(x){if(this.has(x)){const w=this.params[x];return Array.isArray(w)?w:[w]}return[]}get keys(){return Object.keys(this.params)}}function _r(S){return new hr(S)}function tr(S,x,w){const O=w.path.split("/");if(O.length>S.length||"full"===w.pathMatch&&(x.hasChildren()||O.length<S.length))return null;const z={};for(let re=0;re<O.length;re++){const le=O[re],lt=S[re];if(le.startsWith(":"))z[le.substring(1)]=lt;else if(le!==lt.path)return null}return{consumed:S.slice(0,O.length),posParams:z}}function zn(S,x){const w=S?Object.keys(S):void 0,O=x?Object.keys(x):void 0;if(!w||!O||w.length!=O.length)return!1;let z;for(let re=0;re<w.length;re++)if(z=w[re],!yi(S[z],x[z]))return!1;return!0}function yi(S,x){if(Array.isArray(S)&&Array.isArray(x)){if(S.length!==x.length)return!1;const w=[...S].sort(),O=[...x].sort();return w.every((z,re)=>O[re]===z)}return S===x}function Cr(S){return Array.prototype.concat.apply([],S)}function di(S){return S.length>0?S[S.length-1]:null}function Gn(S,x){for(const w in S)S.hasOwnProperty(w)&&x(S[w],w)}function qn(S){return(0,_.CqO)(S)?S:(0,_.QGY)(S)?(0,m.D)(Promise.resolve(S)):(0,ee.of)(S)}const ln=!1,yn={exact:function Qr(S,x,w){if(!mr(S.segments,x.segments)||!gi(S.segments,x.segments,w)||S.numberOfChildren!==x.numberOfChildren)return!1;for(const O in x.children)if(!S.children[O]||!Qr(S.children[O],x.children[O],w))return!1;return!0},subset:pi},on={exact:function Dr(S,x){return zn(S,x)},subset:function zr(S,x){return Object.keys(x).length<=Object.keys(S).length&&Object.keys(x).every(w=>yi(S[w],x[w]))},ignored:()=>!0};function Jr(S,x,w){return yn[w.paths](S.root,x.root,w.matrixParams)&&on[w.queryParams](S.queryParams,x.queryParams)&&!("exact"===w.fragment&&S.fragment!==x.fragment)}function pi(S,x,w){return Lr(S,x,x.segments,w)}function Lr(S,x,w,O){if(S.segments.length>w.length){const z=S.segments.slice(0,w.length);return!(!mr(z,w)||x.hasChildren()||!gi(z,w,O))}if(S.segments.length===w.length){if(!mr(S.segments,w)||!gi(S.segments,w,O))return!1;for(const z in x.children)if(!S.children[z]||!pi(S.children[z],x.children[z],O))return!1;return!0}{const z=w.slice(0,S.segments.length),re=w.slice(S.segments.length);return!!(mr(S.segments,z)&&gi(S.segments,z,O)&&S.children[cn])&&Lr(S.children[cn],x,re,O)}}function gi(S,x,w){return x.every((O,z)=>on[w](S[z].parameters,O.parameters))}class ur{constructor(x=new lr([],{}),w={},O=null){this.root=x,this.queryParams=w,this.fragment=O}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=_r(this.queryParams)),this._queryParamMap}toString(){return en.serialize(this)}}class lr{constructor(x,w){this.segments=x,this.children=w,this.parent=null,Gn(w,(O,z)=>O.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Yt(this)}}class yr{constructor(x,w){this.path=x,this.parameters=w}get parameterMap(){return this._parameterMap||(this._parameterMap=_r(this.parameters)),this._parameterMap}toString(){return Ge(this)}}function mr(S,x){return S.length===x.length&&S.every((w,O)=>w.path===x[O].path)}let Ze=(()=>{class S{}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=_.Yz7({token:S,factory:function(){return new nt},providedIn:"root"}),S})();class nt{parse(x){const w=new Xe(x);return new ur(w.parseRootSegment(),w.parseQueryParams(),w.parseFragment())}serialize(x){const w=`/${we(x.root,!0)}`,O=function rt(S){const x=Object.keys(S).map(w=>{const O=S[w];return Array.isArray(O)?O.map(z=>`${qe(w)}=${qe(z)}`).join("&"):`${qe(w)}=${qe(O)}`}).filter(w=>!!w);return x.length?`?${x.join("&")}`:""}(x.queryParams);return`${w}${O}${"string"==typeof x.fragment?`#${function Ot(S){return encodeURI(S)}(x.fragment)}`:""}`}}const en=new nt;function Yt(S){return S.segments.map(x=>Ge(x)).join("/")}function we(S,x){if(!S.hasChildren())return Yt(S);if(x){const w=S.children[cn]?we(S.children[cn],!1):"",O=[];return Gn(S.children,(z,re)=>{re!==cn&&O.push(`${re}:${we(z,!1)}`)}),O.length>0?`${w}(${O.join("//")})`:w}{const w=function Kt(S,x){let w=[];return Gn(S.children,(O,z)=>{z===cn&&(w=w.concat(x(O,z)))}),Gn(S.children,(O,z)=>{z!==cn&&(w=w.concat(x(O,z)))}),w}(S,(O,z)=>z===cn?[we(S.children[cn],!1)]:[`${z}:${we(O,!1)}`]);return 1===Object.keys(S.children).length&&null!=S.children[cn]?`${Yt(S)}/${w[0]}`:`${Yt(S)}/(${w.join("//")})`}}function Ie(S){return encodeURIComponent(S).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qe(S){return Ie(S).replace(/%3B/gi,";")}function ut(S){return Ie(S).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function un(S){return decodeURIComponent(S)}function ot(S){return un(S.replace(/\+/g,"%20"))}function Ge(S){return`${ut(S.path)}${function ve(S){return Object.keys(S).map(x=>`;${ut(x)}=${ut(S[x])}`).join("")}(S.parameters)}`}const Nt=/^[^\/()?;=#]+/;function he(S){const x=S.match(Nt);return x?x[0]:""}const Ce=/^[^=?&#]+/,It=/^[^&#]+/;class Xe{constructor(x){this.url=x,this.remaining=x}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new lr([],{}):new lr([],this.parseChildren())}parseQueryParams(){const x={};if(this.consumeOptional("?"))do{this.parseQueryParam(x)}while(this.consumeOptional("&"));return x}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const x=[];for(this.peekStartsWith("(")||x.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),x.push(this.parseSegment());let w={};this.peekStartsWith("/(")&&(this.capture("/"),w=this.parseParens(!0));let O={};return this.peekStartsWith("(")&&(O=this.parseParens(!1)),(x.length>0||Object.keys(w).length>0)&&(O[cn]=new lr(x,w)),O}parseSegment(){const x=he(this.remaining);if(""===x&&this.peekStartsWith(";"))throw new _.vHH(4009,ln);return this.capture(x),new yr(un(x),this.parseMatrixParams())}parseMatrixParams(){const x={};for(;this.consumeOptional(";");)this.parseParam(x);return x}parseParam(x){const w=he(this.remaining);if(!w)return;this.capture(w);let O="";if(this.consumeOptional("=")){const z=he(this.remaining);z&&(O=z,this.capture(O))}x[un(w)]=un(O)}parseQueryParam(x){const w=function Tt(S){const x=S.match(Ce);return x?x[0]:""}(this.remaining);if(!w)return;this.capture(w);let O="";if(this.consumeOptional("=")){const le=function Qt(S){const x=S.match(It);return x?x[0]:""}(this.remaining);le&&(O=le,this.capture(O))}const z=ot(w),re=ot(O);if(x.hasOwnProperty(z)){let le=x[z];Array.isArray(le)||(le=[le],x[z]=le),le.push(re)}else x[z]=re}parseParens(x){const w={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const O=he(this.remaining),z=this.remaining[O.length];if("/"!==z&&")"!==z&&";"!==z)throw new _.vHH(4010,ln);let re;O.indexOf(":")>-1?(re=O.slice(0,O.indexOf(":")),this.capture(re),this.capture(":")):x&&(re=cn);const le=this.parseChildren();w[re]=1===Object.keys(le).length?le[cn]:new lr([],le),this.consumeOptional("//")}return w}peekStartsWith(x){return this.remaining.startsWith(x)}consumeOptional(x){return!!this.peekStartsWith(x)&&(this.remaining=this.remaining.substring(x.length),!0)}capture(x){if(!this.consumeOptional(x))throw new _.vHH(4011,ln)}}function He(S){return S.segments.length>0?new lr([],{[cn]:S}):S}function Ct(S){const x={};for(const O of Object.keys(S.children)){const re=Ct(S.children[O]);(re.segments.length>0||re.hasChildren())&&(x[O]=re)}return function Gt(S){if(1===S.numberOfChildren&&S.children[cn]){const x=S.children[cn];return new lr(S.segments.concat(x.segments),x.children)}return S}(new lr(S.segments,x))}function pn(S){return S instanceof ur}const kn=!1;function Wn(S,x,w,O,z){var re;if(0===w.length)return vi(x.root,x.root,x.root,O,z);const le=function An(S){if("string"==typeof S[0]&&1===S.length&&"/"===S[0])return new ji(!0,0,S);let x=0,w=!1;const O=S.reduce((z,re,le)=>{if("object"==typeof re&&null!=re){if(re.outlets){const lt={};return Gn(re.outlets,(Ut,En)=>{lt[En]="string"==typeof Ut?Ut.split("/"):Ut}),[...z,{outlets:lt}]}if(re.segmentPath)return[...z,re.segmentPath]}return"string"!=typeof re?[...z,re]:0===le?(re.split("/").forEach((lt,Ut)=>{0==Ut&&"."===lt||(0==Ut&&""===lt?w=!0:".."===lt?x++:""!=lt&&z.push(lt))}),z):[...z,re]},[]);return new ji(w,x,O)}(w);return le.toRoot()?vi(x.root,x.root,new lr([],{}),O,z):function lt(En){var Hn;const $n=function qi(S,x,w,O){if(S.isAbsolute)return new cr(x.root,!0,0);if(-1===O)return new cr(w,w===x.root,0);return function kr(S,x,w){let O=S,z=x,re=w;for(;re>z;){if(re-=z,O=O.parent,!O)throw new _.vHH(4005,kn&&"Invalid number of '../'");z=O.segments.length}return new cr(O,!1,z-re)}(w,O+(Xn(S.commands[0])?0:1),S.numberOfDoubleDots)}(le,x,null===(Hn=S.snapshot)||void 0===Hn?void 0:Hn._urlSegment,En),Ii=$n.processChildren?Ur($n.segmentGroup,$n.index,le.commands):Li($n.segmentGroup,$n.index,le.commands);return vi(x.root,$n.segmentGroup,Ii,O,z)}(null===(re=S.snapshot)||void 0===re?void 0:re._lastPathIndex)}function Xn(S){return"object"==typeof S&&null!=S&&!S.outlets&&!S.segmentPath}function ys(S){return"object"==typeof S&&null!=S&&S.outlets}function vi(S,x,w,O,z){let le,re={};O&&Gn(O,(Ut,En)=>{re[En]=Array.isArray(Ut)?Ut.map(Hn=>`${Hn}`):`${Ut}`}),le=S===x?w:Vi(S,x,w);const lt=He(Ct(le));return new ur(lt,re,z)}function Vi(S,x,w){const O={};return Gn(S.children,(z,re)=>{O[re]=z===x?w:Vi(z,x,w)}),new lr(S.segments,O)}class ji{constructor(x,w,O){if(this.isAbsolute=x,this.numberOfDoubleDots=w,this.commands=O,x&&O.length>0&&Xn(O[0]))throw new _.vHH(4003,kn&&"Root segment cannot have matrix parameters");const z=O.find(ys);if(z&&z!==di(O))throw new _.vHH(4004,kn&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class cr{constructor(x,w,O){this.segmentGroup=x,this.processChildren=w,this.index=O}}function Li(S,x,w){if(S||(S=new lr([],{})),0===S.segments.length&&S.hasChildren())return Ur(S,x,w);const O=function se(S,x,w){let O=0,z=x;const re={match:!1,pathIndex:0,commandIndex:0};for(;z<S.segments.length;){if(O>=w.length)return re;const le=S.segments[z],lt=w[O];if(ys(lt))break;const Ut=`${lt}`,En=O<w.length-1?w[O+1]:null;if(z>0&&void 0===Ut)break;if(Ut&&En&&"object"==typeof En&&void 0===En.outlets){if(!Je(Ut,En,le))return re;O+=2}else{if(!Je(Ut,{},le))return re;O++}z++}return{match:!0,pathIndex:z,commandIndex:O}}(S,x,w),z=w.slice(O.commandIndex);if(O.match&&O.pathIndex<S.segments.length){const re=new lr(S.segments.slice(0,O.pathIndex),{});return re.children[cn]=new lr(S.segments.slice(O.pathIndex),S.children),Ur(re,0,z)}return O.match&&0===z.length?new lr(S.segments,{}):O.match&&!S.hasChildren()?be(S,x,w):O.match?Ur(S,0,z):be(S,x,w)}function Ur(S,x,w){if(0===w.length)return new lr(S.segments,{});{const O=function Ci(S){return ys(S[0])?S[0].outlets:{[cn]:S}}(w),z={};if(!O[cn]&&S.children[cn]&&1===S.numberOfChildren&&0===S.children[cn].segments.length){const re=Ur(S.children[cn],x,w);return new lr(S.segments,re.children)}return Gn(O,(re,le)=>{"string"==typeof re&&(re=[re]),null!==re&&(z[le]=Li(S.children[le],x,re))}),Gn(S.children,(re,le)=>{void 0===O[le]&&(z[le]=re)}),new lr(S.segments,z)}}function be(S,x,w){const O=S.segments.slice(0,x);let z=0;for(;z<w.length;){const re=w[z];if(ys(re)){const Ut=Ye(re.outlets);return new lr(O,Ut)}if(0===z&&Xn(w[0])){O.push(new yr(S.segments[x].path,me(w[0]))),z++;continue}const le=ys(re)?re.outlets[cn]:`${re}`,lt=z<w.length-1?w[z+1]:null;le&&lt&&Xn(lt)?(O.push(new yr(le,me(lt))),z+=2):(O.push(new yr(le,{})),z++)}return new lr(O,{})}function Ye(S){const x={};return Gn(S,(w,O)=>{"string"==typeof w&&(w=[w]),null!==w&&(x[O]=be(new lr([],{}),0,w))}),x}function me(S){const x={};return Gn(S,(w,O)=>x[O]=`${w}`),x}function Je(S,x,w){return S==w.path&&zn(x,w.parameters)}const Qe="imperative";class Vt{constructor(x,w){this.id=x,this.url=w}}class Lt extends Vt{constructor(x,w,O="imperative",z=null){super(x,w),this.type=0,this.navigationTrigger=O,this.restoredState=z}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Xt extends Vt{constructor(x,w,O){super(x,w),this.urlAfterRedirects=O,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class an extends Vt{constructor(x,w,O,z){super(x,w),this.reason=O,this.code=z,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class vn extends Vt{constructor(x,w,O,z){super(x,w),this.reason=O,this.code=z,this.type=16}}class rr extends Vt{constructor(x,w,O,z){super(x,w),this.error=O,this.target=z,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class er extends Vt{constructor(x,w,O,z){super(x,w),this.urlAfterRedirects=O,this.state=z,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vr extends Vt{constructor(x,w,O,z){super(x,w),this.urlAfterRedirects=O,this.state=z,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wr extends Vt{constructor(x,w,O,z,re){super(x,w),this.urlAfterRedirects=O,this.state=z,this.shouldActivate=re,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class $i extends Vt{constructor(x,w,O,z){super(x,w),this.urlAfterRedirects=O,this.state=z,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mt extends Vt{constructor(x,w,O,z){super(x,w),this.urlAfterRedirects=O,this.state=z,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class at{constructor(x){this.route=x,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class xt{constructor(x){this.route=x,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class tn{constructor(x){this.snapshot=x,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dn{constructor(x){this.snapshot=x,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fr{constructor(x){this.snapshot=x,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Er{constructor(x){this.snapshot=x,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ir{constructor(x,w,O){this.routerEvent=x,this.position=w,this.anchor=O,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Oo=(()=>{class S{createUrlTree(w,O,z,re,le,lt){return Wn(w||O.root,z,re,le,lt)}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac}),S})(),Ss=(()=>{class S{}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=_.Yz7({token:S,factory:function(x){return Oo.\u0275fac(x)},providedIn:"root"}),S})();class Hi{constructor(x){this._root=x}get root(){return this._root.value}parent(x){const w=this.pathFromRoot(x);return w.length>1?w[w.length-2]:null}children(x){const w=jo(x,this._root);return w?w.children.map(O=>O.value):[]}firstChild(x){const w=jo(x,this._root);return w&&w.children.length>0?w.children[0].value:null}siblings(x){const w=ua(x,this._root);return w.length<2?[]:w[w.length-2].children.map(z=>z.value).filter(z=>z!==x)}pathFromRoot(x){return ua(x,this._root).map(w=>w.value)}}function jo(S,x){if(S===x.value)return x;for(const w of x.children){const O=jo(S,w);if(O)return O}return null}function ua(S,x){if(S===x.value)return[x];for(const w of x.children){const O=ua(S,w);if(O.length)return O.unshift(x),O}return[]}class Yi{constructor(x,w){this.value=x,this.children=w}toString(){return`TreeNode(${this.value})`}}function oo(S){const x={};return S&&S.children.forEach(w=>x[w.value.outlet]=w),x}class Os extends Hi{constructor(x,w){super(x),this.snapshot=w,ds(this,x)}toString(){return this.snapshot.toString()}}function Ta(S,x){const w=function ko(S,x){const le=new Qa([],{},{},"",{},cn,x,null,S.root,-1,{});return new lo("",new Yi(le,[]))}(S,x),O=new ce.X([new yr("",{})]),z=new ce.X({}),re=new ce.X({}),le=new ce.X({}),lt=new ce.X(""),Ut=new As(O,z,le,lt,re,cn,x,w.root);return Ut.snapshot=w.root,new Os(new Yi(Ut,[]),w)}class As{constructor(x,w,O,z,re,le,lt,Ut){var En,Hn;this.url=x,this.params=w,this.queryParams=O,this.fragment=z,this.data=re,this.outlet=le,this.component=lt,this.title=null!==(En=null===(Hn=this.data)||void 0===Hn?void 0:Hn.pipe((0,gt.U)($n=>$n[Cn])))&&void 0!==En?En:(0,ee.of)(void 0),this._futureSnapshot=Ut}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,gt.U)(x=>_r(x)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,gt.U)(x=>_r(x)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ao(S,x="emptyOnly"){const w=S.pathFromRoot;let O=0;if("always"!==x)for(O=w.length-1;O>=1;){const z=w[O],re=w[O-1];if(z.routeConfig&&""===z.routeConfig.path)O--;else{if(re.component)break;O--}}return function da(S){return S.reduce((x,w)=>{var O;return{params:{...x.params,...w.params},data:{...x.data,...w.data},resolve:{...w.data,...x.resolve,...null===(O=w.routeConfig)||void 0===O?void 0:O.data,...w._resolvedData}}},{params:{},data:{},resolve:{}})}(w.slice(O))}class Qa{get title(){var x;return null===(x=this.data)||void 0===x?void 0:x[Cn]}constructor(x,w,O,z,re,le,lt,Ut,En,Hn,$n){this.url=x,this.params=w,this.queryParams=O,this.fragment=z,this.data=re,this.outlet=le,this.component=lt,this.routeConfig=Ut,this._urlSegment=En,this._lastPathIndex=Hn,this._resolve=$n}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=_r(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=_r(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(O=>O.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class lo extends Hi{constructor(x,w){super(w),this.url=x,ds(this,w)}toString(){return ha(this._root)}}function ds(S,x){x.value._routerState=S,x.children.forEach(w=>ds(S,w))}function ha(S){const x=S.children.length>0?` { ${S.children.map(ha).join(", ")} } `:"";return`${S.value}${x}`}function Ws(S){if(S.snapshot){const x=S.snapshot,w=S._futureSnapshot;S.snapshot=w,zn(x.queryParams,w.queryParams)||S.queryParams.next(w.queryParams),x.fragment!==w.fragment&&S.fragment.next(w.fragment),zn(x.params,w.params)||S.params.next(w.params),function bn(S,x){if(S.length!==x.length)return!1;for(let w=0;w<S.length;++w)if(!zn(S[w],x[w]))return!1;return!0}(x.url,w.url)||S.url.next(w.url),zn(x.data,w.data)||S.data.next(w.data)}else S.snapshot=S._futureSnapshot,S.data.next(S._futureSnapshot.data)}function os(S,x){const w=zn(S.params,x.params)&&function Ai(S,x){return mr(S,x)&&S.every((w,O)=>zn(w.parameters,x[O].parameters))}(S.url,x.url);return w&&!(!S.parent!=!x.parent)&&(!S.parent||os(S.parent,x.parent))}function Ho(S,x,w){if(w&&S.shouldReuseRoute(x.value,w.value.snapshot)){const O=w.value;O._futureSnapshot=x.value;const z=function co(S,x,w){return x.children.map(O=>{for(const z of w.children)if(S.shouldReuseRoute(O.value,z.value.snapshot))return Ho(S,O,z);return Ho(S,O)})}(S,x,w);return new Yi(O,z)}{if(S.shouldAttach(x.value)){const re=S.retrieve(x.value);if(null!==re){const le=re.route;return le.value._futureSnapshot=x.value,le.children=x.children.map(lt=>Ho(S,lt)),le}}const O=function ti(S){return new As(new ce.X(S.url),new ce.X(S.params),new ce.X(S.queryParams),new ce.X(S.fragment),new ce.X(S.data),S.outlet,S.component,S)}(x.value),z=x.children.map(re=>Ho(S,re));return new Yi(O,z)}}const ks="ngNavigationCancelingError";function uo(S,x){const{redirectTo:w,navigationBehaviorOptions:O}=pn(x)?{redirectTo:x,navigationBehaviorOptions:void 0}:x,z=ho(!1,0,x);return z.url=w,z.navigationBehaviorOptions=O,z}function ho(S,x,w){const O=new Error("NavigationCancelingError: "+(S||""));return O[ks]=!0,O.cancellationCode=x,w&&(O.url=w),O}function fa(S){return fo(S)&&pn(S.url)}function fo(S){return S&&S[ks]}class _s{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new na,this.attachRef=null}}let na=(()=>{class S{constructor(){this.contexts=new Map}onChildOutletCreated(w,O){const z=this.getOrCreateContext(w);z.outlet=O,this.contexts.set(w,z)}onChildOutletDestroyed(w){const O=this.getContext(w);O&&(O.outlet=null,O.attachRef=null)}onOutletDeactivated(){const w=this.contexts;return this.contexts=new Map,w}onOutletReAttached(w){this.contexts=w}getOrCreateContext(w){let O=this.getContext(w);return O||(O=new _s,this.contexts.set(w,O)),O}getContext(w){return this.contexts.get(w)||null}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();const No=!1;let ra=(()=>{class S{constructor(){this.activated=null,this._activatedRoute=null,this.name=cn,this.activateEvents=new _.vpe,this.deactivateEvents=new _.vpe,this.attachEvents=new _.vpe,this.detachEvents=new _.vpe,this.parentContexts=(0,_.f3M)(na),this.location=(0,_.f3M)(_.s_b),this.changeDetector=(0,_.f3M)(_.sBO),this.environmentInjector=(0,_.f3M)(_.lqb)}ngOnChanges(w){if(w.name){const{firstChange:O,previousValue:z}=w.name;if(O)return;this.isTrackedInParentContexts(z)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(z)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(w){var O;return(null===(O=this.parentContexts.getContext(w))||void 0===O?void 0:O.outlet)===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const w=this.parentContexts.getContext(this.name);null!=w&&w.route&&(w.attachRef?this.attach(w.attachRef,w.route):this.activateWith(w.route,w.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new _.vHH(4012,No);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new _.vHH(4012,No);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new _.vHH(4012,No);this.location.detach();const w=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(w.instance),w}attach(w,O){this.activated=w,this._activatedRoute=O,this.location.insert(w.hostView),this.attachEvents.emit(w.instance)}deactivate(){if(this.activated){const w=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(w)}}activateWith(w,O){if(this.isActivated)throw new _.vHH(4013,No);this._activatedRoute=w;const z=this.location,le=w.snapshot.component,lt=this.parentContexts.getOrCreateContext(this.name).children,Ut=new xs(w,lt,z.injector);if(O&&function zi(S){return!!S.resolveComponentFactory}(O)){const En=O.resolveComponentFactory(le);this.activated=z.createComponent(En,z.length,Ut)}else this.activated=z.createComponent(le,{index:z.length,injector:Ut,environmentInjector:null!=O?O:this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275dir=_.lG2({type:S,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[_.TTD]}),S})();class xs{constructor(x,w,O){this.route=x,this.childContexts=w,this.parent=O}get(x,w){return x===As?this.route:x===na?this.childContexts:this.parent.get(x,w)}}let Zi=(()=>{class S{}return S.\u0275fac=function(w){return new(w||S)},S.\u0275cmp=_.Xpm({type:S,selectors:[["ng-component"]],standalone:!0,features:[_.jDz],decls:1,vars:0,template:function(w,O){1&w&&_._UZ(0,"router-outlet")},dependencies:[ra],encapsulation:2}),S})();function bo(S,x){var w;return S.providers&&!S._injector&&(S._injector=(0,_.MMx)(S.providers,x,`Route: ${S.path}`)),null!==(w=S._injector)&&void 0!==w?w:x}function Do(S){const x=S.children&&S.children.map(Do),w=x?{...S,children:x}:{...S};return!w.component&&!w.loadComponent&&(x||w.loadChildren)&&w.outlet&&w.outlet!==cn&&(w.component=Zi),w}function Gi(S){return S.outlet||cn}function Va(S,x){const w=S.filter(O=>Gi(O)===x);return w.push(...S.filter(O=>Gi(O)!==x)),w}function Ns(S){var x;if(!S)return null;if(null!==(x=S.routeConfig)&&void 0!==x&&x._injector)return S.routeConfig._injector;for(let w=S.parent;w;w=w.parent){const O=w.routeConfig;if(null!=O&&O._loadedInjector)return O._loadedInjector;if(null!=O&&O._injector)return O._injector}return null}class sa{constructor(x,w,O,z){this.routeReuseStrategy=x,this.futureState=w,this.currState=O,this.forwardEvent=z}activate(x){const w=this.futureState._root,O=this.currState?this.currState._root:null;this.deactivateChildRoutes(w,O,x),Ws(this.futureState.root),this.activateChildRoutes(w,O,x)}deactivateChildRoutes(x,w,O){const z=oo(w);x.children.forEach(re=>{const le=re.value.outlet;this.deactivateRoutes(re,z[le],O),delete z[le]}),Gn(z,(re,le)=>{this.deactivateRouteAndItsChildren(re,O)})}deactivateRoutes(x,w,O){const z=x.value,re=w?w.value:null;if(z===re)if(z.component){const le=O.getContext(z.outlet);le&&this.deactivateChildRoutes(x,w,le.children)}else this.deactivateChildRoutes(x,w,O);else re&&this.deactivateRouteAndItsChildren(w,O)}deactivateRouteAndItsChildren(x,w){x.value.component&&this.routeReuseStrategy.shouldDetach(x.value.snapshot)?this.detachAndStoreRouteSubtree(x,w):this.deactivateRouteAndOutlet(x,w)}detachAndStoreRouteSubtree(x,w){const O=w.getContext(x.value.outlet),z=O&&x.value.component?O.children:w,re=oo(x);for(const le of Object.keys(re))this.deactivateRouteAndItsChildren(re[le],z);if(O&&O.outlet){const le=O.outlet.detach(),lt=O.children.onOutletDeactivated();this.routeReuseStrategy.store(x.value.snapshot,{componentRef:le,route:x,contexts:lt})}}deactivateRouteAndOutlet(x,w){const O=w.getContext(x.value.outlet),z=O&&x.value.component?O.children:w,re=oo(x);for(const le of Object.keys(re))this.deactivateRouteAndItsChildren(re[le],z);O&&(O.outlet&&(O.outlet.deactivate(),O.children.onOutletDeactivated()),O.attachRef=null,O.resolver=null,O.route=null)}activateChildRoutes(x,w,O){const z=oo(w);x.children.forEach(re=>{this.activateRoutes(re,z[re.value.outlet],O),this.forwardEvent(new Er(re.value.snapshot))}),x.children.length&&this.forwardEvent(new dn(x.value.snapshot))}activateRoutes(x,w,O){const z=x.value,re=w?w.value:null;if(Ws(z),z===re)if(z.component){const lt=O.getOrCreateContext(z.outlet);this.activateChildRoutes(x,w,lt.children)}else this.activateChildRoutes(x,w,O);else if(z.component){const lt=O.getOrCreateContext(z.outlet);if(this.routeReuseStrategy.shouldAttach(z.snapshot)){const Ut=this.routeReuseStrategy.retrieve(z.snapshot);this.routeReuseStrategy.store(z.snapshot,null),lt.children.onOutletReAttached(Ut.contexts),lt.attachRef=Ut.componentRef,lt.route=Ut.route.value,lt.outlet&&lt.outlet.attach(Ut.componentRef,Ut.route.value),Ws(Ut.route.value),this.activateChildRoutes(x,null,lt.children)}else{var le;const Ut=Ns(z.snapshot),En=null!==(le=null==Ut?void 0:Ut.get(_._Vd))&&void 0!==le?le:null;lt.attachRef=null,lt.route=z,lt.resolver=En,lt.injector=Ut,lt.outlet&&lt.outlet.activateWith(z,lt.injector),this.activateChildRoutes(x,null,lt.children)}}else this.activateChildRoutes(x,null,O)}}class Tr{constructor(x){this.path=x,this.route=this.path[this.path.length-1]}}class So{constructor(x,w){this.component=x,this.route=w}}function pa(S,x,w){const O=S._root;return q(O,x?x._root:null,w,[O.value])}function b(S,x){const w=Symbol(),O=x.get(S,w);return O===w?"function"!=typeof S||(0,_.Z0I)(S)?x.get(S):S:O}function q(S,x,w,O,z={canDeactivateChecks:[],canActivateChecks:[]}){const re=oo(x);return S.children.forEach(le=>{(function T(S,x,w,O,z={canDeactivateChecks:[],canActivateChecks:[]}){const re=S.value,le=x?x.value:null,lt=w?w.getContext(S.value.outlet):null;if(le&&re.routeConfig===le.routeConfig){const Ut=function W(S,x,w){if("function"==typeof w)return w(S,x);switch(w){case"pathParamsChange":return!mr(S.url,x.url);case"pathParamsOrQueryParamsChange":return!mr(S.url,x.url)||!zn(S.queryParams,x.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!os(S,x)||!zn(S.queryParams,x.queryParams);default:return!os(S,x)}}(le,re,re.routeConfig.runGuardsAndResolvers);Ut?z.canActivateChecks.push(new Tr(O)):(re.data=le.data,re._resolvedData=le._resolvedData),q(S,x,re.component?lt?lt.children:null:w,O,z),Ut&&lt&&lt.outlet&&lt.outlet.isActivated&&z.canDeactivateChecks.push(new So(lt.outlet.component,le))}else le&&ge(x,lt,z),z.canActivateChecks.push(new Tr(O)),q(S,null,re.component?lt?lt.children:null:w,O,z)})(le,re[le.value.outlet],w,O.concat([le.value]),z),delete re[le.value.outlet]}),Gn(re,(le,lt)=>ge(le,w.getContext(lt),z)),z}function ge(S,x,w){const O=oo(S),z=S.value;Gn(O,(re,le)=>{ge(re,z.component?x?x.children.getContext(le):null:x,w)}),w.canDeactivateChecks.push(new So(z.component&&x&&x.outlet&&x.outlet.isActivated?x.outlet.component:null,z))}function M(S){return"function"==typeof S}function hs(S){return S instanceof $e.K||"EmptyError"===(null==S?void 0:S.name)}const Ao=Symbol("INITIAL_VALUE");function xi(){return(0,Dt.w)(S=>We(S.map(x=>x.pipe((0,ht.q)(1),(0,Mt.O)(Ao)))).pipe((0,gt.U)(x=>{for(const w of x)if(!0!==w){if(w===Ao)return Ao;if(!1===w||w instanceof ur)return w}return!0}),(0,yt.h)(x=>x!==Ao),(0,ht.q)(1)))}function Ha(S){return(0,_t.z)((0,ft.b)(x=>{if(pn(x))throw uo(0,x)}),(0,gt.U)(x=>!0===x))}const Rs={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function tl(S,x,w,O,z){const re=Aa(S,x,w);return re.matched?function ns(S,x,w,O){const z=x.canMatch;if(!z||0===z.length)return(0,ee.of)(!0);const re=z.map(le=>{const lt=b(le,S);return qn(function $r(S){return S&&M(S.canMatch)}(lt)?lt.canMatch(x,w):S.runInContext(()=>lt(x,w)))});return(0,ee.of)(re).pipe(xi(),Ha())}(O=bo(x,O),x,w).pipe((0,gt.U)(le=>!0===le?re:{...Rs})):(0,ee.of)(re)}function Aa(S,x,w){var O;if(""===x.path)return"full"===x.pathMatch&&(S.hasChildren()||w.length>0)?{...Rs}:{matched:!0,consumedSegments:[],remainingSegments:w,parameters:{},positionalParamSegments:{}};const re=(x.matcher||tr)(w,S,x);if(!re)return{...Rs};const le={};Gn(re.posParams,(Ut,En)=>{le[En]=Ut.path});const lt=re.consumed.length>0?{...le,...re.consumed[re.consumed.length-1].parameters}:le;return{matched:!0,consumedSegments:re.consumed,remainingSegments:w.slice(re.consumed.length),parameters:lt,positionalParamSegments:null!==(O=re.posParams)&&void 0!==O?O:{}}}function zo(S,x,w,O){if(w.length>0&&function ga(S,x,w){return w.some(O=>xo(S,x,O)&&Gi(O)!==cn)}(S,w,O)){const re=new lr(x,function nl(S,x,w,O){const z={};z[cn]=O,O._sourceSegment=S,O._segmentIndexShift=x.length;for(const re of w)if(""===re.path&&Gi(re)!==cn){const le=new lr([],{});le._sourceSegment=S,le._segmentIndexShift=x.length,z[Gi(re)]=le}return z}(S,x,O,new lr(w,S.children)));return re._sourceSegment=S,re._segmentIndexShift=x.length,{segmentGroup:re,slicedSegments:[]}}if(0===w.length&&function ls(S,x,w){return w.some(O=>xo(S,x,O))}(S,w,O)){const re=new lr(S.segments,function Fo(S,x,w,O,z){const re={};for(const le of O)if(xo(S,w,le)&&!z[Gi(le)]){const lt=new lr([],{});lt._sourceSegment=S,lt._segmentIndexShift=x.length,re[Gi(le)]=lt}return{...z,...re}}(S,x,w,O,S.children));return re._sourceSegment=S,re._segmentIndexShift=x.length,{segmentGroup:re,slicedSegments:w}}const z=new lr(S.segments,S.children);return z._sourceSegment=S,z._segmentIndexShift=x.length,{segmentGroup:z,slicedSegments:w}}function xo(S,x,w){return(!(S.hasChildren()||x.length>0)||"full"!==w.pathMatch)&&""===w.path}function Go(S,x,w,O){return!!(Gi(S)===O||O!==cn&&xo(x,w,S))&&("**"===S.path||Aa(x,S,w).matched)}function Zs(S,x,w){return 0===x.length&&!S.children[w]}const fs=!1;class xa{constructor(x){this.segmentGroup=x||null}}class cs{constructor(x){this.urlTree=x}}function Fs(S){return it(new xa(S))}function Vr(S){return it(new cs(S))}class vl{constructor(x,w,O,z,re){this.injector=x,this.configLoader=w,this.urlSerializer=O,this.urlTree=z,this.config=re,this.allowRedirects=!0}apply(){const x=zo(this.urlTree.root,[],[],this.config).segmentGroup,w=new lr(x.segments,x.children);return this.expandSegmentGroup(this.injector,this.config,w,cn).pipe((0,gt.U)(re=>this.createUrlTree(Ct(re),this.urlTree.queryParams,this.urlTree.fragment))).pipe(wt(re=>{if(re instanceof cs)return this.allowRedirects=!1,this.match(re.urlTree);throw re instanceof xa?this.noMatchError(re):re}))}match(x){return this.expandSegmentGroup(this.injector,this.config,x.root,cn).pipe((0,gt.U)(z=>this.createUrlTree(Ct(z),x.queryParams,x.fragment))).pipe(wt(z=>{throw z instanceof xa?this.noMatchError(z):z}))}noMatchError(x){return new _.vHH(4002,fs)}createUrlTree(x,w,O){const z=He(x);return new ur(z,w,O)}expandSegmentGroup(x,w,O,z){return 0===O.segments.length&&O.hasChildren()?this.expandChildren(x,w,O).pipe((0,gt.U)(re=>new lr([],re))):this.expandSegment(x,O,w,O.segments,z,!0)}expandChildren(x,w,O){const z=[];for(const re of Object.keys(O.children))"primary"===re?z.unshift(re):z.push(re);return(0,m.D)(z).pipe((0,Be.b)(re=>{const le=O.children[re],lt=Va(w,re);return this.expandSegmentGroup(x,lt,le,re).pipe((0,gt.U)(Ut=>({segment:Ut,outlet:re})))}),(0,nn.R)((re,le)=>(re[le.outlet]=le.segment,re),{}),Ae())}expandSegment(x,w,O,z,re,le){return(0,m.D)(O).pipe((0,Be.b)(lt=>this.expandSegmentAgainstRoute(x,w,O,lt,z,re,le).pipe(wt(En=>{if(En instanceof xa)return(0,ee.of)(null);throw En}))),(0,Ve.P)(lt=>!!lt),wt((lt,Ut)=>{if(hs(lt))return Zs(w,z,re)?(0,ee.of)(new lr([],{})):Fs(w);throw lt}))}expandSegmentAgainstRoute(x,w,O,z,re,le,lt){return Go(z,w,re,le)?void 0===z.redirectTo?this.matchSegmentAgainstRoute(x,w,z,re,le):lt&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(x,w,O,z,re,le):Fs(w):Fs(w)}expandSegmentAgainstRouteUsingRedirect(x,w,O,z,re,le){return"**"===z.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(x,O,z,le):this.expandRegularSegmentAgainstRouteUsingRedirect(x,w,O,z,re,le)}expandWildCardWithParamsAgainstRouteUsingRedirect(x,w,O,z){const re=this.applyRedirectCommands([],O.redirectTo,{});return O.redirectTo.startsWith("/")?Vr(re):this.lineralizeSegments(O,re).pipe((0,Fe.z)(le=>{const lt=new lr(le,{});return this.expandSegment(x,lt,w,le,z,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(x,w,O,z,re,le){const{matched:lt,consumedSegments:Ut,remainingSegments:En,positionalParamSegments:Hn}=Aa(w,z,re);if(!lt)return Fs(w);const $n=this.applyRedirectCommands(Ut,z.redirectTo,Hn);return z.redirectTo.startsWith("/")?Vr($n):this.lineralizeSegments(z,$n).pipe((0,Fe.z)(Ii=>this.expandSegment(x,w,O,Ii.concat(En),le,!1)))}matchSegmentAgainstRoute(x,w,O,z,re){return"**"===O.path?(x=bo(O,x),O.loadChildren?(O._loadedRoutes?(0,ee.of)({routes:O._loadedRoutes,injector:O._loadedInjector}):this.configLoader.loadChildren(x,O)).pipe((0,gt.U)(lt=>(O._loadedRoutes=lt.routes,O._loadedInjector=lt.injector,new lr(z,{})))):(0,ee.of)(new lr(z,{}))):tl(w,O,z,x).pipe((0,Dt.w)(({matched:le,consumedSegments:lt,remainingSegments:Ut})=>{var En;return le?(x=null!==(En=O._injector)&&void 0!==En?En:x,this.getChildConfig(x,O,z).pipe((0,Fe.z)($n=>{var Ii;const rs=null!==(Ii=$n.injector)&&void 0!==Ii?Ii:x,$s=$n.routes,{segmentGroup:ya,slicedSegments:Mo}=zo(w,lt,Ut,$s),Is=new lr(ya.segments,ya.children);if(0===Mo.length&&Is.hasChildren())return this.expandChildren(rs,$s,Is).pipe((0,gt.U)(eu=>new lr(lt,eu)));if(0===$s.length&&0===Mo.length)return(0,ee.of)(new lr(lt,{}));const Or=Gi(O)===re;return this.expandSegment(rs,Is,$s,Mo,Or?cn:re,!0).pipe((0,gt.U)(_o=>new lr(lt.concat(_o.segments),_o.children)))}))):Fs(w)}))}getChildConfig(x,w,O){return w.children?(0,ee.of)({routes:w.children,injector:x}):w.loadChildren?void 0!==w._loadedRoutes?(0,ee.of)({routes:w._loadedRoutes,injector:w._loadedInjector}):function Sa(S,x,w,O){const z=x.canLoad;if(void 0===z||0===z.length)return(0,ee.of)(!0);const re=z.map(le=>{const lt=b(le,S);return qn(function L(S){return S&&M(S.canLoad)}(lt)?lt.canLoad(x,w):S.runInContext(()=>lt(x,w)))});return(0,ee.of)(re).pipe(xi(),Ha())}(x,w,O).pipe((0,Fe.z)(z=>z?this.configLoader.loadChildren(x,w).pipe((0,ft.b)(re=>{w._loadedRoutes=re.routes,w._loadedInjector=re.injector})):function Ra(S){return it(ho(fs,3))}())):(0,ee.of)({routes:[],injector:x})}lineralizeSegments(x,w){let O=[],z=w.root;for(;;){if(O=O.concat(z.segments),0===z.numberOfChildren)return(0,ee.of)(O);if(z.numberOfChildren>1||!z.children[cn])return x.redirectTo,it(new _.vHH(4e3,fs));z=z.children[cn]}}applyRedirectCommands(x,w,O){return this.applyRedirectCreateUrlTree(w,this.urlSerializer.parse(w),x,O)}applyRedirectCreateUrlTree(x,w,O,z){const re=this.createSegmentGroup(x,w.root,O,z);return new ur(re,this.createQueryParams(w.queryParams,this.urlTree.queryParams),w.fragment)}createQueryParams(x,w){const O={};return Gn(x,(z,re)=>{if("string"==typeof z&&z.startsWith(":")){const lt=z.substring(1);O[re]=w[lt]}else O[re]=z}),O}createSegmentGroup(x,w,O,z){const re=this.createSegments(x,w.segments,O,z);let le={};return Gn(w.children,(lt,Ut)=>{le[Ut]=this.createSegmentGroup(x,lt,O,z)}),new lr(re,le)}createSegments(x,w,O,z){return w.map(re=>re.path.startsWith(":")?this.findPosParam(x,re,z):this.findOrReturn(re,O))}findPosParam(x,w,O){const z=O[w.path.substring(1)];if(!z)throw new _.vHH(4001,fs);return z}findOrReturn(x,w){let O=0;for(const z of w){if(z.path===x.path)return w.splice(O),z;O++}return x}}class Sr{}class ${constructor(x,w,O,z,re,le,lt){this.injector=x,this.rootComponentType=w,this.config=O,this.urlTree=z,this.url=re,this.paramsInheritanceStrategy=le,this.urlSerializer=lt}recognize(){const x=zo(this.urlTree.root,[],[],this.config.filter(w=>void 0===w.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,x,cn).pipe((0,gt.U)(w=>{if(null===w)return null;const O=new Qa([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},cn,this.rootComponentType,null,this.urlTree.root,-1,{}),z=new Yi(O,w),re=new lo(this.url,z);return this.inheritParamsAndData(re._root),re}))}inheritParamsAndData(x){const w=x.value,O=ao(w,this.paramsInheritanceStrategy);w.params=Object.freeze(O.params),w.data=Object.freeze(O.data),x.children.forEach(z=>this.inheritParamsAndData(z))}processSegmentGroup(x,w,O,z){return 0===O.segments.length&&O.hasChildren()?this.processChildren(x,w,O):this.processSegment(x,w,O,O.segments,z)}processChildren(x,w,O){return(0,m.D)(Object.keys(O.children)).pipe((0,Be.b)(z=>{const re=O.children[z],le=Va(w,z);return this.processSegmentGroup(x,le,re,z)}),(0,nn.R)((z,re)=>z&&re?(z.push(...re),z):null),function St(S,x=!1){return(0,Ue.e)((w,O)=>{let z=0;w.subscribe((0,Ee.x)(O,re=>{const le=S(re,z++);(le||x)&&O.next(re),!le&&O.complete()}))})}(z=>null!==z),(0,kt.d)(null),Ae(),(0,gt.U)(z=>{if(null===z)return null;const re=Le(z);return function Q(S){S.sort((x,w)=>x.value.outlet===cn?-1:w.value.outlet===cn?1:x.value.outlet.localeCompare(w.value.outlet))}(re),re}))}processSegment(x,w,O,z,re){return(0,m.D)(w).pipe((0,Be.b)(le=>{var lt;return this.processSegmentAgainstRoute(null!==(lt=le._injector)&&void 0!==lt?lt:x,le,O,z,re)}),(0,Ve.P)(le=>!!le),wt(le=>{if(hs(le))return Zs(O,z,re)?(0,ee.of)([]):(0,ee.of)(null);throw le}))}processSegmentAgainstRoute(x,w,O,z,re){if(w.redirectTo||!Go(w,O,z,re))return(0,ee.of)(null);let le;if("**"===w.path){var lt,Ut;const En=z.length>0?di(z).parameters:{},Hn=Vn(O)+z.length,$n=new Qa(z,En,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Kr(w),Gi(w),null!==(lt=null!==(Ut=w.component)&&void 0!==Ut?Ut:w._loadedComponent)&&void 0!==lt?lt:null,w,Jt(O),Hn,Br(w));le=(0,ee.of)({snapshot:$n,consumedSegments:[],remainingSegments:[]})}else le=tl(O,w,z,x).pipe((0,gt.U)(({matched:En,consumedSegments:Hn,remainingSegments:$n,parameters:Ii})=>{var rs,$s;if(!En)return null;const ya=Vn(O)+Hn.length;return{snapshot:new Qa(Hn,Ii,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Kr(w),Gi(w),null!==(rs=null!==($s=w.component)&&void 0!==$s?$s:w._loadedComponent)&&void 0!==rs?rs:null,w,Jt(O),ya,Br(w)),consumedSegments:Hn,remainingSegments:$n}}));return le.pipe((0,Dt.w)(En=>{var Hn,$n;if(null===En)return(0,ee.of)(null);const{snapshot:Ii,consumedSegments:rs,remainingSegments:$s}=En;x=null!==(Hn=w._injector)&&void 0!==Hn?Hn:x;const ya=null!==($n=w._loadedInjector)&&void 0!==$n?$n:x,Mo=function H(S){return S.children?S.children:S.loadChildren?S._loadedRoutes:[]}(w),{segmentGroup:Is,slicedSegments:Or}=zo(O,rs,$s,Mo.filter(_o=>void 0===_o.redirectTo));if(0===Or.length&&Is.hasChildren())return this.processChildren(ya,Mo,Is).pipe((0,gt.U)(_o=>null===_o?null:[new Yi(Ii,_o)]));if(0===Mo.length&&0===Or.length)return(0,ee.of)([new Yi(Ii,[])]);const fc=Gi(w)===re;return this.processSegment(ya,Mo,Is,Or,fc?cn:re).pipe((0,gt.U)(_o=>null===_o?null:[new Yi(Ii,_o)]))}))}}function ie(S){const x=S.value.routeConfig;return x&&""===x.path&&void 0===x.redirectTo}function Le(S){const x=[],w=new Set;for(const O of S){if(!ie(O)){x.push(O);continue}const z=x.find(re=>O.value.routeConfig===re.value.routeConfig);void 0!==z?(z.children.push(...O.children),w.add(z)):x.push(O)}for(const O of w){const z=Le(O.children);x.push(new Yi(O.value,z))}return x.filter(O=>!w.has(O))}function Jt(S){let x=S;for(;x._sourceSegment;)x=x._sourceSegment;return x}function Vn(S){var x;let w=S,O=null!==(x=w._segmentIndexShift)&&void 0!==x?x:0;for(;w._sourceSegment;){var z;w=w._sourceSegment,O+=null!==(z=w._segmentIndexShift)&&void 0!==z?z:0}return O-1}function Kr(S){return S.data||{}}function Br(S){return S.resolve||{}}function Ko(S){return"string"==typeof S.title||null===S.title}function Es(S){return(0,Dt.w)(x=>{const w=S(x);return w?(0,m.D)(w).pipe((0,gt.U)(()=>x)):(0,ee.of)(x)})}const Ls=new _.OlP("ROUTES");let Qs=(()=>{class S{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,_.f3M)(_.Sil)}loadComponent(w){if(this.componentLoaders.get(w))return this.componentLoaders.get(w);if(w._loadedComponent)return(0,ee.of)(w._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(w);const O=qn(w.loadComponent()).pipe((0,gt.U)(El),(0,ft.b)(re=>{this.onLoadEndListener&&this.onLoadEndListener(w),w._loadedComponent=re}),On(()=>{this.componentLoaders.delete(w)})),z=new Ne(O,()=>new De.x).pipe(ke());return this.componentLoaders.set(w,z),z}loadChildren(w,O){if(this.childrenLoaders.get(O))return this.childrenLoaders.get(O);if(O._loadedRoutes)return(0,ee.of)({routes:O._loadedRoutes,injector:O._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(O);const re=this.loadModuleFactoryOrRoutes(O.loadChildren).pipe((0,gt.U)(lt=>{this.onLoadEndListener&&this.onLoadEndListener(O);let Ut,En,Hn=!1;Array.isArray(lt)?En=lt:(Ut=lt.create(w).injector,En=Cr(Ut.get(Ls,[],_.XFs.Self|_.XFs.Optional)));return{routes:En.map(Do),injector:Ut}}),On(()=>{this.childrenLoaders.delete(O)})),le=new Ne(re,()=>new De.x).pipe(ke());return this.childrenLoaders.set(O,le),le}loadModuleFactoryOrRoutes(w){return qn(w()).pipe((0,gt.U)(El),(0,Fe.z)(O=>O instanceof _.YKP||Array.isArray(O)?(0,ee.of)(O):(0,m.D)(this.compiler.compileModuleAsync(O))))}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function El(S){return function rl(S){return S&&"object"==typeof S&&"default"in S}(S)?S.default:S}let qo=(()=>{class S{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new De.x,this.configLoader=(0,_.f3M)(Qs),this.environmentInjector=(0,_.f3M)(_.lqb),this.urlSerializer=(0,_.f3M)(Ze),this.rootContexts=(0,_.f3M)(na),this.navigationId=0,this.afterPreactivation=()=>(0,ee.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=z=>this.events.next(new xt(z)),this.configLoader.onLoadStartListener=z=>this.events.next(new at(z))}complete(){var w;null===(w=this.transitions)||void 0===w||w.complete()}handleNavigationRequest(w){var O;const z=++this.navigationId;null===(O=this.transitions)||void 0===O||O.next({...this.transitions.value,...w,id:z})}setupNavigations(w){return this.transitions=new ce.X({id:0,targetPageId:0,currentUrlTree:w.currentUrlTree,currentRawUrl:w.currentUrlTree,extractedUrl:w.urlHandlingStrategy.extract(w.currentUrlTree),urlAfterRedirects:w.urlHandlingStrategy.extract(w.currentUrlTree),rawUrl:w.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Qe,restoredState:null,currentSnapshot:w.routerState.snapshot,targetSnapshot:null,currentRouterState:w.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,yt.h)(O=>0!==O.id),(0,gt.U)(O=>({...O,extractedUrl:w.urlHandlingStrategy.extract(O.rawUrl)})),(0,Dt.w)(O=>{let z=!1,re=!1;return(0,ee.of)(O).pipe((0,ft.b)(le=>{this.currentNavigation={id:le.id,initialUrl:le.rawUrl,extractedUrl:le.extractedUrl,trigger:le.source,extras:le.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Dt.w)(le=>{var lt;const Ut=w.browserUrlTree.toString(),En=!w.navigated||le.extractedUrl.toString()!==Ut||Ut!==w.currentUrlTree.toString(),Hn=null!==(lt=le.extras.onSameUrlNavigation)&&void 0!==lt?lt:w.onSameUrlNavigation;if(!En&&"reload"!==Hn){const $n="";return this.events.next(new vn(le.id,w.serializeUrl(O.rawUrl),$n,0)),w.rawUrlTree=le.rawUrl,le.resolve(null),et.E}if(w.urlHandlingStrategy.shouldProcessUrl(le.rawUrl))return qc(le.source)&&(w.browserUrlTree=le.extractedUrl),(0,ee.of)(le).pipe((0,Dt.w)($n=>{var Ii,rs;const $s=null===(Ii=this.transitions)||void 0===Ii?void 0:Ii.getValue();return this.events.next(new Lt($n.id,this.urlSerializer.serialize($n.extractedUrl),$n.source,$n.restoredState)),$s!==(null===(rs=this.transitions)||void 0===rs?void 0:rs.getValue())?et.E:Promise.resolve($n)}),function mo(S,x,w,O){return(0,Dt.w)(z=>function Lo(S,x,w,O,z){return new vl(S,x,w,O,z).apply()}(S,x,w,z.extractedUrl,O).pipe((0,gt.U)(re=>({...z,urlAfterRedirects:re}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,w.config),(0,ft.b)($n=>{this.currentNavigation={...this.currentNavigation,finalUrl:$n.urlAfterRedirects},O.urlAfterRedirects=$n.urlAfterRedirects}),function wr(S,x,w,O,z){return(0,Fe.z)(re=>function _l(S,x,w,O,z,re,le="emptyOnly"){return new $(S,x,w,O,z,le,re).recognize().pipe((0,Dt.w)(lt=>null===lt?function Hl(S){return new Se.y(x=>x.error(S))}(new Sr):(0,ee.of)(lt)))}(S,x,w,re.urlAfterRedirects,O.serialize(re.urlAfterRedirects),O,z).pipe((0,gt.U)(le=>({...re,targetSnapshot:le}))))}(this.environmentInjector,this.rootComponentType,w.config,this.urlSerializer,w.paramsInheritanceStrategy),(0,ft.b)($n=>{if(O.targetSnapshot=$n.targetSnapshot,"eager"===w.urlUpdateStrategy){if(!$n.extras.skipLocationChange){const rs=w.urlHandlingStrategy.merge($n.urlAfterRedirects,$n.rawUrl);w.setBrowserUrl(rs,$n)}w.browserUrlTree=$n.urlAfterRedirects}const Ii=new er($n.id,this.urlSerializer.serialize($n.extractedUrl),this.urlSerializer.serialize($n.urlAfterRedirects),$n.targetSnapshot);this.events.next(Ii)}));if(En&&w.urlHandlingStrategy.shouldProcessUrl(w.rawUrlTree)){const{id:$n,extractedUrl:Ii,source:rs,restoredState:$s,extras:ya}=le,Mo=new Lt($n,this.urlSerializer.serialize(Ii),rs,$s);this.events.next(Mo);const Is=Ta(Ii,this.rootComponentType).snapshot;return O={...le,targetSnapshot:Is,urlAfterRedirects:Ii,extras:{...ya,skipLocationChange:!1,replaceUrl:!1}},(0,ee.of)(O)}{const $n="";return this.events.next(new vn(le.id,w.serializeUrl(O.extractedUrl),$n,1)),w.rawUrlTree=le.rawUrl,le.resolve(null),et.E}}),(0,ft.b)(le=>{const lt=new vr(le.id,this.urlSerializer.serialize(le.extractedUrl),this.urlSerializer.serialize(le.urlAfterRedirects),le.targetSnapshot);this.events.next(lt)}),(0,gt.U)(le=>O={...le,guards:pa(le.targetSnapshot,le.currentSnapshot,this.rootContexts)}),function ja(S,x){return(0,Fe.z)(w=>{const{targetSnapshot:O,currentSnapshot:z,guards:{canActivateChecks:re,canDeactivateChecks:le}}=w;return 0===le.length&&0===re.length?(0,ee.of)({...w,guardsResult:!0}):function ts(S,x,w,O){return(0,m.D)(S).pipe((0,Fe.z)(z=>function el(S,x,w,O,z){const re=x&&x.routeConfig?x.routeConfig.canDeactivate:null;if(!re||0===re.length)return(0,ee.of)(!0);const le=re.map(lt=>{var Ut;const En=null!==(Ut=Ns(x))&&void 0!==Ut?Ut:z,Hn=b(lt,En);return qn(function Tn(S){return S&&M(S.canDeactivate)}(Hn)?Hn.canDeactivate(S,x,w,O):En.runInContext(()=>Hn(S,x,w,O))).pipe((0,Ve.P)())});return(0,ee.of)(le).pipe(xi())}(z.component,z.route,w,x,O)),(0,Ve.P)(z=>!0!==z,!0))}(le,O,z,S).pipe((0,Fe.z)(lt=>lt&&function F(S){return"boolean"==typeof S}(lt)?function Ks(S,x,w,O){return(0,m.D)(x).pipe((0,Be.b)(z=>(0,xe.z)(function aa(S,x){return null!==S&&x&&x(new tn(S)),(0,ee.of)(!0)}(z.route.parent,O),function qs(S,x){return null!==S&&x&&x(new fr(S)),(0,ee.of)(!0)}(z.route,O),function yl(S,x,w){const O=x[x.length-1],re=x.slice(0,x.length-1).reverse().map(le=>function oa(S){const x=S.routeConfig?S.routeConfig.canActivateChild:null;return x&&0!==x.length?{node:S,guards:x}:null}(le)).filter(le=>null!==le).map(le=>de(()=>{const lt=le.guards.map(Ut=>{var En;const Hn=null!==(En=Ns(le.node))&&void 0!==En?En:w,$n=b(Ut,Hn);return qn(function vt(S){return S&&M(S.canActivateChild)}($n)?$n.canActivateChild(O,S):Hn.runInContext(()=>$n(O,S))).pipe((0,Ve.P)())});return(0,ee.of)(lt).pipe(xi())}));return(0,ee.of)(re).pipe(xi())}(S,z.path,w),function Ys(S,x,w){const O=x.routeConfig?x.routeConfig.canActivate:null;if(!O||0===O.length)return(0,ee.of)(!0);const z=O.map(re=>de(()=>{var le;const lt=null!==(le=Ns(x))&&void 0!==le?le:w,Ut=b(re,lt);return qn(function ne(S){return S&&M(S.canActivate)}(Ut)?Ut.canActivate(x,S):lt.runInContext(()=>Ut(x,S))).pipe((0,Ve.P)())}));return(0,ee.of)(z).pipe(xi())}(S,z.route,w))),(0,Ve.P)(z=>!0!==z,!0))}(O,re,S,x):(0,ee.of)(lt)),(0,gt.U)(lt=>({...w,guardsResult:lt})))})}(this.environmentInjector,le=>this.events.next(le)),(0,ft.b)(le=>{if(O.guardsResult=le.guardsResult,pn(le.guardsResult))throw uo(0,le.guardsResult);const lt=new Wr(le.id,this.urlSerializer.serialize(le.extractedUrl),this.urlSerializer.serialize(le.urlAfterRedirects),le.targetSnapshot,!!le.guardsResult);this.events.next(lt)}),(0,yt.h)(le=>!!le.guardsResult||(w.restoreHistory(le),this.cancelNavigationTransition(le,"",3),!1)),Es(le=>{if(le.guards.canActivateChecks.length)return(0,ee.of)(le).pipe((0,ft.b)(lt=>{const Ut=new $i(lt.id,this.urlSerializer.serialize(lt.extractedUrl),this.urlSerializer.serialize(lt.urlAfterRedirects),lt.targetSnapshot);this.events.next(Ut)}),(0,Dt.w)(lt=>{let Ut=!1;return(0,ee.of)(lt).pipe(function Ri(S,x){return(0,Fe.z)(w=>{const{targetSnapshot:O,guards:{canActivateChecks:z}}=w;if(!z.length)return(0,ee.of)(w);let re=0;return(0,m.D)(z).pipe((0,Be.b)(le=>function bi(S,x,w,O){const z=S.routeConfig,re=S._resolve;return void 0!==(null==z?void 0:z.title)&&!Ko(z)&&(re[Cn]=z.title),function Bi(S,x,w,O){const z=function Wo(S){return[...Object.keys(S),...Object.getOwnPropertySymbols(S)]}(S);if(0===z.length)return(0,ee.of)({});const re={};return(0,m.D)(z).pipe((0,Fe.z)(le=>function yo(S,x,w,O){var z;const re=null!==(z=Ns(x))&&void 0!==z?z:O,le=b(S,re);return qn(le.resolve?le.resolve(x,w):re.runInContext(()=>le(x,w)))}(S[le],x,w,O).pipe((0,Ve.P)(),(0,ft.b)(lt=>{re[le]=lt}))),zt(1),function gn(S){return(0,gt.U)(()=>S)}(re),wt(le=>hs(le)?et.E:it(le)))}(re,S,x,O).pipe((0,gt.U)(le=>(S._resolvedData=le,S.data=ao(S,w).resolve,z&&Ko(z)&&(S.data[Cn]=z.title),null)))}(le.route,O,S,x)),(0,ft.b)(()=>re++),zt(1),(0,Fe.z)(le=>re===z.length?(0,ee.of)(w):et.E))})}(w.paramsInheritanceStrategy,this.environmentInjector),(0,ft.b)({next:()=>Ut=!0,complete:()=>{Ut||(w.restoreHistory(lt),this.cancelNavigationTransition(lt,"",2))}}))}),(0,ft.b)(lt=>{const Ut=new mt(lt.id,this.urlSerializer.serialize(lt.extractedUrl),this.urlSerializer.serialize(lt.urlAfterRedirects),lt.targetSnapshot);this.events.next(Ut)}))}),Es(le=>{const lt=Ut=>{var En;const Hn=[];null!==(En=Ut.routeConfig)&&void 0!==En&&En.loadComponent&&!Ut.routeConfig._loadedComponent&&Hn.push(this.configLoader.loadComponent(Ut.routeConfig).pipe((0,ft.b)($n=>{Ut.component=$n}),(0,gt.U)(()=>{})));for(const $n of Ut.children)Hn.push(...lt($n));return Hn};return We(lt(le.targetSnapshot.root)).pipe((0,kt.d)(),(0,ht.q)(1))}),Es(()=>this.afterPreactivation()),(0,gt.U)(le=>{const lt=function Ua(S,x,w){const O=Ho(S,x._root,w?w._root:void 0);return new Os(O,x)}(w.routeReuseStrategy,le.targetSnapshot,le.currentRouterState);return O={...le,targetRouterState:lt}}),(0,ft.b)(le=>{w.currentUrlTree=le.urlAfterRedirects,w.rawUrlTree=w.urlHandlingStrategy.merge(le.urlAfterRedirects,le.rawUrl),w.routerState=le.targetRouterState,"deferred"===w.urlUpdateStrategy&&(le.extras.skipLocationChange||w.setBrowserUrl(w.rawUrlTree,le),w.browserUrlTree=le.urlAfterRedirects)}),((S,x,w)=>(0,gt.U)(O=>(new sa(x,O.targetRouterState,O.currentRouterState,w).activate(S),O)))(this.rootContexts,w.routeReuseStrategy,le=>this.events.next(le)),(0,ht.q)(1),(0,ft.b)({next:le=>{var lt;z=!0,this.lastSuccessfulNavigation=this.currentNavigation,w.navigated=!0,this.events.next(new Xt(le.id,this.urlSerializer.serialize(le.extractedUrl),this.urlSerializer.serialize(w.currentUrlTree))),null===(lt=w.titleStrategy)||void 0===lt||lt.updateTitle(le.targetRouterState.snapshot),le.resolve(!0)},complete:()=>{z=!0}}),On(()=>{var le;z||re||this.cancelNavigationTransition(O,"",1),(null===(le=this.currentNavigation)||void 0===le?void 0:le.id)===O.id&&(this.currentNavigation=null)}),wt(le=>{if(re=!0,fo(le)){fa(le)||(w.navigated=!0,w.restoreHistory(O,!0));const Ut=new an(O.id,this.urlSerializer.serialize(O.extractedUrl),le.message,le.cancellationCode);if(this.events.next(Ut),fa(le)){const En=w.urlHandlingStrategy.merge(le.url,w.rawUrlTree),Hn={skipLocationChange:O.extras.skipLocationChange,replaceUrl:"eager"===w.urlUpdateStrategy||qc(O.source)};w.scheduleNavigation(En,Qe,null,Hn,{resolve:O.resolve,reject:O.reject,promise:O.promise})}else O.resolve(!1)}else{var lt;w.restoreHistory(O,!0);const Ut=new rr(O.id,this.urlSerializer.serialize(O.extractedUrl),le,null!==(lt=O.targetSnapshot)&&void 0!==lt?lt:void 0);this.events.next(Ut);try{O.resolve(w.errorHandler(le))}catch(En){O.reject(En)}}return et.E}))}))}cancelNavigationTransition(w,O,z){const re=new an(w.id,this.urlSerializer.serialize(w.extractedUrl),O,z);this.events.next(re),w.resolve(!1)}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function qc(S){return S!==Qe}let Wi=(()=>{class S{buildTitle(w){let O,z=w.root;for(;void 0!==z;){var re;O=null!==(re=this.getResolvedTitleForRoute(z))&&void 0!==re?re:O,z=z.children.find(le=>le.outlet===cn)}return O}getResolvedTitleForRoute(w){return w.data[Cn]}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=_.Yz7({token:S,factory:function(){return(0,_.f3M)(vo)},providedIn:"root"}),S})(),vo=(()=>{class S extends Wi{constructor(w){super(),this.title=w}updateTitle(w){const O=this.buildTitle(w);void 0!==O&&this.title.setTitle(O)}}return S.\u0275fac=function(w){return new(w||S)(_.LFG(xn.Dx))},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})(),Js=(()=>{class S{}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=_.Yz7({token:S,factory:function(){return(0,_.f3M)(lc)},providedIn:"root"}),S})();class ac{shouldDetach(x){return!1}store(x,w){}shouldAttach(x){return!1}retrieve(x){return null}shouldReuseRoute(x,w){return x.routeConfig===w.routeConfig}}let lc=(()=>{class S extends ac{}return S.\u0275fac=function(){let x;return function(O){return(x||(x=_.n5z(S)))(O||S)}}(),S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();const Ji=new _.OlP("",{providedIn:"root",factory:()=>({})});let mi=(()=>{class S{}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=_.Yz7({token:S,factory:function(){return(0,_.f3M)(Yc)},providedIn:"root"}),S})(),Yc=(()=>{class S{shouldProcessUrl(w){return!0}extract(w){return w}merge(w,O){return w}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function dr(S){throw S}function cc(S,x,w){return x.parse("/")}const jn={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ht={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let hn=(()=>{class S{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){var w;if("computed"===this.canceledNavigationResolution)return null===(w=this.location.getState())||void 0===w?void 0:w.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){var w;this.disposed=!1,this.currentPageId=0,this.console=(0,_.f3M)(_.c2e),this.isNgZoneEnabled=!1,this.options=(0,_.f3M)(Ji,{optional:!0})||{},this.errorHandler=this.options.errorHandler||dr,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||cc,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,_.f3M)(mi),this.routeReuseStrategy=(0,_.f3M)(Js),this.urlCreationStrategy=(0,_.f3M)(Ss),this.titleStrategy=(0,_.f3M)(Wi),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Cr(null!==(w=(0,_.f3M)(Ls,{optional:!0}))&&void 0!==w?w:[]),this.navigationTransitions=(0,_.f3M)(qo),this.urlSerializer=(0,_.f3M)(Ze),this.location=(0,_.f3M)(je.Ye),this.isNgZoneEnabled=(0,_.f3M)(_.R0b)instanceof _.R0b&&_.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new ur,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ta(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(O=>{var z;this.lastSuccessfulId=O.id,this.currentPageId=null!==(z=this.browserPageId)&&void 0!==z?z:0},O=>{this.console.warn(`Unhandled Navigation Error: ${O}`)})}resetRootComponentType(w){this.routerState.root.component=w,this.navigationTransitions.rootComponentType=w}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const w=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Qe,w)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(w=>{const O="popstate"===w.type?"popstate":"hashchange";"popstate"===O&&setTimeout(()=>{this.navigateToSyncWithBrowser(w.url,O,w.state)},0)}))}navigateToSyncWithBrowser(w,O,z){const re={replaceUrl:!0},le=null!=z&&z.navigationId?z:null;if(z){const Ut={...z};delete Ut.navigationId,delete Ut.\u0275routerPageId,0!==Object.keys(Ut).length&&(re.state=Ut)}const lt=this.parseUrl(w);this.scheduleNavigation(lt,O,le,re)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(w){this.config=w.map(Do),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(w,O={}){const{relativeTo:z,queryParams:re,fragment:le,queryParamsHandling:lt,preserveFragment:Ut}=O,En=Ut?this.currentUrlTree.fragment:le;let Hn=null;switch(lt){case"merge":Hn={...this.currentUrlTree.queryParams,...re};break;case"preserve":Hn=this.currentUrlTree.queryParams;break;default:Hn=re||null}return null!==Hn&&(Hn=this.removeEmptyProps(Hn)),this.urlCreationStrategy.createUrlTree(z,this.routerState,this.currentUrlTree,w,Hn,null!=En?En:null)}navigateByUrl(w,O={skipLocationChange:!1}){const z=pn(w)?w:this.parseUrl(w),re=this.urlHandlingStrategy.merge(z,this.rawUrlTree);return this.scheduleNavigation(re,Qe,null,O)}navigate(w,O={skipLocationChange:!1}){return function si(S){for(let x=0;x<S.length;x++){const w=S[x];if(null==w)throw new _.vHH(4008,false)}}(w),this.navigateByUrl(this.createUrlTree(w,O),O)}serializeUrl(w){return this.urlSerializer.serialize(w)}parseUrl(w){let O;try{O=this.urlSerializer.parse(w)}catch(z){O=this.malformedUriErrorHandler(z,this.urlSerializer,w)}return O}isActive(w,O){let z;if(z=!0===O?{...jn}:!1===O?{...Ht}:O,pn(w))return Jr(this.currentUrlTree,w,z);const re=this.parseUrl(w);return Jr(this.currentUrlTree,re,z)}removeEmptyProps(w){return Object.keys(w).reduce((O,z)=>{const re=w[z];return null!=re&&(O[z]=re),O},{})}scheduleNavigation(w,O,z,re,le){if(this.disposed)return Promise.resolve(!1);let lt,Ut,En,Hn;if(le?(lt=le.resolve,Ut=le.reject,En=le.promise):En=new Promise((Ii,rs)=>{lt=Ii,Ut=rs}),"computed"===this.canceledNavigationResolution)if(z&&z.\u0275routerPageId)Hn=z.\u0275routerPageId;else{var $n;Hn=(null!==($n=this.browserPageId)&&void 0!==$n?$n:0)+1}else Hn=0;return this.navigationTransitions.handleNavigationRequest({targetPageId:Hn,source:O,restoredState:z,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:w,extras:re,resolve:lt,reject:Ut,promise:En,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),En.catch(Ii=>Promise.reject(Ii))}setBrowserUrl(w,O){const z=this.urlSerializer.serialize(w);if(this.location.isCurrentPathEqualTo(z)||O.extras.replaceUrl){const le={...O.extras.state,...this.generateNgRouterState(O.id,this.browserPageId)};this.location.replaceState(z,"",le)}else{const re={...O.extras.state,...this.generateNgRouterState(O.id,O.targetPageId)};this.location.go(z,"",re)}}restoreHistory(w,O=!1){if("computed"===this.canceledNavigationResolution){var z,re;const le=null!==(z=this.browserPageId)&&void 0!==z?z:this.currentPageId,lt=this.currentPageId-le;0!==lt?this.location.historyGo(lt):this.currentUrlTree===(null===(re=this.getCurrentNavigation())||void 0===re?void 0:re.finalUrl)&&0===lt&&(this.resetState(w),this.browserUrlTree=w.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(O&&this.resetState(w),this.resetUrlToCurrentUrlTree())}resetState(w){this.routerState=w.currentRouterState,this.currentUrlTree=w.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,w.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(w,O){return"computed"===this.canceledNavigationResolution?{navigationId:w,\u0275routerPageId:O}:{navigationId:w}}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})(),il=(()=>{class S{constructor(w,O,z,re,le,lt){var Ut;this.router=w,this.route=O,this.tabIndexAttribute=z,this.renderer=re,this.el=le,this.locationStrategy=lt,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new De.x;const En=null===(Ut=le.nativeElement.tagName)||void 0===Ut?void 0:Ut.toLowerCase();this.isAnchorElement="a"===En||"area"===En,this.isAnchorElement?this.subscription=w.events.subscribe(Hn=>{Hn instanceof Xt&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(w){this._preserveFragment=(0,_.D6c)(w)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(w){this._skipLocationChange=(0,_.D6c)(w)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(w){this._replaceUrl=(0,_.D6c)(w)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(w){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",w)}ngOnChanges(w){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(w){null!=w?(this.commands=Array.isArray(w)?w:[w],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(w,O,z,re,le){return!!(null===this.urlTree||this.isAnchorElement&&(0!==w||O||z||re||le||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){var w;null===(w=this.subscription)||void 0===w||w.unsubscribe()}updateHref(){var w;this.href=null!==this.urlTree&&this.locationStrategy?null===(w=this.locationStrategy)||void 0===w?void 0:w.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const O=null===this.href?null:(0,_.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",O)}applyAttributeValue(w,O){const z=this.renderer,re=this.el.nativeElement;null!==O?z.setAttribute(re,w,O):z.removeAttribute(re,w)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return S.\u0275fac=function(w){return new(w||S)(_.Y36(hn),_.Y36(As),_.$8M("tabindex"),_.Y36(_.Qsj),_.Y36(_.SBq),_.Y36(je.S$))},S.\u0275dir=_.lG2({type:S,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(w,O){1&w&&_.NdJ("click",function(re){return O.onClick(re.button,re.ctrlKey,re.shiftKey,re.altKey,re.metaKey)}),2&w&&_.uIk("target",O.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[_.TTD]}),S})();class Ma{}let $o=(()=>{class S{constructor(w,O,z,re,le){this.router=w,this.injector=z,this.preloadingStrategy=re,this.loader=le}setUpPreloading(){this.subscription=this.router.events.pipe((0,yt.h)(w=>w instanceof Xt),(0,Be.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(w,O){const z=[];for(const Ut of O){var re,le;Ut.providers&&!Ut._injector&&(Ut._injector=(0,_.MMx)(Ut.providers,w,`Route: ${Ut.path}`));const En=null!==(re=Ut._injector)&&void 0!==re?re:w,Hn=null!==(le=Ut._loadedInjector)&&void 0!==le?le:En;var lt;(Ut.loadChildren&&!Ut._loadedRoutes&&void 0===Ut.canLoad||Ut.loadComponent&&!Ut._loadedComponent)&&z.push(this.preloadConfig(En,Ut)),(Ut.children||Ut._loadedRoutes)&&z.push(this.processRoutes(Hn,null!==(lt=Ut.children)&&void 0!==lt?lt:Ut._loadedRoutes))}return(0,m.D)(z).pipe((0,Yn.J)())}preloadConfig(w,O){return this.preloadingStrategy.preload(O,()=>{let z;z=O.loadChildren&&void 0===O.canLoad?this.loader.loadChildren(w,O):(0,ee.of)(null);const re=z.pipe((0,Fe.z)(le=>{var lt;return null===le?(0,ee.of)(void 0):(O._loadedRoutes=le.routes,O._loadedInjector=le.injector,this.processRoutes(null!==(lt=le.injector)&&void 0!==lt?lt:w,le.routes))}));if(O.loadComponent&&!O._loadedComponent){const le=this.loader.loadComponent(O);return(0,m.D)([re,le]).pipe((0,Yn.J)())}return re})}}return S.\u0275fac=function(w){return new(w||S)(_.LFG(hn),_.LFG(_.Sil),_.LFG(_.lqb),_.LFG(Ma),_.LFG(Qs))},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();const wl=new _.OlP("");let Mc=(()=>{class S{constructor(w,O,z,re,le={}){this.urlSerializer=w,this.transitions=O,this.viewportScroller=z,this.zone=re,this.options=le,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},le.scrollPositionRestoration=le.scrollPositionRestoration||"disabled",le.anchorScrolling=le.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(w=>{w instanceof Lt?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=w.navigationTrigger,this.restoredId=w.restoredState?w.restoredState.navigationId:0):w instanceof Xt&&(this.lastId=w.id,this.scheduleScrollEvent(w,this.urlSerializer.parse(w.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(w=>{w instanceof Ir&&(w.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(w.position):w.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(w.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(w,O){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ir(w,"popstate"===this.lastSource?this.store[this.restoredId]:null,O))})},0)})}ngOnDestroy(){var w,O;null===(w=this.routerEventsSubscription)||void 0===w||w.unsubscribe(),null===(O=this.scrollEventsSubscription)||void 0===O||O.unsubscribe()}}return S.\u0275fac=function(w){_.$Z()},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac}),S})();var eo=(()=>((eo=eo||{})[eo.COMPLETE=0]="COMPLETE",eo[eo.FAILED=1]="FAILED",eo[eo.REDIRECTING=2]="REDIRECTING",eo))();const pr=!1;function la(S,...x){return(0,_.MR2)([{provide:Ls,multi:!0,useValue:S},pr?{provide:sr,useValue:!0}:[],{provide:As,useFactory:Xc,deps:[hn]},{provide:_.tb,multi:!0,useFactory:ps},x.map(w=>w.\u0275providers)])}function Xc(S){return S.routerState.root}function ci(S,x){return{\u0275kind:S,\u0275providers:x}}const sr=new _.OlP("",{providedIn:"root",factory:()=>!1});function ps(){const S=(0,_.f3M)(_.zs3);return x=>{var w,O;const z=S.get(_.z2F);if(x!==z.components[0])return;const re=S.get(hn),le=S.get(Ln);1===S.get(zl)&&re.initialNavigation(),null===(w=S.get(hc,null,_.XFs.Optional))||void 0===w||w.setUpPreloading(),null===(O=S.get(wl,null,_.XFs.Optional))||void 0===O||O.init(),re.resetRootComponentType(z.componentTypes[0]),le.closed||(le.next(),le.complete(),le.unsubscribe())}}const Ln=new _.OlP(pr?"bootstrap done indicator":"",{factory:()=>new De.x}),zl=new _.OlP(pr?"initial navigation":"",{providedIn:"root",factory:()=>1});function Qc(){let S=[];return S=pr?[{provide:_.Xts,multi:!0,useFactory:()=>{const x=(0,_.f3M)(hn);return()=>x.events.subscribe(w=>{var O,z,re,le;null===(O=(z=console).group)||void 0===O||O.call(z,`Router Event: ${w.constructor.name}`),console.log(function ei(S){var x,w,O,z;if(!("type"in S))return`Unknown Router Event: ${S.constructor.name}`;switch(S.type){case 14:return`ActivationEnd(path: '${(null===(x=S.snapshot.routeConfig)||void 0===x?void 0:x.path)||""}')`;case 13:return`ActivationStart(path: '${(null===(w=S.snapshot.routeConfig)||void 0===w?void 0:w.path)||""}')`;case 12:return`ChildActivationEnd(path: '${(null===(O=S.snapshot.routeConfig)||void 0===O?void 0:O.path)||""}')`;case 11:return`ChildActivationStart(path: '${(null===(z=S.snapshot.routeConfig)||void 0===z?void 0:z.path)||""}')`;case 8:return`GuardsCheckEnd(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state}, shouldActivate: ${S.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state})`;case 2:return`NavigationCancel(id: ${S.id}, url: '${S.url}')`;case 16:return`NavigationSkipped(id: ${S.id}, url: '${S.url}')`;case 1:return`NavigationEnd(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${S.id}, url: '${S.url}', error: ${S.error})`;case 0:return`NavigationStart(id: ${S.id}, url: '${S.url}')`;case 6:return`ResolveEnd(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state})`;case 5:return`ResolveStart(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state})`;case 10:return`RouteConfigLoadEnd(path: ${S.route.path})`;case 9:return`RouteConfigLoadStart(path: ${S.route.path})`;case 4:return`RoutesRecognized(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state})`;case 15:return`Scroll(anchor: '${S.anchor}', position: '${S.position?`${S.position[0]}, ${S.position[1]}`:null}')`}}(w)),console.log(w),null===(re=(le=console).groupEnd)||void 0===re||re.call(le)})}}]:[],ci(1,S)}const hc=new _.OlP(pr?"router preloader":"");function bl(S){return ci(0,[{provide:hc,useExisting:$o},{provide:Ma,useExisting:S}])}const es=!1,Gl=new _.OlP(es?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),qr=[je.Ye,{provide:Ze,useClass:nt},hn,na,{provide:As,useFactory:Xc,deps:[hn]},Qs,es?{provide:sr,useValue:!0}:[]];function Rr(){return new _.PXZ("Router",hn)}let Yr=(()=>{class S{constructor(w){}static forRoot(w,O){return{ngModule:S,providers:[qr,es&&null!=O&&O.enableTracing?Qc().\u0275providers:[],{provide:Ls,multi:!0,useValue:w},{provide:Gl,useFactory:Eu,deps:[[hn,new _.FiY,new _.tp0]]},{provide:Ji,useValue:O||{}},null!=O&&O.useHash?{provide:je.S$,useClass:je.Do}:{provide:je.S$,useClass:je.b0},{provide:wl,useFactory:()=>{const S=(0,_.f3M)(je.EM),x=(0,_.f3M)(_.R0b),w=(0,_.f3M)(Ji),O=(0,_.f3M)(qo),z=(0,_.f3M)(Ze);return w.scrollOffset&&S.setOffset(w.scrollOffset),new Mc(z,O,S,x,w)}},null!=O&&O.preloadingStrategy?bl(O.preloadingStrategy).\u0275providers:[],{provide:_.PXZ,multi:!0,useFactory:Rr},null!=O&&O.initialNavigation?ca(O):[],[{provide:Yo,useFactory:ps},{provide:_.tb,multi:!0,useExisting:Yo}]]}}static forChild(w){return{ngModule:S,providers:[{provide:Ls,multi:!0,useValue:w}]}}}return S.\u0275fac=function(w){return new(w||S)(_.LFG(Gl,8))},S.\u0275mod=_.oAB({type:S}),S.\u0275inj=_.cJS({imports:[Zi]}),S})();function Eu(S){if(es&&S)throw new _.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function ca(S){return["disabled"===S.initialNavigation?ci(3,[{provide:_.ip1,multi:!0,useFactory:()=>{const x=(0,_.f3M)(hn);return()=>{x.setUpLocationChangeListener()}}},{provide:zl,useValue:2}]).\u0275providers:[],"enabledBlocking"===S.initialNavigation?ci(2,[{provide:zl,useValue:0},{provide:_.ip1,multi:!0,deps:[_.zs3],useFactory:x=>{const w=x.get(je.V_,Promise.resolve());return()=>w.then(()=>new Promise(O=>{const z=x.get(hn),re=x.get(Ln);(function ma(S,x){S.events.pipe((0,yt.h)(w=>w instanceof Xt||w instanceof an||w instanceof rr||w instanceof vn),(0,gt.U)(w=>w instanceof Xt||w instanceof vn?eo.COMPLETE:w instanceof an&&(0===w.code||1===w.code)?eo.REDIRECTING:eo.FAILED),(0,yt.h)(w=>w!==eo.REDIRECTING),(0,ht.q)(1)).subscribe(()=>{x()})})(z,()=>{O(!0)}),x.get(qo).afterPreactivation=()=>(O(!0),re.closed?(0,ee.of)(void 0):re),z.initialNavigation()}))}}]).\u0275providers:[]]}const Yo=new _.OlP(es?"Router Initializer":"")},3942:(In,Et,j)=>{"use strict";j.d(Et,{Z:()=>ct});var _=j(2090),m=j(4859),ee=j(6881),ce=j(1877);class $e{constructor(xe,Re){this._delegate=xe,this.firebase=Re,(0,ee._addComponent)(xe,new m.wA("app-compat",()=>this,"PUBLIC")),this.container=xe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(xe){this._delegate.automaticDataCollectionEnabled=xe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(xe=>{this._delegate.checkDestroyed(),xe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,ee.deleteApp)(this._delegate)))}_getService(xe,Re=ee._DEFAULT_ENTRY_NAME){var de;this._delegate.checkDestroyed();const _t=this._delegate.container.getProvider(xe);return!_t.isInitialized()&&"EXPLICIT"===(null===(de=_t.getComponent())||void 0===de?void 0:de.instantiationMode)&&_t.initialize(),_t.getImmediate({identifier:Re})}_removeServiceInstance(xe,Re=ee._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(xe).clearInstance(Re)}_addComponent(xe){(0,ee._addComponent)(this._delegate,xe)}_addOrOverwriteComponent(xe){(0,ee._addOrOverwriteComponent)(this._delegate,xe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const _e=new _.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ye=function ze(){const At=function Me(At){const xe={},Re={__esModule:!0,initializeApp:function Y(Ue,ke={}){const Ne=ee.initializeApp(Ue,ke);if((0,_.r3)(xe,Ne.name))return xe[Ne.name];const De=new At(Ne,Re);return xe[Ne.name]=De,De},app:_t,registerVersion:ee.registerVersion,setLogLevel:ee.setLogLevel,onLog:ee.onLog,apps:null,SDK_VERSION:ee.SDK_VERSION,INTERNAL:{registerComponent:function et(Ue){const ke=Ue.name,Ne=ke.replace("-compat","");if(ee._registerComponent(Ue)&&"PUBLIC"===Ue.type){const De=(je=_t())=>{if("function"!=typeof je[Ne])throw _e.create("invalid-app-argument",{appName:ke});return je[Ne]()};void 0!==Ue.serviceProps&&(0,_.ZB)(De,Ue.serviceProps),Re[Ne]=De,At.prototype[Ne]=function(...je){return this._getService.bind(this,ke).apply(this,Ue.multipleInstances?je:[])}}return"PUBLIC"===Ue.type?Re[Ne]:null},removeApp:function de(Ue){delete xe[Ue]},useAsService:function Pt(Ue,ke){return"serverAuth"===ke?null:ke},modularAPIs:ee}};function _t(Ue){if(!(0,_.r3)(xe,Ue=Ue||ee._DEFAULT_ENTRY_NAME))throw _e.create("no-app",{appName:Ue});return xe[Ue]}return Re.default=Re,Object.defineProperty(Re,"apps",{get:function it(){return Object.keys(xe).map(Ue=>xe[Ue])}}),_t.App=At,Re}($e);return At.INTERNAL=Object.assign(Object.assign({},At.INTERNAL),{createFirebaseNamespace:ze,extendNamespace:function xe(Re){(0,_.ZB)(At,Re)},createSubscribe:_.ne,ErrorFactory:_.LL,deepExtend:_.ZB}),At}(),ae=new ce.Yd("@firebase/app-compat");if((0,_.jU)()&&void 0!==self.firebase){ae.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const At=self.firebase.SDK_VERSION;At&&At.indexOf("LITE")>=0&&ae.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ct=ye;!function We(At){(0,ee.registerVersion)("@firebase/app-compat","0.2.9",At)}()},6881:(In,Et,j)=>{"use strict";j.r(Et),j.d(Et,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>gi,_DEFAULT_ENTRY_NAME:()=>di,_addComponent:()=>ln,_addOrOverwriteComponent:()=>yn,_apps:()=>Gn,_clearComponents:()=>Qr,_components:()=>qn,_getProvider:()=>Jr,_registerComponent:()=>on,_removeServiceInstance:()=>Dr,deleteApp:()=>Ai,getApp:()=>lr,getApps:()=>yr,initializeApp:()=>ur,onLog:()=>Ze,registerVersion:()=>Kt,setLogLevel:()=>nt});var _=j(5861),m=j(4859),ee=j(1877),ce=j(2090);const $e=(Xe,He)=>He.some(Ct=>Xe instanceof Ct);let Se,_e;const ye=new WeakMap,ae=new WeakMap,Ee=new WeakMap,Ke=new WeakMap,We=new WeakMap;let xe={get(Xe,He,Ct){if(Xe instanceof IDBTransaction){if("done"===He)return ae.get(Xe);if("objectStoreNames"===He)return Xe.objectStoreNames||Ee.get(Xe);if("store"===He)return Ct.objectStoreNames[1]?void 0:Ct.objectStore(Ct.objectStoreNames[0])}return Y(Xe[He])},set:(Xe,He,Ct)=>(Xe[He]=Ct,!0),has:(Xe,He)=>Xe instanceof IDBTransaction&&("done"===He||"store"===He)||He in Xe};function _t(Xe){return"function"==typeof Xe?function de(Xe){return Xe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ze(){return _e||(_e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Xe)?function(...He){return Xe.apply(it(this),He),Y(ye.get(this))}:function(...He){return Y(Xe.apply(it(this),He))}:function(He,...Ct){const Gt=Xe.call(it(this),He,...Ct);return Ee.set(Gt,He.sort?He.sort():[He]),Y(Gt)}}(Xe):(Xe instanceof IDBTransaction&&function At(Xe){if(ae.has(Xe))return;const He=new Promise((Ct,Gt)=>{const pn=()=>{Xe.removeEventListener("complete",kn),Xe.removeEventListener("error",wn),Xe.removeEventListener("abort",wn)},kn=()=>{Ct(),pn()},wn=()=>{Gt(Xe.error||new DOMException("AbortError","AbortError")),pn()};Xe.addEventListener("complete",kn),Xe.addEventListener("error",wn),Xe.addEventListener("abort",wn)});ae.set(Xe,He)}(Xe),$e(Xe,function Me(){return Se||(Se=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Xe,xe):Xe)}function Y(Xe){if(Xe instanceof IDBRequest)return function ct(Xe){const He=new Promise((Ct,Gt)=>{const pn=()=>{Xe.removeEventListener("success",kn),Xe.removeEventListener("error",wn)},kn=()=>{Ct(Y(Xe.result)),pn()},wn=()=>{Gt(Xe.error),pn()};Xe.addEventListener("success",kn),Xe.addEventListener("error",wn)});return He.then(Ct=>{Ct instanceof IDBCursor&&ye.set(Ct,Xe)}).catch(()=>{}),We.set(He,Xe),He}(Xe);if(Ke.has(Xe))return Ke.get(Xe);const He=_t(Xe);return He!==Xe&&(Ke.set(Xe,He),We.set(He,Xe)),He}const it=Xe=>We.get(Xe),Ue=["get","getKey","getAll","getAllKeys","count"],ke=["put","add","delete","clear"],Ne=new Map;function De(Xe,He){if(!(Xe instanceof IDBDatabase)||He in Xe||"string"!=typeof He)return;if(Ne.get(He))return Ne.get(He);const Ct=He.replace(/FromIndex$/,""),Gt=He!==Ct,pn=ke.includes(Ct);if(!(Ct in(Gt?IDBIndex:IDBObjectStore).prototype)||!pn&&!Ue.includes(Ct))return;const kn=function(){var wn=(0,_.Z)(function*(Qn,...Jn){const Wn=this.transaction(Qn,pn?"readwrite":"readonly");let Xn=Wn.store;return Gt&&(Xn=Xn.index(Jn.shift())),(yield Promise.all([Xn[Ct](...Jn),pn&&Wn.done]))[0]});return function(Jn){return wn.apply(this,arguments)}}();return Ne.set(He,kn),kn}!function Re(Xe){xe=Xe(xe)}(Xe=>({...Xe,get:(He,Ct,Gt)=>De(He,Ct)||Xe.get(He,Ct,Gt),has:(He,Ct)=>!!De(He,Ct)||Xe.has(He,Ct)}));class je{constructor(He){this.container=He}getPlatformInfoString(){return this.container.getProviders().map(Ct=>{if(function gt(Xe){const He=Xe.getComponent();return"VERSION"===(null==He?void 0:He.type)}(Ct)){const Gt=Ct.getImmediate();return`${Gt.library}/${Gt.version}`}return null}).filter(Ct=>Ct).join(" ")}}const Dt="@firebase/app",Mt=new ee.Yd("@firebase/app"),di="[DEFAULT]",wi={[Dt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Gn=new Map,qn=new Map;function ln(Xe,He){try{Xe.container.addComponent(He)}catch(Ct){Mt.debug(`Component ${He.name} failed to register with FirebaseApp ${Xe.name}`,Ct)}}function yn(Xe,He){Xe.container.addOrOverwriteComponent(He)}function on(Xe){const He=Xe.name;if(qn.has(He))return Mt.debug(`There were multiple attempts to register component ${He}.`),!1;qn.set(He,Xe);for(const Ct of Gn.values())ln(Ct,Xe);return!0}function Jr(Xe,He){const Ct=Xe.container.getProvider("heartbeat").getImmediate({optional:!0});return Ct&&Ct.triggerHeartbeat(),Xe.container.getProvider(He)}function Dr(Xe,He,Ct=di){Jr(Xe,He).clearInstance(Ct)}function Qr(){qn.clear()}const pi=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Lr{constructor(He,Ct,Gt){this._isDeleted=!1,this._options=Object.assign({},He),this._config=Object.assign({},Ct),this._name=Ct.name,this._automaticDataCollectionEnabled=Ct.automaticDataCollectionEnabled,this._container=Gt,this.container.addComponent(new m.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(He){this.checkDestroyed(),this._automaticDataCollectionEnabled=He}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(He){this._isDeleted=He}checkDestroyed(){if(this.isDeleted)throw pi.create("app-deleted",{appName:this._name})}}const gi="9.21.0";function ur(Xe,He={}){let Ct=Xe;"object"!=typeof He&&(He={name:He});const Gt=Object.assign({name:di,automaticDataCollectionEnabled:!1},He),pn=Gt.name;if("string"!=typeof pn||!pn)throw pi.create("bad-app-name",{appName:String(pn)});if(Ct||(Ct=(0,ce.aH)()),!Ct)throw pi.create("no-options");const kn=Gn.get(pn);if(kn){if((0,ce.vZ)(Ct,kn.options)&&(0,ce.vZ)(Gt,kn.config))return kn;throw pi.create("duplicate-app",{appName:pn})}const wn=new m.H0(pn);for(const Jn of qn.values())wn.addComponent(Jn);const Qn=new Lr(Ct,Gt,wn);return Gn.set(pn,Qn),Qn}function lr(Xe=di){const He=Gn.get(Xe);if(!He&&Xe===di)return ur();if(!He)throw pi.create("no-app",{appName:Xe});return He}function yr(){return Array.from(Gn.values())}function Ai(Xe){return mr.apply(this,arguments)}function mr(){return(mr=(0,_.Z)(function*(Xe){const He=Xe.name;Gn.has(He)&&(Gn.delete(He),yield Promise.all(Xe.container.getProviders().map(Ct=>Ct.delete())),Xe.isDeleted=!0)})).apply(this,arguments)}function Kt(Xe,He,Ct){var Gt;let pn=null!==(Gt=wi[Xe])&&void 0!==Gt?Gt:Xe;Ct&&(pn+=`-${Ct}`);const kn=pn.match(/\s|\//),wn=He.match(/\s|\//);if(kn||wn){const Qn=[`Unable to register library "${pn}" with version "${He}":`];return kn&&Qn.push(`library name "${pn}" contains illegal characters (whitespace or "/")`),kn&&wn&&Qn.push("and"),wn&&Qn.push(`version name "${He}" contains illegal characters (whitespace or "/")`),void Mt.warn(Qn.join(" "))}on(new m.wA(`${pn}-version`,()=>({library:pn,version:He}),"VERSION"))}function Ze(Xe,He){if(null!==Xe&&"function"!=typeof Xe)throw pi.create("invalid-log-argument");(0,ee.Am)(Xe,He)}function nt(Xe){(0,ee.Ub)(Xe)}const en="firebase-heartbeat-database",Yt=1,we="firebase-heartbeat-store";let Ie=null;function qe(){return Ie||(Ie=function et(Xe,He,{blocked:Ct,upgrade:Gt,blocking:pn,terminated:kn}={}){const wn=indexedDB.open(Xe,He),Qn=Y(wn);return Gt&&wn.addEventListener("upgradeneeded",Jn=>{Gt(Y(wn.result),Jn.oldVersion,Jn.newVersion,Y(wn.transaction),Jn)}),Ct&&wn.addEventListener("blocked",Jn=>Ct(Jn.oldVersion,Jn.newVersion,Jn)),Qn.then(Jn=>{kn&&Jn.addEventListener("close",()=>kn()),pn&&Jn.addEventListener("versionchange",Wn=>pn(Wn.oldVersion,Wn.newVersion,Wn))}).catch(()=>{}),Qn}(en,Yt,{upgrade:(Xe,He)=>{0===He&&Xe.createObjectStore(we)}}).catch(Xe=>{throw pi.create("idb-open",{originalErrorMessage:Xe.message})})),Ie}function ut(){return(ut=(0,_.Z)(function*(Xe){try{return(yield qe()).transaction(we).objectStore(we).get(Ge(Xe))}catch(He){if(He instanceof ce.ZR)Mt.warn(He.message);else{const Ct=pi.create("idb-get",{originalErrorMessage:null==He?void 0:He.message});Mt.warn(Ct.message)}}})).apply(this,arguments)}function un(Xe,He){return ot.apply(this,arguments)}function ot(){return(ot=(0,_.Z)(function*(Xe,He){try{const Gt=(yield qe()).transaction(we,"readwrite");return yield Gt.objectStore(we).put(He,Ge(Xe)),Gt.done}catch(Ct){if(Ct instanceof ce.ZR)Mt.warn(Ct.message);else{const Gt=pi.create("idb-set",{originalErrorMessage:null==Ct?void 0:Ct.message});Mt.warn(Gt.message)}}})).apply(this,arguments)}function Ge(Xe){return`${Xe.name}!${Xe.options.appId}`}class Nt{constructor(He){this.container=He,this._heartbeatsCache=null;const Ct=this.container.getProvider("app").getImmediate();this._storage=new Tt(Ct),this._heartbeatsCachePromise=this._storage.read().then(Gt=>(this._heartbeatsCache=Gt,Gt))}triggerHeartbeat(){var He=this;return(0,_.Z)(function*(){const Gt=He.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),pn=he();if(null===He._heartbeatsCache&&(He._heartbeatsCache=yield He._heartbeatsCachePromise),He._heartbeatsCache.lastSentHeartbeatDate!==pn&&!He._heartbeatsCache.heartbeats.some(kn=>kn.date===pn))return He._heartbeatsCache.heartbeats.push({date:pn,agent:Gt}),He._heartbeatsCache.heartbeats=He._heartbeatsCache.heartbeats.filter(kn=>{const wn=new Date(kn.date).valueOf();return Date.now()-wn<=2592e6}),He._storage.overwrite(He._heartbeatsCache)})()}getHeartbeatsHeader(){var He=this;return(0,_.Z)(function*(){if(null===He._heartbeatsCache&&(yield He._heartbeatsCachePromise),null===He._heartbeatsCache||0===He._heartbeatsCache.heartbeats.length)return"";const Ct=he(),{heartbeatsToSend:Gt,unsentEntries:pn}=function Ce(Xe,He=1024){const Ct=[];let Gt=Xe.slice();for(const pn of Xe){const kn=Ct.find(wn=>wn.agent===pn.agent);if(kn){if(kn.dates.push(pn.date),It(Ct)>He){kn.dates.pop();break}}else if(Ct.push({agent:pn.agent,dates:[pn.date]}),It(Ct)>He){Ct.pop();break}Gt=Gt.slice(1)}return{heartbeatsToSend:Ct,unsentEntries:Gt}}(He._heartbeatsCache.heartbeats),kn=(0,ce.L)(JSON.stringify({version:2,heartbeats:Gt}));return He._heartbeatsCache.lastSentHeartbeatDate=Ct,pn.length>0?(He._heartbeatsCache.heartbeats=pn,yield He._storage.overwrite(He._heartbeatsCache)):(He._heartbeatsCache.heartbeats=[],He._storage.overwrite(He._heartbeatsCache)),kn})()}}function he(){return(new Date).toISOString().substring(0,10)}class Tt{constructor(He){this.app=He,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,_.Z)(function*(){return!!(0,ce.hl)()&&(0,ce.eu)().then(()=>!0).catch(()=>!1)})()}read(){var He=this;return(0,_.Z)(function*(){return(yield He._canUseIndexedDBPromise)&&(yield function Ot(Xe){return ut.apply(this,arguments)}(He.app))||{heartbeats:[]}})()}overwrite(He){var Ct=this;return(0,_.Z)(function*(){var Gt;if(yield Ct._canUseIndexedDBPromise){const kn=yield Ct.read();return un(Ct.app,{lastSentHeartbeatDate:null!==(Gt=He.lastSentHeartbeatDate)&&void 0!==Gt?Gt:kn.lastSentHeartbeatDate,heartbeats:He.heartbeats})}})()}add(He){var Ct=this;return(0,_.Z)(function*(){var Gt;if(yield Ct._canUseIndexedDBPromise){const kn=yield Ct.read();return un(Ct.app,{lastSentHeartbeatDate:null!==(Gt=He.lastSentHeartbeatDate)&&void 0!==Gt?Gt:kn.lastSentHeartbeatDate,heartbeats:[...kn.heartbeats,...He.heartbeats]})}})()}}function It(Xe){return(0,ce.L)(JSON.stringify({version:2,heartbeats:Xe})).length}!function Qt(Xe){on(new m.wA("platform-logger",He=>new je(He),"PRIVATE")),on(new m.wA("heartbeat",He=>new Nt(He),"PRIVATE")),Kt(Dt,"0.9.9",Xe),Kt(Dt,"0.9.9","esm2017"),Kt("fire-js","")}("")},4859:(In,Et,j)=>{"use strict";j.d(Et,{H0:()=>Me,wA:()=>ee,zt:()=>$e});var _=j(5861),m=j(2090);class ee{constructor(ye,ae,Ee){this.name=ye,this.instanceFactory=ae,this.type=Ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ye){return this.instantiationMode=ye,this}setMultipleInstances(ye){return this.multipleInstances=ye,this}setServiceProps(ye){return this.serviceProps=ye,this}setInstanceCreatedCallback(ye){return this.onInstanceCreated=ye,this}}const ce="[DEFAULT]";class $e{constructor(ye,ae){this.name=ye,this.container=ae,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ye){const ae=this.normalizeInstanceIdentifier(ye);if(!this.instancesDeferred.has(ae)){const Ee=new m.BH;if(this.instancesDeferred.set(ae,Ee),this.isInitialized(ae)||this.shouldAutoInitialize())try{const Ke=this.getOrInitializeService({instanceIdentifier:ae});Ke&&Ee.resolve(Ke)}catch{}}return this.instancesDeferred.get(ae).promise}getImmediate(ye){var ae;const Ee=this.normalizeInstanceIdentifier(null==ye?void 0:ye.identifier),Ke=null!==(ae=null==ye?void 0:ye.optional)&&void 0!==ae&&ae;if(!this.isInitialized(Ee)&&!this.shouldAutoInitialize()){if(Ke)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ee})}catch(We){if(Ke)return null;throw We}}getComponent(){return this.component}setComponent(ye){if(ye.name!==this.name)throw Error(`Mismatching Component ${ye.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ye,this.shouldAutoInitialize()){if(function _e(ze){return"EAGER"===ze.instantiationMode}(ye))try{this.getOrInitializeService({instanceIdentifier:ce})}catch{}for(const[ae,Ee]of this.instancesDeferred.entries()){const Ke=this.normalizeInstanceIdentifier(ae);try{const We=this.getOrInitializeService({instanceIdentifier:Ke});Ee.resolve(We)}catch{}}}}clearInstance(ye=ce){this.instancesDeferred.delete(ye),this.instancesOptions.delete(ye),this.instances.delete(ye)}delete(){var ye=this;return(0,_.Z)(function*(){const ae=Array.from(ye.instances.values());yield Promise.all([...ae.filter(Ee=>"INTERNAL"in Ee).map(Ee=>Ee.INTERNAL.delete()),...ae.filter(Ee=>"_delete"in Ee).map(Ee=>Ee._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ye=ce){return this.instances.has(ye)}getOptions(ye=ce){return this.instancesOptions.get(ye)||{}}initialize(ye={}){const{options:ae={}}=ye,Ee=this.normalizeInstanceIdentifier(ye.instanceIdentifier);if(this.isInitialized(Ee))throw Error(`${this.name}(${Ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ke=this.getOrInitializeService({instanceIdentifier:Ee,options:ae});for(const[We,ct]of this.instancesDeferred.entries())Ee===this.normalizeInstanceIdentifier(We)&&ct.resolve(Ke);return Ke}onInit(ye,ae){var Ee;const Ke=this.normalizeInstanceIdentifier(ae),We=null!==(Ee=this.onInitCallbacks.get(Ke))&&void 0!==Ee?Ee:new Set;We.add(ye),this.onInitCallbacks.set(Ke,We);const ct=this.instances.get(Ke);return ct&&ye(ct,Ke),()=>{We.delete(ye)}}invokeOnInitCallbacks(ye,ae){const Ee=this.onInitCallbacks.get(ae);if(Ee)for(const Ke of Ee)try{Ke(ye,ae)}catch{}}getOrInitializeService({instanceIdentifier:ye,options:ae={}}){let Ee=this.instances.get(ye);if(!Ee&&this.component&&(Ee=this.component.instanceFactory(this.container,{instanceIdentifier:(ze=ye,ze===ce?void 0:ze),options:ae}),this.instances.set(ye,Ee),this.instancesOptions.set(ye,ae),this.invokeOnInitCallbacks(Ee,ye),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ye,Ee)}catch{}var ze;return Ee||null}normalizeInstanceIdentifier(ye=ce){return this.component?this.component.multipleInstances?ye:ce:ye}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Me{constructor(ye){this.name=ye,this.providers=new Map}addComponent(ye){const ae=this.getProvider(ye.name);if(ae.isComponentSet())throw new Error(`Component ${ye.name} has already been registered with ${this.name}`);ae.setComponent(ye)}addOrOverwriteComponent(ye){this.getProvider(ye.name).isComponentSet()&&this.providers.delete(ye.name),this.addComponent(ye)}getProvider(ye){if(this.providers.has(ye))return this.providers.get(ye);const ae=new $e(ye,this);return this.providers.set(ye,ae),ae}getProviders(){return Array.from(this.providers.values())}}},1877:(In,Et,j)=>{"use strict";j.d(Et,{Am:()=>ze,Ub:()=>Me,Yd:()=>_e,in:()=>m});const _=[];var m=(()=>{return(ye=m||(m={}))[ye.DEBUG=0]="DEBUG",ye[ye.VERBOSE=1]="VERBOSE",ye[ye.INFO=2]="INFO",ye[ye.WARN=3]="WARN",ye[ye.ERROR=4]="ERROR",ye[ye.SILENT=5]="SILENT",m;var ye})();const ee={debug:m.DEBUG,verbose:m.VERBOSE,info:m.INFO,warn:m.WARN,error:m.ERROR,silent:m.SILENT},ce=m.INFO,$e={[m.DEBUG]:"log",[m.VERBOSE]:"log",[m.INFO]:"info",[m.WARN]:"warn",[m.ERROR]:"error"},Se=(ye,ae,...Ee)=>{if(ae<ye.logLevel)return;const Ke=(new Date).toISOString(),We=$e[ae];if(!We)throw new Error(`Attempted to log a message with an invalid logType (value: ${ae})`);console[We](`[${Ke}]  ${ye.name}:`,...Ee)};class _e{constructor(ae){this.name=ae,this._logLevel=ce,this._logHandler=Se,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(ae){if(!(ae in m))throw new TypeError(`Invalid value "${ae}" assigned to \`logLevel\``);this._logLevel=ae}setLogLevel(ae){this._logLevel="string"==typeof ae?ee[ae]:ae}get logHandler(){return this._logHandler}set logHandler(ae){if("function"!=typeof ae)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ae}get userLogHandler(){return this._userLogHandler}set userLogHandler(ae){this._userLogHandler=ae}debug(...ae){this._userLogHandler&&this._userLogHandler(this,m.DEBUG,...ae),this._logHandler(this,m.DEBUG,...ae)}log(...ae){this._userLogHandler&&this._userLogHandler(this,m.VERBOSE,...ae),this._logHandler(this,m.VERBOSE,...ae)}info(...ae){this._userLogHandler&&this._userLogHandler(this,m.INFO,...ae),this._logHandler(this,m.INFO,...ae)}warn(...ae){this._userLogHandler&&this._userLogHandler(this,m.WARN,...ae),this._logHandler(this,m.WARN,...ae)}error(...ae){this._userLogHandler&&this._userLogHandler(this,m.ERROR,...ae),this._logHandler(this,m.ERROR,...ae)}}function Me(ye){_.forEach(ae=>{ae.setLogLevel(ye)})}function ze(ye,ae){for(const Ee of _){let Ke=null;ae&&ae.level&&(Ke=ee[ae.level]),Ee.userLogHandler=null===ye?null:(We,ct,...At)=>{const xe=At.map(Re=>{if(null==Re)return null;if("string"==typeof Re)return Re;if("number"==typeof Re||"boolean"==typeof Re)return Re.toString();if(Re instanceof Error)return Re.message;try{return JSON.stringify(Re)}catch{return null}}).filter(Re=>Re).join(" ");ct>=(null!=Ke?Ke:We.logLevel)&&ye({level:m[ct].toLowerCase(),message:xe,args:At,type:We.name})}}}},650:(In,Et,j)=>{"use strict";j.d(Et,{Br:()=>go,dr:()=>pi,oU:()=>gi,cs:()=>No,YG:()=>mr,Sm:()=>Kt,PM:()=>Ze,hM:()=>qe,W2:()=>ut,x4:()=>un,Mj:()=>ot,IJ:()=>Ge,W4:()=>ve,zq:()=>rt,jY:()=>he,Gu:()=>Ce,gu:()=>Tt,Xz:()=>It,pK:()=>He,Ie:()=>Ct,Q$:()=>Jn,q_:()=>Wn,ki:()=>Zi,I_:()=>Ur,jP:()=>fo,Nd:()=>Qe,VI:()=>Vt,cJ:()=>Lt,GO:()=>Xt,g2:()=>at,wd:()=>tn,sr:()=>Er,Pc:()=>oa,r4:()=>sa,SH:()=>Hi,YI:()=>xs,QI:()=>di,j9:()=>wi,yF:()=>Do});var _=j(5861),m=j(4650),ee=j(433),ce=j(655),$e=j(8421),Se=j(9751),_e=j(5577),Me=j(1144),ze=j(576),ye=j(3268);const ae=["addListener","removeListener"],Ee=["addEventListener","removeEventListener"],Ke=["on","off"];function We(b,q,T,W){if((0,ze.m)(T)&&(W=T,T=void 0),W)return We(b,q,T).pipe((0,ye.Z)(W));const[ge,M]=function Re(b){return(0,ze.m)(b.addEventListener)&&(0,ze.m)(b.removeEventListener)}(b)?Ee.map(F=>L=>b[F](q,L,T)):function At(b){return(0,ze.m)(b.addListener)&&(0,ze.m)(b.removeListener)}(b)?ae.map(ct(b,q)):function xe(b){return(0,ze.m)(b.on)&&(0,ze.m)(b.off)}(b)?Ke.map(ct(b,q)):[];if(!ge&&(0,Me.z)(b))return(0,_e.z)(F=>We(F,q,T))((0,$e.Xf)(b));if(!ge)throw new TypeError("Invalid event target");return new Se.y(F=>{const L=(...ne)=>F.next(1<ne.length?ne:ne[0]);return ge(L),()=>M(L)})}function ct(b,q){return T=>W=>b[T](q,W)}var de=j(7579),_t=j(1135),Y=j(1194),ke=(j(9613),j(3551),j(1138),j(1898),j(5273)),Ne=j(3577),De=j(3982),je=j(9866),Dt=(j(8126),j(2583)),yt=(j(3457),j(4349),j(4083)),Ve=j(9300),Be=j(3900),ft=j(1884),wt=j(6895);const zt=ke.i,Ae=["*"];function Yn(b,q){if(1&b&&(m.TgZ(0,"div",1),m.GkF(1,2),m.qZA()),2&b){const T=m.oxw();m.xp6(1),m.Q6J("ngTemplateOutlet",T.template)}}const cn=b=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(b):"function"==typeof requestAnimationFrame?requestAnimationFrame(b):setTimeout(b);let Cn=(()=>{class b{constructor(T,W){this.injector=T,this.el=W,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(T){this.el.nativeElement.value=this.lastValue=T,hr(this.el)}handleValueChange(T,W){T===this.el.nativeElement&&(W!==this.lastValue&&(this.lastValue=W,this.onChange(W)),hr(this.el))}_handleBlurEvent(T){T===this.el.nativeElement&&(this.onTouched(),hr(this.el))}registerOnChange(T){this.onChange=T}registerOnTouched(T){this.onTouched=T}setDisabledState(T){this.el.nativeElement.disabled=T}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let T;try{T=this.injector.get(ee.a5)}catch{}if(!T)return;T.statusChanges&&(this.statusChanges=T.statusChanges.subscribe(()=>hr(this.el)));const W=T.control;W&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(M=>{if(typeof W[M]<"u"){const F=W[M].bind(W);W[M]=(...L)=>{F(...L),hr(this.el)}}})}}return b.\u0275fac=function(T){return new(T||b)(m.Y36(m.zs3),m.Y36(m.SBq))},b.\u0275dir=m.lG2({type:b,hostBindings:function(T,W){1&T&&m.NdJ("ionBlur",function(M){return W._handleBlurEvent(M.target)})}}),b})();const hr=b=>{cn(()=>{const q=b.nativeElement,T=null!=q.value&&q.value.toString().length>0,W=_r(q);tr(q,W);const ge=q.closest("ion-item");ge&&tr(ge,T?[...W,"item-has-value"]:W)})},_r=b=>{const q=b.classList,T=[];for(let W=0;W<q.length;W++){const ge=q.item(W);null!==ge&&bn(ge,"ng-")&&T.push(`ion-${ge.substring(3)}`)}return T},tr=(b,q)=>{const T=b.classList;T.remove("ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"),T.add(...q)},bn=(b,q)=>b.substring(0,q.length)===q;let di=(()=>{class b extends Cn{constructor(T,W){super(T,W)}_handleChangeEvent(T){this.handleValueChange(T,T.value)}}return b.\u0275fac=function(T){return new(T||b)(m.Y36(m.zs3),m.Y36(m.SBq))},b.\u0275dir=m.lG2({type:b,selectors:[["ion-range"],["ion-select"],["ion-radio-group"],["ion-segment"],["ion-datetime"]],hostBindings:function(T,W){1&T&&m.NdJ("ionChange",function(M){return W._handleChangeEvent(M.target)})},features:[m._Bn([{provide:ee.JU,useExisting:b,multi:!0}]),m.qOj]}),b})(),wi=(()=>{class b extends Cn{constructor(T,W){super(T,W)}_handleInputEvent(T){this.handleValueChange(T,T.value)}}return b.\u0275fac=function(T){return new(T||b)(m.Y36(m.zs3),m.Y36(m.SBq))},b.\u0275dir=m.lG2({type:b,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(T,W){1&T&&m.NdJ("ionInput",function(M){return W._handleInputEvent(M.target)})},features:[m._Bn([{provide:ee.JU,useExisting:b,multi:!0}]),m.qOj]}),b})();const Gn=(b,q)=>{const T=b.prototype;q.forEach(W=>{Object.defineProperty(T,W,{get(){return this.el[W]},set(ge){this.z.runOutsideAngular(()=>this.el[W]=ge)}})})},qn=(b,q)=>{const T=b.prototype;q.forEach(W=>{T[W]=function(){const ge=arguments;return this.z.runOutsideAngular(()=>this.el[W].apply(this.el,ge))}})},ln=(b,q,T)=>{T.forEach(W=>b[W]=We(q,W))};function on(b){return function(T){const{defineCustomElementFn:W,inputs:ge,methods:M}=b;return void 0!==W&&W(),ge&&Gn(T,ge),M&&qn(T,M),T}}let pi=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},b.\u0275cmp=m.Xpm({type:b,selectors:[["ion-app"]],ngContentSelectors:Ae,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,ce.gn)([on({})],b),b})(),gi=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},b.\u0275cmp=m.Xpm({type:b,selectors:[["ion-back-button"]],inputs:{color:"color",defaultHref:"defaultHref",disabled:"disabled",icon:"icon",mode:"mode",routerAnimation:"routerAnimation",text:"text",type:"type"},ngContentSelectors:Ae,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,ce.gn)([on({inputs:["color","defaultHref","disabled","icon","mode","routerAnimation","text","type"]})],b),b})(),mr=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement,ln(this,this.el,["ionFocus","ionBlur"])}};return b.\u0275fac=function(T){return new(T||b)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},b.\u0275cmp=m.Xpm({type:b,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",form:"form",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:Ae,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,ce.gn)([on({inputs:["buttonType","color","disabled","download","expand","fill","form","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],b),b})(),Kt=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},b.\u0275cmp=m.Xpm({type:b,selectors:[["ion-buttons"]],inputs:{collapse:"collapse"},ngContentSelectors:Ae,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,ce.gn)([on({inputs:["collapse"]})],b),b})(),Ze=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},b.\u0275cmp=m.Xpm({type:b,selectors:[["ion-card"]],inputs:{button:"button",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},ngContentSelectors:Ae,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,ce.gn)([on({inputs:["button","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","target","type"]})],b),b})(),qe=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},b.\u0275cmp=m.Xpm({type:b,selectors:[["ion-chip"]],inputs:{color:"color",disabled:"disabled",mode:"mode",outline:"outline"},ngContentSelectors:Ae,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,ce.gn)([on({inputs:["color","disabled","mode","outline"]})],b),b})(),ut=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement,ln(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return b.\u0275fac=function(T){return new(T||b)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},b.\u0275cmp=m.Xpm({type:b,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:Ae,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,ce.gn)([on({inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],b),b})(),un=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement,ln(this,this.el,["ionCancel","ionChange","ionFocus","ionBlur"])}};return b.\u0275fac=function(T){return new(T||b)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},b.\u0275cmp=m.Xpm({type:b,selectors:[["ion-datetime"]],inputs:{cancelText:"cancelText",clearText:"clearText",color:"color",dayValues:"dayValues",disabled:"disabled",doneText:"doneText",firstDayOfWeek:"firstDayOfWeek",highlightedDates:"highlightedDates",hourCycle:"hourCycle",hourValues:"hourValues",isDateEnabled:"isDateEnabled",locale:"locale",max:"max",min:"min",minuteValues:"minuteValues",mode:"mode",monthValues:"monthValues",multiple:"multiple",name:"name",preferWheel:"preferWheel",presentation:"presentation",readonly:"readonly",showClearButton:"showClearButton",showDefaultButtons:"showDefaultButtons",showDefaultTimeLabel:"showDefaultTimeLabel",showDefaultTitle:"showDefaultTitle",size:"size",titleSelectedDatesFormatter:"titleSelectedDatesFormatter",value:"value",yearValues:"yearValues"},ngContentSelectors:Ae,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,ce.gn)([on({inputs:["cancelText","clearText","color","dayValues","disabled","doneText","firstDayOfWeek","highlightedDates","hourCycle","hourValues","isDateEnabled","locale","max","min","minuteValues","mode","monthValues","multiple","name","preferWheel","presentation","readonly","showClearButton","showDefaultButtons","showDefaultTimeLabel","showDefaultTitle","size","titleSelectedDatesFormatter","value","yearValues"],methods:["confirm","reset","cancel"]})],b),b})(),ot=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},b.\u0275cmp=m.Xpm({type:b,selectors:[["ion-datetime-button"]],inputs:{color:"color",datetime:"datetime",disabled:"disabled",mode:"mode"},ngContentSelectors:Ae,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,ce.gn)([on({inputs:["color","datetime","disabled","mode"]})],b),b})(),Ge=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},b.\u0275cmp=m.Xpm({type:b,selectors:[["ion-fab"]],inputs:{activated:"activated",edge:"edge",horizontal:"horizontal",vertical:"vertical"},ngContentSelectors:Ae,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,ce.gn)([on({inputs:["activated","edge","horizontal","vertical"],methods:["close"]})],b),b})(),ve=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement,ln(this,this.el,["ionFocus","ionBlur"])}};return b.\u0275fac=function(T){return new(T||b)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},b.\u0275cmp=m.Xpm({type:b,selectors:[["ion-fab-button"]],inputs:{activated:"activated",closeIcon:"closeIcon",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",show:"show",size:"size",target:"target",translucent:"translucent",type:"type"},ngContentSelectors:Ae,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,ce.gn)([on({inputs:["activated","closeIcon","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","show","size","target","translucent","type"]})],b),b})(),rt=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},b.\u0275cmp=m.Xpm({type:b,selectors:[["ion-fab-list"]],inputs:{activated:"activated",side:"side"},ngContentSelectors:Ae,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,ce.gn)([on({inputs:["activated","side"]})],b),b})(),he=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},b.\u0275cmp=m.Xpm({type:b,selectors:[["ion-grid"]],inputs:{fixed:"fixed"},ngContentSelectors:Ae,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,ce.gn)([on({inputs:["fixed"]})],b),b})(),Ce=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},b.\u0275cmp=m.Xpm({type:b,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:Ae,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,ce.gn)([on({inputs:["collapse","mode","translucent"]})],b),b})(),Tt=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},b.\u0275cmp=m.Xpm({type:b,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:Ae,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,ce.gn)([on({inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],b),b})(),It=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement,ln(this,this.el,["ionImgWillLoad","ionImgDidLoad","ionError"])}};return b.\u0275fac=function(T){return new(T||b)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},b.\u0275cmp=m.Xpm({type:b,selectors:[["ion-img"]],inputs:{alt:"alt",src:"src"},ngContentSelectors:Ae,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,ce.gn)([on({inputs:["alt","src"]})],b),b})(),He=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement,ln(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}};return b.\u0275fac=function(T){return new(T||b)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},b.\u0275cmp=m.Xpm({type:b,selectors:[["ion-input"]],inputs:{accept:"accept",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearOnEdit:"clearOnEdit",color:"color",counter:"counter",counterFormatter:"counterFormatter",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",errorText:"errorText",fill:"fill",helperText:"helperText",inputmode:"inputmode",label:"label",labelPlacement:"labelPlacement",legacy:"legacy",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",shape:"shape",size:"size",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:Ae,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,ce.gn)([on({inputs:["accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","color","counter","counterFormatter","debounce","disabled","enterkeyhint","errorText","fill","helperText","inputmode","label","labelPlacement","legacy","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","shape","size","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],b),b})(),Ct=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},b.\u0275cmp=m.Xpm({type:b,selectors:[["ion-item"]],inputs:{button:"button",color:"color",counter:"counter",counterFormatter:"counterFormatter",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",fill:"fill",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",target:"target",type:"type"},ngContentSelectors:Ae,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,ce.gn)([on({inputs:["button","color","counter","counterFormatter","detail","detailIcon","disabled","download","fill","href","lines","mode","rel","routerAnimation","routerDirection","shape","target","type"]})],b),b})(),Jn=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},b.\u0275cmp=m.Xpm({type:b,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},ngContentSelectors:Ae,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,ce.gn)([on({inputs:["color","mode","position"]})],b),b})(),Wn=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},b.\u0275cmp=m.Xpm({type:b,selectors:[["ion-list"]],inputs:{inset:"inset",lines:"lines",mode:"mode"},ngContentSelectors:Ae,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,ce.gn)([on({inputs:["inset","lines","mode"],methods:["closeSlidingItems"]})],b),b})(),Ur=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement,ln(this,this.el,["ionChange","ionInput","ionFocus","ionBlur","ionKnobMoveStart","ionKnobMoveEnd"])}};return b.\u0275fac=function(T){return new(T||b)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},b.\u0275cmp=m.Xpm({type:b,selectors:[["ion-range"]],inputs:{activeBarStart:"activeBarStart",color:"color",debounce:"debounce",disabled:"disabled",dualKnobs:"dualKnobs",labelPlacement:"labelPlacement",legacy:"legacy",max:"max",min:"min",mode:"mode",name:"name",pin:"pin",pinFormatter:"pinFormatter",snaps:"snaps",step:"step",ticks:"ticks",value:"value"},ngContentSelectors:Ae,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,ce.gn)([on({inputs:["activeBarStart","color","debounce","disabled","dualKnobs","labelPlacement","legacy","max","min","mode","name","pin","pinFormatter","snaps","step","ticks","value"]})],b),b})(),Qe=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},b.\u0275cmp=m.Xpm({type:b,selectors:[["ion-row"]],ngContentSelectors:Ae,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,ce.gn)([on({})],b),b})(),Vt=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement,ln(this,this.el,["ionInput","ionChange","ionCancel","ionClear","ionBlur","ionFocus"])}};return b.\u0275fac=function(T){return new(T||b)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},b.\u0275cmp=m.Xpm({type:b,selectors:[["ion-searchbar"]],inputs:{animated:"animated",autocomplete:"autocomplete",autocorrect:"autocorrect",cancelButtonIcon:"cancelButtonIcon",cancelButtonText:"cancelButtonText",clearIcon:"clearIcon",color:"color",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",mode:"mode",placeholder:"placeholder",searchIcon:"searchIcon",showCancelButton:"showCancelButton",showClearButton:"showClearButton",spellcheck:"spellcheck",type:"type",value:"value"},ngContentSelectors:Ae,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,ce.gn)([on({inputs:["animated","autocomplete","autocorrect","cancelButtonIcon","cancelButtonText","clearIcon","color","debounce","disabled","enterkeyhint","inputmode","mode","placeholder","searchIcon","showCancelButton","showClearButton","spellcheck","type","value"],methods:["setFocus","getInputElement"]})],b),b})(),Lt=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement,ln(this,this.el,["ionChange"])}};return b.\u0275fac=function(T){return new(T||b)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},b.\u0275cmp=m.Xpm({type:b,selectors:[["ion-segment"]],inputs:{color:"color",disabled:"disabled",mode:"mode",scrollable:"scrollable",selectOnFocus:"selectOnFocus",swipeGesture:"swipeGesture",value:"value"},ngContentSelectors:Ae,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,ce.gn)([on({inputs:["color","disabled","mode","scrollable","selectOnFocus","swipeGesture","value"]})],b),b})(),Xt=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},b.\u0275cmp=m.Xpm({type:b,selectors:[["ion-segment-button"]],inputs:{disabled:"disabled",layout:"layout",mode:"mode",type:"type",value:"value"},ngContentSelectors:Ae,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,ce.gn)([on({inputs:["disabled","layout","mode","type","value"]})],b),b})(),at=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement,ln(this,this.el,["ionChange","ionInput","ionBlur","ionFocus"])}};return b.\u0275fac=function(T){return new(T||b)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},b.\u0275cmp=m.Xpm({type:b,selectors:[["ion-textarea"]],inputs:{autoGrow:"autoGrow",autocapitalize:"autocapitalize",autofocus:"autofocus",clearOnEdit:"clearOnEdit",color:"color",cols:"cols",counter:"counter",counterFormatter:"counterFormatter",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",errorText:"errorText",fill:"fill",helperText:"helperText",inputmode:"inputmode",label:"label",labelPlacement:"labelPlacement",legacy:"legacy",maxlength:"maxlength",minlength:"minlength",mode:"mode",name:"name",placeholder:"placeholder",readonly:"readonly",required:"required",rows:"rows",shape:"shape",spellcheck:"spellcheck",value:"value",wrap:"wrap"},ngContentSelectors:Ae,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,ce.gn)([on({inputs:["autoGrow","autocapitalize","autofocus","clearOnEdit","color","cols","counter","counterFormatter","debounce","disabled","enterkeyhint","errorText","fill","helperText","inputmode","label","labelPlacement","legacy","maxlength","minlength","mode","name","placeholder","readonly","required","rows","shape","spellcheck","value","wrap"],methods:["setFocus","getInputElement"]})],b),b})(),tn=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},b.\u0275cmp=m.Xpm({type:b,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},ngContentSelectors:Ae,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,ce.gn)([on({inputs:["color","size"]})],b),b})(),Er=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},b.\u0275cmp=m.Xpm({type:b,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:Ae,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,ce.gn)([on({inputs:["color","mode"]})],b),b})(),Ir=(()=>{class b{get(T,W){const ge=vs();return ge?ge.get(T,W):null}getBoolean(T,W){const ge=vs();return!!ge&&ge.getBoolean(T,W)}getNumber(T,W){const ge=vs();return ge?ge.getNumber(T,W):0}}return b.\u0275fac=function(T){return new(T||b)},b.\u0275prov=m.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();const ei=new m.OlP("USERCONFIG"),vs=()=>{if(typeof window<"u"){const b=window.Ionic;if(null!=b&&b.config)return b.config}return null};let Oo=(()=>{class b{constructor(T,W){this.doc=T,this.backButton=new de.x,this.keyboardDidShow=new de.x,this.keyboardDidHide=new de.x,this.pause=new de.x,this.resume=new de.x,this.resize=new de.x,W.run(()=>{var ge;let M;this.win=T.defaultView,this.backButton.subscribeWithPriority=function(F,L){return this.subscribe(ne=>ne.register(F,vt=>W.run(()=>L(vt))))},Ss(this.pause,T,"pause"),Ss(this.resume,T,"resume"),Ss(this.backButton,T,"ionBackButton"),Ss(this.resize,this.win,"resize"),Ss(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),Ss(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise(F=>{M=F}),null!==(ge=this.win)&&void 0!==ge&&ge.cordova?T.addEventListener("deviceready",()=>{M("cordova")},{once:!0}):M("dom")})}is(T){return(0,ke.a)(this.win,T)}platforms(){return(0,ke.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(T){return _i(this.win.location.href,T)}isLandscape(){return!this.isPortrait()}isPortrait(){var T,W;return null===(T=(W=this.win).matchMedia)||void 0===T?void 0:T.call(W,"(orientation: portrait)").matches}testUserAgent(T){const W=this.win.navigator;return!!(null!=W&&W.userAgent&&W.userAgent.indexOf(T)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return b.\u0275fac=function(T){return new(T||b)(m.LFG(wt.K0),m.LFG(m.R0b))},b.\u0275prov=m.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();const _i=(b,q)=>{q=q.replace(/[[\]\\]/g,"\\$&");const W=new RegExp("[\\?&]"+q+"=([^&#]*)").exec(b);return W?decodeURIComponent(W[1].replace(/\+/g," ")):null},Ss=(b,q,T)=>{q&&q.addEventListener(T,W=>{b.next(null!=W?W.detail:void 0)})};let Hi=(()=>{class b{constructor(T,W,ge,M){this.location=W,this.serializer=ge,this.router=M,this.direction=ua,this.animated=Yi,this.guessDirection="forward",this.lastNavId=-1,M&&M.events.subscribe(F=>{if(F instanceof Y.OD){const L=F.restoredState?F.restoredState.navigationId:F.id;this.guessDirection=L<this.lastNavId?"back":"forward",this.guessAnimation=F.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?F.id:L}}),T.backButton.subscribeWithPriority(0,F=>{this.pop(),F()})}navigateForward(T,W={}){return this.setDirection("forward",W.animated,W.animationDirection,W.animation),this.navigate(T,W)}navigateBack(T,W={}){return this.setDirection("back",W.animated,W.animationDirection,W.animation),this.navigate(T,W)}navigateRoot(T,W={}){return this.setDirection("root",W.animated,W.animationDirection,W.animation),this.navigate(T,W)}back(T={animated:!0,animationDirection:"back"}){return this.setDirection("back",T.animated,T.animationDirection,T.animation),this.location.back()}pop(){var T=this;return(0,_.Z)(function*(){let W=T.topOutlet;for(;W&&!(yield W.pop());)W=W.parentOutlet})()}setDirection(T,W,ge,M){this.direction=T,this.animated=jo(T,W,ge),this.animationBuilder=M}setTopOutlet(T){this.topOutlet=T}consumeTransition(){let W,T="root";const ge=this.animationBuilder;return"auto"===this.direction?(T=this.guessDirection,W=this.guessAnimation):(W=this.animated,T=this.direction),this.direction=ua,this.animated=Yi,this.animationBuilder=void 0,{direction:T,animation:W,animationBuilder:ge}}navigate(T,W){if(Array.isArray(T))return this.router.navigate(T,W);{const ge=this.serializer.parse(T.toString());return void 0!==W.queryParams&&(ge.queryParams={...W.queryParams}),void 0!==W.fragment&&(ge.fragment=W.fragment),this.router.navigateByUrl(ge,W)}}}return b.\u0275fac=function(T){return new(T||b)(m.LFG(Oo),m.LFG(wt.Ye),m.LFG(Y.Hx),m.LFG(Y.F0,8))},b.\u0275prov=m.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();const jo=(b,q,T)=>{if(!1!==q){if(void 0!==T)return T;if("forward"===b||"back"===b)return b;if("root"===b&&!0===q)return"forward"}},ua="auto",Yi=void 0;class oo{constructor(q={}){this.data=q}get(q){return this.data[q]}}let Os=(()=>{class b{constructor(){this.zone=(0,m.f3M)(m.R0b),this.applicationRef=(0,m.f3M)(m.z2F)}create(T,W,ge){return new Ta(T,W,this.applicationRef,this.zone,ge)}}return b.\u0275fac=function(T){return new(T||b)},b.\u0275prov=m.Yz7({token:b,factory:b.\u0275fac}),b})();class Ta{constructor(q,T,W,ge,M){this.environmentInjector=q,this.injector=T,this.applicationRef=W,this.zone=ge,this.elementReferenceKey=M,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(q,T,W,ge){return this.zone.run(()=>new Promise(M=>{const F={...W};void 0!==this.elementReferenceKey&&(F[this.elementReferenceKey]=q),M(ko(this.zone,this.environmentInjector,this.injector,this.applicationRef,this.elRefMap,this.elEventsMap,q,T,F,ge))}))}removeViewFromDom(q,T){return this.zone.run(()=>new Promise(W=>{const ge=this.elRefMap.get(T);if(ge){ge.destroy(),this.elRefMap.delete(T);const M=this.elEventsMap.get(T);M&&(M(),this.elEventsMap.delete(T))}W()}))}}const ko=(b,q,T,W,ge,M,F,L,ne,vt)=>{const Tn=m.zs3.create({providers:Qa(ne),parent:T}),$r=(0,m.LMc)(L,{environmentInjector:q,elementInjector:Tn}),ii=$r.instance,Qi=$r.location.nativeElement;if(ne&&Object.assign(ii,ne),vt)for(const Ao of vt)Qi.classList.add(Ao);const hs=ao(b,ii,Qi);return F.appendChild(Qi),W.attachView($r.hostView),ge.set(Qi,$r),M.set(Qi,hs),Qi},As=[je.L,je.a,je.b,je.c,je.d],ao=(b,q,T)=>b.run(()=>{const W=As.filter(ge=>"function"==typeof q[ge]).map(ge=>{const M=F=>q[ge](F.detail);return T.addEventListener(ge,M),()=>T.removeEventListener(ge,M)});return()=>W.forEach(ge=>ge())}),da=new m.OlP("NavParamsToken"),Qa=b=>[{provide:da,useValue:b},{provide:oo,useFactory:lo,deps:[da]}],lo=b=>new oo(b),ha=(b,q)=>((b=b.filter(T=>T.stackId!==q.stackId)).push(q),b),Ua=(b,q)=>{const T=b.createUrlTree(["."],{relativeTo:q});return b.serializeUrl(T)},co=(b,q)=>{if(!b)return;const T=ti(q);for(let W=0;W<T.length;W++){if(W>=b.length)return T[W];if(T[W]!==b[W])return}},ti=b=>b.split("/").map(q=>q.trim()).filter(q=>""!==q),ks=b=>{b&&(b.ref.destroy(),b.unlistenEvents())};class uo{constructor(q,T,W,ge,M,F){this.containerEl=T,this.router=W,this.navCtrl=ge,this.zone=M,this.location=F,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==q?ti(q):void 0}createView(q,T){var W;const ge=Ua(this.router,T),M=null==q||null===(W=q.location)||void 0===W?void 0:W.nativeElement,F=ao(this.zone,q.instance,M);return{id:this.nextId++,stackId:co(this.tabsPrefix,ge),unlistenEvents:F,element:M,ref:q,url:ge}}getExistingView(q){const T=Ua(this.router,q),W=this.views.find(ge=>ge.url===T);return W&&W.ref.changeDetectorRef.reattach(),W}setActive(q){var T,W,ge;const M=this.navCtrl.consumeTransition();let{direction:F,animation:L,animationBuilder:ne}=M;const vt=this.activeView,Tn=((b,q)=>!q||b.stackId!==q.stackId)(q,vt);Tn&&(F="back",L=void 0);const $r=this.views.slice();let ii;const Qi=this.router;Qi.getCurrentNavigation?ii=Qi.getCurrentNavigation():null!==(T=Qi.navigations)&&void 0!==T&&T.value&&(ii=Qi.navigations.value),null!==(W=ii)&&void 0!==W&&null!==(ge=W.extras)&&void 0!==ge&&ge.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const hs=this.views.includes(q),Ao=this.insertView(q,F);hs||q.ref.changeDetectorRef.detectChanges();const xi=q.animationBuilder;return void 0===ne&&"back"===F&&!Tn&&void 0!==xi&&(ne=xi),vt&&(vt.animationBuilder=ne),this.zone.runOutsideAngular(()=>this.wait(()=>(vt&&vt.ref.changeDetectorRef.detach(),q.ref.changeDetectorRef.reattach(),this.transition(q,vt,L,this.canGoBack(1),!1,ne).then(()=>ho(q,Ao,$r,this.location,this.zone)).then(()=>({enteringView:q,direction:F,animation:L,tabSwitch:Tn})))))}canGoBack(q,T=this.getActiveStackId()){return this.getStack(T).length>q}pop(q,T=this.getActiveStackId()){return this.zone.run(()=>{const W=this.getStack(T);if(W.length<=q)return Promise.resolve(!1);const ge=W[W.length-q-1];let M=ge.url;const F=ge.savedData;if(F){var L,ne;const Tn=F.get("primary");null!=Tn&&null!==(L=Tn.route)&&void 0!==L&&null!==(ne=L._routerState)&&void 0!==ne&&ne.snapshot.url&&(M=Tn.route._routerState.snapshot.url)}const{animationBuilder:vt}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(M,{...ge.savedExtras,animation:vt}).then(()=>!0)})}startBackTransition(){const q=this.activeView;if(q){const T=this.getStack(q.stackId),W=T[T.length-2],ge=W.animationBuilder;return this.wait(()=>this.transition(W,q,"back",this.canGoBack(2),!0,ge))}return Promise.resolve()}endBackTransition(q){q?(this.skipTransition=!0,this.pop(1)):this.activeView&&fa(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(q){const T=this.getStack(q);return T.length>0?T[T.length-1]:void 0}getRootUrl(q){const T=this.getStack(q);return T.length>0?T[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(ks),this.activeView=void 0,this.views=[]}getStack(q){return this.views.filter(T=>T.stackId===q)}insertView(q,T){return this.activeView=q,this.views=((b,q,T)=>"root"===T?ha(b,q):"forward"===T?((b,q)=>(b.indexOf(q)>=0?b=b.filter(W=>W.stackId!==q.stackId||W.id<=q.id):b.push(q),b))(b,q):((b,q)=>b.indexOf(q)>=0?b.filter(W=>W.stackId!==q.stackId||W.id<=q.id):ha(b,q))(b,q))(this.views,q,T),this.views.slice()}transition(q,T,W,ge,M,F){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(T===q)return Promise.resolve(!1);const L=q?q.element:void 0,ne=T?T.element:void 0,vt=this.containerEl;return L&&L!==ne&&(L.classList.add("ion-page"),L.classList.add("ion-page-invisible"),L.parentElement!==vt&&vt.appendChild(L),vt.commit)?vt.commit(L,ne,{duration:void 0===W?0:void 0,direction:W,showGoBack:ge,progressAnimation:M,animationBuilder:F}):Promise.resolve(!1)}wait(q){var T=this;return(0,_.Z)(function*(){void 0!==T.runningTask&&(yield T.runningTask,T.runningTask=void 0);const W=T.runningTask=q();return W.finally(()=>T.runningTask=void 0),W})()}}const ho=(b,q,T,W,ge)=>"function"==typeof requestAnimationFrame?new Promise(M=>{requestAnimationFrame(()=>{fa(b,q,T,W,ge),M()})}):Promise.resolve(),fa=(b,q,T,W,ge)=>{ge.run(()=>T.filter(M=>!q.includes(M)).forEach(ks)),q.forEach(M=>{const L=W.path().split("?")[0].split("#")[0];if(M!==b&&M.url!==L){const ne=M.element;ne.setAttribute("aria-hidden","true"),ne.classList.add("ion-page-hidden"),M.ref.changeDetectorRef.detach()}})};let fo=(()=>{class b{constructor(T,W,ge,M,F,L,ne,vt){this.parentOutlet=vt,this.activated=null,this.activatedView=null,this._activatedRoute=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new _t.X(null),this.stackEvents=new m.vpe,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.parentContexts=(0,m.f3M)(Y.y6),this.location=(0,m.f3M)(m.s_b),this.environmentInjector=(0,m.f3M)(m.lqb),this.config=(0,m.f3M)(Ir),this.navCtrl=(0,m.f3M)(Hi),this.nativeEl=M.nativeElement,this.name=T||Y.eC,this.tabsPrefix="true"===W?Ua(F,ne):void 0,this.stackCtrl=new uo(this.tabsPrefix,this.nativeEl,F,this.navCtrl,L,ge),this.parentContexts.onChildOutletCreated(this.name,this)}set animation(T){this.nativeEl.animation=T}set animated(T){this.nativeEl.animated=T}set swipeGesture(T){this._swipeGesture=T,this.nativeEl.swipeHandler=T?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:W=>this.stackCtrl.endBackTransition(W)}:void 0}ngOnDestroy(){this.stackCtrl.destroy()}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(!this.activated){const T=this.getContext();null!=T&&T.route&&this.activateWith(T.route,T.injector)}new Promise(T=>(0,Ne.c)(this.nativeEl,T)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(T,W){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const W=this.getContext();this.activatedView.savedData=new Map(W.children.contexts);const ge=this.activatedView.savedData.get("primary");if(ge&&W.route&&(ge.route={...W.route}),this.activatedView.savedExtras={},W.route){const M=W.route.snapshot;this.activatedView.savedExtras.queryParams=M.queryParams,this.activatedView.savedExtras.fragment=M.fragment}}const T=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(T)}}activateWith(T,W){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=T;let ge,M=this.stackCtrl.getExistingView(T);if(M){ge=this.activated=M.ref;const L=M.savedData;L&&(this.getContext().children.contexts=L),this.updateActivatedRouteProxy(ge.instance,T)}else{var F;const L=T._futureSnapshot,ne=this.parentContexts.getOrCreateContext(this.name).children,vt=new _t.X(null),Tn=this.createActivatedRouteProxy(vt,T),$r=new _s(Tn,ne,this.location.injector),ii=null!==(F=L.routeConfig.component)&&void 0!==F?F:L.component;ge=this.activated=this.location.createComponent(ii,{index:this.location.length,injector:$r,environmentInjector:null!=W?W:this.environmentInjector}),vt.next(ge.instance),M=this.stackCtrl.createView(this.activated,T),this.proxyMap.set(ge.instance,Tn),this.currentActivatedRoute$.next({component:ge.instance,activatedRoute:T})}this.activatedView=M,this.navCtrl.setTopOutlet(this),this.stackCtrl.setActive(M).then(L=>{this.activateEvents.emit(ge.instance),this.stackEvents.emit(L)})}canGoBack(T=1,W){return this.stackCtrl.canGoBack(T,W)}pop(T=1,W){return this.stackCtrl.pop(T,W)}getLastUrl(T){const W=this.stackCtrl.getLastUrl(T);return W?W.url:void 0}getLastRouteView(T){return this.stackCtrl.getLastUrl(T)}getRootView(T){return this.stackCtrl.getRootUrl(T)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(T,W){const ge=new Y.gz;return ge._futureSnapshot=W._futureSnapshot,ge._routerState=W._routerState,ge.snapshot=W.snapshot,ge.outlet=W.outlet,ge.component=W.component,ge._paramMap=this.proxyObservable(T,"paramMap"),ge._queryParamMap=this.proxyObservable(T,"queryParamMap"),ge.url=this.proxyObservable(T,"url"),ge.params=this.proxyObservable(T,"params"),ge.queryParams=this.proxyObservable(T,"queryParams"),ge.fragment=this.proxyObservable(T,"fragment"),ge.data=this.proxyObservable(T,"data"),ge}proxyObservable(T,W){return T.pipe((0,Ve.h)(ge=>!!ge),(0,Be.w)(ge=>this.currentActivatedRoute$.pipe((0,Ve.h)(M=>null!==M&&M.component===ge),(0,Be.w)(M=>M&&M.activatedRoute[W]),(0,ft.x)())))}updateActivatedRouteProxy(T,W){const ge=this.proxyMap.get(T);if(!ge)throw new Error("Could not find activated route proxy for view");ge._futureSnapshot=W._futureSnapshot,ge._routerState=W._routerState,ge.snapshot=W.snapshot,ge.outlet=W.outlet,ge.component=W.component,this.currentActivatedRoute$.next({component:T,activatedRoute:W})}}return b.\u0275fac=function(T){return new(T||b)(m.$8M("name"),m.$8M("tabs"),m.Y36(wt.Ye),m.Y36(m.SBq),m.Y36(Y.F0),m.Y36(m.R0b),m.Y36(Y.gz),m.Y36(b,12))},b.\u0275dir=m.lG2({type:b,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",mode:"mode",swipeGesture:"swipeGesture"},outputs:{stackEvents:"stackEvents",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),b})();class _s{constructor(q,T,W){this.route=q,this.childContexts=T,this.parent=W}get(q,T){return q===Y.gz?this.route:q===Y.y6?this.childContexts:this.parent.get(q,T)}}let No=(()=>{class b{constructor(T,W,ge){this.routerOutlet=T,this.navCtrl=W,this.config=ge}onClick(T){var W;const ge=this.defaultHref||this.config.get("backButtonDefaultHref");null!==(W=this.routerOutlet)&&void 0!==W&&W.canGoBack()?(this.navCtrl.setDirection("back",void 0,void 0,this.routerAnimation),this.routerOutlet.pop(),T.preventDefault()):null!=ge&&(this.navCtrl.navigateBack(ge,{animation:this.routerAnimation}),T.preventDefault())}}return b.\u0275fac=function(T){return new(T||b)(m.Y36(fo,8),m.Y36(Hi),m.Y36(Ir))},b.\u0275dir=m.lG2({type:b,selectors:[["ion-back-button"]],hostBindings:function(T,W){1&T&&m.NdJ("click",function(M){return W.onClick(M)})},inputs:{defaultHref:"defaultHref",routerAnimation:"routerAnimation"}}),b})(),xs=(()=>{class b{constructor(T,W,ge,M,F){this.locationStrategy=T,this.navCtrl=W,this.elementRef=ge,this.router=M,this.routerLink=F,this.routerDirection="forward"}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var T;if(null!==(T=this.routerLink)&&void 0!==T&&T.urlTree){const W=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=W}}onClick(T){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation),T.preventDefault()}}return b.\u0275fac=function(T){return new(T||b)(m.Y36(wt.S$),m.Y36(Hi),m.Y36(m.SBq),m.Y36(Y.F0),m.Y36(Y.rH,8))},b.\u0275dir=m.lG2({type:b,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(T,W){1&T&&m.NdJ("click",function(M){return W.onClick(M)})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[m.TTD]}),b})(),Zi=(()=>{let b=class{constructor(T,W,ge){this.z=ge,this.isCmpOpen=!1,this.el=W.nativeElement,this.el.addEventListener("willPresent",()=>{this.isCmpOpen=!0,T.detectChanges()}),this.el.addEventListener("didDismiss",()=>{this.isCmpOpen=!1,T.detectChanges()}),ln(this,this.el,["ionModalDidPresent","ionModalWillPresent","ionModalWillDismiss","ionModalDidDismiss","ionBreakpointDidChange","didPresent","willPresent","willDismiss","didDismiss"])}};return b.\u0275fac=function(T){return new(T||b)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},b.\u0275cmp=m.Xpm({type:b,selectors:[["ion-modal"]],contentQueries:function(T,W,ge){if(1&T&&m.Suo(ge,m.Rgc,5),2&T){let M;m.iGM(M=m.CRH())&&(W.template=M.first)}},inputs:{animated:"animated",keepContentsMounted:"keepContentsMounted",backdropBreakpoint:"backdropBreakpoint",backdropDismiss:"backdropDismiss",breakpoints:"breakpoints",canDismiss:"canDismiss",cssClass:"cssClass",enterAnimation:"enterAnimation",event:"event",handle:"handle",handleBehavior:"handleBehavior",initialBreakpoint:"initialBreakpoint",isOpen:"isOpen",keyboardClose:"keyboardClose",leaveAnimation:"leaveAnimation",mode:"mode",presentingElement:"presentingElement",showBackdrop:"showBackdrop",translucent:"translucent",trigger:"trigger"},decls:1,vars:1,consts:[["class","ion-delegate-host ion-page",4,"ngIf"],[1,"ion-delegate-host","ion-page"],[3,"ngTemplateOutlet"]],template:function(T,W){1&T&&m.YNc(0,Yn,2,1,"div",0),2&T&&m.Q6J("ngIf",W.isCmpOpen||W.keepContentsMounted)},dependencies:[wt.O5,wt.tP],encapsulation:2,changeDetection:0}),b=(0,ce.gn)([on({inputs:["animated","keepContentsMounted","backdropBreakpoint","backdropDismiss","breakpoints","canDismiss","cssClass","enterAnimation","event","handle","handleBehavior","initialBreakpoint","isOpen","keyboardClose","leaveAnimation","mode","presentingElement","showBackdrop","translucent","trigger"],methods:["present","dismiss","onDidDismiss","onWillDismiss","setCurrentBreakpoint","getCurrentBreakpoint"]})],b),b})();class Pi{constructor(q){this.ctrl=q}create(q){return this.ctrl.create(q||{})}dismiss(q,T,W){return this.ctrl.dismiss(q,T,W)}getTop(){return this.ctrl.getTop()}}let go=(()=>{class b extends Pi{constructor(){super(Dt.a)}}return b.\u0275fac=function(T){return new(T||b)},b.\u0275prov=m.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})(),as=(()=>{class b extends Pi{constructor(){super(Dt.m),this.angularDelegate=(0,m.f3M)(Os),this.injector=(0,m.f3M)(m.zs3),this.environmentInjector=(0,m.f3M)(m.lqb)}create(T){return super.create({...T,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"modal")})}}return b.\u0275fac=function(T){return new(T||b)},b.\u0275prov=m.Yz7({token:b,factory:b.\u0275fac}),b})(),Xi=(()=>{class b extends Pi{constructor(){super(Dt.c),this.angularDelegate=(0,m.f3M)(Os),this.injector=(0,m.f3M)(m.zs3),this.environmentInjector=(0,m.f3M)(m.lqb)}create(T){return super.create({...T,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"popover")})}}return b.\u0275fac=function(T){return new(T||b)},b.\u0275prov=m.Yz7({token:b,factory:b.\u0275fac}),b})(),Do=(()=>{class b extends Pi{constructor(){super(Dt.t)}}return b.\u0275fac=function(T){return new(T||b)},b.\u0275prov=m.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();class sa{shouldDetach(q){return!1}shouldAttach(q){return!1}store(q,T){}retrieve(q){return null}shouldReuseRoute(q,T){if(q.routeConfig!==T.routeConfig)return!1;const W=q.params,ge=T.params,M=Object.keys(W),F=Object.keys(ge);if(M.length!==F.length)return!1;for(const L of M)if(ge[L]!==W[L])return!1;return!0}}const Tr=(b,q,T)=>()=>{if(q.defaultView&&typeof window<"u"){(0,De.s)({...b,_zoneGate:M=>T.run(M)});const ge="__zone_symbol__addEventListener"in q.body?"__zone_symbol__addEventListener":"addEventListener";return function nn(){var b=[];if(typeof window<"u"){var q=window;(!q.customElements||q.Element&&(!q.Element.prototype.closest||!q.Element.prototype.matches||!q.Element.prototype.remove||!q.Element.prototype.getRootNode))&&b.push(j.e(6748).then(j.t.bind(j,723,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||q.NodeList&&!q.NodeList.prototype.forEach||!q.fetch||!function(){try{var W=new URL("b","http://a");return W.pathname="c%20d","http://a/c%20d"===W.href&&W.searchParams}catch{return!1}}()||typeof WeakMap>"u")&&b.push(j.e(2214).then(j.t.bind(j,4144,23)))}return Promise.all(b)}().then(()=>((b,q)=>typeof window>"u"?Promise.resolve():(0,yt.p)().then(()=>(zt(),(0,yt.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"layout":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"revealContentToScreenReader":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]]]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[1028],"layout":[1],"type":[1],"value":[1],"checked":[32],"setFocus":[64]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1025],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]]]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["ion-chip",[[1,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-datetime-button",[[33,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-input",[[34,"ion-input",{"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"counter":[4],"counterFormatter":[16],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"errorText":[1,"error-text"],"fill":[1],"inputmode":[1],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"shape":[1],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"activated":[32]}]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-textarea",[[34,"ion-textarea",{"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"fill":[1],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"counter":[4],"counterFormatter":[16],"errorText":[1,"error-text"],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"shape":[1],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[513],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]]]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"labelPlacement":[1,"label-placement"],"legacy":[4],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"counterFormatter":[16],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionInput","handleIonInput"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[33,"ion-note",{"color":[513]}]]],["ion-select_3",[[33,"ion-select",{"cancelText":[1,"cancel-text"],"color":[513],"compareWith":[1,"compare-with"],"disabled":[4],"fill":[1],"interface":[1],"interfaceOptions":[8,"interface-options"],"justify":[1],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"multiple":[4],"name":[1],"okText":[1,"ok-text"],"placeholder":[1],"selectedText":[1,"selected-text"],"shape":[1],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]}]]],["ion-picker-internal",[[33,"ion-picker-internal",{"exitInputMode":[64]},[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"highlightedDates":[16],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isPresented":[32],"isTimePopoverOpen":[32],"confirm":[64],"reset":[64],"cancel":[64]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"],[9,"resize","onResize"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["ion-picker-column-internal",[[33,"ion-picker-column-internal",{"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64]}]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"justify":[1],"legacy":[4]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]]]'),q))))(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:cn,jmp:M=>T.runOutsideAngular(M),ael(M,F,L,ne){M[ge](F,L,ne)},rel(M,F,L,ne){M.removeEventListener(F,L,ne)}}))}};let oa=(()=>{class b{static forRoot(T){return{ngModule:b,providers:[{provide:ei,useValue:T},{provide:m.ip1,useFactory:Tr,multi:!0,deps:[ei,wt.K0,m.R0b]}]}}}return b.\u0275fac=function(T){return new(T||b)},b.\u0275mod=m.oAB({type:b}),b.\u0275inj=m.cJS({providers:[Os,as,Xi],imports:[wt.ez]}),b})()},259:(In,Et,j)=>{"use strict";j.d(Et,{C6:()=>_.getApps,Mq:()=>_.getApp,ZR:()=>_.FirebaseError});var _=j(6881);(0,_.registerVersion)("firebase","9.21.0","app")},9260:(In,Et,j)=>{"use strict";j.d(Et,{Z:()=>_.Z});var _=j(3942);_.Z.registerVersion("firebase","9.21.0","app-compat")},3042:(In,Et,j)=>{"use strict";j.r(Et);var _=j(5861),m=j(3942),ee=j(2090),ce=j(6881),$e=j(655),Se=j(1877),_e=j(4859);const ze={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Ee_EMAIL_SIGNIN="EMAIL_SIGNIN",Ee_PASSWORD_RESET="PASSWORD_RESET",Ee_RECOVER_EMAIL="RECOVER_EMAIL",Ee_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",Ee_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",Ee_VERIFY_EMAIL="VERIFY_EMAIL";const ct=function Ke(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},At=function We(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},xe=new ee.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),de=new Se.Yd("@firebase/auth");function Y(C,...g){de.logLevel<=Se.in.ERROR&&de.error(`Auth (${ce.SDK_VERSION}): ${C}`,...g)}function it(C,...g){throw ke(C,...g)}function et(C,...g){return ke(C,...g)}function Pt(C,g,y){const A=Object.assign(Object.assign({},At()),{[g]:y});return new ee.LL("auth","Firebase",A).create(g,{appName:C.name})}function Ue(C,g,y){if(!(g instanceof y))throw y.name!==g.constructor.name&&it(C,"argument-error"),Pt(C,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ke(C,...g){if("string"!=typeof C){const y=g[0],A=[...g.slice(1)];return A[0]&&(A[0].appName=C.name),C._errorFactory.create(y,...A)}return xe.create(C,...g)}function Ne(C,g,...y){if(!C)throw ke(g,...y)}function De(C){const g="INTERNAL ASSERTION FAILED: "+C;throw Y(g),new Error(g)}function je(C,g){C||De(g)}function gt(){var C;return typeof self<"u"&&(null===(C=self.location)||void 0===C?void 0:C.href)||""}function Dt(){return"http:"===ht()||"https:"===ht()}function ht(){var C;return typeof self<"u"&&(null===(C=self.location)||void 0===C?void 0:C.protocol)||null}class Fe{constructor(g,y){this.shortDelay=g,this.longDelay=y,je(y>g,"Short delay should be less than long delay!"),this.isMobile=(0,ee.uI)()||(0,ee.b$)()}get(){return function Mt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Dt()||(0,ee.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ve(C,g){je(C.emulator,"Emulator should always be set here");const{url:y}=C.emulator;return g?`${y}${g.startsWith("/")?g.slice(1):g}`:y}class Be{static initialize(g,y,A){this.fetchImpl=g,y&&(this.headersImpl=y),A&&(this.responseImpl=A)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void De("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void De("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void De("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ft={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},wt=new Fe(3e4,6e4);function nn(C,g){return C.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:C.tenantId}):g}function zt(C,g,y,A){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,_.Z)(function*(C,g,y,A,K={}){return kt(C,K,(0,_.Z)(function*(){let oe={},st={};A&&("GET"===g?st=A:oe={body:JSON.stringify(A)});const bt=(0,ee.xO)(Object.assign({key:C.config.apiKey},st)).slice(1),rn=yield C._getAdditionalHeaders();return rn["Content-Type"]="application/json",C.languageCode&&(rn["X-Firebase-Locale"]=C.languageCode),Be.fetch()(On(C,C.config.apiHost,y,bt),Object.assign({method:g,headers:rn,referrerPolicy:"no-referrer"},oe))}))})).apply(this,arguments)}function kt(C,g,y){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,_.Z)(function*(C,g,y){C._canInitEmulator=!1;const A=Object.assign(Object.assign({},ft),g);try{const K=new Yn(C),oe=yield Promise.race([y(),K.promise]);K.clearNetworkTimeout();const st=yield oe.json();if("needConfirmation"in st)throw xn(C,"account-exists-with-different-credential",st);if(oe.ok&&!("errorMessage"in st))return st;{const bt=oe.ok?st.errorMessage:st.error.message,[rn,Bn]=bt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===rn)throw xn(C,"credential-already-in-use",st);if("EMAIL_EXISTS"===rn)throw xn(C,"email-already-in-use",st);if("USER_DISABLED"===rn)throw xn(C,"user-disabled",st);const or=A[rn]||rn.toLowerCase().replace(/[_\s]+/g,"-");if(Bn)throw Pt(C,or,Bn);it(C,or)}}catch(K){if(K instanceof ee.ZR)throw K;it(C,"network-request-failed",{message:String(K)})}})).apply(this,arguments)}function St(C,g,y,A){return gn.apply(this,arguments)}function gn(){return(gn=(0,_.Z)(function*(C,g,y,A,K={}){const oe=yield zt(C,g,y,A,K);return"mfaPendingCredential"in oe&&it(C,"multi-factor-auth-required",{_serverResponse:oe}),oe})).apply(this,arguments)}function On(C,g,y,A){const K=`${g}${y}?${A}`;return C.config.emulator?Ve(C.config,K):`${C.config.apiScheme}://${K}`}class Yn{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((y,A)=>{this.timer=setTimeout(()=>A(et(this.auth,"network-request-failed")),wt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function xn(C,g,y){const A={appName:C.name};y.email&&(A.email=y.email),y.phoneNumber&&(A.phoneNumber=y.phoneNumber);const K=et(C,g,A);return K.customData._tokenResponse=y,K}function Cn(){return(Cn=(0,_.Z)(function*(C,g){return zt(C,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function _r(){return(_r=(0,_.Z)(function*(C,g){return zt(C,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function bn(){return(bn=(0,_.Z)(function*(C,g){return zt(C,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function zn(C){if(C)try{const g=new Date(Number(C));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function di(){return(di=(0,_.Z)(function*(C,g=!1){const y=(0,ee.m9)(C),A=yield y.getIdToken(g),K=Gn(A);Ne(K&&K.exp&&K.auth_time&&K.iat,y.auth,"internal-error");const oe="object"==typeof K.firebase?K.firebase:void 0,st=null==oe?void 0:oe.sign_in_provider;return{claims:K,token:A,authTime:zn(wi(K.auth_time)),issuedAtTime:zn(wi(K.iat)),expirationTime:zn(wi(K.exp)),signInProvider:st||null,signInSecondFactor:(null==oe?void 0:oe.sign_in_second_factor)||null}})).apply(this,arguments)}function wi(C){return 1e3*Number(C)}function Gn(C){const[g,y,A]=C.split(".");if(void 0===g||void 0===y||void 0===A)return Y("JWT malformed, contained fewer than 3 sections"),null;try{const K=(0,ee.tV)(y);return K?JSON.parse(K):(Y("Failed to decode base64 JWT payload"),null)}catch(K){return Y("Caught error parsing JWT payload as JSON",null==K?void 0:K.toString()),null}}function ln(C,g){return yn.apply(this,arguments)}function yn(){return(yn=(0,_.Z)(function*(C,g,y=!1){if(y)return g;try{return yield g}catch(A){throw A instanceof ee.ZR&&function on({code:C}){return"auth/user-disabled"===C||"auth/user-token-expired"===C}(A)&&C.auth.currentUser===C&&(yield C.auth.signOut()),A}})).apply(this,arguments)}class Jr{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var y;if(g){const A=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),A}{this.errorBackoff=3e4;const K=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,K)}}schedule(g=!1){var y=this;if(!this.isRunning)return;const A=this.getInterval(g);this.timerId=setTimeout((0,_.Z)(function*(){yield y.iteration()}),A)}iteration(){var g=this;return(0,_.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===(null==y?void 0:y.code)&&g.schedule(!0))}g.schedule()})()}}class Dr{constructor(g,y){this.createdAt=g,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=zn(this.lastLoginAt),this.creationTime=zn(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Qr(C){return zr.apply(this,arguments)}function zr(){return zr=(0,_.Z)(function*(C){var g;const y=C.auth,A=yield C.getIdToken(),K=yield ln(C,function tr(C,g){return bn.apply(this,arguments)}(y,{idToken:A}));Ne(null==K?void 0:K.users.length,y,"internal-error");const oe=K.users[0];C._notifyReloadListener(oe);const st=null!==(g=oe.providerUserInfo)&&void 0!==g&&g.length?function ur(C){return C.map(g=>{var{providerId:y}=g,A=(0,$e._T)(g,["providerId"]);return{providerId:y,uid:A.rawId||"",displayName:A.displayName||null,email:A.email||null,phoneNumber:A.phoneNumber||null,photoURL:A.photoUrl||null}})}(oe.providerUserInfo):[],bt=function gi(C,g){return[...C.filter(A=>!g.some(K=>K.providerId===A.providerId)),...g]}(C.providerData,st),or=!!C.isAnonymous&&!(C.email&&oe.passwordHash||null!=bt&&bt.length),ar={uid:oe.localId,displayName:oe.displayName||null,photoURL:oe.photoUrl||null,email:oe.email||null,emailVerified:oe.emailVerified||!1,phoneNumber:oe.phoneNumber||null,tenantId:oe.tenantId||null,providerData:bt,metadata:new Dr(oe.createdAt,oe.lastLoginAt),isAnonymous:or};Object.assign(C,ar)}),zr.apply(this,arguments)}function Lr(){return(Lr=(0,_.Z)(function*(C){const g=(0,ee.m9)(C);yield Qr(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function yr(){return(yr=(0,_.Z)(function*(C,g){const y=yield kt(C,{},(0,_.Z)(function*(){const A=(0,ee.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:K,apiKey:oe}=C.config,st=On(C,K,"/v1/token",`key=${oe}`),bt=yield C._getAdditionalHeaders();return bt["Content-Type"]="application/x-www-form-urlencoded",Be.fetch()(st,{method:"POST",headers:bt,body:A})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class Ai{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){Ne(g.idToken,"internal-error"),Ne(typeof g.idToken<"u","internal-error"),Ne(typeof g.refreshToken<"u","internal-error");const y="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function qn(C){const g=Gn(C);return Ne(g,"internal-error"),Ne(typeof g.exp<"u","internal-error"),Ne(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,y)}getToken(g,y=!1){var A=this;return(0,_.Z)(function*(){return Ne(!A.accessToken||A.refreshToken,g,"user-token-expired"),y||!A.accessToken||A.isExpired?A.refreshToken?(yield A.refresh(g,A.refreshToken),A.accessToken):null:A.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,y){var A=this;return(0,_.Z)(function*(){const{accessToken:K,refreshToken:oe,expiresIn:st}=yield function lr(C,g){return yr.apply(this,arguments)}(g,y);A.updateTokensAndExpiration(K,oe,Number(st))})()}updateTokensAndExpiration(g,y,A){this.refreshToken=y||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*A}static fromJSON(g,y){const{refreshToken:A,accessToken:K,expirationTime:oe}=y,st=new Ai;return A&&(Ne("string"==typeof A,"internal-error",{appName:g}),st.refreshToken=A),K&&(Ne("string"==typeof K,"internal-error",{appName:g}),st.accessToken=K),oe&&(Ne("number"==typeof oe,"internal-error",{appName:g}),st.expirationTime=oe),st}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Ai,this.toJSON())}_performRefresh(){return De("not implemented")}}function mr(C,g){Ne("string"==typeof C||typeof C>"u","internal-error",{appName:g})}class Kt{constructor(g){var{uid:y,auth:A,stsTokenManager:K}=g,oe=(0,$e._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Jr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=A,this.stsTokenManager=K,this.accessToken=K.accessToken,this.displayName=oe.displayName||null,this.email=oe.email||null,this.emailVerified=oe.emailVerified||!1,this.phoneNumber=oe.phoneNumber||null,this.photoURL=oe.photoURL||null,this.isAnonymous=oe.isAnonymous||!1,this.tenantId=oe.tenantId||null,this.providerData=oe.providerData?[...oe.providerData]:[],this.metadata=new Dr(oe.createdAt||void 0,oe.lastLoginAt||void 0)}getIdToken(g){var y=this;return(0,_.Z)(function*(){const A=yield ln(y,y.stsTokenManager.getToken(y.auth,g));return Ne(A,y.auth,"internal-error"),y.accessToken!==A&&(y.accessToken=A,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),A})()}getIdTokenResult(g){return function Cr(C){return di.apply(this,arguments)}(this,g)}reload(){return function pi(C){return Lr.apply(this,arguments)}(this)}_assign(g){this!==g&&(Ne(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(y=>Object.assign({},y)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){const y=new Kt(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}));return y.metadata._copy(this.metadata),y}_onReload(g){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,y=!1){var A=this;return(0,_.Z)(function*(){let K=!1;g.idToken&&g.idToken!==A.stsTokenManager.accessToken&&(A.stsTokenManager.updateFromServerResponse(g),K=!0),y&&(yield Qr(A)),yield A.auth._persistUserIfCurrent(A),K&&A.auth._notifyListenersIfCurrent(A)})()}delete(){var g=this;return(0,_.Z)(function*(){const y=yield g.getIdToken();return yield ln(g,function cn(C,g){return Cn.apply(this,arguments)}(g.auth,{idToken:y})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,y){var A,K,oe,st,bt,rn,Bn,or;const ar=null!==(A=y.displayName)&&void 0!==A?A:void 0,Ki=null!==(K=y.email)&&void 0!==K?K:void 0,Ca=null!==(oe=y.phoneNumber)&&void 0!==oe?oe:void 0,Mu=null!==(st=y.photoURL)&&void 0!==st?st:void 0,ec=null!==(bt=y.tenantId)&&void 0!==bt?bt:void 0,is=null!==(rn=y._redirectEventId)&&void 0!==rn?rn:void 0,Yd=null!==(Bn=y.createdAt)&&void 0!==Bn?Bn:void 0,Pu=null!==(or=y.lastLoginAt)&&void 0!==or?or:void 0,{uid:Uc,emailVerified:tc,isAnonymous:Ou,providerData:Zd,stsTokenManager:_d}=y;Ne(Uc&&_d,g,"internal-error");const Ed=Ai.fromJSON(this.name,_d);Ne("string"==typeof Uc,g,"internal-error"),mr(ar,g.name),mr(Ki,g.name),Ne("boolean"==typeof tc,g,"internal-error"),Ne("boolean"==typeof Ou,g,"internal-error"),mr(Ca,g.name),mr(Mu,g.name),mr(ec,g.name),mr(is,g.name),mr(Yd,g.name),mr(Pu,g.name);const Xd=new Kt({uid:Uc,auth:g,email:Ki,emailVerified:tc,displayName:ar,isAnonymous:Ou,photoURL:Mu,phoneNumber:Ca,tenantId:ec,stsTokenManager:Ed,createdAt:Yd,lastLoginAt:Pu});return Zd&&Array.isArray(Zd)&&(Xd.providerData=Zd.map(ku=>Object.assign({},ku))),is&&(Xd._redirectEventId=is),Xd}static _fromIdTokenResponse(g,y,A=!1){return(0,_.Z)(function*(){const K=new Ai;K.updateFromServerResponse(y);const oe=new Kt({uid:y.localId,auth:g,stsTokenManager:K,isAnonymous:A});return yield Qr(oe),oe})()}}const Ze=new Map;function nt(C){je(C instanceof Function,"Expected a class definition");let g=Ze.get(C);return g?(je(g instanceof C,"Instance stored in cache mismatched with class"),g):(g=new C,Ze.set(C,g),g)}const Yt=(()=>{class C{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.Z)(function*(){return!0})()}_set(y,A){var K=this;return(0,_.Z)(function*(){K.storage[y]=A})()}_get(y){var A=this;return(0,_.Z)(function*(){const K=A.storage[y];return void 0===K?null:K})()}_remove(y){var A=this;return(0,_.Z)(function*(){delete A.storage[y]})()}_addListener(y,A){}_removeListener(y,A){}}return C.type="NONE",C})();function we(C,g,y){return`firebase:${C}:${g}:${y}`}class Ie{constructor(g,y,A){this.persistence=g,this.auth=y,this.userKey=A;const{config:K,name:oe}=this.auth;this.fullUserKey=we(this.userKey,K.apiKey,oe),this.fullPersistenceKey=we("persistence",K.apiKey,oe),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,_.Z)(function*(){const y=yield g.persistence._get(g.fullUserKey);return y?Kt._fromJSON(g.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var y=this;return(0,_.Z)(function*(){if(y.persistence===g)return;const A=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=g,A?y.setCurrentUser(A):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,y,A="authUser"){return(0,_.Z)(function*(){if(!y.length)return new Ie(nt(Yt),g,A);const K=(yield Promise.all(y.map(function(){var Bn=(0,_.Z)(function*(or){if(yield or._isAvailable())return or});return function(or){return Bn.apply(this,arguments)}}()))).filter(Bn=>Bn);let oe=K[0]||nt(Yt);const st=we(A,g.config.apiKey,g.name);let bt=null;for(const Bn of y)try{const or=yield Bn._get(st);if(or){const ar=Kt._fromJSON(g,or);Bn!==oe&&(bt=ar),oe=Bn;break}}catch{}const rn=K.filter(Bn=>Bn._shouldAllowMigration);return oe._shouldAllowMigration&&rn.length?(oe=rn[0],bt&&(yield oe._set(st,bt.toJSON())),yield Promise.all(y.map(function(){var Bn=(0,_.Z)(function*(or){if(or!==oe)try{yield or._remove(st)}catch{}});return function(or){return Bn.apply(this,arguments)}}())),new Ie(oe,g,A)):new Ie(oe,g,A)})()}}function qe(C){const g=C.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(ot(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Ot(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(ve(g))return"Blackberry";if(rt(g))return"Webos";if(ut(g))return"Safari";if((g.includes("chrome/")||un(g))&&!g.includes("edge/"))return"Chrome";if(Ge(g))return"Android";{const A=C.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==A?void 0:A.length))return A[1]}return"Other"}function Ot(C=(0,ee.z$)()){return/firefox\//i.test(C)}function ut(C=(0,ee.z$)()){const g=C.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function un(C=(0,ee.z$)()){return/crios\//i.test(C)}function ot(C=(0,ee.z$)()){return/iemobile/i.test(C)}function Ge(C=(0,ee.z$)()){return/android/i.test(C)}function ve(C=(0,ee.z$)()){return/blackberry/i.test(C)}function rt(C=(0,ee.z$)()){return/webos/i.test(C)}function Nt(C=(0,ee.z$)()){return/iphone|ipad|ipod/i.test(C)||/macintosh/i.test(C)&&/mobile/i.test(C)}function It(C=(0,ee.z$)()){return Nt(C)||Ge(C)||rt(C)||ve(C)||/windows phone/i.test(C)||ot(C)}function Xe(C,g=[]){let y;switch(C){case"Browser":y=qe((0,ee.z$)());break;case"Worker":y=`${qe((0,ee.z$)())}-${C}`;break;default:y=C}const A=g.length?g.join(","):"FirebaseCore-web";return`${y}/JsCore/${ce.SDK_VERSION}/${A}`}function Ct(){return(Ct=(0,_.Z)(function*(C){return(yield zt(C,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Gt(C,g){return pn.apply(this,arguments)}function pn(){return(pn=(0,_.Z)(function*(C,g){return zt(C,"GET","/v2/recaptchaConfig",nn(C,g))})).apply(this,arguments)}function kn(C){return void 0!==C&&void 0!==C.getResponse}function wn(C){return void 0!==C&&void 0!==C.enterprise}class Qn{constructor(g){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===g.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=g.recaptchaKey.split("/")[3],this.emailPasswordEnabled=g.recaptchaEnforcementState.some(y=>"EMAIL_PASSWORD_PROVIDER"===y.provider&&"OFF"!==y.enforcementState)}}function Wn(C){return new Promise((g,y)=>{const A=document.createElement("script");A.setAttribute("src",C),A.onload=g,A.onerror=K=>{const oe=et("internal-error");oe.customData=K,y(oe)},A.type="text/javascript",A.charset="UTF-8",function Jn(){var C,g;return null!==(g=null===(C=document.getElementsByTagName("head"))||void 0===C?void 0:C[0])&&void 0!==g?g:document}().appendChild(A)})}function Xn(C){return`__${C}${Math.floor(1e6*Math.random())}`}const Vi="NO_RECAPTCHA";class ji{constructor(g){this.type="recaptcha-enterprise",this.auth=kr(g)}verify(g="verify",y=!1){var A=this;return(0,_.Z)(function*(){function oe(){return oe=(0,_.Z)(function*(bt){if(!y){if(null==bt.tenantId&&null!=bt._agentRecaptchaConfig)return bt._agentRecaptchaConfig.siteKey;if(null!=bt.tenantId&&void 0!==bt._tenantRecaptchaConfigs[bt.tenantId])return bt._tenantRecaptchaConfigs[bt.tenantId].siteKey}return new Promise(function(){var rn=(0,_.Z)(function*(Bn,or){Gt(bt,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(ar=>{if(void 0!==ar.recaptchaKey){const Ki=new Qn(ar);return null==bt.tenantId?bt._agentRecaptchaConfig=Ki:bt._tenantRecaptchaConfigs[bt.tenantId]=Ki,Bn(Ki.siteKey)}or(new Error("recaptcha Enterprise site key undefined"))}).catch(ar=>{or(ar)})});return function(Bn,or){return rn.apply(this,arguments)}}())}),oe.apply(this,arguments)}function st(bt,rn,Bn){const or=window.grecaptcha;wn(or)?or.enterprise.ready(()=>{or.enterprise.execute(bt,{action:g}).then(ar=>{rn(ar)}).catch(()=>{rn(Vi)})}):Bn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((bt,rn)=>{(function K(bt){return oe.apply(this,arguments)})(A.auth).then(Bn=>{if(!y&&wn(window.grecaptcha))st(Bn,bt,rn);else{if(typeof window>"u")return void rn(new Error("RecaptchaVerifier is only supported in browser"));Wn("https://www.google.com/recaptcha/enterprise.js?render="+Bn).then(()=>{st(Bn,bt,rn)}).catch(or=>{rn(or)})}}).catch(Bn=>{rn(Bn)})})})()}}function An(C,g,y){return cr.apply(this,arguments)}function cr(){return(cr=(0,_.Z)(function*(C,g,y,A=!1){const K=new ji(C);let oe;try{oe=yield K.verify(y)}catch{oe=yield K.verify(y,!0)}const st=Object.assign({},g);return Object.assign(st,A?{captchaResp:oe}:{captchaResponse:oe}),Object.assign(st,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(st,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),st})).apply(this,arguments)}class ri{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,y){const A=oe=>new Promise((st,bt)=>{try{st(g(oe))}catch(rn){bt(rn)}});A.onAbort=y,this.queue.push(A);const K=this.queue.length-1;return()=>{this.queue[K]=()=>Promise.resolve()}}runMiddleware(g){var y=this;return(0,_.Z)(function*(){if(y.auth.currentUser===g)return;const A=[];try{for(const K of y.queue)yield K(g),K.onAbort&&A.push(K.onAbort)}catch(K){A.reverse();for(const oe of A)try{oe()}catch{}throw y.auth._errorFactory.create("login-blocked",{originalMessage:null==K?void 0:K.message})}})()}}class qi{constructor(g,y,A,K){this.app=g,this.heartbeatServiceProvider=y,this.appCheckServiceProvider=A,this.config=K,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ci(this),this.idTokenSubscription=new Ci(this),this.beforeStateQueue=new ri(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=K.sdkClientVersion}_initializeWithPersistence(g,y){var A=this;return y&&(this._popupRedirectResolver=nt(y)),this._initializationPromise=this.queue((0,_.Z)(function*(){var K,oe;if(!A._deleted&&(A.persistenceManager=yield Ie.create(A,g),!A._deleted)){if(null!==(K=A._popupRedirectResolver)&&void 0!==K&&K._shouldInitProactively)try{yield A._popupRedirectResolver._initialize(A)}catch{}yield A.initializeCurrentUser(y),A.lastNotifiedUid=(null===(oe=A.currentUser)||void 0===oe?void 0:oe.uid)||null,!A._deleted&&(A._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,_.Z)(function*(){if(g._deleted)return;const y=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||y){if(g.currentUser&&y&&g.currentUser.uid===y.uid)return g._currentUser._assign(y),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(y,!0)}})()}initializeCurrentUser(g){var y=this;return(0,_.Z)(function*(){var A;const K=yield y.assertedPersistence.getCurrentUser();let oe=K,st=!1;if(g&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const bt=null===(A=y.redirectUser)||void 0===A?void 0:A._redirectEventId,rn=null==oe?void 0:oe._redirectEventId,Bn=yield y.tryRedirectSignIn(g);(!bt||bt===rn)&&null!=Bn&&Bn.user&&(oe=Bn.user,st=!0)}if(!oe)return y.directlySetCurrentUser(null);if(!oe._redirectEventId){if(st)try{yield y.beforeStateQueue.runMiddleware(oe)}catch(bt){oe=K,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(bt))}return oe?y.reloadAndSetCurrentUserOrClear(oe):y.directlySetCurrentUser(null)}return Ne(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===oe._redirectEventId?y.directlySetCurrentUser(oe):y.reloadAndSetCurrentUserOrClear(oe)})()}tryRedirectSignIn(g){var y=this;return(0,_.Z)(function*(){let A=null;try{A=yield y._popupRedirectResolver._completeRedirectFn(y,g,!0)}catch{yield y._setRedirectUser(null)}return A})()}reloadAndSetCurrentUserOrClear(g){var y=this;return(0,_.Z)(function*(){try{yield Qr(g)}catch(A){if("auth/network-request-failed"!==(null==A?void 0:A.code))return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function yt(){if(typeof navigator>"u")return null;const C=navigator;return C.languages&&C.languages[0]||C.language||null}()}_delete(){var g=this;return(0,_.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var y=this;return(0,_.Z)(function*(){const A=g?(0,ee.m9)(g):null;return A&&Ne(A.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(A&&A._clone(y))})()}_updateCurrentUser(g,y=!1){var A=this;return(0,_.Z)(function*(){if(!A._deleted)return g&&Ne(A.tenantId===g.tenantId,A,"tenant-id-mismatch"),y||(yield A.beforeStateQueue.runMiddleware(g)),A.queue((0,_.Z)(function*(){yield A.directlySetCurrentUser(g),A.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,_.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var y=this;return this.queue((0,_.Z)(function*(){yield y.assertedPersistence.setPersistence(nt(g))}))}initializeRecaptchaConfig(){var g=this;return(0,_.Z)(function*(){const y=yield Gt(g,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),A=new Qn(y);null==g.tenantId?g._agentRecaptchaConfig=A:g._tenantRecaptchaConfigs[g.tenantId]=A,A.emailPasswordEnabled&&new ji(g).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new ee.LL("auth","Firebase",g())}onAuthStateChanged(g,y,A){return this.registerStateListener(this.authStateSubscription,g,y,A)}beforeAuthStateChanged(g,y){return this.beforeStateQueue.pushCallback(g,y)}onIdTokenChanged(g,y,A){return this.registerStateListener(this.idTokenSubscription,g,y,A)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,y){var A=this;return(0,_.Z)(function*(){const K=yield A.getOrInitRedirectPersistenceManager(y);return null===g?K.removeCurrentUser():K.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var y=this;return(0,_.Z)(function*(){if(!y.redirectPersistenceManager){const A=g&&nt(g)||y._popupRedirectResolver;Ne(A,y,"argument-error"),y.redirectPersistenceManager=yield Ie.create(y,[nt(A._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(g){var y=this;return(0,_.Z)(function*(){var A,K;return y._isInitialized&&(yield y.queue((0,_.Z)(function*(){}))),(null===(A=y._currentUser)||void 0===A?void 0:A._redirectEventId)===g?y._currentUser:(null===(K=y.redirectUser)||void 0===K?void 0:K._redirectEventId)===g?y.redirectUser:null})()}_persistUserIfCurrent(g){var y=this;return(0,_.Z)(function*(){if(g===y.currentUser)return y.queue((0,_.Z)(function*(){return y.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const A=null!==(y=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==A&&(this.lastNotifiedUid=A,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,y,A,K){if(this._deleted)return()=>{};const oe="function"==typeof y?y:y.next.bind(y),st=this._isInitialized?Promise.resolve():this._initializationPromise;return Ne(st,this,"internal-error"),st.then(()=>oe(this.currentUser)),"function"==typeof y?g.addObserver(y,A,K):g.addObserver(y)}directlySetCurrentUser(g){var y=this;return(0,_.Z)(function*(){y.currentUser&&y.currentUser!==g&&y._currentUser._stopProactiveRefresh(),g&&y.isProactiveRefreshEnabled&&g._startProactiveRefresh(),y.currentUser=g,g?yield y.assertedPersistence.setCurrentUser(g):yield y.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Xe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,_.Z)(function*(){var y;const A={"X-Client-Version":g.clientVersion};g.app.options.appId&&(A["X-Firebase-gmpid"]=g.app.options.appId);const K=yield null===(y=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();K&&(A["X-Firebase-Client"]=K);const oe=yield g._getAppCheckToken();return oe&&(A["X-Firebase-AppCheck"]=oe),A})()}_getAppCheckToken(){var g=this;return(0,_.Z)(function*(){var y;const A=yield null===(y=g.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getToken();return null!=A&&A.error&&function _t(C,...g){de.logLevel<=Se.in.WARN&&de.warn(`Auth (${ce.SDK_VERSION}): ${C}`,...g)}(`Error while retrieving App Check token: ${A.error}`),null==A?void 0:A.token})()}}function kr(C){return(0,ee.m9)(C)}class Ci{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,ee.ne)(y=>this.observer=y)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function be(C){const g=C.indexOf(":");return g<0?"":C.substr(0,g+1)}function me(C){if(!C)return null;const g=Number(C);return isNaN(g)?null:g}class Qe{constructor(g,y){this.providerId=g,this.signInMethod=y}toJSON(){return De("not implemented")}_getIdTokenResponse(g){return De("not implemented")}_linkToIdToken(g,y){return De("not implemented")}_getReauthenticationResolver(g){return De("not implemented")}}function Vt(C,g){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,_.Z)(function*(C,g){return zt(C,"POST","/v1/accounts:resetPassword",nn(C,g))})).apply(this,arguments)}function Xt(C,g){return an.apply(this,arguments)}function an(){return(an=(0,_.Z)(function*(C,g){return zt(C,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function rr(){return(rr=(0,_.Z)(function*(C,g){return zt(C,"POST","/v1/accounts:update",nn(C,g))})).apply(this,arguments)}function er(C,g){return vr.apply(this,arguments)}function vr(){return(vr=(0,_.Z)(function*(C,g){return St(C,"POST","/v1/accounts:signInWithPassword",nn(C,g))})).apply(this,arguments)}function Wr(C,g){return $i.apply(this,arguments)}function $i(){return($i=(0,_.Z)(function*(C,g){return zt(C,"POST","/v1/accounts:sendOobCode",nn(C,g))})).apply(this,arguments)}function at(){return(at=(0,_.Z)(function*(C,g){return Wr(C,g)})).apply(this,arguments)}function xt(C,g){return tn.apply(this,arguments)}function tn(){return(tn=(0,_.Z)(function*(C,g){return Wr(C,g)})).apply(this,arguments)}function dn(C,g){return fr.apply(this,arguments)}function fr(){return(fr=(0,_.Z)(function*(C,g){return Wr(C,g)})).apply(this,arguments)}function Ir(){return(Ir=(0,_.Z)(function*(C,g){return Wr(C,g)})).apply(this,arguments)}function vs(){return(vs=(0,_.Z)(function*(C,g){return St(C,"POST","/v1/accounts:signInWithEmailLink",nn(C,g))})).apply(this,arguments)}function _i(){return(_i=(0,_.Z)(function*(C,g){return St(C,"POST","/v1/accounts:signInWithEmailLink",nn(C,g))})).apply(this,arguments)}class Ss extends Qe{constructor(g,y,A,K=null){super("password",A),this._email=g,this._password=y,this._tenantId=K}static _fromEmailAndPassword(g,y){return new Ss(g,y,"password")}static _fromEmailAndCode(g,y,A=null){return new Ss(g,y,"emailLink",A)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g;if(null!=y&&y.email&&null!=y&&y.password){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(g){var y=this;return(0,_.Z)(function*(){var A;switch(y.signInMethod){case"password":const K={returnSecureToken:!0,email:y._email,password:y._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(A=g._getRecaptchaConfig())&&void 0!==A&&A.emailPasswordEnabled){const oe=yield An(g,K,"signInWithPassword");return er(g,oe)}return er(g,K).catch(function(){var oe=(0,_.Z)(function*(st){if("auth/missing-recaptcha-token"===st.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const bt=yield An(g,K,"signInWithPassword");return er(g,bt)}return Promise.reject(st)});return function(st){return oe.apply(this,arguments)}}());case"emailLink":return function ei(C,g){return vs.apply(this,arguments)}(g,{email:y._email,oobCode:y._password});default:it(g,"internal-error")}})()}_linkToIdToken(g,y){var A=this;return(0,_.Z)(function*(){switch(A.signInMethod){case"password":return Xt(g,{idToken:y,returnSecureToken:!0,email:A._email,password:A._password});case"emailLink":return function Oo(C,g){return _i.apply(this,arguments)}(g,{idToken:y,email:A._email,oobCode:A._password});default:it(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Hi(C,g){return jo.apply(this,arguments)}function jo(){return(jo=(0,_.Z)(function*(C,g){return St(C,"POST","/v1/accounts:signInWithIdp",nn(C,g))})).apply(this,arguments)}class Yi extends Qe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const y=new Yi(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(y.idToken=g.idToken),g.accessToken&&(y.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(y.nonce=g.nonce),g.pendingToken&&(y.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(y.accessToken=g.oauthToken,y.secret=g.oauthTokenSecret):it("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:A,signInMethod:K}=y,oe=(0,$e._T)(y,["providerId","signInMethod"]);if(!A||!K)return null;const st=new Yi(A,K);return st.idToken=oe.idToken||void 0,st.accessToken=oe.accessToken||void 0,st.secret=oe.secret,st.nonce=oe.nonce,st.pendingToken=oe.pendingToken||null,st}_getIdTokenResponse(g){return Hi(g,this.buildRequest())}_linkToIdToken(g,y){const A=this.buildRequest();return A.idToken=y,Hi(g,A)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,Hi(g,y)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),g.postBody=(0,ee.xO)(y)}return g}}function Os(){return(Os=(0,_.Z)(function*(C,g){return zt(C,"POST","/v1/accounts:sendVerificationCode",nn(C,g))})).apply(this,arguments)}function ko(){return(ko=(0,_.Z)(function*(C,g){return St(C,"POST","/v1/accounts:signInWithPhoneNumber",nn(C,g))})).apply(this,arguments)}function ao(){return(ao=(0,_.Z)(function*(C,g){const y=yield St(C,"POST","/v1/accounts:signInWithPhoneNumber",nn(C,g));if(y.temporaryProof)throw xn(C,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const da={USER_NOT_FOUND:"user-not-found"};function lo(){return(lo=(0,_.Z)(function*(C,g){return St(C,"POST","/v1/accounts:signInWithPhoneNumber",nn(C,Object.assign(Object.assign({},g),{operation:"REAUTH"})),da)})).apply(this,arguments)}class ds extends Qe{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,y){return new ds({verificationId:g,verificationCode:y})}static _fromTokenResponse(g,y){return new ds({phoneNumber:g,temporaryProof:y})}_getIdTokenResponse(g){return function Ta(C,g){return ko.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,y){return function As(C,g){return ao.apply(this,arguments)}(g,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Qa(C,g){return lo.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:y,verificationId:A,verificationCode:K}=this.params;return g&&y?{temporaryProof:g,phoneNumber:y}:{sessionInfo:A,code:K}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:y,verificationCode:A,phoneNumber:K,temporaryProof:oe}=g;return A||y||K||oe?new ds({verificationId:y,verificationCode:A,phoneNumber:K,temporaryProof:oe}):null}}class os{constructor(g){var y,A,K,oe,st,bt;const rn=(0,ee.zd)((0,ee.pd)(g)),Bn=null!==(y=rn.apiKey)&&void 0!==y?y:null,or=null!==(A=rn.oobCode)&&void 0!==A?A:null,ar=function ha(C){switch(C){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(K=rn.mode)&&void 0!==K?K:null);Ne(Bn&&or&&ar,"argument-error"),this.apiKey=Bn,this.operation=ar,this.code=or,this.continueUrl=null!==(oe=rn.continueUrl)&&void 0!==oe?oe:null,this.languageCode=null!==(st=rn.languageCode)&&void 0!==st?st:null,this.tenantId=null!==(bt=rn.tenantId)&&void 0!==bt?bt:null}static parseLink(g){const y=function Ws(C){const g=(0,ee.zd)((0,ee.pd)(C)).link,y=g?(0,ee.zd)((0,ee.pd)(g)).deep_link_id:null,A=(0,ee.zd)((0,ee.pd)(C)).deep_link_id;return(A?(0,ee.zd)((0,ee.pd)(A)).link:null)||A||y||g||C}(g);try{return new os(y)}catch{return null}}}let Ho=(()=>{class C{constructor(){this.providerId=C.PROVIDER_ID}static credential(y,A){return Ss._fromEmailAndPassword(y,A)}static credentialWithLink(y,A){const K=os.parseLink(A);return Ne(K,"argument-error"),Ss._fromEmailAndCode(y,K.code,K.tenantId)}}return C.PROVIDER_ID="password",C.EMAIL_PASSWORD_SIGN_IN_METHOD="password",C.EMAIL_LINK_SIGN_IN_METHOD="emailLink",C})();class co{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class ti extends co{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class ks extends ti{static credentialFromJSON(g){const y="string"==typeof g?JSON.parse(g):g;return Ne("providerId"in y&&"signInMethod"in y,"argument-error"),Yi._fromParams(y)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return Ne(g.idToken||g.accessToken,"argument-error"),Yi._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return ks.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return ks.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:y,oauthAccessToken:A,oauthTokenSecret:K,pendingToken:oe,nonce:st,providerId:bt}=g;if(!A&&!K&&!y&&!oe||!bt)return null;try{return new ks(bt)._credential({idToken:y,accessToken:A,nonce:st,pendingToken:oe})}catch{return null}}}let uo=(()=>{class C extends ti{constructor(){super("facebook.com")}static credential(y){return Yi._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return C.credentialFromTaggedObject(y)}static credentialFromError(y){return C.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return C.credential(y.oauthAccessToken)}catch{return null}}}return C.FACEBOOK_SIGN_IN_METHOD="facebook.com",C.PROVIDER_ID="facebook.com",C})(),ho=(()=>{class C extends ti{constructor(){super("google.com"),this.addScope("profile")}static credential(y,A){return Yi._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:A})}static credentialFromResult(y){return C.credentialFromTaggedObject(y)}static credentialFromError(y){return C.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:A,oauthAccessToken:K}=y;if(!A&&!K)return null;try{return C.credential(A,K)}catch{return null}}}return C.GOOGLE_SIGN_IN_METHOD="google.com",C.PROVIDER_ID="google.com",C})(),fa=(()=>{class C extends ti{constructor(){super("github.com")}static credential(y){return Yi._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return C.credentialFromTaggedObject(y)}static credentialFromError(y){return C.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return C.credential(y.oauthAccessToken)}catch{return null}}}return C.GITHUB_SIGN_IN_METHOD="github.com",C.PROVIDER_ID="github.com",C})();class _s extends Qe{constructor(g,y){super(g,g),this.pendingToken=y}_getIdTokenResponse(g){return Hi(g,this.buildRequest())}_linkToIdToken(g,y){const A=this.buildRequest();return A.idToken=y,Hi(g,A)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,Hi(g,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:A,signInMethod:K,pendingToken:oe}=y;return A&&K&&oe&&A===K?new _s(A,oe):null}static _create(g,y){return new _s(g,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class No extends co{constructor(g){Ne(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return No.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return No.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const y=_s.fromJSON(g);return Ne(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:y,providerId:A}=g;if(!y||!A)return null;try{return _s._create(A,y)}catch{return null}}}let ra=(()=>{class C extends ti{constructor(){super("twitter.com")}static credential(y,A){return Yi._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:A})}static credentialFromResult(y){return C.credentialFromTaggedObject(y)}static credentialFromError(y){return C.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:A,oauthTokenSecret:K}=y;if(!A||!K)return null;try{return C.credential(A,K)}catch{return null}}}return C.TWITTER_SIGN_IN_METHOD="twitter.com",C.PROVIDER_ID="twitter.com",C})();function xs(C,g){return zi.apply(this,arguments)}function zi(){return(zi=(0,_.Z)(function*(C,g){return St(C,"POST","/v1/accounts:signUp",nn(C,g))})).apply(this,arguments)}class Zi{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,y,A,K=!1){return(0,_.Z)(function*(){const oe=yield Kt._fromIdTokenResponse(g,A,K),st=bo(A);return new Zi({user:oe,providerId:st,_tokenResponse:A,operationType:y})})()}static _forOperation(g,y,A){return(0,_.Z)(function*(){yield g._updateTokensIfNecessary(A,!0);const K=bo(A);return new Zi({user:g,providerId:K,_tokenResponse:A,operationType:y})})()}}function bo(C){return C.providerId?C.providerId:"phoneNumber"in C?"phone":null}function po(){return(po=(0,_.Z)(function*(C){var g;const y=kr(C);if(yield y._initializationPromise,null!==(g=y.currentUser)&&void 0!==g&&g.isAnonymous)return new Zi({user:y.currentUser,providerId:null,operationType:"signIn"});const A=yield xs(y,{returnSecureToken:!0}),K=yield Zi._fromIdTokenResponse(y,"signIn",A,!0);return yield y._updateCurrentUser(K.user),K})).apply(this,arguments)}class go extends ee.ZR{constructor(g,y,A,K){var oe;super(y.code,y.message),this.operationType=A,this.user=K,Object.setPrototypeOf(this,go.prototype),this.customData={appName:g.name,tenantId:null!==(oe=g.tenantId)&&void 0!==oe?oe:void 0,_serverResponse:y.customData._serverResponse,operationType:A}}static _fromErrorAndOperation(g,y,A,K){return new go(g,y,A,K)}}function Oi(C,g,y,A){return("reauthenticate"===g?y._getReauthenticationResolver(C):y._getIdTokenResponse(C)).catch(oe=>{throw"auth/multi-factor-auth-required"===oe.code?go._fromErrorAndOperation(C,oe,g,A):oe})}function ia(C){return new Set(C.map(({providerId:g})=>g).filter(g=>!!g))}function as(){return as=(0,_.Z)(function*(C,g){const y=(0,ee.m9)(C);yield Gi(!0,y,g);const{providerUserInfo:A}=yield function hr(C,g){return _r.apply(this,arguments)}(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[g]}),K=ia(A||[]);return y.providerData=y.providerData.filter(oe=>K.has(oe.providerId)),K.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y}),as.apply(this,arguments)}function Xi(C,g){return Do.apply(this,arguments)}function Do(){return(Do=(0,_.Z)(function*(C,g,y=!1){const A=yield ln(C,g._linkToIdToken(C.auth,yield C.getIdToken()),y);return Zi._forOperation(C,"link",A)})).apply(this,arguments)}function Gi(C,g,y){return Va.apply(this,arguments)}function Va(){return(Va=(0,_.Z)(function*(C,g,y){yield Qr(g);const K=!1===C?"provider-already-linked":"no-such-provider";Ne(ia(g.providerData).has(y)===C,g.auth,K)})).apply(this,arguments)}function Ns(C,g){return To.apply(this,arguments)}function To(){return(To=(0,_.Z)(function*(C,g,y=!1){const{auth:A}=C,K="reauthenticate";try{const oe=yield ln(C,Oi(A,K,g,C),y);Ne(oe.idToken,A,"internal-error");const st=Gn(oe.idToken);Ne(st,A,"internal-error");const{sub:bt}=st;return Ne(C.uid===bt,A,"user-mismatch"),Zi._forOperation(C,K,oe)}catch(oe){throw"auth/user-not-found"===(null==oe?void 0:oe.code)&&it(A,"user-mismatch"),oe}})).apply(this,arguments)}function sa(C,g){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,_.Z)(function*(C,g,y=!1){const A="signIn",K=yield Oi(C,A,g),oe=yield Zi._fromIdTokenResponse(C,A,K);return y||(yield C._updateCurrentUser(oe.user)),oe})).apply(this,arguments)}function So(C,g){return pa.apply(this,arguments)}function pa(){return(pa=(0,_.Z)(function*(C,g){return sa(kr(C),g)})).apply(this,arguments)}function oa(C,g){return b.apply(this,arguments)}function b(){return(b=(0,_.Z)(function*(C,g){const y=(0,ee.m9)(C);return yield Gi(!1,y,g.providerId),Xi(y,g)})).apply(this,arguments)}function q(C,g){return T.apply(this,arguments)}function T(){return(T=(0,_.Z)(function*(C,g){return Ns((0,ee.m9)(C),g)})).apply(this,arguments)}function ge(){return(ge=(0,_.Z)(function*(C,g){return St(C,"POST","/v1/accounts:signInWithCustomToken",nn(C,g))})).apply(this,arguments)}function F(){return F=(0,_.Z)(function*(C,g){const y=kr(C),A=yield function W(C,g){return ge.apply(this,arguments)}(y,{token:g,returnSecureToken:!0}),K=yield Zi._fromIdTokenResponse(y,"signIn",A);return yield y._updateCurrentUser(K.user),K}),F.apply(this,arguments)}class L{constructor(g,y){this.factorId=g,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(g,y){return"phoneInfo"in y?ne._fromServerResponse(g,y):"totpInfo"in y?vt._fromServerResponse(g,y):it(g,"internal-error")}}class ne extends L{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,y){return new ne(y)}}class vt extends L{constructor(g){super("totp",g)}static _fromServerResponse(g,y){return new vt(y)}}function Tn(C,g,y){var A;Ne((null===(A=y.url)||void 0===A?void 0:A.length)>0,C,"invalid-continue-uri"),Ne(typeof y.dynamicLinkDomain>"u"||y.dynamicLinkDomain.length>0,C,"invalid-dynamic-link-domain"),g.continueUrl=y.url,g.dynamicLinkDomain=y.dynamicLinkDomain,g.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(Ne(y.iOS.bundleId.length>0,C,"missing-ios-bundle-id"),g.iOSBundleId=y.iOS.bundleId),y.android&&(Ne(y.android.packageName.length>0,C,"missing-android-pkg-name"),g.androidInstallApp=y.android.installApp,g.androidMinimumVersionCode=y.android.minimumVersion,g.androidPackageName=y.android.packageName)}function ii(){return ii=(0,_.Z)(function*(C,g,y){var A;const K=kr(C),oe={requestType:"PASSWORD_RESET",email:g,clientType:"CLIENT_TYPE_WEB"};if(null!==(A=K._getRecaptchaConfig())&&void 0!==A&&A.emailPasswordEnabled){const st=yield An(K,oe,"getOobCode",!0);y&&Tn(K,st,y),yield xt(K,st)}else y&&Tn(K,oe,y),yield xt(K,oe).catch(function(){var st=(0,_.Z)(function*(bt){if("auth/missing-recaptcha-token"!==bt.code)return Promise.reject(bt);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const rn=yield An(K,oe,"getOobCode",!0);y&&Tn(K,rn,y),yield xt(K,rn)}});return function(bt){return st.apply(this,arguments)}}())}),ii.apply(this,arguments)}function hs(){return(hs=(0,_.Z)(function*(C,g,y){yield Vt((0,ee.m9)(C),{oobCode:g,newPassword:y})})).apply(this,arguments)}function xi(){return xi=(0,_.Z)(function*(C,g){yield function vn(C,g){return rr.apply(this,arguments)}((0,ee.m9)(C),{oobCode:g})}),xi.apply(this,arguments)}function ja(C,g){return ts.apply(this,arguments)}function ts(){return(ts=(0,_.Z)(function*(C,g){const y=(0,ee.m9)(C),A=yield Vt(y,{oobCode:g}),K=A.requestType;switch(Ne(K,y,"internal-error"),K){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ne(A.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ne(A.mfaInfo,y,"internal-error");default:Ne(A.email,y,"internal-error")}let oe=null;return A.mfaInfo&&(oe=L._fromServerResponse(kr(y),A.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.newEmail:A.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.email:A.newEmail)||null,multiFactorInfo:oe},operation:K}})).apply(this,arguments)}function qs(){return(qs=(0,_.Z)(function*(C,g){const{data:y}=yield ja((0,ee.m9)(C),g);return y.email})).apply(this,arguments)}function Ys(){return Ys=(0,_.Z)(function*(C,g,y){var A;const K=kr(C),oe={returnSecureToken:!0,email:g,password:y,clientType:"CLIENT_TYPE_WEB"};let st;if(null!==(A=K._getRecaptchaConfig())&&void 0!==A&&A.emailPasswordEnabled){const Bn=yield An(K,oe,"signUpPassword");st=xs(K,Bn)}else st=xs(K,oe).catch(function(){var Bn=(0,_.Z)(function*(or){if("auth/missing-recaptcha-token"===or.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const ar=yield An(K,oe,"signUpPassword");return xs(K,ar)}return Promise.reject(or)});return function(or){return Bn.apply(this,arguments)}}());const bt=yield st.catch(Bn=>Promise.reject(Bn)),rn=yield Zi._fromIdTokenResponse(K,"signIn",bt);return yield K._updateCurrentUser(rn.user),rn}),Ys.apply(this,arguments)}function Sa(){return Sa=(0,_.Z)(function*(C,g,y){var A;const K=kr(C),oe={requestType:"EMAIL_SIGNIN",email:g,clientType:"CLIENT_TYPE_WEB"};function st(bt,rn){Ne(rn.handleCodeInApp,K,"argument-error"),rn&&Tn(K,bt,rn)}if(null!==(A=K._getRecaptchaConfig())&&void 0!==A&&A.emailPasswordEnabled){const bt=yield An(K,oe,"getOobCode",!0);st(bt,y),yield dn(K,bt)}else st(oe,y),yield dn(K,oe).catch(function(){var bt=(0,_.Z)(function*(rn){if("auth/missing-recaptcha-token"!==rn.code)return Promise.reject(rn);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Bn=yield An(K,oe,"getOobCode",!0);st(Bn,y),yield dn(K,Bn)}});return function(rn){return bt.apply(this,arguments)}}())}),Sa.apply(this,arguments)}function Rs(){return(Rs=(0,_.Z)(function*(C,g,y){const A=(0,ee.m9)(C),K=Ho.credentialWithLink(g,y||gt());return Ne(K._tenantId===(A.tenantId||null),A,"tenant-id-mismatch"),So(A,K)})).apply(this,arguments)}function Aa(){return(Aa=(0,_.Z)(function*(C,g){return zt(C,"POST","/v1/accounts:createAuthUri",nn(C,g))})).apply(this,arguments)}function Fo(){return Fo=(0,_.Z)(function*(C,g){const A={identifier:g,continueUri:Dt()?gt():"http://localhost"},{signinMethods:K}=yield function tl(C,g){return Aa.apply(this,arguments)}((0,ee.m9)(C),A);return K||[]}),Fo.apply(this,arguments)}function ga(){return ga=(0,_.Z)(function*(C,g){const y=(0,ee.m9)(C),K={requestType:"VERIFY_EMAIL",idToken:yield C.getIdToken()};g&&Tn(y.auth,K,g);const{email:oe}=yield function mt(C,g){return at.apply(this,arguments)}(y.auth,K);oe!==C.email&&(yield C.reload())}),ga.apply(this,arguments)}function xo(){return xo=(0,_.Z)(function*(C,g,y){const A=(0,ee.m9)(C),oe={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield C.getIdToken(),newEmail:g};y&&Tn(A.auth,oe,y);const{email:st}=yield function Er(C,g){return Ir.apply(this,arguments)}(A.auth,oe);st!==C.email&&(yield C.reload())}),xo.apply(this,arguments)}function Zs(){return(Zs=(0,_.Z)(function*(C,g){return zt(C,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function xa(){return xa=(0,_.Z)(function*(C,{displayName:g,photoURL:y}){if(void 0===g&&void 0===y)return;const A=(0,ee.m9)(C),oe={idToken:yield A.getIdToken(),displayName:g,photoUrl:y,returnSecureToken:!0},st=yield ln(A,function Go(C,g){return Zs.apply(this,arguments)}(A.auth,oe));A.displayName=st.displayName||null,A.photoURL=st.photoUrl||null;const bt=A.providerData.find(({providerId:rn})=>"password"===rn);bt&&(bt.displayName=A.displayName,bt.photoURL=A.photoURL),yield A._updateTokensIfNecessary(st)}),xa.apply(this,arguments)}function Vr(C,g,y){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,_.Z)(function*(C,g,y){const{auth:A}=C,oe={idToken:yield C.getIdToken(),returnSecureToken:!0};g&&(oe.email=g),y&&(oe.password=y);const st=yield ln(C,Xt(A,oe));yield C._updateTokensIfNecessary(st,!0)})).apply(this,arguments)}class Lo{constructor(g,y,A={}){this.isNewUser=g,this.providerId=y,this.profile=A}}class vl extends Lo{constructor(g,y,A,K){super(g,y,A),this.username=K}}class mo extends Lo{constructor(g,y){super(g,"facebook.com",y)}}class jl extends vl{constructor(g,y){super(g,"github.com",y,"string"==typeof(null==y?void 0:y.login)?null==y?void 0:y.login:null)}}class Sr extends Lo{constructor(g,y){super(g,"google.com",y)}}class Hl extends vl{constructor(g,y,A){super(g,"twitter.com",y,A)}}function _l(C){const{user:g,_tokenResponse:y}=C;return g.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function Ra(C){var g,y;if(!C)return null;const{providerId:A}=C,K=C.rawUserInfo?JSON.parse(C.rawUserInfo):{},oe=C.isNewUser||"identitytoolkit#SignupNewUserResponse"===C.kind;if(!A&&null!=C&&C.idToken){const st=null===(y=null===(g=Gn(C.idToken))||void 0===g?void 0:g.firebase)||void 0===y?void 0:y.sign_in_provider;if(st)return new Lo(oe,"anonymous"!==st&&"custom"!==st?st:null)}if(!A)return null;switch(A){case"facebook.com":return new mo(oe,K);case"github.com":return new jl(oe,K);case"google.com":return new Sr(oe,K);case"twitter.com":return new Hl(oe,K,C.screenName||null);case"custom":case"anonymous":return new Lo(oe,null);default:return new Lo(oe,A,K)}}(y)}class Br{constructor(g,y,A){this.type=g,this.credential=y,this.auth=A}static _fromIdtoken(g,y){return new Br("enroll",g,y)}static _fromMfaPendingCredential(g){return new Br("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var y,A;if(null!=g&&g.multiFactorSession){if(null!==(y=g.multiFactorSession)&&void 0!==y&&y.pendingCredential)return Br._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(A=g.multiFactorSession)&&void 0!==A&&A.idToken)return Br._fromIdtoken(g.multiFactorSession.idToken)}return null}}class wr{constructor(g,y,A){this.session=g,this.hints=y,this.signInResolver=A}static _fromError(g,y){const A=kr(g),K=y.customData._serverResponse,oe=(K.mfaInfo||[]).map(bt=>L._fromServerResponse(A,bt));Ne(K.mfaPendingCredential,A,"internal-error");const st=Br._fromMfaPendingCredential(K.mfaPendingCredential);return new wr(st,oe,function(){var bt=(0,_.Z)(function*(rn){const Bn=yield rn._process(A,st);delete K.mfaInfo,delete K.mfaPendingCredential;const or=Object.assign(Object.assign({},K),{idToken:Bn.idToken,refreshToken:Bn.refreshToken});switch(y.operationType){case"signIn":const ar=yield Zi._fromIdTokenResponse(A,y.operationType,or);return yield A._updateCurrentUser(ar.user),ar;case"reauthenticate":return Ne(y.user,A,"internal-error"),Zi._forOperation(y.user,y.operationType,or);default:it(A,"internal-error")}});return function(rn){return bt.apply(this,arguments)}}())}resolveSignIn(g){var y=this;return(0,_.Z)(function*(){return y.signInResolver(g)})()}}class Es{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(A=>L._fromServerResponse(g.auth,A)))})}static _fromUser(g){return new Es(g)}getSession(){var g=this;return(0,_.Z)(function*(){return Br._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,y){var A=this;return(0,_.Z)(function*(){const K=g,oe=yield A.getSession(),st=yield ln(A.user,K._process(A.user.auth,oe,y));return yield A.user._updateTokensIfNecessary(st),A.user.reload()})()}unenroll(g){var y=this;return(0,_.Z)(function*(){const A="string"==typeof g?g:g.uid,K=yield y.user.getIdToken();try{const oe=yield ln(y.user,function Ko(C,g){return zt(C,"POST","/v2/accounts/mfaEnrollment:withdraw",nn(C,g))}(y.user.auth,{idToken:K,mfaEnrollmentId:A}));y.enrolledFactors=y.enrolledFactors.filter(({uid:st})=>st!==A),yield y.user._updateTokensIfNecessary(oe),yield y.user.reload()}catch(oe){throw oe}})()}}const Xs=new WeakMap,Qs="__sak";class rl{constructor(g,y){this.storageRetriever=g,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(Qs,"1"),this.storage.removeItem(Qs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,y){return this.storage.setItem(g,JSON.stringify(y)),Promise.resolve()}_get(g){const y=this.storage.getItem(g);return Promise.resolve(y?JSON.parse(y):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Wi=(()=>{class C extends rl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,A)=>this.onStorageEvent(y,A),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function El(){const C=(0,ee.z$)();return ut(C)||Nt(C)}()&&function Qt(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=It(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const A of Object.keys(this.listeners)){const K=this.storage.getItem(A),oe=this.localCache[A];K!==oe&&y(A,oe,K)}}onStorageEvent(y,A=!1){if(!y.key)return void this.forAllChangedKeys((bt,rn,Bn)=>{this.notifyListeners(bt,Bn)});const K=y.key;if(A?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const bt=this.storage.getItem(K);if(y.newValue!==bt)null!==y.newValue?this.storage.setItem(K,y.newValue):this.storage.removeItem(K);else if(this.localCache[K]===y.newValue&&!A)return}const oe=()=>{const bt=this.storage.getItem(K);!A&&this.localCache[K]===bt||this.notifyListeners(K,bt)},st=this.storage.getItem(K);!function Tt(){return(0,ee.w1)()&&10===document.documentMode}()||st===y.newValue||y.newValue===y.oldValue?oe():setTimeout(oe,10)}notifyListeners(y,A){this.localCache[y]=A;const K=this.listeners[y];if(K)for(const oe of Array.from(K))oe(A&&JSON.parse(A))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,A,K)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:A,newValue:K}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,A){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(A)}_removeListener(y,A){this.listeners[y]&&(this.listeners[y].delete(A),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,A){var K=()=>super._set,oe=this;return(0,_.Z)(function*(){yield K().call(oe,y,A),oe.localCache[y]=JSON.stringify(A)})()}_get(y){var A=()=>super._get,K=this;return(0,_.Z)(function*(){const oe=yield A().call(K,y);return K.localCache[y]=JSON.stringify(oe),oe})()}_remove(y){var A=()=>super._remove,K=this;return(0,_.Z)(function*(){yield A().call(K,y),delete K.localCache[y]})()}}return C.type="LOCAL",C})(),Js=(()=>{class C extends rl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,A){}_removeListener(y,A){}}return C.type="SESSION",C})();let lc=(()=>{class C{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const A=this.receivers.find(oe=>oe.isListeningto(y));if(A)return A;const K=new C(y);return this.receivers.push(K),K}isListeningto(y){return this.eventTarget===y}handleEvent(y){var A=this;return(0,_.Z)(function*(){const K=y,{eventId:oe,eventType:st,data:bt}=K.data,rn=A.handlersMap[st];if(null==rn||!rn.size)return;K.ports[0].postMessage({status:"ack",eventId:oe,eventType:st});const Bn=Array.from(rn).map(function(){var ar=(0,_.Z)(function*(Ki){return Ki(K.origin,bt)});return function(Ki){return ar.apply(this,arguments)}}()),or=yield function ac(C){return Promise.all(C.map(function(){var g=(0,_.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(A){return{fulfilled:!1,reason:A}}});return function(y){return g.apply(this,arguments)}}()))}(Bn);K.ports[0].postMessage({status:"done",eventId:oe,eventType:st,response:or})})()}_subscribe(y,A){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(A)}_unsubscribe(y,A){this.handlersMap[y]&&A&&this.handlersMap[y].delete(A),(!A||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return C.receivers=[],C})();function _n(C="",g=10){let y="";for(let A=0;A<g;A++)y+=Math.floor(10*Math.random());return C+y}class Ji{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,y,A=50){var K=this;return(0,_.Z)(function*(){const oe=typeof MessageChannel<"u"?new MessageChannel:null;if(!oe)throw new Error("connection_unavailable");let st,bt;return new Promise((rn,Bn)=>{const or=_n("",20);oe.port1.start();const ar=setTimeout(()=>{Bn(new Error("unsupported_event"))},A);bt={messageChannel:oe,onMessage(Ki){const Ca=Ki;if(Ca.data.eventId===or)switch(Ca.data.status){case"ack":clearTimeout(ar),st=setTimeout(()=>{Bn(new Error("timeout"))},3e3);break;case"done":clearTimeout(st),rn(Ca.data.response);break;default:clearTimeout(ar),clearTimeout(st),Bn(new Error("invalid_response"))}}},K.handlers.add(bt),oe.port1.addEventListener("message",bt.onMessage),K.target.postMessage({eventType:g,eventId:or,data:y},[oe.port2])}).finally(()=>{bt&&K.removeMessageHandler(bt)})})()}}function mi(){return window}function Kn(){return typeof mi().WorkerGlobalScope<"u"&&"function"==typeof mi().importScripts}function cc(){return(cc=(0,_.Z)(function*(){if(null==navigator||!navigator.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const hn="firebaseLocalStorageDb",si=1,il="firebaseLocalStorage",uc="fbase_key";class Il{constructor(g){this.request=g}toPromise(){return new Promise((g,y)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function Ma(C,g){return C.transaction([il],g?"readwrite":"readonly").objectStore(il)}function Zc(){const C=indexedDB.open(hn,si);return new Promise((g,y)=>{C.addEventListener("error",()=>{y(C.error)}),C.addEventListener("upgradeneeded",()=>{const A=C.result;try{A.createObjectStore(il,{keyPath:uc})}catch(K){y(K)}}),C.addEventListener("success",(0,_.Z)(function*(){const A=C.result;A.objectStoreNames.contains(il)?g(A):(A.close(),yield function $d(){const C=indexedDB.deleteDatabase(hn);return new Il(C).toPromise()}(),g(yield Zc()))}))})}function $o(C,g,y){return wl.apply(this,arguments)}function wl(){return(wl=(0,_.Z)(function*(C,g,y){const A=Ma(C,!0).put({[uc]:g,value:y});return new Il(A).toPromise()})).apply(this,arguments)}function eo(){return(eo=(0,_.Z)(function*(C,g){const y=Ma(C,!1).get(g),A=yield new Il(y).toPromise();return void 0===A?null:A.value})).apply(this,arguments)}function ma(C,g){const y=Ma(C,!0).delete(g);return new Il(y).toPromise()}const ci=(()=>{class C{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,_.Z)(function*(){return y.db||(y.db=yield Zc()),y.db})()}_withRetries(y){var A=this;return(0,_.Z)(function*(){let K=0;for(;;)try{const oe=yield A._openDb();return yield y(oe)}catch(oe){if(K++>3)throw oe;A.db&&(A.db.close(),A.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,_.Z)(function*(){return Kn()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,_.Z)(function*(){y.receiver=lc._getInstance(function Ht(){return Kn()?self:null}()),y.receiver._subscribe("keyChanged",function(){var A=(0,_.Z)(function*(K,oe){return{keyProcessed:(yield y._poll()).includes(oe.key)}});return function(K,oe){return A.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var A=(0,_.Z)(function*(K,oe){return["keyChanged"]});return function(K,oe){return A.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,_.Z)(function*(){var A,K;if(y.activeServiceWorker=yield function dr(){return cc.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new Ji(y.activeServiceWorker);const oe=yield y.sender._send("ping",{},800);oe&&null!==(A=oe[0])&&void 0!==A&&A.fulfilled&&null!==(K=oe[0])&&void 0!==K&&K.value.includes("keyChanged")&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var A=this;return(0,_.Z)(function*(){if(A.sender&&A.activeServiceWorker&&function jn(){var C;return(null===(C=null==navigator?void 0:navigator.serviceWorker)||void 0===C?void 0:C.controller)||null}()===A.activeServiceWorker)try{yield A.sender._send("keyChanged",{key:y},A.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,_.Z)(function*(){try{if(!indexedDB)return!1;const y=yield Zc();return yield $o(y,Qs,"1"),yield ma(y,Qs),!0}catch{}return!1})()}_withPendingWrite(y){var A=this;return(0,_.Z)(function*(){A.pendingWrites++;try{yield y()}finally{A.pendingWrites--}})()}_set(y,A){var K=this;return(0,_.Z)(function*(){return K._withPendingWrite((0,_.Z)(function*(){return yield K._withRetries(oe=>$o(oe,y,A)),K.localCache[y]=A,K.notifyServiceWorker(y)}))})()}_get(y){var A=this;return(0,_.Z)(function*(){const K=yield A._withRetries(oe=>function Mc(C,g){return eo.apply(this,arguments)}(oe,y));return A.localCache[y]=K,K})()}_remove(y){var A=this;return(0,_.Z)(function*(){return A._withPendingWrite((0,_.Z)(function*(){return yield A._withRetries(K=>ma(K,y)),delete A.localCache[y],A.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,_.Z)(function*(){const A=yield y._withRetries(st=>{const bt=Ma(st,!1).getAll();return new Il(bt).toPromise()});if(!A)return[];if(0!==y.pendingWrites)return[];const K=[],oe=new Set;for(const{fbase_key:st,value:bt}of A)oe.add(st),JSON.stringify(y.localCache[st])!==JSON.stringify(bt)&&(y.notifyListeners(st,bt),K.push(st));for(const st of Object.keys(y.localCache))y.localCache[st]&&!oe.has(st)&&(y.notifyListeners(st,null),K.push(st));return K})()}notifyListeners(y,A){this.localCache[y]=A;const K=this.listeners[y];if(K)for(const oe of Array.from(K))oe(A)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,_.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,A){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(A)}_removeListener(y,A){this.listeners[y]&&(this.listeners[y].delete(A),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return C.type="LOCAL",C})(),Ln=1e12;class zl{constructor(g){this.auth=g,this.counter=Ln,this._widgets=new Map}render(g,y){const A=this.counter;return this._widgets.set(A,new dc(g,this.auth.name,y||{})),this.counter++,A}reset(g){var y;const A=g||Ln;null===(y=this._widgets.get(A))||void 0===y||y.delete(),this._widgets.delete(A)}getResponse(g){var y;return(null===(y=this._widgets.get(g||Ln))||void 0===y?void 0:y.getResponse())||""}execute(g){var y=this;return(0,_.Z)(function*(){var A;return null===(A=y._widgets.get(g||Ln))||void 0===A||A.execute(),""})()}}class dc{constructor(g,y,A){this.params=A,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const K="string"==typeof g?document.getElementById(g):g;Ne(K,"argument-error",{appName:y}),this.container=K,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Cl(C){const g=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let A=0;A<C;A++)g.push(y.charAt(Math.floor(Math.random()*y.length)));return g.join("")}(50);const{callback:g,"expired-callback":y}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Qc=Xn("rcb"),hc=new Fe(3e4,6e4);class Oc{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=mi().grecaptcha)||void 0===g||!g.render)}load(g,y=""){return Ne(function Jc(C){return C.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(C)}(y),g,"argument-error"),this.shouldResolveImmediately(y)&&kn(mi().grecaptcha)?Promise.resolve(mi().grecaptcha):new Promise((A,K)=>{const oe=mi().setTimeout(()=>{K(et(g,"network-request-failed"))},hc.get());mi()[Qc]=()=>{mi().clearTimeout(oe),delete mi()[Qc];const bt=mi().grecaptcha;if(!bt||!kn(bt))return void K(et(g,"internal-error"));const rn=bt.render;bt.render=(Bn,or)=>{const ar=rn(Bn,or);return this.counter++,ar},this.hostLanguage=y,A(bt)},Wn(`https://www.google.com/recaptcha/api.js??${(0,ee.xO)({onload:Qc,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(oe),K(et(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var y;return!(null===(y=mi().grecaptcha)||void 0===y||!y.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ds{load(g){return(0,_.Z)(function*(){return new zl(g)})()}clearedOneInstance(){}}const es="recaptcha",Dl={theme:"light",type:"image"};class Gl{constructor(g,y=Object.assign({},Dl),A){this.parameters=y,this.type=es,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=kr(A),this.isInvisible="invisible"===this.parameters.size,Ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const K="string"==typeof g?document.getElementById(g):g;Ne(K,this.auth,"argument-error"),this.container=K,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ds:new Oc,this.validateStartingState()}verify(){var g=this;return(0,_.Z)(function*(){g.assertNotDestroyed();const y=yield g.render(),A=g.getAssertedRecaptcha();return A.getResponse(y)||new Promise(oe=>{const st=bt=>{bt&&(g.tokenChangeListeners.delete(st),oe(bt))};g.tokenChangeListeners.add(st),g.isInvisible&&A.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){Ne(!this.parameters.sitekey,this.auth,"argument-error"),Ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return y=>{if(this.tokenChangeListeners.forEach(A=>A(y)),"function"==typeof g)g(y);else if("string"==typeof g){const A=mi()[g];"function"==typeof A&&A(y)}}}assertNotDestroyed(){Ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,_.Z)(function*(){if(yield g.init(),!g.widgetId){let y=g.container;if(!g.isInvisible){const A=document.createElement("div");y.appendChild(A),y=A}g.widgetId=g.getAssertedRecaptcha().render(y,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,_.Z)(function*(){Ne(Dt()&&!Kn(),g.auth,"internal-error"),yield function qr(){let C=null;return new Promise(g=>{"complete"!==document.readyState?(C=()=>g(),window.addEventListener("load",C)):g()}).catch(g=>{throw C&&window.removeEventListener("load",C),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const y=yield function He(C){return Ct.apply(this,arguments)}(g.auth);Ne(y,g.auth,"internal-error"),g.parameters.sitekey=y})()}getAssertedRecaptcha(){return Ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Rr{constructor(g,y){this.verificationId=g,this.onConfirmation=y}confirm(g){const y=ds._fromVerification(this.verificationId,g);return this.onConfirmation(y)}}function $t(){return($t=(0,_.Z)(function*(C,g,y){const A=kr(C),K=yield Yo(A,g,(0,ee.m9)(y));return new Rr(K,oe=>So(A,oe))})).apply(this,arguments)}function to(){return(to=(0,_.Z)(function*(C,g,y){const A=(0,ee.m9)(C);yield Gi(!1,A,"phone");const K=yield Yo(A.auth,g,(0,ee.m9)(y));return new Rr(K,oe=>oa(A,oe))})).apply(this,arguments)}function ca(){return(ca=(0,_.Z)(function*(C,g,y){const A=(0,ee.m9)(C),K=yield Yo(A.auth,g,(0,ee.m9)(y));return new Rr(K,oe=>q(A,oe))})).apply(this,arguments)}function Yo(C,g,y){return ui.apply(this,arguments)}function ui(){return ui=(0,_.Z)(function*(C,g,y){var A;const K=yield y.verify();try{let oe;if(Ne("string"==typeof K,C,"argument-error"),Ne(y.type===es,C,"argument-error"),oe="string"==typeof g?{phoneNumber:g}:g,"session"in oe){const st=oe.session;if("phoneNumber"in oe)return Ne("enroll"===st.type,C,"internal-error"),(yield function bi(C,g){return zt(C,"POST","/v2/accounts/mfaEnrollment:start",nn(C,g))}(C,{idToken:st.credential,phoneEnrollmentInfo:{phoneNumber:oe.phoneNumber,recaptchaToken:K}})).phoneSessionInfo.sessionInfo;{Ne("signin"===st.type,C,"internal-error");const bt=(null===(A=oe.multiFactorHint)||void 0===A?void 0:A.uid)||oe.multiFactorUid;return Ne(bt,C,"missing-multi-factor-info"),(yield function sr(C,g){return zt(C,"POST","/v2/accounts/mfaSignIn:start",nn(C,g))}(C,{mfaPendingCredential:st.credential,mfaEnrollmentId:bt,phoneSignInInfo:{recaptchaToken:K}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:st}=yield function oo(C,g){return Os.apply(this,arguments)}(C,{phoneNumber:oe.phoneNumber,recaptchaToken:K});return st}}finally{y._reset()}}),ui.apply(this,arguments)}function S(){return(S=(0,_.Z)(function*(C,g){yield Xi((0,ee.m9)(C),g)})).apply(this,arguments)}let x=(()=>{class C{constructor(y){this.providerId=C.PROVIDER_ID,this.auth=kr(y)}verifyPhoneNumber(y,A){return Yo(this.auth,y,(0,ee.m9)(A))}static credential(y,A){return ds._fromVerification(y,A)}static credentialFromResult(y){return C.credentialFromTaggedObject(y)}static credentialFromError(y){return C.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:A,temporaryProof:K}=y;return A&&K?ds._fromTokenResponse(A,K):null}}return C.PROVIDER_ID="phone",C.PHONE_SIGN_IN_METHOD="phone",C})();function w(C,g){return g?nt(g):(Ne(C._popupRedirectResolver,C,"argument-error"),C._popupRedirectResolver)}class O extends Qe{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Hi(g,this._buildIdpRequest())}_linkToIdToken(g,y){return Hi(g,this._buildIdpRequest(y))}_getReauthenticationResolver(g){return Hi(g,this._buildIdpRequest())}_buildIdpRequest(g){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(y.idToken=g),y}}function z(C){return sa(C.auth,new O(C),C.bypassAuthState)}function re(C){const{auth:g,user:y}=C;return Ne(y,g,"internal-error"),Ns(y,new O(C),C.bypassAuthState)}function le(C){return lt.apply(this,arguments)}function lt(){return(lt=(0,_.Z)(function*(C){const{auth:g,user:y}=C;return Ne(y,g,"internal-error"),Xi(y,new O(C),C.bypassAuthState)})).apply(this,arguments)}class Ut{constructor(g,y,A,K,oe=!1){this.auth=g,this.resolver=A,this.user=K,this.bypassAuthState=oe,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var g=this;return new Promise(function(){var y=(0,_.Z)(function*(A,K){g.pendingPromise={resolve:A,reject:K};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(oe){g.reject(oe)}});return function(A,K){return y.apply(this,arguments)}}())}onAuthEvent(g){var y=this;return(0,_.Z)(function*(){const{urlResponse:A,sessionId:K,postBody:oe,tenantId:st,error:bt,type:rn}=g;if(bt)return void y.reject(bt);const Bn={auth:y.auth,requestUri:A,sessionId:K,tenantId:st||void 0,postBody:oe||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(rn)(Bn))}catch(or){y.reject(or)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return z;case"linkViaPopup":case"linkViaRedirect":return le;case"reauthViaPopup":case"reauthViaRedirect":return re;default:it(this.auth,"internal-error")}}resolve(g){je(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){je(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const En=new Fe(2e3,1e4);function $n(){return($n=(0,_.Z)(function*(C,g,y){const A=kr(C);Ue(C,g,co);const K=w(A,y);return new Mo(A,"signInViaPopup",g,K).executeNotNull()})).apply(this,arguments)}function rs(){return(rs=(0,_.Z)(function*(C,g,y){const A=(0,ee.m9)(C);Ue(A.auth,g,co);const K=w(A.auth,y);return new Mo(A.auth,"reauthViaPopup",g,K,A).executeNotNull()})).apply(this,arguments)}function ya(){return(ya=(0,_.Z)(function*(C,g,y){const A=(0,ee.m9)(C);Ue(A.auth,g,co);const K=w(A.auth,y);return new Mo(A.auth,"linkViaPopup",g,K,A).executeNotNull()})).apply(this,arguments)}let Mo=(()=>{class C extends Ut{constructor(y,A,K,oe,st){super(y,A,oe,st),this.provider=K,this.authWindow=null,this.pollId=null,C.currentPopupAction&&C.currentPopupAction.cancel(),C.currentPopupAction=this}executeNotNull(){var y=this;return(0,_.Z)(function*(){const A=yield y.execute();return Ne(A,y.auth,"internal-error"),A})()}onExecution(){var y=this;return(0,_.Z)(function*(){je(1===y.filter.length,"Popup operations only handle one event");const A=_n();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],A),y.authWindow.associatedEvent=A,y.resolver._originValidation(y.auth).catch(K=>{y.reject(K)}),y.resolver._isIframeWebStorageSupported(y.auth,K=>{K||y.reject(et(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(et(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,C.currentPopupAction=null}pollUserCancellation(){const y=()=>{var A,K;this.pollId=null!==(K=null===(A=this.authWindow)||void 0===A?void 0:A.window)&&void 0!==K&&K.closed?window.setTimeout(()=>{this.pollId=null,this.reject(et(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(y,En.get())};y()}}return C.currentPopupAction=null,C})();const Is="pendingRedirect",Or=new Map;class fc extends Ut{constructor(g,y,A=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,A),this.eventId=null}execute(){var g=()=>super.execute,y=this;return(0,_.Z)(function*(){let A=Or.get(y.auth._key());if(!A){try{const oe=(yield function _o(C,g){return eu.apply(this,arguments)}(y.resolver,y.auth))?yield g().call(y):null;A=()=>Promise.resolve(oe)}catch(K){A=()=>Promise.reject(K)}Or.set(y.auth._key(),A)}return y.bypassAuthState||Or.set(y.auth._key(),()=>Promise.resolve(null)),A()})()}onAuthEvent(g){var y=()=>super.onAuthEvent,A=this;return(0,_.Z)(function*(){if("signInViaRedirect"===g.type)return y().call(A,g);if("unknown"!==g.type){if(g.eventId){const K=yield A.auth._redirectUserForId(g.eventId);if(K)return A.user=K,y().call(A,g);A.resolve(null)}}else A.resolve(null)})()}onExecution(){return(0,_.Z)(function*(){})()}cleanUp(){}}function eu(){return(eu=(0,_.Z)(function*(C,g){const y=rd(g),A=Zo(C);if(!(yield A._isAvailable()))return!1;const K="true"===(yield A._get(y));return yield A._remove(y),K})).apply(this,arguments)}function Bo(C,g){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,_.Z)(function*(C,g){return Zo(C)._set(rd(g),"true")})).apply(this,arguments)}function Bd(C,g){Or.set(C._key(),g)}function Zo(C){return nt(C._redirectPersistence)}function rd(C){return we(Is,C.config.apiKey,C.name)}function id(C,g,y){return function sd(C,g,y){return Iu.apply(this,arguments)}(C,g,y)}function Iu(){return(Iu=(0,_.Z)(function*(C,g,y){const A=kr(C);Ue(C,g,co),yield A._initializationPromise;const K=w(A,y);return yield Bo(K,A),K._openRedirect(A,g,"signInViaRedirect")})).apply(this,arguments)}function Ud(C,g,y){return function kc(C,g,y){return Nc.apply(this,arguments)}(C,g,y)}function Nc(){return(Nc=(0,_.Z)(function*(C,g,y){const A=(0,ee.m9)(C);Ue(A.auth,g,co),yield A.auth._initializationPromise;const K=w(A.auth,y);yield Bo(K,A.auth);const oe=yield Sl(A);return K._openRedirect(A.auth,g,"reauthViaRedirect",oe)})).apply(this,arguments)}function Fc(C,g,y){return function wu(C,g,y){return Bs.apply(this,arguments)}(C,g,y)}function Bs(){return(Bs=(0,_.Z)(function*(C,g,y){const A=(0,ee.m9)(C);Ue(A.auth,g,co),yield A.auth._initializationPromise;const K=w(A.auth,y);yield Gi(!1,A,g.providerId),yield Bo(K,A.auth);const oe=yield Sl(A);return K._openRedirect(A.auth,g,"linkViaRedirect",oe)})).apply(this,arguments)}function ol(){return(ol=(0,_.Z)(function*(C,g){return yield kr(C)._initializationPromise,tu(C,g,!1)})).apply(this,arguments)}function tu(C,g){return xr.apply(this,arguments)}function xr(){return(xr=(0,_.Z)(function*(C,g,y=!1){const A=kr(C),K=w(A,g),st=yield new fc(A,K,y).execute();return st&&!y&&(delete st.user._redirectEventId,yield A._persistUserIfCurrent(st.user),yield A._setRedirectUser(null,g)),st})).apply(this,arguments)}function Sl(C){return Us.apply(this,arguments)}function Us(){return(Us=(0,_.Z)(function*(C){const g=_n(`${C.uid}:::`);return C._redirectEventId=g,yield C.auth._setRedirectUser(C),yield C.auth._persistUserIfCurrent(C),g})).apply(this,arguments)}class Al{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let y=!1;return this.consumers.forEach(A=>{this.isEventForConsumer(g,A)&&(y=!0,this.sendToConsumer(g,A),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function pc(C){switch(C.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gs(C);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=g,y=!0)),y}sendToConsumer(g,y){var A;if(g.error&&!gs(g)){const K=(null===(A=g.error.code)||void 0===A?void 0:A.split("auth/")[1])||"internal-error";y.onError(et(this.auth,K))}else y.onAuthEvent(g)}isEventForConsumer(g,y){const A=null===y.eventId||!!g.eventId&&g.eventId===y.eventId;return y.filter.includes(g.type)&&A}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(va(g))}saveEventToCache(g){this.cachedEventUids.add(va(g)),this.lastProcessedEventTime=Date.now()}}function va(C){return[C.type,C.eventId,C.sessionId,C.tenantId].filter(g=>g).join("-")}function gs({type:C,error:g}){return"unknown"===C&&"auth/no-auth-event"===(null==g?void 0:g.code)}function ni(C){return no.apply(this,arguments)}function no(){return(no=(0,_.Z)(function*(C,g={}){return zt(C,"GET","/v1/projects",g)})).apply(this,arguments)}const Cu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xl=/^https?/;function ro(){return(ro=(0,_.Z)(function*(C){if(C.config.emulator)return;const{authorizedDomains:g}=yield ni(C);for(const y of g)try{if(Lc(y))return}catch{}it(C,"unauthorized-domain")})).apply(this,arguments)}function Lc(C){const g=gt(),{protocol:y,hostname:A}=new URL(g);if(C.startsWith("chrome-extension://")){const st=new URL(C);return""===st.hostname&&""===A?"chrome-extension:"===y&&C.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===y&&st.hostname===A}if(!xl.test(y))return!1;if(Cu.test(C))return A===C;const K=C.replace(/\./g,"\\.");return new RegExp("^(.+\\."+K+"|"+K+")$","i").test(A)}const gc=new Fe(3e4,6e4);function Uo(){const C=mi().___jsl;if(null!=C&&C.H)for(const g of Object.keys(C.H))if(C.H[g].r=C.H[g].r||[],C.H[g].L=C.H[g].L||[],C.H[g].r=[...C.H[g].L],C.CP)for(let y=0;y<C.CP.length;y++)C.CP[y]=null}let Xo=null;const nu=new Fe(5e3,15e3),za="__/auth/iframe",Qo="emulator/auth/iframe",ru={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ga=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Vd(C){const g=C.config;Ne(g.authDomain,C,"auth-domain-config-required");const y=g.emulator?Ve(g,Qo):`https://${C.config.authDomain}/${za}`,A={apiKey:g.apiKey,appName:C.name,v:ce.SDK_VERSION},K=Ga.get(C.config.apiHost);K&&(A.eid=K);const oe=C._getFrameworks();return oe.length&&(A.fw=oe.join(",")),`${y}?${(0,ee.xO)(A).slice(1)}`}function B(){return B=(0,_.Z)(function*(C){const g=yield function Eo(C){return Xo=Xo||function Pa(C){return new Promise((g,y)=>{var A,K,oe;function st(){Uo(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Uo(),y(et(C,"network-request-failed"))},timeout:gc.get()})}if(null!==(K=null===(A=mi().gapi)||void 0===A?void 0:A.iframes)&&void 0!==K&&K.Iframe)g(gapi.iframes.getContext());else{if(null===(oe=mi().gapi)||void 0===oe||!oe.load){const bt=Xn("iframefcb");return mi()[bt]=()=>{gapi.load?st():y(et(C,"network-request-failed"))},Wn(`https://apis.google.com/js/api.js?onload=${bt}`).catch(rn=>y(rn))}st()}}).catch(g=>{throw Xo=null,g})}(C),Xo}(C),y=mi().gapi;return Ne(y,C,"internal-error"),g.open({where:document.body,url:Vd(C),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ru,dontclear:!0},A=>new Promise(function(){var K=(0,_.Z)(function*(oe,st){yield A.restyle({setHideOnLeave:!1});const bt=et(C,"network-request-failed"),rn=mi().setTimeout(()=>{st(bt)},nu.get());function Bn(){mi().clearTimeout(rn),oe(A)}A.ping(Bn).then(Bn,()=>{st(bt)})});return function(oe,st){return K.apply(this,arguments)}}()))}),B.apply(this,arguments)}const Z={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Te=500,dt=600,Rt="_blank",Wt="http://localhost";class Un{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const jr="__/auth/handler",Nr="emulator/auth/handler",Po=encodeURIComponent("fac");function ws(C,g,y,A,K,oe){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,_.Z)(function*(C,g,y,A,K,oe){Ne(C.config.authDomain,C,"auth-domain-config-required"),Ne(C.config.apiKey,C,"invalid-api-key");const st={apiKey:C.config.apiKey,appName:C.name,authType:y,redirectUrl:A,v:ce.SDK_VERSION,eventId:K};if(g instanceof co){g.setDefaultLanguage(C.languageCode),st.providerId=g.providerId||"",(0,ee.xb)(g.getCustomParameters())||(st.customParameters=JSON.stringify(g.getCustomParameters()));for(const[or,ar]of Object.entries(oe||{}))st[or]=ar}if(g instanceof ti){const or=g.getScopes().filter(ar=>""!==ar);or.length>0&&(st.scopes=or.join(","))}C.tenantId&&(st.tid=C.tenantId);const bt=st;for(const or of Object.keys(bt))void 0===bt[or]&&delete bt[or];const rn=yield C._getAppCheckToken(),Bn=rn?`#${Po}=${encodeURIComponent(rn)}`:"";return`${function Vs({config:C}){return C.emulator?Ve(C,Nr):`https://${C.authDomain}/${jr}`}(C)}?${(0,ee.xO)(bt).slice(1)}${Bn}`})).apply(this,arguments)}const Wl="webStorageSupport",Io=class Ti{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Js,this._completeRedirectFn=tu,this._overrideRedirectResult=Bd}_openPopup(g,y,A,K){var oe=this;return(0,_.Z)(function*(){var st;je(null===(st=oe.eventManagers[g._key()])||void 0===st?void 0:st.manager,"_initialize() not called before _openPopup()");const bt=yield ws(g,y,A,gt(),K);return function Nn(C,g,y,A=Te,K=dt){const oe=Math.max((window.screen.availHeight-K)/2,0).toString(),st=Math.max((window.screen.availWidth-A)/2,0).toString();let bt="";const rn=Object.assign(Object.assign({},Z),{width:A.toString(),height:K.toString(),top:oe,left:st}),Bn=(0,ee.z$)().toLowerCase();y&&(bt=un(Bn)?Rt:y),Ot(Bn)&&(g=g||Wt,rn.scrollbars="yes");const or=Object.entries(rn).reduce((Ki,[Ca,Mu])=>`${Ki}${Ca}=${Mu},`,"");if(function Ce(C=(0,ee.z$)()){var g;return Nt(C)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(Bn)&&"_self"!==bt)return function ir(C,g){const y=document.createElement("a");y.href=C,y.target=g;const A=document.createEvent("MouseEvent");A.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(A)}(g||"",bt),new Un(null);const ar=window.open(g||"",bt,or);Ne(ar,C,"popup-blocked");try{ar.focus()}catch{}return new Un(ar)}(g,bt,_n())})()}_openRedirect(g,y,A,K){var oe=this;return(0,_.Z)(function*(){return yield oe._originValidation(g),function Yc(C){mi().location.href=C}(yield ws(g,y,A,gt(),K)),new Promise(()=>{})})()}_initialize(g){const y=g._key();if(this.eventManagers[y]){const{manager:K,promise:oe}=this.eventManagers[y];return K?Promise.resolve(K):(je(oe,"If manager is not set, promise should be"),oe)}const A=this.initAndGetManager(g);return this.eventManagers[y]={promise:A},A.catch(()=>{delete this.eventManagers[y]}),A}initAndGetManager(g){var y=this;return(0,_.Z)(function*(){const A=yield function P(C){return B.apply(this,arguments)}(g),K=new Al(g);return A.register("authEvent",oe=>(Ne(null==oe?void 0:oe.authEvent,g,"invalid-auth-event"),{status:K.onEvent(oe.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[g._key()]={manager:K},y.iframes[g._key()]=A,K})()}_isIframeWebStorageSupported(g,y){this.iframes[g._key()].send(Wl,{type:Wl},K=>{var oe;const st=null===(oe=null==K?void 0:K[0])||void 0===oe?void 0:oe[Wl];void 0!==st&&y(!!st),it(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function Hr(C){return ro.apply(this,arguments)}(g)),this.originValidationPromises[y]}get _shouldInitProactively(){return It()||ut()||Nt()}};class iu{constructor(g){this.factorId=g}_process(g,y,A){switch(y.type){case"enroll":return this._finalizeEnroll(g,y.credential,A);case"signin":return this._finalizeSignIn(g,y.credential);default:return De("unexpected MultiFactorSessionType")}}}class jd extends iu{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new jd(g)}_finalizeEnroll(g,y,A){return function Bi(C,g){return zt(C,"POST","/v2/accounts/mfaEnrollment:finalize",nn(C,g))}(g,{idToken:y,displayName:A,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,y){return function Pc(C,g){return zt(C,"POST","/v2/accounts/mfaSignIn:finalize",nn(C,g))}(g,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let io=(()=>{class C{constructor(){}static assertion(y){return jd._fromCredential(y)}}return C.FACTOR_ID="phone",C})();var al="@firebase/auth";class Kl{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var y=this;return(0,_.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const y=this.auth.onIdTokenChanged(A=>{g((null==A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,y),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const y=this.internalListeners.get(g);y&&(this.internalListeners.delete(g),y(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ml(){return window}(0,ee.Pz)("authIdTokenMaxAge"),function xh(C){(0,ce._registerComponent)(new _e.wA("auth",(g,{options:y})=>{const A=g.getProvider("app").getImmediate(),K=g.getProvider("heartbeat"),oe=g.getProvider("app-check-internal"),{apiKey:st,authDomain:bt}=A.options;Ne(st&&!st.includes(":"),"invalid-api-key",{appName:A.name}),Ne(!(null!=bt&&bt.includes(":")),"argument-error",{appName:A.name});const rn={apiKey:st,authDomain:bt,clientPlatform:C,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xe(C)},Bn=new qi(A,K,oe,rn);return function Ur(C,g){const y=(null==g?void 0:g.persistence)||[],A=(Array.isArray(y)?y:[y]).map(nt);null!=g&&g.errorMap&&C._updateErrorMap(g.errorMap),C._initializeWithPersistence(A,null==g?void 0:g.popupRedirectResolver)}(Bn,y),Bn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,y,A)=>{g.getProvider("auth-internal").initialize()})),(0,ce._registerComponent)(new _e.wA("auth-internal",g=>{const y=kr(g.getProvider("auth").getImmediate());return new Kl(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ce.registerVersion)(al,"0.23.1",function ql(C){switch(C){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(C)),(0,ce.registerVersion)(al,"0.23.1","esm2017")}("Browser");const Ph=2e3;function ll(){return ll=(0,_.Z)(function*(C,g,y){var A;const{BuildInfo:K}=Ml();je(g.sessionId,"AuthEvent did not contain a session ID");const oe=yield function Pl(C){return mc.apply(this,arguments)}(g.sessionId),st={};return Nt()?st.ibi=K.packageName:Ge()?st.apn=K.packageName:it(C,"operation-not-supported-in-this-environment"),K.displayName&&(st.appDisplayName=K.displayName),st.sessionId=oe,ws(C,y,g.type,void 0,null!==(A=g.eventId)&&void 0!==A?A:void 0,st)}),ll.apply(this,arguments)}function ld(){return(ld=(0,_.Z)(function*(C){const{BuildInfo:g}=Ml(),y={};Nt()?y.iosBundleId=g.packageName:Ge()?y.androidPackageName=g.packageName:it(C,"operation-not-supported-in-this-environment"),yield ni(C,y)})).apply(this,arguments)}function Oa(){return(Oa=(0,_.Z)(function*(C,g,y){const{cordova:A}=Ml();let K=()=>{};try{yield new Promise((oe,st)=>{let bt=null;function rn(){var ar;oe();const Ki=null===(ar=A.plugins.browsertab)||void 0===ar?void 0:ar.close;"function"==typeof Ki&&Ki(),"function"==typeof(null==y?void 0:y.close)&&y.close()}function Bn(){bt||(bt=window.setTimeout(()=>{st(et(C,"redirect-cancelled-by-user"))},Ph))}function or(){"visible"===(null==document?void 0:document.visibilityState)&&Bn()}g.addPassiveListener(rn),document.addEventListener("resume",Bn,!1),Ge()&&document.addEventListener("visibilitychange",or,!1),K=()=>{g.removePassiveListener(rn),document.removeEventListener("resume",Bn,!1),document.removeEventListener("visibilitychange",or,!1),bt&&window.clearTimeout(bt)}})}finally{K()}})).apply(this,arguments)}function mc(){return(mc=(0,_.Z)(function*(C){const g=function yc(C){if(je(/[0-9a-zA-Z]+/.test(C),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(C);const g=new ArrayBuffer(C.length),y=new Uint8Array(g);for(let A=0;A<C.length;A++)y[A]=C.charCodeAt(A);return y}(C),y=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(y)).map(K=>K.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Oh=20;class Ea extends Al{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(y=>y(g)),super.onEvent(g)}initialized(){var g=this;return(0,_.Z)(function*(){yield g.initPromise})()}}function cd(C){return vc.apply(this,arguments)}function vc(){return(vc=(0,_.Z)(function*(C){const g=yield Yl()._get(wo(C));return g&&(yield Yl()._remove(wo(C))),g})).apply(this,arguments)}function dd(){const C=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let y=0;y<Oh;y++){const A=Math.floor(Math.random()*g.length);C.push(g.charAt(A))}return C.join("")}function Yl(){return nt(Wi)}function wo(C){return we("authEvent",C.config.apiKey,C.name)}function Zl(C){if(null==C||!C.includes("?"))return{};const[g,...y]=C.split("?");return(0,ee.zd)(y.join("?"))}const _c=class Su{constructor(){this._redirectPersistence=Js,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=tu,this._overrideRedirectResult=Bd}_initialize(g){var y=this;return(0,_.Z)(function*(){const A=g._key();let K=y.eventManagers.get(A);return K||(K=new Ea(g),y.eventManagers.set(A,K),y.attachCallbackListeners(g,K)),K})()}_openPopup(g){it(g,"operation-not-supported-in-this-environment")}_openRedirect(g,y,A,K){var oe=this;return(0,_.Z)(function*(){!function $c(C){var g,y,A,K,oe,st,bt,rn,Bn,or;const ar=Ml();Ne("function"==typeof(null===(g=null==ar?void 0:ar.universalLinks)||void 0===g?void 0:g.subscribe),C,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ne(typeof(null===(y=null==ar?void 0:ar.BuildInfo)||void 0===y?void 0:y.packageName)<"u",C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ne("function"==typeof(null===(oe=null===(K=null===(A=null==ar?void 0:ar.cordova)||void 0===A?void 0:A.plugins)||void 0===K?void 0:K.browsertab)||void 0===oe?void 0:oe.openUrl),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ne("function"==typeof(null===(rn=null===(bt=null===(st=null==ar?void 0:ar.cordova)||void 0===st?void 0:st.plugins)||void 0===bt?void 0:bt.browsertab)||void 0===rn?void 0:rn.isAvailable),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ne("function"==typeof(null===(or=null===(Bn=null==ar?void 0:ar.cordova)||void 0===Bn?void 0:Bn.InAppBrowser)||void 0===or?void 0:or.open),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const st=yield oe._initialize(g);yield st.initialized(),st.resetRedirect(),function sl(){Or.clear()}(),yield oe._originValidation(g);const bt=function su(C,g,y=null){return{type:g,eventId:y,urlResponse:null,sessionId:dd(),postBody:null,tenantId:C.tenantId,error:et(C,"no-auth-event")}}(g,A,K);yield function Ol(C,g){return Yl()._set(wo(C),g)}(g,bt);const rn=yield function ad(C,g,y){return ll.apply(this,arguments)}(g,bt,y),Bn=yield function ms(C){const{cordova:g}=Ml();return new Promise(y=>{g.plugins.browsertab.isAvailable(A=>{let K=null;A?g.plugins.browsertab.openUrl(C):K=g.InAppBrowser.open(C,function he(C=(0,ee.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(C)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(C)}()?"_blank":"_system","location=yes"),y(K)})})}(rn);return function Wa(C,g,y){return Oa.apply(this,arguments)}(g,st,Bn)})()}_isIframeWebStorageSupported(g,y){throw new Error("Method not implemented.")}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function zd(C){return ld.apply(this,arguments)}(g)),this.originValidationPromises[y]}attachCallbackListeners(g,y){const{universalLinks:A,handleOpenURL:K,BuildInfo:oe}=Ml(),st=setTimeout((0,_.Z)(function*(){yield cd(g),y.onEvent(kh())}),500),bt=function(){var or=(0,_.Z)(function*(ar){clearTimeout(st);const Ki=yield cd(g);let Ca=null;Ki&&null!=ar&&ar.url&&(Ca=function ud(C,g){var y,A;const K=function hd(C){const g=Zl(C),y=g.link?decodeURIComponent(g.link):void 0,A=Zl(y).link,K=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return Zl(K).link||K||A||y||C}(g);if(K.includes("/__/auth/callback")){const oe=Zl(K),st=oe.firebaseError?function Tu(C){try{return JSON.parse(C)}catch{return null}}(decodeURIComponent(oe.firebaseError)):null,bt=null===(A=null===(y=null==st?void 0:st.code)||void 0===y?void 0:y.split("auth/"))||void 0===A?void 0:A[1],rn=bt?et(bt):null;return rn?{type:C.type,eventId:C.eventId,tenantId:C.tenantId,error:rn,urlResponse:null,sessionId:null,postBody:null}:{type:C.type,eventId:C.eventId,tenantId:C.tenantId,sessionId:C.sessionId,urlResponse:K,postBody:null}}return null}(Ki,ar.url)),y.onEvent(Ca||kh())});return function(Ki){return or.apply(this,arguments)}}();typeof A<"u"&&"function"==typeof A.subscribe&&A.subscribe(null,bt);const rn=K,Bn=`${oe.packageName.toLowerCase()}://`;Ml().handleOpenURL=function(){var or=(0,_.Z)(function*(ar){if(ar.toLowerCase().startsWith(Bn)&&bt({url:ar}),"function"==typeof rn)try{rn(ar)}catch(Ki){console.error(Ki)}});return function(ar){return or.apply(this,arguments)}}()}};function kh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:et("no-auth-event")}}const Sp=1e3;function js(){var C;return(null===(C=null==self?void 0:self.location)||void 0===C?void 0:C.protocol)||null}function Xl(C=(0,ee.z$)()){return!("file:"!==js()&&"ionic:"!==js()&&"capacitor:"!==js()||!C.toLowerCase().match(/iphone|ipad|ipod|android/))}function Rf(){try{const C=self.localStorage,g=_n();if(C)return C.setItem(g,"1"),C.removeItem(g),!function Au(C=(0,ee.z$)()){return function Ia(){return(0,ee.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Gd(C=(0,ee.z$)()){return/Edge\/\d+/.test(C)}(C)}()||(0,ee.hl)()}catch{return Fh()&&(0,ee.hl)()}return!1}function Fh(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Zr(){return(function pd(){return"http:"===js()||"https:"===js()}()||(0,ee.ru)()||Xl())&&!function ou(){return(0,ee.b$)()||(0,ee.UG)()}()&&Rf()&&!Fh()}function Lh(){return Xl()&&typeof document<"u"}function au(){return(au=(0,_.Z)(function*(){return!!Lh()&&new Promise(C=>{const g=setTimeout(()=>{C(!1)},Sp);document.addEventListener("deviceready",()=>{clearTimeout(g),C(!0)})})})).apply(this,arguments)}const wa={LOCAL:"local",NONE:"none",SESSION:"session"},Ic=Ne,Kd="persistence";function Ru(C){return wc.apply(this,arguments)}function wc(){return(wc=(0,_.Z)(function*(C){yield C._initializationPromise;const g=qd(),y=we(Kd,C.config.apiKey,C.name);g&&g.setItem(y,C._getPersistence())})).apply(this,arguments)}function qd(){var C;try{return(null===(C=function Wd(){return typeof window<"u"?window:null}())||void 0===C?void 0:C.sessionStorage)||null}catch{return null}}const Cc=Ne;class Jo{constructor(){this.browserResolver=nt(Io),this.cordovaResolver=nt(_c),this.underlyingResolver=null,this._redirectPersistence=Js,this._completeRedirectFn=tu,this._overrideRedirectResult=Bd}_initialize(g){var y=this;return(0,_.Z)(function*(){return yield y.selectUnderlyingResolver(),y.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,y,A,K){var oe=this;return(0,_.Z)(function*(){return yield oe.selectUnderlyingResolver(),oe.assertedUnderlyingResolver._openPopup(g,y,A,K)})()}_openRedirect(g,y,A,K){var oe=this;return(0,_.Z)(function*(){return yield oe.selectUnderlyingResolver(),oe.assertedUnderlyingResolver._openRedirect(g,y,A,K)})()}_isIframeWebStorageSupported(g,y){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,y)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return Lh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Cc(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,_.Z)(function*(){if(g.underlyingResolver)return;const y=yield function xu(){return au.apply(this,arguments)}();g.underlyingResolver=y?g.cordovaResolver:g.browserResolver})()}}function cl(C){return C.unwrap()}function Pf(C){return Of(C)}function Of(C){const{_tokenResponse:g}=C instanceof ee.ZR?C.customData:C;if(!g)return null;if(!(C instanceof ee.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return x.credentialFromResult(C);const y=g.providerId;if(!y||y===ze.PASSWORD)return null;let A;switch(y){case ze.GOOGLE:A=ho;break;case ze.FACEBOOK:A=uo;break;case ze.GITHUB:A=fa;break;case ze.TWITTER:A=ra;break;default:const{oauthIdToken:K,oauthAccessToken:oe,oauthTokenSecret:st,pendingToken:bt,nonce:rn}=g;return oe||st||K||bt?bt?y.startsWith("saml.")?_s._create(y,bt):Yi._fromParams({providerId:y,signInMethod:y,pendingToken:bt,idToken:K,accessToken:oe}):new ks(y).credential({idToken:K,accessToken:oe,rawNonce:rn}):null}return C instanceof ee.ZR?A.credentialFromError(C):A.credentialFromResult(C)}function ka(C,g){return g.catch(y=>{throw y instanceof ee.ZR&&function gd(C,g){var y;const A=null===(y=g.customData)||void 0===y?void 0:y._tokenResponse;if("auth/multi-factor-auth-required"===(null==g?void 0:g.code))g.resolver=new md(C,function Ri(C,g){var y;const A=(0,ee.m9)(C),K=g;return Ne(g.customData.operationType,A,"argument-error"),Ne(null===(y=K.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,A,"argument-error"),wr._fromError(A,K)}(C,g));else if(A){const K=Of(g),oe=g;K&&(oe.credential=K,oe.tenantId=A.tenantId||void 0,oe.email=A.email||void 0,oe.phoneNumber=A.phoneNumber||void 0)}}(C,y),y}).then(y=>{const K=y.user;return{operationType:y.operationType,credential:Pf(y),additionalUserInfo:_l(y),user:kl.getOrCreate(K)}})}function us(C,g){return cu.apply(this,arguments)}function cu(){return(cu=(0,_.Z)(function*(C,g){const y=yield g;return{verificationId:y.verificationId,confirm:A=>ka(C,y.confirm(A))}})).apply(this,arguments)}class md{constructor(g,y){this.resolver=y,this.auth=function Mf(C){return C.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return ka(cl(this.auth),this.resolver.resolveSignIn(g))}}class kl{constructor(g){this._delegate=g,this.multiFactor=function Ls(C){const g=(0,ee.m9)(C);return Xs.has(g)||Xs.set(g,Es._fromUser(g)),Xs.get(g)}(g)}static getOrCreate(g){return kl.USER_MAP.has(g)||kl.USER_MAP.set(g,new kl(g)),kl.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var y=this;return(0,_.Z)(function*(){return ka(y.auth,oa(y._delegate,g))})()}linkWithPhoneNumber(g,y){var A=this;return(0,_.Z)(function*(){return us(A.auth,function Di(C,g,y){return to.apply(this,arguments)}(A._delegate,g,y))})()}linkWithPopup(g){var y=this;return(0,_.Z)(function*(){return ka(y.auth,function $s(C,g,y){return ya.apply(this,arguments)}(y._delegate,g,Jo))})()}linkWithRedirect(g){var y=this;return(0,_.Z)(function*(){return yield Ru(kr(y.auth)),Fc(y._delegate,g,Jo)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var y=this;return(0,_.Z)(function*(){return ka(y.auth,q(y._delegate,g))})()}reauthenticateWithPhoneNumber(g,y){return us(this.auth,function Eu(C,g,y){return ca.apply(this,arguments)}(this._delegate,g,y))}reauthenticateWithPopup(g){return ka(this.auth,function Ii(C,g,y){return rs.apply(this,arguments)}(this._delegate,g,Jo))}reauthenticateWithRedirect(g){var y=this;return(0,_.Z)(function*(){return yield Ru(kr(y.auth)),Ud(y._delegate,g,Jo)})()}sendEmailVerification(g){return function nl(C,g){return ga.apply(this,arguments)}(this._delegate,g)}unlink(g){var y=this;return(0,_.Z)(function*(){return yield function Ja(C,g){return as.apply(this,arguments)}(y._delegate,g),y})()}updateEmail(g){return function cs(C,g){return Vr((0,ee.m9)(C),g,null)}(this._delegate,g)}updatePassword(g){return function Fs(C,g){return Vr((0,ee.m9)(C),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function Pr(C,g){return S.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function fs(C,g){return xa.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,y){return function ls(C,g,y){return xo.apply(this,arguments)}(this._delegate,g,y)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}kl.USER_MAP=new WeakMap;const yd=Ne;let uu=(()=>{class C{constructor(y,A){if(this.app=y,A.isInitialized())return this._delegate=A.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:K}=y.options;yd(K,"invalid-api-key",{appName:y.name}),yd(K,"invalid-api-key",{appName:y.name});const oe=typeof window<"u"?Jo:void 0;this._delegate=A.initialize({options:{persistence:Nl(K,y.name),popupRedirectResolver:oe}}),this._delegate._updateErrorMap(ct),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?kl.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(y){this._delegate.languageCode=y}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(y){this._delegate.tenantId=y}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(y,A){!function se(C,g,y){const A=kr(C);Ne(A._canInitEmulator,A,"emulator-config-failed"),Ne(/^https?:\/\//.test(g),A,"invalid-emulator-scheme");const K=!(null==y||!y.disableWarnings),oe=be(g),{host:st,port:bt}=function Ye(C){const g=be(C),y=/(\/\/)?([^?#/]+)/.exec(C.substr(g.length));if(!y)return{host:"",port:null};const A=y[2].split("@").pop()||"",K=/^(\[[^\]]+\])(:|$)/.exec(A);if(K){const oe=K[1];return{host:oe,port:me(A.substr(oe.length+1))}}{const[oe,st]=A.split(":");return{host:oe,port:me(st)}}}(g);A.config.emulator={url:`${oe}//${st}${null===bt?"":`:${bt}`}/`},A.settings.appVerificationDisabledForTesting=!0,A.emulatorConfig=Object.freeze({host:st,port:bt,protocol:oe.replace(":",""),options:Object.freeze({disableWarnings:K})}),K||function Je(){function C(){const g=document.createElement("p"),y=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",C):C())}()}(this._delegate,y,A)}applyActionCode(y){return function Ao(C,g){return xi.apply(this,arguments)}(this._delegate,y)}checkActionCode(y){return ja(this._delegate,y)}confirmPasswordReset(y,A){return function Qi(C,g,y){return hs.apply(this,arguments)}(this._delegate,y,A)}createUserWithEmailAndPassword(y,A){var K=this;return(0,_.Z)(function*(){return ka(K._delegate,function aa(C,g,y){return Ys.apply(this,arguments)}(K._delegate,y,A))})()}fetchProvidersForEmail(y){return this.fetchSignInMethodsForEmail(y)}fetchSignInMethodsForEmail(y){return function zo(C,g){return Fo.apply(this,arguments)}(this._delegate,y)}isSignInWithEmailLink(y){return function Ha(C,g){const y=os.parseLink(g);return"EMAIL_SIGNIN"===(null==y?void 0:y.operation)}(0,y)}getRedirectResult(){var y=this;return(0,_.Z)(function*(){yd(Zr(),y._delegate,"operation-not-supported-in-this-environment");const A=yield function od(C,g){return ol.apply(this,arguments)}(y._delegate,Jo);return A?ka(y._delegate,Promise.resolve(A)):{credential:null,user:null}})()}addFrameworkForLogging(y){!function Nh(C,g){kr(C)._logFramework(g)}(this._delegate,y)}onAuthStateChanged(y,A,K){const{next:oe,error:st,complete:bt}=Bc(y,A,K);return this._delegate.onAuthStateChanged(oe,st,bt)}onIdTokenChanged(y,A,K){const{next:oe,error:st,complete:bt}=Bc(y,A,K);return this._delegate.onIdTokenChanged(oe,st,bt)}sendSignInLinkToEmail(y,A){return function el(C,g,y){return Sa.apply(this,arguments)}(this._delegate,y,A)}sendPasswordResetEmail(y,A){return function $r(C,g,y){return ii.apply(this,arguments)}(this._delegate,y,A||void 0)}setPersistence(y){var A=this;return(0,_.Z)(function*(){let K;switch(function Ql(C,g){Ic(Object.values(wa).includes(g),C,"invalid-persistence-type"),(0,ee.b$)()?Ic(g!==wa.SESSION,C,"unsupported-persistence-type"):(0,ee.UG)()?Ic(g===wa.NONE,C,"unsupported-persistence-type"):Fh()?Ic(g===wa.NONE||g===wa.LOCAL&&(0,ee.hl)(),C,"unsupported-persistence-type"):Ic(g===wa.NONE||Rf(),C,"unsupported-persistence-type")}(A._delegate,y),y){case wa.SESSION:K=Js;break;case wa.LOCAL:K=(yield nt(ci)._isAvailable())?ci:Wi;break;case wa.NONE:K=Yt;break;default:return it("argument-error",{appName:A._delegate.name})}return A._delegate.setPersistence(K)})()}signInAndRetrieveDataWithCredential(y){return this.signInWithCredential(y)}signInAnonymously(){return ka(this._delegate,function Pi(C){return po.apply(this,arguments)}(this._delegate))}signInWithCredential(y){return ka(this._delegate,So(this._delegate,y))}signInWithCustomToken(y){return ka(this._delegate,function M(C,g){return F.apply(this,arguments)}(this._delegate,y))}signInWithEmailAndPassword(y,A){return ka(this._delegate,function yl(C,g,y){return So((0,ee.m9)(C),Ho.credential(g,y))}(this._delegate,y,A))}signInWithEmailLink(y,A){return ka(this._delegate,function ns(C,g,y){return Rs.apply(this,arguments)}(this._delegate,y,A))}signInWithPhoneNumber(y,A){return us(this._delegate,function Yr(C,g,y){return $t.apply(this,arguments)}(this._delegate,y,A))}signInWithPopup(y){var A=this;return(0,_.Z)(function*(){return yd(Zr(),A._delegate,"operation-not-supported-in-this-environment"),ka(A._delegate,function Hn(C,g,y){return $n.apply(this,arguments)}(A._delegate,y,Jo))})()}signInWithRedirect(y){var A=this;return(0,_.Z)(function*(){return yd(Zr(),A._delegate,"operation-not-supported-in-this-environment"),yield Ru(A._delegate),id(A._delegate,y,Jo)})()}updateCurrentUser(y){return this._delegate.updateCurrentUser(y)}verifyPasswordResetCode(y){return function Ks(C,g){return qs.apply(this,arguments)}(this._delegate,y)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return C.Persistence=wa,C})();function Bc(C,g,y){let A=C;"function"!=typeof C&&({next:A,error:g,complete:y}=C);const K=A;return{next:st=>K(st&&kl.getOrCreate(st)),error:g,complete:y}}function Nl(C,g){const y=function lu(C,g){const y=qd();if(!y)return[];const A=we(Kd,C,g);switch(y.getItem(A)){case wa.NONE:return[Yt];case wa.LOCAL:return[ci,Js];case wa.SESSION:return[Js];default:return[]}}(C,g);if(typeof self<"u"&&!y.includes(ci)&&y.push(ci),typeof window<"u")for(const A of[Wi,Js])y.includes(A)||y.push(A);return y.includes(Yt)||y.push(Yt),y}class ul{constructor(){this.providerId="phone",this._delegate=new x(cl(m.Z.auth()))}static credential(g,y){return x.credential(g,y)}verifyPhoneNumber(g,y){return this._delegate.verifyPhoneNumber(g,y)}unwrap(){return this._delegate}}ul.PHONE_SIGN_IN_METHOD=x.PHONE_SIGN_IN_METHOD,ul.PROVIDER_ID=x.PROVIDER_ID;const Jl=Ne;class $h{constructor(g,y,A=m.Z.app()){var K;Jl(null===(K=A.options)||void 0===K?void 0:K.apiKey,"invalid-api-key",{appName:A.name}),this._delegate=new Gl(g,y,A.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function kf(C){C.INTERNAL.registerComponent(new _e.wA("auth-compat",g=>{const y=g.getProvider("app-compat").getImmediate(),A=g.getProvider("auth");return new uu(y,A)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ee_EMAIL_SIGNIN,PASSWORD_RESET:Ee_PASSWORD_RESET,RECOVER_EMAIL:Ee_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Ee_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Ee_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Ee_VERIFY_EMAIL}},EmailAuthProvider:Ho,FacebookAuthProvider:uo,GithubAuthProvider:fa,GoogleAuthProvider:ho,OAuthProvider:ks,SAMLAuthProvider:No,PhoneAuthProvider:ul,PhoneMultiFactorGenerator:io,RecaptchaVerifier:$h,TwitterAuthProvider:ra,Auth:uu,AuthCredential:Qe,Error:ee.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),C.registerVersion("@firebase/auth-compat","0.4.1")}(m.Z)},5861:(In,Et,j)=>{"use strict";function _(ee,ce,$e,Se,_e,Me,ze){try{var ye=ee[Me](ze),ae=ye.value}catch(Ee){return void $e(Ee)}ye.done?ce(ae):Promise.resolve(ae).then(Se,_e)}function m(ee){return function(){var ce=this,$e=arguments;return new Promise(function(Se,_e){var Me=ee.apply(ce,$e);function ze(ae){_(Me,Se,_e,ze,ye,"next",ae)}function ye(ae){_(Me,Se,_e,ze,ye,"throw",ae)}ze(void 0)})}}j.d(Et,{Z:()=>m})}},In=>{In(In.s=1183)}]);