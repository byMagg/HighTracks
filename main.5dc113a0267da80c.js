(self.webpackChunkapp=self.webpackChunkapp||[]).push([[179],{6217:(yn,gt,H)=>{"use strict";H.d(gt,{nm:()=>re});var E=H(4976);H(4650),H(259);var Y=H(5861),et=H(6881),Ze=H(4859),xt=H(2090),Be=H(1877);const Oe=new Map,Pe={activated:!1,tokenObservers:[]},Ie={initialized:!1,enabled:!1};function $e(ut){return Oe.get(ut)||Object.assign({},Pe)}function _t(){return Ie}const ct="https://content-firebaseappcheck.googleapis.com/v1",ke="exchangeDebugToken",Fe={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class lt{constructor(tt,Et,qt,an,Vn){if(this.operation=tt,this.retryPolicy=Et,this.getWaitDuration=qt,this.lowerBound=an,this.upperBound=Vn,this.pending=null,this.nextErrorWaitInterval=an,an>Vn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(tt){var Et=this;return(0,Y.Z)(function*(){Et.stop();try{Et.pending=new xt.BH,yield function vt(ut){return new Promise(tt=>{setTimeout(tt,ut)})}(Et.getNextRun(tt)),Et.pending.resolve(),yield Et.pending.promise,Et.pending=new xt.BH,yield Et.operation(),Et.pending.resolve(),yield Et.pending.promise,Et.process(!0).catch(()=>{})}catch(qt){Et.retryPolicy(qt)?Et.process(!1).catch(()=>{}):Et.stop()}})()}getNextRun(tt){if(tt)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Et=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Et}}}const $t=new xt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function ln(ut,tt){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,Y.Z)(function*({url:ut,body:tt},Et){const qt={"Content-Type":"application/json"},an=Et.getImmediate({optional:!0});if(an){const $i=yield an.getHeartbeatsHeader();$i&&(qt["X-Firebase-Client"]=$i)}const Vn={method:"POST",body:JSON.stringify(tt),headers:qt};let Vr,hr;try{Vr=yield fetch(ut,Vn)}catch($i){throw $t.create("fetch-network-error",{originalErrorMessage:null==$i?void 0:$i.message})}if(200!==Vr.status)throw $t.create("fetch-status-error",{httpStatus:Vr.status});try{hr=yield Vr.json()}catch($i){throw $t.create("fetch-parse-error",{originalErrorMessage:null==$i?void 0:$i.message})}const xr=hr.ttl.match(/^([\d.]+)(s)$/);if(!xr||!xr[2]||isNaN(Number(xr[1])))throw $t.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${hr.ttl}`});const As=1e3*Number(xr[1]),fo=Date.now();return{token:hr.token,expireTimeMillis:fo+As,issuedAtTimeMillis:fo}})).apply(this,arguments)}const En="firebase-app-check-database",lr=1,Er="firebase-app-check-store";let br=null;function Ir(ut,tt){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,Y.Z)(function*(ut,tt){const qt=(yield function cn(){return br||(br=new Promise((ut,tt)=>{try{const Et=indexedDB.open(En,lr);Et.onsuccess=qt=>{ut(qt.target.result)},Et.onerror=qt=>{var an;tt($t.create("storage-open",{originalErrorMessage:null===(an=qt.target.error)||void 0===an?void 0:an.message}))},Et.onupgradeneeded=qt=>{0===qt.oldVersion&&qt.target.result.createObjectStore(Er,{keyPath:"compositeKey"})}}catch(Et){tt($t.create("storage-open",{originalErrorMessage:null==Et?void 0:Et.message}))}}),br)}()).transaction(Er,"readwrite"),Vn=qt.objectStore(Er).put({compositeKey:ut,value:tt});return new Promise((Vr,hr)=>{Vn.onsuccess=xr=>{Vr()},qt.onerror=xr=>{var As;hr($t.create("storage-set",{originalErrorMessage:null===(As=xr.target.error)||void 0===As?void 0:As.message}))}})})).apply(this,arguments)}const Jr=new Be.Yd("@firebase/app-check");function ni(ut,tt){return(0,xt.hl)()?function Zr(ut,tt){return Ir(function on(ut){return`${ut.options.appId}-${ut.name}`}(ut),tt)}(ut,tt).catch(Et=>{Jr.warn(`Failed to write token to IndexedDB. Error: ${Et}`)}):Promise.resolve()}function or(){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,Y.Z)(function*(){const ut=_t();if(ut.enabled&&ut.token)return ut.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Pr={error:"UNKNOWN_ERROR"};function mr(ut){return xt.US.encodeString(JSON.stringify(ut),!1)}function Ht(ut){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,Y.Z)(function*(ut,tt=!1){const Et=ut.app;!function Tt(ut){if(!$e(ut).activated)throw $t.create("use-before-activation",{appName:ut.name})}(Et);const qt=$e(Et);let Vn,an=qt.token;if(an&&!ot(an)&&(qt.token=void 0,an=void 0),!an){const xr=yield qt.cachedTokenPromise;xr&&(ot(xr)?an=xr:yield ni(Et,void 0))}if(!tt&&an&&ot(an))return{token:an.token};let hr,Vr=!1;if(function xi(){return _t().enabled}()){qt.exchangeTokenPromise||(qt.exchangeTokenPromise=ln(function nn(ut,tt){const{projectId:Et,appId:qt,apiKey:an}=ut.options;return{url:`${ct}/projects/${Et}/apps/${qt}:${ke}?key=${an}`,body:{debug_token:tt}}}(Et,yield or()),ut.heartbeatServiceProvider).finally(()=>{qt.exchangeTokenPromise=void 0}),Vr=!0);const xr=yield qt.exchangeTokenPromise;return yield ni(Et,xr),qt.token=xr,{token:xr.token}}try{qt.exchangeTokenPromise||(qt.exchangeTokenPromise=qt.provider.getToken().finally(()=>{qt.exchangeTokenPromise=void 0}),Vr=!0),an=yield $e(Et).exchangeTokenPromise}catch(xr){"appCheck/throttled"===xr.code?Jr.warn(xr.message):Jr.error(xr),Vn=xr}return an?Vn?hr=ot(an)?{token:an.token,internalError:Vn}:gn(Vn):(hr={token:an.token},qt.token=an,yield ni(Et,an)):hr=gn(Vn),Vr&&function Ct(ut,tt){const Et=$e(ut).tokenObservers;for(const qt of Et)try{"EXTERNAL"===qt.type&&null!=tt.error?qt.error(tt.error):qt.next(tt)}catch{}}(Et,hr),hr})).apply(this,arguments)}function we(ut,tt){const Et=$e(ut),qt=Et.tokenObservers.filter(an=>an.next!==tt);0===qt.length&&Et.tokenRefresher&&Et.tokenRefresher.isRunning()&&Et.tokenRefresher.stop(),Et.tokenObservers=qt}function be(ut){const{app:tt}=ut,Et=$e(tt);let qt=Et.tokenRefresher;qt||(qt=function We(ut){const{app:tt}=ut;return new lt((0,Y.Z)(function*(){let qt;if(qt=$e(tt).token?yield Ht(ut,!0):yield Ht(ut),qt.error)throw qt.error;if(qt.internalError)throw qt.internalError}),()=>!0,()=>{const Et=$e(tt);if(Et.token){let qt=Et.token.issuedAtTimeMillis+.5*(Et.token.expireTimeMillis-Et.token.issuedAtTimeMillis)+3e5;return qt=Math.min(qt,Et.token.expireTimeMillis-3e5),Math.max(0,qt-Date.now())}return 0},Fe.RETRIAL_MIN_WAIT,Fe.RETRIAL_MAX_WAIT)}(ut),Et.tokenRefresher=qt),!qt.isRunning()&&Et.isTokenAutoRefreshEnabled&&qt.start()}function ot(ut){return ut.expireTimeMillis-Date.now()>0}function gn(ut){return{token:mr(Pr),error:ut}}class Ye{constructor(tt,Et){this.app=tt,this.heartbeatServiceProvider=Et}_delete(){const{tokenObservers:tt}=$e(this.app);for(const Et of tt)we(this.app,Et.next);return Promise.resolve()}}const Dr="app-check-internal";!function Xi(){(0,et._registerComponent)(new Ze.wA("app-check",ut=>function Ve(ut,tt){return new Ye(ut,tt)}(ut.getProvider("app").getImmediate(),ut.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((ut,tt,Et)=>{ut.getProvider(Dr).initialize()})),(0,et._registerComponent)(new Ze.wA(Dr,ut=>function me(ut){return{getToken:tt=>Ht(ut,tt),addTokenListener:tt=>function zt(ut,tt,Et,qt){const{app:an}=ut,Vn=$e(an);if(Vn.tokenObservers=[...Vn.tokenObservers,{next:Et,error:qt,type:tt}],Vn.token&&ot(Vn.token)){const hr=Vn.token;Promise.resolve().then(()=>{Et({token:hr.token}),be(ut)}).catch(()=>{})}Vn.cachedTokenPromise.then(()=>be(ut))}(ut,"INTERNAL",tt),removeTokenListener:tt=>we(ut.app,tt)}}(ut.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,et.registerVersion)("@firebase/app-check","0.7.0")}();class re{constructor(){return(0,E.vb)("app-check")}}typeof window<"u"&&window},1205:(yn,gt,H)=>{"use strict";H.d(gt,{zQ:()=>ct,ww:()=>wt,rT:()=>Ie,f7:()=>ht,L6:()=>Oe,_Q:()=>Pe,lh:()=>$e,Qv:()=>Be,nw:()=>_t});var E=H(4650),y=H(7579),ee=H(9646),fe=H(9751),Le=H(8996),xe=H(6451),ye=H(5363),Ue=H(3900),je=H(4004),Ce=H(6063);class ge extends y.x{constructor(ke=1/0,Fe=1/0,Ne=Ce.l){super(),this._bufferSize=ke,this._windowTime=Fe,this._timestampProvider=Ne,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Fe===1/0,this._bufferSize=Math.max(1,ke),this._windowTime=Math.max(1,Fe)}next(ke){const{isStopped:Fe,_buffer:Ne,_infiniteTimeWindow:lt,_timestampProvider:vt,_windowTime:Zt}=this;Fe||(Ne.push(ke),!lt&&Ne.push(vt.now()+Zt)),this._trimBuffer(),super.next(ke)}_subscribe(ke){this._throwIfClosed(),this._trimBuffer();const Fe=this._innerSubscribe(ke),{_infiniteTimeWindow:Ne,_buffer:lt}=this,vt=lt.slice();for(let Zt=0;Zt<vt.length&&!ke.closed;Zt+=Ne?1:2)ke.next(vt[Zt]);return this._checkFinalizedStatuses(ke),Fe}_trimBuffer(){const{_bufferSize:ke,_timestampProvider:Fe,_buffer:Ne,_infiniteTimeWindow:lt}=this,vt=(lt?1:2)*ke;if(ke<1/0&&vt<Ne.length&&Ne.splice(0,Ne.length-vt),!lt){const Zt=Fe.now();let $t=0;for(let vn=1;vn<Ne.length&&Ne[vn]<=Zt;vn+=2)$t=vn;$t&&Ne.splice(0,$t+1)}}}var ve=H(3099);function ze(ft,ke,Fe){let Ne,lt=!1;return ft&&"object"==typeof ft?({bufferSize:Ne=1/0,windowTime:ke=1/0,refCount:lt=!1,scheduler:Fe}=ft):Ne=null!=ft?ft:1/0,(0,ve.B)({connector:()=>new ge(Ne,ke,Fe),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:lt})}var He=H(590),rt=H(576);function Dt(ft,ke){return(0,rt.m)(ke)?(0,Ue.w)(()=>ft,ke):(0,Ue.w)(()=>ft)}var Re=H(9468),Se=H(9300),de=H(4976),pt=H(2011),Y=H(6895),et=H(6217),Ze=H(9260);const Be=new E.OlP("angularfire2.auth.use-emulator"),Oe=new E.OlP("angularfire2.auth.settings"),Pe=new E.OlP("angularfire2.auth.tenant-id"),Ie=new E.OlP("angularfire2.auth.langugage-code"),$e=new E.OlP("angularfire2.auth.use-device-language"),ht=new E.OlP("angularfire.auth.persistence"),_t=(ft,ke,Fe,Ne,lt,vt,Zt,$t)=>(0,pt.cc)(`${ft.name}.auth`,"AngularFireAuth",ft.name,()=>{const vn=ke.runOutsideAngular(()=>ft.auth());if(Fe&&vn.useEmulator(...Fe),Ne&&(vn.tenantId=Ne),vn.languageCode=lt,vt&&vn.useDeviceLanguage(),Zt)for(const[Tt,De]of Object.entries(Zt))vn.settings[Tt]=De;return $t&&vn.setPersistence($t),vn},[Fe,Ne,lt,vt,Zt,$t]);let ct=(()=>{class ft{constructor(Fe,Ne,lt,vt,Zt,$t,vn,Tt,De,St,ln,Rn){const Kn=new y.x,wn=(0,ee.of)(void 0).pipe((0,ye.Q)(Zt.outsideAngular),(0,Ue.w)(()=>vt.runOutsideAngular(()=>Promise.resolve().then(H.bind(H,3042)))),(0,je.U)(()=>(0,pt.on)(Fe,vt,Ne)),(0,je.U)(nn=>_t(nn,vt,$t,Tt,De,St,vn,ln)),ze({bufferSize:1,refCount:!1}));if((0,Y.PM)(lt))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ee.of)(null);else{wn.pipe((0,He.P)()).subscribe();const En=wn.pipe((0,Ue.w)(Xn=>Xn.getRedirectResult().then(br=>br,()=>null)),de.iC,ze({bufferSize:1,refCount:!1})),lr=wn.pipe((0,Ue.w)(Xn=>new fe.y(br=>({unsubscribe:vt.runOutsideAngular(()=>Xn.onAuthStateChanged(cn=>br.next(cn),cn=>br.error(cn),()=>br.complete()))})))),Er=wn.pipe((0,Ue.w)(Xn=>new fe.y(br=>({unsubscribe:vt.runOutsideAngular(()=>Xn.onIdTokenChanged(cn=>br.next(cn),cn=>br.error(cn),()=>br.complete()))}))));this.authState=En.pipe(Dt(lr),(0,Re.R)(Zt.outsideAngular),(0,ye.Q)(Zt.insideAngular)),this.user=En.pipe(Dt(Er),(0,Re.R)(Zt.outsideAngular),(0,ye.Q)(Zt.insideAngular)),this.idToken=this.user.pipe((0,Ue.w)(Xn=>Xn?(0,Le.D)(Xn.getIdToken()):(0,ee.of)(null))),this.idTokenResult=this.user.pipe((0,Ue.w)(Xn=>Xn?(0,Le.D)(Xn.getIdTokenResult()):(0,ee.of)(null))),this.credential=(0,xe.T)(En,Kn,this.authState.pipe((0,Se.h)(Xn=>!Xn))).pipe((0,je.U)(Xn=>null!=Xn&&Xn.user?Xn:null),(0,Re.R)(Zt.outsideAngular),(0,ye.Q)(Zt.insideAngular))}return(0,pt.pX)(this,wn,vt,{spy:{apply:(nn,En,lr)=>{(nn.startsWith("signIn")||nn.startsWith("createUser"))&&lr.then(Er=>Kn.next(Er))}}})}}return ft.\u0275fac=function(Fe){return new(Fe||ft)(E.LFG(pt.Dh),E.LFG(pt.xv,8),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(de.HU),E.LFG(Be,8),E.LFG(Oe,8),E.LFG(Pe,8),E.LFG(Ie,8),E.LFG($e,8),E.LFG(ht,8),E.LFG(et.nm,8))},ft.\u0275prov=E.Yz7({token:ft,factory:ft.\u0275fac,providedIn:"any"}),ft})(),wt=(()=>{class ft{constructor(){Ze.Z.registerVersion("angularfire",de.q4.full,"auth-compat")}}return ft.\u0275fac=function(Fe){return new(Fe||ft)},ft.\u0275mod=E.oAB({type:ft}),ft.\u0275inj=E.cJS({providers:[ct]}),ft})()},1762:(yn,gt,H)=>{"use strict";H.d(gt,{ST:()=>Np,yb:()=>d_});var E=H(4650),y=H(4986),ee=H(9751),fe=H(8996),Le=H(9646),xe=H(4976),ye=H(8675),Ue=H(4482),je=H(5403);function Ce(){return(0,Ue.e)((r,e)=>{let t,s=!1;r.subscribe((0,je.x)(e,c=>{const f=t;t=c,s&&e.next([f,c]),s=!0}))})}var Oe,ge=H(4004),ve=H(5026),ze=H(1884),He=H(9300),rt=H(2011),Dt=H(6895),Se=(H(3042),H(3942)),de=H(5861),pt=H(6881),Y=H(4859),et=H(1877),Ze=H(2090),xt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Be={},Pe=Pe||{},Ie=xt||self;function $e(){}function ht(r){var e=typeof r;return"array"==(e="object"!=e?e:r?Array.isArray(r)?"array":e:"null")||"object"==e&&"number"==typeof r.length}function _t(r){var e=typeof r;return"object"==e&&null!=r||"function"==e}var wt="closure_uid_"+(1e9*Math.random()>>>0),ft=0;function ke(r,e,t){return r.call.apply(r.bind,arguments)}function Fe(r,e,t){if(!r)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(c,s),r.apply(e,c)}}return function(){return r.apply(e,arguments)}}function Ne(r,e,t){return(Ne=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ke:Fe).apply(null,arguments)}function lt(r,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),r.apply(this,s)}}function vt(r,e){function t(){}t.prototype=e.prototype,r.$=e.prototype,r.prototype=new t,r.prototype.constructor=r,r.ac=function(s,c,f){for(var _=Array(arguments.length-2),N=2;N<arguments.length;N++)_[N-2]=arguments[N];return e.prototype[c].apply(s,_)}}function Zt(){this.s=this.s,this.o=this.o}Zt.prototype.s=!1,Zt.prototype.ra=function(){!this.s&&(this.s=!0,this.N(),0)&&function ct(r){Object.prototype.hasOwnProperty.call(r,wt)&&r[wt]||(r[wt]=++ft)}(this)},Zt.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const vn=Array.prototype.indexOf?function(r,e){return Array.prototype.indexOf.call(r,e,void 0)}:function(r,e){if("string"==typeof r)return"string"!=typeof e||1!=e.length?-1:r.indexOf(e,0);for(let t=0;t<r.length;t++)if(t in r&&r[t]===e)return t;return-1};function Tt(r){const e=r.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=r[s];return t}return[]}function De(r,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(ht(s)){const c=r.length||0,f=s.length||0;r.length=c+f;for(let _=0;_<f;_++)r[c+_]=s[_]}else r.push(s)}}function St(r,e){this.type=r,this.g=this.target=e,this.defaultPrevented=!1}St.prototype.h=function(){this.defaultPrevented=!0};var ln=function(){if(!Ie.addEventListener||!Object.defineProperty)return!1;var r=!1,e=Object.defineProperty({},"passive",{get:function(){r=!0}});try{Ie.addEventListener("test",$e,e),Ie.removeEventListener("test",$e,e)}catch{}return r}();function Rn(r){return/^[\s\xa0]*$/.test(r)}var Kn=String.prototype.trim?function(r){return r.trim()}:function(r){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(r)[1]};function wn(r,e){return r<e?-1:r>e?1:0}function nn(){var r=Ie.navigator;return r&&(r=r.userAgent)?r:""}function En(r){return-1!=nn().indexOf(r)}function lr(r){return lr[" "](r),r}function Er(r,e,t){return Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=t(e)}lr[" "]=$e;var Ir,r,Xn=En("Opera"),br=En("Trident")||En("MSIE"),cn=En("Edge"),di=cn||br,Zr=En("Gecko")&&!(-1!=nn().toLowerCase().indexOf("webkit")&&!En("Edge"))&&!(En("Trident")||En("MSIE"))&&!En("Edge"),Br=-1!=nn().toLowerCase().indexOf("webkit")&&!En("Edge");function Di(){var r=Ie.document;return r?r.documentMode:void 0}e:{var Tn="",tn=(r=nn(),Zr?/rv:([^\);]+)(\)|;)/.exec(r):cn?/Edge\/([\d\.]+)/.exec(r):br?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(r):Br?/WebKit\/(\S+)/.exec(r):Xn?/(?:Version)[ \/]?(\S+)/.exec(r):void 0);if(tn&&(Tn=tn?tn[1]:""),br){var fn=Di();if(null!=fn&&fn>parseFloat(Tn)){Ir=String(fn);break e}}Ir=Tn}var on={},ni=Ie.document&&br&&(Di()||parseInt(Ir,10))||void 0;function pi(r,e){if(St.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r){var t=this.type=r.type,s=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=e,e=r.relatedTarget){if(Zr){e:{try{lr(e.nodeName);var c=!0;break e}catch{}c=!1}c||(e=null)}}else"mouseover"==t?e=r.fromElement:"mouseout"==t&&(e=r.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType="string"==typeof r.pointerType?r.pointerType:Ur[r.pointerType]||"",this.state=r.state,this.i=r,r.defaultPrevented&&pi.$.h.call(this)}}vt(pi,St);var Ur={2:"touch",3:"pen",4:"mouse"};pi.prototype.h=function(){pi.$.h.call(this);var r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var xi="closure_listenable_"+(1e6*Math.random()|0),or=0;function Yn(r,e,t,s,c){this.listener=r,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.la=c,this.key=++or,this.fa=this.ia=!1}function Ei(r){r.fa=!0,r.listener=null,r.proxy=null,r.src=null,r.la=null}function Pr(r,e,t){for(const s in r)e.call(t,r[s],s,r)}function mr(r){const e={};for(const t in r)e[t]=r[t];return e}const Ht="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ge(r,e){let t,s;for(let c=1;c<arguments.length;c++){for(t in s=arguments[c],s)r[t]=s[t];for(let f=0;f<Ht.length;f++)t=Ht[f],Object.prototype.hasOwnProperty.call(s,t)&&(r[t]=s[t])}}function Qe(r){this.src=r,this.g={},this.h=0}function Xt(r,e){var t=e.type;if(t in r.g){var f,s=r.g[t],c=vn(s,e);(f=0<=c)&&Array.prototype.splice.call(s,c,1),f&&(Ei(e),0==r.g[t].length&&(delete r.g[t],r.h--))}}function zt(r,e,t,s){for(var c=0;c<r.length;++c){var f=r[c];if(!f.fa&&f.listener==e&&f.capture==!!t&&f.la==s)return c}return-1}Qe.prototype.add=function(r,e,t,s,c){var f=r.toString();(r=this.g[f])||(r=this.g[f]=[],this.h++);var _=zt(r,e,s,c);return-1<_?(e=r[_],t||(e.ia=!1)):((e=new Yn(e,this.src,f,!!s,c)).ia=t,r.push(e)),e};var we="closure_lm_"+(1e6*Math.random()|0),be={};function We(r,e,t,s,c){if(s&&s.once)return gn(r,e,t,s,c);if(Array.isArray(e)){for(var f=0;f<e.length;f++)We(r,e[f],t,s,c);return null}return t=bn(t),r&&r[xi]?r.O(e,t,_t(s)?!!s.capture:!!s,c):Ct(r,e,t,!1,s,c)}function Ct(r,e,t,s,c,f){if(!e)throw Error("Invalid event type");var _=_t(c)?!!c.capture:!!c,N=Ot(r);if(N||(r[we]=N=new Qe(r)),(t=N.add(e,t,s,_,f)).proxy)return t;if(s=function ot(){const e=dt;return function r(t){return e.call(r.src,r.listener,t)}}(),t.proxy=s,s.src=r,s.listener=t,r.addEventListener)ln||(c=_),void 0===c&&(c=!1),r.addEventListener(e.toString(),s,c);else if(r.attachEvent)r.attachEvent(me(e.toString()),s);else{if(!r.addListener||!r.removeListener)throw Error("addEventListener and attachEvent are unavailable.");r.addListener(s)}return t}function gn(r,e,t,s,c){if(Array.isArray(e)){for(var f=0;f<e.length;f++)gn(r,e[f],t,s,c);return null}return t=bn(t),r&&r[xi]?r.P(e,t,_t(s)?!!s.capture:!!s,c):Ct(r,e,t,!0,s,c)}function Ye(r,e,t,s,c){if(Array.isArray(e))for(var f=0;f<e.length;f++)Ye(r,e[f],t,s,c);else s=_t(s)?!!s.capture:!!s,t=bn(t),r&&r[xi]?(r=r.i,(e=String(e).toString())in r.g&&-1<(t=zt(f=r.g[e],t,s,c))&&(Ei(f[t]),Array.prototype.splice.call(f,t,1),0==f.length&&(delete r.g[e],r.h--))):r&&(r=Ot(r))&&(e=r.g[e.toString()],r=-1,e&&(r=zt(e,t,s,c)),(t=-1<r?e[r]:null)&&Ve(t))}function Ve(r){if("number"!=typeof r&&r&&!r.fa){var e=r.src;if(e&&e[xi])Xt(e.i,r);else{var t=r.type,s=r.proxy;e.removeEventListener?e.removeEventListener(t,s,r.capture):e.detachEvent?e.detachEvent(me(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=Ot(e))?(Xt(t,r),0==t.h&&(t.src=null,e[we]=null)):Ei(r)}}}function me(r){return r in be?be[r]:be[r]="on"+r}function dt(r,e){if(r.fa)r=!0;else{e=new pi(e,this);var t=r.listener,s=r.la||r.src;r.ia&&Ve(r),r=t.call(s,e)}return r}function Ot(r){return(r=r[we])instanceof Qe?r:null}var en="__closure_events_fn_"+(1e9*Math.random()>>>0);function bn(r){return"function"==typeof r?r:(r[en]||(r[en]=function(e){return r.handleEvent(e)}),r[en])}function Qn(){Zt.call(this),this.i=new Qe(this),this.S=this,this.J=null}function cr(r,e){var t,s=r.J;if(s)for(t=[];s;s=s.J)t.push(s);if(r=r.S,s=e.type||e,"string"==typeof e)e=new St(e,r);else if(e instanceof St)e.target=e.target||r;else{var c=e;Ge(e=new St(s,r),c)}if(c=!0,t)for(var f=t.length-1;0<=f;f--){var _=e.g=t[f];c=Gr(_,s,!0,e)&&c}if(c=Gr(_=e.g=r,s,!0,e)&&c,c=Gr(_,s,!1,e)&&c,t)for(f=0;f<t.length;f++)c=Gr(_=e.g=t[f],s,!1,e)&&c}function Gr(r,e,t,s){if(!(e=r.i.g[String(e)]))return!0;e=e.concat();for(var c=!0,f=0;f<e.length;++f){var _=e[f];if(_&&!_.fa&&_.capture==t){var N=_.listener,G=_.la||_.src;_.ia&&Xt(r.i,_),c=!1!==N.call(G,s)&&c}}return c&&!s.defaultPrevented}vt(Qn,Zt),Qn.prototype[xi]=!0,Qn.prototype.removeEventListener=function(r,e,t,s){Ye(this,r,e,t,s)},Qn.prototype.N=function(){if(Qn.$.N.call(this),this.i){var e,r=this.i;for(e in r.g){for(var t=r.g[e],s=0;s<t.length;s++)Ei(t[s]);delete r.g[e],r.h--}}this.J=null},Qn.prototype.O=function(r,e,t,s){return this.i.add(String(r),e,!1,t,s)},Qn.prototype.P=function(r,e,t,s){return this.i.add(String(r),e,!0,t,s)};var Ut=Ie.JSON.stringify;function At(){var r=ar;let e=null;return r.g&&(e=r.g,r.g=r.g.next,r.g||(r.h=null),e.next=null),e}var Un,Nn=new class{constructor(r,e){this.i=r,this.j=e,this.h=0,this.g=null}get(){let r;return 0<this.h?(this.h--,r=this.g,this.g=r.next,r.next=null):r=this.i(),r}}(()=>new jn,r=>r.reset());class jn{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function yr(r){Ie.setTimeout(()=>{throw r},0)}function Cr(r,e){Un||function tr(){var r=Ie.Promise.resolve(void 0);Un=function(){r.then(Pi)}}(),Wn||(Un(),Wn=!0),ar.add(r,e)}var Wn=!1,ar=new class Qt{constructor(){this.h=this.g=null}add(e,t){const s=Nn.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function Pi(){for(var r;r=At();){try{r.h.call(r.g)}catch(t){yr(t)}var e=Nn;e.j(r),100>e.h&&(e.h++,r.next=e.g,e.g=r)}Wn=!1}function ji(r,e){Qn.call(this),this.h=r||1,this.g=e||Ie,this.j=Ne(this.qb,this),this.l=Date.now()}function Ji(r){r.ga=!1,r.T&&(r.g.clearTimeout(r.T),r.T=null)}function ys(r,e,t){if("function"==typeof r)t&&(r=Ne(r,t));else{if(!r||"function"!=typeof r.handleEvent)throw Error("Invalid listener argument");r=Ne(r.handleEvent,r)}return 2147483647<Number(e)?-1:Ie.setTimeout(r,e||0)}function ri(r){r.g=ys(()=>{r.g=null,r.i&&(r.i=!1,ri(r))},r.j);const e=r.h;r.h=null,r.m.apply(null,e)}vt(ji,Qn),(Oe=ji.prototype).ga=!1,Oe.T=null,Oe.qb=function(){if(this.ga){var r=Date.now()-this.l;0<r&&r<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-r):(this.T&&(this.g.clearTimeout(this.T),this.T=null),cr(this,"tick"),this.ga&&(Ji(this),this.start()))}},Oe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Oe.N=function(){ji.$.N.call(this),Ji(this),delete this.g};class Cn extends Zt{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ri(this)}N(){super.N(),this.g&&(Ie.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dr(r){Zt.call(this),this.h=r,this.g={}}vt(dr,Zt);var li=[];function Dr(r,e,t,s){Array.isArray(t)||(t&&(li[0]=t.toString()),t=li);for(var c=0;c<t.length;c++){var f=We(e,t[c],s||r.handleEvent,!1,r.h||r);if(!f)break;r.g[f.key]=f}}function Xi(r){Pr(r.g,function(e,t){this.g.hasOwnProperty(t)&&Ve(e)},r),r.g={}}function ii(){this.g=!0}function _e(r,e,t,s){r.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ae(r,e){if(!r.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(r=0;r<t.length;r++)if(Array.isArray(t[r])){var s=t[r];if(!(2>s.length)){var c=s[1];if(Array.isArray(c)&&!(1>c.length)){var f=c[0];if("noop"!=f&&"stop"!=f&&"close"!=f)for(var _=1;_<c.length;_++)c[_]=""}}}return Ut(t)}catch{return e}}(r,t)+(s?" "+s:"")})}dr.prototype.N=function(){dr.$.N.call(this),Xi(this)},dr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ii.prototype.Ea=function(){this.g=!1},ii.prototype.info=function(){};var qe={},Ke=null;function Nt(){return Ke=Ke||new Qn}function kt(r){St.call(this,qe.Ta,r)}function Bt(r){const e=Nt();cr(e,new kt(e))}function Jt(r,e){St.call(this,qe.STAT_EVENT,r),this.stat=e}function mn(r){const e=Nt();cr(e,new Jt(e,r))}function zn(r,e){St.call(this,qe.Ua,r),this.size=e}function Gn(r,e){if("function"!=typeof r)throw Error("Fn must not be null and must be a function");return Ie.setTimeout(function(){r()},e)}qe.Ta="serverreachability",vt(kt,St),qe.STAT_EVENT="statevent",vt(Jt,St),qe.Ua="timingevent",vt(zn,St);var gi={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Jn={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function es(){}function tt(){}es.prototype.h=null;var Vn,Et={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function qt(){St.call(this,"d")}function an(){St.call(this,"c")}function Vr(){}function hr(r,e,t,s){this.l=r,this.j=e,this.m=t,this.W=s||1,this.U=new dr(this),this.P=As,this.V=new ji(r=di?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new xr}function xr(){this.i=null,this.g="",this.h=!1}vt(qt,St),vt(an,St),vt(Vr,es),Vr.prototype.g=function(){return new XMLHttpRequest},Vr.prototype.i=function(){return{}},Vn=new Vr;var As=45e3,fo={},$i={};function ki(r,e,t){r.L=1,r.v=ts(ls(e)),r.s=t,r.S=!0,Hi(r,null)}function Hi(r,e){r.G=Date.now(),to(r),r.A=ls(r.v);var t=r.A,s=r.W;Array.isArray(s)||(s=[String(s)]),Bo(t.i,"t",s),r.C=0,t=r.l.I,r.h=new xr,r.g=Ta(r.l,t?e:null,!r.s),0<r.O&&(r.M=new Cn(Ne(r.Pa,r,r.g),r.O)),Dr(r.U,r.g,"readystatechange",r.nb),e=r.I?mr(r.I):{},r.s?(r.u||(r.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",r.g.ha(r.A,r.u,r.s,e)):(r.u="GET",r.g.ha(r.A,r.u,null,e)),Bt(),function Oi(r,e,t,s,c,f){r.info(function(){if(r.g)if(f)for(var _="",N=f.split("&"),G=0;G<N.length;G++){var Q=N[G].split("=");if(1<Q.length){var ue=Q[0];Q=Q[1];var Xe=ue.split("_");_=2<=Xe.length&&"type"==Xe[1]?_+(ue+"=")+Q+"&":_+(ue+"=redacted&")}}else _=null;else _=f;return"XMLHTTP REQ ("+s+") [attempt "+c+"]: "+e+"\n"+t+"\n"+_})}(r.j,r.u,r.A,r.m,r.W,r.s)}function Zo(r){return!!r.g&&"GET"==r.u&&2!=r.L&&r.l.Ha}function ua(r,e,t){let c,s=!0;for(;!r.J&&r.C<t.length;){if(c=qi(r,t),c==$i){4==e&&(r.o=4,mn(14),s=!1),_e(r.j,r.m,null,"[Incomplete Response]");break}if(c==fo){r.o=4,mn(15),_e(r.j,r.m,t,"[Invalid Chunk]"),s=!1;break}_e(r.j,r.m,c,null),no(r,c)}Zo(r)&&c!=$i&&c!=fo&&(r.h.g="",r.C=0),4!=e||0!=t.length||r.h.h||(r.o=1,mn(16),s=!1),r.i=r.i&&s,s?0<t.length&&!r.ca&&(r.ca=!0,(e=r.l).g==r&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Uo(e),e.L=!0,mn(11))):(_e(r.j,r.m,t,"[Invalid Chunked Response]"),xs(r),Do(r))}function qi(r,e){var t=r.C,s=e.indexOf("\n",t);return-1==s?$i:(t=Number(e.substring(t,s)),isNaN(t)?fo:(s+=1)+t>e.length?$i:(e=e.substr(s,t),r.C=s+t,e))}function to(r){r.Y=Date.now()+r.P,Fs(r,r.P)}function Fs(r,e){if(null!=r.B)throw Error("WatchDog timer not null");r.B=Gn(Ne(r.lb,r),e)}function ba(r){r.B&&(Ie.clearTimeout(r.B),r.B=null)}function Do(r){0==r.l.H||r.J||ds(r.l,r)}function xs(r){ba(r);var e=r.M;e&&"function"==typeof e.ra&&e.ra(),r.M=null,Ji(r.V),Xi(r.U),r.g&&(e=r.g,r.g=null,e.abort(),e.ra())}function no(r,e){try{var t=r.l;if(0!=t.H&&(t.g==r||zi(t.h,r)))if(!r.K&&zi(t.h,r)&&3==t.H){try{var s=t.Ja.g.parse(e)}catch{s=null}if(Array.isArray(s)&&3==s.length){var c=s;if(0==c[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<r.G))break e;na(t),vo(t)}_o(t),mn(18)}}else t.Fa=c[1],0<t.Fa-t.V&&37500>c[2]&&t.M&&0==t.A&&!t.v&&(t.v=Gn(Ne(t.ib,t),6e3));if(1>=Hs(t.h)&&t.na){try{t.na()}catch{}t.na=void 0}}else Vo(t,11)}else if((r.K||t.g==r)&&na(t),!Rn(e))for(c=t.Ja.g.parse(e),e=0;e<c.length;e++){let Q=c[e];if(t.V=Q[0],Q=Q[1],2==t.H)if("c"==Q[0]){t.J=Q[1],t.oa=Q[2];const ue=Q[3];null!=ue&&(t.qa=ue,t.j.info("VER="+t.qa));const Xe=Q[4];null!=Xe&&(t.Ga=Xe,t.j.info("SVER="+t.Ga));const Mt=Q[5];null!=Mt&&"number"==typeof Mt&&0<Mt&&(t.K=s=1.5*Mt,t.j.info("backChannelRequestTimeoutMs_="+s)),s=t;const rn=r.g;if(rn){const Sn=rn.g?rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Sn){var f=s.h;f.g||-1==Sn.indexOf("spdy")&&-1==Sn.indexOf("quic")&&-1==Sn.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(cs(f,f.h),f.h=null))}if(s.F){const Mn=rn.g?rn.g.getResponseHeader("X-HTTP-Session-Id"):null;Mn&&(s.Da=Mn,Ii(s.G,s.F,Mn))}}t.H=3,t.l&&t.l.Ba(),t.ca&&(t.S=Date.now()-r.G,t.j.info("Handshake RTT: "+t.S+"ms"));var _=r;if((s=t).wa=is(s,s.I?s.oa:null,s.Y),_.K){ea(s.h,_);var N=_,G=s.K;G&&N.setTimeout(G),N.B&&(ba(N),to(N)),s.g=_}else za(s);0<t.i.length&&va(t)}else"stop"!=Q[0]&&"close"!=Q[0]||Vo(t,7);else 3==t.H&&("stop"==Q[0]||"close"==Q[0]?"stop"==Q[0]?Vo(t,7):So(t):"noop"!=Q[0]&&t.l&&t.l.Aa(Q),t.A=0)}Bt()}catch{}}function ro(r,e){if(r.forEach&&"function"==typeof r.forEach)r.forEach(e,void 0);else if(ht(r)||"string"==typeof r)Array.prototype.forEach.call(r,e,void 0);else for(var t=function il(r){if(r.sa&&"function"==typeof r.sa)return r.sa();if(!r.Z||"function"!=typeof r.Z){if(typeof Map<"u"&&r instanceof Map)return Array.from(r.keys());if(!(typeof Set<"u"&&r instanceof Set)){if(ht(r)||"string"==typeof r){var e=[];r=r.length;for(var t=0;t<r;t++)e.push(t);return e}e=[],t=0;for(const s in r)e[t++]=s;return e}}}(r),s=function da(r){if(r.Z&&"function"==typeof r.Z)return r.Z();if(typeof Map<"u"&&r instanceof Map||typeof Set<"u"&&r instanceof Set)return Array.from(r.values());if("string"==typeof r)return r.split("");if(ht(r)){for(var e=[],t=r.length,s=0;s<t;s++)e.push(r[s]);return e}for(s in e=[],t=0,r)e[t++]=r[s];return e}(r),c=s.length,f=0;f<c;f++)e.call(void 0,s[f],t&&t[f],r)}(Oe=hr.prototype).setTimeout=function(r){this.P=r},Oe.nb=function(r){r=r.target;const e=this.M;e&&3==Ai(r)?e.l():this.Pa(r)},Oe.Pa=function(r){try{if(r==this.g)e:{const ue=Ai(this.g);var e=this.g.Ia();if(this.g.da(),!(3>ue)&&(3!=ue||di||this.g&&(this.h.h||this.g.ja()||_l(this.g)))){this.J||4!=ue||7==e||Bt(),ba(this);var t=this.g.da();this.aa=t;t:if(Zo(this)){var s=_l(this.g);r="";var c=s.length,f=4==Ai(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){xs(this),Do(this);var _="";break t}this.h.i=new Ie.TextDecoder}for(e=0;e<c;e++)this.h.h=!0,r+=this.h.i.decode(s[e],{stream:f&&e==c-1});s.splice(0,c),this.h.g+=r,this.C=0,_=this.h.g}else _=this.g.ja();if(this.i=200==t,function re(r,e,t,s,c,f,_){r.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+c+"]: "+e+"\n"+t+"\n"+f+" "+_})}(this.j,this.u,this.A,this.m,this.W,ue,t),this.i){if(this.ba&&!this.K){t:{if(this.g){var N,G=this.g;if((N=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Rn(N)){var Q=N;break t}}Q=null}if(!(t=Q)){this.i=!1,this.o=3,mn(12),xs(this),Do(this);break e}_e(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,no(this,t)}this.S?(ua(this,ue,_),di&&this.i&&3==ue&&(Dr(this.U,this.V,"tick",this.mb),this.V.start())):(_e(this.j,this.m,_,null),no(this,_)),4==ue&&xs(this),this.i&&!this.J&&(4==ue?ds(this.l,this):(this.i=!1,to(this)))}else 400==t&&0<_.indexOf("Unknown SID")?(this.o=3,mn(12)):(this.o=0,mn(13)),xs(this),Do(this)}}}catch{}},Oe.mb=function(){if(this.g){var r=Ai(this.g),e=this.g.ja();this.C<e.length&&(ba(this),ua(this,r,e),this.i&&4!=r&&to(this))}},Oe.cancel=function(){this.J=!0,xs(this)},Oe.lb=function(){this.B=null;const r=Date.now();0<=r-this.Y?(function it(r,e){r.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Bt(),mn(17)),xs(this),this.o=2,Do(this)):Fs(this,this.Y-r)};var hs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function po(r,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,r instanceof po){this.h=void 0!==e?e:r.h,fa(this,r.j),this.s=r.s,this.g=r.g,Lo(this,r.m),this.l=r.l,e=r.i;var t=new vs;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),io(this,t),this.o=r.o}else r&&(t=String(r).match(hs))?(this.h=!!e,fa(this,t[1]||"",!0),this.s=To(t[2]||""),this.g=To(t[3]||"",!0),Lo(this,t[4]),this.l=To(t[5]||"",!0),io(this,t[6]||"",!0),this.o=To(t[7]||"")):(this.h=!!e,this.i=new vs(null,this.h))}function ls(r){return new po(r)}function fa(r,e,t){r.j=t?To(e,!0):e,r.j&&(r.j=r.j.replace(/:$/,""))}function Lo(r,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);r.m=e}else r.m=null}function io(r,e,t){e instanceof vs?(r.i=e,function Jo(r,e){e&&!r.j&&(mo(r),r.i=null,r.g.forEach(function(t,s){var c=s.toLowerCase();s!=c&&(mi(this,s),Bo(this,c,t))},r)),r.j=e}(r.i,r.h)):(t||(e=js(e,go)),r.i=new vs(e,r.h))}function Ii(r,e,t){r.i.set(e,t)}function ts(r){return Ii(r,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),r}function To(r,e){return r?e?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function js(r,e,t){return"string"==typeof r?(r=encodeURI(r).replace(e,Xo),t&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function Xo(r){return"%"+((r=r.charCodeAt(0))>>4&15).toString(16)+(15&r).toString(16)}po.prototype.toString=function(){var r=[],e=this.j;e&&r.push(js(e,so,!0),":");var t=this.g;return(t||"file"==e)&&(r.push("//"),(e=this.s)&&r.push(js(e,so,!0),"@"),r.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&r.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&r.push("/"),r.push(js(t,"/"==t.charAt(0)?Qo:Cs,!0))),(t=this.i.toString())&&r.push("?",t),(t=this.o)&&r.push("#",js(t,Da)),r.join("")};var so=/[#\/\?@]/g,Cs=/[#\?:]/g,Qo=/[#\?]/g,go=/[#\?@]/g,Da=/#/g;function vs(r,e){this.h=this.g=null,this.i=r||null,this.j=!!e}function mo(r){r.g||(r.g=new Map,r.h=0,r.i&&function ha(r,e){if(r){r=r.split("&");for(var t=0;t<r.length;t++){var s=r[t].indexOf("="),c=null;if(0<=s){var f=r[t].substring(0,s);c=r[t].substring(s+1)}else f=r[t];e(f,c?decodeURIComponent(c.replace(/\+/g," ")):"")}}}(r.i,function(e,t){r.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function mi(r,e){mo(r),e=Ti(r,e),r.g.has(e)&&(r.i=null,r.h-=r.g.get(e).length,r.g.delete(e))}function yo(r,e){return mo(r),e=Ti(r,e),r.g.has(e)}function Bo(r,e,t){mi(r,e),0<t.length&&(r.i=null,r.g.set(Ti(r,e),Tt(t)),r.h+=t.length)}function Ti(r,e){return e=String(e),r.j&&(e=e.toLowerCase()),e}function ns(r){this.l=r||vl,r=Ie.PerformanceNavigationTiming?0<(r=Ie.performance.getEntriesByType("navigation")).length&&("hq"==r[0].nextHopProtocol||"h2"==r[0].nextHopProtocol):!!(Ie.g&&Ie.g.Ka&&Ie.g.Ka()&&Ie.g.Ka().ec),this.j=r?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Oe=vs.prototype).add=function(r,e){mo(this),this.i=null,r=Ti(this,r);var t=this.g.get(r);return t||this.g.set(r,t=[]),t.push(e),this.h+=1,this},Oe.forEach=function(r,e){mo(this),this.g.forEach(function(t,s){t.forEach(function(c){r.call(e,c,s,this)},this)},this)},Oe.sa=function(){mo(this);const r=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const c=r[s];for(let f=0;f<c.length;f++)t.push(e[s])}return t},Oe.Z=function(r){mo(this);let e=[];if("string"==typeof r)yo(this,r)&&(e=e.concat(this.g.get(Ti(this,r))));else{r=Array.from(this.g.values());for(let t=0;t<r.length;t++)e=e.concat(r[t])}return e},Oe.set=function(r,e){return mo(this),this.i=null,yo(this,r=Ti(this,r))&&(this.h-=this.g.get(r).length),this.g.set(r,[e]),this.h+=1,this},Oe.get=function(r,e){return r&&0<(r=this.Z(r)).length?String(r[0]):e},Oe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const r=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const f=encodeURIComponent(String(s)),_=this.Z(s);for(s=0;s<_.length;s++){var c=f;""!==_[s]&&(c+="="+encodeURIComponent(String(_[s]))),r.push(c)}}return this.i=r.join("&")};var vl=10;function Rs(r){return!!r.h||!!r.g&&r.g.size>=r.j}function Hs(r){return r.h?1:r.g?r.g.size:0}function zi(r,e){return r.h?r.h==e:!!r.g&&r.g.has(e)}function cs(r,e){r.g?r.g.add(e):r.h=e}function ea(r,e){r.h&&r.h==e?r.h=null:r.g&&r.g.has(e)&&r.g.delete(e)}function pa(r){if(null!=r.h)return r.i.concat(r.h.F);if(null!=r.g&&0!==r.g.size){let e=r.i;for(const t of r.g.values())e=e.concat(t.F);return e}return Tt(r.i)}function _s(){}function ga(){this.g=new _s}function ta(r,e,t){const s=t||"";try{ro(r,function(c,f){let _=c;_t(c)&&(_=Ut(c)),e.push(s+f+"="+encodeURIComponent(_))})}catch(c){throw e.push(s+"type="+encodeURIComponent("_badmap")),c}}function $o(r,e,t,s,c){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,c(s)}catch{}}function ma(r){this.l=r.fc||null,this.j=r.ob||!1}function b(r,e){Qn.call(this),this.F=r,this.u=e,this.m=void 0,this.readyState=q,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ns.prototype.cancel=function(){if(this.i=pa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const r of this.g.values())r.cancel();this.g.clear()}},_s.prototype.stringify=function(r){return Ie.JSON.stringify(r,void 0)},_s.prototype.parse=function(r){return Ie.JSON.parse(r,void 0)},vt(ma,es),ma.prototype.g=function(){return new b(this.l,this.j)},ma.prototype.i=function(r){return function(){return r}}({}),vt(b,Qn);var q=0;function T(r){r.j.read().then(r.Xa.bind(r)).catch(r.ka.bind(r))}function W(r){r.readyState=4,r.l=null,r.j=null,r.A=null,pe(r)}function pe(r){r.onreadystatechange&&r.onreadystatechange.call(r)}(Oe=b.prototype).open=function(r,e){if(this.readyState!=q)throw this.abort(),Error("Error reopening a connection");this.C=r,this.B=e,this.readyState=1,pe(this)},Oe.send=function(r){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};r&&(e.body=r),(this.F||Ie).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Oe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,W(this)),this.readyState=q},Oe.$a=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,pe(this)),this.g&&(this.readyState=3,pe(this),this.g)))if("arraybuffer"===this.responseType)r.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ie.ReadableStream<"u"&&"body"in r){if(this.j=r.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;T(this)}else r.text().then(this.Za.bind(this),this.ka.bind(this))},Oe.Xa=function(r){if(this.g){if(this.u&&r.value)this.response.push(r.value);else if(!this.u){var e=r.value?r.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!r.done}))&&(this.response=this.responseText+=e)}r.done?W(this):pe(this),3==this.readyState&&T(this)}},Oe.Za=function(r){this.g&&(this.response=this.responseText=r,W(this))},Oe.Ya=function(r){this.g&&(this.response=r,W(this))},Oe.ka=function(){this.g&&W(this)},Oe.setRequestHeader=function(r,e){this.v.append(r,e)},Oe.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""},Oe.getAllResponseHeaders=function(){if(!this.h)return"";const r=[],e=this.h.entries();for(var t=e.next();!t.done;)r.push((t=t.value)[0]+": "+t[1]),t=e.next();return r.join("\r\n")},Object.defineProperty(b.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(r){this.m=r?"include":"same-origin"}});var B=Ie.JSON.parse;function R(r){Qn.call(this),this.headers=new Map,this.u=r||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=O,this.L=this.M=!1}vt(R,Qn);var O="",ne=/^https?$/i,yt=["POST","PUT"];function jr(r,e){r.h=!1,r.g&&(r.l=!0,r.g.abort(),r.l=!1),r.j=e,r.m=5,yi(r),fs(r)}function yi(r){r.F||(r.F=!0,cr(r,"complete"),cr(r,"error"))}function Si(r){if(r.h&&typeof Pe<"u"&&(!r.C[1]||4!=Ai(r)||2!=r.da()))if(r.v&&4==Ai(r))ys(r.La,0,r);else if(cr(r,"readystatechange"),4==Ai(r)){r.h=!1;try{const N=r.da();e:switch(N){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===N){var c=String(r.I).match(hs)[1]||null;if(!c&&Ie.self&&Ie.self.location){var f=Ie.self.location.protocol;c=f.substr(0,f.length-1)}s=!ne.test(c?c.toLowerCase():"")}t=s}if(t)cr(r,"complete"),cr(r,"success");else{r.m=6;try{var _=2<Ai(r)?r.g.statusText:""}catch{_=""}r.j=_+" ["+r.da()+"]",yi(r)}}finally{fs(r)}}}function fs(r,e){if(r.g){zs(r);const t=r.g,s=r.C[0]?$e:null;r.g=null,r.C=null,e||cr(r,"ready");try{t.onreadystatechange=s}catch{}}}function zs(r){r.g&&r.L&&(r.g.ontimeout=null),r.A&&(Ie.clearTimeout(r.A),r.A=null)}function Ai(r){return r.g?r.g.readyState:0}function _l(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.K){case O:case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch{return null}}function ya(r){let e="";return Pr(r,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function us(r,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=ya(t),"string"==typeof r?null!=t&&encodeURIComponent(String(t)):Ii(r,e,t))}function rs(r,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[r]||e}function sl(r){this.Ga=0,this.i=[],this.j=new ii,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=rs("failFast",!1,r),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=rs("baseRetryDelayMs",5e3,r),this.hb=rs("retryDelaySeedMs",1e4,r),this.eb=rs("forwardChannelMaxRetries",2,r),this.xa=rs("forwardChannelRequestTimeoutMs",2e4,r),this.va=r&&r.xmlHttpFactory||void 0,this.Ha=r&&r.dc||!1,this.K=void 0,this.I=r&&r.supportsCrossDomainXhr||!1,this.J="",this.h=new ns(r&&r.concurrentRequestLimit),this.Ja=new ga,this.P=r&&r.fastHandshake||!1,this.O=r&&r.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=r&&r.bc||!1,r&&r.Ea&&this.j.Ea(),r&&r.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&r&&r.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function So(r){if(El(r),3==r.H){var e=r.W++,t=ls(r.G);Ii(t,"SID",r.J),Ii(t,"RID",e),Ii(t,"TYPE","terminate"),Ms(r,t),(e=new hr(r,r.j,e,void 0)).L=2,e.v=ts(ls(t)),t=!1,Ie.navigator&&Ie.navigator.sendBeacon&&(t=Ie.navigator.sendBeacon(e.v.toString(),"")),!t&&Ie.Image&&((new Image).src=e.v,t=!0),t||(e.g=Ta(e.l,null),e.g.ha(e.v)),e.G=Date.now(),to(e)}oo(r)}function vo(r){r.g&&(Uo(r),r.g.cancel(),r.g=null)}function El(r){vo(r),r.u&&(Ie.clearTimeout(r.u),r.u=null),na(r),r.h.cancel(),r.m&&("number"==typeof r.m&&Ie.clearTimeout(r.m),r.m=null)}function va(r){Rs(r.h)||r.m||(r.m=!0,Cr(r.Na,r),r.C=0)}function ps(r,e){var t;t=e?e.m:r.W++;const s=ls(r.G);Ii(s,"SID",r.J),Ii(s,"RID",t),Ii(s,"AID",r.V),Ms(r,s),r.o&&r.s&&us(s,r.o,r.s),t=new hr(r,r.j,t,r.C+1),null===r.o&&(t.I=r.s),e&&(r.i=e.F.concat(r.i)),e=Ha(r,t,1e3),t.setTimeout(Math.round(.5*r.xa)+Math.round(.5*r.xa*Math.random())),cs(r.h,t),ki(t,s,e)}function Ms(r,e){r.ma&&Pr(r.ma,function(t,s){Ii(e,s,t)}),r.l&&ro({},function(t,s){Ii(e,s,t)})}function Ha(r,e,t){t=Math.min(r.i.length,t);var s=r.l?Ne(r.l.Va,r.l,r):null;e:{var c=r.i;let f=-1;for(;;){const _=["count="+t];-1==f?0<t?(f=c[0].h,_.push("ofs="+f)):f=0:_.push("ofs="+f);let N=!0;for(let G=0;G<t;G++){let Q=c[G].h;const ue=c[G].g;if(Q-=f,0>Q)f=Math.max(0,c[G].h-100),N=!1;else try{ta(ue,_,"req"+Q+"_")}catch{s&&s(ue)}}if(N){s=_.join("&");break e}}}return r=r.i.splice(0,t),e.F=r,s}function za(r){r.g||r.u||(r.ba=1,Cr(r.Ma,r),r.A=0)}function _o(r){return!(r.g||r.u||3<=r.A||(r.ba++,r.u=Gn(Ne(r.Ma,r),Eo(r,r.A)),r.A++,0))}function Uo(r){null!=r.B&&(Ie.clearTimeout(r.B),r.B=null)}function Il(r){r.g=new hr(r,r.j,"rpc",r.ba),null===r.o&&(r.g.I=r.s),r.g.O=0;var e=ls(r.wa);Ii(e,"RID","rpc"),Ii(e,"SID",r.J),Ii(e,"CI",r.M?"0":"1"),Ii(e,"AID",r.V),Ii(e,"TYPE","xmlhttp"),Ms(r,e),r.o&&r.s&&us(e,r.o,r.s),r.K&&r.g.setTimeout(r.K);var t=r.g;r=r.oa,t.L=1,t.v=ts(ls(e)),t.s=null,t.S=!0,Hi(t,r)}function na(r){null!=r.v&&(Ie.clearTimeout(r.v),r.v=null)}function ds(r,e){var t=null;if(r.g==e){na(r),Uo(r),r.g=null;var s=2}else{if(!zi(r.h,e))return;t=e.F,ea(r.h,e),s=1}if(0!=r.H)if(r.ta=e.aa,e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.G;var c=r.C;cr(s=Nt(),new zn(s,t)),va(r)}else za(r);else if(3==(c=e.o)||0==c&&0<r.ta||!(1==s&&function ja(r,e){return!(Hs(r.h)>=r.h.j-(r.m?1:0)||(r.m?(r.i=e.F.concat(r.i),0):1==r.H||2==r.H||r.C>=(r.cb?0:r.eb)||(r.m=Gn(Ne(r.Na,r,e),Eo(r,r.C)),r.C++,0)))}(r,e)||2==s&&_o(r)))switch(t&&0<t.length&&(e=r.h,e.i=e.i.concat(t)),c){case 1:Vo(r,5);break;case 4:Vo(r,10);break;case 3:Vo(r,6);break;default:Vo(r,2)}}function Eo(r,e){let t=r.ab+Math.floor(Math.random()*r.hb);return r.l||(t*=2),t*e}function Vo(r,e){if(r.j.info("Error code "+e),2==e){var t=null;r.l&&(t=null);var s=Ne(r.pb,r);t||(t=new po("//www.google.com/images/cleardot.gif"),Ie.location&&"http"==Ie.location.protocol||fa(t,"https"),ts(t)),function pr(r,e){const t=new ii;if(Ie.Image){const s=new Image;s.onload=lt($o,t,s,"TestLoadImage: loaded",!0,e),s.onerror=lt($o,t,s,"TestLoadImage: error",!1,e),s.onabort=lt($o,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=lt($o,t,s,"TestLoadImage: timeout",!1,e),Ie.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=r}else e(!1)}(t.toString(),s)}else mn(2);r.H=0,r.l&&r.l.za(e),oo(r),El(r)}function oo(r){if(r.H=0,r.pa=[],r.l){const e=pa(r.h);(0!=e.length||0!=r.i.length)&&(De(r.pa,e),De(r.pa,r.i),r.h.i.length=0,Tt(r.i),r.i.length=0),r.l.ya()}}function is(r,e,t){var s=t instanceof po?ls(t):new po(t,void 0);if(""!=s.g)e&&(s.g=e+"."+s.g),Lo(s,s.m);else{var c=Ie.location;s=c.protocol,e=e?e+"."+c.hostname:c.hostname,c=+c.port;var f=new po(null,void 0);s&&fa(f,s),e&&(f.g=e),c&&Lo(f,c),t&&(f.l=t),s=f}return e=r.Da,(t=r.F)&&e&&Ii(s,t,e),Ii(s,"VER",r.qa),Ms(r,s),s}function Ta(r,e,t){if(e&&!r.I)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new R(t&&r.Ha&&!r.va?new ma({ob:!0}):r.va)).Oa(r.I),e}function Ga(){}function Yi(){if(br&&!(10<=Number(ni)))throw Error("Environmental error: no available transport.")}function Ni(r,e){Qn.call(this),this.g=new sl(e),this.l=r,this.h=e&&e.messageUrlParams||null,r=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.s=r,r=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(r?r["X-WebChannel-Content-Type"]=e.messageContentType:r={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(r?r["X-WebChannel-Client-Profile"]=e.Ca:r={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=r,(r=e&&e.cc)&&!Rn(r)&&(this.g.o=r),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Rn(e)&&(this.g.F=e,null!==(r=this.h)&&e in r&&e in(r=this.h)&&delete r[e]),this.j=new Ao(this)}function si(r){qt.call(this);var e=r.__sm__;if(e){e:{for(const t in e){r=t;break e}r=void 0}(this.i=r)&&(r=this.i,e=null!==e&&r in e?e[r]:void 0),this.data=e}else this.data=r}function Sa(){an.call(this),this.status=1}function Ao(r){this.g=r}function ao(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Hl(r,e,t){t||(t=0);var s=Array(16);if("string"==typeof e)for(var c=0;16>c;++c)s[c]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(c=0;16>c;++c)s[c]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var f=r.g[3],_=(e=r.g[0])+(f^(t=r.g[1])&((c=r.g[2])^f))+s[0]+3614090360&4294967295;_=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=t+(_<<7&4294967295|_>>>25))+((_=f+(c^e&(t^c))+s[1]+3905402710&4294967295)<<12&4294967295|_>>>20))+((_=c+(t^f&(e^t))+s[2]+606105819&4294967295)<<17&4294967295|_>>>15))+((_=t+(e^c&(f^e))+s[3]+3250441966&4294967295)<<22&4294967295|_>>>10))+((_=e+(f^t&(c^f))+s[4]+4118548399&4294967295)<<7&4294967295|_>>>25))+((_=f+(c^e&(t^c))+s[5]+1200080426&4294967295)<<12&4294967295|_>>>20))+((_=c+(t^f&(e^t))+s[6]+2821735955&4294967295)<<17&4294967295|_>>>15))+((_=t+(e^c&(f^e))+s[7]+4249261313&4294967295)<<22&4294967295|_>>>10))+((_=e+(f^t&(c^f))+s[8]+1770035416&4294967295)<<7&4294967295|_>>>25))+((_=f+(c^e&(t^c))+s[9]+2336552879&4294967295)<<12&4294967295|_>>>20))+((_=c+(t^f&(e^t))+s[10]+4294925233&4294967295)<<17&4294967295|_>>>15))+((_=t+(e^c&(f^e))+s[11]+2304563134&4294967295)<<22&4294967295|_>>>10))+((_=e+(f^t&(c^f))+s[12]+1804603682&4294967295)<<7&4294967295|_>>>25))+((_=f+(c^e&(t^c))+s[13]+4254626195&4294967295)<<12&4294967295|_>>>20))+((_=c+(t^f&(e^t))+s[14]+2792965006&4294967295)<<17&4294967295|_>>>15))+((_=t+(e^c&(f^e))+s[15]+1236535329&4294967295)<<22&4294967295|_>>>10))+((_=e+(c^f&(t^c))+s[1]+4129170786&4294967295)<<5&4294967295|_>>>27))+((_=f+(t^c&(e^t))+s[6]+3225465664&4294967295)<<9&4294967295|_>>>23))+((_=c+(e^t&(f^e))+s[11]+643717713&4294967295)<<14&4294967295|_>>>18))+((_=t+(f^e&(c^f))+s[0]+3921069994&4294967295)<<20&4294967295|_>>>12))+((_=e+(c^f&(t^c))+s[5]+3593408605&4294967295)<<5&4294967295|_>>>27))+((_=f+(t^c&(e^t))+s[10]+38016083&4294967295)<<9&4294967295|_>>>23))+((_=c+(e^t&(f^e))+s[15]+3634488961&4294967295)<<14&4294967295|_>>>18))+((_=t+(f^e&(c^f))+s[4]+3889429448&4294967295)<<20&4294967295|_>>>12))+((_=e+(c^f&(t^c))+s[9]+568446438&4294967295)<<5&4294967295|_>>>27))+((_=f+(t^c&(e^t))+s[14]+3275163606&4294967295)<<9&4294967295|_>>>23))+((_=c+(e^t&(f^e))+s[3]+4107603335&4294967295)<<14&4294967295|_>>>18))+((_=t+(f^e&(c^f))+s[8]+1163531501&4294967295)<<20&4294967295|_>>>12))+((_=e+(c^f&(t^c))+s[13]+2850285829&4294967295)<<5&4294967295|_>>>27))+((_=f+(t^c&(e^t))+s[2]+4243563512&4294967295)<<9&4294967295|_>>>23))+((_=c+(e^t&(f^e))+s[7]+1735328473&4294967295)<<14&4294967295|_>>>18))+((_=t+(f^e&(c^f))+s[12]+2368359562&4294967295)<<20&4294967295|_>>>12))+((_=e+(t^c^f)+s[5]+4294588738&4294967295)<<4&4294967295|_>>>28))+((_=f+(e^t^c)+s[8]+2272392833&4294967295)<<11&4294967295|_>>>21))+((_=c+(f^e^t)+s[11]+1839030562&4294967295)<<16&4294967295|_>>>16))+((_=t+(c^f^e)+s[14]+4259657740&4294967295)<<23&4294967295|_>>>9))+((_=e+(t^c^f)+s[1]+2763975236&4294967295)<<4&4294967295|_>>>28))+((_=f+(e^t^c)+s[4]+1272893353&4294967295)<<11&4294967295|_>>>21))+((_=c+(f^e^t)+s[7]+4139469664&4294967295)<<16&4294967295|_>>>16))+((_=t+(c^f^e)+s[10]+3200236656&4294967295)<<23&4294967295|_>>>9))+((_=e+(t^c^f)+s[13]+681279174&4294967295)<<4&4294967295|_>>>28))+((_=f+(e^t^c)+s[0]+3936430074&4294967295)<<11&4294967295|_>>>21))+((_=c+(f^e^t)+s[3]+3572445317&4294967295)<<16&4294967295|_>>>16))+((_=t+(c^f^e)+s[6]+76029189&4294967295)<<23&4294967295|_>>>9))+((_=e+(t^c^f)+s[9]+3654602809&4294967295)<<4&4294967295|_>>>28))+((_=f+(e^t^c)+s[12]+3873151461&4294967295)<<11&4294967295|_>>>21))+((_=c+(f^e^t)+s[15]+530742520&4294967295)<<16&4294967295|_>>>16))+((_=t+(c^f^e)+s[2]+3299628645&4294967295)<<23&4294967295|_>>>9))+((_=e+(c^(t|~f))+s[0]+4096336452&4294967295)<<6&4294967295|_>>>26))+((_=f+(t^(e|~c))+s[7]+1126891415&4294967295)<<10&4294967295|_>>>22))+((_=c+(e^(f|~t))+s[14]+2878612391&4294967295)<<15&4294967295|_>>>17))+((_=t+(f^(c|~e))+s[5]+4237533241&4294967295)<<21&4294967295|_>>>11))+((_=e+(c^(t|~f))+s[12]+1700485571&4294967295)<<6&4294967295|_>>>26))+((_=f+(t^(e|~c))+s[3]+2399980690&4294967295)<<10&4294967295|_>>>22))+((_=c+(e^(f|~t))+s[10]+4293915773&4294967295)<<15&4294967295|_>>>17))+((_=t+(f^(c|~e))+s[1]+2240044497&4294967295)<<21&4294967295|_>>>11))+((_=e+(c^(t|~f))+s[8]+1873313359&4294967295)<<6&4294967295|_>>>26))+((_=f+(t^(e|~c))+s[15]+4264355552&4294967295)<<10&4294967295|_>>>22))+((_=c+(e^(f|~t))+s[6]+2734768916&4294967295)<<15&4294967295|_>>>17))+((_=t+(f^(c|~e))+s[13]+1309151649&4294967295)<<21&4294967295|_>>>11))+((f=(e=t+((_=e+(c^(t|~f))+s[4]+4149444226&4294967295)<<6&4294967295|_>>>26))+((_=f+(t^(e|~c))+s[11]+3174756917&4294967295)<<10&4294967295|_>>>22))^((c=f+((_=c+(e^(f|~t))+s[2]+718787259&4294967295)<<15&4294967295|_>>>17))|~e))+s[9]+3951481745&4294967295,r.g[0]=r.g[0]+e&4294967295,r.g[1]=r.g[1]+(c+(_<<21&4294967295|_>>>11))&4294967295,r.g[2]=r.g[2]+c&4294967295,r.g[3]=r.g[3]+f&4294967295}function Rr(r,e){this.h=e;for(var t=[],s=!0,c=r.length-1;0<=c;c--){var f=0|r[c];s&&f==e||(t[c]=f,s=!1)}this.g=t}(Oe=R.prototype).Oa=function(r){this.M=r},Oe.ha=function(r,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+r);e=e?e.toUpperCase():"GET",this.I=r,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Vn.g(),this.C=function ut(r){return r.h||(r.h=r.i())}(this.u?this.u:Vn),this.g.onreadystatechange=Ne(this.La,this);try{this.G=!0,this.g.open(e,String(r),!0),this.G=!1}catch(f){return void jr(this,f)}if(r=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var c in s)t.set(c,s[c]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const f of s.keys())t.set(f,s.get(f))}s=Array.from(t.keys()).find(f=>"content-type"==f.toLowerCase()),c=Ie.FormData&&r instanceof Ie.FormData,!(0<=vn(yt,e))||s||c||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[f,_]of t)this.g.setRequestHeader(f,_);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{zs(this),0<this.B&&((this.L=function dn(r){return br&&function Jr(){return Er(on,9,function(){let r=0;const e=Kn(String(Ir)).split("."),t=Kn("9").split("."),s=Math.max(e.length,t.length);for(let _=0;0==r&&_<s;_++){var c=e[_]||"",f=t[_]||"";do{if(c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""],0==c[0].length&&0==f[0].length)break;r=wn(0==c[1].length?0:parseInt(c[1],10),0==f[1].length?0:parseInt(f[1],10))||wn(0==c[2].length,0==f[2].length)||wn(c[2],f[2]),c=c[3],f=f[3]}while(0==r)}return 0<=r})}()&&"number"==typeof r.timeout&&void 0!==r.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ne(this.ua,this)):this.A=ys(this.ua,this.B,this)),this.v=!0,this.g.send(r),this.v=!1}catch(f){jr(this,f)}},Oe.ua=function(){typeof Pe<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,cr(this,"timeout"),this.abort(8))},Oe.abort=function(r){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=r||7,cr(this,"complete"),cr(this,"abort"),fs(this))},Oe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),fs(this,!0)),R.$.N.call(this)},Oe.La=function(){this.s||(this.G||this.v||this.l?Si(this):this.kb())},Oe.kb=function(){Si(this)},Oe.da=function(){try{return 2<Ai(this)?this.g.status:-1}catch{return-1}},Oe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Oe.Wa=function(r){if(this.g){var e=this.g.responseText;return r&&0==e.indexOf(r)&&(e=e.substring(r.length)),B(e)}},Oe.Ia=function(){return this.m},Oe.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Oe=sl.prototype).qa=8,Oe.H=1,Oe.Na=function(r){if(this.m)if(this.m=null,1==this.H){if(!r){this.W=Math.floor(1e5*Math.random()),r=this.W++;const c=new hr(this,this.j,r,void 0);let f=this.s;if(this.U&&(f?(f=mr(f),Ge(f,this.U)):f=this.U),null!==this.o||this.O||(c.I=f,f=null),this.P)e:{for(var e=0,t=0;t<this.i.length;t++){var s=this.i[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Ha(this,c,e),Ii(t=ls(this.G),"RID",r),Ii(t,"CVER",22),this.F&&Ii(t,"X-HTTP-Session-Id",this.F),Ms(this,t),f&&(this.O?e="headers="+encodeURIComponent(String(ya(f)))+"&"+e:this.o&&us(t,this.o,f)),cs(this.h,c),this.bb&&Ii(t,"TYPE","init"),this.P?(Ii(t,"$req",e),Ii(t,"SID","null"),c.ba=!0,ki(c,t,null)):ki(c,t,e),this.H=2}}else 3==this.H&&(r?ps(this,r):0==this.i.length||Rs(this.h)||ps(this))},Oe.Ma=function(){if(this.u=null,Il(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var r=2*this.S;this.j.info("BP detection timer enabled: "+r),this.B=Gn(Ne(this.jb,this),r)}},Oe.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,mn(10),vo(this),Il(this))},Oe.ib=function(){null!=this.v&&(this.v=null,vo(this),_o(this),mn(19))},Oe.pb=function(r){r?(this.j.info("Successfully pinged google.com"),mn(2)):(this.j.info("Failed to ping google.com"),mn(1))},(Oe=Ga.prototype).Ba=function(){},Oe.Aa=function(){},Oe.za=function(){},Oe.ya=function(){},Oe.Va=function(){},Yi.prototype.g=function(r,e){return new Ni(r,e)},vt(Ni,Qn),Ni.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var r=this.g,e=this.l,t=this.h||void 0;mn(0),r.Y=e,r.ma=t||{},r.M=r.aa,r.G=is(r,null,r.Y),va(r)},Ni.prototype.close=function(){So(this.g)},Ni.prototype.u=function(r){var e=this.g;if("string"==typeof r){var t={};t.__data__=r,r=t}else this.v&&((t={}).__data__=Ut(r),r=t);e.i.push(new class{constructor(r,e){this.h=r,this.g=e}}(e.fb++,r)),3==e.H&&va(e)},Ni.prototype.N=function(){this.g.l=null,delete this.j,So(this.g),delete this.g,Ni.$.N.call(this)},vt(si,qt),vt(Sa,an),vt(Ao,Ga),Ao.prototype.Ba=function(){cr(this.g,"a")},Ao.prototype.Aa=function(r){cr(this.g,new si(r))},Ao.prototype.za=function(r){cr(this.g,new Sa)},Ao.prototype.ya=function(){cr(this.g,"b")},vt(ao,function wl(){this.blockSize=-1}),ao.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ao.prototype.j=function(r,e){void 0===e&&(e=r.length);for(var t=e-this.blockSize,s=this.m,c=this.h,f=0;f<e;){if(0==c)for(;f<=t;)Hl(this,r,f),f+=this.blockSize;if("string"==typeof r){for(;f<e;)if(s[c++]=r.charCodeAt(f++),c==this.blockSize){Hl(this,s),c=0;break}}else for(;f<e;)if(s[c++]=r[f++],c==this.blockSize){Hl(this,s),c=0;break}}this.h=c,this.i+=e},ao.prototype.l=function(){var r=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);r[0]=128;for(var e=1;e<r.length-8;++e)r[e]=0;var t=8*this.i;for(e=r.length-8;e<r.length;++e)r[e]=255&t,t/=256;for(this.j(r),r=Array(16),e=t=0;4>e;++e)for(var s=0;32>s;s+=8)r[t++]=this.g[e]>>>s&255;return r};var zl={};function Cl(r){return-128<=r&&128>r?Er(zl,r,function(e){return new Rr([0|e],0>e?-1:0)}):new Rr([0|r],0>r?-1:0)}function L(r){if(isNaN(r)||!isFinite(r))return se;if(0>r)return gr(L(-r));for(var e=[],t=1,s=0;r>=t;s++)e[s]=r/t|0,t*=j;return new Rr(e,0)}var j=4294967296,se=Cl(0),Me=Cl(1),Vt=Cl(16777216);function Wt(r){if(0!=r.h)return!1;for(var e=0;e<r.g.length;e++)if(0!=r.g[e])return!1;return!0}function Ln(r){return-1==r.h}function gr(r){for(var e=r.g.length,t=[],s=0;s<e;s++)t[s]=~r.g[s];return new Rr(t,~r.h).add(Me)}function $r(r,e){return r.add(gr(e))}function Lr(r,e){for(;(65535&r[e])!=r[e];)r[e+1]+=r[e]>>>16,r[e]&=65535,e++}function wr(r,e){this.g=r,this.h=e}function Fi(r,e){if(Wt(e))throw Error("division by zero");if(Wt(r))return new wr(se,se);if(Ln(r))return e=Fi(gr(r),e),new wr(gr(e.g),gr(e.h));if(Ln(e))return e=Fi(r,gr(e)),new wr(gr(e.g),e.h);if(30<r.g.length){if(Ln(r)||Ln(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Me,s=e;0>=s.X(r);)t=Ri(t),s=Ri(s);var c=Gi(t,1),f=Gi(s,1);for(s=Gi(s,2),t=Gi(t,2);!Wt(s);){var _=f.add(s);0>=_.X(r)&&(c=c.add(t),f=_),s=Gi(s,1),t=Gi(t,1)}return e=$r(r,c.R(e)),new wr(c,e)}for(c=se;0<=r.X(e);){for(t=Math.max(1,Math.floor(r.ea()/e.ea())),s=48>=(s=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,s-48),_=(f=L(t)).R(e);Ln(_)||0<_.X(r);)_=(f=L(t-=s)).R(e);Wt(f)&&(f=Me),c=c.add(f),r=$r(r,_)}return new wr(c,r)}function Ri(r){for(var e=r.g.length+1,t=[],s=0;s<e;s++)t[s]=r.D(s)<<1|r.D(s-1)>>>31;return new Rr(t,r.h)}function Gi(r,e){var t=e>>5;e%=32;for(var s=r.g.length-t,c=[],f=0;f<s;f++)c[f]=0<e?r.D(f+t)>>>e|r.D(f+t+1)<<32-e:r.D(f+t);return new Rr(c,r.h)}(Oe=Rr.prototype).ea=function(){if(Ln(this))return-gr(this).ea();for(var r=0,e=1,t=0;t<this.g.length;t++){var s=this.D(t);r+=(0<=s?s:j+s)*e,e*=j}return r},Oe.toString=function(r){if(2>(r=r||10)||36<r)throw Error("radix out of range: "+r);if(Wt(this))return"0";if(Ln(this))return"-"+gr(this).toString(r);for(var e=L(Math.pow(r,6)),t=this,s="";;){var c=Fi(t,e).g,f=((0<(t=$r(t,c.R(e))).g.length?t.g[0]:t.h)>>>0).toString(r);if(Wt(t=c))return f+s;for(;6>f.length;)f="0"+f;s=f+s}},Oe.D=function(r){return 0>r?0:r<this.g.length?this.g[r]:this.h},Oe.X=function(r){return Ln(r=$r(this,r))?-1:Wt(r)?0:1},Oe.abs=function(){return Ln(this)?gr(this):this},Oe.add=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0,c=0;c<=e;c++){var f=s+(65535&this.D(c))+(65535&r.D(c)),_=(f>>>16)+(this.D(c)>>>16)+(r.D(c)>>>16);s=_>>>16,t[c]=(_&=65535)<<16|(f&=65535)}return new Rr(t,-2147483648&t[t.length-1]?-1:0)},Oe.R=function(r){if(Wt(this)||Wt(r))return se;if(Ln(this))return Ln(r)?gr(this).R(gr(r)):gr(gr(this).R(r));if(Ln(r))return gr(this.R(gr(r)));if(0>this.X(Vt)&&0>r.X(Vt))return L(this.ea()*r.ea());for(var e=this.g.length+r.g.length,t=[],s=0;s<2*e;s++)t[s]=0;for(s=0;s<this.g.length;s++)for(var c=0;c<r.g.length;c++){var f=this.D(s)>>>16,_=65535&this.D(s),N=r.D(c)>>>16,G=65535&r.D(c);t[2*s+2*c]+=_*G,Lr(t,2*s+2*c),t[2*s+2*c+1]+=f*G,Lr(t,2*s+2*c+1),t[2*s+2*c+1]+=_*N,Lr(t,2*s+2*c+1),t[2*s+2*c+2]+=f*N,Lr(t,2*s+2*c+2)}for(s=0;s<e;s++)t[s]=t[2*s+1]<<16|t[2*s];for(s=e;s<2*e;s++)t[s]=0;return new Rr(t,0)},Oe.gb=function(r){return Fi(this,r).h},Oe.and=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)&r.D(s);return new Rr(t,this.h&r.h)},Oe.or=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)|r.D(s);return new Rr(t,this.h|r.h)},Oe.xor=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)^r.D(s);return new Rr(t,this.h^r.h)},Yi.prototype.createWebChannel=Yi.prototype.g,Ni.prototype.send=Ni.prototype.u,Ni.prototype.open=Ni.prototype.m,Ni.prototype.close=Ni.prototype.close,gi.NO_ERROR=0,gi.TIMEOUT=8,gi.HTTP_ERROR=6,Jn.COMPLETE="complete",tt.EventType=Et,Et.OPEN="a",Et.CLOSE="b",Et.ERROR="c",Et.MESSAGE="d",Qn.prototype.listen=Qn.prototype.O,R.prototype.listenOnce=R.prototype.P,R.prototype.getLastError=R.prototype.Sa,R.prototype.getLastErrorCode=R.prototype.Ia,R.prototype.getStatus=R.prototype.da,R.prototype.getResponseJson=R.prototype.Wa,R.prototype.getResponseText=R.prototype.ja,R.prototype.send=R.prototype.ha,R.prototype.setWithCredentials=R.prototype.Oa,ao.prototype.digest=ao.prototype.l,ao.prototype.reset=ao.prototype.reset,ao.prototype.update=ao.prototype.j,Rr.prototype.add=Rr.prototype.add,Rr.prototype.multiply=Rr.prototype.R,Rr.prototype.modulo=Rr.prototype.gb,Rr.prototype.compare=Rr.prototype.X,Rr.prototype.toNumber=Rr.prototype.ea,Rr.prototype.toString=Rr.prototype.toString,Rr.prototype.getBits=Rr.prototype.D,Rr.fromNumber=L,Rr.fromString=function X(r,e){if(0==r.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==r.charAt(0))return gr(X(r.substring(1),e));if(0<=r.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=L(Math.pow(e,8)),s=se,c=0;c<r.length;c+=8){var f=Math.min(8,r.length-c),_=parseInt(r.substring(c,c+f),e);8>f?(f=L(Math.pow(e,f)),s=s.R(f).add(L(_))):s=(s=s.R(t)).add(L(_))}return s};var ra=Be.createWebChannelTransport=function(){return new Yi},xo=Be.getStatEventTarget=function(){return Nt()},Gs=Be.ErrorCode=gi,Ls=Be.EventType=Jn,ia=Be.Event=qe,Ws=Be.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Aa=Be.FetchXmlHttpFactory=ma,Wa=Be.WebChannel=tt,Gl=Be.XhrIo=R,ol=Be.Md5=ao,_a=Be.Integer=Rr;const Wc="@firebase/firestore";class Wi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wi.UNAUTHENTICATED=new Wi(null),Wi.GOOGLE_CREDENTIALS=new Wi("google-credentials-uid"),Wi.FIRST_PARTY=new Wi("first-party-uid"),Wi.MOCK_USER=new Wi("mock-user");let bl="9.21.0";const Zi=new et.Yd("@firebase/firestore");function gu(){return Zi.logLevel}function hn(r,...e){if(Zi.logLevel<=et.in.DEBUG){const t=e.map(sc);Zi.debug(`Firestore (${bl}): ${r}`,...t)}}function ss(r,...e){if(Zi.logLevel<=et.in.ERROR){const t=e.map(sc);Zi.error(`Firestore (${bl}): ${r}`,...t)}}function ci(r,...e){if(Zi.logLevel<=et.in.WARN){const t=e.map(sc);Zi.warn(`Firestore (${bl}): ${r}`,...t)}}function sc(r){if("string"==typeof r)return r;try{return JSON.stringify(r)}catch{return r}}function Hn(r="Unexpected state"){const e=`FIRESTORE (${bl}) INTERNAL ASSERTION FAILED: `+r;throw ss(e),new Error(e)}function ir(r,e){r||Hn()}function Fn(r,e){return r}const Lt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class sn extends Ze.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ui{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ro{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Wi.UNAUTHENTICATED))}shutdown(){}}class Dl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Kl{constructor(e){this.t=e,this.currentUser=Wi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let c=this.i;const f=Q=>this.i!==c?(c=this.i,t(Q)):Promise.resolve();let _=new ui;this.o=()=>{this.i++,this.currentUser=this.u(),_.resolve(),_=new ui,e.enqueueRetryable(()=>f(this.currentUser))};const N=()=>{const Q=_;e.enqueueRetryable((0,de.Z)(function*(){yield Q.promise,yield f(s.currentUser)}))},G=Q=>{hn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=Q,this.auth.addAuthTokenListener(this.o),N()};this.t.onInit(Q=>G(Q)),setTimeout(()=>{if(!this.auth){const Q=this.t.getImmediate({optional:!0});Q?G(Q):(hn("FirebaseAuthCredentialsProvider","Auth not yet detected"),_.resolve(),_=new ui)}},0),N()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(hn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ir("string"==typeof s.accessToken),new Ro(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ir(null===e||"string"==typeof e),new Wi(e)}}class ac{constructor(e,t,s){this.h=e,this.l=t,this.m=s,this.type="FirstParty",this.user=Wi.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class mu{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new ac(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Wi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jo{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ka{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const s=f=>{null!=f.error&&hn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${f.error.message}`);const _=f.token!==this.T;return this.T=f.token,hn("FirebaseAppCheckTokenProvider",`Received ${_?"new":"existing"} token.`),_?t(f.token):Promise.resolve()};this.o=f=>{e.enqueueRetryable(()=>s(f))};const c=f=>{hn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=f,this.appCheck.addTokenListener(this.o)};this.I.onInit(f=>c(f)),setTimeout(()=>{if(!this.appCheck){const f=this.I.getImmediate({optional:!0});f?c(f):hn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ir("string"==typeof t.token),this.T=t.token,new jo(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function lo(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class al{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const c=lo(40);for(let f=0;f<c.length;++f)s.length<20&&c[f]<t&&(s+=e.charAt(c[f]%e.length))}return s}}function sr(r,e){return r<e?-1:r>e?1:0}function sa(r,e,t){return r.length===e.length&&r.every((s,c)=>t(s,e[c]))}function Tl(r){return r+"\0"}class oi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new sn(Lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new sn(Lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new sn(Lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new sn(Lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return oi.fromMillis(Date.now())}static fromDate(e){return oi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new oi(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?sr(this.nanoseconds,e.nanoseconds):sr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class rr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new rr(e)}static min(){return new rr(new oi(0,0))}static max(){return new rr(new oi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class xa{constructor(e,t,s){void 0===t?t=0:t>e.length&&Hn(),void 0===s?s=e.length-t:s>e.length-t&&Hn(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===xa.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof xa?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let c=0;c<s;c++){const f=e.get(c),_=t.get(c);if(f<_)return-1;if(f>_)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class vi extends xa{construct(e,t,s){return new vi(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new sn(Lt.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(c=>c.length>0))}return new vi(t)}static emptyPath(){return new vi([])}}const qc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mr extends xa{construct(e,t,s){return new Mr(e,t,s)}static isValidIdentifier(e){return qc.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Mr(["__name__"])}static fromServerFormat(e){const t=[];let s="",c=0;const f=()=>{if(0===s.length)throw new sn(Lt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let _=!1;for(;c<e.length;){const N=e[c];if("\\"===N){if(c+1===e.length)throw new sn(Lt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const G=e[c+1];if("\\"!==G&&"."!==G&&"`"!==G)throw new sn(Lt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=G,c+=2}else"`"===N?(_=!_,c++):"."!==N||_?(s+=N,c++):(f(),c++)}if(f(),_)throw new sn(Lt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mr(t)}static emptyPath(){return new Mr([])}}class Pn{constructor(e){this.path=e}static fromPath(e){return new Pn(vi.fromString(e))}static fromName(e){return new Pn(vi.fromString(e).popFirst(5))}static empty(){return new Pn(vi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===vi.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return vi.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pn(new vi(e.slice()))}}class ql{constructor(e,t,s,c){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=c}}function lc(r){return r.fields.find(e=>2===e.kind)}function Sl(r){return r.fields.filter(e=>2!==e.kind)}ql.UNKNOWN_ID=-1;class cc{constructor(e,t){this.fieldPath=e,this.kind=t}}class qa{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new qa(0,Yr.min())}}function Zc(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,c=rr.fromTimestamp(1e9===s?new oi(t+1,0):new oi(t,s));return new Yr(c,Pn.empty(),e)}function qu(r){return new Yr(r.readTime,r.key,-1)}class Yr{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Yr(rr.min(),Pn.empty(),-1)}static max(){return new Yr(rr.max(),Pn.empty(),-1)}}function uc(r,e){let t=r.readTime.compareTo(e.readTime);return 0!==t?t:(t=Pn.comparator(r.documentKey,e.documentKey),0!==t?t:sr(r.largestBatchId,e.largestBatchId))}const Ra="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Mi{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function vr(r){return Or.apply(this,arguments)}function Or(){return Or=(0,de.Z)(function*(r){if(r.code!==Lt.FAILED_PRECONDITION||r.message!==Ra)throw r;hn("LocalStore","Unexpectedly lost primary lease")}),Or.apply(this,arguments)}class Rt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Hn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Rt((s,c)=>{this.nextCallback=f=>{this.wrapSuccess(e,f).next(s,c)},this.catchCallback=f=>{this.wrapFailure(t,f).next(s,c)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Rt?t:Rt.resolve(t)}catch(t){return Rt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Rt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Rt.reject(t)}static resolve(e){return new Rt((t,s)=>{t(e)})}static reject(e){return new Rt((t,s)=>{s(e)})}static waitFor(e){return new Rt((t,s)=>{let c=0,f=0,_=!1;e.forEach(N=>{++c,N.next(()=>{++f,_&&f===c&&t()},G=>s(G))}),_=!0,f===c&&t()})}static or(e){let t=Rt.resolve(!1);for(const s of e)t=t.next(c=>c?Rt.resolve(c):s());return t}static forEach(e,t){const s=[];return e.forEach((c,f)=>{s.push(t.call(this,c,f))}),this.waitFor(s)}static mapArray(e,t){return new Rt((s,c)=>{const f=e.length,_=new Array(f);let N=0;for(let G=0;G<f;G++){const Q=G;t(e[Q]).next(ue=>{_[Q]=ue,++N,N===f&&s(_)},ue=>c(ue))}})}static doWhile(e,t){return new Rt((s,c)=>{const f=()=>{!0===e()?t().next(()=>{f()},c):s()};f()})}}class wi{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.R=new ui,this.transaction.oncomplete=()=>{this.R.resolve()},this.transaction.onabort=()=>{t.error?this.R.reject(new Ea(e,t.error)):this.R.resolve()},this.transaction.onerror=s=>{const c=x(s.target.error);this.R.reject(new Ea(e,c))}}static open(e,t,s,c){try{return new wi(t,e.transaction(c,s))}catch(f){throw new Ea(t,f)}}get v(){return this.R.promise}abort(e){e&&this.R.reject(e),this.aborted||(hn("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Qi(t)}}class Es{constructor(e,t,s){this.name=e,this.version=t,this.V=s,12.2===Es.S((0,Ze.z$)())&&ss("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return hn("SimpleDb","Removing database:",e),fr(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Ze.hl)())return!1;if(Es.C())return!0;const e=(0,Ze.z$)(),t=Es.S(e),s=0<t&&t<10,c=Es.N(e),f=0<c&&c<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||f)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static N(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}O(e){var t=this;return(0,de.Z)(function*(){return t.db||(hn("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,c)=>{const f=indexedDB.open(t.name,t.version);f.onsuccess=_=>{s(_.target.result)},f.onblocked=()=>{c(new Ea(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},f.onerror=_=>{const N=_.target.error;c("VersionError"===N.name?new sn(Lt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===N.name?new sn(Lt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+N):new Ea(e,N))},f.onupgradeneeded=_=>{hn("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',_.oldVersion),t.V.$(_.target.result,f.transaction,_.oldVersion,t.version).next(()=>{hn("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=s=>t.F(s)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,c){var f=this;return(0,de.Z)(function*(){const _="readonly"===t;let N=0;for(;;){++N;try{f.db=yield f.O(e);const G=wi.open(f.db,e,_?"readonly":"readwrite",s),Q=c(G).next(ue=>(G.P(),ue)).catch(ue=>(G.abort(ue),Rt.reject(ue))).toPromise();return Q.catch(()=>{}),yield G.v,Q}catch(G){const Q=G,ue="FirebaseError"!==Q.name&&N<3;if(hn("SimpleDb","Transaction failed with error:",Q.message,"Retrying:",ue),f.close(),!ue)return Promise.reject(Q)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Xc{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return fr(this.L.delete())}}class Ea extends sn{constructor(e,t){super(Lt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Mo(r){return"IndexedDbTransactionError"===r.name}class Qi{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(hn("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(hn("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),fr(s)}add(e){return hn("SimpleDb","ADD",this.store.name,e,e),fr(this.store.add(e))}get(e){return fr(this.store.get(e)).next(t=>(void 0===t&&(t=null),hn("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return hn("SimpleDb","DELETE",this.store.name,e),fr(this.store.delete(e))}count(){return hn("SimpleDb","COUNT",this.store.name),fr(this.store.count())}j(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const c=this.cursor(s),f=[];return this.W(c,(_,N)=>{f.push(N)}).next(()=>f)}{const c=this.store.getAll(s.range);return new Rt((f,_)=>{c.onerror=N=>{_(N.target.error)},c.onsuccess=N=>{f(N.target.result)}})}}H(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new Rt((c,f)=>{s.onerror=_=>{f(_.target.error)},s.onsuccess=_=>{c(_.target.result)}})}J(e,t){hn("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.Y=!1;const c=this.cursor(s);return this.W(c,(f,_,N)=>N.delete())}X(e,t){let s;t?s=e:(s={},t=e);const c=this.cursor(s);return this.W(c,t)}Z(e){const t=this.cursor({});return new Rt((s,c)=>{t.onerror=f=>{const _=x(f.target.error);c(_)},t.onsuccess=f=>{const _=f.target.result;_?e(_.primaryKey,_.value).next(N=>{N?_.continue():s()}):s()}})}W(e,t){const s=[];return new Rt((c,f)=>{e.onerror=_=>{f(_.target.error)},e.onsuccess=_=>{const N=_.target.result;if(!N)return void c();const G=new Xc(N),Q=t(N.primaryKey,N.value,G);if(Q instanceof Rt){const ue=Q.catch(Xe=>(G.done(),Rt.reject(Xe)));s.push(ue)}G.isDone?c():null===G.K?N.continue():N.continue(G.K)}}).next(()=>Rt.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.Y?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function fr(r){return new Rt((e,t)=>{r.onsuccess=s=>{e(s.target.result)},r.onerror=s=>{const c=x(s.target.error);t(c)}})}let S=!1;function x(r){const e=Es.S((0,Ze.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const s=new sn("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return S||(S=!0,setTimeout(()=>{throw s},0)),s}}return r}class w{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;hn("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,de.Z)(function*(){t.task=null;try{hn("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(s){Mo(s)?hn("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield vr(s)}yield t.et(6e4)}))}}class k{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,de.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.st(s,e))})()}st(e,t){const s=new Set;let c=t,f=!0;return Rt.doWhile(()=>!0===f&&c>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(_=>{if(null!==_&&!s.has(_))return hn("IndexBackiller",`Processing collection: ${_}`),this.it(e,_,c).next(N=>{c-=N,s.add(_)});f=!1})).next(()=>t-c)}it(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(c=>this.localStore.localDocuments.getNextDocuments(e,t,c,s).next(f=>{const _=f.changes;return this.localStore.indexManager.updateIndexEntries(e,_).next(()=>this.rt(c,f)).next(N=>(hn("IndexBackiller",`Updating offset: ${N}`),this.localStore.indexManager.updateCollectionGroup(e,t,N))).next(()=>_.size)}))}rt(e,t){let s=e;return t.changes.forEach((c,f)=>{const _=qu(f);uc(_,s)>0&&(s=_)}),new Yr(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let z=(()=>{class r{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=c=>this.ot(c),this.ut=c=>s.writeSequenceNumber(c))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return r.ct=-1,r})();function ie(r){return null==r}function le(r){return 0===r&&1/r==-1/0}function nt(r){return"number"==typeof r&&Number.isInteger(r)&&!le(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}function Pt(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=$n(e)),e=pn(r.get(t),e);return $n(e)}function pn(r,e){let t=e;const s=r.length;for(let c=0;c<s;c++){const f=r.charAt(c);switch(f){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=f}}return t}function $n(r){return r+"\x01\x01"}function On(r){const e=r.length;if(ir(e>=2),2===e)return ir("\x01"===r.charAt(0)&&"\x01"===r.charAt(1)),vi.emptyPath();const t=e-2,s=[];let c="";for(let f=0;f<e;){const _=r.indexOf("\x01",f);switch((_<0||_>t)&&Hn(),r.charAt(_+1)){case"\x01":const N=r.substring(f,_);let G;0===c.length?G=N:(c+=N,G=c,c=""),s.push(G);break;case"\x10":c+=r.substring(f,_),c+="\0";break;case"\x11":c+=r.substring(f,_+1);break;default:Hn()}f=_+2}return new vi(s)}const Ci=["userId","batchId"];function Li(r,e){return[r,Pt(e)]}function Ks(r,e,t){return[r,Pt(e),t]}const Io={},Po=["prefixPath","collectionGroup","readTime","documentId"],Bs=["prefixPath","collectionGroup","documentId"],Ar=["collectionGroup","readTime","prefixPath","documentId"],Al=["canonicalId","targetId"],qs=["targetId","path"],Qc=["path","targetId"],Ya=["collectionId","parent"],ll=["indexId","uid"],oa=["uid","sequenceNumber"],Yu=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ia=["indexId","uid","orderedDocumentKey"],vu=["userId","collectionPath","documentId"],_u=["userId","collectionPath","largestBatchId"],Nd=["userId","collectionGroup","largestBatchId"],Eu=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Fd=[...Eu,"documentOverlays"],Zu=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Yl=Zu,dc=[...Yl,"indexConfiguration","indexState","indexEntries"];class Xu extends Mi{constructor(e,t){super(),this.at=e,this.currentSequenceNumber=t}}function Ds(r,e){const t=Fn(r);return Es.M(t.at,e)}function Sh(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ma(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Iu(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class Tr{constructor(e,t){this.comparator=e,this.root=t||Is.EMPTY}insert(e,t){return new Tr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Is.BLACK,null,null))}remove(e){return new Tr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Is.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const c=this.comparator(e,s.key);if(0===c)return t+s.left.size;c<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hc(this.root,e,this.comparator,!1)}getReverseIterator(){return new hc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hc(this.root,e,this.comparator,!0)}}class hc{constructor(e,t,s,c){this.isReverse=c,this.nodeStack=[];let f=1;for(;!e.isEmpty();)if(f=t?s(e.key,t):1,t&&c&&(f*=-1),f<0)e=this.isReverse?e.left:e.right;else{if(0===f){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Is{constructor(e,t,s,c,f){this.key=e,this.value=t,this.color=null!=s?s:Is.RED,this.left=null!=c?c:Is.EMPTY,this.right=null!=f?f:Is.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,c,f){return new Is(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=c?c:this.left,null!=f?f:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let c=this;const f=s(e,c.key);return c=f<0?c.copy(null,null,null,c.left.insert(e,t,s),null):0===f?c.copy(null,t,null,null,null):c.copy(null,null,null,null,c.right.insert(e,t,s)),c.fixUp()}removeMin(){if(this.left.isEmpty())return Is.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,c=this;if(t(e,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(e,t),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),0===t(e,c.key)){if(c.right.isEmpty())return Is.EMPTY;s=c.right.min(),c=c.copy(s.key,s.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(e,t))}return c.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Is.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Is.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Hn();const e=this.left.check();if(e!==this.right.check())throw Hn();return e+(this.isRed()?0:1)}}Is.EMPTY=null,Is.RED=!0,Is.BLACK=!1,Is.EMPTY=new class{constructor(){this.size=0}get key(){throw Hn()}get value(){throw Hn()}get color(){throw Hn()}get left(){throw Hn()}get right(){throw Hn()}copy(r,e,t,s,c){return this}insert(r,e,t){return new Is(r,e)}remove(r,e){return this}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ki{constructor(e){this.comparator=e,this.data=new Tr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const c=s.getNext();if(this.comparator(c.key,e[1])>=0)return;t(c.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Rc(this.data.getIterator())}getIteratorFrom(e){return new Rc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Ki)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const c=t.getNext().key,f=s.getNext().key;if(0!==this.comparator(c,f))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ki(this.comparator);return t.data=e,t}}class Rc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Oo(r){return r.hasNext()?r.getNext():void 0}class gs{constructor(e){this.fields=e,e.sort(Mr.comparator)}static empty(){return new gs([])}unionWith(e){let t=new Ki(Mr.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new gs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sa(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class fc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ys{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new fc("Invalid base64 string: "+c):c}}(e);return new Ys(t)}static fromUint8Array(e){const t=function(s){let c="";for(let f=0;f<s.length;++f)c+=String.fromCharCode(s[f]);return c}(e);return new Ys(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return sr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ys.EMPTY_BYTE_STRING=new Ys("");const Qu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zl(r){if(ir(!!r),"string"==typeof r){let e=0;const t=Qu.exec(r);if(ir(!!t),t[1]){let c=t[1];c=(c+"000000000").substr(0,9),e=Number(c)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Hr(r.seconds),nanos:Hr(r.nanos)}}function Hr(r){return"number"==typeof r?r:"string"==typeof r?Number(r):0}function $s(r){return"string"==typeof r?Ys.fromBase64String(r):Ys.fromUint8Array(r)}function Mc(r){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==r?void 0:r.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function pc(r){const e=r.mapValue.fields.__previous_value__;return Mc(e)?pc(e):e}function Xl(r){const e=Zl(r.mapValue.fields.__local_write_time__.timestampValue);return new oi(e.seconds,e.nanos)}class Ps{constructor(e,t,s,c,f,_,N,G){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=c,this.ssl=f,this.forceLongPolling=_,this.autoDetectLongPolling=N,this.useFetchStreams=G}}class Ho{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ho("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ho&&e.projectId===this.projectId&&e.database===this.database}}const co={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},wu={nullValue:"NULL_VALUE"};function cl(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Mc(r)?4:Nr(r)?9007199254740991:10:Hn()}function wo(r,e){if(r===e)return!0;const t=cl(r);if(t!==cl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Xl(r).isEqual(Xl(e));case 3:return function(s,c){if("string"==typeof s.timestampValue&&"string"==typeof c.timestampValue&&s.timestampValue.length===c.timestampValue.length)return s.timestampValue===c.timestampValue;const f=Zl(s.timestampValue),_=Zl(c.timestampValue);return f.seconds===_.seconds&&f.nanos===_.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return c=e,$s(r.bytesValue).isEqual($s(c.bytesValue));case 7:return r.referenceValue===e.referenceValue;case 8:return function(s,c){return Hr(s.geoPointValue.latitude)===Hr(c.geoPointValue.latitude)&&Hr(s.geoPointValue.longitude)===Hr(c.geoPointValue.longitude)}(r,e);case 2:return function(s,c){if("integerValue"in s&&"integerValue"in c)return Hr(s.integerValue)===Hr(c.integerValue);if("doubleValue"in s&&"doubleValue"in c){const f=Hr(s.doubleValue),_=Hr(c.doubleValue);return f===_?le(f)===le(_):isNaN(f)&&isNaN(_)}return!1}(r,e);case 9:return sa(r.arrayValue.values||[],e.arrayValue.values||[],wo);case 10:return function(s,c){const f=s.mapValue.fields||{},_=c.mapValue.fields||{};if(Sh(f)!==Sh(_))return!1;for(const N in f)if(f.hasOwnProperty(N)&&(void 0===_[N]||!wo(f[N],_[N])))return!1;return!0}(r,e);default:return Hn()}var c}function Jc(r,e){return void 0!==(r.values||[]).find(t=>wo(t,e))}function Za(r,e){if(r===e)return 0;const t=cl(r),s=cl(e);if(t!==s)return sr(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return sr(r.booleanValue,e.booleanValue);case 2:return function(c,f){const _=Hr(c.integerValue||c.doubleValue),N=Hr(f.integerValue||f.doubleValue);return _<N?-1:_>N?1:_===N?0:isNaN(_)?isNaN(N)?0:-1:1}(r,e);case 3:return Ah(r.timestampValue,e.timestampValue);case 4:return Ah(Xl(r),Xl(e));case 5:return sr(r.stringValue,e.stringValue);case 6:return function(c,f){const _=$s(c),N=$s(f);return _.compareTo(N)}(r.bytesValue,e.bytesValue);case 7:return function(c,f){const _=c.split("/"),N=f.split("/");for(let G=0;G<_.length&&G<N.length;G++){const Q=sr(_[G],N[G]);if(0!==Q)return Q}return sr(_.length,N.length)}(r.referenceValue,e.referenceValue);case 8:return function(c,f){const _=sr(Hr(c.latitude),Hr(f.latitude));return 0!==_?_:sr(Hr(c.longitude),Hr(f.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return function(c,f){const _=c.values||[],N=f.values||[];for(let G=0;G<_.length&&G<N.length;++G){const Q=Za(_[G],N[G]);if(Q)return Q}return sr(_.length,N.length)}(r.arrayValue,e.arrayValue);case 10:return function(c,f){if(c===co.mapValue&&f===co.mapValue)return 0;if(c===co.mapValue)return 1;if(f===co.mapValue)return-1;const _=c.fields||{},N=Object.keys(_),G=f.fields||{},Q=Object.keys(G);N.sort(),Q.sort();for(let ue=0;ue<N.length&&ue<Q.length;++ue){const Xe=sr(N[ue],Q[ue]);if(0!==Xe)return Xe;const Mt=Za(_[N[ue]],G[Q[ue]]);if(0!==Mt)return Mt}return sr(N.length,Q.length)}(r.mapValue,e.mapValue);default:throw Hn()}}function Ah(r,e){if("string"==typeof r&&"string"==typeof e&&r.length===e.length)return sr(r,e);const t=Zl(r),s=Zl(e),c=sr(t.seconds,s.seconds);return 0!==c?c:sr(t.nanos,s.nanos)}function P(r){return $(r)}function $(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(s){const c=Zl(s);return`time(${c.seconds},${c.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?$s(r.bytesValue).toBase64():"referenceValue"in r?Pn.fromName(r.referenceValue).toString():"geoPointValue"in r?`geo(${(e=r.geoPointValue).latitude},${e.longitude})`:"arrayValue"in r?function(s){let c="[",f=!0;for(const _ of s.values||[])f?f=!1:c+=",",c+=$(_);return c+"]"}(r.arrayValue):"mapValue"in r?function(s){const c=Object.keys(s.fields||{}).sort();let f="{",_=!0;for(const N of c)_?_=!1:f+=",",f+=`${N}:${$(s.fields[N])}`;return f+"}"}(r.mapValue):Hn();var e}function Ee(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function st(r){return!!r&&"integerValue"in r}function It(r){return!!r&&"arrayValue"in r}function Gt(r){return!!r&&"nullValue"in r}function In(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function xn(r){return!!r&&"mapValue"in r}function Zn(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&"object"==typeof r.timestampValue)return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Ma(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Zn(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zn(r.arrayValue.values[t]);return e}return Object.assign({},r)}function Nr(r){return"__max__"===(((r.mapValue||{}).fields||{}).__type__||{}).stringValue}function Fr(r){return"nullValue"in r?wu:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?Ee(Ho.empty(),Pn.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:Hn()}function uo(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?Ee(Ho.empty(),Pn.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?co:Hn()}function Ts(r,e){const t=Za(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function ul(r,e){const t=Za(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class Zs{constructor(e){this.value=e}static empty(){return new Zs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!xn(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zn(t)}setAll(e){let t=Mr.emptyPath(),s={},c=[];e.forEach((_,N)=>{if(!t.isImmediateParentOf(N)){const G=this.getFieldsMap(t);this.applyChanges(G,s,c),s={},c=[],t=N.popLast()}_?s[N.lastSegment()]=Zn(_):c.push(N.lastSegment())});const f=this.getFieldsMap(t);this.applyChanges(f,s,c)}delete(e){const t=this.field(e.popLast());xn(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return wo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let c=t.mapValue.fields[e.get(s)];xn(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=c),t=c}return t.mapValue.fields}applyChanges(e,t,s){Ma(t,(c,f)=>e[c]=f);for(const c of s)delete e[c]}clone(){return new Zs(Zn(this.value))}}function xl(r){const e=[];return Ma(r.fields,(t,s)=>{const c=new Mr([t]);if(xn(s)){const f=xl(s.mapValue).fields;if(0===f.length)e.push(c);else for(const _ of f)e.push(c.child(_))}else e.push(c)}),new gs(e)}class _i{constructor(e,t,s,c,f,_,N){this.key=e,this.documentType=t,this.version=s,this.readTime=c,this.createTime=f,this.data=_,this.documentState=N}static newInvalidDocument(e){return new _i(e,0,rr.min(),rr.min(),rr.min(),Zs.empty(),0)}static newFoundDocument(e,t,s,c){return new _i(e,1,t,rr.min(),s,c,0)}static newNoDocument(e,t){return new _i(e,2,t,rr.min(),rr.min(),Zs.empty(),0)}static newUnknownDocument(e,t){return new _i(e,3,t,rr.min(),rr.min(),Zs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(rr.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof _i&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _i(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ko{constructor(e,t){this.position=e,this.inclusive=t}}function eu(r,e,t){let s=0;for(let c=0;c<r.position.length;c++){const f=e[c],_=r.position[c];if(s=f.field.isKeyField()?Pn.comparator(Pn.fromName(_.referenceValue),t.key):Za(_,t.data.field(f.field)),"desc"===f.dir&&(s*=-1),0!==s)break}return s}function Cu(r,e){if(null===r)return null===e;if(null===e||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!wo(r.position[t],e.position[t]))return!1;return!0}class zo{constructor(e,t="asc"){this.field=e,this.dir=t}}function bu(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class Du{}class hi extends Du{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new Lp(e,t,s):"array-contains"===t?new Bd(e,s):"in"===t?new Ol(e,s):"not-in"===t?new Ju(e,s):"array-contains-any"===t?new $d(e,s):new hi(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new Rh(e,s):new Pl(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Za(t,this.value)):null!==t&&cl(this.value)===cl(t)&&this.matchesComparison(Za(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Hn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class bi extends Du{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new bi(e,t)}matches(e){return Xa(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Xa(r){return"and"===r.op}function Rl(r){return"or"===r.op}function Qa(r){return Ml(r)&&Xa(r)}function Ml(r){for(const e of r.filters)if(e instanceof bi)return!1;return!0}function Ld(r){if(r instanceof hi)return r.field.canonicalString()+r.op.toString()+P(r.value);if(Qa(r))return r.filters.map(e=>Ld(e)).join(",");{const e=r.filters.map(t=>Ld(t)).join(",");return`${r.op}(${e})`}}function Mf(r,e){return r instanceof hi?(t=r,(s=e)instanceof hi&&t.op===s.op&&t.field.isEqual(s.field)&&wo(t.value,s.value)):r instanceof bi?function(t,s){return s instanceof bi&&t.op===s.op&&t.filters.length===s.filters.length&&t.filters.reduce((c,f,_)=>c&&Mf(f,s.filters[_]),!0)}(r,e):void Hn();var t,s}function Pc(r,e){const t=r.filters.concat(e);return bi.create(t,r.op)}function xh(r){return r instanceof hi?`${(e=r).field.canonicalString()} ${e.op} ${P(e.value)}`:r instanceof bi?function(e){return e.op.toString()+" {"+e.getFilters().map(xh).join(" ,")+"}"}(r):"Filter";var e}class Lp extends hi{constructor(e,t,s){super(e,t,s),this.key=Pn.fromName(s.referenceValue)}matches(e){const t=Pn.comparator(e.key,this.key);return this.matchesComparison(t)}}class Rh extends hi{constructor(e,t){super(e,"in",t),this.keys=Mh(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Pl extends hi{constructor(e,t){super(e,"not-in",t),this.keys=Mh(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Mh(r,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>Pn.fromName(s.referenceValue))}class Bd extends hi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return It(t)&&Jc(t.arrayValue,this.value)}}class Ol extends hi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Jc(this.value.arrayValue,t)}}class Ju extends hi{constructor(e,t){super(e,"not-in",t)}matches(e){if(Jc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Jc(this.value.arrayValue,t)}}class $d extends hi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!It(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Jc(this.value.arrayValue,s))}}class os{constructor(e,t=null,s=[],c=[],f=null,_=null,N=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=c,this.limit=f,this.startAt=_,this.endAt=N,this.ft=null}}function Ja(r,e=null,t=[],s=[],c=null,f=null,_=null){return new os(r,e,t,s,c,f,_)}function el(r){const e=Fn(r);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>Ld(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(c=s).field.canonicalString()+c.dir;var c}).join(","),ie(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>P(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>P(s)).join(",")),e.ft=t}return e.ft}function Oc(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!bu(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Mf(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Cu(r.startAt,e.startAt)&&Cu(r.endAt,e.endAt)}function Tu(r){return Pn.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length}function Pa(r,e){return r.filters.filter(t=>t instanceof hi&&t.field.isEqual(e))}function gc(r,e,t){let s=wu,c=!0;for(const f of Pa(r,e)){let _=wu,N=!0;switch(f.op){case"<":case"<=":_=Fr(f.value);break;case"==":case"in":case">=":_=f.value;break;case">":_=f.value,N=!1;break;case"!=":case"not-in":_=wu}Ts({value:s,inclusive:c},{value:_,inclusive:N})<0&&(s=_,c=N)}if(null!==t)for(let f=0;f<r.orderBy.length;++f)if(r.orderBy[f].field.isEqual(e)){const _=t.position[f];Ts({value:s,inclusive:c},{value:_,inclusive:t.inclusive})<0&&(s=_,c=t.inclusive);break}return{value:s,inclusive:c}}function Ud(r,e,t){let s=co,c=!0;for(const f of Pa(r,e)){let _=co,N=!0;switch(f.op){case">=":case">":_=uo(f.value),N=!1;break;case"==":case"in":case"<=":_=f.value;break;case"<":_=f.value,N=!1;break;case"!=":case"not-in":_=co}ul({value:s,inclusive:c},{value:_,inclusive:N})>0&&(s=_,c=N)}if(null!==t)for(let f=0;f<r.orderBy.length;++f)if(r.orderBy[f].field.isEqual(e)){const _=t.position[f];ul({value:s,inclusive:c},{value:_,inclusive:t.inclusive})>0&&(s=_,c=t.inclusive);break}return{value:s,inclusive:c}}class aa{constructor(e,t=null,s=[],c=[],f=null,_="F",N=null,G=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=c,this.limit=f,this.limitType=_,this.startAt=N,this.endAt=G,this.dt=null,this._t=null}}function Ph(r,e,t,s,c,f,_,N){return new aa(r,e,t,s,c,f,_,N)}function Oa(r){return new aa(r)}function Vd(r){return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.explicitOrderBy.length||1===r.explicitOrderBy.length&&r.explicitOrderBy[0].field.isKeyField())}function mc(r){return r.explicitOrderBy.length>0?r.explicitOrderBy[0].field:null}function ed(r){for(const e of r.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function jd(r){return null!==r.collectionGroup}function kl(r){const e=Fn(r);if(null===e.dt){e.dt=[];const t=ed(e),s=mc(e);if(null!==t&&null===s)t.isKeyField()||e.dt.push(new zo(t)),e.dt.push(new zo(Mr.keyField(),"asc"));else{let c=!1;for(const f of e.explicitOrderBy)e.dt.push(f),f.field.isKeyField()&&(c=!0);if(!c){const f=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new zo(Mr.keyField(),f))}}}return e.dt}function No(r){const e=Fn(r);if(!e._t)if("F"===e.limitType)e._t=Ja(e.path,e.collectionGroup,kl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const f of kl(e))t.push(new zo(f.field,"desc"===f.dir?"asc":"desc"));const s=e.endAt?new ko(e.endAt.position,e.endAt.inclusive):null,c=e.startAt?new ko(e.startAt.position,e.startAt.inclusive):null;e._t=Ja(e.path,e.collectionGroup,t,e.filters,e.limit,s,c)}return e._t}function Su(r,e){e.getFirstInequalityField(),ed(r);const t=r.filters.concat([e]);return new aa(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function tu(r,e,t){return new aa(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function yc(r,e){return Oc(No(r),No(e))&&r.limitType===e.limitType}function td(r){return`${el(No(r))}|lt:${r.limitType}`}function Au(r){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(s=>xh(s)).join(", ")}]`),ie(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(s=>{return`${(c=s).field.canonicalString()} (${c.dir})`;var c}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>P(s)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>P(s)).join(",")),`Target(${t})`}(No(r))}; limitType=${r.limitType})`}function nu(r,e){return e.isFoundDocument()&&function(t,s){const c=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(c):Pn.isDocumentKey(t.path)?t.path.isEqual(c):t.path.isImmediateParentOf(c)}(r,e)&&function(t,s){for(const c of kl(t))if(!c.field.isKeyField()&&null===s.data.field(c.field))return!1;return!0}(r,e)&&function(t,s){for(const c of t.filters)if(!c.matches(s))return!1;return!0}(r,e)&&(s=e,!((t=r).startAt&&!function(c,f,_){const N=eu(c,f,_);return c.inclusive?N<=0:N<0}(t.startAt,kl(t),s)||t.endAt&&!function(c,f,_){const N=eu(c,f,_);return c.inclusive?N>=0:N>0}(t.endAt,kl(t),s)));var t,s}function ru(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Pf(r){return(e,t)=>{let s=!1;for(const c of kl(r)){const f=Of(c,e,t);if(0!==f)return f;s=s||c.field.isKeyField()}return 0}}function Of(r,e,t){const s=r.field.isKeyField()?Pn.comparator(e.key,t.key):function(c,f,_){const N=f.data.field(c),G=_.data.field(c);return null!==N&&null!==G?Za(N,G):Hn()}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Hn()}}class vc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[c,f]of s)if(this.equalsFn(c,e))return f}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),c=this.inner[s];if(void 0===c)return this.inner[s]=[[e,t]],void this.innerSize++;for(let f=0;f<c.length;f++)if(this.equalsFn(c[f][0],e))return void(c[f]=[e,t]);c.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let c=0;c<s.length;c++)if(this.equalsFn(s[c][0],e))return 1===s.length?delete this.inner[t]:s.splice(c,1),this.innerSize--,!0;return!1}forEach(e){Ma(this.inner,(t,s)=>{for(const[c,f]of s)e(c,f)})}isEmpty(){return Iu(this.inner)}size(){return this.innerSize}}const Bp=new Tr(Pn.comparator);function Xs(){return Bp}const nd=new Tr(Pn.comparator);function kc(...r){let e=nd;for(const t of r)e=e.insert(t.key,t);return e}function Nc(r){let e=nd;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function dl(){return xu()}function _c(){return xu()}function xu(){return new vc(r=>r.toString(),(r,e)=>r.isEqual(e))}const Oh=new Tr(Pn.comparator),kf=new Ki(Pn.comparator);function Qr(...r){let e=kf;for(const t of r)e=e.add(t);return e}const rd=new Ki(sr);function id(){return rd}function sd(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:le(e)?"-0":e}}function od(r){return{integerValue:""+r}}function la(r,e){return nt(e)?od(e):sd(r,e)}class Ec{constructor(){this._=void 0}}function Hd(r,e,t){return r instanceof Ic?function(s,c){const f={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return c&&Mc(c)&&(c=pc(c)),c&&(f.fields.__previous_value__=c),{mapValue:f}}(t,e):r instanceof su?zd(r,e):r instanceof wc?Cc(r,e):function(s,c){const f=iu(s,c),_=Ru(f)+Ru(s.wt);return st(f)&&st(s.wt)?od(_):sd(s.serializer,_)}(r,e)}function ad(r,e,t){return r instanceof su?zd(r,e):r instanceof wc?Cc(r,e):t}function iu(r,e){return r instanceof ka?st(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class Ic extends Ec{}class su extends Ec{constructor(e){super(),this.elements=e}}function zd(r,e){const t=Nf(e);for(const s of r.elements)t.some(c=>wo(c,s))||t.push(s);return{arrayValue:{values:t}}}class wc extends Ec{constructor(e){super(),this.elements=e}}function Cc(r,e){let t=Nf(e);for(const s of r.elements)t=t.filter(c=>!wo(c,s));return{arrayValue:{values:t}}}class ka extends Ec{constructor(e,t){super(),this.serializer=e,this.wt=t}}function Ru(r){return Hr(r.integerValue||r.doubleValue)}function Nf(r){return It(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class Gd{constructor(e,t){this.field=e,this.transform=t}}class tl{constructor(e,t){this.version=e,this.transformResults=t}}class ms{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ms}static exists(e){return new ms(void 0,e)}static updateTime(e){return new ms(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ld(r,e){return void 0!==r.updateTime?e.isFoundDocument()&&e.version.isEqual(r.updateTime):void 0===r.exists||r.exists===e.isFoundDocument()}class Mu{}function Nl(r,e){if(!r.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return r.isNoDocument()?new C(r.key,ms.none()):new ca(r.key,r.data,ms.none());{const t=r.data,s=Zs.empty();let c=new Ki(Mr.comparator);for(let f of e.fields)if(!c.has(f)){let _=t.field(f);null===_&&f.length>1&&(f=f.popLast(),_=t.field(f)),null===_?s.delete(f):s.set(f,_),c=c.add(f)}return new nl(r.key,s,new gs(c.toArray()),ms.none())}}function cd(r,e,t){r instanceof ca?function(s,c,f){const _=s.value.clone(),N=hd(s.fieldTransforms,c,f.transformResults);_.setAll(N),c.convertToFoundDocument(f.version,_).setHasCommittedMutations()}(r,e,t):r instanceof nl?function(s,c,f){if(!ld(s.precondition,c))return void c.convertToUnknownDocument(f.version);const _=hd(s.fieldTransforms,c,f.transformResults),N=c.data;N.setAll(kh(s)),N.setAll(_),c.convertToFoundDocument(f.version,N).setHasCommittedMutations()}(r,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ou(r,e,t,s){return r instanceof ca?function(c,f,_,N){if(!ld(c.precondition,f))return _;const G=c.value.clone(),Q=Wd(c.fieldTransforms,N,f);return G.setAll(Q),f.convertToFoundDocument(f.version,G).setHasLocalMutations(),null}(r,e,t,s):r instanceof nl?function(c,f,_,N){if(!ld(c.precondition,f))return _;const G=Wd(c.fieldTransforms,N,f),Q=f.data;return Q.setAll(kh(c)),Q.setAll(G),f.convertToFoundDocument(f.version,Q).setHasLocalMutations(),null===_?null:_.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(ue=>ue.field))}(r,e,t,s):(_=t,ld(r.precondition,f=e)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):_);var f,_}function ud(r,e){let t=null;for(const s of r.fieldTransforms){const c=e.data.field(s.field),f=iu(s.transform,c||null);null!=f&&(null===t&&(t=Zs.empty()),t.set(s.field,f))}return t||null}function dd(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=r.fieldTransforms)&&void 0===s||t&&s&&sa(t,s,(c,f)=>function $p(r,e){return r.field.isEqual(e.field)&&(s=e.transform,(t=r.transform)instanceof su&&s instanceof su||t instanceof wc&&s instanceof wc?sa(t.elements,s.elements,wo):t instanceof ka&&s instanceof ka?wo(t.wt,s.wt):t instanceof Ic&&s instanceof Ic);var t,s}(c,f))))&&(0===r.type?r.value.isEqual(e.value):1!==r.type||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask));var t,s}class ca extends Mu{constructor(e,t,s,c=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}}class nl extends Mu{constructor(e,t,s,c,f=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=c,this.fieldTransforms=f,this.type=1}getFieldMask(){return this.fieldMask}}function kh(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function hd(r,e,t){const s=new Map;ir(r.length===t.length);for(let c=0;c<t.length;c++){const f=r[c],_=f.transform,N=e.data.field(f.field);s.set(f.field,ad(_,N,t[c]))}return s}function Wd(r,e,t){const s=new Map;for(const c of r){const f=c.transform,_=t.data.field(c.field);s.set(c.field,Hd(f,_,e))}return s}class C extends Mu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class g extends Mu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class m{constructor(e,t,s,c){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=c}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let c=0;c<this.mutations.length;c++){const f=this.mutations[c];f.key.isEqual(e.key)&&cd(f,e,s[c])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=ou(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=ou(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=_c();return this.mutations.forEach(c=>{const f=e.get(c.key),_=f.overlayedDocument;let N=this.applyToLocalView(_,f.mutatedFields);N=t.has(c.key)?null:N;const G=Nl(_,N);null!==G&&s.set(c.key,G),_.isValidDocument()||_.convertToNoDocument(rr.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Qr())}isEqual(e){return this.batchId===e.batchId&&sa(this.mutations,e.mutations,(t,s)=>dd(t,s))&&sa(this.baseMutations,e.baseMutations,(t,s)=>dd(t,s))}}class A{constructor(e,t,s,c){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=c}static from(e,t,s){ir(e.mutations.length===s.length);let c=Oh;const f=e.mutations;for(let _=0;_<f.length;_++)c=c.insert(f[_].key,s[_].version);return new A(e,t,s,c)}}class K{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Je{constructor(e,t){this.count=e,this.unchangedNames=t}}var mt,Kt;function kn(r){switch(r){default:return Hn();case Lt.CANCELLED:case Lt.UNKNOWN:case Lt.DEADLINE_EXCEEDED:case Lt.RESOURCE_EXHAUSTED:case Lt.INTERNAL:case Lt.UNAVAILABLE:case Lt.UNAUTHENTICATED:return!1;case Lt.INVALID_ARGUMENT:case Lt.NOT_FOUND:case Lt.ALREADY_EXISTS:case Lt.PERMISSION_DENIED:case Lt.FAILED_PRECONDITION:case Lt.ABORTED:case Lt.OUT_OF_RANGE:case Lt.UNIMPLEMENTED:case Lt.DATA_LOSS:return!0}}function er(r){if(void 0===r)return ss("GRPC error has no .code"),Lt.UNKNOWN;switch(r){case mt.OK:return Lt.OK;case mt.CANCELLED:return Lt.CANCELLED;case mt.UNKNOWN:return Lt.UNKNOWN;case mt.DEADLINE_EXCEEDED:return Lt.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return Lt.RESOURCE_EXHAUSTED;case mt.INTERNAL:return Lt.INTERNAL;case mt.UNAVAILABLE:return Lt.UNAVAILABLE;case mt.UNAUTHENTICATED:return Lt.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return Lt.INVALID_ARGUMENT;case mt.NOT_FOUND:return Lt.NOT_FOUND;case mt.ALREADY_EXISTS:return Lt.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return Lt.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return Lt.FAILED_PRECONDITION;case mt.ABORTED:return Lt.ABORTED;case mt.OUT_OF_RANGE:return Lt.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return Lt.UNIMPLEMENTED;case mt.DATA_LOSS:return Lt.DATA_LOSS;default:return Hn()}}(Kt=mt||(mt={}))[Kt.OK=0]="OK",Kt[Kt.CANCELLED=1]="CANCELLED",Kt[Kt.UNKNOWN=2]="UNKNOWN",Kt[Kt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kt[Kt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kt[Kt.NOT_FOUND=5]="NOT_FOUND",Kt[Kt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kt[Kt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kt[Kt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kt[Kt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kt[Kt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kt[Kt.ABORTED=10]="ABORTED",Kt[Kt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kt[Kt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kt[Kt.INTERNAL=13]="INTERNAL",Kt[Kt.UNAVAILABLE=14]="UNAVAILABLE",Kt[Kt.DATA_LOSS=15]="DATA_LOSS";class nr{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return as}static getOrCreateInstance(){return null===as&&(as=new nr),as}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let as=null;function Go(){return new TextEncoder}const Kd=new _a([4294967295,4294967295],0);function hl(r){const e=Go().encode(r),t=new ol;return t.update(e),new Uint8Array(t.digest())}function Fc(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),c=e.getUint32(8,!0),f=e.getUint32(12,!0);return[new _a([t,s],0),new _a([c,f],0)]}class Os{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Pu(`Invalid padding: ${t}`);if(s<0)throw new Pu(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new Pu(`Invalid hash count: ${s}`);if(0===e.length&&0!==t)throw new Pu(`Invalid padding when bitmap length is 0: ${t}`);this.yt=8*e.length-t,this.It=_a.fromNumber(this.yt)}Tt(e,t,s){let c=e.add(t.multiply(_a.fromNumber(s)));return 1===c.compare(Kd)&&(c=new _a([c.getBits(0),c.getBits(1)],0)),c.modulo(this.It).toNumber()}Et(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}At(e){if(0===this.yt)return!1;const t=hl(e),[s,c]=Fc(t);for(let f=0;f<this.hashCount;f++){const _=this.Tt(s,c,f);if(!this.Et(_))return!1}return!0}static create(e,t,s){const c=e%8==0?0:8-e%8,f=new Uint8Array(Math.ceil(e/8)),_=new Os(f,c,t);return s.forEach(N=>_.insert(N)),_}insert(e){if(0===this.yt)return;const t=hl(e),[s,c]=Fc(t);for(let f=0;f<this.hashCount;f++){const _=this.Tt(s,c,f);this.Rt(_)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Pu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class au{constructor(e,t,s,c,f){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=c,this.resolvedLimboDocuments=f}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const c=new Map;return c.set(e,Ql.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new au(rr.min(),c,new Tr(sr),Xs(),Qr())}}class Ql{constructor(e,t,s,c,f){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=c,this.removedDocuments=f}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Ql(s,t,Qr(),Qr(),Qr())}}class lu{constructor(e,t,s,c){this.vt=e,this.removedTargetIds=t,this.key=s,this.Pt=c}}class qd{constructor(e,t){this.targetId=e,this.bt=t}}class fd{constructor(e,t,s=Ys.EMPTY_BYTE_STRING,c=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=c}}class pd{constructor(){this.Vt=0,this.St=Og(),this.Dt=Ys.EMPTY_BYTE_STRING,this.Ct=!1,this.xt=!0}get current(){return this.Ct}get resumeToken(){return this.Dt}get Nt(){return 0!==this.Vt}get kt(){return this.xt}Mt(e){e.approximateByteSize()>0&&(this.xt=!0,this.Dt=e)}Ot(){let e=Qr(),t=Qr(),s=Qr();return this.St.forEach((c,f)=>{switch(f){case 0:e=e.add(c);break;case 2:t=t.add(c);break;case 1:s=s.add(c);break;default:Hn()}}),new Ql(this.Dt,this.Ct,e,t,s)}$t(){this.xt=!1,this.St=Og()}Ft(e,t){this.xt=!0,this.St=this.St.insert(e,t)}Bt(e){this.xt=!0,this.St=this.St.remove(e)}Lt(){this.Vt+=1}qt(){this.Vt-=1}Ut(){this.xt=!0,this.Ct=!0}}class Nh{constructor(e){this.Kt=e,this.Gt=new Map,this.Qt=Xs(),this.jt=Lc(),this.zt=new Tr(sr)}Wt(e){for(const t of e.vt)e.Pt&&e.Pt.isFoundDocument()?this.Ht(t,e.Pt):this.Jt(t,e.key,e.Pt);for(const t of e.removedTargetIds)this.Jt(t,e.key,e.Pt)}Yt(e){this.forEachTarget(e,t=>{const s=this.Xt(t);switch(e.state){case 0:this.Zt(t)&&s.Mt(e.resumeToken);break;case 1:s.qt(),s.Nt||s.$t(),s.Mt(e.resumeToken);break;case 2:s.qt(),s.Nt||this.removeTarget(t);break;case 3:this.Zt(t)&&(s.Ut(),s.Mt(e.resumeToken));break;case 4:this.Zt(t)&&(this.te(t),s.Mt(e.resumeToken));break;default:Hn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Gt.forEach((s,c)=>{this.Zt(c)&&t(c)})}ee(e){var t;const s=e.targetId,c=e.bt.count,f=this.ne(s);if(f){const _=f.target;if(Tu(_))if(0===c){const N=new Pn(_.path);this.Jt(s,N,_i.newNoDocument(N,rr.min()))}else ir(1===c);else{const N=this.se(s);if(N!==c){const G=this.ie(e,N);0!==G&&(this.te(s),this.zt=this.zt.insert(s,2===G?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=nr.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(Q,ue,Xe){var Mt,rn,Sn,Mn,ur,ei;const Bi={localCacheCount:ue,existenceFilterCount:Xe.count},ti=Xe.unchangedNames;return ti&&(Bi.bloomFilter={applied:0===Q,hashCount:null!==(Mt=null==ti?void 0:ti.hashCount)&&void 0!==Mt?Mt:0,bitmapLength:null!==(Mn=null===(Sn=null===(rn=null==ti?void 0:ti.bits)||void 0===rn?void 0:rn.bitmap)||void 0===Sn?void 0:Sn.length)&&void 0!==Mn?Mn:0,padding:null!==(ei=null===(ur=null==ti?void 0:ti.bits)||void 0===ur?void 0:ur.padding)&&void 0!==ei?ei:0}),Bi}(G,N,e.bt))}}}}ie(e,t){const{unchangedNames:s,count:c}=e.bt;if(!s||!s.bits)return 1;const{bits:{bitmap:f="",padding:_=0},hashCount:N=0}=s;let G,Q;try{G=$s(f).toUint8Array()}catch(ue){if(ue instanceof fc)return ci("Decoding the base64 bloom filter in existence filter failed ("+ue.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw ue}try{Q=new Os(G,_,N)}catch(ue){return ci(ue instanceof Pu?"BloomFilter error: ":"Applying bloom filter failed: ",ue),1}return 0===Q.yt?1:c!==t-this.re(e.targetId,Q)?2:0}re(e,t){const s=this.Kt.getRemoteKeysForTarget(e);let c=0;return s.forEach(f=>{const _=this.Kt.oe(),N=`projects/${_.projectId}/databases/${_.database}/documents/${f.path.canonicalString()}`;t.At(N)||(this.Jt(e,f,null),c++)}),c}ue(e){const t=new Map;this.Gt.forEach((f,_)=>{const N=this.ne(_);if(N){if(f.current&&Tu(N.target)){const G=new Pn(N.target.path);null!==this.Qt.get(G)||this.ce(_,G)||this.Jt(_,G,_i.newNoDocument(G,e))}f.kt&&(t.set(_,f.Ot()),f.$t())}});let s=Qr();this.jt.forEach((f,_)=>{let N=!0;_.forEachWhile(G=>{const Q=this.ne(G);return!Q||"TargetPurposeLimboResolution"===Q.purpose||(N=!1,!1)}),N&&(s=s.add(f))}),this.Qt.forEach((f,_)=>_.setReadTime(e));const c=new au(e,t,this.zt,this.Qt,s);return this.Qt=Xs(),this.jt=Lc(),this.zt=new Tr(sr),c}Ht(e,t){if(!this.Zt(e))return;const s=this.ce(e,t.key)?2:0;this.Xt(e).Ft(t.key,s),this.Qt=this.Qt.insert(t.key,t),this.jt=this.jt.insert(t.key,this.ae(t.key).add(e))}Jt(e,t,s){if(!this.Zt(e))return;const c=this.Xt(e);this.ce(e,t)?c.Ft(t,1):c.Bt(t),this.jt=this.jt.insert(t,this.ae(t).delete(e)),s&&(this.Qt=this.Qt.insert(t,s))}removeTarget(e){this.Gt.delete(e)}se(e){const t=this.Xt(e).Ot();return this.Kt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Lt(e){this.Xt(e).Lt()}Xt(e){let t=this.Gt.get(e);return t||(t=new pd,this.Gt.set(e,t)),t}ae(e){let t=this.jt.get(e);return t||(t=new Ki(sr),this.jt=this.jt.insert(e,t)),t}Zt(e){const t=null!==this.ne(e);return t||hn("WatchChangeAggregator","Detected inactive target",e),t}ne(e){const t=this.Gt.get(e);return t&&t.Nt?null:this.Kt.he(e)}te(e){this.Gt.set(e,new pd),this.Kt.getRemoteKeysForTarget(e).forEach(t=>{this.Jt(e,t,null)})}ce(e,t){return this.Kt.getRemoteKeysForTarget(e).has(t)}}function Lc(){return new Tr(Pn.comparator)}function Og(){return new Tr(Pn.comparator)}const Wm={asc:"ASCENDING",desc:"DESCENDING"},Yd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gd={and:"AND",or:"OR"};class Fh{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Zd(r,e){return r.useProto3Json||ie(e)?e:{value:e}}function cu(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ff(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function kg(r,e){return cu(r,e.toTimestamp())}function Ss(r){return ir(!!r),rr.fromTimestamp(function(e){const t=Zl(e);return new oi(t.seconds,t.nanos)}(r))}function Lf(r,e){return(t=r,new vi(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Bf(r){const e=vi.fromString(r);return ir(Jd(e)),e}function $f(r,e){return Lf(r.databaseId,e.path)}function fl(r,e){const t=Bf(e);if(t.get(1)!==r.databaseId.projectId)throw new sn(Lt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new sn(Lt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Pn(Up(t))}function Lh(r,e){return Lf(r.databaseId,e)}function Uf(r){const e=Bf(r);return 4===e.length?vi.emptyPath():Up(e)}function md(r){return new vi(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Up(r){return ir(r.length>4&&"documents"===r.get(4)),r.popFirst(5)}function Ou(r,e,t){return{name:$f(r,e),fields:t.value.mapValue.fields}}function Vp(r,e,t){const s=fl(r,e.name),c=Ss(e.updateTime),f=e.createTime?Ss(e.createTime):rr.min(),_=new Zs({mapValue:{fields:e.fields}}),N=_i.newFoundDocument(s,c,f,_);return t&&N.setHasCommittedMutations(),t?N.setHasCommittedMutations():N}function yd(r,e){let t;if(e instanceof ca)t={update:Ou(r,e.key,e.value)};else if(e instanceof C)t={delete:$f(r,e.key)};else if(e instanceof nl)t={update:Ou(r,e.key,e.data),updateMask:zp(e.fieldMask)};else{if(!(e instanceof g))return Hn();t={verify:$f(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(c,f){const _=f.transform;if(_ instanceof Ic)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(_ instanceof su)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:_.elements}};if(_ instanceof wc)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:_.elements}};if(_ instanceof ka)return{fieldPath:f.field.canonicalString(),increment:_.wt};throw Hn()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(c=e.precondition).updateTime?{updateTime:kg(r,c.updateTime)}:void 0!==c.exists?{exists:c.exists}:Hn()),t;var c}function ku(r,e){const t=e.currentDocument?void 0!==(c=e.currentDocument).updateTime?ms.updateTime(Ss(c.updateTime)):void 0!==c.exists?ms.exists(c.exists):ms.none():ms.none(),s=e.updateTransforms?e.updateTransforms.map(c=>function(f,_){let N=null;"setToServerValue"in _?(ir("REQUEST_TIME"===_.setToServerValue),N=new Ic):"appendMissingElements"in _?N=new su(_.appendMissingElements.values||[]):"removeAllFromArray"in _?N=new wc(_.removeAllFromArray.values||[]):"increment"in _?N=new ka(f,_.increment):Hn();const G=Mr.fromServerFormat(_.fieldPath);return new Gd(G,N)}(r,c)):[];var c;if(e.update){const c=fl(r,e.update.name),f=new Zs({mapValue:{fields:e.update.fields}});if(e.updateMask){const _=new gs((e.updateMask.fieldPaths||[]).map(Q=>Mr.fromServerFormat(Q)));return new nl(c,f,_,t,s)}return new ca(c,f,t,s)}if(e.delete){const c=fl(r,e.delete);return new C(c,t)}if(e.verify){const c=fl(r,e.verify);return new g(c,t)}return Hn()}function $c(r,e){return{documents:[Lh(r,e.path)]}}function $h(r,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=Lh(r,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Lh(r,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const c=function(G){if(0!==G.length)return Hf(bi.create(G,"and"))}(e.filters);c&&(t.structuredQuery.where=c);const f=function(G){if(0!==G.length)return G.map(Q=>{return{field:Nu((ue=Q).field),direction:Ng(ue.dir)};var ue})}(e.orderBy);f&&(t.structuredQuery.orderBy=f);const _=Zd(r,e.limit);var N,G;return null!==_&&(t.structuredQuery.limit=_),e.startAt&&(t.structuredQuery.startAt={before:(N=e.startAt).inclusive,values:N.position}),e.endAt&&(t.structuredQuery.endAt={before:!(G=e.endAt).inclusive,values:G.position}),t}function Vf(r){let e=Uf(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let c=null;if(s>0){ir(1===s);const ue=t.from[0];ue.allDescendants?c=ue.collectionId:e=e.child(ue.collectionId)}let f=[];t.where&&(f=function(ue){const Xe=jp(ue);return Xe instanceof bi&&Qa(Xe)?Xe.getFilters():[Xe]}(t.where));let _=[];t.orderBy&&(_=t.orderBy.map(ue=>{return new zo(Qd((Xe=ue).field),function(Mt){switch(Mt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Xe.direction));var Xe}));let N=null;t.limit&&(N=function(ue){let Xe;return Xe="object"==typeof ue?ue.value:ue,ie(Xe)?null:Xe}(t.limit));let G=null;var ue;t.startAt&&(G=new ko((ue=t.startAt).values||[],!!ue.before));let Q=null;return t.endAt&&(Q=function(ue){return new ko(ue.values||[],!ue.before)}(t.endAt)),Ph(e,c,_,f,N,"F",G,Q)}function jp(r){return void 0!==r.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Qd(e.unaryFilter.field);return hi.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=Qd(e.unaryFilter.field);return hi.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Qd(e.unaryFilter.field);return hi.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Qd(e.unaryFilter.field);return hi.create(f,"!=",{nullValue:"NULL_VALUE"});default:return Hn()}}(r):void 0!==r.fieldFilter?hi.create(Qd((e=r).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Hn()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==r.compositeFilter?function(e){return bi.create(e.compositeFilter.filters.map(t=>jp(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Hn()}}(e.compositeFilter.op))}(r):Hn();var e}function Ng(r){return Wm[r]}function Uc(r){return Yd[r]}function Hp(r){return gd[r]}function Nu(r){return{fieldPath:r.canonicalString()}}function Qd(r){return Mr.fromServerFormat(r.fieldPath)}function Hf(r){return r instanceof hi?function(e){if("=="===e.op){if(In(e.value))return{unaryFilter:{field:Nu(e.field),op:"IS_NAN"}};if(Gt(e.value))return{unaryFilter:{field:Nu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(In(e.value))return{unaryFilter:{field:Nu(e.field),op:"IS_NOT_NAN"}};if(Gt(e.value))return{unaryFilter:{field:Nu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nu(e.field),op:Uc(e.op),value:e.value}}}(r):r instanceof bi?function(e){const t=e.getFilters().map(s=>Hf(s));return 1===t.length?t[0]:{compositeFilter:{op:Hp(e.op),filters:t}}}(r):Hn()}function zp(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Jd(r){return r.length>=4&&"projects"===r.get(0)&&"databases"===r.get(2)}class Vc{constructor(e,t,s,c,f=rr.min(),_=rr.min(),N=Ys.EMPTY_BYTE_STRING,G=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=c,this.snapshotVersion=f,this.lastLimboFreeSnapshotVersion=_,this.resumeToken=N,this.expectedCount=G}withSequenceNumber(e){return new Vc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Vc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Gp{constructor(e){this.le=e}}function bc(r,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Jl(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:$f(c=r.le,(f=e).key),fields:f.data.value.mapValue.fields,updateTime:cu(c,f.version.toTimestamp()),createTime:cu(c,f.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:vd(e.version)};else{if(!e.isUnknownDocument())return Hn();s.unknownDocument={path:t.path.toArray(),version:vd(e.version)}}var c,f;return s}function Jl(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function vd(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Fl(r){const e=new oi(r.seconds,r.nanoseconds);return rr.fromTimestamp(e)}function Ll(r,e){const t=(e.baseMutations||[]).map(f=>ku(r.le,f));for(let f=0;f<e.mutations.length-1;++f)f+1<e.mutations.length&&void 0!==e.mutations[f+1].transform&&(e.mutations[f].updateTransforms=e.mutations[f+1].transform.fieldTransforms,e.mutations.splice(f+1,1),++f);const s=e.mutations.map(f=>ku(r.le,f)),c=oi.fromMillis(e.localWriteTimeMs);return new m(e.batchId,c,t,s)}function uu(r){const e=Fl(r.readTime),t=void 0!==r.lastLimboFreeSnapshotVersion?Fl(r.lastLimboFreeSnapshotVersion):rr.min();let s;var c;return void 0!==r.query.documents?(ir(1===(c=r.query).documents.length),s=No(Oa(Uf(c.documents[0])))):s=No(Vf(r.query)),new Vc(s,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,Ys.fromBase64String(r.resumeToken))}function _d(r,e){const t=vd(e.snapshotVersion),s=vd(e.lastLimboFreeSnapshotVersion);let c;c=Tu(e.target)?$c(r.le,e.target):$h(r.le,e.target);const f=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:el(e.target),readTime:t,resumeToken:f,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:c}}function Wp(r){const e=Vf({parent:r.parent,structuredQuery:r.structuredQuery});return"LAST"===r.limitType?tu(e,e.limit,"L"):e}function pl(r,e){return new K(e.largestBatchId,ku(r.le,e.overlayMutation))}function Kp(r,e){const t=e.path.lastSegment();return[r,Pt(e.path.popLast()),t]}function qp(r,e,t,s){return{indexId:r,uid:e.uid||"",sequenceNumber:t,readTime:vd(s.readTime),documentKey:Pt(s.documentKey.path),largestBatchId:s.largestBatchId}}class Uh{getBundleMetadata(e,t){return Vh(e).get(t).next(s=>{if(s)return{id:(c=s).bundleId,createTime:Fl(c.createTime),version:c.version};var c})}saveBundleMetadata(e,t){return Vh(e).put({bundleId:(s=t).id,createTime:vd(Ss(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return Na(e).get(t).next(s=>{if(s)return{name:(c=s).name,query:Wp(c.bundledQuery),readTime:Fl(c.readTime)};var c})}saveNamedQuery(e,t){return Na(e).put({name:(s=t).name,readTime:vd(Ss(s.readTime)),bundledQuery:s.bundledQuery});var s}}function Vh(r){return Ds(r,"bundles")}function Na(r){return Ds(r,"namedQueries")}class jh{constructor(e,t){this.serializer=e,this.userId=t}static fe(e,t){return new jh(e,t.uid||"")}getOverlay(e,t){return Ed(e).get(Kp(this.userId,t)).next(s=>s?pl(this.serializer,s):null)}getOverlays(e,t){const s=dl();return Rt.forEach(t,c=>this.getOverlay(e,c).next(f=>{null!==f&&s.set(c,f)})).next(()=>s)}saveOverlays(e,t,s){const c=[];return s.forEach((f,_)=>{const N=new K(t,_);c.push(this.de(e,N))}),Rt.waitFor(c)}removeOverlaysForBatchId(e,t,s){const c=new Set;t.forEach(_=>c.add(Pt(_.getCollectionPath())));const f=[];return c.forEach(_=>{const N=IDBKeyRange.bound([this.userId,_,s],[this.userId,_,s+1],!1,!0);f.push(Ed(e).J("collectionPathOverlayIndex",N))}),Rt.waitFor(f)}getOverlaysForCollection(e,t,s){const c=dl(),f=Pt(t),_=IDBKeyRange.bound([this.userId,f,s],[this.userId,f,Number.POSITIVE_INFINITY],!0);return Ed(e).j("collectionPathOverlayIndex",_).next(N=>{for(const G of N){const Q=pl(this.serializer,G);c.set(Q.getKey(),Q)}return c})}getOverlaysForCollectionGroup(e,t,s,c){const f=dl();let _;const N=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ed(e).X({index:"collectionGroupOverlayIndex",range:N},(G,Q,ue)=>{const Xe=pl(this.serializer,Q);f.size()<c||Xe.largestBatchId===_?(f.set(Xe.getKey(),Xe),_=Xe.largestBatchId):ue.done()}).next(()=>f)}de(e,t){return Ed(e).put(function(s,c,f){const[_,N,G]=Kp(c,f.mutation.key);return{userId:c,collectionPath:N,documentId:G,collectionGroup:f.mutation.key.getCollectionGroup(),largestBatchId:f.largestBatchId,overlayMutation:yd(s.le,f.mutation)}}(this.serializer,this.userId,t))}}function Ed(r){return Ds(r,"documentOverlays")}class ec{constructor(){}_e(e,t){this.we(e,t),t.me()}we(e,t){if("nullValue"in e)this.ge(t,5);else if("booleanValue"in e)this.ge(t,10),t.ye(e.booleanValue?1:0);else if("integerValue"in e)this.ge(t,15),t.ye(Hr(e.integerValue));else if("doubleValue"in e){const s=Hr(e.doubleValue);isNaN(s)?this.ge(t,13):(this.ge(t,15),le(s)?t.ye(0):t.ye(s))}else if("timestampValue"in e){const s=e.timestampValue;this.ge(t,20),"string"==typeof s?t.pe(s):(t.pe(`${s.seconds||""}`),t.ye(s.nanos||0))}else if("stringValue"in e)this.Ie(e.stringValue,t),this.Te(t);else if("bytesValue"in e)this.ge(t,30),t.Ee($s(e.bytesValue)),this.Te(t);else if("referenceValue"in e)this.Ae(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.ge(t,45),t.ye(s.latitude||0),t.ye(s.longitude||0)}else"mapValue"in e?Nr(e)?this.ge(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Te(t)):"arrayValue"in e?(this.ve(e.arrayValue,t),this.Te(t)):Hn()}Ie(e,t){this.ge(t,25),this.Pe(e,t)}Pe(e,t){t.pe(e)}Re(e,t){const s=e.fields||{};this.ge(t,55);for(const c of Object.keys(s))this.Ie(c,t),this.we(s[c],t)}ve(e,t){const s=e.values||[];this.ge(t,50);for(const c of s)this.we(c,t)}Ae(e,t){this.ge(t,37),Pn.fromName(e).path.forEach(s=>{this.ge(t,60),this.Pe(s,t)})}ge(e,t){e.ye(t)}Te(e){e.ye(2)}}function Km(r){if(0===r)return 8;let e=0;return!(r>>4)&&(e+=4,r<<=4),!(r>>6)&&(e+=2,r<<=2),!(r>>7)&&(e+=1),e}function Fg(r){const e=64-function(t){let s=0;for(let c=0;c<8;++c){const f=Km(255&t[c]);if(s+=f,8!==f)break}return s}(r);return Math.ceil(e/8)}ec.be=new ec;class qm{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ve(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Se(s.value),s=t.next();this.De()}Ce(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.xe(s.value),s=t.next();this.Ne()}ke(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Se(s);else if(s<2048)this.Se(960|s>>>6),this.Se(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Se(480|s>>>12),this.Se(128|63&s>>>6),this.Se(128|63&s);else{const c=t.codePointAt(0);this.Se(240|c>>>18),this.Se(128|63&c>>>12),this.Se(128|63&c>>>6),this.Se(128|63&c)}}this.De()}Me(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.xe(s);else if(s<2048)this.xe(960|s>>>6),this.xe(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.xe(480|s>>>12),this.xe(128|63&s>>>6),this.xe(128|63&s);else{const c=t.codePointAt(0);this.xe(240|c>>>18),this.xe(128|63&c>>>12),this.xe(128|63&c>>>6),this.xe(128|63&c)}}this.Ne()}Oe(e){const t=this.$e(e),s=Fg(t);this.Fe(1+s),this.buffer[this.position++]=255&s;for(let c=t.length-s;c<t.length;++c)this.buffer[this.position++]=255&t[c]}Be(e){const t=this.$e(e),s=Fg(t);this.Fe(1+s),this.buffer[this.position++]=~(255&s);for(let c=t.length-s;c<t.length;++c)this.buffer[this.position++]=~(255&t[c])}Le(){this.qe(255),this.qe(255)}Ue(){this.Ke(255),this.Ke(255)}reset(){this.position=0}seed(e){this.Fe(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ge(){return this.buffer.slice(0,this.position)}$e(e){const t=function(c){const f=new DataView(new ArrayBuffer(8));return f.setFloat64(0,c,!1),new Uint8Array(f.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let c=1;c<t.length;++c)t[c]^=s?255:0;return t}Se(e){const t=255&e;0===t?(this.qe(0),this.qe(255)):255===t?(this.qe(255),this.qe(0)):this.qe(t)}xe(e){const t=255&e;0===t?(this.Ke(0),this.Ke(255)):255===t?(this.Ke(255),this.Ke(0)):this.Ke(e)}De(){this.qe(0),this.qe(1)}Ne(){this.Ke(0),this.Ke(1)}qe(e){this.Fe(1),this.buffer[this.position++]=e}Ke(e){this.Fe(1),this.buffer[this.position++]=~e}Fe(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const c=new Uint8Array(s);c.set(this.buffer),this.buffer=c}}class Lg{constructor(e){this.Qe=e}Ee(e){this.Qe.Ve(e)}pe(e){this.Qe.ke(e)}ye(e){this.Qe.Oe(e)}me(){this.Qe.Le()}}class Hh{constructor(e){this.Qe=e}Ee(e){this.Qe.Ce(e)}pe(e){this.Qe.Me(e)}ye(e){this.Qe.Be(e)}me(){this.Qe.Ue()}}class eh{constructor(){this.Qe=new qm,this.je=new Lg(this.Qe),this.ze=new Hh(this.Qe)}seed(e){this.Qe.seed(e)}We(e){return 0===e?this.je:this.ze}Ge(){return this.Qe.Ge()}reset(){this.Qe.reset()}}class Fu{constructor(e,t,s,c){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=c}He(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new Fu(this.indexId,this.documentKey,this.arrayValue,s)}}function Bl(r,e){let t=r.indexId-e.indexId;return 0!==t?t:(t=tc(r.arrayValue,e.arrayValue),0!==t?t:(t=tc(r.directionalValue,e.directionalValue),0!==t?t:Pn.comparator(r.documentKey,e.documentKey)))}function tc(r,e){for(let t=0;t<r.length&&t<e.length;++t){const s=r[t]-e[t];if(0!==s)return s}return r.length-e.length}class Gf{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Je=e.orderBy,this.Ye=[];for(const t of e.filters){const s=t;s.isInequality()?this.Xe=s:this.Ye.push(s)}}Ze(e){ir(e.collectionGroup===this.collectionId);const t=lc(e);if(void 0!==t&&!this.tn(t))return!1;const s=Sl(e);let c=0,f=0;for(;c<s.length&&this.tn(s[c]);++c);if(c===s.length)return!0;if(void 0!==this.Xe){const _=s[c];if(!this.en(this.Xe,_)||!this.nn(this.Je[f++],_))return!1;++c}for(;c<s.length;++c)if(f>=this.Je.length||!this.nn(this.Je[f++],s[c]))return!1;return!0}tn(e){for(const t of this.Ye)if(this.en(t,e))return!0;return!1}en(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}nn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Bg(r){var e,t;if(ir(r instanceof hi||r instanceof bi),r instanceof hi){if(r instanceof Ol){const c=(null===(t=null===(e=r.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(f=>hi.create(r.field,"==",f)))||[];return bi.create(c,"or")}return r}const s=r.filters.map(c=>Bg(c));return bi.create(s,r.op)}function $g(r){if(0===r.getFilters().length)return[];const e=zh(Bg(r));return ir(Ym(e)),Ug(e)||Wf(e)?[e]:e.getFilters()}function Ug(r){return r instanceof hi}function Wf(r){return r instanceof bi&&Qa(r)}function Ym(r){return Ug(r)||Wf(r)||function(e){if(e instanceof bi&&Rl(e)){for(const t of e.getFilters())if(!Ug(t)&&!Wf(t))return!1;return!0}return!1}(r)}function zh(r){if(ir(r instanceof hi||r instanceof bi),r instanceof hi)return r;if(1===r.filters.length)return zh(r.filters[0]);const e=r.filters.map(s=>zh(s));let t=bi.create(e,r.op);return t=Gh(t),Ym(t)?t:(ir(t instanceof bi),ir(Xa(t)),ir(t.filters.length>1),t.filters.reduce((s,c)=>Kf(s,c)))}function Kf(r,e){let t;return ir(r instanceof hi||r instanceof bi),ir(e instanceof hi||e instanceof bi),t=r instanceof hi?e instanceof hi?bi.create([r,e],"and"):Vg(r,e):e instanceof hi?Vg(e,r):function(s,c){if(ir(s.filters.length>0&&c.filters.length>0),Xa(s)&&Xa(c))return Pc(s,c.getFilters());const f=Rl(s)?s:c,_=Rl(s)?c:s,N=f.filters.map(G=>Kf(G,_));return bi.create(N,"or")}(r,e),Gh(t)}function Vg(r,e){if(Xa(e))return Pc(e,r.getFilters());{const t=e.filters.map(s=>Kf(r,s));return bi.create(t,"or")}}function Gh(r){if(ir(r instanceof hi||r instanceof bi),r instanceof hi)return r;const e=r.getFilters();if(1===e.length)return Gh(e[0]);if(Ml(r))return r;const t=e.map(c=>Gh(c)),s=[];return t.forEach(c=>{c instanceof hi?s.push(c):c instanceof bi&&(c.op===r.op?s.push(...c.filters):s.push(c))}),1===s.length?s[0]:bi.create(s,r.op)}class Yp{constructor(){this.sn=new qf}addToCollectionParentIndex(e,t){return this.sn.add(t),Rt.resolve()}getCollectionParents(e,t){return Rt.resolve(this.sn.getEntries(t))}addFieldIndex(e,t){return Rt.resolve()}deleteFieldIndex(e,t){return Rt.resolve()}getDocumentsMatchingTarget(e,t){return Rt.resolve(null)}getIndexType(e,t){return Rt.resolve(0)}getFieldIndexes(e,t){return Rt.resolve([])}getNextCollectionGroupToUpdate(e){return Rt.resolve(null)}getMinOffset(e,t){return Rt.resolve(Yr.min())}getMinOffsetFromCollectionGroup(e,t){return Rt.resolve(Yr.min())}updateCollectionGroup(e,t,s){return Rt.resolve()}updateIndexEntries(e,t){return Rt.resolve()}}class qf{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),c=this.index[t]||new Ki(vi.comparator),f=!c.has(s);return this.index[t]=c.add(s),f}has(e){const t=e.lastSegment(),s=e.popLast(),c=this.index[t];return c&&c.has(s)}getEntries(e){return(this.index[e]||new Ki(vi.comparator)).toArray()}}const gl=new Uint8Array(0);class th{constructor(e,t){this.user=e,this.databaseId=t,this.rn=new qf,this.on=new vc(s=>el(s),(s,c)=>Oc(s,c)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.rn.has(t)){const s=t.lastSegment(),c=t.popLast();e.addOnCommittedListener(()=>{this.rn.add(t)});const f={collectionId:s,parent:Pt(c)};return jc(e).put(f)}return Rt.resolve()}getCollectionParents(e,t){const s=[],c=IDBKeyRange.bound([t,""],[Tl(t),""],!1,!0);return jc(e).j(c).next(f=>{for(const _ of f){if(_.collectionId!==t)break;s.push(On(_.parent))}return s})}addFieldIndex(e,t){const s=nh(e),c={indexId:(_=t).indexId,collectionGroup:_.collectionGroup,fields:_.fields.map(N=>[N.fieldPath.canonicalString(),N.kind])};var _;delete c.indexId;const f=s.add(c);if(t.indexState){const _=Lu(e);return f.next(N=>{_.put(qp(N,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return f.next()}deleteFieldIndex(e,t){const s=nh(e),c=Lu(e),f=Wh(e);return s.delete(t.indexId).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>f.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=Wh(e);let c=!0;const f=new Map;return Rt.forEach(this.un(t),_=>this.cn(e,_).next(N=>{c&&(c=!!N),f.set(_,N)})).next(()=>{if(c){let _=Qr();const N=[];return Rt.forEach(f,(G,Q)=>{var ue;hn("IndexedDbIndexManager",`Using index ${ue=G,`id=${ue.indexId}|cg=${ue.collectionGroup}|f=${ue.fields.map(ti=>`${ti.fieldPath}:${ti.kind}`).join(",")}`} to execute ${el(t)}`);const Xe=function(ti,Ua){const Ns=lc(Ua);if(void 0===Ns)return null;for(const ws of Pa(ti,Ns.fieldPath))switch(ws.op){case"array-contains-any":return ws.value.arrayValue.values||[];case"array-contains":return[ws.value]}return null}(Q,G),Mt=function(ti,Ua){const Ns=new Map;for(const ws of Sl(Ua))for(const Va of Pa(ti,ws.fieldPath))switch(Va.op){case"==":case"in":Ns.set(ws.fieldPath.canonicalString(),Va.value);break;case"not-in":case"!=":return Ns.set(ws.fieldPath.canonicalString(),Va.value),Array.from(Ns.values())}return null}(Q,G),rn=function(ti,Ua){const Ns=[];let ws=!0;for(const Va of Sl(Ua)){const Th=0===Va.kind?gc(ti,Va.fieldPath,ti.startAt):Ud(ti,Va.fieldPath,ti.startAt);Ns.push(Th.value),ws&&(ws=Th.inclusive)}return new ko(Ns,ws)}(Q,G),Sn=function(ti,Ua){const Ns=[];let ws=!0;for(const Va of Sl(Ua)){const Th=0===Va.kind?Ud(ti,Va.fieldPath,ti.endAt):gc(ti,Va.fieldPath,ti.endAt);Ns.push(Th.value),ws&&(ws=Th.inclusive)}return new ko(Ns,ws)}(Q,G),Mn=this.an(G,Q,rn),ur=this.an(G,Q,Sn),ei=this.hn(G,Q,Mt),Bi=this.ln(G.indexId,Xe,Mn,rn.inclusive,ur,Sn.inclusive,ei);return Rt.forEach(Bi,ti=>s.H(ti,t.limit).next(Ua=>{Ua.forEach(Ns=>{const ws=Pn.fromSegments(Ns.documentKey);_.has(ws)||(_=_.add(ws),N.push(ws))})}))}).next(()=>N)}return Rt.resolve(null)})}un(e){let t=this.on.get(e);return t||(t=0===e.filters.length?[e]:$g(bi.create(e.filters,"and")).map(s=>Ja(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.on.set(e,t),t)}ln(e,t,s,c,f,_,N){const G=(null!=t?t.length:1)*Math.max(s.length,f.length),Q=G/(null!=t?t.length:1),ue=[];for(let Xe=0;Xe<G;++Xe){const Mt=t?this.fn(t[Xe/Q]):gl,rn=this.dn(e,Mt,s[Xe%Q],c),Sn=this._n(e,Mt,f[Xe%Q],_),Mn=N.map(ur=>this.dn(e,Mt,ur,!0));ue.push(...this.createRange(rn,Sn,Mn))}return ue}dn(e,t,s,c){const f=new Fu(e,Pn.empty(),t,s);return c?f:f.He()}_n(e,t,s,c){const f=new Fu(e,Pn.empty(),t,s);return c?f.He():f}cn(e,t){const s=new Gf(t),c=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,c).next(f=>{let _=null;for(const N of f)s.Ze(N)&&(!_||N.fields.length>_.fields.length)&&(_=N);return _})}getIndexType(e,t){let s=2;const c=this.un(t);return Rt.forEach(c,f=>this.cn(e,f).next(_=>{_?0!==s&&_.fields.length<function(N){let G=new Ki(Mr.comparator),Q=!1;for(const ue of N.filters)for(const Xe of ue.getFlattenedFilters())Xe.field.isKeyField()||("array-contains"===Xe.op||"array-contains-any"===Xe.op?Q=!0:G=G.add(Xe.field));for(const ue of N.orderBy)ue.field.isKeyField()||(G=G.add(ue.field));return G.size+(Q?1:0)}(f)&&(s=1):s=0})).next(()=>null!==t.limit&&c.length>1&&2===s?1:s)}wn(e,t){const s=new eh;for(const c of Sl(e)){const f=t.data.field(c.fieldPath);if(null==f)return null;const _=s.We(c.kind);ec.be._e(f,_)}return s.Ge()}fn(e){const t=new eh;return ec.be._e(e,t.We(0)),t.Ge()}mn(e,t){const s=new eh;return ec.be._e(Ee(this.databaseId,t),s.We(function(c){const f=Sl(c);return 0===f.length?0:f[f.length-1].kind}(e))),s.Ge()}hn(e,t,s){if(null===s)return[];let c=[];c.push(new eh);let f=0;for(const _ of Sl(e)){const N=s[f++];for(const G of c)if(this.gn(t,_.fieldPath)&&It(N))c=this.yn(c,_,N);else{const Q=G.We(_.kind);ec.be._e(N,Q)}}return this.pn(c)}an(e,t,s){return this.hn(e,t,s.position)}pn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Ge();return t}yn(e,t,s){const c=[...e],f=[];for(const _ of s.arrayValue.values||[])for(const N of c){const G=new eh;G.seed(N.Ge()),ec.be._e(_,G.We(t.kind)),f.push(G)}return f}gn(e,t){return!!e.filters.find(s=>s instanceof hi&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=nh(e),c=Lu(e);return(t?s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.j()).next(f=>{const _=[];return Rt.forEach(f,N=>c.get([N.indexId,this.uid]).next(G=>{_.push(function(Q,ue){const Xe=ue?new qa(ue.sequenceNumber,new Yr(Fl(ue.readTime),new Pn(On(ue.documentKey)),ue.largestBatchId)):qa.empty(),Mt=Q.fields.map(([rn,Sn])=>new cc(Mr.fromServerFormat(rn),Sn));return new ql(Q.indexId,Q.collectionGroup,Mt,Xe)}(N,G))})).next(()=>_)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,c)=>{const f=s.indexState.sequenceNumber-c.indexState.sequenceNumber;return 0!==f?f:sr(s.collectionGroup,c.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const c=nh(e),f=Lu(e);return this.In(e).next(_=>c.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(N=>Rt.forEach(N,G=>f.put(qp(G.indexId,this.user,_,s)))))}updateIndexEntries(e,t){const s=new Map;return Rt.forEach(t,(c,f)=>{const _=s.get(c.collectionGroup);return(_?Rt.resolve(_):this.getFieldIndexes(e,c.collectionGroup)).next(N=>(s.set(c.collectionGroup,N),Rt.forEach(N,G=>this.Tn(e,c,G).next(Q=>{const ue=this.En(f,G);return Q.isEqual(ue)?Rt.resolve():this.An(e,f,G,Q,ue)}))))})}Rn(e,t,s,c){return Wh(e).put({indexId:c.indexId,uid:this.uid,arrayValue:c.arrayValue,directionalValue:c.directionalValue,orderedDocumentKey:this.mn(s,t.key),documentKey:t.key.path.toArray()})}vn(e,t,s,c){return Wh(e).delete([c.indexId,this.uid,c.arrayValue,c.directionalValue,this.mn(s,t.key),t.key.path.toArray()])}Tn(e,t,s){const c=Wh(e);let f=new Ki(Bl);return c.X({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.mn(s,t)])},(_,N)=>{f=f.add(new Fu(s.indexId,t,N.arrayValue,N.directionalValue))}).next(()=>f)}En(e,t){let s=new Ki(Bl);const c=this.wn(t,e);if(null==c)return s;const f=lc(t);if(null!=f){const _=e.data.field(f.fieldPath);if(It(_))for(const N of _.arrayValue.values||[])s=s.add(new Fu(t.indexId,e.key,this.fn(N),c))}else s=s.add(new Fu(t.indexId,e.key,gl,c));return s}An(e,t,s,c,f){hn("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const _=[];return function(N,G,Q,ue,Xe){const Mt=N.getIterator(),rn=G.getIterator();let Sn=Oo(Mt),Mn=Oo(rn);for(;Sn||Mn;){let ur=!1,ei=!1;if(Sn&&Mn){const Bi=Q(Sn,Mn);Bi<0?ei=!0:Bi>0&&(ur=!0)}else null!=Sn?ei=!0:ur=!0;ur?(ue(Mn),Mn=Oo(rn)):ei?(Xe(Sn),Sn=Oo(Mt)):(Sn=Oo(Mt),Mn=Oo(rn))}}(c,f,Bl,N=>{_.push(this.Rn(e,t,s,N))},N=>{_.push(this.vn(e,t,s,N))}),Rt.waitFor(_)}In(e){let t=1;return Lu(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,c,f)=>{f.done(),t=c.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((_,N)=>Bl(_,N)).filter((_,N,G)=>!N||0!==Bl(_,G[N-1]));const c=[];c.push(e);for(const _ of s){const N=Bl(_,e),G=Bl(_,t);if(0===N)c[0]=e.He();else if(N>0&&G<0)c.push(_),c.push(_.He());else if(G>0)break}c.push(t);const f=[];for(let _=0;_<c.length;_+=2){if(this.Pn(c[_],c[_+1]))return[];f.push(IDBKeyRange.bound([c[_].indexId,this.uid,c[_].arrayValue,c[_].directionalValue,gl,[]],[c[_+1].indexId,this.uid,c[_+1].arrayValue,c[_+1].directionalValue,gl,[]]))}return f}Pn(e,t){return Bl(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(jg)}getMinOffset(e,t){return Rt.mapArray(this.un(t),s=>this.cn(e,s).next(c=>c||Hn())).next(jg)}}function jc(r){return Ds(r,"collectionParents")}function Wh(r){return Ds(r,"indexEntries")}function nh(r){return Ds(r,"indexConfiguration")}function Lu(r){return Ds(r,"indexState")}function jg(r){ir(0!==r.length);let e=r[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<r.length;s++){const c=r[s].indexState.offset;uc(c,e)<0&&(e=c),t<c.largestBatchId&&(t=c.largestBatchId)}return new Yr(e.readTime,e.documentKey,t)}const Bu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Fa{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new Fa(e,Fa.DEFAULT_COLLECTION_PERCENTILE,Fa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Zp(r,e,t){const s=r.store("mutations"),c=r.store("documentMutations"),f=[],_=IDBKeyRange.only(t.batchId);let N=0;const G=s.X({range:_},(ue,Xe,Mt)=>(N++,Mt.delete()));f.push(G.next(()=>{ir(1===N)}));const Q=[];for(const ue of t.mutations){const Xe=Ks(e,ue.key.path,t.batchId);f.push(c.delete(Xe)),Q.push(ue.key)}return Rt.waitFor(f).next(()=>Q)}function Kh(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw Hn();e=r.noDocument}return JSON.stringify(e).length}Fa.DEFAULT_COLLECTION_PERCENTILE=10,Fa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fa.DEFAULT=new Fa(41943040,Fa.DEFAULT_COLLECTION_PERCENTILE,Fa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fa.DISABLED=new Fa(-1,0,0);class Wr{constructor(e,t,s,c){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=c,this.bn={}}static fe(e,t,s,c){ir(""!==e.uid);const f=e.isAuthenticated()?e.uid:"";return new Wr(f,t,s,c)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Dc(e).X({index:"userMutationsIndex",range:s},(c,f,_)=>{t=!1,_.done()}).next(()=>t)}addMutationBatch(e,t,s,c){const f=du(e),_=Dc(e);return _.add({}).next(N=>{ir("number"==typeof N);const G=new m(N,t,s,c),Q=function(Mt,rn,Sn){const Mn=Sn.baseMutations.map(ei=>yd(Mt.le,ei)),ur=Sn.mutations.map(ei=>yd(Mt.le,ei));return{userId:rn,batchId:Sn.batchId,localWriteTimeMs:Sn.localWriteTime.toMillis(),baseMutations:Mn,mutations:ur}}(this.serializer,this.userId,G),ue=[];let Xe=new Ki((Mt,rn)=>sr(Mt.canonicalString(),rn.canonicalString()));for(const Mt of c){const rn=Ks(this.userId,Mt.key.path,N);Xe=Xe.add(Mt.key.path.popLast()),ue.push(_.put(Q)),ue.push(f.put(rn,Io))}return Xe.forEach(Mt=>{ue.push(this.indexManager.addToCollectionParentIndex(e,Mt))}),e.addOnCommittedListener(()=>{this.bn[N]=G.keys()}),Rt.waitFor(ue).next(()=>G)})}lookupMutationBatch(e,t){return Dc(e).get(t).next(s=>s?(ir(s.userId===this.userId),Ll(this.serializer,s)):null)}Vn(e,t){return this.bn[t]?Rt.resolve(this.bn[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const c=s.keys();return this.bn[t]=c,c}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,c=IDBKeyRange.lowerBound([this.userId,s]);let f=null;return Dc(e).X({index:"userMutationsIndex",range:c},(_,N,G)=>{N.userId===this.userId&&(ir(N.batchId>=s),f=Ll(this.serializer,N)),G.done()}).next(()=>f)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return Dc(e).X({index:"userMutationsIndex",range:t,reverse:!0},(c,f,_)=>{s=f.batchId,_.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Dc(e).j("userMutationsIndex",t).next(s=>s.map(c=>Ll(this.serializer,c)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=Li(this.userId,t.path),c=IDBKeyRange.lowerBound(s),f=[];return du(e).X({range:c},(_,N,G)=>{const[Q,ue,Xe]=_,Mt=On(ue);if(Q===this.userId&&t.path.isEqual(Mt))return Dc(e).get(Xe).next(rn=>{if(!rn)throw Hn();ir(rn.userId===this.userId),f.push(Ll(this.serializer,rn))});G.done()}).next(()=>f)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Ki(sr);const c=[];return t.forEach(f=>{const _=Li(this.userId,f.path),N=IDBKeyRange.lowerBound(_),G=du(e).X({range:N},(Q,ue,Xe)=>{const[Mt,rn,Sn]=Q,Mn=On(rn);Mt===this.userId&&f.path.isEqual(Mn)?s=s.add(Sn):Xe.done()});c.push(G)}),Rt.waitFor(c).next(()=>this.Sn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,c=s.length+1,f=Li(this.userId,s),_=IDBKeyRange.lowerBound(f);let N=new Ki(sr);return du(e).X({range:_},(G,Q,ue)=>{const[Xe,Mt,rn]=G,Sn=On(Mt);Xe===this.userId&&s.isPrefixOf(Sn)?Sn.length===c&&(N=N.add(rn)):ue.done()}).next(()=>this.Sn(e,N))}Sn(e,t){const s=[],c=[];return t.forEach(f=>{c.push(Dc(e).get(f).next(_=>{if(null===_)throw Hn();ir(_.userId===this.userId),s.push(Ll(this.serializer,_))}))}),Rt.waitFor(c).next(()=>s)}removeMutationBatch(e,t){return Zp(e.at,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.Dn(t.batchId)}),Rt.forEach(s,c=>this.referenceDelegate.markPotentiallyOrphaned(e,c))))}Dn(e){delete this.bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Rt.resolve();const s=IDBKeyRange.lowerBound([this.userId]),c=[];return du(e).X({range:s},(f,_,N)=>{if(f[0]===this.userId){const G=On(f[1]);c.push(G)}else N.done()}).next(()=>{ir(0===c.length)})})}containsKey(e,t){return rh(e,this.userId,t)}Cn(e){return Hg(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function rh(r,e,t){const s=Li(e,t.path),c=s[1],f=IDBKeyRange.lowerBound(s);let _=!1;return du(r).X({range:f,Y:!0},(N,G,Q)=>{const[ue,Xe,Mt]=N;ue===e&&Xe===c&&(_=!0),Q.done()}).next(()=>_)}function Dc(r){return Ds(r,"mutations")}function du(r){return Ds(r,"documentMutations")}function Hg(r){return Ds(r,"mutationQueues")}class Id{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static Nn(){return new Id(0)}static kn(){return new Id(-1)}}class Yf{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Mn(e).next(t=>{const s=new Id(t.highestTargetId);return t.highestTargetId=s.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Mn(e).next(t=>rr.fromTimestamp(new oi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Mn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.Mn(e).next(c=>(c.highestListenSequenceNumber=t,s&&(c.lastRemoteSnapshotVersion=s.toTimestamp()),t>c.highestListenSequenceNumber&&(c.highestListenSequenceNumber=t),this.On(e,c)))}addTargetData(e,t){return this.$n(e,t).next(()=>this.Mn(e).next(s=>(s.targetCount+=1,this.Fn(t,s),this.On(e,s))))}updateTargetData(e,t){return this.$n(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ih(e).delete(t.targetId)).next(()=>this.Mn(e)).next(s=>(ir(s.targetCount>0),s.targetCount-=1,this.On(e,s)))}removeTargets(e,t,s){let c=0;const f=[];return ih(e).X((_,N)=>{const G=uu(N);G.sequenceNumber<=t&&null===s.get(G.targetId)&&(c++,f.push(this.removeTargetData(e,G)))}).next(()=>Rt.waitFor(f)).next(()=>c)}forEachTarget(e,t){return ih(e).X((s,c)=>{const f=uu(c);t(f)})}Mn(e){return Zf(e).get("targetGlobalKey").next(t=>(ir(null!==t),t))}On(e,t){return Zf(e).put("targetGlobalKey",t)}$n(e,t){return ih(e).put(_d(this.serializer,t))}Fn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.Mn(e).next(t=>t.targetCount)}getTargetData(e,t){const s=el(t),c=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let f=null;return ih(e).X({range:c,index:"queryTargetsIndex"},(_,N,G)=>{const Q=uu(N);Oc(t,Q.target)&&(f=Q,G.done())}).next(()=>f)}addMatchingKeys(e,t,s){const c=[],f=$u(e);return t.forEach(_=>{const N=Pt(_.path);c.push(f.put({targetId:s,path:N})),c.push(this.referenceDelegate.addReference(e,s,_))}),Rt.waitFor(c)}removeMatchingKeys(e,t,s){const c=$u(e);return Rt.forEach(t,f=>{const _=Pt(f.path);return Rt.waitFor([c.delete([s,_]),this.referenceDelegate.removeReference(e,s,f)])})}removeMatchingKeysForTargetId(e,t){const s=$u(e),c=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(c)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),c=$u(e);let f=Qr();return c.X({range:s,Y:!0},(_,N,G)=>{const Q=On(_[1]),ue=new Pn(Q);f=f.add(ue)}).next(()=>f)}containsKey(e,t){const s=Pt(t.path),c=IDBKeyRange.bound([s],[Tl(s)],!1,!0);let f=0;return $u(e).X({index:"documentTargetsIndex",Y:!0,range:c},([_,N],G,Q)=>{0!==_&&(f++,Q.done())}).next(()=>f>0)}he(e,t){return ih(e).get(t).next(s=>s?uu(s):null)}}function ih(r){return Ds(r,"targets")}function Zf(r){return Ds(r,"targetGlobal")}function $u(r){return Ds(r,"targetDocuments")}function Xp([r,e],[t,s]){const c=sr(r,t);return 0===c?sr(e,s):c}class Zm{constructor(e){this.Bn=e,this.buffer=new Ki(Xp),this.Ln=0}qn(){return++this.Ln}Un(e){const t=[e,this.qn()];if(this.buffer.size<this.Bn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Xp(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class qh{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Kn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Kn&&(this.Kn.cancel(),this.Kn=null)}get started(){return null!==this.Kn}Gn(e){var t=this;hn("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Kn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,de.Z)(function*(){t.Kn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){Mo(s)?hn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield vr(s)}yield t.Gn(3e5)}))}}class Qp{constructor(e,t){this.Qn=e,this.params=t}calculateTargetCount(e,t){return this.Qn.jn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return Rt.resolve(z.ct);const s=new Zm(t);return this.Qn.forEachTarget(e,c=>s.Un(c.sequenceNumber)).next(()=>this.Qn.zn(e,c=>s.Un(c))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Qn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Qn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(hn("LruGarbageCollector","Garbage collection skipped; disabled"),Rt.resolve(Bu)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(hn("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Bu):this.Wn(e,t))}getCacheSize(e){return this.Qn.getCacheSize(e)}Wn(e,t){let s,c,f,_,N,G,Q;const ue=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Xe=>(Xe>this.params.maximumSequenceNumbersToCollect?(hn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Xe}`),c=this.params.maximumSequenceNumbersToCollect):c=Xe,_=Date.now(),this.nthSequenceNumber(e,c))).next(Xe=>(s=Xe,N=Date.now(),this.removeTargets(e,s,t))).next(Xe=>(f=Xe,G=Date.now(),this.removeOrphanedDocuments(e,s))).next(Xe=>(Q=Date.now(),gu()<=et.in.DEBUG&&hn("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${_-ue}ms\n\tDetermined least recently used ${c} in `+(N-_)+`ms\n\tRemoved ${f} targets in `+(G-N)+`ms\n\tRemoved ${Xe} documents in `+(Q-G)+`ms\nTotal Duration: ${Q-ue}ms`),Rt.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:f,documentsRemoved:Xe})))}}class Xf{constructor(e,t){this.db=e,this.garbageCollector=function Co(r,e){return new Qp(r,e)}(this,t)}jn(e){const t=this.Hn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(c=>s+c))}Hn(e){let t=0;return this.zn(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}zn(e,t){return this.Jn(e,(s,c)=>t(c))}addReference(e,t,s){return $l(e,s)}removeReference(e,t,s){return $l(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return $l(e,t)}Yn(e,t){return function(s,c){let f=!1;return Hg(s).Z(_=>rh(s,_,c).next(N=>(N&&(f=!0),Rt.resolve(!N)))).next(()=>f)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),c=[];let f=0;return this.Jn(e,(_,N)=>{if(N<=t){const G=this.Yn(e,_).next(Q=>{if(!Q)return f++,s.getEntry(e,_).next(()=>(s.removeEntry(_,rr.min()),$u(e).delete([0,Pt(_.path)])))});c.push(G)}}).next(()=>Rt.waitFor(c)).next(()=>s.apply(e)).next(()=>f)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return $l(e,t)}Jn(e,t){const s=$u(e);let c,f=z.ct;return s.X({index:"documentTargetsIndex"},([_,N],{path:G,sequenceNumber:Q})=>{0===_?(f!==z.ct&&t(new Pn(On(c)),f),f=Q,c=G):f=z.ct}).next(()=>{f!==z.ct&&t(new Pn(On(c)),f)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function $l(r,e){return $u(r).put((s=r.currentSequenceNumber,{targetId:0,path:Pt(e.path),sequenceNumber:s}));var s}class wd{constructor(){this.changes=new vc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_i.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?Rt.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class nc{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return Ul(e).put(s)}removeEntry(e,t,s){return Ul(e).delete(function(c,f){const _=c.path.toArray();return[_.slice(0,_.length-2),_[_.length-2],Jl(f),_[_.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Xn(e,s)))}getEntry(e,t){let s=_i.newInvalidDocument(t);return Ul(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Yh(t))},(c,f)=>{s=this.Zn(t,f)}).next(()=>s)}ts(e,t){let s={size:0,document:_i.newInvalidDocument(t)};return Ul(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Yh(t))},(c,f)=>{s={document:this.Zn(t,f),size:Kh(f)}}).next(()=>s)}getEntries(e,t){let s=Xs();return this.es(e,t,(c,f)=>{const _=this.Zn(c,f);s=s.insert(c,_)}).next(()=>s)}ns(e,t){let s=Xs(),c=new Tr(Pn.comparator);return this.es(e,t,(f,_)=>{const N=this.Zn(f,_);s=s.insert(f,N),c=c.insert(f,Kh(_))}).next(()=>({documents:s,ss:c}))}es(e,t,s){if(t.isEmpty())return Rt.resolve();let c=new Ki(Gg);t.forEach(G=>c=c.add(G));const f=IDBKeyRange.bound(Yh(c.first()),Yh(c.last())),_=c.getIterator();let N=_.getNext();return Ul(e).X({index:"documentKeyIndex",range:f},(G,Q,ue)=>{const Xe=Pn.fromSegments([...Q.prefixPath,Q.collectionGroup,Q.documentId]);for(;N&&Gg(N,Xe)<0;)s(N,null),N=_.getNext();N&&N.isEqual(Xe)&&(s(N,Q),N=_.hasNext()?_.getNext():null),N?ue.G(Yh(N)):ue.done()}).next(()=>{for(;N;)s(N,null),N=_.hasNext()?_.getNext():null})}getDocumentsMatchingQuery(e,t,s,c){const f=t.path,_=[f.popLast().toArray(),f.lastSegment(),Jl(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],N=[f.popLast().toArray(),f.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ul(e).j(IDBKeyRange.bound(_,N,!0)).next(G=>{let Q=Xs();for(const ue of G){const Xe=this.Zn(Pn.fromSegments(ue.prefixPath.concat(ue.collectionGroup,ue.documentId)),ue);Xe.isFoundDocument()&&(nu(t,Xe)||c.has(Xe.key))&&(Q=Q.insert(Xe.key,Xe))}return Q})}getAllFromCollectionGroup(e,t,s,c){let f=Xs();const _=Qm(t,s),N=Qm(t,Yr.max());return Ul(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(_,N,!0)},(G,Q,ue)=>{const Xe=this.Zn(Pn.fromSegments(Q.prefixPath.concat(Q.collectionGroup,Q.documentId)),Q);f=f.insert(Xe.key,Xe),f.size===c&&ue.done()}).next(()=>f)}newChangeBuffer(e){return new Xm(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return zg(e).get("remoteDocumentGlobalKey").next(t=>(ir(!!t),t))}Xn(e,t){return zg(e).put("remoteDocumentGlobalKey",t)}Zn(e,t){if(t){const s=function zf(r,e){let t;if(e.document)t=Vp(r.le,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=Pn.fromSegments(e.noDocument.path),c=Fl(e.noDocument.readTime);t=_i.newNoDocument(s,c),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Hn();{const s=Pn.fromSegments(e.unknownDocument.path),c=Fl(e.unknownDocument.version);t=_i.newUnknownDocument(s,c)}}return e.readTime&&t.setReadTime(function(s){const c=new oi(s[0],s[1]);return rr.fromTimestamp(c)}(e.readTime)),t}(this.serializer,t);if(!s.isNoDocument()||!s.version.isEqual(rr.min()))return s}return _i.newInvalidDocument(e)}}function Cd(r){return new nc(r)}class Xm extends wd{constructor(e,t){super(),this.rs=e,this.trackRemovals=t,this.os=new vc(s=>s.toString(),(s,c)=>s.isEqual(c))}applyChanges(e){const t=[];let s=0,c=new Ki((f,_)=>sr(f.canonicalString(),_.canonicalString()));return this.changes.forEach((f,_)=>{const N=this.os.get(f);if(t.push(this.rs.removeEntry(e,f,N.readTime)),_.isValidDocument()){const G=bc(this.rs.serializer,_);c=c.add(f.path.popLast());const Q=Kh(G);s+=Q-N.size,t.push(this.rs.addEntry(e,f,G))}else if(s-=N.size,this.trackRemovals){const G=bc(this.rs.serializer,_.convertToNoDocument(rr.min()));t.push(this.rs.addEntry(e,f,G))}}),c.forEach(f=>{t.push(this.rs.indexManager.addToCollectionParentIndex(e,f))}),t.push(this.rs.updateMetadata(e,s)),Rt.waitFor(t)}getFromCache(e,t){return this.rs.ts(e,t).next(s=>(this.os.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.rs.ns(e,t).next(({documents:s,ss:c})=>(c.forEach((f,_)=>{this.os.set(f,{size:_,readTime:s.get(f).readTime})}),s))}}function zg(r){return Ds(r,"remoteDocumentGlobal")}function Ul(r){return Ds(r,"remoteDocumentsV14")}function Yh(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Qm(r,e){const t=e.documentKey.path.toArray();return[r,Jl(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Gg(r,e){const t=r.path.toArray(),s=e.path.toArray();let c=0;for(let f=0;f<t.length-2&&f<s.length-2;++f)if(c=sr(t[f],s[f]),c)return c;return c=sr(t.length,s.length),c||(c=sr(t[t.length-2],s[s.length-2]),c||sr(t[t.length-1],s[s.length-1]))}class Uu{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Wg{constructor(e,t,s,c){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=c}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(c=>(s=c,this.remoteDocumentCache.getEntry(e,t))).next(c=>(null!==s&&ou(s.mutation,c,gs.empty(),oi.now()),c))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,Qr()).next(()=>s))}getLocalViewOfDocuments(e,t,s=Qr()){const c=dl();return this.populateOverlays(e,c,t).next(()=>this.computeViews(e,t,c,s).next(f=>{let _=kc();return f.forEach((N,G)=>{_=_.insert(N,G.overlayedDocument)}),_}))}getOverlayedDocuments(e,t){const s=dl();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,Qr()))}populateOverlays(e,t,s){const c=[];return s.forEach(f=>{t.has(f)||c.push(f)}),this.documentOverlayCache.getOverlays(e,c).next(f=>{f.forEach((_,N)=>{t.set(_,N)})})}computeViews(e,t,s,c){let f=Xs();const _=xu(),N=xu();return t.forEach((G,Q)=>{const ue=s.get(Q.key);c.has(Q.key)&&(void 0===ue||ue.mutation instanceof nl)?f=f.insert(Q.key,Q):void 0!==ue?(_.set(Q.key,ue.mutation.getFieldMask()),ou(ue.mutation,Q,ue.mutation.getFieldMask(),oi.now())):_.set(Q.key,gs.empty())}),this.recalculateAndSaveOverlays(e,f).next(G=>(G.forEach((Q,ue)=>_.set(Q,ue)),t.forEach((Q,ue)=>{var Xe;return N.set(Q,new Uu(ue,null!==(Xe=_.get(Q))&&void 0!==Xe?Xe:null))}),N))}recalculateAndSaveOverlays(e,t){const s=xu();let c=new Tr((_,N)=>_-N),f=Qr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(_=>{for(const N of _)N.keys().forEach(G=>{const Q=t.get(G);if(null===Q)return;let ue=s.get(G)||gs.empty();ue=N.applyToLocalView(Q,ue),s.set(G,ue);const Xe=(c.get(N.batchId)||Qr()).add(G);c=c.insert(N.batchId,Xe)})}).next(()=>{const _=[],N=c.getReverseIterator();for(;N.hasNext();){const G=N.getNext(),Q=G.key,ue=G.value,Xe=_c();ue.forEach(Mt=>{if(!f.has(Mt)){const rn=Nl(t.get(Mt),s.get(Mt));null!==rn&&Xe.set(Mt,rn),f=f.add(Mt)}}),_.push(this.documentOverlayCache.saveOverlays(e,Q,Xe))}return Rt.waitFor(_)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return Pn.isDocumentKey((c=t).path)&&null===c.collectionGroup&&0===c.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):jd(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var c}getNextDocuments(e,t,s,c){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,c).next(f=>{const _=c-f.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,c-f.size):Rt.resolve(dl());let N=-1,G=f;return _.next(Q=>Rt.forEach(Q,(ue,Xe)=>(N<Xe.largestBatchId&&(N=Xe.largestBatchId),f.get(ue)?Rt.resolve():this.remoteDocumentCache.getEntry(e,ue).next(Mt=>{G=G.insert(ue,Mt)}))).next(()=>this.populateOverlays(e,Q,f)).next(()=>this.computeViews(e,G,Q,Qr())).next(ue=>({batchId:N,changes:Nc(ue)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Pn(t)).next(s=>{let c=kc();return s.isFoundDocument()&&(c=c.insert(s.key,s)),c})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const c=t.collectionGroup;let f=kc();return this.indexManager.getCollectionParents(e,c).next(_=>Rt.forEach(_,N=>{const G=(Q=t,ue=N.child(c),new aa(ue,null,Q.explicitOrderBy.slice(),Q.filters.slice(),Q.limit,Q.limitType,Q.startAt,Q.endAt));var Q,ue;return this.getDocumentsMatchingCollectionQuery(e,G,s).next(Q=>{Q.forEach((ue,Xe)=>{f=f.insert(ue,Xe)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,t,s){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,c))).next(f=>{c.forEach((N,G)=>{const Q=G.getKey();null===f.get(Q)&&(f=f.insert(Q,_i.newInvalidDocument(Q)))});let _=kc();return f.forEach((N,G)=>{const Q=c.get(N);void 0!==Q&&ou(Q.mutation,G,gs.empty(),oi.now()),nu(t,G)&&(_=_.insert(N,G))}),_})}}class Kg{constructor(e){this.serializer=e,this.us=new Map,this.cs=new Map}getBundleMetadata(e,t){return Rt.resolve(this.us.get(t))}saveBundleMetadata(e,t){var s;return this.us.set(t.id,{id:(s=t).id,version:s.version,createTime:Ss(s.createTime)}),Rt.resolve()}getNamedQuery(e,t){return Rt.resolve(this.cs.get(t))}saveNamedQuery(e,t){return this.cs.set(t.name,{name:(s=t).name,query:Wp(s.bundledQuery),readTime:Ss(s.readTime)}),Rt.resolve();var s}}class Qf{constructor(){this.overlays=new Tr(Pn.comparator),this.hs=new Map}getOverlay(e,t){return Rt.resolve(this.overlays.get(t))}getOverlays(e,t){const s=dl();return Rt.forEach(t,c=>this.getOverlay(e,c).next(f=>{null!==f&&s.set(c,f)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((c,f)=>{this.de(e,t,f)}),Rt.resolve()}removeOverlaysForBatchId(e,t,s){const c=this.hs.get(s);return void 0!==c&&(c.forEach(f=>this.overlays=this.overlays.remove(f)),this.hs.delete(s)),Rt.resolve()}getOverlaysForCollection(e,t,s){const c=dl(),f=t.length+1,_=new Pn(t.child("")),N=this.overlays.getIteratorFrom(_);for(;N.hasNext();){const G=N.getNext().value,Q=G.getKey();if(!t.isPrefixOf(Q.path))break;Q.path.length===f&&G.largestBatchId>s&&c.set(G.getKey(),G)}return Rt.resolve(c)}getOverlaysForCollectionGroup(e,t,s,c){let f=new Tr((Q,ue)=>Q-ue);const _=this.overlays.getIterator();for(;_.hasNext();){const Q=_.getNext().value;if(Q.getKey().getCollectionGroup()===t&&Q.largestBatchId>s){let ue=f.get(Q.largestBatchId);null===ue&&(ue=dl(),f=f.insert(Q.largestBatchId,ue)),ue.set(Q.getKey(),Q)}}const N=dl(),G=f.getIterator();for(;G.hasNext()&&(G.getNext().value.forEach((Q,ue)=>N.set(Q,ue)),!(N.size()>=c)););return Rt.resolve(N)}de(e,t,s){const c=this.overlays.get(s.key);if(null!==c){const _=this.hs.get(c.largestBatchId).delete(s.key);this.hs.set(c.largestBatchId,_)}this.overlays=this.overlays.insert(s.key,new K(t,s));let f=this.hs.get(t);void 0===f&&(f=Qr(),this.hs.set(t,f)),this.hs.set(t,f.add(s.key))}}class Jp{constructor(){this.ls=new Ki(Qs.fs),this.ds=new Ki(Qs._s)}isEmpty(){return this.ls.isEmpty()}addReference(e,t){const s=new Qs(e,t);this.ls=this.ls.add(s),this.ds=this.ds.add(s)}ws(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.gs(new Qs(e,t))}ys(e,t){e.forEach(s=>this.removeReference(s,t))}ps(e){const t=new Pn(new vi([])),s=new Qs(t,e),c=new Qs(t,e+1),f=[];return this.ds.forEachInRange([s,c],_=>{this.gs(_),f.push(_.key)}),f}Is(){this.ls.forEach(e=>this.gs(e))}gs(e){this.ls=this.ls.delete(e),this.ds=this.ds.delete(e)}Ts(e){const t=new Pn(new vi([])),s=new Qs(t,e),c=new Qs(t,e+1);let f=Qr();return this.ds.forEachInRange([s,c],_=>{f=f.add(_.key)}),f}containsKey(e){const t=new Qs(e,0),s=this.ls.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class Qs{constructor(e,t){this.key=e,this.Es=t}static fs(e,t){return Pn.comparator(e.key,t.key)||sr(e.Es,t.Es)}static _s(e,t){return sr(e.Es,t.Es)||Pn.comparator(e.key,t.key)}}class Jf{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.As=1,this.Rs=new Ki(Qs.fs)}checkEmpty(e){return Rt.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,c){const f=this.As;this.As++;const _=new m(f,t,s,c);this.mutationQueue.push(_);for(const N of c)this.Rs=this.Rs.add(new Qs(N.key,f)),this.indexManager.addToCollectionParentIndex(e,N.key.path.popLast());return Rt.resolve(_)}lookupMutationBatch(e,t){return Rt.resolve(this.vs(t))}getNextMutationBatchAfterBatchId(e,t){const c=this.Ps(t+1),f=c<0?0:c;return Rt.resolve(this.mutationQueue.length>f?this.mutationQueue[f]:null)}getHighestUnacknowledgedBatchId(){return Rt.resolve(0===this.mutationQueue.length?-1:this.As-1)}getAllMutationBatches(e){return Rt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Qs(t,0),c=new Qs(t,Number.POSITIVE_INFINITY),f=[];return this.Rs.forEachInRange([s,c],_=>{const N=this.vs(_.Es);f.push(N)}),Rt.resolve(f)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Ki(sr);return t.forEach(c=>{const f=new Qs(c,0),_=new Qs(c,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([f,_],N=>{s=s.add(N.Es)})}),Rt.resolve(this.bs(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,c=s.length+1;let f=s;Pn.isDocumentKey(f)||(f=f.child(""));const _=new Qs(new Pn(f),0);let N=new Ki(sr);return this.Rs.forEachWhile(G=>{const Q=G.key.path;return!!s.isPrefixOf(Q)&&(Q.length===c&&(N=N.add(G.Es)),!0)},_),Rt.resolve(this.bs(N))}bs(e){const t=[];return e.forEach(s=>{const c=this.vs(s);null!==c&&t.push(c)}),t}removeMutationBatch(e,t){ir(0===this.Vs(t.batchId,"removed")),this.mutationQueue.shift();let s=this.Rs;return Rt.forEach(t.mutations,c=>{const f=new Qs(c.key,t.batchId);return s=s.delete(f),this.referenceDelegate.markPotentiallyOrphaned(e,c.key)}).next(()=>{this.Rs=s})}Dn(e){}containsKey(e,t){const s=new Qs(t,0),c=this.Rs.firstAfterOrEqual(s);return Rt.resolve(t.isEqual(c&&c.key))}performConsistencyCheck(e){return Rt.resolve()}Vs(e,t){return this.Ps(e)}Ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}vs(e){const t=this.Ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Zh{constructor(e){this.Ss=e,this.docs=new Tr(Pn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,c=this.docs.get(s),f=c?c.size:0,_=this.Ss(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:_}),this.size+=_-f,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Rt.resolve(s?s.document.mutableCopy():_i.newInvalidDocument(t))}getEntries(e,t){let s=Xs();return t.forEach(c=>{const f=this.docs.get(c);s=s.insert(c,f?f.document.mutableCopy():_i.newInvalidDocument(c))}),Rt.resolve(s)}getDocumentsMatchingQuery(e,t,s,c){let f=Xs();const _=t.path,N=new Pn(_.child("")),G=this.docs.getIteratorFrom(N);for(;G.hasNext();){const{key:Q,value:{document:ue}}=G.getNext();if(!_.isPrefixOf(Q.path))break;Q.path.length>_.length+1||uc(qu(ue),s)<=0||(c.has(ue.key)||nu(t,ue))&&(f=f.insert(ue.key,ue.mutableCopy()))}return Rt.resolve(f)}getAllFromCollectionGroup(e,t,s,c){Hn()}Ds(e,t){return Rt.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new eg(this)}getSize(e){return Rt.resolve(this.size)}}class eg extends wd{constructor(e){super(),this.rs=e}applyChanges(e){const t=[];return this.changes.forEach((s,c)=>{c.isValidDocument()?t.push(this.rs.addEntry(e,c)):this.rs.removeEntry(s)}),Rt.waitFor(t)}getFromCache(e,t){return this.rs.getEntry(e,t)}getAllFromCache(e,t){return this.rs.getEntries(e,t)}}class qg{constructor(e){this.persistence=e,this.Cs=new vc(t=>el(t),Oc),this.lastRemoteSnapshotVersion=rr.min(),this.highestTargetId=0,this.xs=0,this.Ns=new Jp,this.targetCount=0,this.ks=Id.Nn()}forEachTarget(e,t){return this.Cs.forEach((s,c)=>t(c)),Rt.resolve()}getLastRemoteSnapshotVersion(e){return Rt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Rt.resolve(this.xs)}allocateTargetId(e){return this.highestTargetId=this.ks.next(),Rt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.xs&&(this.xs=t),Rt.resolve()}$n(e){this.Cs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ks=new Id(t),this.highestTargetId=t),e.sequenceNumber>this.xs&&(this.xs=e.sequenceNumber)}addTargetData(e,t){return this.$n(t),this.targetCount+=1,Rt.resolve()}updateTargetData(e,t){return this.$n(t),Rt.resolve()}removeTargetData(e,t){return this.Cs.delete(t.target),this.Ns.ps(t.targetId),this.targetCount-=1,Rt.resolve()}removeTargets(e,t,s){let c=0;const f=[];return this.Cs.forEach((_,N)=>{N.sequenceNumber<=t&&null===s.get(N.targetId)&&(this.Cs.delete(_),f.push(this.removeMatchingKeysForTargetId(e,N.targetId)),c++)}),Rt.waitFor(f).next(()=>c)}getTargetCount(e){return Rt.resolve(this.targetCount)}getTargetData(e,t){const s=this.Cs.get(t)||null;return Rt.resolve(s)}addMatchingKeys(e,t,s){return this.Ns.ws(t,s),Rt.resolve()}removeMatchingKeys(e,t,s){this.Ns.ys(t,s);const c=this.persistence.referenceDelegate,f=[];return c&&t.forEach(_=>{f.push(c.markPotentiallyOrphaned(e,_))}),Rt.waitFor(f)}removeMatchingKeysForTargetId(e,t){return this.Ns.ps(t),Rt.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Ns.Ts(t);return Rt.resolve(s)}containsKey(e,t){return Rt.resolve(this.Ns.containsKey(t))}}class ep{constructor(e,t){this.Ms={},this.overlays={},this.Os=new z(0),this.$s=!1,this.$s=!0,this.referenceDelegate=e(this),this.Fs=new qg(this),this.indexManager=new Yp,this.remoteDocumentCache=new Zh(s=>this.referenceDelegate.Bs(s)),this.serializer=new Gp(t),this.Ls=new Kg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.$s=!1,Promise.resolve()}get started(){return this.$s}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Qf,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Ms[e.toKey()];return s||(s=new Jf(t,this.referenceDelegate),this.Ms[e.toKey()]=s),s}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ls}runTransaction(e,t,s){hn("MemoryPersistence","Starting transaction:",e);const c=new tg(this.Os.next());return this.referenceDelegate.qs(),s(c).next(f=>this.referenceDelegate.Us(c).next(()=>f)).toPromise().then(f=>(c.raiseOnCommittedEvent(),f))}Ks(e,t){return Rt.or(Object.values(this.Ms).map(s=>()=>s.containsKey(e,t)))}}class tg extends Mi{constructor(e){super(),this.currentSequenceNumber=e}}class Xh{constructor(e){this.persistence=e,this.Gs=new Jp,this.Qs=null}static js(e){return new Xh(e)}get zs(){if(this.Qs)return this.Qs;throw Hn()}addReference(e,t,s){return this.Gs.addReference(s,t),this.zs.delete(s.toString()),Rt.resolve()}removeReference(e,t,s){return this.Gs.removeReference(s,t),this.zs.add(s.toString()),Rt.resolve()}markPotentiallyOrphaned(e,t){return this.zs.add(t.toString()),Rt.resolve()}removeTarget(e,t){this.Gs.ps(t.targetId).forEach(c=>this.zs.add(c.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(c=>{c.forEach(f=>this.zs.add(f.toString()))}).next(()=>s.removeTargetData(e,t))}qs(){this.Qs=new Set}Us(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Rt.forEach(this.zs,s=>{const c=Pn.fromPath(s);return this.Ws(e,c).next(f=>{f||t.removeEntry(c,rr.min())})}).next(()=>(this.Qs=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ws(e,t).next(s=>{s?this.zs.delete(t.toString()):this.zs.add(t.toString())})}Bs(e){return 0}Ws(e,t){return Rt.or([()=>Rt.resolve(this.Gs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ks(e,t)])}}class rc{constructor(e){this.serializer=e}$(e,t,s,c){const f=new wi("createOrUpgrade",t);var N;s<1&&c>=1&&(e.createObjectStore("owner"),(N=e).createObjectStore("mutationQueues",{keyPath:"userId"}),N.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ci,{unique:!0}),N.createObjectStore("documentMutations"),Qh(e),function(N){N.createObjectStore("remoteDocuments")}(e));let _=Rt.resolve();return s<3&&c>=3&&(0!==s&&(function(N){N.deleteObjectStore("targetDocuments"),N.deleteObjectStore("targets"),N.deleteObjectStore("targetGlobal")}(e),Qh(e)),_=_.next(()=>function(N){const G=N.store("targetGlobal"),Q={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:rr.min().toTimestamp(),targetCount:0};return G.put("targetGlobalKey",Q)}(f))),s<4&&c>=4&&(0!==s&&(_=_.next(()=>function(N,G){return G.store("mutations").j().next(Q=>{N.deleteObjectStore("mutations"),N.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ci,{unique:!0});const ue=G.store("mutations"),Xe=Q.map(Mt=>ue.put(Mt));return Rt.waitFor(Xe)})}(e,f))),_=_.next(()=>{!function(N){N.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&c>=5&&(_=_.next(()=>this.Js(f))),s<6&&c>=6&&(_=_.next(()=>(function(N){N.createObjectStore("remoteDocumentGlobal")}(e),this.Ys(f)))),s<7&&c>=7&&(_=_.next(()=>this.Xs(f))),s<8&&c>=8&&(_=_.next(()=>this.Zs(e,f))),s<9&&c>=9&&(_=_.next(()=>{!function(N){N.objectStoreNames.contains("remoteDocumentChanges")&&N.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&c>=10&&(_=_.next(()=>this.ti(f))),s<11&&c>=11&&(_=_.next(()=>{(function(N){N.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(N){N.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&c>=12&&(_=_.next(()=>{!function(N){const G=N.createObjectStore("documentOverlays",{keyPath:vu});G.createIndex("collectionPathOverlayIndex",_u,{unique:!1}),G.createIndex("collectionGroupOverlayIndex",Nd,{unique:!1})}(e)})),s<13&&c>=13&&(_=_.next(()=>function(N){const G=N.createObjectStore("remoteDocumentsV14",{keyPath:Po});G.createIndex("documentKeyIndex",Bs),G.createIndex("collectionGroupIndex",Ar)}(e)).next(()=>this.ei(e,f)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&c>=14&&(_=_.next(()=>this.ni(e,f))),s<15&&c>=15&&(_=_.next(()=>function(N){N.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),N.createObjectStore("indexState",{keyPath:ll}).createIndex("sequenceNumberIndex",oa,{unique:!1}),N.createObjectStore("indexEntries",{keyPath:Yu}).createIndex("documentKeyIndex",Ia,{unique:!1})}(e))),_}Ys(e){let t=0;return e.store("remoteDocuments").X((s,c)=>{t+=Kh(c)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Js(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.j().next(c=>Rt.forEach(c,f=>{const _=IDBKeyRange.bound([f.userId,-1],[f.userId,f.lastAcknowledgedBatchId]);return s.j("userMutationsIndex",_).next(N=>Rt.forEach(N,G=>{ir(G.userId===f.userId);const Q=Ll(this.serializer,G);return Zp(e,f.userId,Q).next(()=>{})}))}))}Xs(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(c=>{const f=[];return s.X((_,N)=>{const G=new vi(_),Q=[0,Pt(G)];f.push(t.get(Q).next(ue=>ue?Rt.resolve():t.put({targetId:0,path:Pt(G),sequenceNumber:c.highestListenSequenceNumber})))}).next(()=>Rt.waitFor(f))})}Zs(e,t){e.createObjectStore("collectionParents",{keyPath:Ya});const s=t.store("collectionParents"),c=new qf,f=_=>{if(c.add(_)){const N=_.lastSegment(),G=_.popLast();return s.put({collectionId:N,parent:Pt(G)})}};return t.store("remoteDocuments").X({Y:!0},(_,N)=>{const G=new vi(_);return f(G.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([_,N,G],Q)=>{const ue=On(N);return f(ue.popLast())}))}ti(e){const t=e.store("targets");return t.X((s,c)=>{const f=uu(c),_=_d(this.serializer,f);return t.put(_)})}ei(e,t){const s=t.store("remoteDocuments"),c=[];return s.X((f,_)=>{const N=t.store("remoteDocumentsV14"),G=(Q=_,Q.document?new Pn(vi.fromString(Q.document.name).popFirst(5)):Q.noDocument?Pn.fromSegments(Q.noDocument.path):Q.unknownDocument?Pn.fromSegments(Q.unknownDocument.path):Hn()).path.toArray();var Q;const ue={prefixPath:G.slice(0,G.length-2),collectionGroup:G[G.length-2],documentId:G[G.length-1],readTime:_.readTime||[0,0],unknownDocument:_.unknownDocument,noDocument:_.noDocument,document:_.document,hasCommittedMutations:!!_.hasCommittedMutations};c.push(N.put(ue))}).next(()=>Rt.waitFor(c))}ni(e,t){const s=t.store("mutations"),c=Cd(this.serializer),f=new ep(Xh.js,this.serializer.le);return s.j().next(_=>{const N=new Map;return _.forEach(G=>{var Q;let ue=null!==(Q=N.get(G.userId))&&void 0!==Q?Q:Qr();Ll(this.serializer,G).keys().forEach(Xe=>ue=ue.add(Xe)),N.set(G.userId,ue)}),Rt.forEach(N,(G,Q)=>{const ue=new Wi(Q),Xe=jh.fe(this.serializer,ue),Mt=f.getIndexManager(ue),rn=Wr.fe(ue,this.serializer,Mt,f.referenceDelegate);return new Wg(c,rn,Xe,Mt).recalculateAndSaveOverlaysForDocumentKeys(new Xu(t,z.ct),G).next()})})}}function Qh(r){r.createObjectStore("targetDocuments",{keyPath:qs}).createIndex("documentTargetsIndex",Qc,{unique:!0}),r.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Al,{unique:!0}),r.createObjectStore("targetGlobal")}const Yg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Jh{constructor(e,t,s,c,f,_,N,G,Q,ue,Xe=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.si=f,this.window=_,this.document=N,this.ii=Q,this.ri=ue,this.oi=Xe,this.Os=null,this.$s=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.ai=null,this.hi=Number.NEGATIVE_INFINITY,this.li=Mt=>Promise.resolve(),!Jh.D())throw new sn(Lt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Xf(this,c),this.fi=t+"main",this.serializer=new Gp(G),this.di=new Es(this.fi,this.oi,new rc(this.serializer)),this.Fs=new Yf(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Cd(this.serializer),this.Ls=new Uh,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===ue&&ss("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new sn(Lt.FAILED_PRECONDITION,Yg);return this.mi(),this.gi(),this.yi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Fs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new z(e,this.ii)}).then(()=>{this.$s=!0}).catch(e=>(this.di&&this.di.close(),Promise.reject(e)))}pi(e){var t=this;return this.li=function(){var s=(0,de.Z)(function*(c){if(t.started)return e(c)});return function(c){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.di.B(function(){var t=(0,de.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,de.Z)(function*(){t.started&&(yield t.wi())})))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>tp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ii(e).next(t=>{t||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.li(!1)))})}).next(()=>this.Ti(e)).next(t=>this.isPrimary&&!t?this.Ei(e).next(()=>!1):!!t&&this.Ai(e).next(()=>!0))).catch(e=>{if(Mo(e))return hn("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return hn("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.li(e)),this.isPrimary=e})}Ii(e){return ef(e).get("owner").next(t=>Rt.resolve(this.Ri(t)))}vi(e){return tp(e).delete(this.clientId)}Pi(){var e=this;return(0,de.Z)(function*(){if(e.isPrimary&&!e.bi(e.hi,18e5)){e.hi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const c=Ds(s,"clientMetadata");return c.j().next(f=>{const _=e.Vi(f,18e5),N=f.filter(G=>-1===_.indexOf(G));return Rt.forEach(N,G=>c.delete(G.clientId)).next(()=>N)})}).catch(()=>[]);if(e._i)for(const s of t)e._i.removeItem(e.Si(s.clientId))}})()}yi(){this.ai=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Pi()).then(()=>this.yi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ti(e){return this.ri?Rt.resolve(!0):ef(e).get("owner").next(t=>{if(null!==t&&this.bi(t.leaseTimestampMs,5e3)&&!this.Di(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new sn(Lt.FAILED_PRECONDITION,Yg);return!1}}return!(!this.networkEnabled||!this.inForeground)||tp(e).j().next(s=>void 0===this.Vi(s,5e3).find(c=>!(this.clientId===c.clientId||!(!this.networkEnabled&&c.networkEnabled||!this.inForeground&&c.inForeground&&this.networkEnabled===c.networkEnabled))))}).next(t=>(this.isPrimary!==t&&hn("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,de.Z)(function*(){e.$s=!1,e.Ci(),e.ai&&(e.ai.cancel(),e.ai=null),e.xi(),e.Ni(),yield e.di.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new Xu(t,z.ct);return e.Ei(s).next(()=>e.vi(s))}),e.di.close(),e.ki()})()}Vi(e,t){return e.filter(s=>this.bi(s.updateTimeMs,t)&&!this.Di(s.clientId))}Mi(){return this.runTransaction("getActiveClients","readonly",e=>tp(e).j().next(t=>this.Vi(t,18e5).map(s=>s.clientId)))}get started(){return this.$s}getMutationQueue(e,t){return Wr.fe(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new th(e,this.serializer.le.databaseId)}getDocumentOverlayCache(e){return jh.fe(this.serializer,e)}getBundleCache(){return this.Ls}runTransaction(e,t,s){hn("IndexedDbPersistence","Starting transaction:",e);const c="readonly"===t?"readonly":"readwrite",f=15===(_=this.oi)?dc:14===_?Yl:13===_?Zu:12===_?Fd:11===_?Eu:void Hn();var _;let N;return this.di.runTransaction(e,c,f,G=>(N=new Xu(G,this.Os?this.Os.next():z.ct),"readwrite-primary"===t?this.Ii(N).next(Q=>!!Q||this.Ti(N)).next(Q=>{if(!Q)throw ss(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.li(!1)),new sn(Lt.FAILED_PRECONDITION,Ra);return s(N)}).next(Q=>this.Ai(N).next(()=>Q)):this.Oi(N).next(()=>s(N)))).then(G=>(N.raiseOnCommittedEvent(),G))}Oi(e){return ef(e).get("owner").next(t=>{if(null!==t&&this.bi(t.leaseTimestampMs,5e3)&&!this.Di(t.ownerId)&&!this.Ri(t)&&!(this.ri||this.allowTabSynchronization&&t.allowTabSynchronization))throw new sn(Lt.FAILED_PRECONDITION,Yg)})}Ai(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ef(e).put("owner",t)}static D(){return Es.D()}Ei(e){const t=ef(e);return t.get("owner").next(s=>this.Ri(s)?(hn("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Rt.resolve())}bi(e,t){const s=Date.now();return!(e<s-t||e>s&&(ss(`Detected an update time that is in the future: ${e} > ${s}`),1))}mi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.wi()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Ci();const t=/(?:Version|Mobile)\/1[456]/;(0,Ze.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Ni(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Di(e){var t;try{const s=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Si(e)));return hn("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return ss("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}Ci(){if(this._i)try{this._i.setItem(this.Si(this.clientId),String(Date.now()))}catch(e){ss("Failed to set zombie client id.",e)}}ki(){if(this._i)try{this._i.removeItem(this.Si(this.clientId))}catch{}}Si(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ef(r){return Ds(r,"owner")}function tp(r){return Ds(r,"clientMetadata")}function Vu(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class np{constructor(e,t,s,c){this.targetId=e,this.fromCache=t,this.$i=s,this.Fi=c}static Bi(e,t){let s=Qr(),c=Qr();for(const f of t.docChanges)switch(f.type){case 0:s=s.add(f.doc.key);break;case 1:c=c.add(f.doc.key)}return new np(e,t.fromCache,s,c)}}class Zg{constructor(){this.Li=!1}initialize(e,t){this.qi=e,this.indexManager=t,this.Li=!0}getDocumentsMatchingQuery(e,t,s,c){return this.Ui(e,t).next(f=>f||this.Ki(e,t,c,s)).next(f=>f||this.Gi(e,t))}Ui(e,t){if(Vd(t))return Rt.resolve(null);let s=No(t);return this.indexManager.getIndexType(e,s).next(c=>0===c?null:(null!==t.limit&&1===c&&(t=tu(t,null,"F"),s=No(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(f=>{const _=Qr(...f);return this.qi.getDocuments(e,_).next(N=>this.indexManager.getMinOffset(e,s).next(G=>{const Q=this.Qi(t,N);return this.ji(t,Q,_,G.readTime)?this.Ui(e,tu(t,null,"F")):this.zi(e,Q,t,G)}))})))}Ki(e,t,s,c){return Vd(t)||c.isEqual(rr.min())?this.Gi(e,t):this.qi.getDocuments(e,s).next(f=>{const _=this.Qi(t,f);return this.ji(t,_,s,c)?this.Gi(e,t):(gu()<=et.in.DEBUG&&hn("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),Au(t)),this.zi(e,_,t,Zc(c,-1)))})}Qi(e,t){let s=new Ki(Pf(e));return t.forEach((c,f)=>{nu(e,f)&&(s=s.add(f))}),s}ji(e,t,s,c){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const f="F"===e.limitType?t.last():t.first();return!!f&&(f.hasPendingWrites||f.version.compareTo(c)>0)}Gi(e,t){return gu()<=et.in.DEBUG&&hn("QueryEngine","Using full collection scan to execute query:",Au(t)),this.qi.getDocumentsMatchingQuery(e,t,Yr.min())}zi(e,t,s,c){return this.qi.getDocumentsMatchingQuery(e,s,c).next(f=>(t.forEach(_=>{f=f.insert(_.key,_)}),f))}}class Xg{constructor(e,t,s,c){this.persistence=e,this.Wi=t,this.serializer=c,this.Hi=new Tr(sr),this.Ji=new vc(f=>el(f),Oc),this.Yi=new Map,this.Xi=e.getRemoteDocumentCache(),this.Fs=e.getTargetCache(),this.Ls=e.getBundleCache(),this.Zi(s)}Zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Wg(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Wi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Hi))}}function Qg(r,e,t,s){return new Xg(r,e,t,s)}function Jg(r,e){return oh.apply(this,arguments)}function oh(){return oh=(0,de.Z)(function*(r,e){const t=Fn(r);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let c;return t.mutationQueue.getAllMutationBatches(s).next(f=>(c=f,t.Zi(e),t.mutationQueue.getAllMutationBatches(s))).next(f=>{const _=[],N=[];let G=Qr();for(const Q of c){_.push(Q.batchId);for(const ue of Q.mutations)G=G.add(ue.key)}for(const Q of f){N.push(Q.batchId);for(const ue of Q.mutations)G=G.add(ue.key)}return t.localDocuments.getDocuments(s,G).next(Q=>({tr:Q,removedBatchIds:_,addedBatchIds:N}))})})}),oh.apply(this,arguments)}function rp(r){const e=Fn(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Fs.getLastRemoteSnapshotVersion(t))}function ip(r,e,t){let s=Qr(),c=Qr();return t.forEach(f=>s=s.add(f)),e.getEntries(r,s).next(f=>{let _=Xs();return t.forEach((N,G)=>{const Q=f.get(N);G.isFoundDocument()!==Q.isFoundDocument()&&(c=c.add(N)),G.isNoDocument()&&G.version.isEqual(rr.min())?(e.removeEntry(N,G.readTime),_=_.insert(N,G)):!Q.isValidDocument()||G.version.compareTo(Q.version)>0||0===G.version.compareTo(Q.version)&&Q.hasPendingWrites?(e.addEntry(G),_=_.insert(N,G)):hn("LocalStore","Ignoring outdated watch update for ",N,". Current version:",Q.version," Watch version:",G.version)}),{er:_,nr:c}})}function sp(r,e){const t=Fn(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function bd(r,e){const t=Fn(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let c;return t.Fs.getTargetData(s,e).next(f=>f?(c=f,Rt.resolve(c)):t.Fs.allocateTargetId(s).next(_=>(c=new Vc(e,_,"TargetPurposeListen",s.currentSequenceNumber),t.Fs.addTargetData(s,c).next(()=>c))))}).then(s=>{const c=t.Hi.get(s.targetId);return(null===c||s.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(t.Hi=t.Hi.insert(s.targetId,s),t.Ji.set(e,s.targetId)),s})}function ju(r,e,t){return nf.apply(this,arguments)}function nf(){return nf=(0,de.Z)(function*(r,e,t){const s=Fn(r),c=s.Hi.get(e),f=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",f,_=>s.persistence.referenceDelegate.removeTarget(_,c)))}catch(_){if(!Mo(_))throw _;hn("LocalStore",`Failed to update sequence numbers for target ${e}: ${_}`)}s.Hi=s.Hi.remove(e),s.Ji.delete(c.target)}),nf.apply(this,arguments)}function lh(r,e,t){const s=Fn(r);let c=rr.min(),f=Qr();return s.persistence.runTransaction("Execute query","readonly",_=>function(N,G,Q){const ue=Fn(N),Xe=ue.Ji.get(Q);return void 0!==Xe?Rt.resolve(ue.Hi.get(Xe)):ue.Fs.getTargetData(G,Q)}(s,_,No(e)).next(N=>{if(N)return c=N.lastLimboFreeSnapshotVersion,s.Fs.getMatchingKeysForTargetId(_,N.targetId).next(G=>{f=G})}).next(()=>s.Wi.getDocumentsMatchingQuery(_,e,t?c:rr.min(),t?f:Qr())).next(N=>(em(s,ru(e),N),{documents:N,sr:f})))}function ng(r,e){const t=Fn(r),s=Fn(t.Fs),c=t.Hi.get(e);return c?Promise.resolve(c.target):t.persistence.runTransaction("Get target data","readonly",f=>s.he(f,e).next(_=>_?_.target:null))}function ml(r,e){const t=Fn(r),s=t.Yi.get(e)||rr.min();return t.persistence.runTransaction("Get new document changes","readonly",c=>t.Xi.getAllFromCollectionGroup(c,e,Zc(s,-1),Number.MAX_SAFE_INTEGER)).then(c=>(em(t,e,c),c))}function em(r,e,t){let s=r.Yi.get(e)||rr.min();t.forEach((c,f)=>{f.readTime.compareTo(s)>0&&(s=f.readTime)}),r.Yi.set(e,s)}function rf(){return rf=(0,de.Z)(function*(r,e,t,s){const c=Fn(r);let f=Qr(),_=Xs();for(const Q of t){const ue=e.ir(Q.metadata.name);Q.document&&(f=f.add(ue));const Xe=e.rr(Q);Xe.setReadTime(e.ur(Q.metadata.readTime)),_=_.insert(ue,Xe)}const N=c.Xi.newChangeBuffer({trackRemovals:!0}),G=yield bd(c,(Q=s,No(Oa(vi.fromString(`__bundle__/docs/${Q}`)))));var Q;return c.persistence.runTransaction("Apply bundle documents","readwrite",Q=>ip(Q,N,_).next(ue=>(N.apply(Q),ue)).next(ue=>c.Fs.removeMatchingKeysForTargetId(Q,G.targetId).next(()=>c.Fs.addMatchingKeys(Q,f,G.targetId)).next(()=>c.localDocuments.getLocalViewOfDocuments(Q,ue.er,ue.nr)).next(()=>ue.er)))}),rf.apply(this,arguments)}function Jm(r,e){return sf.apply(this,arguments)}function sf(){return sf=(0,de.Z)(function*(r,e,t=Qr()){const s=yield bd(r,No(Wp(e.bundledQuery))),c=Fn(r);return c.persistence.runTransaction("Save named query","readwrite",f=>{const _=Ss(e.readTime);if(s.snapshotVersion.compareTo(_)>=0)return c.Ls.saveNamedQuery(f,e);const N=s.withResumeToken(Ys.EMPTY_BYTE_STRING,_);return c.Hi=c.Hi.insert(N.targetId,N),c.Fs.updateTargetData(f,N).next(()=>c.Fs.removeMatchingKeysForTargetId(f,s.targetId)).next(()=>c.Fs.addMatchingKeys(f,t,s.targetId)).next(()=>c.Ls.saveNamedQuery(f,e))})}),sf.apply(this,arguments)}function ig(r,e){return`firestore_clients_${r}_${e}`}function tm(r,e,t){let s=`firestore_mutations_${r}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function sg(r,e){return`firestore_targets_${r}_${e}`}class La{constructor(e,t,s,c){this.user=e,this.batchId=t,this.state=s,this.error=c}static cr(e,t,s){const c=JSON.parse(s);let f,_="object"==typeof c&&-1!==["pending","acknowledged","rejected"].indexOf(c.state)&&(void 0===c.error||"object"==typeof c.error);return _&&c.error&&(_="string"==typeof c.error.message&&"string"==typeof c.error.code,_&&(f=new sn(c.error.code,c.error.message))),_?new La(e,t,c.state,f):(ss("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}ar(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ch{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static cr(e,t){const s=JSON.parse(t);let c,f="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return f&&s.error&&(f="string"==typeof s.error.message&&"string"==typeof s.error.code,f&&(c=new sn(s.error.code,s.error.message))),f?new ch(e,s.state,c):(ss("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ar(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class op{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static cr(e,t){const s=JSON.parse(t);let c="object"==typeof s&&s.activeTargetIds instanceof Array,f=id();for(let _=0;c&&_<s.activeTargetIds.length;++_)c=nt(s.activeTargetIds[_]),f=f.add(s.activeTargetIds[_]);return c?new op(e,f):(ss("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class nm{constructor(e,t){this.clientId=e,this.onlineState=t}static cr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new nm(t.clientId,t.onlineState):(ss("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ap{constructor(){this.activeTargetIds=id()}hr(e){this.activeTargetIds=this.activeTargetIds.add(e)}lr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ar(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class af{constructor(e,t,s,c,f){this.window=e,this.si=t,this.persistenceKey=s,this.dr=c,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.wr.bind(this),this.mr=new Tr(sr),this.started=!1,this.gr=[];const _=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=f,this.yr=ig(this.persistenceKey,this.dr),this.pr=`firestore_sequence_number_${this.persistenceKey}`,this.mr=this.mr.insert(this.dr,new ap),this.Ir=new RegExp(`^firestore_clients_${_}_([^_]*)$`),this.Tr=new RegExp(`^firestore_mutations_${_}_(\\d+)(?:_(.*))?$`),this.Er=new RegExp(`^firestore_targets_${_}_(\\d+)$`),this.Ar=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(N){return`firestore_bundle_loaded_v2_${N}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,de.Z)(function*(){const t=yield e.syncEngine.Mi();for(const c of t){if(c===e.dr)continue;const f=e.getItem(ig(e.persistenceKey,c));if(f){const _=op.cr(c,f);_&&(e.mr=e.mr.insert(_.clientId,_))}}e.vr();const s=e.storage.getItem(e.Ar);if(s){const c=e.Pr(s);c&&e.br(c)}for(const c of e.gr)e.wr(c);e.gr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.pr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Vr(this.mr)}isActiveQueryTarget(e){let t=!1;return this.mr.forEach((s,c)=>{c.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Sr(e,"pending")}updateMutationState(e,t,s){this.Sr(e,t,s),this.Dr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(sg(this.persistenceKey,e));if(s){const c=ch.cr(e,s);c&&(t=c.state)}}return this.Cr.hr(e),this.vr(),t}removeLocalQueryTarget(e){this.Cr.lr(e),this.vr()}isLocalQueryTarget(e){return this.Cr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(sg(this.persistenceKey,e))}updateQueryState(e,t,s){this.Nr(e,t,s)}handleUserChange(e,t,s){t.forEach(c=>{this.Dr(c)}),this.currentUser=e,s.forEach(c=>{this.addPendingMutation(c)})}setOnlineState(e){this.kr(e)}notifyBundleLoaded(e){this.Mr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.yr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return hn("SharedClientState","READ",e,t),t}setItem(e,t){hn("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){hn("SharedClientState","REMOVE",e),this.storage.removeItem(e)}wr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(hn("SharedClientState","EVENT",s.key,s.newValue),s.key===this.yr)return void ss("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,de.Z)(function*(){if(t.started){if(null!==s.key)if(t.Ir.test(s.key)){if(null==s.newValue){const c=t.Or(s.key);return t.$r(c,null)}{const c=t.Fr(s.key,s.newValue);if(c)return t.$r(c.clientId,c)}}else if(t.Tr.test(s.key)){if(null!==s.newValue){const c=t.Br(s.key,s.newValue);if(c)return t.Lr(c)}}else if(t.Er.test(s.key)){if(null!==s.newValue){const c=t.qr(s.key,s.newValue);if(c)return t.Ur(c)}}else if(s.key===t.Ar){if(null!==s.newValue){const c=t.Pr(s.newValue);if(c)return t.br(c)}}else if(s.key===t.pr){const c=function(f){let _=z.ct;if(null!=f)try{const N=JSON.parse(f);ir("number"==typeof N),_=N}catch(N){ss("SharedClientState","Failed to read sequence number from WebStorage",N)}return _}(s.newValue);c!==z.ct&&t.sequenceNumberHandler(c)}else if(s.key===t.Rr){const c=t.Kr(s.newValue);yield Promise.all(c.map(f=>t.syncEngine.Gr(f)))}}else t.gr.push(s)}))}}get Cr(){return this.mr.get(this.dr)}vr(){this.setItem(this.yr,this.Cr.ar())}Sr(e,t,s){const c=new La(this.currentUser,e,t,s),f=tm(this.persistenceKey,this.currentUser,e);this.setItem(f,c.ar())}Dr(e){const t=tm(this.persistenceKey,this.currentUser,e);this.removeItem(t)}kr(e){this.storage.setItem(this.Ar,JSON.stringify({clientId:this.dr,onlineState:e}))}Nr(e,t,s){const c=sg(this.persistenceKey,e),f=new ch(e,t,s);this.setItem(c,f.ar())}Mr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Ir.exec(e);return t?t[1]:null}Fr(e,t){const s=this.Or(e);return op.cr(s,t)}Br(e,t){const s=this.Tr.exec(e),c=Number(s[1]);return La.cr(new Wi(void 0!==s[2]?s[2]:null),c,t)}qr(e,t){const s=this.Er.exec(e),c=Number(s[1]);return ch.cr(c,t)}Pr(e){return nm.cr(e)}Kr(e){return JSON.parse(e)}Lr(e){var t=this;return(0,de.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Qr(e.batchId,e.state,e.error);hn("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Ur(e){return this.syncEngine.jr(e.targetId,e.state,e.error)}$r(e,t){const s=t?this.mr.insert(e,t):this.mr.remove(e),c=this.Vr(this.mr),f=this.Vr(s),_=[],N=[];return f.forEach(G=>{c.has(G)||_.push(G)}),c.forEach(G=>{f.has(G)||N.push(G)}),this.syncEngine.zr(_,N).then(()=>{this.mr=s})}br(e){this.mr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Vr(e){let t=id();return e.forEach((s,c)=>{t=t.unionWith(c.activeTargetIds)}),t}}class rm{constructor(){this.Wr=new ap,this.Hr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Wr.hr(e),this.Hr[e]||"not-current"}updateQueryState(e,t,s){this.Hr[e]=t}removeLocalQueryTarget(e){this.Wr.lr(e)}isLocalQueryTarget(e){return this.Wr.activeTargetIds.has(e)}clearQueryState(e){delete this.Hr[e]}getAllActiveQueryTargets(){return this.Wr.activeTargetIds}isActiveQueryTarget(e){return this.Wr.activeTargetIds.has(e)}start(){return this.Wr=new ap,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ey{Jr(e){}shutdown(){}}class im{constructor(){this.Yr=()=>this.Xr(),this.Zr=()=>this.eo(),this.no=[],this.so()}Jr(e){this.no.push(e)}shutdown(){window.removeEventListener("online",this.Yr),window.removeEventListener("offline",this.Zr)}so(){window.addEventListener("online",this.Yr),window.addEventListener("offline",this.Zr)}Xr(){hn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.no)e(0)}eo(){hn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.no)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let lf=null;function og(){return null===lf?lf=268435456+Math.round(2147483648*Math.random()):lf++,"0x"+lf.toString(16)}const ty={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ag{constructor(e){this.io=e.io,this.ro=e.ro}oo(e){this.uo=e}co(e){this.ao=e}onMessage(e){this.ho=e}close(){this.ro()}send(e){this.io(e)}lo(){this.uo()}fo(e){this.ao(e)}_o(e){this.ho(e)}}const Ba="WebChannelConnection";class ny extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.wo=(e.ssl?"https":"http")+"://"+e.host,this.mo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get yo(){return!1}po(e,t,s,c,f){const _=og(),N=this.Io(e,t);hn("RestConnection",`Sending RPC '${e}' ${_}:`,N,s);const G={};return this.To(G,c,f),this.Eo(e,N,G,s).then(Q=>(hn("RestConnection",`Received RPC '${e}' ${_}: `,Q),Q),Q=>{throw ci("RestConnection",`RPC '${e}' ${_} failed with error: `,Q,"url: ",N,"request:",s),Q})}Ao(e,t,s,c,f,_){return this.po(e,t,s,c,f)}To(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+bl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((c,f)=>e[f]=c),s&&s.headers.forEach((c,f)=>e[f]=c)}Io(e,t){return`${this.wo}/v1/${t}:${ty[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Eo(e,t,s,c){const f=og();return new Promise((_,N)=>{const G=new Gl;G.setWithCredentials(!0),G.listenOnce(Ls.COMPLETE,()=>{try{switch(G.getLastErrorCode()){case Gs.NO_ERROR:const ue=G.getResponseJson();hn(Ba,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(ue)),_(ue);break;case Gs.TIMEOUT:hn(Ba,`RPC '${e}' ${f} timed out`),N(new sn(Lt.DEADLINE_EXCEEDED,"Request time out"));break;case Gs.HTTP_ERROR:const Xe=G.getStatus();if(hn(Ba,`RPC '${e}' ${f} failed with status:`,Xe,"response text:",G.getResponseText()),Xe>0){let Mt=G.getResponseJson();Array.isArray(Mt)&&(Mt=Mt[0]);const rn=null==Mt?void 0:Mt.error;if(rn&&rn.status&&rn.message){const Sn=function(Mn){const ur=Mn.toLowerCase().replace(/_/g,"-");return Object.values(Lt).indexOf(ur)>=0?ur:Lt.UNKNOWN}(rn.status);N(new sn(Sn,rn.message))}else N(new sn(Lt.UNKNOWN,"Server responded with status "+G.getStatus()))}else N(new sn(Lt.UNAVAILABLE,"Connection failed."));break;default:Hn()}}finally{hn(Ba,`RPC '${e}' ${f} completed.`)}});const Q=JSON.stringify(c);hn(Ba,`RPC '${e}' ${f} sending request:`,c),G.send(t,"POST",Q,s,15)})}Ro(e,t,s){const c=og(),f=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],_=ra(),N=xo(),G={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(G.xmlHttpFactory=new Aa({})),this.To(G.initMessageHeaders,t,s),G.encodeInitMessageHeaders=!0;const Q=f.join("");hn(Ba,`Creating RPC '${e}' stream ${c}: ${Q}`,G);const ue=_.createWebChannel(Q,G);let Xe=!1,Mt=!1;const rn=new ag({io:Mn=>{Mt?hn(Ba,`Not sending because RPC '${e}' stream ${c} is closed:`,Mn):(Xe||(hn(Ba,`Opening RPC '${e}' stream ${c} transport.`),ue.open(),Xe=!0),hn(Ba,`RPC '${e}' stream ${c} sending:`,Mn),ue.send(Mn))},ro:()=>ue.close()}),Sn=(Mn,ur,ei)=>{Mn.listen(ur,Bi=>{try{ei(Bi)}catch(ti){setTimeout(()=>{throw ti},0)}})};return Sn(ue,Wa.EventType.OPEN,()=>{Mt||hn(Ba,`RPC '${e}' stream ${c} transport opened.`)}),Sn(ue,Wa.EventType.CLOSE,()=>{Mt||(Mt=!0,hn(Ba,`RPC '${e}' stream ${c} transport closed`),rn.fo())}),Sn(ue,Wa.EventType.ERROR,Mn=>{Mt||(Mt=!0,ci(Ba,`RPC '${e}' stream ${c} transport errored:`,Mn),rn.fo(new sn(Lt.UNAVAILABLE,"The operation could not be completed")))}),Sn(ue,Wa.EventType.MESSAGE,Mn=>{var ur;if(!Mt){const ei=Mn.data[0];ir(!!ei);const ti=ei.error||(null===(ur=ei[0])||void 0===ur?void 0:ur.error);if(ti){hn(Ba,`RPC '${e}' stream ${c} received error:`,ti);const Ua=ti.status;let Ns=function(Va){const Th=mt[Va];if(void 0!==Th)return er(Th)}(Ua),ws=ti.message;void 0===Ns&&(Ns=Lt.INTERNAL,ws="Unknown error status: "+Ua+" with message "+ti.message),Mt=!0,rn.fo(new sn(Ns,ws)),ue.close()}else hn(Ba,`RPC '${e}' stream ${c} received:`,ei),rn._o(ei)}}),Sn(N,ia.STAT_EVENT,Mn=>{Mn.stat===Ws.PROXY?hn(Ba,`RPC '${e}' stream ${c} detected buffering proxy`):Mn.stat===Ws.NOPROXY&&hn(Ba,`RPC '${e}' stream ${c} detected no buffering proxy`)}),setTimeout(()=>{rn.lo()},0),rn}}function ry(){return typeof window<"u"?window:null}function lg(){return typeof document<"u"?document:null}function cf(r){return new Fh(r,!0)}class ic{constructor(e,t,s=1e3,c=1.5,f=6e4){this.si=e,this.timerId=t,this.vo=s,this.Po=c,this.bo=f,this.Vo=0,this.So=null,this.Do=Date.now(),this.reset()}reset(){this.Vo=0}Co(){this.Vo=this.bo}xo(e){this.cancel();const t=Math.floor(this.Vo+this.No()),s=Math.max(0,Date.now()-this.Do),c=Math.max(0,t-s);c>0&&hn("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.Vo} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.So=this.si.enqueueAfterDelay(this.timerId,c,()=>(this.Do=Date.now(),e())),this.Vo*=this.Po,this.Vo<this.vo&&(this.Vo=this.vo),this.Vo>this.bo&&(this.Vo=this.bo)}ko(){null!==this.So&&(this.So.skipDelay(),this.So=null)}cancel(){null!==this.So&&(this.So.cancel(),this.So=null)}No(){return(Math.random()-.5)*this.Vo}}class lp{constructor(e,t,s,c,f,_,N,G){this.si=e,this.Mo=s,this.Oo=c,this.connection=f,this.authCredentialsProvider=_,this.appCheckCredentialsProvider=N,this.listener=G,this.state=0,this.$o=0,this.Fo=null,this.Bo=null,this.stream=null,this.Lo=new ic(e,t)}qo(){return 1===this.state||5===this.state||this.Uo()}Uo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Ko()}stop(){var e=this;return(0,de.Z)(function*(){e.qo()&&(yield e.close(0))})()}Go(){this.state=0,this.Lo.reset()}Qo(){this.Uo()&&null===this.Fo&&(this.Fo=this.si.enqueueAfterDelay(this.Mo,6e4,()=>this.jo()))}zo(e){this.Wo(),this.stream.send(e)}jo(){var e=this;return(0,de.Z)(function*(){if(e.Uo())return e.close(0)})()}Wo(){this.Fo&&(this.Fo.cancel(),this.Fo=null)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}close(e,t){var s=this;return(0,de.Z)(function*(){s.Wo(),s.Ho(),s.Lo.cancel(),s.$o++,4!==e?s.Lo.reset():t&&t.code===Lt.RESOURCE_EXHAUSTED?(ss(t.toString()),ss("Using maximum backoff delay to prevent overloading the backend."),s.Lo.Co()):t&&t.code===Lt.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Jo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.co(t)})()}Jo(){}auth(){this.state=1;const e=this.Yo(this.$o),t=this.$o;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,c])=>{this.$o===t&&this.Xo(s,c)},s=>{e(()=>{const c=new sn(Lt.UNKNOWN,"Fetching auth token failed: "+s.message);return this.Zo(c)})})}Xo(e,t){const s=this.Yo(this.$o);this.stream=this.tu(e,t),this.stream.oo(()=>{s(()=>(this.state=2,this.Bo=this.si.enqueueAfterDelay(this.Oo,1e4,()=>(this.Uo()&&(this.state=3),Promise.resolve())),this.listener.oo()))}),this.stream.co(c=>{s(()=>this.Zo(c))}),this.stream.onMessage(c=>{s(()=>this.onMessage(c))})}Ko(){var e=this;this.state=5,this.Lo.xo((0,de.Z)(function*(){e.state=0,e.start()}))}Zo(e){return hn("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Yo(e){return t=>{this.si.enqueueAndForget(()=>this.$o===e?t():(hn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sm extends lp{constructor(e,t,s,c,f,_){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,c,_),this.serializer=f}tu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.Lo.reset();const t=function Xd(r,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(G=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===G?1:"REMOVE"===G?2:"CURRENT"===G?3:"RESET"===G?4:Hn(),c=e.targetChange.targetIds||[],f=function(G,Q){return G.useProto3Json?(ir(void 0===Q||"string"==typeof Q),Ys.fromBase64String(Q||"")):(ir(void 0===Q||Q instanceof Uint8Array),Ys.fromUint8Array(Q||new Uint8Array))}(r,e.targetChange.resumeToken),_=e.targetChange.cause,N=_&&function(G){const Q=void 0===G.code?Lt.UNKNOWN:er(G.code);return new sn(Q,G.message||"")}(_);t=new fd(s,c,f,N||null)}else if("documentChange"in e){const s=e.documentChange,c=fl(r,s.document.name),f=Ss(s.document.updateTime),_=s.document.createTime?Ss(s.document.createTime):rr.min(),N=new Zs({mapValue:{fields:s.document.fields}}),G=_i.newFoundDocument(c,f,_,N);t=new lu(s.targetIds||[],s.removedTargetIds||[],G.key,G)}else if("documentDelete"in e){const s=e.documentDelete,c=fl(r,s.document),f=s.readTime?Ss(s.readTime):rr.min(),_=_i.newNoDocument(c,f);t=new lu([],s.removedTargetIds||[],_.key,_)}else if("documentRemove"in e){const s=e.documentRemove,c=fl(r,s.document);t=new lu([],s.removedTargetIds||[],c,null)}else{if(!("filter"in e))return Hn();{const s=e.filter,{count:c=0,unchangedNames:f}=s,_=new Je(c,f);t=new qd(s.targetId,_)}}var G;return t}(this.serializer,e),s=function(c){if(!("targetChange"in c))return rr.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?rr.min():f.readTime?Ss(f.readTime):rr.min()}(e);return this.listener.eu(t,s)}nu(e){const t={};t.database=md(this.serializer),t.addTarget=function(c,f){let _;const N=f.target;if(_=Tu(N)?{documents:$c(c,N)}:{query:$h(c,N)},_.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){_.resumeToken=Ff(c,f.resumeToken);const G=Zd(c,f.expectedCount);null!==G&&(_.expectedCount=G)}else if(f.snapshotVersion.compareTo(rr.min())>0){_.readTime=cu(c,f.snapshotVersion.toTimestamp());const G=Zd(c,f.expectedCount);null!==G&&(_.expectedCount=G)}return _}(this.serializer,e);const s=function jf(r,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Hn()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.zo(t)}su(e){const t={};t.database=md(this.serializer),t.removeTarget=e,this.zo(t)}}class iy extends lp{constructor(e,t,s,c,f,_){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,c,_),this.serializer=f,this.iu=!1}get ru(){return this.iu}start(){this.iu=!1,this.lastStreamToken=void 0,super.start()}Jo(){this.iu&&this.ou([])}tu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(ir(!!e.streamToken),this.lastStreamToken=e.streamToken,this.iu){this.Lo.reset();const t=function Bc(r,e){return r&&r.length>0?(ir(void 0!==e),r.map(t=>function(s,c){let f=Ss(s.updateTime?s.updateTime:c);return f.isEqual(rr.min())&&(f=Ss(c)),new tl(f,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=Ss(e.commitTime);return this.listener.uu(s,t)}return ir(!e.writeResults||0===e.writeResults.length),this.iu=!0,this.listener.cu()}au(){const e={};e.database=md(this.serializer),this.zo(e)}ou(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>yd(this.serializer,s))};this.zo(t)}}class om extends class{}{constructor(e,t,s,c){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=c,this.hu=!1}lu(){if(this.hu)throw new sn(Lt.FAILED_PRECONDITION,"The client has already been terminated.")}po(e,t,s){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.po(e,t,s,c,f)).catch(c=>{throw"FirebaseError"===c.name?(c.code===Lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new sn(Lt.UNKNOWN,c.toString())})}Ao(e,t,s,c){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,_])=>this.connection.Ao(e,t,s,f,_,c)).catch(f=>{throw"FirebaseError"===f.name?(f.code===Lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new sn(Lt.UNKNOWN,f.toString())})}terminate(){this.hu=!0}}class Hu{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.du=0,this._u=null,this.wu=!0}mu(){0===this.du&&(this.gu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.yu("Backend didn't respond within 10 seconds."),this.gu("Offline"),Promise.resolve())))}pu(e){"Online"===this.state?this.gu("Unknown"):(this.du++,this.du>=1&&(this.Iu(),this.yu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.gu("Offline")))}set(e){this.Iu(),this.du=0,"Online"===e&&(this.wu=!1),this.gu(e)}gu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}yu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.wu?(ss(t),this.wu=!1):hn("OnlineStateTracker",t)}Iu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Wo{constructor(e,t,s,c,f){var _=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Tu=[],this.Eu=new Map,this.Au=new Set,this.Ru=[],this.vu=f,this.vu.Jr(N=>{s.enqueueAndForget((0,de.Z)(function*(){var G;Hc(_)&&(hn("RemoteStore","Restarting streams for network reachability change."),yield(G=(0,de.Z)(function*(Q){const ue=Fn(Q);ue.Au.add(4),yield hu(ue),ue.Pu.set("Unknown"),ue.Au.delete(4),yield wa(ue)}),function(Q){return G.apply(this,arguments)})(_))}))}),this.Pu=new Hu(s,c)}}function wa(r){return Dd.apply(this,arguments)}function Dd(){return Dd=(0,de.Z)(function*(r){if(Hc(r))for(const e of r.Ru)yield e(!0)}),Dd.apply(this,arguments)}function hu(r){return uh.apply(this,arguments)}function uh(){return uh=(0,de.Z)(function*(r){for(const e of r.Ru)yield e(!1)}),uh.apply(this,arguments)}function Td(r,e){const t=Fn(r);t.Eu.has(e.targetId)||(t.Eu.set(e.targetId,e),hf(t)?df(t):I(t).Uo()&&uf(t,e))}function cp(r,e){const t=Fn(r),s=I(t);t.Eu.delete(e),s.Uo()&&oy(t,e),0===t.Eu.size&&(s.Uo()?s.Qo():Hc(t)&&t.Pu.set("Unknown"))}function uf(r,e){if(r.bu.Lt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(rr.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}I(r).nu(e)}function oy(r,e){r.bu.Lt(e),I(r).su(e)}function df(r){r.bu=new Nh({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),he:e=>r.Eu.get(e)||null,oe:()=>r.datastore.serializer.databaseId}),I(r).start(),r.Pu.mu()}function hf(r){return Hc(r)&&!I(r).qo()&&r.Eu.size>0}function Hc(r){return 0===Fn(r).Au.size}function up(r){r.bu=void 0}function Sd(r){return Tc.apply(this,arguments)}function Tc(){return Tc=(0,de.Z)(function*(r){r.Eu.forEach((e,t)=>{uf(r,e)})}),Tc.apply(this,arguments)}function ff(r,e){return dh.apply(this,arguments)}function dh(){return dh=(0,de.Z)(function*(r,e){up(r),hf(r)?(r.Pu.pu(e),df(r)):r.Pu.set("Unknown")}),dh.apply(this,arguments)}function pf(r,e,t){return dp.apply(this,arguments)}function dp(){return dp=(0,de.Z)(function*(r,e,t){if(r.Pu.set("Online"),e instanceof fd&&2===e.state&&e.cause)try{yield(s=(0,de.Z)(function*(c,f){const _=f.cause;for(const N of f.targetIds)c.Eu.has(N)&&(yield c.remoteSyncer.rejectListen(N,_),c.Eu.delete(N),c.bu.removeTarget(N))}),function(c,f){return s.apply(this,arguments)})(r,e)}catch(s){hn("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield hh(r,s)}else if(e instanceof lu?r.bu.Wt(e):e instanceof qd?r.bu.ee(e):r.bu.Yt(e),!t.isEqual(rr.min()))try{const s=yield rp(r.localStore);t.compareTo(s)>=0&&(yield function(c,f){const _=c.bu.ue(f);return _.targetChanges.forEach((N,G)=>{if(N.resumeToken.approximateByteSize()>0){const Q=c.Eu.get(G);Q&&c.Eu.set(G,Q.withResumeToken(N.resumeToken,f))}}),_.targetMismatches.forEach((N,G)=>{const Q=c.Eu.get(N);if(!Q)return;c.Eu.set(N,Q.withResumeToken(Ys.EMPTY_BYTE_STRING,Q.snapshotVersion)),oy(c,N);const ue=new Vc(Q.target,N,G,Q.sequenceNumber);uf(c,ue)}),c.remoteSyncer.applyRemoteEvent(_)}(r,t))}catch(s){hn("RemoteStore","Failed to raise snapshot:",s),yield hh(r,s)}var s}),dp.apply(this,arguments)}function hh(r,e,t){return gf.apply(this,arguments)}function gf(){return gf=(0,de.Z)(function*(r,e,t){if(!Mo(e))throw e;r.Au.add(1),yield hu(r),r.Pu.set("Offline"),t||(t=()=>rp(r.localStore)),r.asyncQueue.enqueueRetryable((0,de.Z)(function*(){hn("RemoteStore","Retrying IndexedDB access"),yield t(),r.Au.delete(1),yield wa(r)}))}),gf.apply(this,arguments)}function am(r,e){return e().catch(t=>hh(r,t,e))}function fh(r){return Ad.apply(this,arguments)}function Ad(){return Ad=(0,de.Z)(function*(r){const e=Fn(r),t=M(e);let s=e.Tu.length>0?e.Tu[e.Tu.length-1].batchId:-1;for(;lm(e);)try{const c=yield sp(e.localStore,s);if(null===c){0===e.Tu.length&&t.Qo();break}s=c.batchId,tv(e,c)}catch(c){yield hh(e,c)}cm(e)&&ug(e)}),Ad.apply(this,arguments)}function lm(r){return Hc(r)&&r.Tu.length<10}function tv(r,e){r.Tu.push(e);const t=M(r);t.Uo()&&t.ru&&t.ou(e.mutations)}function cm(r){return Hc(r)&&!M(r).qo()&&r.Tu.length>0}function ug(r){M(r).start()}function ay(r){return dg.apply(this,arguments)}function dg(){return dg=(0,de.Z)(function*(r){M(r).au()}),dg.apply(this,arguments)}function ly(r){return hg.apply(this,arguments)}function hg(){return hg=(0,de.Z)(function*(r){const e=M(r);for(const t of r.Tu)e.ou(t.mutations)}),hg.apply(this,arguments)}function cy(r,e,t){return hp.apply(this,arguments)}function hp(){return hp=(0,de.Z)(function*(r,e,t){const s=r.Tu.shift(),c=A.from(s,e,t);yield am(r,()=>r.remoteSyncer.applySuccessfulWrite(c)),yield fh(r)}),hp.apply(this,arguments)}function fp(r,e){return fg.apply(this,arguments)}function fg(){return fg=(0,de.Z)(function*(r,e){var t;e&&M(r).ru&&(yield(t=(0,de.Z)(function*(s,c){if(kn(f=c.code)&&f!==Lt.ABORTED){const _=s.Tu.shift();M(s).Go(),yield am(s,()=>s.remoteSyncer.rejectFailedWrite(_.batchId,c)),yield fh(s)}var f}),function(s,c){return t.apply(this,arguments)})(r,e)),cm(r)&&ug(r)}),fg.apply(this,arguments)}function u(r,e){return a.apply(this,arguments)}function a(){return a=(0,de.Z)(function*(r,e){const t=Fn(r);t.asyncQueue.verifyOperationInProgress(),hn("RemoteStore","RemoteStore received new credentials");const s=Hc(t);t.Au.add(3),yield hu(t),s&&t.Pu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Au.delete(3),yield wa(t)}),a.apply(this,arguments)}function l(r,e){return p.apply(this,arguments)}function p(){return p=(0,de.Z)(function*(r,e){const t=Fn(r);e?(t.Au.delete(2),yield wa(t)):e||(t.Au.add(2),yield hu(t),t.Pu.set("Unknown"))}),p.apply(this,arguments)}function I(r){return r.Vu||(r.Vu=function(e,t,s){const c=Fn(e);return c.lu(),new sm(t,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,s)}(r.datastore,r.asyncQueue,{oo:Sd.bind(null,r),co:ff.bind(null,r),eu:pf.bind(null,r)}),r.Ru.push(function(){var e=(0,de.Z)(function*(t){t?(r.Vu.Go(),hf(r)?df(r):r.Pu.set("Unknown")):(yield r.Vu.stop(),up(r))});return function(t){return e.apply(this,arguments)}}())),r.Vu}function M(r){return r.Su||(r.Su=function(e,t,s){const c=Fn(e);return c.lu(),new iy(t,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,s)}(r.datastore,r.asyncQueue,{oo:ay.bind(null,r),co:fp.bind(null,r),cu:ly.bind(null,r),uu:cy.bind(null,r)}),r.Ru.push(function(){var e=(0,de.Z)(function*(t){t?(r.Su.Go(),yield fh(r)):(yield r.Su.stop(),r.Tu.length>0&&(hn("RemoteStore",`Stopping write stream with ${r.Tu.length} pending writes`),r.Tu=[]))});return function(t){return e.apply(this,arguments)}}())),r.Su}class V{constructor(e,t,s,c,f){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=c,this.removalCallback=f,this.deferred=new ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(_=>{})}static createAndSchedule(e,t,s,c,f){const _=Date.now()+s,N=new V(e,t,_,c,f);return N.start(s),N}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new sn(Lt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function te(r,e){if(ss("AsyncQueue",`${e}: ${r}`),Mo(r))return new sn(Lt.UNAVAILABLE,`${e}: ${r}`);throw r}class he{constructor(e){this.comparator=e?(t,s)=>e(t,s)||Pn.comparator(t.key,s.key):(t,s)=>Pn.comparator(t.key,s.key),this.keyedMap=kc(),this.sortedSet=new Tr(this.comparator)}static emptySet(e){return new he(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof he)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const c=t.getNext().key,f=s.getNext().key;if(!c.isEqual(f))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new he;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class Te{constructor(){this.Du=new Tr(Pn.comparator)}track(e){const t=e.doc.key,s=this.Du.get(t);s?0!==e.type&&3===s.type?this.Du=this.Du.insert(t,e):3===e.type&&1!==s.type?this.Du=this.Du.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Du=this.Du.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Du=this.Du.remove(t):1===e.type&&2===s.type?this.Du=this.Du.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):Hn():this.Du=this.Du.insert(t,e)}Cu(){const e=[];return this.Du.inorderTraversal((t,s)=>{e.push(s)}),e}}class bt{constructor(e,t,s,c,f,_,N,G,Q){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=c,this.mutatedKeys=f,this.fromCache=_,this.syncStateChanged=N,this.excludesMetadataChanges=G,this.hasCachedResults=Q}static fromInitialDocuments(e,t,s,c,f){const _=[];return t.forEach(N=>{_.push({type:0,doc:N})}),new bt(e,t,he.emptySet(t),_,s,c,!0,!1,f)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let c=0;c<t.length;c++)if(t[c].type!==s[c].type||!t[c].doc.isEqual(s[c].doc))return!1;return!0}}class jt{constructor(){this.xu=void 0,this.listeners=[]}}class Yt{constructor(){this.queries=new vc(e=>td(e),yc),this.onlineState="Unknown",this.Nu=new Set}}function Dn(r,e){return Bn.apply(this,arguments)}function Bn(){return Bn=(0,de.Z)(function*(r,e){const t=Fn(r),s=e.query;let c=!1,f=t.queries.get(s);if(f||(c=!0,f=new jt),c)try{f.xu=yield t.onListen(s)}catch(_){const N=te(_,`Initialization of query '${Au(e.query)}' failed`);return void e.onError(N)}t.queries.set(s,f),f.listeners.push(e),e.ku(t.onlineState),f.xu&&e.Mu(f.xu)&&Ui(t)}),Bn.apply(this,arguments)}function Kr(r,e){return fi.apply(this,arguments)}function fi(){return fi=(0,de.Z)(function*(r,e){const t=Fn(r),s=e.query;let c=!1;const f=t.queries.get(s);if(f){const _=f.listeners.indexOf(e);_>=0&&(f.listeners.splice(_,1),c=0===f.listeners.length)}if(c)return t.queries.delete(s),t.onUnlisten(s)}),fi.apply(this,arguments)}function ho(r,e){const t=Fn(r);let s=!1;for(const c of e){const _=t.queries.get(c.query);if(_){for(const N of _.listeners)N.Mu(c)&&(s=!0);_.xu=c}}s&&Ui(t)}function Ko(r,e,t){const s=Fn(r),c=s.queries.get(e);if(c)for(const f of c.listeners)f.onError(t);s.queries.delete(e)}function Ui(r){r.Nu.forEach(e=>{e.next()})}class ks{constructor(e,t,s){this.query=e,this.Ou=t,this.$u=!1,this.Fu=null,this.onlineState="Unknown",this.options=s||{}}Mu(e){if(!this.options.includeMetadataChanges){const s=[];for(const c of e.docChanges)3!==c.type&&s.push(c);e=new bt(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.$u?this.Bu(e)&&(this.Ou.next(e),t=!0):this.Lu(e,this.onlineState)&&(this.qu(e),t=!0),this.Fu=e,t}onError(e){this.Ou.error(e)}ku(e){this.onlineState=e;let t=!1;return this.Fu&&!this.$u&&this.Lu(this.Fu,e)&&(this.qu(this.Fu),t=!0),t}Lu(e,t){return!e.fromCache||(!this.options.Uu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Bu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Fu&&this.Fu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}qu(e){e=bt.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.$u=!0,this.Ou.next(e)}}class bo{constructor(e,t){this.Ku=e,this.byteLength=t}Gu(){return"metadata"in this.Ku}}class Vl{constructor(e){this.serializer=e}ir(e){return fl(this.serializer,e)}rr(e){return e.metadata.exists?Vp(this.serializer,e.document,!1):_i.newNoDocument(this.ir(e.metadata.name),this.ur(e.metadata.readTime))}ur(e){return Ss(e)}}class ph{constructor(e,t,s){this.Qu=e,this.localStore=t,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Ca(e)}ju(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Ku.namedQuery)this.queries.push(e.Ku.namedQuery);else if(e.Ku.documentMetadata){this.documents.push({metadata:e.Ku.documentMetadata}),e.Ku.documentMetadata.exists||++t;const s=vi.fromString(e.Ku.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.Ku.document&&(this.documents[this.documents.length-1].document=e.Ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}zu(e){const t=new Map,s=new Vl(this.serializer);for(const c of e)if(c.metadata.queries){const f=s.ir(c.metadata.name);for(const _ of c.metadata.queries){const N=(t.get(_)||Qr()).add(f);t.set(_,N)}}return t}complete(){var e=this;return(0,de.Z)(function*(){const t=yield function rg(r,e,t,s){return rf.apply(this,arguments)}(e.localStore,new Vl(e.serializer),e.documents,e.Qu.id),s=e.zu(e.documents);for(const c of e.queries)yield Jm(e.localStore,c,s.get(c.name));return e.progress.taskState="Success",{progress:e.progress,Wu:e.collectionGroups,Hu:t}})()}}function Ca(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}class gh{constructor(e){this.key=e}}class mf{constructor(e){this.key=e}}class yf{constructor(e,t){this.query=e,this.Ju=t,this.Yu=null,this.hasCachedResults=!1,this.current=!1,this.Xu=Qr(),this.mutatedKeys=Qr(),this.Zu=Pf(e),this.tc=new he(this.Zu)}get ec(){return this.Ju}nc(e,t){const s=t?t.sc:new Te,c=t?t.tc:this.tc;let f=t?t.mutatedKeys:this.mutatedKeys,_=c,N=!1;const G="F"===this.query.limitType&&c.size===this.query.limit?c.last():null,Q="L"===this.query.limitType&&c.size===this.query.limit?c.first():null;if(e.inorderTraversal((ue,Xe)=>{const Mt=c.get(ue),rn=nu(this.query,Xe)?Xe:null,Sn=!!Mt&&this.mutatedKeys.has(Mt.key),Mn=!!rn&&(rn.hasLocalMutations||this.mutatedKeys.has(rn.key)&&rn.hasCommittedMutations);let ur=!1;Mt&&rn?Mt.data.isEqual(rn.data)?Sn!==Mn&&(s.track({type:3,doc:rn}),ur=!0):this.ic(Mt,rn)||(s.track({type:2,doc:rn}),ur=!0,(G&&this.Zu(rn,G)>0||Q&&this.Zu(rn,Q)<0)&&(N=!0)):!Mt&&rn?(s.track({type:0,doc:rn}),ur=!0):Mt&&!rn&&(s.track({type:1,doc:Mt}),ur=!0,(G||Q)&&(N=!0)),ur&&(rn?(_=_.add(rn),f=Mn?f.add(ue):f.delete(ue)):(_=_.delete(ue),f=f.delete(ue)))}),null!==this.query.limit)for(;_.size>this.query.limit;){const ue="F"===this.query.limitType?_.last():_.first();_=_.delete(ue.key),f=f.delete(ue.key),s.track({type:1,doc:ue})}return{tc:_,sc:s,ji:N,mutatedKeys:f}}ic(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const c=this.tc;this.tc=e.tc,this.mutatedKeys=e.mutatedKeys;const f=e.sc.Cu();f.sort((Q,ue)=>function(Xe,Mt){const rn=Sn=>{switch(Sn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Hn()}};return rn(Xe)-rn(Mt)}(Q.type,ue.type)||this.Zu(Q.doc,ue.doc)),this.rc(s);const _=t?this.oc():[],N=0===this.Xu.size&&this.current?1:0,G=N!==this.Yu;return this.Yu=N,0!==f.length||G?{snapshot:new bt(this.query,e.tc,c,f,e.mutatedKeys,0===N,G,!1,!!s&&s.resumeToken.approximateByteSize()>0),uc:_}:{uc:_}}ku(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tc:this.tc,sc:new Te,mutatedKeys:this.mutatedKeys,ji:!1},!1)):{uc:[]}}cc(e){return!this.Ju.has(e)&&!!this.tc.has(e)&&!this.tc.get(e).hasLocalMutations}rc(e){e&&(e.addedDocuments.forEach(t=>this.Ju=this.Ju.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ju=this.Ju.delete(t)),this.current=e.current)}oc(){if(!this.current)return[];const e=this.Xu;this.Xu=Qr(),this.tc.forEach(s=>{this.cc(s.key)&&(this.Xu=this.Xu.add(s.key))});const t=[];return e.forEach(s=>{this.Xu.has(s)||t.push(new mf(s))}),this.Xu.forEach(s=>{e.has(s)||t.push(new gh(s))}),t}ac(e){this.Ju=e.sr,this.Xu=Qr();const t=this.nc(e.documents);return this.applyChanges(t,!0)}hc(){return bt.fromInitialDocuments(this.query,this.tc,this.mutatedKeys,0===this.Yu,this.hasCachedResults)}}class pp{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class gp{constructor(e){this.key=e,this.lc=!1}}class mp{constructor(e,t,s,c,f,_){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=c,this.currentUser=f,this.maxConcurrentLimboResolutions=_,this.fc={},this.dc=new vc(N=>td(N),yc),this._c=new Map,this.wc=new Set,this.mc=new Tr(Pn.comparator),this.gc=new Map,this.yc=new Jp,this.Ic={},this.Tc=new Map,this.Ec=Id.kn(),this.onlineState="Unknown",this.Ac=void 0}get isPrimaryClient(){return!0===this.Ac}}function yp(r,e){return mh.apply(this,arguments)}function mh(){return mh=(0,de.Z)(function*(r,e){const t=_m(r);let s,c;const f=t.dc.get(e);if(f)s=f.targetId,t.sharedClientState.addLocalQueryTarget(s),c=f.view.hc();else{const _=yield bd(t.localStore,No(e)),N=t.sharedClientState.addLocalQueryTarget(_.targetId);s=_.targetId,c=yield yh(t,e,s,"current"===N,_.resumeToken),t.isPrimaryClient&&Td(t.remoteStore,_)}return c}),mh.apply(this,arguments)}function yh(r,e,t,s,c){return vh.apply(this,arguments)}function vh(){return vh=(0,de.Z)(function*(r,e,t,s,c){r.Rc=(Xe,Mt,rn)=>{return(Sn=(0,de.Z)(function*(Mn,ur,ei,Bi){let ti=ur.view.nc(ei);ti.ji&&(ti=yield lh(Mn.localStore,ur.query,!1).then(({documents:ws})=>ur.view.nc(ws,ti)));const Ua=Bi&&Bi.targetChanges.get(ur.targetId),Ns=ur.view.applyChanges(ti,Mn.isPrimaryClient,Ua);return yg(Mn,ur.targetId,Ns.uc),Ns.snapshot}),function(Mn,ur,ei,Bi){return Sn.apply(this,arguments)})(r,Xe,Mt,rn);var Sn};const f=yield lh(r.localStore,e,!0),_=new yf(e,f.sr),N=_.nc(f.documents),G=Ql.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==r.onlineState,c),Q=_.applyChanges(N,r.isPrimaryClient,G);yg(r,t,Q.uc);const ue=new pp(e,t,_);return r.dc.set(e,ue),r._c.has(t)?r._c.get(t).push(e):r._c.set(t,[e]),Q.snapshot}),vh.apply(this,arguments)}function nv(r,e){return um.apply(this,arguments)}function um(){return um=(0,de.Z)(function*(r,e){const t=Fn(r),s=t.dc.get(e),c=t._c.get(s.targetId);if(c.length>1)return t._c.set(s.targetId,c.filter(f=>!yc(f,e))),void t.dc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield ju(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),cp(t.remoteStore,s.targetId),xd(t,s.targetId)}).catch(vr))):(xd(t,s.targetId),yield ju(t.localStore,s.targetId,!0))}),um.apply(this,arguments)}function dm(){return dm=(0,de.Z)(function*(r,e,t){const s=Em(r);try{const c=yield function(f,_){const N=Fn(f),G=oi.now(),Q=_.reduce((Mt,rn)=>Mt.add(rn.key),Qr());let ue,Xe;return N.persistence.runTransaction("Locally write mutations","readwrite",Mt=>{let rn=Xs(),Sn=Qr();return N.Xi.getEntries(Mt,Q).next(Mn=>{rn=Mn,rn.forEach((ur,ei)=>{ei.isValidDocument()||(Sn=Sn.add(ur))})}).next(()=>N.localDocuments.getOverlayedDocuments(Mt,rn)).next(Mn=>{ue=Mn;const ur=[];for(const ei of _){const Bi=ud(ei,ue.get(ei.key).overlayedDocument);null!=Bi&&ur.push(new nl(ei.key,Bi,xl(Bi.value.mapValue),ms.exists(!0)))}return N.mutationQueue.addMutationBatch(Mt,G,ur,_)}).next(Mn=>{Xe=Mn;const ur=Mn.applyToLocalDocumentSet(ue,Sn);return N.documentOverlayCache.saveOverlays(Mt,Mn.batchId,ur)})}).then(()=>({batchId:Xe.batchId,changes:Nc(ue)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(c.batchId),function(f,_,N){let G=f.Ic[f.currentUser.toKey()];G||(G=new Tr(sr)),G=G.insert(_,N),f.Ic[f.currentUser.toKey()]=G}(s,c.batchId,t),yield zc(s,c.changes),yield fh(s.remoteStore)}catch(c){const f=te(c,"Failed to persist write");t.reject(f)}}),dm.apply(this,arguments)}function uy(r,e){return hm.apply(this,arguments)}function hm(){return hm=(0,de.Z)(function*(r,e){const t=Fn(r);try{const s=yield function tf(r,e){const t=Fn(r),s=e.snapshotVersion;let c=t.Hi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",f=>{const _=t.Xi.newChangeBuffer({trackRemovals:!0});c=t.Hi;const N=[];e.targetChanges.forEach((ue,Xe)=>{const Mt=c.get(Xe);if(!Mt)return;N.push(t.Fs.removeMatchingKeys(f,ue.removedDocuments,Xe).next(()=>t.Fs.addMatchingKeys(f,ue.addedDocuments,Xe)));let rn=Mt.withSequenceNumber(f.currentSequenceNumber);var Sn,Mn,ur;null!==e.targetMismatches.get(Xe)?rn=rn.withResumeToken(Ys.EMPTY_BYTE_STRING,rr.min()).withLastLimboFreeSnapshotVersion(rr.min()):ue.resumeToken.approximateByteSize()>0&&(rn=rn.withResumeToken(ue.resumeToken,s)),c=c.insert(Xe,rn),Mn=rn,ur=ue,(0===(Sn=Mt).resumeToken.approximateByteSize()||Mn.snapshotVersion.toMicroseconds()-Sn.snapshotVersion.toMicroseconds()>=3e8||ur.addedDocuments.size+ur.modifiedDocuments.size+ur.removedDocuments.size>0)&&N.push(t.Fs.updateTargetData(f,rn))});let G=Xs(),Q=Qr();if(e.documentUpdates.forEach(ue=>{e.resolvedLimboDocuments.has(ue)&&N.push(t.persistence.referenceDelegate.updateLimboDocument(f,ue))}),N.push(ip(f,_,e.documentUpdates).next(ue=>{G=ue.er,Q=ue.nr})),!s.isEqual(rr.min())){const ue=t.Fs.getLastRemoteSnapshotVersion(f).next(Xe=>t.Fs.setTargetsMetadata(f,f.currentSequenceNumber,s));N.push(ue)}return Rt.waitFor(N).next(()=>_.apply(f)).next(()=>t.localDocuments.getLocalViewOfDocuments(f,G,Q)).next(()=>G)}).then(f=>(t.Hi=c,f))}(t.localStore,e);e.targetChanges.forEach((c,f)=>{const _=t.gc.get(f);_&&(ir(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?_.lc=!0:c.modifiedDocuments.size>0?ir(_.lc):c.removedDocuments.size>0&&(ir(_.lc),_.lc=!1))}),yield zc(t,s,e)}catch(s){yield vr(s)}}),hm.apply(this,arguments)}function dy(r,e,t){const s=Fn(r);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const c=[];s.dc.forEach((f,_)=>{const N=_.view.ku(e);N.snapshot&&c.push(N.snapshot)}),function(f,_){const N=Fn(f);N.onlineState=_;let G=!1;N.queries.forEach((Q,ue)=>{for(const Xe of ue.listeners)Xe.ku(_)&&(G=!0)}),G&&Ui(N)}(s.eventManager,e),c.length&&s.fc.eu(c),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function iv(r,e,t){return fm.apply(this,arguments)}function fm(){return fm=(0,de.Z)(function*(r,e,t){const s=Fn(r);s.sharedClientState.updateQueryState(e,"rejected",t);const c=s.gc.get(e),f=c&&c.key;if(f){let _=new Tr(Pn.comparator);_=_.insert(f,_i.newNoDocument(f,rr.min()));const N=Qr().add(f),G=new au(rr.min(),new Map,new Tr(sr),_,N);yield uy(s,G),s.mc=s.mc.remove(f),s.gc.delete(e),vp(s)}else yield ju(s.localStore,e,!1).then(()=>xd(s,e,t)).catch(vr)}),fm.apply(this,arguments)}function E_(r,e){return hy.apply(this,arguments)}function hy(){return hy=(0,de.Z)(function*(r,e){const t=Fn(r),s=e.batch.batchId;try{const c=yield function ah(r,e){const t=Fn(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const c=e.batch.keys(),f=t.Xi.newChangeBuffer({trackRemovals:!0});return function(_,N,G,Q){const ue=G.batch,Xe=ue.keys();let Mt=Rt.resolve();return Xe.forEach(rn=>{Mt=Mt.next(()=>Q.getEntry(N,rn)).next(Sn=>{const Mn=G.docVersions.get(rn);ir(null!==Mn),Sn.version.compareTo(Mn)<0&&(ue.applyToRemoteDocument(Sn,G),Sn.isValidDocument()&&(Sn.setReadTime(G.commitVersion),Q.addEntry(Sn)))})}),Mt.next(()=>_.mutationQueue.removeMutationBatch(N,ue))}(t,s,e,f).next(()=>f.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,c,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(_){let N=Qr();for(let G=0;G<_.mutationResults.length;++G)_.mutationResults[G].transformResults.length>0&&(N=N.add(_.batch.mutations[G].key));return N}(e))).next(()=>t.localDocuments.getDocuments(s,c))})}(t.localStore,e);py(t,s,null),gg(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield zc(t,c)}catch(c){yield vr(c)}}),hy.apply(this,arguments)}function sv(r,e,t){return fy.apply(this,arguments)}function fy(){return fy=(0,de.Z)(function*(r,e,t){const s=Fn(r);try{const c=yield function(f,_){const N=Fn(f);return N.persistence.runTransaction("Reject batch","readwrite-primary",G=>{let Q;return N.mutationQueue.lookupMutationBatch(G,_).next(ue=>(ir(null!==ue),Q=ue.keys(),N.mutationQueue.removeMutationBatch(G,ue))).next(()=>N.mutationQueue.performConsistencyCheck(G)).next(()=>N.documentOverlayCache.removeOverlaysForBatchId(G,Q,_)).next(()=>N.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(G,Q)).next(()=>N.localDocuments.getDocuments(G,Q))})}(s.localStore,e);py(s,e,t),gg(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield zc(s,c)}catch(c){yield vr(c)}}),fy.apply(this,arguments)}function pg(){return pg=(0,de.Z)(function*(r,e){const t=Fn(r);Hc(t.remoteStore)||hn("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(f){const _=Fn(f);return _.persistence.runTransaction("Get highest unacknowledged batch id","readonly",N=>_.mutationQueue.getHighestUnacknowledgedBatchId(N))}(t.localStore);if(-1===s)return void e.resolve();const c=t.Tc.get(s)||[];c.push(e),t.Tc.set(s,c)}catch(s){const c=te(s,"Initialization of waitForPendingWrites() operation failed");e.reject(c)}}),pg.apply(this,arguments)}function gg(r,e){(r.Tc.get(e)||[]).forEach(t=>{t.resolve()}),r.Tc.delete(e)}function py(r,e,t){const s=Fn(r);let c=s.Ic[s.currentUser.toKey()];if(c){const f=c.get(e);f&&(t?f.reject(t):f.resolve(),c=c.remove(e)),s.Ic[s.currentUser.toKey()]=c}}function xd(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r._c.get(e))r.dc.delete(s),t&&r.fc.vc(s,t);r._c.delete(e),r.isPrimaryClient&&r.yc.ps(e).forEach(s=>{r.yc.containsKey(s)||mg(r,s)})}function mg(r,e){r.wc.delete(e.path.canonicalString());const t=r.mc.get(e);null!==t&&(cp(r.remoteStore,t),r.mc=r.mc.remove(e),r.gc.delete(t),vp(r))}function yg(r,e,t){for(const s of t)s instanceof gh?(r.yc.addReference(s.key,e),w_(r,s)):s instanceof mf?(hn("SyncEngine","Document no longer in limbo: "+s.key),r.yc.removeReference(s.key,e),r.yc.containsKey(s.key)||mg(r,s.key)):Hn()}function w_(r,e){const t=e.key,s=t.path.canonicalString();r.mc.get(t)||r.wc.has(s)||(hn("SyncEngine","New document in limbo: "+t),r.wc.add(s),vp(r))}function vp(r){for(;r.wc.size>0&&r.mc.size<r.maxConcurrentLimboResolutions;){const e=r.wc.values().next().value;r.wc.delete(e);const t=new Pn(vi.fromString(e)),s=r.Ec.next();r.gc.set(s,new gp(t)),r.mc=r.mc.insert(t,s),Td(r.remoteStore,new Vc(No(Oa(t.path)),s,"TargetPurposeLimboResolution",z.ct))}}function zc(r,e,t){return vg.apply(this,arguments)}function vg(){return vg=(0,de.Z)(function*(r,e,t){const s=Fn(r),c=[],f=[],_=[];var N;s.dc.isEmpty()||(s.dc.forEach((N,G)=>{_.push(s.Rc(G,e,t).then(Q=>{if((Q||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(G.targetId,null!=Q&&Q.fromCache?"not-current":"current"),Q){c.push(Q);const ue=np.Bi(G.targetId,Q);f.push(ue)}}))}),yield Promise.all(_),s.fc.eu(c),yield(N=(0,de.Z)(function*(G,Q){const ue=Fn(G);try{yield ue.persistence.runTransaction("notifyLocalViewChanges","readwrite",Xe=>Rt.forEach(Q,Mt=>Rt.forEach(Mt.$i,rn=>ue.persistence.referenceDelegate.addReference(Xe,Mt.targetId,rn)).next(()=>Rt.forEach(Mt.Fi,rn=>ue.persistence.referenceDelegate.removeReference(Xe,Mt.targetId,rn)))))}catch(Xe){if(!Mo(Xe))throw Xe;hn("LocalStore","Failed to update sequence numbers: "+Xe)}for(const Xe of Q){const Mt=Xe.targetId;if(!Xe.fromCache){const rn=ue.Hi.get(Mt),Mn=rn.withLastLimboFreeSnapshotVersion(rn.snapshotVersion);ue.Hi=ue.Hi.insert(Mt,Mn)}}}),function(G,Q){return N.apply(this,arguments)})(s.localStore,f))}),vg.apply(this,arguments)}function ov(r,e){return _g.apply(this,arguments)}function _g(){return _g=(0,de.Z)(function*(r,e){const t=Fn(r);if(!t.currentUser.isEqual(e)){hn("SyncEngine","User change. New user:",e.toKey());const s=yield Jg(t.localStore,e);t.currentUser=e,(c=t).Tc.forEach(_=>{_.forEach(N=>{N.reject(new sn(Lt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),c.Tc.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield zc(t,s.tr)}var c}),_g.apply(this,arguments)}function av(r,e){const t=Fn(r),s=t.gc.get(e);if(s&&s.lc)return Qr().add(s.key);{let c=Qr();const f=t._c.get(e);if(!f)return c;for(const _ of f){const N=t.dc.get(_);c=c.unionWith(N.view.ec)}return c}}function lv(r,e){return Eg.apply(this,arguments)}function Eg(){return Eg=(0,de.Z)(function*(r,e){const t=Fn(r),s=yield lh(t.localStore,e.query,!0),c=e.view.ac(s);return t.isPrimaryClient&&yg(t,e.targetId,c.uc),c}),Eg.apply(this,arguments)}function cv(r,e){return gy.apply(this,arguments)}function gy(){return gy=(0,de.Z)(function*(r,e){const t=Fn(r);return ml(t.localStore,e).then(s=>zc(t,s))}),gy.apply(this,arguments)}function uv(r,e,t,s){return pm.apply(this,arguments)}function pm(){return pm=(0,de.Z)(function*(r,e,t,s){const c=Fn(r),f=yield function(_,N){const G=Fn(_),Q=Fn(G.mutationQueue);return G.persistence.runTransaction("Lookup mutation documents","readonly",ue=>Q.Vn(ue,N).next(Xe=>Xe?G.localDocuments.getDocuments(ue,Xe):Rt.resolve(null)))}(c.localStore,e);var N;null!==f?("pending"===t?yield fh(c.remoteStore):"acknowledged"===t||"rejected"===t?(py(c,e,s||null),gg(c,e),N=e,Fn(Fn(c.localStore).mutationQueue).Dn(N)):Hn(),yield zc(c,f)):hn("SyncEngine","Cannot apply mutation batch with id: "+e)}),pm.apply(this,arguments)}function gm(){return gm=(0,de.Z)(function*(r,e){const t=Fn(r);if(_m(t),Em(t),!0===e&&!0!==t.Ac){const s=t.sharedClientState.getAllActiveQueryTargets(),c=yield hv(t,s.toArray());t.Ac=!0,yield l(t.remoteStore,!0);for(const f of c)Td(t.remoteStore,f)}else if(!1===e&&!1!==t.Ac){const s=[];let c=Promise.resolve();t._c.forEach((f,_)=>{t.sharedClientState.isLocalQueryTarget(_)?s.push(_):c=c.then(()=>(xd(t,_),ju(t.localStore,_,!0))),cp(t.remoteStore,_)}),yield c,yield hv(t,s),function(f){const _=Fn(f);_.gc.forEach((N,G)=>{cp(_.remoteStore,G)}),_.yc.Is(),_.gc=new Map,_.mc=new Tr(Pn.comparator)}(t),t.Ac=!1,yield l(t.remoteStore,!1)}}),gm.apply(this,arguments)}function hv(r,e,t){return mm.apply(this,arguments)}function mm(){return mm=(0,de.Z)(function*(r,e,t){const s=Fn(r),c=[],f=[];for(const _ of e){let N;const G=s._c.get(_);if(G&&0!==G.length){N=yield bd(s.localStore,No(G[0]));for(const Q of G){const ue=s.dc.get(Q),Xe=yield lv(s,ue);Xe.snapshot&&f.push(Xe.snapshot)}}else{const Q=yield ng(s.localStore,_);N=yield bd(s.localStore,Q),yield yh(s,my(Q),_,!1,N.resumeToken)}c.push(N)}return s.fc.eu(f),c}),mm.apply(this,arguments)}function my(r){return Ph(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function yy(r){const e=Fn(r);return Fn(Fn(e.localStore).persistence).Mi()}function vy(r,e,t,s){return ym.apply(this,arguments)}function ym(){return ym=(0,de.Z)(function*(r,e,t,s){const c=Fn(r);if(c.Ac)return void hn("SyncEngine","Ignoring unexpected query state notification.");const f=c._c.get(e);if(f&&f.length>0)switch(t){case"current":case"not-current":{const _=yield ml(c.localStore,ru(f[0])),N=au.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Ys.EMPTY_BYTE_STRING);yield zc(c,_,N);break}case"rejected":yield ju(c.localStore,e,!0),xd(c,e,s);break;default:Hn()}}),ym.apply(this,arguments)}function fv(r,e,t){return vm.apply(this,arguments)}function vm(){return vm=(0,de.Z)(function*(r,e,t){const s=_m(r);if(s.Ac){for(const c of e){if(s._c.has(c)){hn("SyncEngine","Adding an already active target "+c);continue}const f=yield ng(s.localStore,c),_=yield bd(s.localStore,f);yield yh(s,my(f),_.targetId,!1,_.resumeToken),Td(s.remoteStore,_)}for(const c of t)s._c.has(c)&&(yield ju(s.localStore,c,!1).then(()=>{cp(s.remoteStore,c),xd(s,c)}).catch(vr))}}),vm.apply(this,arguments)}function _m(r){const e=Fn(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=uy.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=av.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iv.bind(null,e),e.fc.eu=ho.bind(null,e.eventManager),e.fc.vc=Ko.bind(null,e.eventManager),e}function Em(r){const e=Fn(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=E_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sv.bind(null,e),e}class _p{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,de.Z)(function*(){t.serializer=cf(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Qg(this.persistence,new Zg,e.initialUser,this.serializer)}createPersistence(e){return new ep(Xh.js,this.serializer)}createSharedClientState(e){return new rm}terminate(){var e=this;return(0,de.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Ep extends _p{constructor(e,t,s){super(),this.bc=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,de.Z)(function*(){yield t().call(s,e),yield s.bc.initialize(s,e),yield Em(s.bc.syncEngine),yield fh(s.bc.remoteStore),yield s.persistence.pi(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Qg(this.persistence,new Zg,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new qh(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const s=new k(t,this.persistence);return new w(e.asyncQueue,s)}createPersistence(e){const t=Vu(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?Fa.withCacheSize(this.cacheSizeBytes):Fa.DEFAULT;return new Jh(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,ry(),lg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new rm}}class Rd extends Ep{constructor(e,t){super(e,t,!1),this.bc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,de.Z)(function*(){yield t().call(s,e);const c=s.bc.syncEngine;s.sharedClientState instanceof af&&(s.sharedClientState.syncEngine={Qr:uv.bind(null,c),jr:vy.bind(null,c),zr:fv.bind(null,c),Mi:yy.bind(null,c),Gr:cv.bind(null,c)},yield s.sharedClientState.start()),yield s.persistence.pi(function(){var f=(0,de.Z)(function*(_){yield function dv(r,e){return gm.apply(this,arguments)}(s.bc.syncEngine,_),s.gcScheduler&&(_&&!s.gcScheduler.started?s.gcScheduler.start():_||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(_&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():_||s.indexBackfillerScheduler.stop())});return function(_){return f.apply(this,arguments)}}())})()}createSharedClientState(e){const t=ry();if(!af.D(t))throw new sn(Lt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Vu(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new af(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class Ip{initialize(e,t){var s=this;return(0,de.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=c=>dy(s.syncEngine,c,1),s.remoteStore.remoteSyncer.handleCredentialChange=ov.bind(null,s.syncEngine),yield l(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Yt}createDatastore(e){const t=cf(e.databaseInfo.databaseId),s=new ny(e.databaseInfo);return new om(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,c=e.asyncQueue,f=N=>dy(this.syncEngine,N,0),_=im.D()?new im:new ey,new Wo(t,s,c,f,_);var t,s,c,f,_}createSyncEngine(e,t){return function(s,c,f,_,N,G,Q){const ue=new mp(s,c,f,_,N,G);return Q&&(ue.Ac=!0),ue}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,de.Z)(function*(t){const s=Fn(t);hn("RemoteStore","RemoteStore shutting down."),s.Au.add(5),yield hu(s),s.vu.shutdown(),s.Pu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function mv(r,e=10240){let t=0;return{read:()=>(0,de.Z)(function*(){if(t<r.byteLength){const s={value:r.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,de.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class wp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Vc(this.observer.next,e)}error(e){this.observer.error?this.Vc(this.observer.error,e):ss("Uncaught Error in snapshot listener:",e.toString())}Sc(){this.muted=!0}Vc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class vf{constructor(e,t){this.Dc=e,this.serializer=t,this.metadata=new ui,this.buffer=new Uint8Array,this.Cc=new TextDecoder("utf-8"),this.xc().then(s=>{s&&s.Gu()?this.metadata.resolve(s.Ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.Ku)}`))},s=>this.metadata.reject(s))}close(){return this.Dc.cancel()}getMetadata(){var e=this;return(0,de.Z)(function*(){return e.metadata.promise})()}Pc(){var e=this;return(0,de.Z)(function*(){return yield e.getMetadata(),e.xc()})()}xc(){var e=this;return(0,de.Z)(function*(){const t=yield e.Nc();if(null===t)return null;const s=e.Cc.decode(t),c=Number(s);isNaN(c)&&e.kc(`length string (${s}) is not valid number`);const f=yield e.Mc(c);return new bo(JSON.parse(f),t.length+c)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Nc(){var e=this;return(0,de.Z)(function*(){for(;e.Oc()<0&&!(yield e.$c()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.kc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}Mc(e){var t=this;return(0,de.Z)(function*(){for(;t.buffer.length<e;)(yield t.$c())&&t.kc("Reached the end of bundle when more is expected.");const s=t.Cc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}kc(e){throw this.Dc.cancel(),new Error(`Invalid bundle format: ${e}`)}$c(){var e=this;return(0,de.Z)(function*(){const t=yield e.Dc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class _y{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,de.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new sn(Lt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(c=(0,de.Z)(function*(f,_){const N=Fn(f),G=md(N.serializer)+"/documents",Q={documents:_.map(rn=>$f(N.serializer,rn))},ue=yield N.Ao("BatchGetDocuments",G,Q,_.length),Xe=new Map;ue.forEach(rn=>{const Sn=function Bh(r,e){return"found"in e?function(t,s){ir(!!s.found);const c=fl(t,s.found.name),f=Ss(s.found.updateTime),_=s.found.createTime?Ss(s.found.createTime):rr.min(),N=new Zs({mapValue:{fields:s.found.fields}});return _i.newFoundDocument(c,f,_,N)}(r,e):"missing"in e?function(t,s){ir(!!s.missing),ir(!!s.readTime);const c=fl(t,s.missing),f=Ss(s.readTime);return _i.newNoDocument(c,f)}(r,e):Hn()}(N.serializer,rn);Xe.set(Sn.key.toString(),Sn)});const Mt=[];return _.forEach(rn=>{const Sn=Xe.get(rn.toString());ir(!!Sn),Mt.push(Sn)}),Mt}),function(f,_){return c.apply(this,arguments)})(t.datastore,e);var c;return s.forEach(c=>t.recordVersion(c)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new C(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,de.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,c)=>{const f=Pn.fromPath(c);e.mutations.push(new g(f,e.precondition(f)))}),yield(s=(0,de.Z)(function*(c,f){const _=Fn(c),N=md(_.serializer)+"/documents",G={writes:f.map(Q=>yd(_.serializer,Q))};yield _.po("Commit",N,G)}),function(c,f){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Hn();t=rr.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new sn(Lt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(rr.min())?ms.exists(!1):ms.updateTime(t):ms.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(rr.min()))throw new sn(Lt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ms.updateTime(t)}return ms.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class C_{constructor(e,t,s,c,f){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=c,this.deferred=f,this.Fc=s.maxAttempts,this.Lo=new ic(this.asyncQueue,"transaction_retry")}run(){this.Fc-=1,this.Bc()}Bc(){var e=this;this.Lo.xo((0,de.Z)(function*(){const t=new _y(e.datastore),s=e.Lc(t);s&&s.then(c=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(c)}).catch(f=>{e.qc(f)}))}).catch(c=>{e.qc(c)})}))}Lc(e){try{const t=this.updateFunction(e);return!ie(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}qc(e){this.Fc>0&&this.Uc(e)?(this.Fc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Bc(),Promise.resolve()))):this.deferred.reject(e)}Uc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!kn(t)}return!1}}class Ey{constructor(e,t,s,c){var f=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=c,this.user=Wi.UNAUTHENTICATED,this.clientId=al.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var _=(0,de.Z)(function*(N){hn("FirestoreClient","Received user=",N.uid),yield f.authCredentialListener(N),f.user=N});return function(N){return _.apply(this,arguments)}}()),this.appCheckCredentials.start(s,_=>(hn("FirestoreClient","Received new app check token=",_),this.appCheckCredentialListener(_,this.user)))}getConfiguration(){var e=this;return(0,de.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new sn(Lt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,de.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const c=te(s,"Failed to shutdown persistence");t.reject(c)}})),t.promise}}function Iy(r,e){return yv.apply(this,arguments)}function yv(){return yv=(0,de.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress(),hn("FirestoreClient","Initializing OfflineComponentProvider");const t=yield r.getConfiguration();yield e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(function(){var c=(0,de.Z)(function*(f){s.isEqual(f)||(yield Jg(e.localStore,f),s=f)});return function(f){return c.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}),yv.apply(this,arguments)}function wy(r,e){return Cy.apply(this,arguments)}function Cy(){return Cy=(0,de.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress();const t=yield Dy(r);hn("FirestoreClient","Initializing OnlineComponentProvider");const s=yield r.getConfiguration();yield e.initialize(t,s),r.setCredentialChangeListener(c=>u(e.remoteStore,c)),r.setAppCheckTokenChangeListener((c,f)=>u(e.remoteStore,f)),r._onlineComponents=e}),Cy.apply(this,arguments)}function by(r){return"FirebaseError"===r.name?r.code===Lt.FAILED_PRECONDITION||r.code===Lt.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||22===r.code||20===r.code||11===r.code}function Dy(r){return qo.apply(this,arguments)}function qo(){return qo=(0,de.Z)(function*(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){hn("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Iy(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!by(t))throw t;ci("Error using user provided cache. Falling back to memory cache: "+t),yield Iy(r,new _p)}}else hn("FirestoreClient","Using default OfflineComponentProvider"),yield Iy(r,new _p);return r._offlineComponents}),qo.apply(this,arguments)}function Ig(r){return Ty.apply(this,arguments)}function Ty(){return Ty=(0,de.Z)(function*(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(hn("FirestoreClient","Using user provided OnlineComponentProvider"),yield wy(r,r._uninitializedComponentsProvider._online)):(hn("FirestoreClient","Using default OnlineComponentProvider"),yield wy(r,new Ip))),r._onlineComponents}),Ty.apply(this,arguments)}function vv(r){return Dy(r).then(e=>e.persistence)}function wg(r){return Dy(r).then(e=>e.localStore)}function _v(r){return Ig(r).then(e=>e.remoteStore)}function Im(r){return Ig(r).then(e=>e.syncEngine)}function fu(r){return Ay.apply(this,arguments)}function Ay(){return Ay=(0,de.Z)(function*(r){const e=yield Ig(r),t=e.eventManager;return t.onListen=yp.bind(null,e.syncEngine),t.onUnlisten=nv.bind(null,e.syncEngine),t}),Ay.apply(this,arguments)}function xy(r,e,t={}){const s=new ui;return r.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return function(c,f,_,N,G){const Q=new wp({next:Xe=>{f.enqueueAndForget(()=>Kr(c,ue));const Mt=Xe.docs.has(_);!Mt&&Xe.fromCache?G.reject(new sn(Lt.UNAVAILABLE,"Failed to get document because the client is offline.")):Mt&&Xe.fromCache&&N&&"server"===N.source?G.reject(new sn(Lt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):G.resolve(Xe)},error:Xe=>G.reject(Xe)}),ue=new ks(Oa(_.path),Q,{includeMetadataChanges:!0,Uu:!0});return Dn(c,ue)}(yield fu(r),r.asyncQueue,e,t,s)})),s.promise}function Ry(r,e,t={}){const s=new ui;return r.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return function(c,f,_,N,G){const Q=new wp({next:Xe=>{f.enqueueAndForget(()=>Kr(c,ue)),Xe.fromCache&&"server"===N.source?G.reject(new sn(Lt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):G.resolve(Xe)},error:Xe=>G.reject(Xe)}),ue=new ks(_,Q,{includeMetadataChanges:!0,Uu:!0});return Dn(c,ue)}(yield fu(r),r.asyncQueue,e,t,s)})),s.promise}const pu=new Map;function Sc(r,e,t){if(!t)throw new sn(Lt.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Gc(r,e,t,s){if(!0===e&&!0===s)throw new sn(Lt.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Py(r){if(!Pn.isDocumentKey(r))throw new sn(Lt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Oy(r){if(Pn.isDocumentKey(r))throw new sn(Lt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function wm(r){if(void 0===r)return"undefined";if(null===r)return"null";if("string"==typeof r)return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if("number"==typeof r||"boolean"==typeof r)return""+r;if("object"==typeof r){if(r instanceof Array)return"an array";{const e=(t=r).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof r?"a function":Hn()}function Vi(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new sn(Lt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=wm(r);throw new sn(Lt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function Iv(r,e){if(e<=0)throw new sn(Lt.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}class wv{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new sn(Lt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new sn(Lt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Gc("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!this.experimentalForceLongPolling&&void 0!==e.experimentalAutoDetectLongPolling&&!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _f{constructor(e,t,s,c){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wv({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new sn(Lt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new sn(Lt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wv(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new xc;switch(t.type){case"firstParty":return new mu(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new sn(Lt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=pu.get(e);t&&(hn("ComponentProvider","Removing Datastore"),pu.delete(e),t.terminate())}(this),Promise.resolve()}}class Js{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Js(this.firestore,e,this._key)}}class $a{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new $a(this.firestore,e,this._query)}}class Gu extends $a{constructor(e,t,s){super(e,t,Oa(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Js(this.firestore,null,new Pn(e))}withConverter(e){return new Gu(this.firestore,e,this._path)}}function ky(r,e,...t){if(r=(0,Ze.m9)(r),Sc("collection","path",e),r instanceof _f){const s=vi.fromString(e,...t);return Oy(s),new Gu(r,null,s)}{if(!(r instanceof Js||r instanceof Gu))throw new sn(Lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(vi.fromString(e,...t));return Oy(s),new Gu(r.firestore,null,s)}}function Ef(r,e,...t){if(r=(0,Ze.m9)(r),1===arguments.length&&(e=al.A()),Sc("doc","path",e),r instanceof _f){const s=vi.fromString(e,...t);return Py(s),new Js(r,null,new Pn(s))}{if(!(r instanceof Js||r instanceof Gu))throw new sn(Lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(vi.fromString(e,...t));return Py(s),new Js(r.firestore,r instanceof Gu?r.converter:null,new Pn(s))}}function bv(r,e){return r=(0,Ze.m9)(r),e=(0,Ze.m9)(e),(r instanceof Js||r instanceof Gu)&&(e instanceof Js||e instanceof Gu)&&r.firestore===e.firestore&&r.path===e.path&&r.converter===e.converter}function Cm(r,e){return r=(0,Ze.m9)(r),e=(0,Ze.m9)(e),r instanceof $a&&e instanceof $a&&r.firestore===e.firestore&&yc(r._query,e._query)&&r.converter===e.converter}class Dv{constructor(){this.Kc=Promise.resolve(),this.Gc=[],this.Qc=!1,this.jc=[],this.zc=null,this.Wc=!1,this.Hc=!1,this.Jc=[],this.Lo=new ic(this,"async_queue_retry"),this.Yc=()=>{const t=lg();t&&hn("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Lo.ko()};const e=lg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Yc)}get isShuttingDown(){return this.Qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Xc(),this.Zc(e)}enterRestrictedMode(e){if(!this.Qc){this.Qc=!0,this.Hc=e||!1;const t=lg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Yc)}}enqueue(e){if(this.Xc(),this.Qc)return new Promise(()=>{});const t=new ui;return this.Zc(()=>this.Qc&&this.Hc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Gc.push(e),this.ta()))}ta(){var e=this;return(0,de.Z)(function*(){if(0!==e.Gc.length){try{yield e.Gc[0](),e.Gc.shift(),e.Lo.reset()}catch(t){if(!Mo(t))throw t;hn("AsyncQueue","Operation failed with retryable error: "+t)}e.Gc.length>0&&e.Lo.xo(()=>e.ta())}})()}Zc(e){const t=this.Kc.then(()=>(this.Wc=!0,e().catch(s=>{throw this.zc=s,this.Wc=!1,ss("INTERNAL UNHANDLED ERROR: ",function(f){let _=f.message||"";return f.stack&&(_=f.stack.includes(f.message)?f.stack:f.message+"\n"+f.stack),_}(s)),s}).then(s=>(this.Wc=!1,s))));return this.Kc=t,t}enqueueAfterDelay(e,t,s){this.Xc(),this.Jc.indexOf(e)>-1&&(t=0);const c=V.createAndSchedule(this,e,t,s,f=>this.ea(f));return this.jc.push(c),c}Xc(){this.zc&&Hn()}verifyOperationInProgress(){}na(){var e=this;return(0,de.Z)(function*(){let t;do{t=e.Kc,yield t}while(t!==e.Kc)})()}sa(e){for(const t of this.jc)if(t.timerId===e)return!0;return!1}ia(e){return this.na().then(()=>{this.jc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.jc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.na()})}ra(e){this.Jc.push(e)}ea(e){const t=this.jc.indexOf(e);this.jc.splice(t,1)}}function Cg(r){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const c of["next","error","complete"])if(c in s&&"function"==typeof s[c])return!0;return!1}(r)}class bm{constructor(){this._progressObserver={},this._taskCompletionResolver=new ui,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Us extends _f{constructor(e,t,s,c){super(e,t,s,c),this.type="firestore",this._queue=new Dv,this._persistenceKey=(null==c?void 0:c.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Ny(this),this._firestoreClient.terminate()}}function Fo(r){return r._firestoreClient||Ny(r),r._firestoreClient.verifyNotTerminated(),r._firestoreClient}function Ny(r){var e,t,s;const c=r._freezeSettings(),f=(N=(null===(e=r._app)||void 0===e?void 0:e.options.appId)||"",new Ps(r._databaseId,N,r._persistenceKey,(Q=c).host,Q.ssl,Q.experimentalForceLongPolling,Q.experimentalAutoDetectLongPolling,Q.useFetchStreams));var N,Q;r._firestoreClient=new Ey(r._authCredentials,r._appCheckCredentials,r._queue,f),null!==(t=c.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(s=c.cache)&&void 0!==s&&s._onlineComponentProvider&&(r._firestoreClient._uninitializedComponentsProvider={_offlineKind:c.cache.kind,_offline:c.cache._offlineComponentProvider,_online:c.cache._onlineComponentProvider})}function xv(r,e,t){const s=new ui;return r.asyncQueue.enqueue((0,de.Z)(function*(){try{yield Iy(r,t),yield wy(r,e),s.resolve()}catch(c){const f=c;if(!by(f))throw f;ci("Error enabling indexeddb cache. Falling back to memory cache: "+f),s.reject(f)}})).then(()=>s.promise)}function Rv(r){if(r._initialized||r._terminated)throw new sn(Lt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Wu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wu(Ys.fromBase64String(e))}catch(t){throw new sn(Lt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Wu(Ys.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Md{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new sn(Lt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class If{constructor(e){this._methodName=e}}class Dm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new sn(Lt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new sn(Lt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return sr(this._lat,e._lat)||sr(this._long,e._long)}}const L_=/^__.*__$/;class B_{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new nl(e,this.data,this.fieldMask,t,this.fieldTransforms):new ca(e,this.data,t,this.fieldTransforms)}}class Fy{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new nl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ly(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Hn()}}class Dg{constructor(e,t,s,c,f,_){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=c,void 0===f&&this.oa(),this.fieldTransforms=f||[],this.fieldMask=_||[]}get path(){return this.settings.path}get ua(){return this.settings.ua}ca(e){return new Dg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}aa(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),c=this.ca({path:s,ha:!1});return c.la(e),c}fa(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),c=this.ca({path:s,ha:!1});return c.oa(),c}da(e){return this.ca({path:void 0,ha:!0})}_a(e){return xm(e,this.settings.methodName,this.settings.wa||!1,this.path,this.settings.ma)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}oa(){if(this.path)for(let e=0;e<this.path.length;e++)this.la(this.path.get(e))}la(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Ly(this.ua)&&L_.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Mv{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||cf(e)}ga(e,t,s,c=!1){return new Dg({ua:e,methodName:t,ma:s,path:Mr.emptyPath(),ha:!1,wa:c},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _h(r){const e=r._freezeSettings(),t=cf(r._databaseId);return new Mv(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Tg(r,e,t,s,c,f={}){const _=r.ga(f.merge||f.mergeFields?2:0,e,t,c);Am("Data must be an object, but it was:",_,s);const N=Sm(s,_);let G,Q;if(f.merge)G=new gs(_.fieldMask),Q=_.fieldTransforms;else if(f.mergeFields){const ue=[];for(const Xe of f.mergeFields){const Mt=Tp(e,Xe,t);if(!_.contains(Mt))throw new sn(Lt.INVALID_ARGUMENT,`Field '${Mt}' is specified in your field mask but missing from your input data.`);kv(ue,Mt)||ue.push(Mt)}G=new gs(ue),Q=_.fieldTransforms.filter(Xe=>G.covers(Xe.field))}else G=null,Q=_.fieldTransforms;return new B_(new Zs(N),G,Q)}class bp extends If{_toFieldTransform(e){if(2!==e.ua)throw e._a(1===e.ua?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bp}}function By(r,e,t){return new Dg({ua:3,ma:e.settings.ma,methodName:r._methodName,ha:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Tm extends If{_toFieldTransform(e){return new Gd(e.path,new Ic)}isEqual(e){return e instanceof Tm}}class Pv extends If{constructor(e,t){super(e),this.ya=t}_toFieldTransform(e){const t=By(this,e,!0),s=this.ya.map(f=>Dp(f,t)),c=new su(s);return new Gd(e.path,c)}isEqual(e){return this===e}}class Ov extends If{constructor(e,t){super(e),this.ya=t}_toFieldTransform(e){const t=By(this,e,!0),s=this.ya.map(f=>Dp(f,t)),c=new wc(s);return new Gd(e.path,c)}isEqual(e){return this===e}}class wf extends If{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=new ka(e.serializer,la(e.serializer,this.pa));return new Gd(e.path,t)}isEqual(e){return this===e}}function $y(r,e,t,s){const c=r.ga(1,e,t);Am("Data must be an object, but it was:",c,s);const f=[],_=Zs.empty();Ma(s,(G,Q)=>{const ue=kr(e,G,t);Q=(0,Ze.m9)(Q);const Xe=c.fa(ue);if(Q instanceof bp)f.push(ue);else{const Mt=Dp(Q,Xe);null!=Mt&&(f.push(ue),_.set(ue,Mt))}});const N=new gs(f);return new Fy(_,N,c.fieldTransforms)}function Uy(r,e,t,s,c,f){const _=r.ga(1,e,t),N=[Tp(e,s,t)],G=[c];if(f.length%2!=0)throw new sn(Lt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Mt=0;Mt<f.length;Mt+=2)N.push(Tp(e,f[Mt])),G.push(f[Mt+1]);const Q=[],ue=Zs.empty();for(let Mt=N.length-1;Mt>=0;--Mt)if(!kv(Q,N[Mt])){const rn=N[Mt];let Sn=G[Mt];Sn=(0,Ze.m9)(Sn);const Mn=_.fa(rn);if(Sn instanceof bp)Q.push(rn);else{const ur=Dp(Sn,Mn);null!=ur&&(Q.push(rn),ue.set(rn,ur))}}const Xe=new gs(Q);return new Fy(ue,Xe,_.fieldTransforms)}function Cf(r,e,t,s=!1){return Dp(t,r.ga(s?4:3,e))}function Dp(r,e){if($_(r=(0,Ze.m9)(r)))return Am("Unsupported field value:",e,r),Sm(r,e);if(r instanceof If)return function(t,s){if(!Ly(s.ua))throw s._a(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s._a(`${t._methodName}() is not currently supported inside arrays`);const c=t._toFieldTransform(s);c&&s.fieldTransforms.push(c)}(r,e),null;if(void 0===r&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.ha&&4!==e.ua)throw e._a("Nested arrays are not supported");return function(t,s){const c=[];let f=0;for(const _ of t){let N=Dp(_,s.da(f));null==N&&(N={nullValue:"NULL_VALUE"}),c.push(N),f++}return{arrayValue:{values:c}}}(r,e)}return function(t,s){if(null===(t=(0,Ze.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return la(s.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const c=oi.fromDate(t);return{timestampValue:cu(s.serializer,c)}}if(t instanceof oi){const c=new oi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:cu(s.serializer,c)}}if(t instanceof Dm)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Wu)return{bytesValue:Ff(s.serializer,t._byteString)};if(t instanceof Js){const c=s.databaseId,f=t.firestore._databaseId;if(!f.isEqual(c))throw s._a(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Lf(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s._a(`Unsupported field value: ${wm(t)}`)}(r,e)}function Sm(r,e){const t={};return Iu(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ma(r,(s,c)=>{const f=Dp(c,e.aa(s));null!=f&&(t[s]=f)}),{mapValue:{fields:t}}}function $_(r){return!("object"!=typeof r||null===r||r instanceof Array||r instanceof Date||r instanceof oi||r instanceof Dm||r instanceof Wu||r instanceof Js||r instanceof If)}function Am(r,e,t){if(!$_(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=wm(t);throw e._a("an object"===s?r+" a custom object":r+" "+s)}var s}function Tp(r,e,t){if((e=(0,Ze.m9)(e))instanceof Md)return e._internalPath;if("string"==typeof e)return kr(r,e);throw xm("Field path arguments must be of type string or ",r,!1,void 0,t)}const tE=new RegExp("[~\\*/\\[\\]]");function kr(r,e,t){if(e.search(tE)>=0)throw xm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Md(...e.split("."))._internalPath}catch{throw xm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function xm(r,e,t,s,c){const f=s&&!s.isEmpty(),_=void 0!==c;let N=`Function ${e}() called with invalid data`;t&&(N+=" (via `toFirestore()`)"),N+=". ";let G="";return(f||_)&&(G+=" (found",f&&(G+=` in field ${s}`),_&&(G+=` in document ${c}`),G+=")"),new sn(Lt.INVALID_ARGUMENT,N+r+G)}function kv(r,e){return r.some(t=>t.isEqual(e))}class Sg{constructor(e,t,s,c,f){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=c,this._converter=f}get id(){return this._key.path.lastSegment()}get ref(){return new Js(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Sp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Rm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Sp extends Sg{data(){return super.data()}}function Rm(r,e){return"string"==typeof e?kr(r,e):e instanceof Md?e._internalPath:e._delegate._internalPath}function Ag(r){if("L"===r.limitType&&0===r.explicitOrderBy.length)throw new sn(Lt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ap{}class Vs extends Ap{}function bf(r,e,...t){let s=[];e instanceof Ap&&s.push(e),s=s.concat(t),function(c){const f=c.filter(N=>N instanceof Rp).length,_=c.filter(N=>N instanceof xp).length;if(f>1||f>0&&_>0)throw new sn(Lt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const c of s)r=c._apply(r);return r}class xp extends Vs{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new xp(e,t,s)}_apply(e){const t=this._parse(e);return Mp(e._query,t),new $a(e.firestore,e.converter,Su(e._query,t))}_parse(e){const t=_h(e.firestore);return function(c,f,_,N,G,Q,ue){let Xe;if(G.isKeyField()){if("array-contains"===Q||"array-contains-any"===Q)throw new sn(Lt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${Q}' queries on documentId().`);if("in"===Q||"not-in"===Q){Bv(ue,Q);const Mt=[];for(const rn of ue)Mt.push(jy(N,c,rn));Xe={arrayValue:{values:Mt}}}else Xe=jy(N,c,ue)}else"in"!==Q&&"not-in"!==Q&&"array-contains-any"!==Q||Bv(ue,Q),Xe=Cf(_,"where",ue,"in"===Q||"not-in"===Q);return hi.create(G,Q,Xe)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Rp extends Ap{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Rp(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:bi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,c){let f=s;const _=c.getFlattenedFilters();for(const N of _)Mp(f,N),f=Su(f,N)}(e._query,t),new $a(e.firestore,e.converter,Su(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Mm extends Vs{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Mm(e,t)}_apply(e){const t=function(s,c,f){if(null!==s.startAt)throw new sn(Lt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new sn(Lt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const _=new zo(c,f);return function(N,G){if(null===mc(N)){const Q=ed(N);null!==Q&&Pp(0,Q,G.field)}}(s,_),_}(e._query,this._field,this._direction);return new $a(e.firestore,e.converter,function(s,c){const f=s.explicitOrderBy.concat([c]);return new aa(s.path,s.collectionGroup,f,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class Pm extends Vs{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Pm(e,t,s)}_apply(e){return new $a(e.firestore,e.converter,tu(e._query,this._limit,this._limitType))}}class Eh extends Vs{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new Eh(e,t,s)}_apply(e){const t=Vy(e,this.type,this._docOrFields,this._inclusive);return new $a(e.firestore,e.converter,(c=t,new aa((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,c,s.endAt)));var s,c}}class Om extends Vs{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new Om(e,t,s)}_apply(e){const t=Vy(e,this.type,this._docOrFields,this._inclusive);return new $a(e.firestore,e.converter,(c=t,new aa((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,c)));var s,c}}function Vy(r,e,t,s){if(t[0]=(0,Ze.m9)(t[0]),t[0]instanceof Sg)return function(c,f,_,N,G){if(!N)throw new sn(Lt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${_}().`);const Q=[];for(const ue of kl(c))if(ue.field.isKeyField())Q.push(Ee(f,N.key));else{const Xe=N.data.field(ue.field);if(Mc(Xe))throw new sn(Lt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ue.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Xe){const Mt=ue.field.canonicalString();throw new sn(Lt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Mt}' (used as the orderBy) does not exist.`)}Q.push(Xe)}return new ko(Q,G)}(r._query,r.firestore._databaseId,e,t[0]._document,s);{const c=_h(r.firestore);return function(f,_,N,G,Q,ue){const Xe=f.explicitOrderBy;if(Q.length>Xe.length)throw new sn(Lt.INVALID_ARGUMENT,`Too many arguments provided to ${G}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Mt=[];for(let rn=0;rn<Q.length;rn++){const Sn=Q[rn];if(Xe[rn].field.isKeyField()){if("string"!=typeof Sn)throw new sn(Lt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${G}(), but got a ${typeof Sn}`);if(!jd(f)&&-1!==Sn.indexOf("/"))throw new sn(Lt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${G}() must be a plain document ID, but '${Sn}' contains a slash.`);const Mn=f.path.child(vi.fromString(Sn));if(!Pn.isDocumentKey(Mn))throw new sn(Lt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${G}() must result in a valid document path, but '${Mn}' is not because it contains an odd number of segments.`);const ur=new Pn(Mn);Mt.push(Ee(_,ur))}else{const Mn=Cf(N,G,Sn);Mt.push(Mn)}}return new ko(Mt,ue)}(r._query,r.firestore._databaseId,c,e,t,s)}}function jy(r,e,t){if("string"==typeof(t=(0,Ze.m9)(t))){if(""===t)throw new sn(Lt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jd(e)&&-1!==t.indexOf("/"))throw new sn(Lt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(vi.fromString(t));if(!Pn.isDocumentKey(s))throw new sn(Lt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Ee(r,new Pn(s))}if(t instanceof Js)return Ee(r,t._key);throw new sn(Lt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wm(t)}.`)}function Bv(r,e){if(!Array.isArray(r)||0===r.length)throw new sn(Lt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Mp(r,e){if(e.isInequality()){const s=ed(r),c=e.field;if(null!==s&&!s.isEqual(c))throw new sn(Lt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${c.toString()}'`);const f=mc(r);null!==f&&Pp(0,c,f)}const t=function(s,c){for(const f of s)for(const _ of f.getFlattenedFilters())if(c.indexOf(_.op)>=0)return _.op;return null}(r.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new sn(Lt.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Pp(r,e,t){if(!t.isEqual(e))throw new sn(Lt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Hy{convertValue(e,t="none"){switch(cl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Hr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($s(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Hn()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ma(e,(c,f)=>{s[c]=this.convertValue(f,t)}),s}convertGeoPoint(e){return new Dm(Hr(e.latitude),Hr(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=pc(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Xl(e));default:return null}}convertTimestamp(e){const t=Zl(e);return new oi(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=vi.fromString(e);ir(Jd(s));const c=new Ho(s.get(1),s.get(3)),f=new Pn(s.popFirst(5));return c.isEqual(t)||ss(`Document ${f} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),f}}function Nm(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class Uv extends Hy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Js(this.firestore,null,t)}}class Df{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ih extends Sg{constructor(e,t,s,c,f,_){super(e,t,s,c,_),this._firestore=e,this._firestoreImpl=e,this.metadata=f}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Fm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Rm("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Fm extends Ih{data(e={}){return super.data(e)}}class Tf{constructor(e,t,s,c){this._firestore=e,this._userDataWriter=t,this._snapshot=c,this.metadata=new Df(c.hasPendingWrites,c.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Fm(this._firestore,this._userDataWriter,s.key,s,new Df(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new sn(Lt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,c){if(s._snapshot.oldDocs.isEmpty()){let f=0;return s._snapshot.docChanges.map(_=>({type:"added",doc:new Fm(s._firestore,s._userDataWriter,_.doc.key,_.doc,new Df(s._snapshot.mutatedKeys.has(_.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:f++}))}{let f=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(_=>c||3!==_.type).map(_=>{const N=new Fm(s._firestore,s._userDataWriter,_.doc.key,_.doc,new Df(s._snapshot.mutatedKeys.has(_.doc.key),s._snapshot.fromCache),s.query.converter);let G=-1,Q=-1;return 0!==_.type&&(G=f.indexOf(_.doc.key),f=f.delete(_.doc.key)),1!==_.type&&(f=f.add(_.doc),Q=f.indexOf(_.doc.key)),{type:rE(_.type),doc:N,oldIndex:G,newIndex:Q}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function rE(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Hn()}}function zy(r,e){return r instanceof Ih&&e instanceof Ih?r._firestore===e._firestore&&r._key.isEqual(e._key)&&(null===r._document?null===e._document:r._document.isEqual(e._document))&&r._converter===e._converter:r instanceof Tf&&e instanceof Tf&&r._firestore===e._firestore&&Cm(r.query,e.query)&&r.metadata.isEqual(e.metadata)&&r._snapshot.isEqual(e._snapshot)}class wh extends Hy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Js(this.firestore,null,t)}}function jv(r,e,t){r=Vi(r,Js);const s=Vi(r.firestore,Us),c=Nm(r.converter,e,t);return Op(s,[Tg(_h(s),"setDoc",r._key,c,null!==r.converter,t).toMutation(r._key,ms.none())])}function Hv(r,e,t,...s){r=Vi(r,Js);const c=Vi(r.firestore,Us),f=_h(c);let _;return _="string"==typeof(e=(0,Ze.m9)(e))||e instanceof Md?Uy(f,"updateDoc",r._key,e,t,s):$y(f,"updateDoc",r._key,e),Op(c,[_.toMutation(r._key,ms.exists(!0))])}function Gy(r,...e){var t,s,c;r=(0,Ze.m9)(r);let f={includeMetadataChanges:!1},_=0;"object"!=typeof e[_]||Cg(e[_])||(f=e[_],_++);const N={includeMetadataChanges:f.includeMetadataChanges};if(Cg(e[_])){const Xe=e[_];e[_]=null===(t=Xe.next)||void 0===t?void 0:t.bind(Xe),e[_+1]=null===(s=Xe.error)||void 0===s?void 0:s.bind(Xe),e[_+2]=null===(c=Xe.complete)||void 0===c?void 0:c.bind(Xe)}let G,Q,ue;if(r instanceof Js)Q=Vi(r.firestore,Us),ue=Oa(r._key.path),G={next:Xe=>{e[_]&&e[_](Sf(Q,r,Xe))},error:e[_+1],complete:e[_+2]};else{const Xe=Vi(r,$a);Q=Vi(Xe.firestore,Us),ue=Xe._query;const Mt=new wh(Q);G={next:rn=>{e[_]&&e[_](new Tf(Q,Mt,Xe,rn))},error:e[_+1],complete:e[_+2]},Ag(r._query)}return function(Xe,Mt,rn,Sn){const Mn=new wp(Sn),ur=new ks(Mt,Mn,rn);return Xe.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return Dn(yield fu(Xe),ur)})),()=>{Mn.Sc(),Xe.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return Kr(yield fu(Xe),ur)}))}}(Fo(Q),ue,N,G)}function Op(r,e){return function(t,s){const c=new ui;return t.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return function rv(r,e,t){return dm.apply(this,arguments)}(yield Im(t),s,c)})),c.promise}(Fo(r),e)}function Sf(r,e,t){const s=t.docs.get(e._key),c=new wh(r);return new Ih(r,c,e._key,s,new Df(t.hasPendingWrites,t.fromCache),e.converter)}const Wy={maxAttempts:5};class Yv{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=_h(e)}set(e,t,s){this._verifyNotCommitted();const c=Pd(e,this._firestore),f=Nm(c.converter,t,s),_=Tg(this._dataReader,"WriteBatch.set",c._key,f,null!==c.converter,s);return this._mutations.push(_.toMutation(c._key,ms.none())),this}update(e,t,s,...c){this._verifyNotCommitted();const f=Pd(e,this._firestore);let _;return _="string"==typeof(t=(0,Ze.m9)(t))||t instanceof Md?Uy(this._dataReader,"WriteBatch.update",f._key,t,s,c):$y(this._dataReader,"WriteBatch.update",f._key,t),this._mutations.push(_.toMutation(f._key,ms.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Pd(e,this._firestore);return this._mutations=this._mutations.concat(new C(t._key,ms.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new sn(Lt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Pd(r,e){if((r=(0,Ze.m9)(r)).firestore!==e)throw new sn(Lt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class a0 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=_h(e)}get(e){const t=Pd(e,this._firestore),s=new Uv(this._firestore);return this._transaction.lookup([t._key]).then(c=>{if(!c||1!==c.length)return Hn();const f=c[0];if(f.isFoundDocument())return new Sg(this._firestore,s,f.key,f,t.converter);if(f.isNoDocument())return new Sg(this._firestore,s,t._key,null,t.converter);throw Hn()})}set(e,t,s){const c=Pd(e,this._firestore),f=Nm(c.converter,t,s),_=Tg(this._dataReader,"Transaction.set",c._key,f,null!==c.converter,s);return this._transaction.set(c._key,_),this}update(e,t,s,...c){const f=Pd(e,this._firestore);let _;return _="string"==typeof(t=(0,Ze.m9)(t))||t instanceof Md?Uy(this._dataReader,"Transaction.update",f._key,t,s,c):$y(this._dataReader,"Transaction.update",f._key,t),this._transaction.update(f._key,_),this}delete(e){const t=Pd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Pd(e,this._firestore),s=new wh(this._firestore);return super.get(e).then(c=>new Ih(this._firestore,s,t._key,c._document,new Df(!1,!1),t.converter))}}!function(r,e=!0){bl=pt.SDK_VERSION,(0,pt._registerComponent)(new Y.wA("firestore",(t,{instanceIdentifier:s,options:c})=>{const f=t.getProvider("app").getImmediate(),_=new Us(new Kl(t.getProvider("auth-internal")),new Ka(t.getProvider("app-check-internal")),function(N,G){if(!Object.prototype.hasOwnProperty.apply(N.options,["projectId"]))throw new sn(Lt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ho(N.options.projectId,G)}(f,s),f);return c=Object.assign({useFetchStreams:e},c),_._setSettings(c),_},"PUBLIC").setMultipleInstances(!0)),(0,pt.registerVersion)(Wc,"3.11.0",r),(0,pt.registerVersion)(Wc,"3.11.0","esm2017")}();function Bm(r,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new sn("invalid-argument",`Invalid options passed to function ${r}(): You cannot specify both "merge" and "mergeFields".`);return e}function Zv(){if(typeof Uint8Array>"u")throw new sn("unimplemented","Uint8Arrays are not available in this environment.")}function Xv(){if(!function Xr(){return typeof atob<"u"}())throw new sn("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Rg{constructor(e){this._delegate=e}static fromBase64String(e){return Xv(),new Rg(Wu.fromBase64String(e))}static fromUint8Array(e){return Zv(),new Rg(Wu.fromUint8Array(e))}toBase64(){return Xv(),this._delegate.toBase64()}toUint8Array(){return Zv(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Mg(r){return function qy(r,e){if("object"!=typeof r||null===r)return!1;const t=r;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(r,["next","error","complete"])}class Qv{enableIndexedDbPersistence(e,t){return function Sv(r,e){Rv(r=Vi(r,Us));const t=Fo(r);if(t._uninitializedComponentsProvider)throw new sn(Lt.FAILED_PRECONDITION,"SDK cache is already specified.");ci("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const s=r._freezeSettings(),c=new Ip;return xv(t,c,new Ep(c,s.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Av(r){Rv(r=Vi(r,Us));const e=Fo(r);if(e._uninitializedComponentsProvider)throw new sn(Lt.FAILED_PRECONDITION,"SDK cache is already specified.");ci("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings(),s=new Ip;return xv(e,s,new Rd(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function R_(r){if(r._initialized&&!r._terminated)throw new sn(Lt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ui;return r._queue.enqueueAndForgetEvenWhileRestricted((0,de.Z)(function*(){try{yield(t=(0,de.Z)(function*(s){if(!Es.D())return Promise.resolve();const c=s+"main";yield Es.delete(c)}),function(s){return t.apply(this,arguments)})(Vu(r._databaseId,r._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class $m{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ho||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ci("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function Cp(r,e,t,s={}){var c;const f=(r=Vi(r,_f))._getSettings();if("firestore.googleapis.com"!==f.host&&f.host!==e&&ci("Host has been set in both settings() and useEmulator(), emulator host will be used"),r._setSettings(Object.assign(Object.assign({},f),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let _,N;if("string"==typeof s.mockUserToken)_=s.mockUserToken,N=Wi.MOCK_USER;else{_=(0,Ze.Sg)(s.mockUserToken,null===(c=r._app)||void 0===c?void 0:c.options.projectId);const G=s.mockUserToken.sub||s.mockUserToken.user_id;if(!G)throw new sn(Lt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");N=new Wi(G)}r._authCredentials=new Dl(new Ro(_,N))}}(this._delegate,e,t,s)}enableNetwork(){return function P_(r){return function b_(r){return r.asyncQueue.enqueue((0,de.Z)(function*(){const e=yield vv(r),t=yield _v(r);return e.setNetworkEnabled(!0),function(s){const c=Fn(s);return c.Au.delete(0),wa(c)}(t)}))}(Fo(r=Vi(r,Us)))}(this._delegate)}disableNetwork(){return function O_(r){return function Ev(r){return r.asyncQueue.enqueue((0,de.Z)(function*(){const e=yield vv(r),t=yield _v(r);return e.setNetworkEnabled(!1),(s=(0,de.Z)(function*(c){const f=Fn(c);f.Au.add(0),yield hu(f),f.Pu.set("Offline")}),function(c){return s.apply(this,arguments)})(t);var s}))}(Fo(r=Vi(r,Us)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,Gc("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function M_(r){return function(e){const t=new ui;return e.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return function I_(r,e){return pg.apply(this,arguments)}(yield Im(e),t)})),t.promise}(Fo(r=Vi(r,Us)))}(this._delegate)}onSnapshotsInSync(e){return function e0(r,e){return function My(r,e){const t=new wp(e);return r.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return s=yield fu(r),c=t,Fn(s).Nu.add(c),void c.next();var s,c})),()=>{t.Sc(),r.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return s=yield fu(r),c=t,void Fn(s).Nu.delete(c);var s,c}))}}(Fo(r=Vi(r,Us)),Cg(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new sn("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new xf(this,ky(this._delegate,e))}catch(t){throw yl(t,"collection()","Firestore.collection()")}}doc(e){try{return new rl(this,Ef(this._delegate,e))}catch(t){throw yl(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new jl(this,function Cv(r,e){if(r=Vi(r,_f),Sc("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new sn(Lt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new $a(r,null,(t=e,new aa(vi.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw yl(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function l0(r,e,t){r=Vi(r,Us);const s=Object.assign(Object.assign({},Wy),t);return function(c){if(c.maxAttempts<1)throw new sn(Lt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(c,f,_){const N=new ui;return c.asyncQueue.enqueueAndForget((0,de.Z)(function*(){const G=yield function Sy(r){return Ig(r).then(e=>e.datastore)}(c);new C_(c.asyncQueue,G,_,f,N).run()})),N.promise}(Fo(r),c=>e(new a0(r,c)),s)}(this._delegate,t=>e(new Vm(this,t)))}batch(){return Fo(this._delegate),new Jv(new Yv(this._delegate,e=>Op(this._delegate,e)))}loadBundle(e){return function k_(r,e){const t=Fo(r=Vi(r,Us)),s=new bm;return function zu(r,e,t,s){const c=function(f,_){let N;return N="string"==typeof f?Go().encode(f):f,G=function(G,Q){if(G instanceof Uint8Array)return mv(G,Q);if(G instanceof ArrayBuffer)return mv(new Uint8Array(G),Q);if(G instanceof ReadableStream)return G.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(N),new vf(G,_);var G}(t,cf(e));r.asyncQueue.enqueueAndForget((0,de.Z)(function*(){!function pv(r,e,t){const s=Fn(r);var c;(c=(0,de.Z)(function*(f,_,N){try{const G=yield _.getMetadata();if(yield function(Mt,rn){const Sn=Fn(Mt),Mn=Ss(rn.createTime);return Sn.persistence.runTransaction("hasNewerBundle","readonly",ur=>Sn.Ls.getBundleMetadata(ur,rn.id)).then(ur=>!!ur&&ur.createTime.compareTo(Mn)>=0)}(f.localStore,G))return yield _.close(),N._completeWith({taskState:"Success",documentsLoaded:(Mt=G).totalDocuments,bytesLoaded:Mt.totalBytes,totalDocuments:Mt.totalDocuments,totalBytes:Mt.totalBytes}),Promise.resolve(new Set);N._updateProgress(Ca(G));const Q=new ph(G,f.localStore,_.serializer);let ue=yield _.Pc();for(;ue;){const Mt=yield Q.ju(ue);Mt&&N._updateProgress(Mt),ue=yield _.Pc()}const Xe=yield Q.complete();return yield zc(f,Xe.Hu,void 0),yield function(Mt,rn){const Sn=Fn(Mt);return Sn.persistence.runTransaction("Save bundle","readwrite",Mn=>Sn.Ls.saveBundleMetadata(Mn,rn))}(f.localStore,G),N._completeWith(Xe.progress),Promise.resolve(Xe.Wu)}catch(G){return ci("SyncEngine",`Loading bundle failed with ${G}`),N._failWith(G),Promise.resolve(new Set)}var Mt}),function(f,_,N){return c.apply(this,arguments)})(s,e,t).then(c=>{s.sharedClientState.notifyBundleLoaded(c)})}(yield Im(r),c,s)}))}(t,r._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function N_(r,e){return function T_(r,e){return r.asyncQueue.enqueue((0,de.Z)(function*(){return function(t,s){const c=Fn(t);return c.persistence.runTransaction("Get named query","readonly",f=>c.Ls.getNamedQuery(f,s))}(yield wg(r),e)}))}(Fo(r=Vi(r,Us)),e).then(t=>t?new $a(r,null,t.query):null)}(this._delegate,e).then(t=>t?new jl(this,t):null)}}class Um extends Hy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rg(new Wu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return rl.forKey(t,this.firestore,null)}}class Vm{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Um(e)}get(e){const t=Od(e);return this._delegate.get(t).then(s=>new kp(this._firestore,new Ih(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const c=Od(e);return s?(Bm("Transaction.set",s),this._delegate.set(c,t,s)):this._delegate.set(c,t),this}update(e,t,s,...c){const f=Od(e);return 2===arguments.length?this._delegate.update(f,t):this._delegate.update(f,t,s,...c),this}delete(e){const t=Od(e);return this._delegate.delete(t),this}}class Jv{constructor(e){this._delegate=e}set(e,t,s){const c=Od(e);return s?(Bm("WriteBatch.set",s),this._delegate.set(c,t,s)):this._delegate.set(c,t),this}update(e,t,s,...c){const f=Od(e);return 2===arguments.length?this._delegate.update(f,t):this._delegate.update(f,t,s,...c),this}delete(e){const t=Od(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ch{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new Fm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Af(this._firestore,s),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=Ch.INSTANCES;let c=s.get(e);c||(c=new WeakMap,s.set(e,c));let f=c.get(t);return f||(f=new Ch(e,new Um(e),t),c.set(t,f)),f}}Ch.INSTANCES=new WeakMap;class rl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Um(e)}static forPath(e,t,s){if(e.length%2!=0)throw new sn("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new rl(t,new Js(t._delegate,s,new Pn(e)))}static forKey(e,t,s){return new rl(t,new Js(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new xf(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new xf(this.firestore,ky(this._delegate,e))}catch(t){throw yl(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ze.m9)(e))instanceof Js&&bv(this._delegate,e)}set(e,t){t=Bm("DocumentReference.set",t);try{return t?jv(this._delegate,e,t):jv(this._delegate,e)}catch(s){throw yl(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?Hv(this._delegate,e):Hv(this._delegate,e,t,...s)}catch(c){throw yl(c,"updateDoc()","DocumentReference.update()")}}delete(){return function iE(r){return Op(Vi(r.firestore,Us),[new C(r._key,ms.none())])}(this._delegate)}onSnapshot(...e){const t=e_(e),s=v0(e,c=>new kp(this.firestore,new Ih(this.firestore._delegate,this._userDataWriter,c._key,c._document,c.metadata,this._delegate.converter)));return Gy(this._delegate,t,s)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Z_(r){r=Vi(r,Js);const e=Vi(r.firestore,Us),t=Fo(e),s=new wh(e);return function D_(r,e){const t=new ui;return r.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return(s=(0,de.Z)(function*(c,f,_){try{const N=yield function(G,Q){const ue=Fn(G);return ue.persistence.runTransaction("read document","readonly",Xe=>ue.localDocuments.getDocument(Xe,Q))}(c,f);N.isFoundDocument()?_.resolve(N):N.isNoDocument()?_.resolve(null):_.reject(new sn(Lt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(N){const G=te(N,`Failed to get document '${f} from cache`);_.reject(G)}}),function(c,f,_){return s.apply(this,arguments)})(yield wg(r),e,t);var s})),t.promise}(t,r._key).then(c=>new Ih(e,s,r._key,c,new Df(null!==c&&c.hasLocalMutations,!0),r.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function Vv(r){r=Vi(r,Js);const e=Vi(r.firestore,Us);return xy(Fo(e),r._key,{source:"server"}).then(t=>Sf(e,r,t))}(this._delegate):function Lm(r){r=Vi(r,Js);const e=Vi(r.firestore,Us);return xy(Fo(e),r._key).then(t=>Sf(e,r,t))}(this._delegate),t.then(s=>new kp(this.firestore,new Ih(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new rl(this.firestore,this._delegate.withConverter(e?Ch.getInstance(this.firestore,e):null))}}function yl(r,e,t){return r.message=r.message.replace(e,t),r}function e_(r){for(const e of r)if("object"==typeof e&&!Mg(e))return e;return{}}function v0(r,e){var t,s;let c;return c=Mg(r[0])?r[0]:Mg(r[1])?r[1]:"function"==typeof r[0]?{next:r[0],error:r[1],complete:r[2]}:{next:r[1],error:r[2],complete:r[3]},{next:f=>{c.next&&c.next(e(f))},error:null===(t=c.error)||void 0===t?void 0:t.bind(c),complete:null===(s=c.complete)||void 0===s?void 0:s.bind(c)}}class kp{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new rl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return zy(this._delegate,e._delegate)}}class Af extends kp{data(e){const t=this._delegate.data(e);return function oc(r,e){r||Hn()}(void 0!==t),t}}class jl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Um(e)}where(e,t,s){try{return new jl(this.firestore,bf(this._delegate,function Nv(r,e,t){const s=e,c=Rm("where",r);return xp._create(c,s,t)}(e,t,s)))}catch(c){throw yl(c,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new jl(this.firestore,bf(this._delegate,function Fv(r,e="asc"){const t=e,s=Rm("orderBy",r);return Mm._create(s,t)}(e,t)))}catch(s){throw yl(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new jl(this.firestore,bf(this._delegate,function j_(r){return Iv("limit",r),Pm._create("limit",r,"F")}(e)))}catch(t){throw yl(t,"limit()","Query.limit()")}}limitToLast(e){try{return new jl(this.firestore,bf(this._delegate,function H_(r){return Iv("limitToLast",r),Pm._create("limitToLast",r,"L")}(e)))}catch(t){throw yl(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new jl(this.firestore,bf(this._delegate,function z_(...r){return Eh._create("startAt",r,!0)}(...e)))}catch(t){throw yl(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new jl(this.firestore,bf(this._delegate,function G_(...r){return Eh._create("startAfter",r,!1)}(...e)))}catch(t){throw yl(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new jl(this.firestore,bf(this._delegate,function km(...r){return Om._create("endBefore",r,!1)}(...e)))}catch(t){throw yl(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new jl(this.firestore,bf(this._delegate,function Lv(...r){return Om._create("endAt",r,!0)}(...e)))}catch(t){throw yl(t,"endAt()","Query.endAt()")}}isEqual(e){return Cm(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function X_(r){r=Vi(r,$a);const e=Vi(r.firestore,Us),t=Fo(e),s=new wh(e);return function Q0(r,e){const t=new ui;return r.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return(s=(0,de.Z)(function*(c,f,_){try{const N=yield lh(c,f,!0),G=new yf(f,N.sr),Q=G.nc(N.documents),ue=G.applyChanges(Q,!1);_.resolve(ue.snapshot)}catch(N){const G=te(N,`Failed to execute query '${f} against cache`);_.reject(G)}}),function(c,f,_){return s.apply(this,arguments)})(yield wg(r),e,t);var s})),t.promise}(t,r._query).then(c=>new Tf(e,s,r,c))}(this._delegate):"server"===(null==e?void 0:e.source)?function Q_(r){r=Vi(r,$a);const e=Vi(r.firestore,Us),t=Fo(e),s=new wh(e);return Ry(t,r._query,{source:"server"}).then(c=>new Tf(e,s,r,c))}(this._delegate):function xg(r){r=Vi(r,$a);const e=Vi(r.firestore,Us),t=Fo(e),s=new wh(e);return Ag(r._query),Ry(t,r._query).then(c=>new Tf(e,s,r,c))}(this._delegate),t.then(s=>new Zy(this.firestore,new Tf(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=e_(e),s=v0(e,c=>new Zy(this.firestore,new Tf(this.firestore._delegate,this._userDataWriter,this._delegate,c._snapshot)));return Gy(this._delegate,t,s)}withConverter(e){return new jl(this.firestore,this._delegate.withConverter(e?Ch.getInstance(this.firestore,e):null))}}class Yy{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Af(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Zy{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new jl(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Af(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Yy(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new Af(this._firestore,s))})}isEqual(e){return zy(this._delegate,e._delegate)}}class xf extends jl{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new rl(this.firestore,e):null}doc(e){try{return new rl(this.firestore,void 0===e?Ef(this._delegate):Ef(this._delegate,e))}catch(t){throw yl(t,"doc()","CollectionReference.doc()")}}add(e){return function J_(r,e){const t=Vi(r.firestore,Us),s=Ef(r),c=Nm(r.converter,e);return Op(t,[Tg(_h(r.firestore),"addDoc",s._key,c,null!==r.converter,{}).toMutation(s._key,ms.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new rl(this.firestore,t))}isEqual(e){return bv(this._delegate,e._delegate)}withConverter(e){return new xf(this.firestore,this._delegate.withConverter(e?Ch.getInstance(this.firestore,e):null))}}function Od(r){return Vi(r,Js)}class jm{constructor(...e){this._delegate=new Md(...e)}static documentId(){return new jm(Mr.keyField().canonicalString())}isEqual(e){return(e=(0,Ze.m9)(e))instanceof Md&&this._delegate._internalPath.isEqual(e._internalPath)}}class bh{constructor(e){this._delegate=e}static serverTimestamp(){const e=function u0(){return new Tm("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new bh(e)}static delete(){const e=function c0(){return new bp("deleteField")}();return e._methodName="FieldValue.delete",new bh(e)}static arrayUnion(...e){const t=function d0(...r){return new Pv("arrayUnion",r)}(...e);return t._methodName="FieldValue.arrayUnion",new bh(t)}static arrayRemove(...e){const t=function h0(...r){return new Ov("arrayRemove",r)}(...e);return t._methodName="FieldValue.arrayRemove",new bh(t)}static increment(e){const t=function f0(r){return new wf("increment",r)}(e);return t._methodName="FieldValue.increment",new bh(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const t_={Firestore:$m,GeoPoint:Dm,Timestamp:oi,Blob:Rg,Transaction:Vm,WriteBatch:Jv,DocumentReference:rl,DocumentSnapshot:kp,Query:jl,QueryDocumentSnapshot:Af,QuerySnapshot:Zy,CollectionReference:xf,FieldPath:jm,FieldValue:bh,setLogLevel:function y0(r){!function Wl(r){Zi.setLogLevel(r)}(r)},CACHE_SIZE_UNLIMITED:-1};!function _0(r){(function n_(r,e){r.INTERNAL.registerComponent(new Y.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),c=t.getProvider("firestore").getImmediate();return e(s,c)},"PUBLIC").setServiceProps(Object.assign({},t_)))})(r,(e,t)=>new $m(e,t,new Qv)),r.registerVersion("@firebase/firestore-compat","0.3.8")}(Se.Z);var Dh=H(1205),E0=H(6217),I0=H(9260);function w0(r,e){return function r_(r,e=y.z){return new ee.y(t=>{let s;return null!=e?e.schedule(()=>{s=r.onSnapshot({includeMetadataChanges:!0},t)}):s=r.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=s&&s()}})}(r,e)}function Xy(r,e){return w0(r,e).pipe((0,ge.U)(t=>({payload:t,type:"query"})))}function Hm(r,e){return Xy(r,e).pipe((0,ye.O)(void 0),Ce(),(0,ge.U)(([t,s])=>{const c=s.payload.docChanges(),f=c.map(_=>({type:_.type,payload:_}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((_,N)=>{const G=c.find(ue=>ue.doc.ref.isEqual(_.ref)),Q=null==t?void 0:t.payload.docs.find(ue=>ue.ref.isEqual(_.ref));G&&JSON.stringify(G.doc.metadata)===JSON.stringify(_.metadata)||!G&&Q&&JSON.stringify(Q.metadata)===JSON.stringify(_.metadata)||f.push({type:"modified",payload:{oldIndex:N,newIndex:N,type:"modified",doc:_}})}),f}))}function C0(r,e,t){return Hm(r,t).pipe((0,ve.R)((s,c)=>function b0(r,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(r=function s_(r,e){switch(e.type){case"added":if(!r[e.newIndex]||!r[e.newIndex].doc.ref.isEqual(e.doc.ref))return Qy(r,e.newIndex,0,e);break;case"modified":if(null==r[e.oldIndex]||r[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=r.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Qy(r,e.newIndex,1,e)}break;case"removed":if(r[e.oldIndex]&&r[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Qy(r,e.oldIndex,1)}return r}(r,s))}),r}(s,c.map(f=>f.payload),e),[]),(0,ze.x)(),(0,ge.U)(s=>s.map(c=>({type:c.type,payload:c}))))}function Qy(r,e,t,...s){const c=r.slice();return c.splice(e,t,...s),c}function Jy(r){return(!r||0===r.length)&&(r=["added","removed","modified"]),r}class o_{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=Hm(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ge.U)(s=>s.filter(c=>e.indexOf(c.type)>-1)))),t.pipe((0,ye.O)(void 0),Ce(),(0,He.h)(([s,c])=>c.length>0||!s),(0,ge.U)(([s,c])=>c),xe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ve.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Jy(e);return C0(this.query,t,this.afs.schedulers.outsideAngular).pipe(xe.iC)}valueChanges(e={}){return Xy(this.query,this.afs.schedulers.outsideAngular).pipe((0,ge.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),xe.iC)}get(e){return(0,fe.D)(this.query.get(e)).pipe(xe.iC)}add(e){return this.ref.add(e)}doc(e){return new a_(this.ref.doc(e),this.afs)}}class a_{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:c,query:f}=u_(s,t);return new o_(c,f,this.afs)}snapshotChanges(){return function i_(r,e){return w0(r,e).pipe((0,ye.O)(void 0),Ce(),(0,ge.U)(([t,s])=>s.exists?null!=t&&t.exists?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(xe.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ge.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,fe.D)(this.ref.get(e)).pipe(xe.iC)}}class D0{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Hm(this.query,this.afs.schedulers.outsideAngular).pipe((0,ge.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,He.h)(t=>t.length>0),xe.iC):Hm(this.query,this.afs.schedulers.outsideAngular).pipe(xe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ve.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Jy(e);return C0(this.query,t,this.afs.schedulers.outsideAngular).pipe(xe.iC)}valueChanges(e={}){return Xy(this.query,this.afs.schedulers.outsideAngular).pipe((0,ge.U)(s=>s.payload.docs.map(c=>e.idField?Object.assign({[e.idField]:c.id},c.data()):c.data())),xe.iC)}get(e){return(0,fe.D)(this.query.get(e)).pipe(xe.iC)}}const l_=new E.OlP("angularfire2.enableFirestorePersistence"),c_=new E.OlP("angularfire2.firestore.persistenceSettings"),T0=new E.OlP("angularfire2.firestore.settings"),S0=new E.OlP("angularfire2.firestore.use-emulator");function u_(r,e=(t=>t)){return{query:e(r),ref:r}}let Np=(()=>{class r{constructor(t,s,c,f,_,N,G,Q,ue,Xe,Mt,rn,Sn,Mn,ur,ei,Bi){this.schedulers=G;const ti=(0,rt.on)(t,N,s),Ua=ue;Xe&&(0,Dh.nw)(ti,N,Mt,Sn,Mn,ur,rn,ei),[this.firestore,this.persistenceEnabled$]=(0,rt.cc)(`${ti.name}.firestore`,"AngularFirestore",ti.name,()=>{const Ns=N.runOutsideAngular(()=>ti.firestore());if(f&&Ns.settings(f),Ua&&Ns.useEmulator(...Ua),c&&!(0,Dt.PM)(_)){const ws=()=>{try{return(0,fe.D)(Ns.enablePersistence(Q||void 0).then(()=>!0,()=>!1))}catch(Va){return typeof console<"u"&&console.warn(Va),(0,Le.of)(!1)}};return[Ns,N.runOutsideAngular(ws)]}return[Ns,(0,Le.of)(!1)]},[f,Ua,c])}collection(t,s){let c;c="string"==typeof t?this.firestore.collection(t):t;const{ref:f,query:_}=u_(c,s),N=this.schedulers.ngZone.run(()=>f);return new o_(N,_,this)}collectionGroup(t,s){const c=s||(_=>_),f=this.firestore.collectionGroup(t);return new D0(c(f),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const c=this.schedulers.ngZone.run(()=>s);return new a_(c,this)}createId(){return this.firestore.collection("_").doc().id}}return r.\u0275fac=function(t){return new(t||r)(E.LFG(rt.Dh),E.LFG(rt.xv,8),E.LFG(l_,8),E.LFG(T0,8),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(xe.HU),E.LFG(c_,8),E.LFG(S0,8),E.LFG(Dh.zQ,8),E.LFG(Dh.Qv,8),E.LFG(Dh.L6,8),E.LFG(Dh._Q,8),E.LFG(Dh.rT,8),E.LFG(Dh.lh,8),E.LFG(Dh.f7,8),E.LFG(E0.nm,8))},r.\u0275prov=E.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),d_=(()=>{class r{constructor(){I0.Z.registerVersion("angularfire",xe.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:r,providers:[{provide:l_,useValue:!0},{provide:c_,useValue:t}]}}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=E.oAB({type:r}),r.\u0275inj=E.cJS({providers:[Np]}),r})()},2011:(yn,gt,H)=>{"use strict";H.d(gt,{Dh:()=>Ue,GT:()=>xe,cc:()=>He,hO:()=>ze,on:()=>Ce,pX:()=>Le,xv:()=>je});var E=H(4650),y=H(9260),ee=H(4976);yn=H.hmd(yn);const fe=["ngOnDestroy"],Le=(Se,de,pt,Y={})=>new Proxy(Se,{get:(et,Ze)=>pt.runOutsideAngular(()=>{var xt;if(Se[Ze])return!(null===(xt=null==Y?void 0:Y.spy)||void 0===xt)&&xt.get&&Y.spy.get(Ze,Se[Ze]),Se[Ze];if(fe.indexOf(Ze)>-1)return()=>{};const Be=de.toPromise().then(Oe=>{const Pe=Oe&&Oe[Ze];return"function"==typeof Pe?Pe.bind(Oe):Pe&&Pe.then?Pe.then(Ie=>pt.run(()=>Ie)):pt.run(()=>Pe)});return new Proxy(()=>{},{get:(Oe,Pe)=>Be[Pe],apply:(Oe,Pe,Ie)=>Be.then($e=>{var ht;const _t=$e&&$e(...Ie);return!(null===(ht=null==Y?void 0:Y.spy)||void 0===ht)&&ht.apply&&Y.spy.apply(Ze,Ie,_t),_t})})})}),xe=(Se,de)=>{de.forEach(pt=>{Object.getOwnPropertyNames(pt.prototype||pt).forEach(Y=>{Object.defineProperty(Se.prototype,Y,Object.getOwnPropertyDescriptor(pt.prototype||pt,Y))})})};class ye{constructor(de){return de}}const Ue=new E.OlP("angularfire2.app.options"),je=new E.OlP("angularfire2.app.name");function Ce(Se,de,pt){const et="object"==typeof pt&&pt||{};et.name=et.name||"string"==typeof pt&&pt||"[DEFAULT]";const xt=y.Z.apps.filter(Be=>Be&&Be.name===et.name)[0]||de.runOutsideAngular(()=>y.Z.initializeApp(Se,et));try{JSON.stringify(Se)!==JSON.stringify(xt.options)&&ge("error",`${xt.name} Firebase App already initialized with different options${yn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ye(xt)}const ge=(Se,...de)=>{(0,E.X6Q)()&&typeof console<"u"&&console[Se](...de)},ve={provide:ye,useFactory:Ce,deps:[Ue,E.R0b,[new E.FiY,je]]};let ze=(()=>{class Se{constructor(pt){y.Z.registerVersion("angularfire",ee.q4.full,"core"),y.Z.registerVersion("angularfire",ee.q4.full,"app-compat"),y.Z.registerVersion("angular",E.q4F.full,pt.toString())}static initializeApp(pt,Y){return{ngModule:Se,providers:[{provide:Ue,useValue:pt},{provide:je,useValue:Y}]}}}return Se.\u0275fac=function(pt){return new(pt||Se)(E.LFG(E.Lbi))},Se.\u0275mod=E.oAB({type:Se}),Se.\u0275inj=E.cJS({providers:[ve]}),Se})();function He(Se,de,pt,Y,et){const[,Ze,xt]=globalThis.\u0275AngularfireInstanceCache.find(Be=>Be[0]===Se)||[];if(Ze)return function rt(Se,de){try{return Se.toString()===de.toString()}catch{return Se===de}}(et,xt)||(Re("error",`${de} was already initialized on the ${pt} Firebase App with different settings.${Dt?" You may need to reload as Firebase is not HMR aware.":""}`),Re("warn",{is:et,was:xt})),Ze;{const Be=Y();return globalThis.\u0275AngularfireInstanceCache.push([Se,Be,et]),Be}}const Dt=!!yn.hot,Re=(Se,...de)=>{(0,E.X6Q)()&&typeof console<"u"&&console[Se](...de)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(yn,gt,H)=>{"use strict";H.d(gt,{q4:()=>Tr,iC:()=>wo,fc:()=>wu,HU:()=>Xl,vb:()=>Hr,JM:()=>Zl});var E=H(4650),y=H(259),ee=H(5861),fe=H(6881),Le=H(2090),xe=H(4859),ye=H(1877);const Ue=(P,$)=>$.some(J=>P instanceof J);let je,Ce;const ze=new WeakMap,He=new WeakMap,rt=new WeakMap,Dt=new WeakMap,Re=new WeakMap;let pt={get(P,$,J){if(P instanceof IDBTransaction){if("done"===$)return He.get(P);if("objectStoreNames"===$)return P.objectStoreNames||rt.get(P);if("store"===$)return J.objectStoreNames[1]?void 0:J.objectStore(J.objectStoreNames[0])}return xt(P[$])},set:(P,$,J)=>(P[$]=J,!0),has:(P,$)=>P instanceof IDBTransaction&&("done"===$||"store"===$)||$ in P};function Ze(P){return"function"==typeof P?function et(P){return P!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ve(){return Ce||(Ce=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(P)?function(...$){return P.apply(Be(this),$),xt(ze.get(this))}:function(...$){return xt(P.apply(Be(this),$))}:function($,...J){const Ee=P.call(Be(this),$,...J);return rt.set(Ee,$.sort?$.sort():[$]),xt(Ee)}}(P):(P instanceof IDBTransaction&&function de(P){if(He.has(P))return;const $=new Promise((J,Ee)=>{const st=()=>{P.removeEventListener("complete",It),P.removeEventListener("error",Gt),P.removeEventListener("abort",Gt)},It=()=>{J(),st()},Gt=()=>{Ee(P.error||new DOMException("AbortError","AbortError")),st()};P.addEventListener("complete",It),P.addEventListener("error",Gt),P.addEventListener("abort",Gt)});He.set(P,$)}(P),Ue(P,function ge(){return je||(je=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(P,pt):P)}function xt(P){if(P instanceof IDBRequest)return function Se(P){const $=new Promise((J,Ee)=>{const st=()=>{P.removeEventListener("success",It),P.removeEventListener("error",Gt)},It=()=>{J(xt(P.result)),st()},Gt=()=>{Ee(P.error),st()};P.addEventListener("success",It),P.addEventListener("error",Gt)});return $.then(J=>{J instanceof IDBCursor&&ze.set(J,P)}).catch(()=>{}),Re.set($,P),$}(P);if(Dt.has(P))return Dt.get(P);const $=Ze(P);return $!==P&&(Dt.set(P,$),Re.set($,P)),$}const Be=P=>Re.get(P),Ie=["get","getKey","getAll","getAllKeys","count"],$e=["put","add","delete","clear"],ht=new Map;function _t(P,$){if(!(P instanceof IDBDatabase)||$ in P||"string"!=typeof $)return;if(ht.get($))return ht.get($);const J=$.replace(/FromIndex$/,""),Ee=$!==J,st=$e.includes(J);if(!(J in(Ee?IDBIndex:IDBObjectStore).prototype)||!st&&!Ie.includes(J))return;const It=function(){var Gt=(0,ee.Z)(function*(In,...xn){const Zn=this.transaction(In,st?"readwrite":"readonly");let Nr=Zn.store;return Ee&&(Nr=Nr.index(xn.shift())),(yield Promise.all([Nr[J](...xn),st&&Zn.done]))[0]});return function(xn){return Gt.apply(this,arguments)}}();return ht.set($,It),It}!function Y(P){pt=P(pt)}(P=>({...P,get:($,J,Ee)=>_t($,J)||P.get($,J,Ee),has:($,J)=>!!_t($,J)||P.has($,J)}));const ct="@firebase/installations",wt="0.6.4",ft=1e4,ke=`w:${wt}`,Fe="FIS_v2",Ne="https://firebaseinstallations.googleapis.com/v1",lt=36e5,vn=new Le.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Tt(P){return P instanceof Le.ZR&&P.code.includes("request-failed")}function De({projectId:P}){return`${Ne}/projects/${P}/installations`}function St(P){return{token:P.token,requestStatus:2,expiresIn:lr(P.expiresIn),creationTime:Date.now()}}function ln(P,$){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,ee.Z)(function*(P,$){const Ee=(yield $.json()).error;return vn.create("request-failed",{requestName:P,serverCode:Ee.code,serverMessage:Ee.message,serverStatus:Ee.status})})).apply(this,arguments)}function Kn({apiKey:P}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":P})}function nn(P){return En.apply(this,arguments)}function En(){return(En=(0,ee.Z)(function*(P){const $=yield P();return $.status>=500&&$.status<600?P():$})).apply(this,arguments)}function lr(P){return Number(P.replace("s","000"))}function br(){return(br=(0,ee.Z)(function*({appConfig:P,heartbeatServiceProvider:$},{fid:J}){const Ee=De(P),st=Kn(P),It=$.getImmediate({optional:!0});if(It){const Zn=yield It.getHeartbeatsHeader();Zn&&st.append("x-firebase-client",Zn)}const In={method:"POST",headers:st,body:JSON.stringify({fid:J,authVersion:Fe,appId:P.appId,sdkVersion:ke})},xn=yield nn(()=>fetch(Ee,In));if(xn.ok){const Zn=yield xn.json();return{fid:Zn.fid||J,registrationStatus:2,refreshToken:Zn.refreshToken,authToken:St(Zn.authToken)}}throw yield ln("Create Installation",xn)})).apply(this,arguments)}function cn(P){return new Promise($=>{setTimeout($,P)})}const Zr=/^[cdef][\w-]{21}$/,Br="";function Di(){try{const P=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(P),P[0]=112+P[0]%16;const J=function Ir(P){return function di(P){return btoa(String.fromCharCode(...P)).replace(/\+/g,"-").replace(/\//g,"_")}(P).substr(0,22)}(P);return Zr.test(J)?J:Br}catch{return Br}}function Tn(P){return`${P.appName}!${P.appId}`}const tn=new Map;function fn(P,$){const J=Tn(P);Sr(J,$),function qr(P,$){const J=function pi(){return!ni&&"BroadcastChannel"in self&&(ni=new BroadcastChannel("[Firebase] FID Change"),ni.onmessage=P=>{Sr(P.data.key,P.data.fid)}),ni}();J&&J.postMessage({key:P,fid:$}),function Ur(){0===tn.size&&ni&&(ni.close(),ni=null)}()}(J,$)}function Sr(P,$){const J=tn.get(P);if(J)for(const Ee of J)Ee($)}let ni=null;const xi="firebase-installations-database",or=1,Yn="firebase-installations-store";let Ei=null;function Pr(){return Ei||(Ei=function Oe(P,$,{blocked:J,upgrade:Ee,blocking:st,terminated:It}={}){const Gt=indexedDB.open(P,$),In=xt(Gt);return Ee&&Gt.addEventListener("upgradeneeded",xn=>{Ee(xt(Gt.result),xn.oldVersion,xn.newVersion,xt(Gt.transaction))}),J&&Gt.addEventListener("blocked",()=>J()),In.then(xn=>{It&&xn.addEventListener("close",()=>It()),st&&xn.addEventListener("versionchange",()=>st())}).catch(()=>{}),In}(xi,or,{upgrade:(P,$)=>{0===$&&P.createObjectStore(Yn)}})),Ei}function mr(P,$){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,ee.Z)(function*(P,$){const J=Tn(P),st=(yield Pr()).transaction(Yn,"readwrite"),It=st.objectStore(Yn),Gt=yield It.get(J);return yield It.put($,J),yield st.done,(!Gt||Gt.fid!==$.fid)&&fn(P,$.fid),$})).apply(this,arguments)}function Ge(P){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,ee.Z)(function*(P){const $=Tn(P),Ee=(yield Pr()).transaction(Yn,"readwrite");yield Ee.objectStore(Yn).delete($),yield Ee.done})).apply(this,arguments)}function Xt(P,$){return zt.apply(this,arguments)}function zt(){return(zt=(0,ee.Z)(function*(P,$){const J=Tn(P),st=(yield Pr()).transaction(Yn,"readwrite"),It=st.objectStore(Yn),Gt=yield It.get(J),In=$(Gt);return void 0===In?yield It.delete(J):yield It.put(In,J),yield st.done,In&&(!Gt||Gt.fid!==In.fid)&&fn(P,In.fid),In})).apply(this,arguments)}function we(P){return be.apply(this,arguments)}function be(){return be=(0,ee.Z)(function*(P){let $;const J=yield Xt(P.appConfig,Ee=>{const st=function We(P){return dt(P||{fid:Di(),registrationStatus:0})}(Ee),It=function Ct(P,$){if(0===$.registrationStatus){if(!navigator.onLine)return{installationEntry:$,registrationPromise:Promise.reject(vn.create("app-offline"))};const J={fid:$.fid,registrationStatus:1,registrationTime:Date.now()},Ee=function ot(P,$){return gn.apply(this,arguments)}(P,J);return{installationEntry:J,registrationPromise:Ee}}return 1===$.registrationStatus?{installationEntry:$,registrationPromise:Ye(P)}:{installationEntry:$}}(P,st);return $=It.registrationPromise,It.installationEntry});return J.fid===Br?{installationEntry:yield $}:{installationEntry:J,registrationPromise:$}}),be.apply(this,arguments)}function gn(){return gn=(0,ee.Z)(function*(P,$){try{const J=yield function Xn(P,$){return br.apply(this,arguments)}(P,$);return mr(P.appConfig,J)}catch(J){throw Tt(J)&&409===J.customData.serverCode?yield Ge(P.appConfig):yield mr(P.appConfig,{fid:$.fid,registrationStatus:0}),J}}),gn.apply(this,arguments)}function Ye(P){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,ee.Z)(function*(P){let $=yield me(P.appConfig);for(;1===$.registrationStatus;)yield cn(100),$=yield me(P.appConfig);if(0===$.registrationStatus){const{installationEntry:J,registrationPromise:Ee}=yield we(P);return Ee||J}return $})).apply(this,arguments)}function me(P){return Xt(P,$=>{if(!$)throw vn.create("installation-not-found");return dt($)})}function dt(P){return function Ot(P){return 1===P.registrationStatus&&P.registrationTime+ft<Date.now()}(P)?{fid:P.fid,registrationStatus:0}:P}function bn(){return(bn=(0,ee.Z)(function*({appConfig:P,heartbeatServiceProvider:$},J){const Ee=function Qn(P,{fid:$}){return`${De(P)}/${$}/authTokens:generate`}(P,J),st=function wn(P,{refreshToken:$}){const J=Kn(P);return J.append("Authorization",function Er(P){return`${Fe} ${P}`}($)),J}(P,J),It=$.getImmediate({optional:!0});if(It){const Zn=yield It.getHeartbeatsHeader();Zn&&st.append("x-firebase-client",Zn)}const In={method:"POST",headers:st,body:JSON.stringify({installation:{sdkVersion:ke,appId:P.appId}})},xn=yield nn(()=>fetch(Ee,In));if(xn.ok)return St(yield xn.json());throw yield ln("Generate Auth Token",xn)})).apply(this,arguments)}function cr(P){return Gr.apply(this,arguments)}function Gr(){return Gr=(0,ee.Z)(function*(P,$=!1){let J;const Ee=yield Xt(P.appConfig,It=>{if(!yr(It))throw vn.create("not-registered");const Gt=It.authToken;if(!$&&function Cr(P){return 2===P.requestStatus&&!function Un(P){const $=Date.now();return $<P.creationTime||P.creationTime+P.expiresIn<$+lt}(P)}(Gt))return It;if(1===Gt.requestStatus)return J=function Ut(P,$){return At.apply(this,arguments)}(P,$),It;{if(!navigator.onLine)throw vn.create("app-offline");const In=function tr(P){const $={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},P),{authToken:$})}(It);return J=function Nn(P,$){return jn.apply(this,arguments)}(P,In),In}});return J?yield J:Ee.authToken}),Gr.apply(this,arguments)}function At(){return(At=(0,ee.Z)(function*(P,$){let J=yield Qt(P.appConfig);for(;1===J.authToken.requestStatus;)yield cn(100),J=yield Qt(P.appConfig);const Ee=J.authToken;return 0===Ee.requestStatus?cr(P,$):Ee})).apply(this,arguments)}function Qt(P){return Xt(P,$=>{if(!yr($))throw vn.create("not-registered");return function Wn(P){return 1===P.requestStatus&&P.requestTime+ft<Date.now()}($.authToken)?Object.assign(Object.assign({},$),{authToken:{requestStatus:0}}):$})}function jn(){return jn=(0,ee.Z)(function*(P,$){try{const J=yield function en(P,$){return bn.apply(this,arguments)}(P,$),Ee=Object.assign(Object.assign({},$),{authToken:J});return yield mr(P.appConfig,Ee),J}catch(J){if(!Tt(J)||401!==J.customData.serverCode&&404!==J.customData.serverCode){const Ee=Object.assign(Object.assign({},$),{authToken:{requestStatus:0}});yield mr(P.appConfig,Ee)}else yield Ge(P.appConfig);throw J}}),jn.apply(this,arguments)}function yr(P){return void 0!==P&&2===P.registrationStatus}function Pi(){return(Pi=(0,ee.Z)(function*(P){const $=P,{installationEntry:J,registrationPromise:Ee}=yield we($);return Ee?Ee.catch(console.error):cr($).catch(console.error),J.fid})).apply(this,arguments)}function Ji(){return Ji=(0,ee.Z)(function*(P,$=!1){const J=P;return yield function ys(P){return ri.apply(this,arguments)}(J),(yield cr(J,$)).token}),Ji.apply(this,arguments)}function ri(){return(ri=(0,ee.Z)(function*(P){const{registrationPromise:$}=yield we(P);$&&(yield $)})).apply(this,arguments)}function _e(P){return vn.create("missing-app-config-values",{valueName:P})}const it="installations",qe=P=>{const $=P.getProvider("app").getImmediate(),J=function re(P){if(!P||!P.options)throw _e("App Configuration");if(!P.name)throw _e("App Name");const $=["projectId","apiKey","appId"];for(const J of $)if(!P.options[J])throw _e(J);return{appName:P.name,projectId:P.options.projectId,apiKey:P.options.apiKey,appId:P.options.appId}}($);return{app:$,appConfig:J,heartbeatServiceProvider:(0,fe._getProvider)($,"heartbeat"),_delete:()=>Promise.resolve()}},Ke=P=>{const $=P.getProvider("app").getImmediate(),J=(0,fe._getProvider)($,it).getImmediate();return{getId:()=>function ar(P){return Pi.apply(this,arguments)}(J),getToken:st=>function ji(P){return Ji.apply(this,arguments)}(J,st)}};(function Nt(){(0,fe._registerComponent)(new xe.wA(it,qe,"PUBLIC")),(0,fe._registerComponent)(new xe.wA("installations-internal",Ke,"PRIVATE"))})(),(0,fe.registerVersion)(ct,wt),(0,fe.registerVersion)(ct,wt,"esm2017");const kt="@firebase/remote-config",Gn=new Le.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class qi{constructor($,J,Ee,st){this.client=$,this.storage=J,this.storageCache=Ee,this.logger=st}isCachedDataFresh($,J){if(!J)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Ee=Date.now()-J,st=Ee<=$;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Ee}. Cache max age millis (minimumFetchIntervalMillis setting): ${$}. Is cache hit: ${st}.`),st}fetch($){var J=this;return(0,ee.Z)(function*(){const[Ee,st]=yield Promise.all([J.storage.getLastSuccessfulFetchTimestampMillis(),J.storage.getLastSuccessfulFetchResponse()]);if(st&&J.isCachedDataFresh($.cacheMaxAgeMillis,Ee))return st;$.eTag=st&&st.eTag;const It=yield J.client.fetch($),Gt=[J.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===It.status&&Gt.push(J.storage.setLastSuccessfulFetchResponse(It)),yield Promise.all(Gt),It})()}}function to(P=navigator){return P.languages&&P.languages[0]||P.language}class Fs{constructor($,J,Ee,st,It,Gt){this.firebaseInstallations=$,this.sdkVersion=J,this.namespace=Ee,this.projectId=st,this.apiKey=It,this.appId=Gt}fetch($){var J=this;return(0,ee.Z)(function*(){const[Ee,st]=yield Promise.all([J.firebaseInstallations.getId(),J.firebaseInstallations.getToken()]),Gt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${J.projectId}/namespaces/${J.namespace}:fetch?key=${J.apiKey}`,In={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":$.eTag||"*"},xn={sdk_version:J.sdkVersion,app_instance_id:Ee,app_instance_id_token:st,app_id:J.appId,language_code:to()},Zn={method:"POST",headers:In,body:JSON.stringify(xn)},Nr=fetch(Gt,Zn),Fr=new Promise((_i,ko)=>{$.signal.addEventListener(()=>{const eu=new Error("The operation was aborted.");eu.name="AbortError",ko(eu)})});let uo;try{yield Promise.race([Nr,Fr]),uo=yield Nr}catch(_i){let ko="fetch-client-network";throw"AbortError"===(null==_i?void 0:_i.name)&&(ko="fetch-timeout"),Gn.create(ko,{originalErrorMessage:null==_i?void 0:_i.message})}let Ts=uo.status;const ul=uo.headers.get("ETag")||void 0;let Zs,xl;if(200===uo.status){let _i;try{_i=yield uo.json()}catch(ko){throw Gn.create("fetch-client-parse",{originalErrorMessage:null==ko?void 0:ko.message})}Zs=_i.entries,xl=_i.state}if("INSTANCE_STATE_UNSPECIFIED"===xl?Ts=500:"NO_CHANGE"===xl?Ts=304:("NO_TEMPLATE"===xl||"EMPTY_CONFIG"===xl)&&(Zs={}),304!==Ts&&200!==Ts)throw Gn.create("fetch-status",{httpStatus:Ts});return{status:Ts,eTag:ul,config:Zs}})()}}class xs{constructor($,J){this.client=$,this.storage=J}fetch($){var J=this;return(0,ee.Z)(function*(){const Ee=(yield J.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return J.attemptFetch($,Ee)})()}attemptFetch($,{throttleEndTimeMillis:J,backoffCount:Ee}){var st=this;return(0,ee.Z)(function*(){yield function ba(P,$){return new Promise((J,Ee)=>{const st=Math.max($-Date.now(),0),It=setTimeout(J,st);P.addEventListener(()=>{clearTimeout(It),Ee(Gn.create("fetch-throttle",{throttleEndTimeMillis:$}))})})}($.signal,J);try{const It=yield st.client.fetch($);return yield st.storage.deleteThrottleMetadata(),It}catch(It){if(!function Do(P){if(!(P instanceof Le.ZR&&P.customData))return!1;const $=Number(P.customData.httpStatus);return 429===$||500===$||503===$||504===$}(It))throw It;const Gt={throttleEndTimeMillis:Date.now()+(0,Le.$s)(Ee),backoffCount:Ee+1};return yield st.storage.setThrottleMetadata(Gt),st.attemptFetch($,Gt)}})()}}class il{constructor($,J,Ee,st,It){this.app=$,this._client=J,this._storageCache=Ee,this._storage=st,this._logger=It,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ro(P,$){const J=P.target.error||void 0;return Gn.create($,{originalErrorMessage:J&&(null==J?void 0:J.message)})}const hs="app_namespace_store";class fa{constructor($,J,Ee,st=function ls(){return new Promise((P,$)=>{try{const J=indexedDB.open("firebase_remote_config",1);J.onerror=Ee=>{$(ro(Ee,"storage-open"))},J.onsuccess=Ee=>{P(Ee.target.result)},J.onupgradeneeded=Ee=>{0===Ee.oldVersion&&Ee.target.result.createObjectStore(hs,{keyPath:"compositeKey"})}}catch(J){$(Gn.create("storage-open",{originalErrorMessage:null==J?void 0:J.message}))}})}()){this.appId=$,this.appName=J,this.namespace=Ee,this.openDbPromise=st}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus($){return this.set("last_fetch_status",$)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis($){return this.set("last_successful_fetch_timestamp_millis",$)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse($){return this.set("last_successful_fetch_response",$)}getActiveConfig(){return this.get("active_config")}setActiveConfig($){return this.set("active_config",$)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag($){return this.set("active_config_etag",$)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata($){return this.set("throttle_metadata",$)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get($){var J=this;return(0,ee.Z)(function*(){const Ee=yield J.openDbPromise;return new Promise((st,It)=>{const In=Ee.transaction([hs],"readonly").objectStore(hs),xn=J.createCompositeKey($);try{const Zn=In.get(xn);Zn.onerror=Nr=>{It(ro(Nr,"storage-get"))},Zn.onsuccess=Nr=>{const Fr=Nr.target.result;st(Fr?Fr.value:void 0)}}catch(Zn){It(Gn.create("storage-get",{originalErrorMessage:null==Zn?void 0:Zn.message}))}})})()}set($,J){var Ee=this;return(0,ee.Z)(function*(){const st=yield Ee.openDbPromise;return new Promise((It,Gt)=>{const xn=st.transaction([hs],"readwrite").objectStore(hs),Zn=Ee.createCompositeKey($);try{const Nr=xn.put({compositeKey:Zn,value:J});Nr.onerror=Fr=>{Gt(ro(Fr,"storage-set"))},Nr.onsuccess=()=>{It()}}catch(Nr){Gt(Gn.create("storage-set",{originalErrorMessage:null==Nr?void 0:Nr.message}))}})})()}delete($){var J=this;return(0,ee.Z)(function*(){const Ee=yield J.openDbPromise;return new Promise((st,It)=>{const In=Ee.transaction([hs],"readwrite").objectStore(hs),xn=J.createCompositeKey($);try{const Zn=In.delete(xn);Zn.onerror=Nr=>{It(ro(Nr,"storage-delete"))},Zn.onsuccess=()=>{st()}}catch(Zn){It(Gn.create("storage-delete",{originalErrorMessage:null==Zn?void 0:Zn.message}))}})})()}createCompositeKey($){return[this.appId,this.appName,this.namespace,$].join()}}class Lo{constructor($){this.storage=$}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var $=this;return(0,ee.Z)(function*(){const J=$.storage.getLastFetchStatus(),Ee=$.storage.getLastSuccessfulFetchTimestampMillis(),st=$.storage.getActiveConfig(),It=yield J;It&&($.lastFetchStatus=It);const Gt=yield Ee;Gt&&($.lastSuccessfulFetchTimestampMillis=Gt);const In=yield st;In&&($.activeConfig=In)})()}setLastFetchStatus($){return this.lastFetchStatus=$,this.storage.setLastFetchStatus($)}setLastSuccessfulFetchTimestampMillis($){return this.lastSuccessfulFetchTimestampMillis=$,this.storage.setLastSuccessfulFetchTimestampMillis($)}setActiveConfig($){return this.activeConfig=$,this.storage.setActiveConfig($)}}function To(){return js.apply(this,arguments)}function js(){return(js=(0,ee.Z)(function*(){if(!(0,Le.hl)())return!1;try{return yield(0,Le.eu)()}catch{return!1}})).apply(this,arguments)}!function io(){(0,fe._registerComponent)(new xe.wA("remote-config",function P($,{instanceIdentifier:J}){const Ee=$.getProvider("app").getImmediate(),st=$.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Gn.create("registration-window");if(!(0,Le.hl)())throw Gn.create("indexed-db-unavailable");const{projectId:It,apiKey:Gt,appId:In}=Ee.options;if(!It)throw Gn.create("registration-project-id");if(!Gt)throw Gn.create("registration-api-key");if(!In)throw Gn.create("registration-app-id");const xn=new fa(In,Ee.name,J=J||"firebase"),Zn=new Lo(xn),Nr=new ye.Yd(kt);Nr.logLevel=ye.in.ERROR;const Fr=new Fs(st,fe.SDK_VERSION,J,It,Gt,In),uo=new xs(Fr,xn),Ts=new qi(uo,xn,Zn,Nr),ul=new il(Ee,Ts,Zn,xn,Nr);return function Vr(P){const $=(0,Le.m9)(P);$._initializePromise||($._initializePromise=$._storageCache.loadFromStorage().then(()=>{$._isInitializationComplete=!0}))}(ul),ul},"PUBLIC").setMultipleInstances(!0)),(0,fe.registerVersion)(kt,"0.4.4"),(0,fe.registerVersion)(kt,"0.4.4","esm2017")}();const Xo=(P,$)=>$.some(J=>P instanceof J);let so,Cs;const Da=new WeakMap,vs=new WeakMap,mo=new WeakMap,mi=new WeakMap,yo=new WeakMap;let Jo={get(P,$,J){if(P instanceof IDBTransaction){if("done"===$)return vs.get(P);if("objectStoreNames"===$)return P.objectStoreNames||mo.get(P);if("store"===$)return J.objectStoreNames[1]?void 0:J.objectStore(J.objectStoreNames[0])}return Rs(P[$])},set:(P,$,J)=>(P[$]=J,!0),has:(P,$)=>P instanceof IDBTransaction&&("done"===$||"store"===$)||$ in P};function vl(P){return"function"==typeof P?function ns(P){return P!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function go(){return Cs||(Cs=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(P)?function(...$){return P.apply(Hs(this),$),Rs(Da.get(this))}:function(...$){return Rs(P.apply(Hs(this),$))}:function($,...J){const Ee=P.call(Hs(this),$,...J);return mo.set(Ee,$.sort?$.sort():[$]),Rs(Ee)}}(P):(P instanceof IDBTransaction&&function Ti(P){if(vs.has(P))return;const $=new Promise((J,Ee)=>{const st=()=>{P.removeEventListener("complete",It),P.removeEventListener("error",Gt),P.removeEventListener("abort",Gt)},It=()=>{J(),st()},Gt=()=>{Ee(P.error||new DOMException("AbortError","AbortError")),st()};P.addEventListener("complete",It),P.addEventListener("error",Gt),P.addEventListener("abort",Gt)});vs.set(P,$)}(P),Xo(P,function Qo(){return so||(so=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(P,Jo):P)}function Rs(P){if(P instanceof IDBRequest)return function Bo(P){const $=new Promise((J,Ee)=>{const st=()=>{P.removeEventListener("success",It),P.removeEventListener("error",Gt)},It=()=>{J(Rs(P.result)),st()},Gt=()=>{Ee(P.error),st()};P.addEventListener("success",It),P.addEventListener("error",Gt)});return $.then(J=>{J instanceof IDBCursor&&Da.set(J,P)}).catch(()=>{}),yo.set($,P),$}(P);if(mi.has(P))return mi.get(P);const $=vl(P);return $!==P&&(mi.set(P,$),yo.set($,P)),$}const Hs=P=>yo.get(P);function zi(P,$,{blocked:J,upgrade:Ee,blocking:st,terminated:It}={}){const Gt=indexedDB.open(P,$),In=Rs(Gt);return Ee&&Gt.addEventListener("upgradeneeded",xn=>{Ee(Rs(Gt.result),xn.oldVersion,xn.newVersion,Rs(Gt.transaction))}),J&&Gt.addEventListener("blocked",()=>J()),In.then(xn=>{It&&xn.addEventListener("close",()=>It()),st&&xn.addEventListener("versionchange",()=>st())}).catch(()=>{}),In}function cs(P,{blocked:$}={}){const J=indexedDB.deleteDatabase(P);return $&&J.addEventListener("blocked",()=>$()),Rs(J).then(()=>{})}const ea=["get","getKey","getAll","getAllKeys","count"],pa=["put","add","delete","clear"],_s=new Map;function ga(P,$){if(!(P instanceof IDBDatabase)||$ in P||"string"!=typeof $)return;if(_s.get($))return _s.get($);const J=$.replace(/FromIndex$/,""),Ee=$!==J,st=pa.includes(J);if(!(J in(Ee?IDBIndex:IDBObjectStore).prototype)||!st&&!ea.includes(J))return;const It=function(){var Gt=(0,ee.Z)(function*(In,...xn){const Zn=this.transaction(In,st?"readwrite":"readonly");let Nr=Zn.store;return Ee&&(Nr=Nr.index(xn.shift())),(yield Promise.all([Nr[J](...xn),st&&Zn.done]))[0]});return function(xn){return Gt.apply(this,arguments)}}();return _s.set($,It),It}!function bs(P){Jo=P(Jo)}(P=>({...P,get:($,J,Ee)=>ga($,J)||P.get($,J,Ee),has:($,J)=>!!ga($,J)||P.has($,J)}));const ta="/firebase-messaging-sw.js",pr="/firebase-cloud-messaging-push-scope",$o="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ma="https://fcmregistrations.googleapis.com/v1",b="google.c.a.c_id",q="google.c.a.c_l",T="google.c.a.ts",W="google.c.a.e";var B=(()=>{return(P=B||(B={})).PUSH_RECEIVED="push-received",P.NOTIFICATION_CLICKED="notification-clicked",B;var P})();function R(P){const $=new Uint8Array(P);return btoa(String.fromCharCode(...$)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function O(P){const J=(P+"=".repeat((4-P.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Ee=atob(J),st=new Uint8Array(Ee.length);for(let It=0;It<Ee.length;++It)st[It]=Ee.charCodeAt(It);return st}const ne="fcm_token_details_db",yt=5,dn="fcm_token_object_Store";function yi(){return yi=(0,ee.Z)(function*(P){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(It=>It.name).includes(ne))return null;let $=null;return(yield zi(ne,yt,{upgrade:(Ee=(0,ee.Z)(function*(st,It,Gt,In){var xn;if(It<2||!st.objectStoreNames.contains(dn))return;const Zn=In.objectStore(dn),Nr=yield Zn.index("fcmSenderId").get(P);if(yield Zn.clear(),Nr)if(2===It){const Fr=Nr;if(!Fr.auth||!Fr.p256dh||!Fr.endpoint)return;$={token:Fr.fcmToken,createTime:null!==(xn=Fr.createTime)&&void 0!==xn?xn:Date.now(),subscriptionOptions:{auth:Fr.auth,p256dh:Fr.p256dh,endpoint:Fr.endpoint,swScope:Fr.swScope,vapidKey:"string"==typeof Fr.vapidKey?Fr.vapidKey:R(Fr.vapidKey)}}}else if(3===It){const Fr=Nr;$={token:Fr.fcmToken,createTime:Fr.createTime,subscriptionOptions:{auth:R(Fr.auth),p256dh:R(Fr.p256dh),endpoint:Fr.endpoint,swScope:Fr.swScope,vapidKey:R(Fr.vapidKey)}}}else if(4===It){const Fr=Nr;$={token:Fr.fcmToken,createTime:Fr.createTime,subscriptionOptions:{auth:R(Fr.auth),p256dh:R(Fr.p256dh),endpoint:Fr.endpoint,swScope:Fr.swScope,vapidKey:R(Fr.vapidKey)}}}}),function(It,Gt,In,xn){return Ee.apply(this,arguments)})})).close(),yield cs(ne),yield cs("fcm_vapid_details_db"),yield cs("undefined"),function Si(P){if(!P||!P.subscriptionOptions)return!1;const{subscriptionOptions:$}=P;return"number"==typeof P.createTime&&P.createTime>0&&"string"==typeof P.token&&P.token.length>0&&"string"==typeof $.auth&&$.auth.length>0&&"string"==typeof $.p256dh&&$.p256dh.length>0&&"string"==typeof $.endpoint&&$.endpoint.length>0&&"string"==typeof $.swScope&&$.swScope.length>0&&"string"==typeof $.vapidKey&&$.vapidKey.length>0}($)?$:null;var Ee}),yi.apply(this,arguments)}const fs="firebase-messaging-database",zs=1,Ai="firebase-messaging-store";let _l=null;function ya(){return _l||(_l=zi(fs,zs,{upgrade:(P,$)=>{0===$&&P.createObjectStore(Ai)}})),_l}function us(P){return rs.apply(this,arguments)}function rs(){return rs=(0,ee.Z)(function*(P){const $=va(P),Ee=yield(yield ya()).transaction(Ai).objectStore(Ai).get($);if(Ee)return Ee;{const st=yield function jr(P){return yi.apply(this,arguments)}(P.appConfig.senderId);if(st)return yield sl(P,st),st}}),rs.apply(this,arguments)}function sl(P,$){return So.apply(this,arguments)}function So(){return(So=(0,ee.Z)(function*(P,$){const J=va(P),st=(yield ya()).transaction(Ai,"readwrite");return yield st.objectStore(Ai).put($,J),yield st.done,$})).apply(this,arguments)}function El(){return(El=(0,ee.Z)(function*(P){const $=va(P),Ee=(yield ya()).transaction(Ai,"readwrite");yield Ee.objectStore(Ai).delete($),yield Ee.done})).apply(this,arguments)}function va({appConfig:P}){return P.appId}const ps=new Le.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ms(P,$){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,ee.Z)(function*(P,$){const J=yield ds(P),Ee=Vo($),st={method:"POST",headers:J,body:JSON.stringify(Ee)};let It;try{It=yield(yield fetch(na(P.appConfig),st)).json()}catch(Gt){throw ps.create("token-subscribe-failed",{errorInfo:null==Gt?void 0:Gt.toString()})}if(It.error)throw ps.create("token-subscribe-failed",{errorInfo:It.error.message});if(!It.token)throw ps.create("token-subscribe-no-token");return It.token})).apply(this,arguments)}function _o(){return(_o=(0,ee.Z)(function*(P,$){const J=yield ds(P),Ee=Vo($.subscriptionOptions),st={method:"PATCH",headers:J,body:JSON.stringify(Ee)};let It;try{It=yield(yield fetch(`${na(P.appConfig)}/${$.token}`,st)).json()}catch(Gt){throw ps.create("token-update-failed",{errorInfo:null==Gt?void 0:Gt.toString()})}if(It.error)throw ps.create("token-update-failed",{errorInfo:It.error.message});if(!It.token)throw ps.create("token-update-no-token");return It.token})).apply(this,arguments)}function Uo(P,$){return Il.apply(this,arguments)}function Il(){return(Il=(0,ee.Z)(function*(P,$){const Ee={method:"DELETE",headers:yield ds(P)};try{const It=yield(yield fetch(`${na(P.appConfig)}/${$}`,Ee)).json();if(It.error)throw ps.create("token-unsubscribe-failed",{errorInfo:It.error.message})}catch(st){throw ps.create("token-unsubscribe-failed",{errorInfo:null==st?void 0:st.toString()})}})).apply(this,arguments)}function na({projectId:P}){return`${ma}/projects/${P}/registrations`}function ds(P){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,ee.Z)(function*({appConfig:P,installations:$}){const J=yield $.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":P.apiKey,"x-goog-firebase-installations-auth":`FIS ${J}`})})).apply(this,arguments)}function Vo({p256dh:P,auth:$,endpoint:J,vapidKey:Ee}){const st={web:{endpoint:J,auth:$,p256dh:P}};return Ee!==$o&&(st.web.applicationPubKey=Ee),st}const oo=6048e5;function Ta(){return Ta=(0,ee.Z)(function*(P){const $=yield function wl(P,$){return ao.apply(this,arguments)}(P.swRegistration,P.vapidKey),J={vapidKey:P.vapidKey,swScope:P.swRegistration.scope,endpoint:$.endpoint,auth:R($.getKey("auth")),p256dh:R($.getKey("p256dh"))},Ee=yield us(P.firebaseDependencies);if(Ee){if(function Hl(P,$){return $.vapidKey===P.vapidKey&&$.endpoint===P.endpoint&&$.auth===P.auth&&$.p256dh===P.p256dh}(Ee.subscriptionOptions,J))return Date.now()>=Ee.createTime+oo?function Ni(P,$){return si.apply(this,arguments)}(P,{token:Ee.token,createTime:Date.now(),subscriptionOptions:J}):Ee.token;try{yield Uo(P.firebaseDependencies,Ee.token)}catch(st){console.warn(st)}return Sa(P.firebaseDependencies,J)}return Sa(P.firebaseDependencies,J)}),Ta.apply(this,arguments)}function Yi(){return Yi=(0,ee.Z)(function*(P){const $=yield us(P.firebaseDependencies);$&&(yield Uo(P.firebaseDependencies,$.token),yield function vo(P){return El.apply(this,arguments)}(P.firebaseDependencies));const J=yield P.swRegistration.pushManager.getSubscription();return!J||J.unsubscribe()}),Yi.apply(this,arguments)}function si(){return si=(0,ee.Z)(function*(P,$){try{const J=yield function za(P,$){return _o.apply(this,arguments)}(P.firebaseDependencies,$),Ee=Object.assign(Object.assign({},$),{token:J,createTime:Date.now()});return yield sl(P.firebaseDependencies,Ee),J}catch(J){throw yield function Ga(P){return Yi.apply(this,arguments)}(P),J}}),si.apply(this,arguments)}function Sa(P,$){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,ee.Z)(function*(P,$){const Ee={token:yield Ms(P,$),createTime:Date.now(),subscriptionOptions:$};return yield sl(P,Ee),Ee.token})).apply(this,arguments)}function ao(){return(ao=(0,ee.Z)(function*(P,$){return(yield P.pushManager.getSubscription())||P.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:O($)})})).apply(this,arguments)}function Rr(P){const $={from:P.from,collapseKey:P.collapse_key,messageId:P.fcmMessageId};return function zl(P,$){if(!$.notification)return;P.notification={};const J=$.notification.title;J&&(P.notification.title=J);const Ee=$.notification.body;Ee&&(P.notification.body=Ee);const st=$.notification.image;st&&(P.notification.image=st);const It=$.notification.icon;It&&(P.notification.icon=It)}($,P),function Cl(P,$){$.data&&(P.data=$.data)}($,P),function L(P,$){var J,Ee,st,It,Gt;if(!($.fcmOptions||null!==(J=$.notification)&&void 0!==J&&J.click_action))return;P.fcmOptions={};const In=null!==(st=null===(Ee=$.fcmOptions)||void 0===Ee?void 0:Ee.link)&&void 0!==st?st:null===(It=$.notification)||void 0===It?void 0:It.click_action;In&&(P.fcmOptions.link=In);const xn=null===(Gt=$.fcmOptions)||void 0===Gt?void 0:Gt.analytics_label;xn&&(P.fcmOptions.analyticsLabel=xn)}($,P),$}function j(P,$){const J=[];for(let Ee=0;Ee<P.length;Ee++)J.push(P.charAt(Ee)),Ee<$.length&&J.push($.charAt(Ee));return J.join("")}function Me(P){return ps.create("missing-app-config-values",{valueName:P})}j("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),j("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Vt{constructor($,J,Ee){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const st=function se(P){if(!P||!P.options)throw Me("App Configuration Object");if(!P.name)throw Me("App Name");const $=["projectId","apiKey","appId","messagingSenderId"],{options:J}=P;for(const Ee of $)if(!J[Ee])throw Me(Ee);return{appName:P.name,projectId:J.projectId,apiKey:J.apiKey,appId:J.appId,senderId:J.messagingSenderId}}($);this.firebaseDependencies={app:$,appConfig:st,installations:J,analyticsProvider:Ee}}_delete(){return Promise.resolve()}}function Wt(P){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,ee.Z)(function*(P){try{P.swRegistration=yield navigator.serviceWorker.register(ta,{scope:pr}),P.swRegistration.update().catch(()=>{})}catch($){throw ps.create("failed-service-worker-registration",{browserErrorMessage:null==$?void 0:$.message})}})).apply(this,arguments)}function $r(){return($r=(0,ee.Z)(function*(P,$){if(!$&&!P.swRegistration&&(yield Wt(P)),$||!P.swRegistration){if(!($ instanceof ServiceWorkerRegistration))throw ps.create("invalid-sw-registration");P.swRegistration=$}})).apply(this,arguments)}function wr(){return(wr=(0,ee.Z)(function*(P,$){$?P.vapidKey=$:P.vapidKey||(P.vapidKey=$o)})).apply(this,arguments)}function Ri(){return Ri=(0,ee.Z)(function*(P,$){if(!navigator)throw ps.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ps.create("permission-blocked");return yield function Lr(P,$){return wr.apply(this,arguments)}(P,null==$?void 0:$.vapidKey),yield function gr(P,$){return $r.apply(this,arguments)}(P,null==$?void 0:$.serviceWorkerRegistration),function is(P){return Ta.apply(this,arguments)}(P)}),Ri.apply(this,arguments)}function ra(){return(ra=(0,ee.Z)(function*(P,$,J){const Ee=function xo(P){switch(P){case B.NOTIFICATION_CLICKED:return"notification_open";case B.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}($);(yield P.firebaseDependencies.analyticsProvider.get()).logEvent(Ee,{message_id:J[b],message_name:J[q],message_time:J[T],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ls(){return Ls=(0,ee.Z)(function*(P,$){const J=$.data;if(!J.isFirebaseMessaging)return;P.onMessageHandler&&J.messageType===B.PUSH_RECEIVED&&("function"==typeof P.onMessageHandler?P.onMessageHandler(Rr(J)):P.onMessageHandler.next(Rr(J)));const Ee=J.data;(function X(P){return"object"==typeof P&&!!P&&b in P})(Ee)&&"1"===Ee[W]&&(yield function Gi(P,$,J){return ra.apply(this,arguments)}(P,J.messageType,Ee))}),Ls.apply(this,arguments)}const ia="@firebase/messaging",Aa=P=>{const $=new Vt(P.getProvider("app").getImmediate(),P.getProvider("installations-internal").getImmediate(),P.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",J=>function Gs(P,$){return Ls.apply(this,arguments)}($,J)),$},Wa=P=>{const $=P.getProvider("messaging").getImmediate();return{getToken:Ee=>function Fi(P,$){return Ri.apply(this,arguments)}($,Ee)}};function ol(){return _a.apply(this,arguments)}function _a(){return(_a=(0,ee.Z)(function*(){try{yield(0,Le.eu)()}catch{return!1}return typeof window<"u"&&(0,Le.hl)()&&(0,Le.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Gl(){(0,fe._registerComponent)(new xe.wA("messaging",Aa,"PUBLIC")),(0,fe._registerComponent)(new xe.wA("messaging-internal",Wa,"PRIVATE")),(0,fe.registerVersion)(ia,"0.12.4"),(0,fe.registerVersion)(ia,"0.12.4","esm2017")}();const ci="analytics",sc="firebase_id",Hn="origin",ir=6e4,oc="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Fn="https://www.googletagmanager.com/gtag/js",Lt=new ye.Yd("@firebase/analytics"),ui=new Le.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Ro(P){if(!P.startsWith(Fn)){const $=ui.create("invalid-gtag-resource",{gtagURL:P});return Lt.warn($.message),""}return P}function xc(P){return Promise.all(P.map($=>$.catch(J=>J)))}function jo(){return(jo=(0,ee.Z)(function*(P,$,J,Ee,st,It){const Gt=Ee[st];try{if(Gt)yield $[Gt];else{const xn=(yield xc(J)).find(Zn=>Zn.measurementId===st);xn&&(yield $[xn.appId])}}catch(In){Lt.error(In)}P("config",st,It)})).apply(this,arguments)}function Kc(){return(Kc=(0,ee.Z)(function*(P,$,J,Ee,st){try{let It=[];if(st&&st.send_to){let Gt=st.send_to;Array.isArray(Gt)||(Gt=[Gt]);const In=yield xc(J);for(const xn of Gt){const Zn=In.find(Fr=>Fr.measurementId===xn),Nr=Zn&&$[Zn.appId];if(!Nr){It=[];break}It.push(Nr)}}0===It.length&&(It=Object.values($)),yield Promise.all(It),P("event",Ee,st||{})}catch(It){Lt.error(It)}})).apply(this,arguments)}const sa=30,rr=new class oi{constructor($={},J=1e3){this.throttleMetadata=$,this.intervalMillis=J}getThrottleMetadata($){return this.throttleMetadata[$]}setThrottleMetadata($,J){this.throttleMetadata[$]=J}deleteThrottleMetadata($){delete this.throttleMetadata[$]}};function xa(P){return new Headers({Accept:"application/json","x-goog-api-key":P})}function qc(){return(qc=(0,ee.Z)(function*(P){var $;const{appId:J,apiKey:Ee}=P,st={method:"GET",headers:xa(Ee)},It=oc.replace("{app-id}",J),Gt=yield fetch(It,st);if(200!==Gt.status&&304!==Gt.status){let In="";try{const xn=yield Gt.json();null!==($=xn.error)&&void 0!==$&&$.message&&(In=xn.error.message)}catch{}throw ui.create("config-fetch-failed",{httpStatus:Gt.status,responseMessage:In})}return Gt.json()})).apply(this,arguments)}function Pn(){return(Pn=(0,ee.Z)(function*(P,$=rr,J){const{appId:Ee,apiKey:st,measurementId:It}=P.options;if(!Ee)throw ui.create("no-app-id");if(!st){if(It)return{measurementId:It,appId:Ee};throw ui.create("no-api-key")}const Gt=$.getThrottleMetadata(Ee)||{backoffCount:0,throttleEndTimeMillis:Date.now()},In=new cc;return setTimeout((0,ee.Z)(function*(){In.abort()}),void 0!==J?J:ir),ql({appId:Ee,apiKey:st,measurementId:It},Gt,In,$)})).apply(this,arguments)}function ql(P,$,J){return lc.apply(this,arguments)}function lc(){return lc=(0,ee.Z)(function*(P,{throttleEndTimeMillis:$,backoffCount:J},Ee,st=rr){var It;const{appId:Gt,measurementId:In}=P;try{yield function Sl(P,$){return new Promise((J,Ee)=>{const st=Math.max($-Date.now(),0),It=setTimeout(J,st);P.addEventListener(()=>{clearTimeout(It),Ee(ui.create("fetch-throttle",{throttleEndTimeMillis:$}))})})}(Ee,$)}catch(xn){if(In)return Lt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${In} provided in the "measurementId" field in the local Firebase config. [${null==xn?void 0:xn.message}]`),{appId:Gt,measurementId:In};throw xn}try{const xn=yield function vi(P){return qc.apply(this,arguments)}(P);return st.deleteThrottleMetadata(Gt),xn}catch(xn){const Zn=xn;if(!function Yc(P){if(!(P instanceof Le.ZR&&P.customData))return!1;const $=Number(P.customData.httpStatus);return 429===$||500===$||503===$||504===$}(Zn)){if(st.deleteThrottleMetadata(Gt),In)return Lt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${In} provided in the "measurementId" field in the local Firebase config. [${null==Zn?void 0:Zn.message}]`),{appId:Gt,measurementId:In};throw xn}const Nr=503===Number(null===(It=null==Zn?void 0:Zn.customData)||void 0===It?void 0:It.httpStatus)?(0,Le.$s)(J,st.intervalMillis,sa):(0,Le.$s)(J,st.intervalMillis),Fr={throttleEndTimeMillis:Date.now()+Nr,backoffCount:J+1};return st.setThrottleMetadata(Gt,Fr),Lt.debug(`Calling attemptFetch again in ${Nr} millis`),ql(P,Fr,Ee,st)}}),lc.apply(this,arguments)}class cc{constructor(){this.listeners=[]}addEventListener($){this.listeners.push($)}abort(){this.listeners.forEach($=>$())}}let yu,Xc;function Zc(){return(Zc=(0,ee.Z)(function*(P,$,J,Ee,st){if(st&&st.global)P("event",J,Ee);else{const It=yield $;P("event",J,Object.assign(Object.assign({},Ee),{send_to:It}))}})).apply(this,arguments)}function fr(){return(fr=(0,ee.Z)(function*(){if(!(0,Le.hl)())return Lt.warn(ui.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Le.eu)()}catch(P){return Lt.warn(ui.create("indexeddb-unavailable",{errorInfo:null==P?void 0:P.toString()}).message),!1}return!0})).apply(this,arguments)}function x(){return x=(0,ee.Z)(function*(P,$,J,Ee,st,It,Gt){var In;const xn=function Mr(P){return Pn.apply(this,arguments)}(P);xn.then(Ts=>{J[Ts.measurementId]=Ts.appId,P.options.measurementId&&Ts.measurementId!==P.options.measurementId&&Lt.warn(`The measurement ID in the local Firebase config (${P.options.measurementId}) does not match the measurement ID fetched from the server (${Ts.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Ts=>Lt.error(Ts)),$.push(xn);const Zn=function Qi(){return fr.apply(this,arguments)}().then(Ts=>{if(Ts)return Ee.getId()}),[Nr,Fr]=yield Promise.all([xn,Zn]);(function sr(P){const $=window.document.getElementsByTagName("script");for(const J of Object.values($))if(J.src&&J.src.includes(Fn)&&J.src.includes(P))return J;return null})(It)||function Kl(P,$){const J=function Dl(P,$){let J;return window.trustedTypes&&(J=window.trustedTypes.createPolicy(P,$)),J}("firebase-js-sdk-policy",{createScriptURL:Ro}),Ee=document.createElement("script"),st=`${Fn}?l=${P}&id=${$}`;Ee.src=J?null==J?void 0:J.createScriptURL(st):st,Ee.async=!0,document.head.appendChild(Ee)}(It,Nr.measurementId),Xc&&(st("consent","default",Xc),function Ea(P){Xc=P}(void 0)),st("js",new Date);const uo=null!==(In=null==Gt?void 0:Gt.config)&&void 0!==In?In:{};return uo[Hn]="firebase",uo.update=!0,null!=Fr&&(uo[sc]=Fr),st("config",Nr.measurementId,uo),yu&&(st("set",yu),function Mo(P){yu=P}(void 0)),Nr.measurementId}),x.apply(this,arguments)}class w{constructor($){this.app=$}_delete(){return delete k[this.app.options.appId],Promise.resolve()}}let k={},z=[];const ie={};let Pt,pn,le="dataLayer",nt="gtag",$n=!1;function Li(P,$,J){!function Ci(){const P=[];if((0,Le.ru)()&&P.push("This is a browser extension environment."),(0,Le.zI)()||P.push("Cookies are not available."),P.length>0){const $=P.map((Ee,st)=>`(${st+1}) ${Ee}`).join(" "),J=ui.create("invalid-analytics-context",{errorInfo:$});Lt.warn(J.message)}}();const Ee=P.options.appId;if(!Ee)throw ui.create("no-app-id");if(!P.options.apiKey){if(!P.options.measurementId)throw ui.create("no-api-key");Lt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${P.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=k[Ee])throw ui.create("already-exists",{id:Ee});if(!$n){!function ac(P){let $=[];Array.isArray(window[P])?$=window[P]:window[P]=$}(le);const{wrappedGtag:It,gtagCore:Gt}=function al(P,$,J,Ee,st){let It=function(...Gt){window[Ee].push(arguments)};return window[st]&&"function"==typeof window[st]&&(It=window[st]),window[st]=function lo(P,$,J,Ee){function It(){return It=(0,ee.Z)(function*(Gt,...In){try{if("event"===Gt){const[xn,Zn]=In;yield function Ka(P,$,J,Ee,st){return Kc.apply(this,arguments)}(P,$,J,xn,Zn)}else if("config"===Gt){const[xn,Zn]=In;yield function mu(P,$,J,Ee,st,It){return jo.apply(this,arguments)}(P,$,J,Ee,xn,Zn)}else if("consent"===Gt){const[xn]=In;P("consent","update",xn)}else if("get"===Gt){const[xn,Zn,Nr]=In;P("get",xn,Zn,Nr)}else if("set"===Gt){const[xn]=In;P("set",xn)}else P(Gt,...In)}catch(xn){Lt.error(xn)}}),It.apply(this,arguments)}return function st(Gt){return It.apply(this,arguments)}}(It,P,$,J),{gtagCore:It,wrappedGtag:window[st]}}(k,z,ie,le,nt);pn=It,Pt=Gt,$n=!0}return k[Ee]=function S(P,$,J,Ee,st,It,Gt){return x.apply(this,arguments)}(P,z,ie,$,Pt,le,J),new w(P)}function Po(){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,ee.Z)(function*(){if((0,Le.ru)()||!(0,Le.zI)()||!(0,Le.hl)())return!1;try{return yield(0,Le.eu)()}catch{return!1}})).apply(this,arguments)}const vu="@firebase/analytics";!function Nd(){(0,fe._registerComponent)(new xe.wA(ci,($,{options:J})=>Li($.getProvider("app").getImmediate(),$.getProvider("installations-internal").getImmediate(),J),"PUBLIC")),(0,fe._registerComponent)(new xe.wA("analytics-internal",function P($){try{const J=$.getProvider(ci).getImmediate();return{logEvent:(Ee,st,It)=>function Yu(P,$,J,Ee){P=(0,Le.m9)(P),function qa(P,$,J,Ee,st){return Zc.apply(this,arguments)}(pn,k[P.app.options.appId],$,J,Ee).catch(st=>Lt.error(st))}(J,Ee,st,It)}}catch(J){throw ui.create("interop-component-reg-failed",{reason:J})}},"PRIVATE")),(0,fe.registerVersion)(vu,"0.10.0"),(0,fe.registerVersion)(vu,"0.10.0","esm2017")}();var Eu=H(4408),Zu=H(7565);const dc=new class Yl extends Zu.v{}(class Fd extends Eu.o{constructor($,J){super($,J),this.scheduler=$,this.work=J}schedule($,J=0){return J>0?super.schedule($,J):(this.delay=J,this.state=$,this.scheduler.flush(this),this)}execute($,J){return J>0||this.closed?super.execute($,J):this._execute($,J)}requestAsyncId($,J,Ee=0){return null!=Ee&&Ee>0||null==Ee&&this.delay>0?super.requestAsyncId($,J,Ee):($.flush(this),0)}});var Ds=H(4986),Sh=H(8505),Ma=H(5363),Iu=H(9468);const Tr=new E.GfV("7.5.0"),hc="__angularfire_symbol__analyticsIsSupportedValue",Is="__angularfire_symbol__analyticsIsSupported",Ki="__angularfire_symbol__remoteConfigIsSupportedValue",Rc="__angularfire_symbol__remoteConfigIsSupported",Oo="__angularfire_symbol__messagingIsSupportedValue",gs="__angularfire_symbol__messagingIsSupported";function Zl(P,$,J){if($){if(1===$.length)return $[0];const It=$.filter(Gt=>Gt.app===J);if(1===It.length)return It[0]}return J.container.getProvider(P).getImmediate({optional:!0})}globalThis[Is]||(globalThis[Is]=Po().then(P=>globalThis[hc]=P).catch(()=>globalThis[hc]=!1)),globalThis[gs]||(globalThis[gs]=ol().then(P=>globalThis[Oo]=P).catch(()=>globalThis[Oo]=!1)),globalThis[Rc]||(globalThis[Rc]=To().then(P=>globalThis[Ki]=P).catch(()=>globalThis[Ki]=!1));const Hr=(P,$)=>{const J=$?[$]:(0,y.C6)(),Ee=[];return J.forEach(st=>{st.container.getProvider(P).instances.forEach(Gt=>{Ee.includes(Gt)||Ee.push(Gt)})}),Ee};function $s(){}class Mc{constructor($,J=dc){this.zone=$,this.delegate=J}now(){return this.delegate.now()}schedule($,J,Ee){const st=this.zone;return this.delegate.schedule(function(Gt){st.runGuarded(()=>{$.apply(this,[Gt])})},J,Ee)}}class pc{constructor($){this.zone=$,this.task=null}call($,J){const Ee=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",$s,{},$s,$s)),J.pipe((0,Sh.b)({next:Ee,complete:Ee,error:Ee})).subscribe($).add(Ee)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Xl=(()=>{class P{constructor(J){this.ngZone=J,this.outsideAngular=J.runOutsideAngular(()=>new Mc(Zone.current)),this.insideAngular=J.run(()=>new Mc(Zone.current,Ds.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return P.\u0275fac=function(J){return new(J||P)(E.LFG(E.R0b))},P.\u0275prov=E.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})();function Ps(){const P=globalThis.\u0275AngularFireScheduler;if(!P)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return P}function wu(P){return P.pipe((0,Ma.Q)(Ps().outsideAngular))}function wo(P){return Ps(),function Jc(P){return function(J){return(J=J.lift(new pc(P.ngZone))).pipe((0,Iu.R)(P.outsideAngular),(0,Ma.Q)(P.insideAngular))}}(Ps())(P)}},2090:(yn,gt,H)=>{"use strict";H.d(gt,{$s:()=>Ge,BH:()=>Ze,DV:()=>lr,Dv:()=>Sr,G6:()=>ke,GJ:()=>nn,L:()=>je,LL:()=>$t,Pz:()=>et,Sg:()=>xt,UG:()=>Pe,UI:()=>Xn,US:()=>xe,Wj:()=>pi,Wl:()=>St,Yr:()=>ft,ZB:()=>ve,ZR:()=>Zt,aH:()=>Y,b$:()=>ht,cI:()=>De,dS:()=>xi,eu:()=>Ne,g5:()=>ee,gK:()=>qr,gQ:()=>Ir,h$:()=>Ue,hl:()=>Fe,hu:()=>y,jU:()=>Ie,lb:()=>Ur,m9:()=>zt,ne:()=>Tn,p$:()=>ge,pd:()=>Di,r3:()=>En,ru:()=>$e,tV:()=>Ce,uI:()=>Oe,ug:()=>or,vZ:()=>br,w1:()=>ct,w9:()=>wn,xO:()=>Zr,xb:()=>Er,z$:()=>Be,zI:()=>lt,zd:()=>Br});const E={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},y=function(we,be){if(!we)throw ee(be)},ee=function(we){return new Error("Firebase Database ("+E.SDK_VERSION+") INTERNAL ASSERT FAILED: "+we)},fe=function(we){const be=[];let We=0;for(let Ct=0;Ct<we.length;Ct++){let ot=we.charCodeAt(Ct);ot<128?be[We++]=ot:ot<2048?(be[We++]=ot>>6|192,be[We++]=63&ot|128):55296==(64512&ot)&&Ct+1<we.length&&56320==(64512&we.charCodeAt(Ct+1))?(ot=65536+((1023&ot)<<10)+(1023&we.charCodeAt(++Ct)),be[We++]=ot>>18|240,be[We++]=ot>>12&63|128,be[We++]=ot>>6&63|128,be[We++]=63&ot|128):(be[We++]=ot>>12|224,be[We++]=ot>>6&63|128,be[We++]=63&ot|128)}return be},xe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(we,be){if(!Array.isArray(we))throw Error("encodeByteArray takes an array as a parameter");this.init_();const We=be?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ct=[];for(let ot=0;ot<we.length;ot+=3){const gn=we[ot],Ye=ot+1<we.length,Ve=Ye?we[ot+1]:0,me=ot+2<we.length,dt=me?we[ot+2]:0;let bn=(15&Ve)<<2|dt>>6,Qn=63&dt;me||(Qn=64,Ye||(bn=64)),Ct.push(We[gn>>2],We[(3&gn)<<4|Ve>>4],We[bn],We[Qn])}return Ct.join("")},encodeString(we,be){return this.HAS_NATIVE_SUPPORT&&!be?btoa(we):this.encodeByteArray(fe(we),be)},decodeString(we,be){return this.HAS_NATIVE_SUPPORT&&!be?atob(we):function(we){const be=[];let We=0,Ct=0;for(;We<we.length;){const ot=we[We++];if(ot<128)be[Ct++]=String.fromCharCode(ot);else if(ot>191&&ot<224){const gn=we[We++];be[Ct++]=String.fromCharCode((31&ot)<<6|63&gn)}else if(ot>239&&ot<365){const me=((7&ot)<<18|(63&we[We++])<<12|(63&we[We++])<<6|63&we[We++])-65536;be[Ct++]=String.fromCharCode(55296+(me>>10)),be[Ct++]=String.fromCharCode(56320+(1023&me))}else{const gn=we[We++],Ye=we[We++];be[Ct++]=String.fromCharCode((15&ot)<<12|(63&gn)<<6|63&Ye)}}return be.join("")}(this.decodeStringToByteArray(we,be))},decodeStringToByteArray(we,be){this.init_();const We=be?this.charToByteMapWebSafe_:this.charToByteMap_,Ct=[];for(let ot=0;ot<we.length;){const gn=We[we.charAt(ot++)],Ve=ot<we.length?We[we.charAt(ot)]:0;++ot;const dt=ot<we.length?We[we.charAt(ot)]:64;++ot;const en=ot<we.length?We[we.charAt(ot)]:64;if(++ot,null==gn||null==Ve||null==dt||null==en)throw new ye;Ct.push(gn<<2|Ve>>4),64!==dt&&(Ct.push(Ve<<4&240|dt>>2),64!==en&&Ct.push(dt<<6&192|en))}return Ct},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let we=0;we<this.ENCODED_VALS.length;we++)this.byteToCharMap_[we]=this.ENCODED_VALS.charAt(we),this.charToByteMap_[this.byteToCharMap_[we]]=we,this.byteToCharMapWebSafe_[we]=this.ENCODED_VALS_WEBSAFE.charAt(we),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[we]]=we,we>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(we)]=we,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(we)]=we)}}};class ye extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ue=function(we){const be=fe(we);return xe.encodeByteArray(be,!0)},je=function(we){return Ue(we).replace(/\./g,"")},Ce=function(we){try{return xe.decodeString(we,!0)}catch(be){console.error("base64Decode failed: ",be)}return null};function ge(we){return ve(void 0,we)}function ve(we,be){if(!(be instanceof Object))return be;switch(be.constructor){case Date:return new Date(be.getTime());case Object:void 0===we&&(we={});break;case Array:we=[];break;default:return be}for(const We in be)!be.hasOwnProperty(We)||!ze(We)||(we[We]=ve(we[We],be[We]));return we}function ze(we){return"__proto__"!==we}const Se=()=>{try{return function He(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const we=process.env.__FIREBASE_DEFAULTS__;return we?JSON.parse(we):void 0})()||(()=>{if(typeof document>"u")return;let we;try{we=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const be=we&&Ce(we[1]);return be&&JSON.parse(be)})()}catch(we){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${we}`)}},Y=()=>{var we;return null===(we=Se())||void 0===we?void 0:we.config},et=we=>{var be;return null===(be=Se())||void 0===be?void 0:be[`_${we}`]};class Ze{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((be,We)=>{this.resolve=be,this.reject=We})}wrapCallback(be){return(We,Ct)=>{We?this.reject(We):this.resolve(Ct),"function"==typeof be&&(this.promise.catch(()=>{}),1===be.length?be(We):be(We,Ct))}}}function xt(we,be){if(we.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ct=be||"demo-project",ot=we.iat||0,gn=we.sub||we.user_id;if(!gn)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ye=Object.assign({iss:`https://securetoken.google.com/${Ct}`,aud:Ct,iat:ot,exp:ot+3600,auth_time:ot,sub:gn,user_id:gn,firebase:{sign_in_provider:"custom",identities:{}}},we);return[je(JSON.stringify({alg:"none",type:"JWT"})),je(JSON.stringify(Ye)),""].join(".")}function Be(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Oe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function Pe(){var we;const be=null===(we=Se())||void 0===we?void 0:we.forceEnvironment;if("node"===be)return!0;if("browser"===be)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ie(){return"object"==typeof self&&self.self===self}function $e(){const we="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof we&&void 0!==we.id}function ht(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ct(){const we=Be();return we.indexOf("MSIE ")>=0||we.indexOf("Trident/")>=0}function ft(){return!0===E.NODE_CLIENT||!0===E.NODE_ADMIN}function ke(){return!Pe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Fe(){try{return"object"==typeof indexedDB}catch{return!1}}function Ne(){return new Promise((we,be)=>{try{let We=!0;const Ct="validate-browser-context-for-indexeddb-analytics-module",ot=self.indexedDB.open(Ct);ot.onsuccess=()=>{ot.result.close(),We||self.indexedDB.deleteDatabase(Ct),we(!0)},ot.onupgradeneeded=()=>{We=!1},ot.onerror=()=>{var gn;be((null===(gn=ot.error)||void 0===gn?void 0:gn.message)||"")}}catch(We){be(We)}})}function lt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Zt extends Error{constructor(be,We,Ct){super(We),this.code=be,this.customData=Ct,this.name="FirebaseError",Object.setPrototypeOf(this,Zt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$t.prototype.create)}}class $t{constructor(be,We,Ct){this.service=be,this.serviceName=We,this.errors=Ct}create(be,...We){const Ct=We[0]||{},ot=`${this.service}/${be}`,gn=this.errors[be],Ye=gn?function vn(we,be){return we.replace(Tt,(We,Ct)=>{const ot=be[Ct];return null!=ot?String(ot):`<${Ct}?>`})}(gn,Ct):"Error";return new Zt(ot,`${this.serviceName}: ${Ye} (${ot}).`,Ct)}}const Tt=/\{\$([^}]+)}/g;function De(we){return JSON.parse(we)}function St(we){return JSON.stringify(we)}const ln=function(we){let be={},We={},Ct={},ot="";try{const gn=we.split(".");be=De(Ce(gn[0])||""),We=De(Ce(gn[1])||""),ot=gn[2],Ct=We.d||{},delete We.d}catch{}return{header:be,claims:We,data:Ct,signature:ot}},wn=function(we){const We=ln(we).claims;return!!We&&"object"==typeof We&&We.hasOwnProperty("iat")},nn=function(we){const be=ln(we).claims;return"object"==typeof be&&!0===be.admin};function En(we,be){return Object.prototype.hasOwnProperty.call(we,be)}function lr(we,be){if(Object.prototype.hasOwnProperty.call(we,be))return we[be]}function Er(we){for(const be in we)if(Object.prototype.hasOwnProperty.call(we,be))return!1;return!0}function Xn(we,be,We){const Ct={};for(const ot in we)Object.prototype.hasOwnProperty.call(we,ot)&&(Ct[ot]=be.call(We,we[ot],ot,we));return Ct}function br(we,be){if(we===be)return!0;const We=Object.keys(we),Ct=Object.keys(be);for(const ot of We){if(!Ct.includes(ot))return!1;const gn=we[ot],Ye=be[ot];if(cn(gn)&&cn(Ye)){if(!br(gn,Ye))return!1}else if(gn!==Ye)return!1}for(const ot of Ct)if(!We.includes(ot))return!1;return!0}function cn(we){return null!==we&&"object"==typeof we}function Zr(we){const be=[];for(const[We,Ct]of Object.entries(we))Array.isArray(Ct)?Ct.forEach(ot=>{be.push(encodeURIComponent(We)+"="+encodeURIComponent(ot))}):be.push(encodeURIComponent(We)+"="+encodeURIComponent(Ct));return be.length?"&"+be.join("&"):""}function Br(we){const be={};return we.replace(/^\?/,"").split("&").forEach(Ct=>{if(Ct){const[ot,gn]=Ct.split("=");be[decodeURIComponent(ot)]=decodeURIComponent(gn)}}),be}function Di(we){const be=we.indexOf("?");if(!be)return"";const We=we.indexOf("#",be);return we.substring(be,We>0?We:void 0)}class Ir{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let be=1;be<this.blockSize;++be)this.pad_[be]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(be,We){We||(We=0);const Ct=this.W_;if("string"==typeof be)for(let en=0;en<16;en++)Ct[en]=be.charCodeAt(We)<<24|be.charCodeAt(We+1)<<16|be.charCodeAt(We+2)<<8|be.charCodeAt(We+3),We+=4;else for(let en=0;en<16;en++)Ct[en]=be[We]<<24|be[We+1]<<16|be[We+2]<<8|be[We+3],We+=4;for(let en=16;en<80;en++){const bn=Ct[en-3]^Ct[en-8]^Ct[en-14]^Ct[en-16];Ct[en]=4294967295&(bn<<1|bn>>>31)}let dt,Ot,ot=this.chain_[0],gn=this.chain_[1],Ye=this.chain_[2],Ve=this.chain_[3],me=this.chain_[4];for(let en=0;en<80;en++){en<40?en<20?(dt=Ve^gn&(Ye^Ve),Ot=1518500249):(dt=gn^Ye^Ve,Ot=1859775393):en<60?(dt=gn&Ye|Ve&(gn|Ye),Ot=2400959708):(dt=gn^Ye^Ve,Ot=3395469782);const bn=(ot<<5|ot>>>27)+dt+me+Ot+Ct[en]&4294967295;me=Ve,Ve=Ye,Ye=4294967295&(gn<<30|gn>>>2),gn=ot,ot=bn}this.chain_[0]=this.chain_[0]+ot&4294967295,this.chain_[1]=this.chain_[1]+gn&4294967295,this.chain_[2]=this.chain_[2]+Ye&4294967295,this.chain_[3]=this.chain_[3]+Ve&4294967295,this.chain_[4]=this.chain_[4]+me&4294967295}update(be,We){if(null==be)return;void 0===We&&(We=be.length);const Ct=We-this.blockSize;let ot=0;const gn=this.buf_;let Ye=this.inbuf_;for(;ot<We;){if(0===Ye)for(;ot<=Ct;)this.compress_(be,ot),ot+=this.blockSize;if("string"==typeof be){for(;ot<We;)if(gn[Ye]=be.charCodeAt(ot),++Ye,++ot,Ye===this.blockSize){this.compress_(gn),Ye=0;break}}else for(;ot<We;)if(gn[Ye]=be[ot],++Ye,++ot,Ye===this.blockSize){this.compress_(gn),Ye=0;break}}this.inbuf_=Ye,this.total_+=We}digest(){const be=[];let We=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ot=this.blockSize-1;ot>=56;ot--)this.buf_[ot]=255&We,We/=256;this.compress_(this.buf_);let Ct=0;for(let ot=0;ot<5;ot++)for(let gn=24;gn>=0;gn-=8)be[Ct]=this.chain_[ot]>>gn&255,++Ct;return be}}function Tn(we,be){const We=new tn(we,be);return We.subscribe.bind(We)}class tn{constructor(be,We){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=We,this.task.then(()=>{be(this)}).catch(Ct=>{this.error(Ct)})}next(be){this.forEachObserver(We=>{We.next(be)})}error(be){this.forEachObserver(We=>{We.error(be)}),this.close(be)}complete(){this.forEachObserver(be=>{be.complete()}),this.close()}subscribe(be,We,Ct){let ot;if(void 0===be&&void 0===We&&void 0===Ct)throw new Error("Missing Observer.");ot=function on(we,be){if("object"!=typeof we||null===we)return!1;for(const We of be)if(We in we&&"function"==typeof we[We])return!0;return!1}(be,["next","error","complete"])?be:{next:be,error:We,complete:Ct},void 0===ot.next&&(ot.next=Jr),void 0===ot.error&&(ot.error=Jr),void 0===ot.complete&&(ot.complete=Jr);const gn=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ot.error(this.finalError):ot.complete()}catch{}}),this.observers.push(ot),gn}unsubscribeOne(be){void 0===this.observers||void 0===this.observers[be]||(delete this.observers[be],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(be){if(!this.finalized)for(let We=0;We<this.observers.length;We++)this.sendOne(We,be)}sendOne(be,We){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[be])try{We(this.observers[be])}catch(Ct){typeof console<"u"&&console.error&&console.error(Ct)}})}close(be){this.finalized||(this.finalized=!0,void 0!==be&&(this.finalError=be),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Jr(){}const Sr=function(we,be,We,Ct){let ot;if(Ct<be?ot="at least "+be:Ct>We&&(ot=0===We?"none":"no more than "+We),ot)throw new Error(we+" failed: Was called with "+Ct+(1===Ct?" argument.":" arguments.")+" Expects "+ot+".")};function qr(we,be){return`${we} failed: ${be} argument `}function pi(we,be,We,Ct){if((!Ct||We)&&"function"!=typeof We)throw new Error(qr(we,be)+"must be a valid function.")}function Ur(we,be,We,Ct){if((!Ct||We)&&("object"!=typeof We||null===We))throw new Error(qr(we,be)+"must be a valid context object.")}const xi=function(we){const be=[];let We=0;for(let Ct=0;Ct<we.length;Ct++){let ot=we.charCodeAt(Ct);if(ot>=55296&&ot<=56319){const gn=ot-55296;Ct++,y(Ct<we.length,"Surrogate pair missing trail surrogate."),ot=65536+(gn<<10)+(we.charCodeAt(Ct)-56320)}ot<128?be[We++]=ot:ot<2048?(be[We++]=ot>>6|192,be[We++]=63&ot|128):ot<65536?(be[We++]=ot>>12|224,be[We++]=ot>>6&63|128,be[We++]=63&ot|128):(be[We++]=ot>>18|240,be[We++]=ot>>12&63|128,be[We++]=ot>>6&63|128,be[We++]=63&ot|128)}return be},or=function(we){let be=0;for(let We=0;We<we.length;We++){const Ct=we.charCodeAt(We);Ct<128?be++:Ct<2048?be+=2:Ct>=55296&&Ct<=56319?(be+=4,We++):be+=3}return be},Ei=1e3,Pr=2,mr=144e5,Ht=.5;function Ge(we,be=Ei,We=Pr){const Ct=be*Math.pow(We,we),ot=Math.round(Ht*Ct*(Math.random()-.5)*2);return Math.min(mr,Ct+ot)}function zt(we){return we&&we._delegate?we._delegate:we}},2200:(yn,gt,H)=>{"use strict";H.d(gt,{c:()=>Dt});var E=H(9397),y=H(3457);let ee;const Le=Re=>Re.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xe=Re=>(void 0===ee&&(ee=void 0===Re.style.animationName&&void 0!==Re.style.webkitAnimationName?"-webkit-":""),ee),ye=(Re,Se,de)=>{const pt=Se.startsWith("animation")?xe(Re):"";Re.style.setProperty(pt+Se,de)},Ue=(Re,Se)=>{const de=Se.startsWith("animation")?xe(Re):"";Re.style.removeProperty(de+Se)},ge=[],rt=(Re=[],Se)=>{if(void 0!==Se){const de=Array.isArray(Se)?Se:[Se];return[...Re,...de]}return Re},Dt=Re=>{let Se,de,pt,Y,et,Ze,Ie,Fe,Ne,lt,vt,Tt,De,xt=[],Be=[],Oe=[],Pe=!1,$e={},ht=[],_t=[],ct={},wt=0,ft=!1,ke=!1,Zt=!0,$t=!1,vn=!0,St=!1;const ln=Re,Rn=[],Kn=[],wn=[],nn=[],En=[],lr=[],Er=[],Xn=[],br=[],cn=[],di="function"==typeof AnimationEffect||void 0!==y.w&&"function"==typeof y.w.AnimationEffect,Zr="function"==typeof Element&&"function"==typeof Element.prototype.animate&&di,Di=()=>cn,on=(ae,qe)=>((null!=qe&&qe.oneTimeCallback?Kn:Rn).push({c:ae,o:qe}),De),Sr=()=>{if(Zr)cn.forEach(ae=>{ae.cancel()}),cn.length=0;else{const ae=wn.slice();(0,E.r)(()=>{ae.forEach(qe=>{Ue(qe,"animation-name"),Ue(qe,"animation-duration"),Ue(qe,"animation-timing-function"),Ue(qe,"animation-iteration-count"),Ue(qe,"animation-delay"),Ue(qe,"animation-play-state"),Ue(qe,"animation-fill-mode"),Ue(qe,"animation-direction")})})}},qr=()=>{En.forEach(ae=>{null!=ae&&ae.parentNode&&ae.parentNode.removeChild(ae)}),En.length=0},Xt=()=>void 0!==et?et:Ie?Ie.getFill():"both",zt=()=>void 0!==Ne?Ne:void 0!==Ze?Ze:Ie?Ie.getDirection():"normal",we=()=>ft?"linear":void 0!==pt?pt:Ie?Ie.getEasing():"linear",be=()=>ke?0:void 0!==lt?lt:void 0!==de?de:Ie?Ie.getDuration():0,We=()=>void 0!==Y?Y:Ie?Ie.getIterations():1,Ct=()=>void 0!==vt?vt:void 0!==Se?Se:Ie?Ie.getDelay():0,Qt=()=>{0!==wt&&(wt--,0===wt&&((()=>{Cn(),Xn.forEach(kt=>kt()),br.forEach(kt=>kt());const ae=Zt?1:0,qe=ht,Ke=_t,Nt=ct;wn.forEach(kt=>{const Bt=kt.classList;qe.forEach(Jt=>Bt.add(Jt)),Ke.forEach(Jt=>Bt.remove(Jt));for(const Jt in Nt)Nt.hasOwnProperty(Jt)&&ye(kt,Jt,Nt[Jt])}),Rn.forEach(kt=>kt.c(ae,De)),Kn.forEach(kt=>kt.c(ae,De)),Kn.length=0,vn=!0,Zt&&($t=!0),Zt=!0})(),Ie&&Ie.animationFinish()))},Nn=(ae=!0)=>{qr();const qe=(Re=>(Re.forEach(Se=>{for(const de in Se)if(Se.hasOwnProperty(de)){const pt=Se[de];if("easing"===de)Se["animation-timing-function"]=pt,delete Se[de];else{const Y=Le(de);Y!==de&&(Se[Y]=pt,delete Se[de])}}}),Re))(xt);wn.forEach(Ke=>{if(qe.length>0){const Nt=((Re=[])=>Re.map(Se=>{const de=Se.offset,pt=[];for(const Y in Se)Se.hasOwnProperty(Y)&&"offset"!==Y&&pt.push(`${Y}: ${Se[Y]};`);return`${100*de}% { ${pt.join(" ")} }`}).join(" "))(qe);Tt=void 0!==Re?Re:(Re=>{let Se=ge.indexOf(Re);return Se<0&&(Se=ge.push(Re)-1),`ion-animation-${Se}`})(Nt);const kt=((Re,Se,de)=>{var pt;const Y=(Re=>{const Se=void 0!==Re.getRootNode?Re.getRootNode():Re;return Se.head||Se})(de),et=xe(de),Ze=Y.querySelector("#"+Re);if(Ze)return Ze;const xt=(null!==(pt=de.ownerDocument)&&void 0!==pt?pt:document).createElement("style");return xt.id=Re,xt.textContent=`@${et}keyframes ${Re} { ${Se} } @${et}keyframes ${Re}-alt { ${Se} }`,Y.appendChild(xt),xt})(Tt,Nt,Ke);En.push(kt),ye(Ke,"animation-duration",`${be()}ms`),ye(Ke,"animation-timing-function",we()),ye(Ke,"animation-delay",`${Ct()}ms`),ye(Ke,"animation-fill-mode",Xt()),ye(Ke,"animation-direction",zt());const Bt=We()===1/0?"infinite":We().toString();ye(Ke,"animation-iteration-count",Bt),ye(Ke,"animation-play-state","paused"),ae&&ye(Ke,"animation-name",`${kt.id}-alt`),(0,E.r)(()=>{ye(Ke,"animation-name",kt.id||null)})}})},yr=(ae=!0)=>{(()=>{lr.forEach(Nt=>Nt()),Er.forEach(Nt=>Nt());const ae=Be,qe=Oe,Ke=$e;wn.forEach(Nt=>{const kt=Nt.classList;ae.forEach(Bt=>kt.add(Bt)),qe.forEach(Bt=>kt.remove(Bt));for(const Bt in Ke)Ke.hasOwnProperty(Bt)&&ye(Nt,Bt,Ke[Bt])})})(),xt.length>0&&(Zr?(wn.forEach(ae=>{const qe=ae.animate(xt,{id:ln,delay:Ct(),duration:be(),easing:we(),iterations:We(),fill:Xt(),direction:zt()});qe.pause(),cn.push(qe)}),cn.length>0&&(cn[0].onfinish=()=>{Qt()})):Nn(ae)),Pe=!0},Cr=ae=>{if(ae=Math.min(Math.max(ae,0),.9999),Zr)cn.forEach(qe=>{qe.currentTime=qe.effect.getComputedTiming().delay+be()*ae,qe.pause()});else{const qe=`-${be()*ae}ms`;wn.forEach(Ke=>{xt.length>0&&(ye(Ke,"animation-delay",qe),ye(Ke,"animation-play-state","paused"))})}},Un=ae=>{cn.forEach(qe=>{qe.effect.updateTiming({delay:Ct(),duration:be(),easing:we(),iterations:We(),fill:Xt(),direction:zt()})}),void 0!==ae&&Cr(ae)},tr=(ae=!0,qe)=>{(0,E.r)(()=>{wn.forEach(Ke=>{ye(Ke,"animation-name",Tt||null),ye(Ke,"animation-duration",`${be()}ms`),ye(Ke,"animation-timing-function",we()),ye(Ke,"animation-delay",void 0!==qe?`-${qe*be()}ms`:`${Ct()}ms`),ye(Ke,"animation-fill-mode",Xt()||null),ye(Ke,"animation-direction",zt()||null);const Nt=We()===1/0?"infinite":We().toString();ye(Ke,"animation-iteration-count",Nt),ae&&ye(Ke,"animation-name",`${Tt}-alt`),(0,E.r)(()=>{ye(Ke,"animation-name",Tt||null)})})})},Wn=(ae=!1,qe=!0,Ke)=>(ae&&nn.forEach(Nt=>{Nt.update(ae,qe,Ke)}),Zr?Un(Ke):tr(qe,Ke),De),Ji=()=>{Pe&&(Zr?cn.forEach(ae=>{ae.pause()}):wn.forEach(ae=>{ye(ae,"animation-play-state","paused")}),St=!0)},ri=()=>{Fe=void 0,Qt()},Cn=()=>{Fe&&clearTimeout(Fe)},ii=ae=>new Promise(qe=>{null!=ae&&ae.sync&&(ke=!0,on(()=>ke=!1,{oneTimeCallback:!0})),Pe||yr(),$t&&(Zr?(Cr(0),Un()):tr(),$t=!1),vn&&(wt=nn.length+1,vn=!1),on(()=>qe(),{oneTimeCallback:!0}),nn.forEach(Ke=>{Ke.play()}),Zr?(cn.forEach(ae=>{ae.play()}),(0===xt.length||0===wn.length)&&Qt()):(()=>{if(Cn(),(0,E.r)(()=>{wn.forEach(ae=>{xt.length>0&&ye(ae,"animation-play-state","running")})}),0===xt.length||0===wn.length)Qt();else{const ae=Ct()||0,qe=be()||0,Ke=We()||1;isFinite(Ke)&&(Fe=setTimeout(ri,ae+qe*Ke+100)),((Re,Se)=>{let de;const pt={passive:!0},et=Ze=>{Re===Ze.target&&(de&&de(),Cn(),(0,E.r)(()=>{wn.forEach(ae=>{Ue(ae,"animation-duration"),Ue(ae,"animation-delay"),Ue(ae,"animation-play-state")}),(0,E.r)(Qt)}))};Re&&(Re.addEventListener("webkitAnimationEnd",et,pt),Re.addEventListener("animationend",et,pt),de=()=>{Re.removeEventListener("webkitAnimationEnd",et,pt),Re.removeEventListener("animationend",et,pt)})})(wn[0])}})(),St=!1}),re=(ae,qe)=>{const Ke=xt[0];return void 0===Ke||void 0!==Ke.offset&&0!==Ke.offset?xt=[{offset:0,[ae]:qe},...xt]:Ke[ae]=qe,De};return De={parentAnimation:Ie,elements:wn,childAnimations:nn,id:ln,animationFinish:Qt,from:re,to:(ae,qe)=>{const Ke=xt[xt.length-1];return void 0===Ke||void 0!==Ke.offset&&1!==Ke.offset?xt=[...xt,{offset:1,[ae]:qe}]:Ke[ae]=qe,De},fromTo:(ae,qe,Ke)=>re(ae,qe).to(ae,Ke),parent:ae=>(Ie=ae,De),play:ii,pause:()=>(nn.forEach(ae=>{ae.pause()}),Ji(),De),stop:()=>{nn.forEach(ae=>{ae.stop()}),Pe&&(Sr(),Pe=!1),ft=!1,ke=!1,vn=!0,Ne=void 0,lt=void 0,vt=void 0,wt=0,$t=!1,Zt=!0,St=!1},destroy:ae=>(nn.forEach(qe=>{qe.destroy(ae)}),(ae=>{Sr(),ae&&qr()})(ae),wn.length=0,nn.length=0,xt.length=0,Rn.length=0,Kn.length=0,Pe=!1,vn=!0,De),keyframes:ae=>{const qe=xt!==ae;return xt=ae,qe&&(ae=>{Zr?Di().forEach(qe=>{if(qe.effect.setKeyframes)qe.effect.setKeyframes(ae);else{const Ke=new KeyframeEffect(qe.effect.target,ae,qe.effect.getTiming());qe.effect=Ke}}):Nn()})(xt),De},addAnimation:ae=>{if(null!=ae)if(Array.isArray(ae))for(const qe of ae)qe.parent(De),nn.push(qe);else ae.parent(De),nn.push(ae);return De},addElement:ae=>{if(null!=ae)if(1===ae.nodeType)wn.push(ae);else if(ae.length>=0)for(let qe=0;qe<ae.length;qe++)wn.push(ae[qe]);else console.error("Invalid addElement value");return De},update:Wn,fill:ae=>(et=ae,Wn(!0),De),direction:ae=>(Ze=ae,Wn(!0),De),iterations:ae=>(Y=ae,Wn(!0),De),duration:ae=>(!Zr&&0===ae&&(ae=1),de=ae,Wn(!0),De),easing:ae=>(pt=ae,Wn(!0),De),delay:ae=>(Se=ae,Wn(!0),De),getWebAnimations:Di,getKeyframes:()=>xt,getFill:Xt,getDirection:zt,getDelay:Ct,getIterations:We,getEasing:we,getDuration:be,afterAddRead:ae=>(Xn.push(ae),De),afterAddWrite:ae=>(br.push(ae),De),afterClearStyles:(ae=[])=>{for(const qe of ae)ct[qe]="";return De},afterStyles:(ae={})=>(ct=ae,De),afterRemoveClass:ae=>(_t=rt(_t,ae),De),afterAddClass:ae=>(ht=rt(ht,ae),De),beforeAddRead:ae=>(lr.push(ae),De),beforeAddWrite:ae=>(Er.push(ae),De),beforeClearStyles:(ae=[])=>{for(const qe of ae)$e[qe]="";return De},beforeStyles:(ae={})=>($e=ae,De),beforeRemoveClass:ae=>(Oe=rt(Oe,ae),De),beforeAddClass:ae=>(Be=rt(Be,ae),De),onFinish:on,isRunning:()=>0!==wt&&!St,progressStart:(ae=!1,qe)=>(nn.forEach(Ke=>{Ke.progressStart(ae,qe)}),Ji(),ft=ae,Pe||yr(),Wn(!1,!0,qe),De),progressStep:ae=>(nn.forEach(qe=>{qe.progressStep(ae)}),Cr(ae),De),progressEnd:(ae,qe,Ke)=>(ft=!1,nn.forEach(Nt=>{Nt.progressEnd(ae,qe,Ke)}),void 0!==Ke&&(lt=Ke),$t=!1,Zt=!0,0===ae?(Ne="reverse"===zt()?"normal":"reverse","reverse"===Ne&&(Zt=!1),Zr?(Wn(),Cr(1-qe)):(vt=(1-qe)*be()*-1,Wn(!1,!1))):1===ae&&(Zr?(Wn(),Cr(qe)):(vt=qe*be()*-1,Wn(!1,!1))),void 0!==ae&&(on(()=>{lt=void 0,Ne=void 0,vt=void 0},{oneTimeCallback:!0}),Ie||ii()),De)}}},3982:(yn,gt,H)=>{"use strict";H.d(gt,{E:()=>Ce,a:()=>E,s:()=>Ue});const E=ge=>{try{if(ge instanceof ye)return ge.value;if(!fe()||"string"!=typeof ge||""===ge)return ge;if(ge.includes("onload="))return"";const ve=document.createDocumentFragment(),ze=document.createElement("div");ve.appendChild(ze),ze.innerHTML=ge,xe.forEach(Re=>{const Se=ve.querySelectorAll(Re);for(let de=Se.length-1;de>=0;de--){const pt=Se[de];pt.parentNode?pt.parentNode.removeChild(pt):ve.removeChild(pt);const Y=ee(pt);for(let et=0;et<Y.length;et++)y(Y[et])}});const He=ee(ve);for(let Re=0;Re<He.length;Re++)y(He[Re]);const rt=document.createElement("div");rt.appendChild(ve);const Dt=rt.querySelector("div");return null!==Dt?Dt.innerHTML:rt.innerHTML}catch(ve){return console.error(ve),""}},y=ge=>{if(ge.nodeType&&1!==ge.nodeType)return;if(typeof NamedNodeMap<"u"&&!(ge.attributes instanceof NamedNodeMap))return void ge.remove();for(let ze=ge.attributes.length-1;ze>=0;ze--){const He=ge.attributes.item(ze),rt=He.name;if(!Le.includes(rt.toLowerCase())){ge.removeAttribute(rt);continue}const Dt=He.value,Re=ge[rt];(null!=Dt&&Dt.toLowerCase().includes("javascript:")||null!=Re&&Re.toLowerCase().includes("javascript:"))&&ge.removeAttribute(rt)}const ve=ee(ge);for(let ze=0;ze<ve.length;ze++)y(ve[ze])},ee=ge=>null!=ge.children?ge.children:ge.childNodes,fe=()=>{var ge;const ve=window,ze=null===(ge=null==ve?void 0:ve.Ionic)||void 0===ge?void 0:ge.config;return!ze||(ze.get?ze.get("sanitizerEnabled",!0):!0===ze.sanitizerEnabled||void 0===ze.sanitizerEnabled)},Le=["class","id","href","src","name","slot"],xe=["script","style","iframe","meta","link","object","embed"];class ye{constructor(ve){this.value=ve}}const Ue=ge=>{const ve=window,ze=ve.Ionic;if(!ze||!ze.config||"Object"===ze.config.constructor.name)return ve.Ionic=ve.Ionic||{},ve.Ionic.config=Object.assign(Object.assign({},ve.Ionic.config),ge),ve.Ionic.config},Ce=!1},5375:(yn,gt,H)=>{"use strict";H.d(gt,{C:()=>Le,a:()=>ee,d:()=>fe});var E=H(5861),y=H(9397);const ee=function(){var xe=(0,E.Z)(function*(ye,Ue,je,Ce,ge,ve){var ze;if(ye)return ye.attachViewToDom(Ue,je,ge,Ce);if(!(ve||"string"==typeof je||je instanceof HTMLElement))throw new Error("framework delegate is missing");const He="string"==typeof je?null===(ze=Ue.ownerDocument)||void 0===ze?void 0:ze.createElement(je):je;return Ce&&Ce.forEach(rt=>He.classList.add(rt)),ge&&Object.assign(He,ge),Ue.appendChild(He),yield new Promise(rt=>(0,y.c)(He,rt)),He});return function(Ue,je,Ce,ge,ve,ze){return xe.apply(this,arguments)}}(),fe=(xe,ye)=>{if(ye){if(xe)return xe.removeViewFromDom(ye.parentElement,ye);ye.remove()}return Promise.resolve()},Le=()=>{let xe,ye;return{attachViewToDom:function(){var Ce=(0,E.Z)(function*(ge,ve,ze={},He=[]){var rt,Dt;if(xe=ge,ve){const Se="string"==typeof ve?null===(rt=xe.ownerDocument)||void 0===rt?void 0:rt.createElement(ve):ve;He.forEach(de=>Se.classList.add(de)),Object.assign(Se,ze),xe.appendChild(Se),yield new Promise(de=>(0,y.c)(Se,de))}else if(xe.children.length>0&&("ION-MODAL"===xe.tagName||"ION-POPOVER"===xe.tagName)&&!xe.children[0].classList.contains("ion-delegate-host")){const de=null===(Dt=xe.ownerDocument)||void 0===Dt?void 0:Dt.createElement("div");de.classList.add("ion-delegate-host"),He.forEach(pt=>de.classList.add(pt)),de.append(...xe.children),xe.appendChild(de)}const Re=document.querySelector("ion-app")||document.body;return ye=document.createComment("ionic teleport"),xe.parentNode.insertBefore(ye,xe),Re.appendChild(xe),xe});return function(ve,ze){return Ce.apply(this,arguments)}}(),removeViewFromDom:()=>(xe&&ye&&(ye.parentNode.insertBefore(xe,ye),ye.remove()),Promise.resolve())}}},4349:(yn,gt,H)=>{"use strict";H.d(gt,{G:()=>Le});class y{constructor(ye,Ue,je,Ce,ge){this.id=Ue,this.name=je,this.disableScroll=ge,this.priority=1e6*Ce+Ue,this.ctrl=ye}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const ye=this.ctrl.capture(this.name,this.id,this.priority);return ye&&this.disableScroll&&this.ctrl.disableScroll(this.id),ye}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class ee{constructor(ye,Ue,je,Ce){this.id=Ue,this.disable=je,this.disableScroll=Ce,this.ctrl=ye}block(){if(this.ctrl){if(this.disable)for(const ye of this.disable)this.ctrl.disableGesture(ye,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const ye of this.disable)this.ctrl.enableGesture(ye,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const fe="backdrop-no-scroll",Le=new class E{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(ye){var Ue;return new y(this,this.newID(),ye.name,null!==(Ue=ye.priority)&&void 0!==Ue?Ue:0,!!ye.disableScroll)}createBlocker(ye={}){return new ee(this,this.newID(),ye.disable,!!ye.disableScroll)}start(ye,Ue,je){return this.canStart(ye)?(this.requestedStart.set(Ue,je),!0):(this.requestedStart.delete(Ue),!1)}capture(ye,Ue,je){if(!this.start(ye,Ue,je))return!1;const Ce=this.requestedStart;let ge=-1e4;if(Ce.forEach(ve=>{ge=Math.max(ge,ve)}),ge===je){this.capturedId=Ue,Ce.clear();const ve=new CustomEvent("ionGestureCaptured",{detail:{gestureName:ye}});return document.dispatchEvent(ve),!0}return Ce.delete(Ue),!1}release(ye){this.requestedStart.delete(ye),this.capturedId===ye&&(this.capturedId=void 0)}disableGesture(ye,Ue){let je=this.disabledGestures.get(ye);void 0===je&&(je=new Set,this.disabledGestures.set(ye,je)),je.add(Ue)}enableGesture(ye,Ue){const je=this.disabledGestures.get(ye);void 0!==je&&je.delete(Ue)}disableScroll(ye){this.disabledScroll.add(ye),1===this.disabledScroll.size&&document.body.classList.add(fe)}enableScroll(ye){this.disabledScroll.delete(ye),0===this.disabledScroll.size&&document.body.classList.remove(fe)}canStart(ye){return!(void 0!==this.capturedId||this.isDisabled(ye))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(ye){const Ue=this.disabledGestures.get(ye);return!!(Ue&&Ue.size>0)}newID(){return this.gestureId++,this.gestureId}}},7593:(yn,gt,H)=>{"use strict";H.r(gt),H.d(gt,{MENU_BACK_BUTTON_PRIORITY:()=>Le,OVERLAY_BACK_BUTTON_PRIORITY:()=>fe,blockHardwareBackButton:()=>y,startHardwareBackButton:()=>ee});var E=H(5861);const y=()=>{document.addEventListener("backbutton",()=>{})},ee=()=>{const xe=document;let ye=!1;xe.addEventListener("backbutton",()=>{if(ye)return;let Ue=0,je=[];const Ce=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(ze,He){je.push({priority:ze,handler:He,id:Ue++})}}});xe.dispatchEvent(Ce);const ge=function(){var ze=(0,E.Z)(function*(He){try{if(null!=He&&He.handler){const rt=He.handler(ve);null!=rt&&(yield rt)}}catch(rt){console.error(rt)}});return function(rt){return ze.apply(this,arguments)}}(),ve=()=>{if(je.length>0){let ze={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};je.forEach(He=>{He.priority>=ze.priority&&(ze=He)}),ye=!0,je=je.filter(He=>He.id!==ze.id),ge(ze).then(()=>ye=!1)}};ve()})},fe=100,Le=99},9397:(yn,gt,H)=>{"use strict";H.d(gt,{a:()=>Ue,b:()=>je,c:()=>ee,d:()=>Dt,e:()=>rt,f:()=>He,g:()=>Ce,h:()=>et,i:()=>ye,j:()=>Le,k:()=>ze,l:()=>Re,m:()=>fe,n:()=>ve,o:()=>Se,p:()=>pt,q:()=>Y,r:()=>ge,s:()=>xt,t:()=>E,u:()=>Ze,v:()=>de});const E=(Be,Oe=0)=>new Promise(Pe=>{y(Be,Oe,Pe)}),y=(Be,Oe=0,Pe)=>{let Ie,$e;const ht={passive:!0},ct=()=>{Ie&&Ie()},wt=ft=>{(void 0===ft||Be===ft.target)&&(ct(),Pe(ft))};return Be&&(Be.addEventListener("webkitTransitionEnd",wt,ht),Be.addEventListener("transitionend",wt,ht),$e=setTimeout(wt,Oe+500),Ie=()=>{$e&&(clearTimeout($e),$e=void 0),Be.removeEventListener("webkitTransitionEnd",wt,ht),Be.removeEventListener("transitionend",wt,ht)}),ct},ee=(Be,Oe)=>{Be.componentOnReady?Be.componentOnReady().then(Pe=>Oe(Pe)):ge(()=>Oe(Be))},fe=Be=>void 0!==Be.componentOnReady,Le=(Be,Oe=[])=>{const Pe={};return Oe.forEach(Ie=>{Be.hasAttribute(Ie)&&(null!==Be.getAttribute(Ie)&&(Pe[Ie]=Be.getAttribute(Ie)),Be.removeAttribute(Ie))}),Pe},xe=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],ye=(Be,Oe)=>{let Pe=xe;return Oe&&Oe.length>0&&(Pe=Pe.filter(Ie=>!Oe.includes(Ie))),Le(Be,Pe)},Ue=(Be,Oe,Pe,Ie)=>{var $e;if(typeof window<"u"){const ht=window,_t=null===($e=null==ht?void 0:ht.Ionic)||void 0===$e?void 0:$e.config;if(_t){const ct=_t.get("_ael");if(ct)return ct(Be,Oe,Pe,Ie);if(_t._ael)return _t._ael(Be,Oe,Pe,Ie)}}return Be.addEventListener(Oe,Pe,Ie)},je=(Be,Oe,Pe,Ie)=>{var $e;if(typeof window<"u"){const ht=window,_t=null===($e=null==ht?void 0:ht.Ionic)||void 0===$e?void 0:$e.config;if(_t){const ct=_t.get("_rel");if(ct)return ct(Be,Oe,Pe,Ie);if(_t._rel)return _t._rel(Be,Oe,Pe,Ie)}}return Be.removeEventListener(Oe,Pe,Ie)},Ce=(Be,Oe=Be)=>Be.shadowRoot||Oe,ge=Be=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Be):"function"==typeof requestAnimationFrame?requestAnimationFrame(Be):setTimeout(Be),ve=Be=>!!Be.shadowRoot&&!!Be.attachShadow,ze=Be=>{const Oe=Be.closest("ion-item");return Oe?Oe.querySelector("ion-label"):null},He=Be=>{if(Be.focus(),Be.classList.contains("ion-focusable")){const Oe=Be.closest("ion-app");Oe&&Oe.setFocus([Be])}},rt=(Be,Oe)=>{let Pe;const Ie=Be.getAttribute("aria-labelledby"),$e=Be.id;let ht=null!==Ie&&""!==Ie.trim()?Ie:Oe+"-lbl",_t=null!==Ie&&""!==Ie.trim()?document.getElementById(Ie):ze(Be);return _t?(null===Ie&&(_t.id=ht),Pe=_t.textContent,_t.setAttribute("aria-hidden","true")):""!==$e.trim()&&(_t=document.querySelector(`label[for="${$e}"]`),_t&&(""!==_t.id?ht=_t.id:_t.id=ht=`${$e}-lbl`,Pe=_t.textContent)),{label:_t,labelId:ht,labelText:Pe}},Dt=(Be,Oe,Pe,Ie,$e)=>{if(Be||ve(Oe)){let ht=Oe.querySelector("input.aux-input");ht||(ht=Oe.ownerDocument.createElement("input"),ht.type="hidden",ht.classList.add("aux-input"),Oe.appendChild(ht)),ht.disabled=$e,ht.name=Pe,ht.value=Ie||""}},Re=(Be,Oe,Pe)=>Math.max(Be,Math.min(Oe,Pe)),Se=(Be,Oe)=>{if(!Be){const Pe="ASSERT: "+Oe;throw console.error(Pe),new Error(Pe)}},de=Be=>Be.timeStamp||Date.now(),pt=Be=>{if(Be){const Oe=Be.changedTouches;if(Oe&&Oe.length>0){const Pe=Oe[0];return{x:Pe.clientX,y:Pe.clientY}}if(void 0!==Be.pageX)return{x:Be.pageX,y:Be.pageY}}return{x:0,y:0}},Y=Be=>{const Oe="rtl"===document.dir;switch(Be){case"start":return Oe;case"end":return!Oe;default:throw new Error(`"${Be}" is not a valid value for [side]. Use "start" or "end" instead.`)}},et=(Be,Oe)=>{const Pe=Be._original||Be;return{_original:Be,emit:Ze(Pe.emit.bind(Pe),Oe)}},Ze=(Be,Oe=0)=>{let Pe;return(...Ie)=>{clearTimeout(Pe),Pe=setTimeout(Be,Oe,...Ie)}},xt=(Be,Oe)=>{if(null!=Be||(Be={}),null!=Oe||(Oe={}),Be===Oe)return!0;const Pe=Object.keys(Be);if(Pe.length!==Object.keys(Oe).length)return!1;for(const Ie of Pe)if(!(Ie in Oe)||Be[Ie]!==Oe[Ie])return!1;return!0}},3457:(yn,gt,H)=>{"use strict";H.d(gt,{w:()=>E});const E=typeof window<"u"?window:void 0},1557:(yn,gt,H)=>{"use strict";H.d(gt,{m:()=>ge});var E=H(5861),y=H(7593),ee=H(9397),fe=H(6406),Le=H(2200);const xe=ve=>(0,Le.c)().duration(ve?400:300),ye=ve=>{let ze,He;const rt=ve.width+8,Dt=(0,Le.c)(),Re=(0,Le.c)();ve.isEndSide?(ze=rt+"px",He="0px"):(ze=-rt+"px",He="0px"),Dt.addElement(ve.menuInnerEl).fromTo("transform",`translateX(${ze})`,`translateX(${He})`);const de="ios"===(0,fe.b)(ve),pt=de?.2:.25;return Re.addElement(ve.backdropEl).fromTo("opacity",.01,pt),xe(de).addAnimation([Dt,Re])},Ue=ve=>{let ze,He;const rt=(0,fe.b)(ve),Dt=ve.width;ve.isEndSide?(ze=-Dt+"px",He=Dt+"px"):(ze=Dt+"px",He=-Dt+"px");const Re=(0,Le.c)().addElement(ve.menuInnerEl).fromTo("transform",`translateX(${He})`,"translateX(0px)"),Se=(0,Le.c)().addElement(ve.contentEl).fromTo("transform","translateX(0px)",`translateX(${ze})`),de=(0,Le.c)().addElement(ve.backdropEl).fromTo("opacity",.01,.32);return xe("ios"===rt).addAnimation([Re,Se,de])},je=ve=>{const ze=(0,fe.b)(ve),He=ve.width*(ve.isEndSide?-1:1)+"px",rt=(0,Le.c)().addElement(ve.contentEl).fromTo("transform","translateX(0px)",`translateX(${He})`);return xe("ios"===ze).addAnimation(rt)},ge=(()=>{const ve=new Map,ze=[],He=function(){var Fe=(0,E.Z)(function*(Ne){const lt=yield Y(Ne);return!!lt&&lt.open()});return function(lt){return Fe.apply(this,arguments)}}(),rt=function(){var Fe=(0,E.Z)(function*(Ne){const lt=yield void 0!==Ne?Y(Ne):et();return void 0!==lt&&lt.close()});return function(lt){return Fe.apply(this,arguments)}}(),Dt=function(){var Fe=(0,E.Z)(function*(Ne){const lt=yield Y(Ne);return!!lt&&lt.toggle()});return function(lt){return Fe.apply(this,arguments)}}(),Re=function(){var Fe=(0,E.Z)(function*(Ne,lt){const vt=yield Y(lt);return vt&&(vt.disabled=!Ne),vt});return function(lt,vt){return Fe.apply(this,arguments)}}(),Se=function(){var Fe=(0,E.Z)(function*(Ne,lt){const vt=yield Y(lt);return vt&&(vt.swipeGesture=Ne),vt});return function(lt,vt){return Fe.apply(this,arguments)}}(),de=function(){var Fe=(0,E.Z)(function*(Ne){if(null!=Ne){const lt=yield Y(Ne);return void 0!==lt&&lt.isOpen()}return void 0!==(yield et())});return function(lt){return Fe.apply(this,arguments)}}(),pt=function(){var Fe=(0,E.Z)(function*(Ne){const lt=yield Y(Ne);return!!lt&&!lt.disabled});return function(lt){return Fe.apply(this,arguments)}}(),Y=function(){var Fe=(0,E.Z)(function*(Ne){return yield ke(),"start"===Ne||"end"===Ne?ft(Zt=>Zt.side===Ne&&!Zt.disabled)||ft(Zt=>Zt.side===Ne):null!=Ne?ft(vt=>vt.menuId===Ne):ft(vt=>!vt.disabled)||(ze.length>0?ze[0].el:void 0)});return function(lt){return Fe.apply(this,arguments)}}(),et=function(){var Fe=(0,E.Z)(function*(){return yield ke(),_t()});return function(){return Fe.apply(this,arguments)}}(),Ze=function(){var Fe=(0,E.Z)(function*(){return yield ke(),ct()});return function(){return Fe.apply(this,arguments)}}(),xt=function(){var Fe=(0,E.Z)(function*(){return yield ke(),wt()});return function(){return Fe.apply(this,arguments)}}(),Be=(Fe,Ne)=>{ve.set(Fe,Ne)},Ie=Fe=>{const Ne=Fe.side;ze.filter(lt=>lt.side===Ne&&lt!==Fe).forEach(lt=>lt.disabled=!0)},$e=function(){var Fe=(0,E.Z)(function*(Ne,lt,vt){if(wt())return!1;if(lt){const Zt=yield et();Zt&&Ne.el!==Zt&&(yield Zt.setOpen(!1,!1))}return Ne._setOpen(lt,vt)});return function(lt,vt,Zt){return Fe.apply(this,arguments)}}(),_t=()=>ft(Fe=>Fe._isOpen),ct=()=>ze.map(Fe=>Fe.el),wt=()=>ze.some(Fe=>Fe.isAnimating),ft=Fe=>{const Ne=ze.find(Fe);if(void 0!==Ne)return Ne.el},ke=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(Fe=>new Promise(Ne=>(0,ee.c)(Fe,Ne))));return Be("reveal",je),Be("push",Ue),Be("overlay",ye),typeof document<"u"&&document.addEventListener("ionBackButton",Fe=>{const Ne=_t();Ne&&Fe.detail.register(y.MENU_BACK_BUTTON_PRIORITY,()=>Ne.close())}),{registerAnimation:Be,get:Y,getMenus:Ze,getOpen:et,isEnabled:pt,swipeGesture:Se,isAnimating:xt,isOpen:de,enable:Re,toggle:Dt,close:rt,open:He,_getOpenSync:_t,_createAnimation:(Fe,Ne)=>{const lt=ve.get(Fe);if(!lt)throw new Error("animation not registered");return lt(Ne)},_register:Fe=>{ze.indexOf(Fe)<0&&(Fe.disabled||Ie(Fe),ze.push(Fe))},_unregister:Fe=>{const Ne=ze.indexOf(Fe);Ne>-1&&ze.splice(Ne,1)},_setOpen:$e,_setActiveMenu:Ie}})()},1898:(yn,gt,H)=>{"use strict";H.r(gt),H.d(gt,{GESTURE_CONTROLLER:()=>E.G,createGesture:()=>je});var E=H(4349);const y=(ze,He,rt,Dt)=>{const Re=ee(ze)?{capture:!!Dt.capture,passive:!!Dt.passive}:!!Dt.capture;let Se,de;return ze.__zone_symbol__addEventListener?(Se="__zone_symbol__addEventListener",de="__zone_symbol__removeEventListener"):(Se="addEventListener",de="removeEventListener"),ze[Se](He,rt,Re),()=>{ze[de](He,rt,Re)}},ee=ze=>{if(void 0===fe)try{const He=Object.defineProperty({},"passive",{get:()=>{fe=!0}});ze.addEventListener("optsTest",()=>{},He)}catch{fe=!1}return!!fe};let fe;const ye=ze=>ze instanceof Document?ze:ze.ownerDocument,je=ze=>{let He=!1,rt=!1,Dt=!0,Re=!1;const Se=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},ze),de=Se.canStart,pt=Se.onWillStart,Y=Se.onStart,et=Se.onEnd,Ze=Se.notCaptured,xt=Se.onMove,Be=Se.threshold,Oe=Se.passive,Pe=Se.blurOnStart,Ie={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},$e=((ze,He,rt)=>{const Dt=rt*(Math.PI/180),Re="x"===ze,Se=Math.cos(Dt),de=He*He;let pt=0,Y=0,et=!1,Ze=0;return{start(xt,Be){pt=xt,Y=Be,Ze=0,et=!0},detect(xt,Be){if(!et)return!1;const Oe=xt-pt,Pe=Be-Y,Ie=Oe*Oe+Pe*Pe;if(Ie<de)return!1;const $e=Math.sqrt(Ie),ht=(Re?Oe:Pe)/$e;return Ze=ht>Se?1:ht<-Se?-1:0,et=!1,!0},isGesture:()=>0!==Ze,getDirection:()=>Ze}})(Se.direction,Se.threshold,Se.maxAngle),ht=E.G.createGesture({name:ze.gestureName,priority:ze.gesturePriority,disableScroll:ze.disableScroll}),wt=()=>{He&&(Re=!1,xt&&xt(Ie))},ft=()=>!!ht.capture()&&(He=!0,Dt=!1,Ie.startX=Ie.currentX,Ie.startY=Ie.currentY,Ie.startTime=Ie.currentTime,pt?pt(Ie).then(Fe):Fe(),!0),Fe=()=>{Pe&&(()=>{if(typeof document<"u"){const $t=document.activeElement;null!=$t&&$t.blur&&$t.blur()}})(),Y&&Y(Ie),Dt=!0},Ne=()=>{He=!1,rt=!1,Re=!1,Dt=!0,ht.release()},lt=$t=>{const vn=He,Tt=Dt;if(Ne(),Tt){if(Ce(Ie,$t),vn)return void(et&&et(Ie));Ze&&Ze(Ie)}},vt=((ze,He,rt,Dt,Re)=>{let Se,de,pt,Y,et,Ze,xt,Be=0;const Oe=ke=>{Be=Date.now()+2e3,He(ke)&&(!de&&rt&&(de=y(ze,"touchmove",rt,Re)),pt||(pt=y(ke.target,"touchend",Ie,Re)),Y||(Y=y(ke.target,"touchcancel",Ie,Re)))},Pe=ke=>{Be>Date.now()||He(ke)&&(!Ze&&rt&&(Ze=y(ye(ze),"mousemove",rt,Re)),xt||(xt=y(ye(ze),"mouseup",$e,Re)))},Ie=ke=>{ht(),Dt&&Dt(ke)},$e=ke=>{_t(),Dt&&Dt(ke)},ht=()=>{de&&de(),pt&&pt(),Y&&Y(),de=pt=Y=void 0},_t=()=>{Ze&&Ze(),xt&&xt(),Ze=xt=void 0},ct=()=>{ht(),_t()},wt=(ke=!0)=>{ke?(Se||(Se=y(ze,"touchstart",Oe,Re)),et||(et=y(ze,"mousedown",Pe,Re))):(Se&&Se(),et&&et(),Se=et=void 0,ct())};return{enable:wt,stop:ct,destroy:()=>{wt(!1),Dt=rt=He=void 0}}})(Se.el,$t=>{const vn=ve($t);return!(rt||!Dt||(ge($t,Ie),Ie.startX=Ie.currentX,Ie.startY=Ie.currentY,Ie.startTime=Ie.currentTime=vn,Ie.velocityX=Ie.velocityY=Ie.deltaX=Ie.deltaY=0,Ie.event=$t,de&&!1===de(Ie))||(ht.release(),!ht.start()))&&(rt=!0,0===Be?ft():($e.start(Ie.startX,Ie.startY),!0))},$t=>{He?!Re&&Dt&&(Re=!0,Ce(Ie,$t),requestAnimationFrame(wt)):(Ce(Ie,$t),$e.detect(Ie.currentX,Ie.currentY)&&(!$e.isGesture()||!ft())&&Zt())},lt,{capture:!1,passive:Oe}),Zt=()=>{Ne(),vt.stop(),Ze&&Ze(Ie)};return{enable($t=!0){$t||(He&&lt(void 0),Ne()),vt.enable($t)},destroy(){ht.destroy(),vt.destroy()}}},Ce=(ze,He)=>{if(!He)return;const rt=ze.currentX,Dt=ze.currentY,Re=ze.currentTime;ge(He,ze);const Se=ze.currentX,de=ze.currentY,Y=(ze.currentTime=ve(He))-Re;if(Y>0&&Y<100){const Ze=(de-Dt)/Y;ze.velocityX=(Se-rt)/Y*.7+.3*ze.velocityX,ze.velocityY=.7*Ze+.3*ze.velocityY}ze.deltaX=Se-ze.startX,ze.deltaY=de-ze.startY,ze.event=He},ge=(ze,He)=>{let rt=0,Dt=0;if(ze){const Re=ze.changedTouches;if(Re&&Re.length>0){const Se=Re[0];rt=Se.clientX,Dt=Se.clientY}else void 0!==ze.pageX&&(rt=ze.pageX,Dt=ze.pageY)}He.currentX=rt,He.currentY=Dt},ve=ze=>ze.timeStamp||Date.now()},9459:(yn,gt,H)=>{"use strict";H.d(gt,{L:()=>fe,a:()=>Le,b:()=>xe,c:()=>ye,d:()=>Ue,e:()=>xt,g:()=>Pe,l:()=>Ze,s:()=>Be,t:()=>ge});var E=H(5861),y=H(9816),ee=H(9397);const fe="ionViewWillEnter",Le="ionViewDidEnter",xe="ionViewWillLeave",ye="ionViewDidLeave",Ue="ionViewWillUnload",ge=Ie=>new Promise(($e,ht)=>{(0,y.w)(()=>{ve(Ie),ze(Ie).then(_t=>{_t.animation&&_t.animation.destroy(),He(Ie),$e(_t)},_t=>{He(Ie),ht(_t)})})}),ve=Ie=>{const $e=Ie.enteringEl,ht=Ie.leavingEl;Oe($e,ht,Ie.direction),Ie.showGoBack?$e.classList.add("can-go-back"):$e.classList.remove("can-go-back"),Be($e,!1),$e.style.setProperty("pointer-events","none"),ht&&(Be(ht,!1),ht.style.setProperty("pointer-events","none"))},ze=function(){var Ie=(0,E.Z)(function*($e){const ht=yield rt($e);return ht&&y.B.isBrowser?Dt(ht,$e):Re($e)});return function(ht){return Ie.apply(this,arguments)}}(),He=Ie=>{const $e=Ie.enteringEl,ht=Ie.leavingEl;$e.classList.remove("ion-page-invisible"),$e.style.removeProperty("pointer-events"),void 0!==ht&&(ht.classList.remove("ion-page-invisible"),ht.style.removeProperty("pointer-events"))},rt=function(){var Ie=(0,E.Z)(function*($e){return $e.leavingEl&&$e.animated&&0!==$e.duration?$e.animationBuilder?$e.animationBuilder:"ios"===$e.mode?(yield Promise.resolve().then(H.bind(H,500))).iosTransitionAnimation:(yield Promise.resolve().then(H.bind(H,9892))).mdTransitionAnimation:void 0});return function(ht){return Ie.apply(this,arguments)}}(),Dt=function(){var Ie=(0,E.Z)(function*($e,ht){yield Se(ht,!0);const _t=$e(ht.baseEl,ht);Y(ht.enteringEl,ht.leavingEl);const ct=yield pt(_t,ht);return ht.progressCallback&&ht.progressCallback(void 0),ct&&et(ht.enteringEl,ht.leavingEl),{hasCompleted:ct,animation:_t}});return function(ht,_t){return Ie.apply(this,arguments)}}(),Re=function(){var Ie=(0,E.Z)(function*($e){const ht=$e.enteringEl,_t=$e.leavingEl;return yield Se($e,!1),Y(ht,_t),et(ht,_t),{hasCompleted:!0}});return function(ht){return Ie.apply(this,arguments)}}(),Se=function(){var Ie=(0,E.Z)(function*($e,ht){(void 0!==$e.deepWait?$e.deepWait:ht)&&(yield Promise.all([xt($e.enteringEl),xt($e.leavingEl)])),yield de($e.viewIsReady,$e.enteringEl)});return function(ht,_t){return Ie.apply(this,arguments)}}(),de=function(){var Ie=(0,E.Z)(function*($e,ht){$e&&(yield $e(ht))});return function(ht,_t){return Ie.apply(this,arguments)}}(),pt=(Ie,$e)=>{const ht=$e.progressCallback,_t=new Promise(ct=>{Ie.onFinish(wt=>ct(1===wt))});return ht?(Ie.progressStart(!0),ht(Ie)):Ie.play(),_t},Y=(Ie,$e)=>{Ze($e,xe),Ze(Ie,fe)},et=(Ie,$e)=>{Ze(Ie,Le),Ze($e,ye)},Ze=(Ie,$e)=>{if(Ie){const ht=new CustomEvent($e,{bubbles:!1,cancelable:!1});Ie.dispatchEvent(ht)}},xt=function(){var Ie=(0,E.Z)(function*($e){const ht=$e;if(ht){if(null!=ht.componentOnReady){if(null!=(yield ht.componentOnReady()))return}else if(null!=ht.__registerHost)return void(yield new Promise(ct=>(0,ee.r)(ct)));yield Promise.all(Array.from(ht.children).map(xt))}});return function(ht){return Ie.apply(this,arguments)}}(),Be=(Ie,$e)=>{$e?(Ie.setAttribute("aria-hidden","true"),Ie.classList.add("ion-page-hidden")):(Ie.hidden=!1,Ie.removeAttribute("aria-hidden"),Ie.classList.remove("ion-page-hidden"))},Oe=(Ie,$e,ht)=>{void 0!==Ie&&(Ie.style.zIndex="back"===ht?"99":"101"),void 0!==$e&&($e.style.zIndex="100")},Pe=Ie=>Ie.classList.contains("ion-page")?Ie:Ie.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||Ie},9816:(yn,gt,H)=>{"use strict";H.d(gt,{B:()=>ge,H:()=>ct,a:()=>Pi,b:()=>me,c:()=>$t,d:()=>St,e:()=>ii,f:()=>De,g:()=>vn,h:()=>ht,i:()=>Ht,j:()=>ve,p:()=>Ji,r:()=>Ut,w:()=>Oi});var E=H(5861);let ee,fe,Le,xe=!1,ye=!1,Ue=!1,je=!1,Ce=!1;const ge={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},ve=re=>{const _e=new URL(re,ar.$resourcesUrl$);return _e.origin!==tr.location.origin?_e.href:_e.pathname},de="s-id",pt="sty-id",Y="c-id",Ze="http://www.w3.org/1999/xlink",xt={},Ie=re=>"object"==(re=typeof re)||"function"===re;function $e(re){var _e,it,ae;return null!==(ae=null===(it=null===(_e=re.head)||void 0===_e?void 0:_e.querySelector('meta[name="csp-nonce"]'))||void 0===it?void 0:it.getAttribute("content"))&&void 0!==ae?ae:void 0}const ht=(re,_e,...it)=>{let ae=null,qe=null,Ke=null,Nt=!1,kt=!1;const Bt=[],Jt=zn=>{for(let Gn=0;Gn<zn.length;Gn++)ae=zn[Gn],Array.isArray(ae)?Jt(ae):null!=ae&&"boolean"!=typeof ae&&((Nt="function"!=typeof re&&!Ie(ae))&&(ae=String(ae)),Nt&&kt?Bt[Bt.length-1].$text$+=ae:Bt.push(Nt?_t(null,ae):ae),kt=Nt)};if(Jt(it),_e){_e.key&&(qe=_e.key),_e.name&&(Ke=_e.name);{const zn=_e.className||_e.class;zn&&(_e.class="object"!=typeof zn?zn:Object.keys(zn).filter(Gn=>zn[Gn]).join(" "))}}if("function"==typeof re)return re(null===_e?{}:_e,Bt,ft);const mn=_t(re,null);return mn.$attrs$=_e,Bt.length>0&&(mn.$children$=Bt),mn.$key$=qe,mn.$name$=Ke,mn},_t=(re,_e)=>({$flags$:0,$tag$:re,$text$:_e,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),ct={},ft={forEach:(re,_e)=>re.map(ke).forEach(_e),map:(re,_e)=>re.map(ke).map(_e).map(Fe)},ke=re=>({vattrs:re.$attrs$,vchildren:re.$children$,vkey:re.$key$,vname:re.$name$,vtag:re.$tag$,vtext:re.$text$}),Fe=re=>{if("function"==typeof re.vtag){const it=Object.assign({},re.vattrs);return re.vkey&&(it.key=re.vkey),re.vname&&(it.name=re.vname),ht(re.vtag,it,...re.vchildren||[])}const _e=_t(re.vtag,re.vtext);return _e.$attrs$=re.vattrs,_e.$children$=re.vchildren,_e.$key$=re.vkey,_e.$name$=re.vname,_e},lt=(re,_e,it,ae,qe,Ke,Nt)=>{let kt,Bt,Jt,mn;if(1===Ke.nodeType){for(kt=Ke.getAttribute(Y),kt&&(Bt=kt.split("."),(Bt[0]===Nt||"0"===Bt[0])&&(Jt={$flags$:0,$hostId$:Bt[0],$nodeId$:Bt[1],$depth$:Bt[2],$index$:Bt[3],$tag$:Ke.tagName.toLowerCase(),$elm$:Ke,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},_e.push(Jt),Ke.removeAttribute(Y),re.$children$||(re.$children$=[]),re.$children$[Jt.$index$]=Jt,re=Jt,ae&&"0"===Jt.$depth$&&(ae[Jt.$index$]=Jt.$elm$))),mn=Ke.childNodes.length-1;mn>=0;mn--)lt(re,_e,it,ae,qe,Ke.childNodes[mn],Nt);if(Ke.shadowRoot)for(mn=Ke.shadowRoot.childNodes.length-1;mn>=0;mn--)lt(re,_e,it,ae,qe,Ke.shadowRoot.childNodes[mn],Nt)}else if(8===Ke.nodeType)Bt=Ke.nodeValue.split("."),(Bt[1]===Nt||"0"===Bt[1])&&(kt=Bt[0],Jt={$flags$:0,$hostId$:Bt[1],$nodeId$:Bt[2],$depth$:Bt[3],$index$:Bt[4],$elm$:Ke,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===kt?(Jt.$elm$=Ke.nextSibling,Jt.$elm$&&3===Jt.$elm$.nodeType&&(Jt.$text$=Jt.$elm$.textContent,_e.push(Jt),Ke.remove(),re.$children$||(re.$children$=[]),re.$children$[Jt.$index$]=Jt,ae&&"0"===Jt.$depth$&&(ae[Jt.$index$]=Jt.$elm$))):Jt.$hostId$===Nt&&("s"===kt?(Jt.$tag$="slot",Ke["s-sn"]=Bt[5]?Jt.$name$=Bt[5]:"",Ke["s-sr"]=!0,ae&&(Jt.$elm$=Wn.createElement(Jt.$tag$),Jt.$name$&&Jt.$elm$.setAttribute("name",Jt.$name$),Ke.parentNode.insertBefore(Jt.$elm$,Ke),Ke.remove(),"0"===Jt.$depth$&&(ae[Jt.$index$]=Jt.$elm$)),it.push(Jt),re.$children$||(re.$children$=[]),re.$children$[Jt.$index$]=Jt):"r"===kt&&(ae?Ke.remove():(qe["s-cr"]=Ke,Ke["s-cn"]=!0))));else if(re&&"style"===re.$tag$){const zn=_t(null,Ke.textContent);zn.$elm$=Ke,zn.$index$="0",re.$children$=[zn]}},vt=(re,_e)=>{if(1===re.nodeType){let it=0;for(;it<re.childNodes.length;it++)vt(re.childNodes[it],_e);if(re.shadowRoot)for(it=0;it<re.shadowRoot.childNodes.length;it++)vt(re.shadowRoot.childNodes[it],_e)}else if(8===re.nodeType){const it=re.nodeValue.split(".");"o"===it[0]&&(_e.set(it[1]+"."+it[2],re),re.nodeValue="",re["s-en"]=it[3])}},$t=re=>Un.push(re),vn=re=>Gr(re).$modeName$,De=re=>Gr(re).$hostElement$,St=(re,_e,it)=>{const ae=De(re);return{emit:qe=>ln(ae,_e,{bubbles:!!(4&it),composed:!!(2&it),cancelable:!!(1&it),detail:qe})}},ln=(re,_e,it)=>{const ae=ar.ce(_e,it);return re.dispatchEvent(ae),ae},Rn=new WeakMap,Kn=(re,_e,it)=>{let ae=Cr.get(re);ys&&it?(ae=ae||new CSSStyleSheet,"string"==typeof ae?ae=_e:ae.replaceSync(_e)):ae=_e,Cr.set(re,ae)},wn=(re,_e,it,ae)=>{var qe;let Ke=En(_e,it);const Nt=Cr.get(Ke);if(re=11===re.nodeType?re:Wn,Nt)if("string"==typeof Nt){let Bt,kt=Rn.get(re=re.head||re);if(kt||Rn.set(re,kt=new Set),!kt.has(Ke)){if(re.host&&(Bt=re.querySelector(`[${pt}="${Ke}"]`)))Bt.innerHTML=Nt;else{Bt=Wn.createElement("style"),Bt.innerHTML=Nt;const Jt=null!==(qe=ar.$nonce$)&&void 0!==qe?qe:$e(Wn);null!=Jt&&Bt.setAttribute("nonce",Jt),re.insertBefore(Bt,re.querySelector("link"))}kt&&kt.add(Ke)}}else re.adoptedStyleSheets.includes(Nt)||(re.adoptedStyleSheets=[...re.adoptedStyleSheets,Nt]);return Ke},En=(re,_e)=>"sc-"+(_e&&32&re.$flags$?re.$tagName$+"-"+_e:re.$tagName$),lr=re=>re.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),Er=(re,_e,it,ae,qe,Ke)=>{if(it!==ae){let Nt=Qt(re,_e),kt=_e.toLowerCase();if("class"===_e){const Bt=re.classList,Jt=br(it),mn=br(ae);Bt.remove(...Jt.filter(zn=>zn&&!mn.includes(zn))),Bt.add(...mn.filter(zn=>zn&&!Jt.includes(zn)))}else if("style"===_e){for(const Bt in it)(!ae||null==ae[Bt])&&(Bt.includes("-")?re.style.removeProperty(Bt):re.style[Bt]="");for(const Bt in ae)(!it||ae[Bt]!==it[Bt])&&(Bt.includes("-")?re.style.setProperty(Bt,ae[Bt]):re.style[Bt]=ae[Bt])}else if("key"!==_e)if("ref"===_e)ae&&ae(re);else if(Nt||"o"!==_e[0]||"n"!==_e[1]){const Bt=Ie(ae);if((Nt||Bt&&null!==ae)&&!qe)try{if(re.tagName.includes("-"))re[_e]=ae;else{const mn=null==ae?"":ae;"list"===_e?Nt=!1:(null==it||re[_e]!=mn)&&(re[_e]=mn)}}catch{}let Jt=!1;kt!==(kt=kt.replace(/^xlink\:?/,""))&&(_e=kt,Jt=!0),null==ae||!1===ae?(!1!==ae||""===re.getAttribute(_e))&&(Jt?re.removeAttributeNS(Ze,_e):re.removeAttribute(_e)):(!Nt||4&Ke||qe)&&!Bt&&(ae=!0===ae?"":ae,Jt?re.setAttributeNS(Ze,_e,ae):re.setAttribute(_e,ae))}else _e="-"===_e[2]?_e.slice(3):Qt(tr,kt)?kt.slice(2):kt[2]+_e.slice(3),it&&ar.rel(re,_e,it,!1),ae&&ar.ael(re,_e,ae,!1)}},Xn=/\s/,br=re=>re?re.split(Xn):[],cn=(re,_e,it,ae)=>{const qe=11===_e.$elm$.nodeType&&_e.$elm$.host?_e.$elm$.host:_e.$elm$,Ke=re&&re.$attrs$||xt,Nt=_e.$attrs$||xt;for(ae in Ke)ae in Nt||Er(qe,ae,Ke[ae],void 0,it,_e.$flags$);for(ae in Nt)Er(qe,ae,Ke[ae],Nt[ae],it,_e.$flags$)},di=(re,_e,it,ae)=>{const qe=_e.$children$[it];let Nt,kt,Bt,Ke=0;if(xe||(Ue=!0,"slot"===qe.$tag$&&(ee&&ae.classList.add(ee+"-s"),qe.$flags$|=qe.$children$?2:1)),null!==qe.$text$)Nt=qe.$elm$=Wn.createTextNode(qe.$text$);else if(1&qe.$flags$)Nt=qe.$elm$=Wn.createTextNode("");else{if(je||(je="svg"===qe.$tag$),Nt=qe.$elm$=Wn.createElementNS(je?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&qe.$flags$?"slot-fb":qe.$tag$),je&&"foreignObject"===qe.$tag$&&(je=!1),cn(null,qe,je),(re=>null!=re)(ee)&&Nt["s-si"]!==ee&&Nt.classList.add(Nt["s-si"]=ee),qe.$children$)for(Ke=0;Ke<qe.$children$.length;++Ke)kt=di(re,qe,Ke,Nt),kt&&Nt.appendChild(kt);"svg"===qe.$tag$?je=!1:"foreignObject"===Nt.tagName&&(je=!0)}return Nt["s-hn"]=Le,3&qe.$flags$&&(Nt["s-sr"]=!0,Nt["s-cr"]=fe,Nt["s-sn"]=qe.$name$||"",Bt=re&&re.$children$&&re.$children$[it],Bt&&Bt.$tag$===qe.$tag$&&re.$elm$&&Zr(re.$elm$,!1)),Nt},Zr=(re,_e)=>{ar.$flags$|=1;const it=re.childNodes;for(let ae=it.length-1;ae>=0;ae--){const qe=it[ae];qe["s-hn"]!==Le&&qe["s-ol"]&&(fn(qe).insertBefore(qe,tn(qe)),qe["s-ol"].remove(),qe["s-ol"]=void 0,Ue=!0),_e&&Zr(qe,_e)}ar.$flags$&=-2},Br=(re,_e,it,ae,qe,Ke)=>{let kt,Nt=re["s-cr"]&&re["s-cr"].parentNode||re;for(Nt.shadowRoot&&Nt.tagName===Le&&(Nt=Nt.shadowRoot);qe<=Ke;++qe)ae[qe]&&(kt=di(null,it,qe,re),kt&&(ae[qe].$elm$=kt,Nt.insertBefore(kt,tn(_e))))},Di=(re,_e,it,ae,qe)=>{for(;_e<=it;++_e)(ae=re[_e])&&(qe=ae.$elm$,pi(ae),ye=!0,qe["s-ol"]?qe["s-ol"].remove():Zr(qe,!0),qe.remove())},Tn=(re,_e)=>re.$tag$===_e.$tag$&&("slot"===re.$tag$?re.$name$===_e.$name$:re.$key$===_e.$key$),tn=re=>re&&re["s-ol"]||re,fn=re=>(re["s-ol"]?re["s-ol"]:re).parentNode,on=(re,_e)=>{const it=_e.$elm$=re.$elm$,ae=re.$children$,qe=_e.$children$,Ke=_e.$tag$,Nt=_e.$text$;let kt;null===Nt?(je="svg"===Ke||"foreignObject"!==Ke&&je,"slot"===Ke||cn(re,_e,je),null!==ae&&null!==qe?((re,_e,it,ae)=>{let Jn,es,qe=0,Ke=0,Nt=0,kt=0,Bt=_e.length-1,Jt=_e[0],mn=_e[Bt],zn=ae.length-1,Gn=ae[0],gi=ae[zn];for(;qe<=Bt&&Ke<=zn;)if(null==Jt)Jt=_e[++qe];else if(null==mn)mn=_e[--Bt];else if(null==Gn)Gn=ae[++Ke];else if(null==gi)gi=ae[--zn];else if(Tn(Jt,Gn))on(Jt,Gn),Jt=_e[++qe],Gn=ae[++Ke];else if(Tn(mn,gi))on(mn,gi),mn=_e[--Bt],gi=ae[--zn];else if(Tn(Jt,gi))("slot"===Jt.$tag$||"slot"===gi.$tag$)&&Zr(Jt.$elm$.parentNode,!1),on(Jt,gi),re.insertBefore(Jt.$elm$,mn.$elm$.nextSibling),Jt=_e[++qe],gi=ae[--zn];else if(Tn(mn,Gn))("slot"===Jt.$tag$||"slot"===gi.$tag$)&&Zr(mn.$elm$.parentNode,!1),on(mn,Gn),re.insertBefore(mn.$elm$,Jt.$elm$),mn=_e[--Bt],Gn=ae[++Ke];else{for(Nt=-1,kt=qe;kt<=Bt;++kt)if(_e[kt]&&null!==_e[kt].$key$&&_e[kt].$key$===Gn.$key$){Nt=kt;break}Nt>=0?(es=_e[Nt],es.$tag$!==Gn.$tag$?Jn=di(_e&&_e[Ke],it,Nt,re):(on(es,Gn),_e[Nt]=void 0,Jn=es.$elm$),Gn=ae[++Ke]):(Jn=di(_e&&_e[Ke],it,Ke,re),Gn=ae[++Ke]),Jn&&fn(Jt.$elm$).insertBefore(Jn,tn(Jt.$elm$))}qe>Bt?Br(re,null==ae[zn+1]?null:ae[zn+1].$elm$,it,ae,Ke,zn):Ke>zn&&Di(_e,qe,Bt)})(it,ae,_e,qe):null!==qe?(null!==re.$text$&&(it.textContent=""),Br(it,null,_e,qe,0,qe.length-1)):null!==ae&&Di(ae,0,ae.length-1),je&&"svg"===Ke&&(je=!1)):(kt=it["s-cr"])?kt.parentNode.textContent=Nt:re.$text$!==Nt&&(it.data=Nt)},Jr=re=>{const _e=re.childNodes;let it,ae,qe,Ke,Nt,kt;for(ae=0,qe=_e.length;ae<qe;ae++)if(it=_e[ae],1===it.nodeType){if(it["s-sr"])for(Nt=it["s-sn"],it.hidden=!1,Ke=0;Ke<qe;Ke++)if(kt=_e[Ke].nodeType,_e[Ke]["s-hn"]!==it["s-hn"]||""!==Nt){if(1===kt&&Nt===_e[Ke].getAttribute("slot")){it.hidden=!0;break}}else if(1===kt||3===kt&&""!==_e[Ke].textContent.trim()){it.hidden=!0;break}Jr(it)}},Sr=[],qr=re=>{let _e,it,ae,qe,Ke,Nt,kt=0;const Bt=re.childNodes,Jt=Bt.length;for(;kt<Jt;kt++){if(_e=Bt[kt],_e["s-sr"]&&(it=_e["s-cr"])&&it.parentNode)for(ae=it.parentNode.childNodes,qe=_e["s-sn"],Nt=ae.length-1;Nt>=0;Nt--)it=ae[Nt],!it["s-cn"]&&!it["s-nr"]&&it["s-hn"]!==_e["s-hn"]&&(ni(it,qe)?(Ke=Sr.find(mn=>mn.$nodeToRelocate$===it),ye=!0,it["s-sn"]=it["s-sn"]||qe,Ke?Ke.$slotRefNode$=_e:Sr.push({$slotRefNode$:_e,$nodeToRelocate$:it}),it["s-sr"]&&Sr.map(mn=>{ni(mn.$nodeToRelocate$,it["s-sn"])&&(Ke=Sr.find(zn=>zn.$nodeToRelocate$===it),Ke&&!mn.$slotRefNode$&&(mn.$slotRefNode$=Ke.$slotRefNode$))})):Sr.some(mn=>mn.$nodeToRelocate$===it)||Sr.push({$nodeToRelocate$:it}));1===_e.nodeType&&qr(_e)}},ni=(re,_e)=>1===re.nodeType?null===re.getAttribute("slot")&&""===_e||re.getAttribute("slot")===_e:re["s-sn"]===_e||""===_e,pi=re=>{re.$attrs$&&re.$attrs$.ref&&re.$attrs$.ref(null),re.$children$&&re.$children$.map(pi)},xi=(re,_e)=>{_e&&!re.$onRenderResolve$&&_e["s-p"]&&_e["s-p"].push(new Promise(it=>re.$onRenderResolve$=it))},or=(re,_e)=>{if(re.$flags$|=16,!(4&re.$flags$))return xi(re,re.$ancestorComponent$),Oi(()=>Yn(re,_e));re.$flags$|=512},Yn=(re,_e)=>{const ae=re.$lazyInstance$;let qe;return _e&&(re.$flags$|=256,re.$queuedListeners$&&(re.$queuedListeners$.map(([Ke,Nt])=>Qe(ae,Ke,Nt)),re.$queuedListeners$=null),qe=Qe(ae,"componentWillLoad")),qe=Xt(qe,()=>Qe(ae,"componentWillRender")),Xt(qe,()=>Ei(re,ae,_e))},Ei=function(){var re=(0,E.Z)(function*(_e,it,ae){const qe=_e.$hostElement$,Nt=qe["s-rc"];ae&&(re=>{const _e=re.$cmpMeta$,it=re.$hostElement$,ae=_e.$flags$,Ke=wn(it.shadowRoot?it.shadowRoot:it.getRootNode(),_e,re.$modeName$);10&ae&&(it["s-sc"]=Ke,it.classList.add(Ke+"-h"),2&ae&&it.classList.add(Ke+"-s"))})(_e);Pr(_e,it),Nt&&(Nt.map(Bt=>Bt()),qe["s-rc"]=void 0);{const Bt=qe["s-p"],Jt=()=>mr(_e);0===Bt.length?Jt():(Promise.all(Bt).then(Jt),_e.$flags$|=4,Bt.length=0)}});return function(it,ae,qe){return re.apply(this,arguments)}}(),Pr=(re,_e,it)=>{try{_e=_e.render&&_e.render(),re.$flags$&=-17,re.$flags$|=2,((re,_e)=>{const it=re.$hostElement$,ae=re.$cmpMeta$,qe=re.$vnode$||_t(null,null),Ke=(re=>re&&re.$tag$===ct)(_e)?_e:ht(null,null,_e);if(Le=it.tagName,ae.$attrsToReflect$&&(Ke.$attrs$=Ke.$attrs$||{},ae.$attrsToReflect$.map(([Nt,kt])=>Ke.$attrs$[kt]=it[Nt])),Ke.$tag$=null,Ke.$flags$|=4,re.$vnode$=Ke,Ke.$elm$=qe.$elm$=it.shadowRoot||it,ee=it["s-sc"],fe=it["s-cr"],xe=0!=(1&ae.$flags$),ye=!1,on(qe,Ke),ar.$flags$|=1,Ue){qr(Ke.$elm$);let Nt,kt,Bt,Jt,mn,zn,Gn=0;for(;Gn<Sr.length;Gn++)Nt=Sr[Gn],kt=Nt.$nodeToRelocate$,kt["s-ol"]||(Bt=Wn.createTextNode(""),Bt["s-nr"]=kt,kt.parentNode.insertBefore(kt["s-ol"]=Bt,kt));for(Gn=0;Gn<Sr.length;Gn++)if(Nt=Sr[Gn],kt=Nt.$nodeToRelocate$,Nt.$slotRefNode$){for(Jt=Nt.$slotRefNode$.parentNode,mn=Nt.$slotRefNode$.nextSibling,Bt=kt["s-ol"];Bt=Bt.previousSibling;)if(zn=Bt["s-nr"],zn&&zn["s-sn"]===kt["s-sn"]&&Jt===zn.parentNode&&(zn=zn.nextSibling,!zn||!zn["s-nr"])){mn=zn;break}(!mn&&Jt!==kt.parentNode||kt.nextSibling!==mn)&&kt!==mn&&(!kt["s-hn"]&&kt["s-ol"]&&(kt["s-hn"]=kt["s-ol"].parentNode.nodeName),Jt.insertBefore(kt,mn))}else 1===kt.nodeType&&(kt.hidden=!0)}ye&&Jr(Ke.$elm$),ar.$flags$&=-2,Sr.length=0})(re,_e)}catch(ae){Nn(ae,re.$hostElement$)}return null},mr=re=>{const it=re.$hostElement$,qe=re.$lazyInstance$,Ke=re.$ancestorComponent$;Qe(qe,"componentDidRender"),64&re.$flags$?Qe(qe,"componentDidUpdate"):(re.$flags$|=64,zt(it),Qe(qe,"componentDidLoad"),re.$onReadyResolve$(it),Ke||Ge()),re.$onInstanceResolve$(it),re.$onRenderResolve$&&(re.$onRenderResolve$(),re.$onRenderResolve$=void 0),512&re.$flags$&&Xi(()=>or(re,!1)),re.$flags$&=-517},Ht=re=>{{const _e=Gr(re),it=_e.$hostElement$.isConnected;return it&&2==(18&_e.$flags$)&&or(_e,!1),it}},Ge=re=>{zt(Wn.documentElement),Xi(()=>ln(tr,"appload",{detail:{namespace:"ionic"}}))},Qe=(re,_e,it)=>{if(re&&re[_e])try{return re[_e](it)}catch(ae){Nn(ae)}},Xt=(re,_e)=>re&&re.then?re.then(_e):_e(),zt=re=>re.classList.add("hydrated"),We=(re,_e,it)=>{if(_e.$members$){re.watchers&&(_e.$watchers$=re.watchers);const ae=Object.entries(_e.$members$),qe=re.prototype;if(ae.map(([Ke,[Nt]])=>{31&Nt||2&it&&32&Nt?Object.defineProperty(qe,Ke,{get(){return((re,_e)=>Gr(this).$instanceValues$.get(_e))(0,Ke)},set(kt){((re,_e,it,ae)=>{const qe=Gr(re),Ke=qe.$hostElement$,Nt=qe.$instanceValues$.get(_e),kt=qe.$flags$,Bt=qe.$lazyInstance$;it=((re,_e)=>null==re||Ie(re)?re:4&_e?"false"!==re&&(""===re||!!re):2&_e?parseFloat(re):1&_e?String(re):re)(it,ae.$members$[_e][0]);const Jt=Number.isNaN(Nt)&&Number.isNaN(it);if((!(8&kt)||void 0===Nt)&&it!==Nt&&!Jt&&(qe.$instanceValues$.set(_e,it),Bt)){if(ae.$watchers$&&128&kt){const zn=ae.$watchers$[_e];zn&&zn.map(Gn=>{try{Bt[Gn](it,Nt,_e)}catch(gi){Nn(gi,Ke)}})}2==(18&kt)&&or(qe,!1)}})(this,Ke,kt,_e)},configurable:!0,enumerable:!0}):1&it&&64&Nt&&Object.defineProperty(qe,Ke,{value(...kt){const Bt=Gr(this);return Bt.$onInstancePromise$.then(()=>Bt.$lazyInstance$[Ke](...kt))}})}),1&it){const Ke=new Map;qe.attributeChangedCallback=function(Nt,kt,Bt){ar.jmp(()=>{const Jt=Ke.get(Nt);if(this.hasOwnProperty(Jt))Bt=this[Jt],delete this[Jt];else if(qe.hasOwnProperty(Jt)&&"number"==typeof this[Jt]&&this[Jt]==Bt)return;this[Jt]=(null!==Bt||"boolean"!=typeof this[Jt])&&Bt})},re.observedAttributes=ae.filter(([Nt,kt])=>15&kt[0]).map(([Nt,kt])=>{const Bt=kt[1]||Nt;return Ke.set(Bt,Nt),512&kt[0]&&_e.$attrsToReflect$.push([Nt,Bt]),Bt})}}return re},Ct=function(){var re=(0,E.Z)(function*(_e,it,ae,qe,Ke){if(!(32&it.$flags$)){{if(it.$flags$|=32,(Ke=yr(ae)).then){const Jt=()=>{};Ke=yield Ke,Jt()}Ke.isProxied||(ae.$watchers$=Ke.watchers,We(Ke,ae,2),Ke.isProxied=!0);const Bt=()=>{};it.$flags$|=8;try{new Ke(it)}catch(Jt){Nn(Jt)}it.$flags$&=-9,it.$flags$|=128,Bt(),ot(it.$lazyInstance$)}if(Ke.style){let Bt=Ke.style;"string"!=typeof Bt&&(Bt=Bt[it.$modeName$=(re=>Un.map(_e=>_e(re)).find(_e=>!!_e))(_e)]);const Jt=En(ae,it.$modeName$);if(!Cr.has(Jt)){const mn=()=>{};Kn(Jt,Bt,!!(1&ae.$flags$)),mn()}}}const Nt=it.$ancestorComponent$,kt=()=>or(it,!0);Nt&&Nt["s-rc"]?Nt["s-rc"].push(kt):kt()});return function(it,ae,qe,Ke,Nt){return re.apply(this,arguments)}}(),ot=re=>{Qe(re,"connectedCallback")},Ye=re=>{const _e=re["s-cr"]=Wn.createComment("");_e["s-cn"]=!0,re.insertBefore(_e,re.firstChild)},me=(re,_e={})=>{var it;const qe=[],Ke=_e.exclude||[],Nt=tr.customElements,kt=Wn.head,Bt=kt.querySelector("meta[charset]"),Jt=Wn.createElement("style"),mn=[],zn=Wn.querySelectorAll(`[${pt}]`);let Gn,gi=!0,Jn=0;for(Object.assign(ar,_e),ar.$resourcesUrl$=new URL(_e.resourcesUrl||"./",Wn.baseURI).href,ar.$flags$|=2;Jn<zn.length;Jn++)Kn(zn[Jn].getAttribute(pt),lr(zn[Jn].innerHTML),!0);re.map(es=>{es[1].map(ut=>{const tt={$flags$:ut[0],$tagName$:ut[1],$members$:ut[2],$listeners$:ut[3]};tt.$members$=ut[2],tt.$listeners$=ut[3],tt.$attrsToReflect$=[],tt.$watchers$={};const Et=tt.$tagName$,qt=class extends HTMLElement{constructor(an){super(an),At(an=this,tt),1&tt.$flags$&&an.attachShadow({mode:"open",delegatesFocus:!!(16&tt.$flags$)})}connectedCallback(){Gn&&(clearTimeout(Gn),Gn=null),gi?mn.push(this):ar.jmp(()=>(re=>{if(!(1&ar.$flags$)){const _e=Gr(re),it=_e.$cmpMeta$,ae=()=>{};if(1&_e.$flags$)dt(re,_e,it.$listeners$),ot(_e.$lazyInstance$);else{let qe;if(_e.$flags$|=1,qe=re.getAttribute(de),qe){if(1&it.$flags$){const Ke=wn(re.shadowRoot,it,re.getAttribute("s-mode"));re.classList.remove(Ke+"-h",Ke+"-s")}((re,_e,it,ae)=>{const Ke=re.shadowRoot,Nt=[],Bt=Ke?[]:null,Jt=ae.$vnode$=_t(_e,null);ar.$orgLocNodes$||vt(Wn.body,ar.$orgLocNodes$=new Map),re[de]=it,re.removeAttribute(de),lt(Jt,Nt,[],Bt,re,re,it),Nt.map(mn=>{const zn=mn.$hostId$+"."+mn.$nodeId$,Gn=ar.$orgLocNodes$.get(zn),gi=mn.$elm$;Gn&&ji&&""===Gn["s-en"]&&Gn.parentNode.insertBefore(gi,Gn.nextSibling),Ke||(gi["s-hn"]=_e,Gn&&(gi["s-ol"]=Gn,gi["s-ol"]["s-nr"]=gi)),ar.$orgLocNodes$.delete(zn)}),Ke&&Bt.map(mn=>{mn&&Ke.appendChild(mn)})})(re,it.$tagName$,qe,_e)}qe||12&it.$flags$&&Ye(re);{let Ke=re;for(;Ke=Ke.parentNode||Ke.host;)if(1===Ke.nodeType&&Ke.hasAttribute("s-id")&&Ke["s-p"]||Ke["s-p"]){xi(_e,_e.$ancestorComponent$=Ke);break}}it.$members$&&Object.entries(it.$members$).map(([Ke,[Nt]])=>{if(31&Nt&&re.hasOwnProperty(Ke)){const kt=re[Ke];delete re[Ke],re[Ke]=kt}}),Ct(re,_e,it)}ae()}})(this))}disconnectedCallback(){ar.jmp(()=>(re=>{if(!(1&ar.$flags$)){const _e=Gr(this),it=_e.$lazyInstance$;_e.$rmListeners$&&(_e.$rmListeners$.map(ae=>ae()),_e.$rmListeners$=void 0),Qe(it,"disconnectedCallback")}})())}componentOnReady(){return Gr(this).$onReadyPromise$}};tt.$lazyBundleId$=es[0],!Ke.includes(Et)&&!Nt.get(Et)&&(qe.push(Et),Nt.define(Et,We(qt,tt,1)))})});{Jt.innerHTML=qe+"{visibility:hidden}.hydrated{visibility:inherit}",Jt.setAttribute("data-styles","");const es=null!==(it=ar.$nonce$)&&void 0!==it?it:$e(Wn);null!=es&&Jt.setAttribute("nonce",es),kt.insertBefore(Jt,Bt?Bt.nextSibling:kt.firstChild)}gi=!1,mn.length?mn.map(es=>es.connectedCallback()):ar.jmp(()=>Gn=setTimeout(Ge,30))},dt=(re,_e,it,ae)=>{it&&it.map(([qe,Ke,Nt])=>{const kt=en(re,qe),Bt=Ot(_e,Nt),Jt=bn(qe);ar.ael(kt,Ke,Bt,Jt),(_e.$rmListeners$=_e.$rmListeners$||[]).push(()=>ar.rel(kt,Ke,Bt,Jt))})},Ot=(re,_e)=>it=>{try{256&re.$flags$?re.$lazyInstance$[_e](it):(re.$queuedListeners$=re.$queuedListeners$||[]).push([_e,it])}catch(ae){Nn(ae)}},en=(re,_e)=>4&_e?Wn:8&_e?tr:16&_e?Wn.body:re,bn=re=>0!=(2&re),cr=new WeakMap,Gr=re=>cr.get(re),Ut=(re,_e)=>cr.set(_e.$lazyInstance$=re,_e),At=(re,_e)=>{const it={$flags$:0,$hostElement$:re,$cmpMeta$:_e,$instanceValues$:new Map};return it.$onInstancePromise$=new Promise(ae=>it.$onInstanceResolve$=ae),it.$onReadyPromise$=new Promise(ae=>it.$onReadyResolve$=ae),re["s-p"]=[],re["s-rc"]=[],dt(re,it,_e.$listeners$),cr.set(re,it)},Qt=(re,_e)=>_e in re,Nn=(re,_e)=>(0,console.error)(re,_e),jn=new Map,yr=(re,_e,it)=>{const ae=re.$tagName$.replace(/-/g,"_"),qe=re.$lazyBundleId$,Ke=jn.get(qe);return Ke?Ke[ae]:H(863)(`./${qe}.entry.js`).then(Nt=>(jn.set(qe,Nt),Nt[ae]),Nn)},Cr=new Map,Un=[],tr=typeof window<"u"?window:{},Wn=tr.document||{head:{}},ar={$flags$:0,$resourcesUrl$:"",jmp:re=>re(),raf:re=>requestAnimationFrame(re),ael:(re,_e,it,ae)=>re.addEventListener(_e,it,ae),rel:(re,_e,it,ae)=>re.removeEventListener(_e,it,ae),ce:(re,_e)=>new CustomEvent(re,_e)},Pi=re=>{Object.assign(ar,re)},ji=!0,Ji=re=>Promise.resolve(re),ys=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),ri=[],Cn=[],dr=(re,_e)=>it=>{re.push(it),Ce||(Ce=!0,_e&&4&ar.$flags$?Xi(Dr):ar.raf(Dr))},li=re=>{for(let _e=0;_e<re.length;_e++)try{re[_e](performance.now())}catch(it){Nn(it)}re.length=0},Dr=()=>{li(ri),li(Cn),(Ce=ri.length>0)&&ar.raf(Dr)},Xi=re=>Ji().then(re),ii=dr(ri,!1),Oi=dr(Cn,!0)},1178:(yn,gt,H)=>{"use strict";H.d(gt,{a:()=>y,b:()=>ee,p:()=>E});const E=(fe,...Le)=>console.warn(`[Ionic Warning]: ${fe}`,...Le),y=(fe,...Le)=>console.error(`[Ionic Error]: ${fe}`,...Le),ee=(fe,...Le)=>console.error(`<${fe.tagName.toLowerCase()}> must be used inside ${Le.join(" or ")}.`)},6406:(yn,gt,H)=>{"use strict";H.d(gt,{a:()=>ge,b:()=>wt,c:()=>ee,g:()=>Ce,i:()=>ft});var E=H(9816);class y{constructor(){this.m=new Map}reset(Fe){this.m=new Map(Object.entries(Fe))}get(Fe,Ne){const lt=this.m.get(Fe);return void 0!==lt?lt:Ne}getBoolean(Fe,Ne=!1){const lt=this.m.get(Fe);return void 0===lt?Ne:"string"==typeof lt?"true"===lt:!!lt}getNumber(Fe,Ne){const lt=parseFloat(this.m.get(Fe));return isNaN(lt)?void 0!==Ne?Ne:NaN:lt}set(Fe,Ne){this.m.set(Fe,Ne)}}const ee=new y,je="ionic-persist-config",Ce=ke=>ve(ke),ge=(ke,Fe)=>("string"==typeof ke&&(Fe=ke,ke=void 0),Ce(ke).includes(Fe)),ve=(ke=window)=>{if(typeof ke>"u")return[];ke.Ionic=ke.Ionic||{};let Fe=ke.Ionic.platforms;return null==Fe&&(Fe=ke.Ionic.platforms=ze(ke),Fe.forEach(Ne=>ke.document.documentElement.classList.add(`plt-${Ne}`))),Fe},ze=ke=>{const Fe=ee.get("platform");return Object.keys(_t).filter(Ne=>{const lt=null==Fe?void 0:Fe[Ne];return"function"==typeof lt?lt(ke):_t[Ne](ke)})},rt=ke=>!!($e(ke,/iPad/i)||$e(ke,/Macintosh/i)&&et(ke)),Se=ke=>$e(ke,/android|sink/i),et=ke=>ht(ke,"(any-pointer:coarse)"),xt=ke=>Be(ke)||Oe(ke),Be=ke=>!!(ke.cordova||ke.phonegap||ke.PhoneGap),Oe=ke=>{const Fe=ke.Capacitor;return!(null==Fe||!Fe.isNative)},$e=(ke,Fe)=>Fe.test(ke.navigator.userAgent),ht=(ke,Fe)=>{var Ne;return null===(Ne=ke.matchMedia)||void 0===Ne?void 0:Ne.call(ke,Fe).matches},_t={ipad:rt,iphone:ke=>$e(ke,/iPhone/i),ios:ke=>$e(ke,/iPhone|iPod/i)||rt(ke),android:Se,phablet:ke=>{const Fe=ke.innerWidth,Ne=ke.innerHeight,lt=Math.min(Fe,Ne),vt=Math.max(Fe,Ne);return lt>390&&lt<520&&vt>620&&vt<800},tablet:ke=>{const Fe=ke.innerWidth,Ne=ke.innerHeight,lt=Math.min(Fe,Ne),vt=Math.max(Fe,Ne);return rt(ke)||(ke=>Se(ke)&&!$e(ke,/mobile/i))(ke)||lt>460&&lt<820&&vt>780&&vt<1400},cordova:Be,capacitor:Oe,electron:ke=>$e(ke,/electron/i),pwa:ke=>{var Fe;return!!(null!==(Fe=ke.matchMedia)&&void 0!==Fe&&Fe.call(ke,"(display-mode: standalone)").matches||ke.navigator.standalone)},mobile:et,mobileweb:ke=>et(ke)&&!xt(ke),desktop:ke=>!et(ke),hybrid:xt};let ct;const wt=ke=>ke&&(0,E.g)(ke)||ct,ft=(ke={})=>{if(typeof window>"u")return;const Fe=window.document,Ne=window,lt=Ne.Ionic=Ne.Ionic||{},vt={};ke._ael&&(vt.ael=ke._ael),ke._rel&&(vt.rel=ke._rel),ke._ce&&(vt.ce=ke._ce),(0,E.a)(vt);const Zt=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(ke=>{try{const Fe=ke.sessionStorage.getItem(je);return null!==Fe?JSON.parse(Fe):{}}catch{return{}}})(Ne)),{persistConfig:!1}),lt.config),(ke=>{const Fe={};return ke.location.search.slice(1).split("&").map(Ne=>Ne.split("=")).map(([Ne,lt])=>[decodeURIComponent(Ne),decodeURIComponent(lt)]).filter(([Ne])=>((ke,Fe)=>ke.substr(0,Fe.length)===Fe)(Ne,"ionic:")).map(([Ne,lt])=>[Ne.slice("ionic:".length),lt]).forEach(([Ne,lt])=>{Fe[Ne]=lt}),Fe})(Ne)),ke);ee.reset(Zt),ee.getBoolean("persistConfig")&&((ke,Fe)=>{try{ke.sessionStorage.setItem(je,JSON.stringify(Fe))}catch{return}})(Ne,Zt),ve(Ne),lt.config=ee,lt.mode=ct=ee.get("mode",Fe.documentElement.getAttribute("mode")||(ge(Ne,"ios")?"ios":"md")),ee.set("mode",ct),Fe.documentElement.setAttribute("mode",ct),Fe.documentElement.classList.add(ct),ee.getBoolean("_testing")&&ee.set("animated",!1);const $t=Tt=>{var De;return null===(De=Tt.tagName)||void 0===De?void 0:De.startsWith("ION-")},vn=Tt=>["ios","md"].includes(Tt);(0,E.c)(Tt=>{for(;Tt;){const De=Tt.mode||Tt.getAttribute("mode");if(De){if(vn(De))return De;$t(Tt)&&console.warn('Invalid ionic mode: "'+De+'", expected: "ios" or "md"')}Tt=Tt.parentElement}return ct})}},500:(yn,gt,H)=>{"use strict";H.r(gt),H.d(gt,{iosTransitionAnimation:()=>ze,shadow:()=>ye});var E=H(2200),y=H(9459);H(3457),H(9816);const xe=He=>document.querySelector(`${He}.ion-cloned-element`),ye=He=>He.shadowRoot||He,Ue=He=>{const rt="ION-TABS"===He.tagName?He:He.querySelector("ion-tabs"),Dt="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=rt){const Re=rt.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=Re?Re.querySelector(Dt):null}return He.querySelector(Dt)},je=(He,rt)=>{const Dt="ION-TABS"===He.tagName?He:He.querySelector("ion-tabs");let Re=[];if(null!=Dt){const Se=Dt.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=Se&&(Re=Se.querySelectorAll("ion-buttons"))}else Re=He.querySelectorAll("ion-buttons");for(const Se of Re){const de=Se.closest("ion-header"),pt=de&&!de.classList.contains("header-collapse-condense-inactive"),Y=Se.querySelector("ion-back-button"),et=Se.classList.contains("buttons-collapse");if(null!==Y&&("start"===Se.slot||""===Se.slot)&&(et&&pt&&rt||!et))return Y}return null},ge=(He,rt,Dt,Re,Se,de)=>{const pt=rt?`calc(100% - ${de.right+4}px)`:de.left-4+"px",Y=rt?"7px":"-7px",et=rt?"-4px":"4px",Ze=rt?"-4px":"4px",xt=rt?"right":"left",Be=rt?"left":"right",Ie=Dt?[{offset:0,opacity:1,transform:`translate3d(${et}, ${de.top-46}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${Y}, ${Se.top-40}px, 0) scale(2.1)`}]:[{offset:0,opacity:0,transform:`translate3d(${Y}, ${Se.top-40}px, 0) scale(2.1)`},{offset:1,opacity:1,transform:`translate3d(${et}, ${de.top-46}px, 0) scale(1)`}],_t=Dt?[{offset:0,opacity:1,transform:`translate3d(${Ze}, ${de.top-46}px, 0) scale(1)`},{offset:.2,opacity:0,transform:`translate3d(${Ze}, ${de.top-41}px, 0) scale(0.6)`},{offset:1,opacity:0,transform:`translate3d(${Ze}, ${de.top-41}px, 0) scale(0.6)`}]:[{offset:0,opacity:0,transform:`translate3d(${Ze}, ${de.top-41}px, 0) scale(0.6)`},{offset:1,opacity:1,transform:`translate3d(${Ze}, ${de.top-46}px, 0) scale(1)`}],ct=(0,E.c)(),wt=(0,E.c)(),ft=xe("ion-back-button"),ke=ye(ft).querySelector(".button-text"),Fe=ye(ft).querySelector("ion-icon");ft.text=Re.text,ft.mode=Re.mode,ft.icon=Re.icon,ft.color=Re.color,ft.disabled=Re.disabled,ft.style.setProperty("display","block"),ft.style.setProperty("position","fixed"),wt.addElement(Fe),ct.addElement(ke),ct.beforeStyles({"transform-origin":`${xt} center`}).beforeAddWrite(()=>{Re.style.setProperty("display","none"),ft.style.setProperty(xt,pt)}).afterAddWrite(()=>{Re.style.setProperty("display",""),ft.style.setProperty("display","none"),ft.style.removeProperty(xt)}).keyframes(Ie),wt.beforeStyles({"transform-origin":`${Be} center`}).keyframes(_t),He.addAnimation([ct,wt])},ve=(He,rt,Dt,Re,Se,de)=>{const pt=rt?`calc(100% - ${Se.right}px)`:`${Se.left}px`,Y=rt?"-18px":"18px",et=rt?"right":"left",Be=Dt?[{offset:0,opacity:0,transform:`translate3d(${Y}, ${de.top-4}px, 0) scale(0.49)`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0, ${Se.top-2}px, 0) scale(1)`}]:[{offset:0,opacity:.99,transform:`translate3d(0, ${Se.top-2}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${Y}, ${de.top-4}px, 0) scale(0.5)`}],Oe=xe("ion-title"),Pe=(0,E.c)();Oe.innerText=Re.innerText,Oe.size=Re.size,Oe.color=Re.color,Pe.addElement(Oe),Pe.beforeStyles({"transform-origin":`${et} center`,height:"46px",display:"",position:"relative",[et]:pt}).beforeAddWrite(()=>{Re.style.setProperty("display","none")}).afterAddWrite(()=>{Re.style.setProperty("display",""),Oe.style.setProperty("display","none")}).keyframes(Be),He.addAnimation(Pe)},ze=(He,rt)=>{var Dt;try{const Re="cubic-bezier(0.32,0.72,0,1)",Se="opacity",de="transform",pt="0%",et="rtl"===He.ownerDocument.dir,Ze=et?"-99.5%":"99.5%",xt=et?"33%":"-33%",Be=rt.enteringEl,Oe=rt.leavingEl,Pe="back"===rt.direction,Ie=Be.querySelector(":scope > ion-content"),$e=Be.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),ht=Be.querySelectorAll(":scope > ion-header > ion-toolbar"),_t=(0,E.c)(),ct=(0,E.c)();if(_t.addElement(Be).duration((null!==(Dt=rt.duration)&&void 0!==Dt?Dt:0)||540).easing(rt.easing||Re).fill("both").beforeRemoveClass("ion-page-invisible"),Oe&&null!=He){const Fe=(0,E.c)();Fe.addElement(He),_t.addAnimation(Fe)}if(Ie||0!==ht.length||0!==$e.length?(ct.addElement(Ie),ct.addElement($e)):ct.addElement(Be.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),_t.addAnimation(ct),Pe?ct.beforeClearStyles([Se]).fromTo("transform",`translateX(${xt})`,`translateX(${pt})`).fromTo(Se,.8,1):ct.beforeClearStyles([Se]).fromTo("transform",`translateX(${Ze})`,`translateX(${pt})`),Ie){const Fe=ye(Ie).querySelector(".transition-effect");if(Fe){const Ne=Fe.querySelector(".transition-cover"),lt=Fe.querySelector(".transition-shadow"),vt=(0,E.c)(),Zt=(0,E.c)(),$t=(0,E.c)();vt.addElement(Fe).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Zt.addElement(Ne).beforeClearStyles([Se]).fromTo(Se,0,.1),$t.addElement(lt).beforeClearStyles([Se]).fromTo(Se,.03,.7),vt.addAnimation([Zt,$t]),ct.addAnimation([vt])}}const wt=Be.querySelector("ion-header.header-collapse-condense"),{forward:ft,backward:ke}=((He,rt,Dt,Re,Se)=>{const de=je(Re,Dt),pt=Ue(Se),Y=Ue(Re),et=je(Se,Dt),Ze=null!==de&&null!==pt&&!Dt,xt=null!==Y&&null!==et&&Dt;if(Ze){const Be=pt.getBoundingClientRect(),Oe=de.getBoundingClientRect();ve(He,rt,Dt,pt,Be,Oe),ge(He,rt,Dt,de,Be,Oe)}else if(xt){const Be=Y.getBoundingClientRect(),Oe=et.getBoundingClientRect();ve(He,rt,Dt,Y,Be,Oe),ge(He,rt,Dt,et,Be,Oe)}return{forward:Ze,backward:xt}})(_t,et,Pe,Be,Oe);if(ht.forEach(Fe=>{const Ne=(0,E.c)();Ne.addElement(Fe),_t.addAnimation(Ne);const lt=(0,E.c)();lt.addElement(Fe.querySelector("ion-title"));const vt=(0,E.c)(),Zt=Array.from(Fe.querySelectorAll("ion-buttons,[menuToggle]")),$t=Fe.closest("ion-header"),vn=null==$t?void 0:$t.classList.contains("header-collapse-condense-inactive");let Tt;Tt=Zt.filter(Pe?Kn=>{const wn=Kn.classList.contains("buttons-collapse");return wn&&!vn||!wn}:Kn=>!Kn.classList.contains("buttons-collapse")),vt.addElement(Tt);const De=(0,E.c)();De.addElement(Fe.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const St=(0,E.c)();St.addElement(ye(Fe).querySelector(".toolbar-background"));const ln=(0,E.c)(),Rn=Fe.querySelector("ion-back-button");if(Rn&&ln.addElement(Rn),Ne.addAnimation([lt,vt,De,St,ln]),vt.fromTo(Se,.01,1),De.fromTo(Se,.01,1),Pe)vn||lt.fromTo("transform",`translateX(${xt})`,`translateX(${pt})`).fromTo(Se,.01,1),De.fromTo("transform",`translateX(${xt})`,`translateX(${pt})`),ln.fromTo(Se,.01,1);else if(wt||lt.fromTo("transform",`translateX(${Ze})`,`translateX(${pt})`).fromTo(Se,.01,1),De.fromTo("transform",`translateX(${Ze})`,`translateX(${pt})`),St.beforeClearStyles([Se,"transform"]),(null==$t?void 0:$t.translucent)?St.fromTo("transform",et?"translateX(-100%)":"translateX(100%)","translateX(0px)"):St.fromTo(Se,.01,"var(--opacity)"),ft||ln.fromTo(Se,.01,1),Rn&&!ft){const wn=(0,E.c)();wn.addElement(ye(Rn).querySelector(".button-text")).fromTo("transform",et?"translateX(-100px)":"translateX(100px)","translateX(0px)"),Ne.addAnimation(wn)}}),Oe){const Fe=(0,E.c)(),Ne=Oe.querySelector(":scope > ion-content"),lt=Oe.querySelectorAll(":scope > ion-header > ion-toolbar"),vt=Oe.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(Ne||0!==lt.length||0!==vt.length?(Fe.addElement(Ne),Fe.addElement(vt)):Fe.addElement(Oe.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),_t.addAnimation(Fe),Pe){Fe.beforeClearStyles([Se]).fromTo("transform",`translateX(${pt})`,et?"translateX(-100%)":"translateX(100%)");const Zt=(0,y.g)(Oe);_t.afterAddWrite(()=>{"normal"===_t.getDirection()&&Zt.style.setProperty("display","none")})}else Fe.fromTo("transform",`translateX(${pt})`,`translateX(${xt})`).fromTo(Se,1,.8);if(Ne){const Zt=ye(Ne).querySelector(".transition-effect");if(Zt){const $t=Zt.querySelector(".transition-cover"),vn=Zt.querySelector(".transition-shadow"),Tt=(0,E.c)(),De=(0,E.c)(),St=(0,E.c)();Tt.addElement(Zt).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),De.addElement($t).beforeClearStyles([Se]).fromTo(Se,.1,0),St.addElement(vn).beforeClearStyles([Se]).fromTo(Se,.7,.03),Tt.addAnimation([De,St]),Fe.addAnimation([Tt])}}lt.forEach(Zt=>{const $t=(0,E.c)();$t.addElement(Zt);const vn=(0,E.c)();vn.addElement(Zt.querySelector("ion-title"));const Tt=(0,E.c)(),De=Zt.querySelectorAll("ion-buttons,[menuToggle]"),St=Zt.closest("ion-header"),ln=null==St?void 0:St.classList.contains("header-collapse-condense-inactive"),Rn=Array.from(De).filter(Er=>{const Xn=Er.classList.contains("buttons-collapse");return Xn&&!ln||!Xn});Tt.addElement(Rn);const Kn=(0,E.c)(),wn=Zt.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");wn.length>0&&Kn.addElement(wn);const nn=(0,E.c)();nn.addElement(ye(Zt).querySelector(".toolbar-background"));const En=(0,E.c)(),lr=Zt.querySelector("ion-back-button");if(lr&&En.addElement(lr),$t.addAnimation([vn,Tt,Kn,En,nn]),_t.addAnimation($t),En.fromTo(Se,.99,0),Tt.fromTo(Se,.99,0),Kn.fromTo(Se,.99,0),Pe){if(ln||vn.fromTo("transform",`translateX(${pt})`,et?"translateX(-100%)":"translateX(100%)").fromTo(Se,.99,0),Kn.fromTo("transform",`translateX(${pt})`,et?"translateX(-100%)":"translateX(100%)"),nn.beforeClearStyles([Se,"transform"]),(null==St?void 0:St.translucent)?nn.fromTo("transform","translateX(0px)",et?"translateX(-100%)":"translateX(100%)"):nn.fromTo(Se,"var(--opacity)",0),lr&&!ke){const Xn=(0,E.c)();Xn.addElement(ye(lr).querySelector(".button-text")).fromTo("transform",`translateX(${pt})`,`translateX(${(et?-124:124)+"px"})`),$t.addAnimation(Xn)}}else ln||vn.fromTo("transform",`translateX(${pt})`,`translateX(${xt})`).fromTo(Se,.99,0).afterClearStyles([de,Se]),Kn.fromTo("transform",`translateX(${pt})`,`translateX(${xt})`).afterClearStyles([de,Se]),En.afterClearStyles([Se]),vn.afterClearStyles([Se]),Tt.afterClearStyles([Se])})}return _t}catch(Re){throw Re}}},9892:(yn,gt,H)=>{"use strict";H.r(gt),H.d(gt,{mdTransitionAnimation:()=>Le});var E=H(2200),y=H(9459);H(3457),H(9816);const Le=(xe,ye)=>{var Ue,je,Ce;const ze="back"===ye.direction,rt=ye.leavingEl,Dt=(0,y.g)(ye.enteringEl),Re=Dt.querySelector("ion-toolbar"),Se=(0,E.c)();if(Se.addElement(Dt).fill("both").beforeRemoveClass("ion-page-invisible"),ze?Se.duration((null!==(Ue=ye.duration)&&void 0!==Ue?Ue:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):Se.duration((null!==(je=ye.duration)&&void 0!==je?je:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),Re){const de=(0,E.c)();de.addElement(Re),Se.addAnimation(de)}if(rt&&ze){Se.duration((null!==(Ce=ye.duration)&&void 0!==Ce?Ce:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const de=(0,E.c)();de.addElement((0,y.g)(rt)).onFinish(pt=>{1===pt&&de.elements.length>0&&de.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),Se.addAnimation(de)}return Se}},6280:(yn,gt,H)=>{"use strict";H.d(gt,{B:()=>vt,G:()=>Zt,a:()=>Ce,b:()=>ge,c:()=>rt,d:()=>$t,e:()=>vn,f:()=>$e,g:()=>_t,h:()=>ft,i:()=>Fe,j:()=>Re,k:()=>Ue,m:()=>ze,n:()=>pt,o:()=>Pe,s:()=>lt});var E=H(5861),y=H(6406),ee=H(5375),fe=H(7593),Le=H(9397),xe=H(1178);let ye=0;const Ue=new WeakMap,je=Tt=>({create:De=>Se(Tt,De),dismiss:(De,St,ln)=>Be(document,De,St,Tt,ln),getTop:()=>(0,E.Z)(function*(){return Pe(document,Tt)})()}),Ce=je("ion-alert"),ge=je("ion-action-sheet"),ze=je("ion-modal"),rt=je("ion-popover"),Re=Tt=>{typeof document<"u"&&xt(document);const De=ye++;Tt.overlayIndex=De,Tt.hasAttribute("id")||(Tt.id=`ion-overlay-${De}`)},Se=(Tt,De)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(Tt).then(()=>{const St=document.createElement(Tt);return St.classList.add("overlay-hidden"),Object.assign(St,Object.assign(Object.assign({},De),{hasController:!0})),ct(document).appendChild(St),new Promise(ln=>(0,Le.c)(St,ln))}):Promise.resolve(),de='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',pt=(Tt,De)=>{let St=Tt.querySelector(de);const ln=null==St?void 0:St.shadowRoot;ln&&(St=ln.querySelector(de)||St),St?(0,Le.f)(St):De.focus()},et=(Tt,De)=>{const St=Array.from(Tt.querySelectorAll(de));let ln=St.length>0?St[St.length-1]:null;const Rn=null==ln?void 0:ln.shadowRoot;Rn&&(ln=Rn.querySelector(de)||ln),ln?ln.focus():De.focus()},xt=Tt=>{0===ye&&(ye=1,Tt.addEventListener("focus",De=>{((Tt,De)=>{const St=Pe(De,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),ln=Tt.target;St&&ln&&!St.classList.contains("ion-disable-focus-trap")&&(St.shadowRoot?(()=>{if(St.contains(ln))St.lastFocus=ln;else{const wn=St.lastFocus;pt(St,St),wn===De.activeElement&&et(St,St),St.lastFocus=De.activeElement}})():(()=>{if(St===ln)St.lastFocus=void 0;else{const wn=(0,Le.g)(St);if(!wn.contains(ln))return;const nn=wn.querySelector(".ion-overlay-wrapper");if(!nn)return;if(nn.contains(ln))St.lastFocus=ln;else{const En=St.lastFocus;pt(nn,St),En===De.activeElement&&et(nn,St),St.lastFocus=De.activeElement}}})())})(De,Tt)},!0),Tt.addEventListener("ionBackButton",De=>{const St=Pe(Tt);null!=St&&St.backdropDismiss&&De.detail.register(fe.OVERLAY_BACK_BUTTON_PRIORITY,()=>St.dismiss(void 0,vt))}),Tt.addEventListener("keydown",De=>{if("Escape"===De.key){const St=Pe(Tt);null!=St&&St.backdropDismiss&&St.dismiss(void 0,vt)}}))},Be=(Tt,De,St,ln,Rn)=>{const Kn=Pe(Tt,ln,Rn);return Kn?Kn.dismiss(De,St):Promise.reject("overlay does not exist")},Pe=(Tt,De,St)=>{const ln=((Tt,De)=>(void 0===De&&(De="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(Tt.querySelectorAll(De)).filter(St=>St.overlayIndex>0)))(Tt,De).filter(Rn=>!(Tt=>Tt.classList.contains("overlay-hidden"))(Rn));return void 0===St?ln[ln.length-1]:ln.find(Rn=>Rn.id===St)},Ie=(Tt=!1)=>{const St=ct(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");St&&(Tt?St.setAttribute("aria-hidden","true"):St.removeAttribute("aria-hidden"))},$e=function(){var Tt=(0,E.Z)(function*(De,St,ln,Rn,Kn){var wn,nn;if(De.presented)return;Ie(!0),De.presented=!0,De.willPresent.emit(),null===(wn=De.willPresentShorthand)||void 0===wn||wn.emit();const En=(0,y.b)(De),lr=De.enterAnimation?De.enterAnimation:y.c.get(St,"ios"===En?ln:Rn);(yield wt(De,lr,De.el,Kn))&&(De.didPresent.emit(),null===(nn=De.didPresentShorthand)||void 0===nn||nn.emit()),"ION-TOAST"!==De.el.tagName&&ht(De.el),De.keyboardClose&&(null===document.activeElement||!De.el.contains(document.activeElement))&&De.el.focus()});return function(St,ln,Rn,Kn,wn){return Tt.apply(this,arguments)}}(),ht=function(){var Tt=(0,E.Z)(function*(De){let St=document.activeElement;if(!St)return;const ln=null==St?void 0:St.shadowRoot;ln&&(St=ln.querySelector(de)||St),yield De.onDidDismiss(),St.focus()});return function(St){return Tt.apply(this,arguments)}}(),_t=function(){var Tt=(0,E.Z)(function*(De,St,ln,Rn,Kn,wn,nn){var En,lr;if(!De.presented)return!1;Ie(!1),De.presented=!1;try{De.el.style.setProperty("pointer-events","none"),De.willDismiss.emit({data:St,role:ln}),null===(En=De.willDismissShorthand)||void 0===En||En.emit({data:St,role:ln});const Er=(0,y.b)(De),Xn=De.leaveAnimation?De.leaveAnimation:y.c.get(Rn,"ios"===Er?Kn:wn);ln!==Zt&&(yield wt(De,Xn,De.el,nn)),De.didDismiss.emit({data:St,role:ln}),null===(lr=De.didDismissShorthand)||void 0===lr||lr.emit({data:St,role:ln}),Ue.delete(De),De.el.classList.add("overlay-hidden"),De.el.style.removeProperty("pointer-events"),void 0!==De.el.lastFocus&&(De.el.lastFocus=void 0)}catch(Er){console.error(Er)}return De.el.remove(),!0});return function(St,ln,Rn,Kn,wn,nn,En){return Tt.apply(this,arguments)}}(),ct=Tt=>Tt.querySelector("ion-app")||Tt.body,wt=function(){var Tt=(0,E.Z)(function*(De,St,ln,Rn){ln.classList.remove("overlay-hidden");const wn=St(De.el,Rn);(!De.animated||!y.c.getBoolean("animated",!0))&&wn.duration(0),De.keyboardClose&&wn.beforeAddWrite(()=>{const En=ln.ownerDocument.activeElement;null!=En&&En.matches("input,ion-input, ion-textarea")&&En.blur()});const nn=Ue.get(De)||[];return Ue.set(De,[...nn,wn]),yield wn.play(),!0});return function(St,ln,Rn,Kn){return Tt.apply(this,arguments)}}(),ft=(Tt,De)=>{let St;const ln=new Promise(Rn=>St=Rn);return ke(Tt,De,Rn=>{St(Rn.detail)}),ln},ke=(Tt,De,St)=>{const ln=Rn=>{(0,Le.b)(Tt,De,ln),St(Rn)};(0,Le.a)(Tt,De,ln)},Fe=Tt=>"cancel"===Tt||Tt===vt,Ne=Tt=>Tt(),lt=(Tt,De)=>{if("function"==typeof Tt)return y.c.get("_zoneGate",Ne)(()=>{try{return Tt(De)}catch(ln){throw ln}})},vt="backdrop",Zt="gesture",$t=Tt=>{let St,De=!1;const ln=(0,ee.C)(),Rn=(nn=!1)=>{if(St&&!nn)return{delegate:St,inline:De};const{el:En,hasController:lr,delegate:Er}=Tt;return De=null!==En.parentNode&&!lr,St=De?Er||ln:Er,{inline:De,delegate:St}};return{attachViewToDom:function(){var nn=(0,E.Z)(function*(En){const{delegate:lr}=Rn(!0);if(lr)return yield lr.attachViewToDom(Tt.el,En);const{hasController:Er}=Tt;if(Er&&void 0!==En)throw new Error("framework delegate is missing");return null});return function(lr){return nn.apply(this,arguments)}}(),removeViewFromDom:()=>{const{delegate:nn}=Rn();nn&&void 0!==Tt.el&&nn.removeViewFromDom(Tt.el.parentElement,Tt.el)}}},vn=()=>{let Tt;const De=()=>{Tt&&(Tt(),Tt=void 0)};return{addClickListener:(ln,Rn)=>{De();const Kn=void 0!==Rn?document.getElementById(Rn):null;Kn?Tt=((nn,En)=>{const lr=()=>{En.present()};return nn.addEventListener("click",lr),()=>{nn.removeEventListener("click",lr)}})(Kn,ln):(0,xe.p)(`A trigger element with the ID "${Rn}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,ln)},removeClickListener:De}}},2340:(yn,gt,H)=>{"use strict";H.d(gt,{N:()=>E});const E={production:!0,firebase:{apiKey:"AIzaSyAx5viaf5WoWezx2kxJ8fnpWElWMypde0s",authDomain:"hightracks-46986.firebaseapp.com",projectId:"hightracks-46986",storageBucket:"hightracks-46986.appspot.com",messagingSenderId:"643779822309",appId:"1:643779822309:web:10e7cb0f1b7b47128c8a0c"},url:"http://localhost:3000/api/"}},2295:(yn,gt,H)=>{"use strict";var E=H(4650),y=H(1481),ee=H(2607),fe=H(4709);const Le=[{path:"",loadChildren:()=>Promise.all([H.e(8592),H.e(2282)]).then(H.bind(H,2282)).then(u=>u.routes)},{path:"login",loadChildren:()=>Promise.all([H.e(8592),H.e(338)]).then(H.bind(H,338)).then(u=>u.routes)}];var xe=H(1205),ye=H(9751),Ue=H(9646),je=H(8996),Ce=H(4986),ge=H(4482),ve=H(5403),He=H(4004),rt=H(3900),Dt=H(4976),Re=H(2011),Se=H(3942),de=H(5861),pt=H(6881),Y=H(2090),et=H(4859);const Ze="firebasestorage.googleapis.com",xt="storageBucket";class Ie extends Y.ZR{constructor(a,l,p=0){super(ht(a),`Firebase Storage: ${l} (${ht(a)})`),this.status_=p,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ie.prototype)}get status(){return this.status_}set status(a){this.status_=a}_codeEquals(a){return ht(a)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(a){this.customData.serverResponse=a,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var $e=(()=>{return(u=$e||($e={})).UNKNOWN="unknown",u.OBJECT_NOT_FOUND="object-not-found",u.BUCKET_NOT_FOUND="bucket-not-found",u.PROJECT_NOT_FOUND="project-not-found",u.QUOTA_EXCEEDED="quota-exceeded",u.UNAUTHENTICATED="unauthenticated",u.UNAUTHORIZED="unauthorized",u.UNAUTHORIZED_APP="unauthorized-app",u.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",u.INVALID_CHECKSUM="invalid-checksum",u.CANCELED="canceled",u.INVALID_EVENT_NAME="invalid-event-name",u.INVALID_URL="invalid-url",u.INVALID_DEFAULT_BUCKET="invalid-default-bucket",u.NO_DEFAULT_BUCKET="no-default-bucket",u.CANNOT_SLICE_BLOB="cannot-slice-blob",u.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",u.NO_DOWNLOAD_URL="no-download-url",u.INVALID_ARGUMENT="invalid-argument",u.INVALID_ARGUMENT_COUNT="invalid-argument-count",u.APP_DELETED="app-deleted",u.INVALID_ROOT_OPERATION="invalid-root-operation",u.INVALID_FORMAT="invalid-format",u.INTERNAL_ERROR="internal-error",u.UNSUPPORTED_ENVIRONMENT="unsupported-environment",$e;var u})();function ht(u){return"storage/"+u}function _t(){return new Ie($e.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Ne(){return new Ie($e.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function lt(){return new Ie($e.CANCELED,"User canceled the upload/download.")}function vn(){return new Ie($e.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ln(u){return new Ie($e.INVALID_ARGUMENT,u)}function Rn(){return new Ie($e.APP_DELETED,"The Firebase app was deleted.")}function Kn(u){return new Ie($e.INVALID_ROOT_OPERATION,"The operation '"+u+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function wn(u,a){return new Ie($e.INVALID_FORMAT,"String does not match format '"+u+"': "+a)}function nn(u){throw new Ie($e.INTERNAL_ERROR,"Internal error: "+u)}class En{constructor(a,l){this.bucket=a,this.path_=l}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const a=encodeURIComponent;return"/b/"+a(this.bucket)+"/o/"+a(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(a,l){let p;try{p=En.makeFromUrl(a,l)}catch{return new En(a,"")}if(""===p.path)return p;throw function Zt(u){return new Ie($e.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+u+"'.")}(a)}static makeFromUrl(a,l){let p=null;const I="([A-Za-z0-9.\\-_]+)",te=new RegExp("^gs://"+I+"(/(.*))?$","i");function Te(ks){ks.path_=decodeURIComponent(ks.path)}const jt=l.replace(/[.]/g,"\\."),Ui=[{regex:te,indices:{bucket:1,path:3},postModify:function M(ks){"/"===ks.path.charAt(ks.path.length-1)&&(ks.path_=ks.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${jt}/v[A-Za-z0-9_]+/b/${I}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:Te},{regex:new RegExp(`^https?://${l===Ze?"(?:storage.googleapis.com|storage.cloud.google.com)":l}/${I}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:Te}];for(let ks=0;ks<Ui.length;ks++){const bo=Ui[ks],Vl=bo.regex.exec(a);if(Vl){let Ca=Vl[bo.indices.path];Ca||(Ca=""),p=new En(Vl[bo.indices.bucket],Ca),bo.postModify(p);break}}if(null==p)throw function vt(u){return new Ie($e.INVALID_URL,"Invalid URL '"+u+"'.")}(a);return p}}class lr{constructor(a){this.promise_=Promise.reject(a)}getPromise(){return this.promise_}cancel(a=!1){}}function Zr(u){return"string"==typeof u||u instanceof String}function Br(u){return Di()&&u instanceof Blob}function Di(){return typeof Blob<"u"&&!(0,Y.UG)()}function Ir(u,a,l,p){if(p<a)throw ln(`Invalid value for '${u}'. Expected ${a} or greater.`);if(p>l)throw ln(`Invalid value for '${u}'. Expected ${l} or less.`)}function Tn(u,a,l){let p=a;return null==l&&(p=`https://${a}`),`${l}://${p}/v0${u}`}function tn(u){const a=encodeURIComponent;let l="?";for(const p in u)u.hasOwnProperty(p)&&(l=l+(a(p)+"=")+a(u[p])+"&");return l=l.slice(0,-1),l}var fn=(()=>{return(u=fn||(fn={}))[u.NO_ERROR=0]="NO_ERROR",u[u.NETWORK_ERROR=1]="NETWORK_ERROR",u[u.ABORT=2]="ABORT",fn;var u})();function on(u,a){const l=u>=500&&u<600,I=-1!==[408,429].indexOf(u),M=-1!==a.indexOf(u);return l||I||M}class Jr{constructor(a,l,p,I,M,V,te,he,Te,bt,jt,Yt=!0){this.url_=a,this.method_=l,this.headers_=p,this.body_=I,this.successCodes_=M,this.additionalRetryCodes_=V,this.callback_=te,this.errorCallback_=he,this.timeout_=Te,this.progressCallback_=bt,this.connectionFactory_=jt,this.retry=Yt,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Dn,Bn)=>{this.resolve_=Dn,this.reject_=Bn,this.start_()})}start_(){const l=(p,I)=>{const M=this.resolve_,V=this.reject_,te=I.connection;if(I.wasSuccessCode)try{const he=this.callback_(te,te.getResponse());!function br(u){return void 0!==u}(he)?M():M(he)}catch(he){V(he)}else if(null!==te){const he=_t();he.serverResponse=te.getErrorText(),V(this.errorCallback_?this.errorCallback_(te,he):he)}else V(I.canceled?this.appDelete_?Rn():lt():Ne())};this.canceled_?l(0,new Sr(!1,null,!0)):this.backoffId_=function Er(u,a,l){let p=1,I=null,M=null,V=!1,te=0;function he(){return 2===te}let Te=!1;function bt(...fi){Te||(Te=!0,a.apply(null,fi))}function jt(fi){I=setTimeout(()=>{I=null,u(Dn,he())},fi)}function Yt(){M&&clearTimeout(M)}function Dn(fi,...ho){if(Te)return void Yt();if(fi)return Yt(),void bt.call(null,fi,...ho);if(he()||V)return Yt(),void bt.call(null,fi,...ho);let Ui;p<64&&(p*=2),1===te?(te=2,Ui=0):Ui=1e3*(p+Math.random()),jt(Ui)}let Bn=!1;function Kr(fi){Bn||(Bn=!0,Yt(),!Te&&(null!==I?(fi||(te=2),clearTimeout(I),jt(0)):fi||(te=1)))}return jt(0),M=setTimeout(()=>{V=!0,Kr(!0)},l),Kr}((p,I)=>{if(I)return void p(!1,new Sr(!1,null,!0));const M=this.connectionFactory_();this.pendingConnection_=M;const V=te=>{null!==this.progressCallback_&&this.progressCallback_(te.loaded,te.lengthComputable?te.total:-1)};null!==this.progressCallback_&&M.addUploadProgressListener(V),M.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&M.removeUploadProgressListener(V),this.pendingConnection_=null;const te=M.getErrorCode()===fn.NO_ERROR,he=M.getStatus();if(!te||on(he,this.additionalRetryCodes_)&&this.retry){const bt=M.getErrorCode()===fn.ABORT;return void p(!1,new Sr(!1,null,bt))}const Te=-1!==this.successCodes_.indexOf(he);p(!0,new Sr(Te,M))})},l,this.timeout_)}getPromise(){return this.promise_}cancel(a){this.canceled_=!0,this.appDelete_=a||!1,null!==this.backoffId_&&function Xn(u){u(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Sr{constructor(a,l,p){this.wasSuccessCode=a,this.connection=l,this.canceled=!!p}}function Yn(...u){const a=function or(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==a){const l=new a;for(let p=0;p<u.length;p++)l.append(u[p]);return l.getBlob()}if(Di())return new Blob(u);throw new Ie($e.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const mr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ht{constructor(a,l){this.data=a,this.contentType=l||null}}function Ge(u,a){switch(u){case mr.RAW:return new Ht(Qe(a));case mr.BASE64:case mr.BASE64URL:return new Ht(zt(u,a));case mr.DATA_URL:return new Ht(function be(u){const a=new we(u);return a.base64?zt(mr.BASE64,a.rest):function Xt(u){let a;try{a=decodeURIComponent(u)}catch{throw wn(mr.DATA_URL,"Malformed data URL.")}return Qe(a)}(a.rest)}(a),function We(u){return new we(u).contentType}(a))}throw _t()}function Qe(u){const a=[];for(let l=0;l<u.length;l++){let p=u.charCodeAt(l);p<=127?a.push(p):p<=2047?a.push(192|p>>6,128|63&p):55296==(64512&p)?l<u.length-1&&56320==(64512&u.charCodeAt(l+1))?(p=65536|(1023&p)<<10|1023&u.charCodeAt(++l),a.push(240|p>>18,128|p>>12&63,128|p>>6&63,128|63&p)):a.push(239,191,189):56320==(64512&p)?a.push(239,191,189):a.push(224|p>>12,128|p>>6&63,128|63&p)}return new Uint8Array(a)}function zt(u,a){switch(u){case mr.BASE64:{const I=-1!==a.indexOf("-"),M=-1!==a.indexOf("_");if(I||M)throw wn(u,"Invalid character '"+(I?"-":"_")+"' found: is it base64url encoded?");break}case mr.BASE64URL:{const I=-1!==a.indexOf("+"),M=-1!==a.indexOf("/");if(I||M)throw wn(u,"Invalid character '"+(I?"+":"/")+"' found: is it base64 encoded?");a=a.replace(/-/g,"+").replace(/_/g,"/");break}}let l;try{l=function Pr(u){if(typeof atob>"u")throw function St(u){return new Ie($e.UNSUPPORTED_ENVIRONMENT,`${u} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(u)}(a)}catch(I){throw I.message.includes("polyfill")?I:wn(u,"Invalid character found")}const p=new Uint8Array(l.length);for(let I=0;I<l.length;I++)p[I]=l.charCodeAt(I);return p}class we{constructor(a){this.base64=!1,this.contentType=null;const l=a.match(/^data:([^,]+)?,/);if(null===l)throw wn(mr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const p=l[1]||null;null!=p&&(this.base64=function Ct(u,a){return u.length>=a.length&&u.substring(u.length-a.length)===a}(p,";base64"),this.contentType=this.base64?p.substring(0,p.length-7):p),this.rest=a.substring(a.indexOf(",")+1)}}class ot{constructor(a,l){let p=0,I="";Br(a)?(this.data_=a,p=a.size,I=a.type):a instanceof ArrayBuffer?(l?this.data_=new Uint8Array(a):(this.data_=new Uint8Array(a.byteLength),this.data_.set(new Uint8Array(a))),p=this.data_.length):a instanceof Uint8Array&&(l?this.data_=a:(this.data_=new Uint8Array(a.length),this.data_.set(a)),p=a.length),this.size_=p,this.type_=I}size(){return this.size_}type(){return this.type_}slice(a,l){if(Br(this.data_)){const I=function Ei(u,a,l){return u.webkitSlice?u.webkitSlice(a,l):u.mozSlice?u.mozSlice(a,l):u.slice?u.slice(a,l):null}(this.data_,a,l);return null===I?null:new ot(I)}{const p=new Uint8Array(this.data_.buffer,a,l-a);return new ot(p,!0)}}static getBlob(...a){if(Di()){const l=a.map(p=>p instanceof ot?p.data_:p);return new ot(Yn.apply(null,l))}{const l=a.map(V=>Zr(V)?Ge(mr.RAW,V).data:V.data_);let p=0;l.forEach(V=>{p+=V.byteLength});const I=new Uint8Array(p);let M=0;return l.forEach(V=>{for(let te=0;te<V.length;te++)I[M++]=V[te]}),new ot(I,!0)}}uploadData(){return this.data_}}function gn(u){let a;try{a=JSON.parse(u)}catch{return null}return function di(u){return"object"==typeof u&&!Array.isArray(u)}(a)?a:null}function me(u){const a=u.lastIndexOf("/",u.length-2);return-1===a?u:u.slice(a+1)}function dt(u,a){return a}class Ot{constructor(a,l,p,I){this.server=a,this.local=l||a,this.writable=!!p,this.xform=I||dt}}let en=null;function Qn(){if(en)return en;const u=[];u.push(new Ot("bucket")),u.push(new Ot("generation")),u.push(new Ot("metageneration")),u.push(new Ot("name","fullPath",!0));const l=new Ot("name");l.xform=function a(M,V){return function bn(u){return!Zr(u)||u.length<2?u:me(u)}(V)},u.push(l);const I=new Ot("size");return I.xform=function p(M,V){return void 0!==V?Number(V):V},u.push(I),u.push(new Ot("timeCreated")),u.push(new Ot("updated")),u.push(new Ot("md5Hash",null,!0)),u.push(new Ot("cacheControl",null,!0)),u.push(new Ot("contentDisposition",null,!0)),u.push(new Ot("contentEncoding",null,!0)),u.push(new Ot("contentLanguage",null,!0)),u.push(new Ot("contentType",null,!0)),u.push(new Ot("metadata","customMetadata",!0)),en=u,en}function Ut(u,a,l){const p=gn(a);return null===p?null:function Gr(u,a,l){const p={type:"file"},I=l.length;for(let M=0;M<I;M++){const V=l[M];p[V.local]=V.xform(p,a[V.server])}return function cr(u,a){Object.defineProperty(u,"ref",{get:function l(){const M=new En(u.bucket,u.fullPath);return a._makeStorageReference(M)}})}(p,u),p}(u,p,l)}function Qt(u,a){const l={},p=a.length;for(let I=0;I<p;I++){const M=a[I];M.writable&&(l[M.server]=u[M.local])}return JSON.stringify(l)}const Nn="prefixes",jn="items";class Un{constructor(a,l,p,I){this.url=a,this.method=l,this.handler=p,this.timeout=I,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function tr(u){if(!u)throw _t()}function Wn(u,a){return function l(p,I){const M=Ut(u,I,a);return tr(null!==M),M}}function ji(u){return function a(l,p){let I;return I=401===l.getStatus()?l.getErrorText().includes("Firebase App Check token is invalid")?function ke(){return new Ie($e.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function ft(){return new Ie($e.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===l.getStatus()?function wt(u){return new Ie($e.QUOTA_EXCEEDED,"Quota for bucket '"+u+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(u.bucket):403===l.getStatus()?function Fe(u){return new Ie($e.UNAUTHORIZED,"User does not have permission to access '"+u+"'.")}(u.path):p,I.status=l.getStatus(),I.serverResponse=p.serverResponse,I}}function Ji(u){const a=ji(u);return function l(p,I){let M=a(p,I);return 404===p.getStatus()&&(M=function ct(u){return new Ie($e.OBJECT_NOT_FOUND,"Object '"+u+"' does not exist.")}(u.path)),M.serverResponse=I.serverResponse,M}}function ys(u,a,l){const I=Tn(a.fullServerUrl(),u.host,u._protocol),V=u.maxOperationRetryTime,te=new Un(I,"GET",Wn(u,l),V);return te.errorHandler=Ji(a),te}function ri(u,a,l,p,I){const M={};M.prefix=a.isRoot?"":a.path+"/",l&&l.length>0&&(M.delimiter=l),p&&(M.pageToken=p),I&&(M.maxResults=I);const te=Tn(a.bucketOnlyServerUrl(),u.host,u._protocol),Te=u.maxOperationRetryTime,bt=new Un(te,"GET",function ar(u,a){return function l(p,I){const M=function Cr(u,a,l){const p=gn(l);return null===p?null:function yr(u,a,l){const p={prefixes:[],items:[],nextPageToken:l.nextPageToken};if(l[Nn])for(const I of l[Nn]){const M=I.replace(/\/$/,""),V=u._makeStorageReference(new En(a,M));p.prefixes.push(V)}if(l[jn])for(const I of l[jn]){const M=u._makeStorageReference(new En(a,I.name));p.items.push(M)}return p}(u,a,p)}(u,a,I);return tr(null!==M),M}}(u,a.bucket),Te);return bt.urlParams=M,bt.errorHandler=ji(a),bt}function ii(u,a,l){const p=Object.assign({},l);return p.fullPath=u.path,p.size=a.size(),p.contentType||(p.contentType=function Xi(u,a){return u&&u.contentType||a&&a.type()||"application/octet-stream"}(null,a)),p}class re{constructor(a,l,p,I){this.current=a,this.total=l,this.finalized=!!p,this.metadata=I||null}}function _e(u,a){let l=null;try{l=u.getResponseHeader("X-Goog-Upload-Status")}catch{tr(!1)}return tr(!!l&&-1!==(a||["active"]).indexOf(l)),l}const Nt={STATE_CHANGED:"state_changed"},kt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Bt(u){switch(u){case"running":case"pausing":case"canceling":return kt.RUNNING;case"paused":return kt.PAUSED;case"success":return kt.SUCCESS;case"canceled":return kt.CANCELED;default:return kt.ERROR}}class Jt{constructor(a,l,p){if(function cn(u){return"function"==typeof u}(a)||null!=l||null!=p)this.next=a,this.error=null!=l?l:void 0,this.complete=null!=p?p:void 0;else{const M=a;this.next=M.next,this.error=M.error,this.complete=M.complete}}}function mn(u){return(...a)=>{Promise.resolve().then(()=>u(...a))}}let zn=null;class Gn{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=fn.NO_ERROR,this.sendPromise_=new Promise(a=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=fn.ABORT,a()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=fn.NETWORK_ERROR,a()}),this.xhr_.addEventListener("load",()=>{a()})})}send(a,l,p,I){if(this.sent_)throw nn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(l,a,!0),void 0!==I)for(const M in I)I.hasOwnProperty(M)&&this.xhr_.setRequestHeader(M,I[M].toString());return void 0!==p?this.xhr_.send(p):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw nn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw nn("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw nn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw nn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(a){return this.xhr_.getResponseHeader(a)}addUploadProgressListener(a){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",a)}removeUploadProgressListener(a){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",a)}}class gi extends Gn{initXhr(){this.xhr_.responseType="text"}}function Jn(){return zn?zn():new gi}class qt{constructor(a,l,p=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=a,this._blob=l,this._metadata=p,this._mappings=Qn(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=I=>{if(this._request=void 0,this._chunkMultiplier=1,I._codeEquals($e.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const M=this.isExponentialBackoffExpired();if(on(I.status,[])){if(!M)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();I=Ne()}this._error=I,this._transition("error")}},this._metadataErrorHandler=I=>{this._request=void 0,I._codeEquals($e.CANCELED)?this.completeTransitions_():(this._error=I,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((I,M)=>{this._resolve=I,this._reject=M,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const a=this._transferred;return l=>this._updateProgress(a+l)}_shouldDoResumable(a){return a.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(a){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([l,p])=>{switch(this._state){case"running":a(l,p);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((a,l)=>{const p=function it(u,a,l,p,I){const M=a.bucketOnlyServerUrl(),V=ii(a,p,I),te={name:V.fullPath},he=Tn(M,u.host,u._protocol),bt={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${p.size()}`,"X-Goog-Upload-Header-Content-Type":V.contentType,"Content-Type":"application/json; charset=utf-8"},jt=Qt(V,l),Bn=new Un(he,"POST",function Dn(Kr){let fi;_e(Kr);try{fi=Kr.getResponseHeader("X-Goog-Upload-URL")}catch{tr(!1)}return tr(Zr(fi)),fi},u.maxUploadRetryTime);return Bn.urlParams=te,Bn.headers=bt,Bn.body=jt,Bn.errorHandler=ji(a),Bn}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),I=this._ref.storage._makeRequest(p,Jn,a,l);this._request=I,I.getPromise().then(M=>{this._request=void 0,this._uploadUrl=M,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const a=this._uploadUrl;this._resolveToken((l,p)=>{const I=function ae(u,a,l,p){const he=new Un(l,"POST",function M(Te){const bt=_e(Te,["active","final"]);let jt=null;try{jt=Te.getResponseHeader("X-Goog-Upload-Size-Received")}catch{tr(!1)}jt||tr(!1);const Yt=Number(jt);return tr(!isNaN(Yt)),new re(Yt,p.size(),"final"===bt)},u.maxUploadRetryTime);return he.headers={"X-Goog-Upload-Command":"query"},he.errorHandler=ji(a),he}(this._ref.storage,this._ref._location,a,this._blob),M=this._ref.storage._makeRequest(I,Jn,l,p);this._request=M,M.getPromise().then(V=>{this._request=void 0,this._updateProgress(V.current),this._needToFetchStatus=!1,V.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const a=262144*this._chunkMultiplier,l=new re(this._transferred,this._blob.size()),p=this._uploadUrl;this._resolveToken((I,M)=>{let V;try{V=function Ke(u,a,l,p,I,M,V,te){const he=new re(0,0);if(V?(he.current=V.current,he.total=V.total):(he.current=0,he.total=p.size()),p.size()!==he.total)throw function Tt(){return new Ie($e.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const Te=he.total-he.current;let bt=Te;I>0&&(bt=Math.min(bt,I));const jt=he.current;let Dn="";Dn=0===bt?"finalize":Te===bt?"upload, finalize":"upload";const Bn={"X-Goog-Upload-Command":Dn,"X-Goog-Upload-Offset":`${he.current}`},Kr=p.slice(jt,jt+bt);if(null===Kr)throw vn();const Ui=new Un(l,"POST",function fi(ks,bo){const Vl=_e(ks,["active","final"]),ph=he.current+bt,Ca=p.size();let gh;return gh="final"===Vl?Wn(a,M)(ks,bo):null,new re(ph,Ca,"final"===Vl,gh)},a.maxUploadRetryTime);return Ui.headers=Bn,Ui.body=Kr.uploadData(),Ui.progressCallback=te||null,Ui.errorHandler=ji(u),Ui}(this._ref._location,this._ref.storage,p,this._blob,a,this._mappings,l,this._makeProgressCallback())}catch(he){return this._error=he,void this._transition("error")}const te=this._ref.storage._makeRequest(V,Jn,I,M,!1);this._request=te,te.getPromise().then(he=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(he.current),he.finalized?(this._metadata=he.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((a,l)=>{const p=ys(this._ref.storage,this._ref._location,this._mappings),I=this._ref.storage._makeRequest(p,Jn,a,l);this._request=I,I.getPromise().then(M=>{this._request=void 0,this._metadata=M,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((a,l)=>{const p=function Oi(u,a,l,p,I){const M=a.bucketOnlyServerUrl(),V={"X-Goog-Upload-Protocol":"multipart"},he=function te(){let Ui="";for(let ks=0;ks<2;ks++)Ui+=Math.random().toString().slice(2);return Ui}();V["Content-Type"]="multipart/related; boundary="+he;const Te=ii(a,p,I),bt=Qt(Te,l),Dn=ot.getBlob("--"+he+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+bt+"\r\n--"+he+"\r\nContent-Type: "+Te.contentType+"\r\n\r\n",p,"\r\n--"+he+"--");if(null===Dn)throw vn();const Bn={name:Te.fullPath},Kr=Tn(M,u.host,u._protocol),ho=u.maxUploadRetryTime,Ko=new Un(Kr,"POST",Wn(u,l),ho);return Ko.urlParams=Bn,Ko.headers=V,Ko.body=Dn.uploadData(),Ko.errorHandler=ji(a),Ko}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),I=this._ref.storage._makeRequest(p,Jn,a,l);this._request=I,I.getPromise().then(M=>{this._request=void 0,this._metadata=M,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(a){const l=this._transferred;this._transferred=a,this._transferred!==l&&this._notifyObservers()}_transition(a){if(this._state!==a)switch(a){case"canceling":case"pausing":this._state=a,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const l="paused"===this._state;this._state=a,l&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=a,this._notifyObservers();break;case"canceled":this._error=lt(),this._state=a,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const a=Bt(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:a,metadata:this._metadata,task:this,ref:this._ref}}on(a,l,p,I){const M=new Jt(l||void 0,p||void 0,I||void 0);return this._addObserver(M),()=>{this._removeObserver(M)}}then(a,l){return this._promise.then(a,l)}catch(a){return this.then(null,a)}_addObserver(a){this._observers.push(a),this._notifyObserver(a)}_removeObserver(a){const l=this._observers.indexOf(a);-1!==l&&this._observers.splice(l,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(l=>{this._notifyObserver(l)})}_finishPromise(){if(void 0!==this._resolve){let a=!0;switch(Bt(this._state)){case kt.SUCCESS:mn(this._resolve.bind(null,this.snapshot))();break;case kt.CANCELED:case kt.ERROR:mn(this._reject.bind(null,this._error))();break;default:a=!1}a&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(a){switch(Bt(this._state)){case kt.RUNNING:case kt.PAUSED:a.next&&mn(a.next.bind(a,this.snapshot))();break;case kt.SUCCESS:a.complete&&mn(a.complete.bind(a))();break;default:a.error&&mn(a.error.bind(a,this._error))()}}resume(){const a="paused"===this._state||"pausing"===this._state;return a&&this._transition("running"),a}pause(){const a="running"===this._state;return a&&this._transition("pausing"),a}cancel(){const a="running"===this._state||"pausing"===this._state;return a&&this._transition("canceling"),a}}class an{constructor(a,l){this._service=a,this._location=l instanceof En?l:En.makeFromUrl(l,a.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(a,l){return new an(a,l)}get root(){const a=new En(this._location.bucket,"");return this._newRef(this._service,a)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return me(this._location.path)}get storage(){return this._service}get parent(){const a=function Ye(u){if(0===u.length)return null;const a=u.lastIndexOf("/");return-1===a?"":u.slice(0,a)}(this._location.path);if(null===a)return null;const l=new En(this._location.bucket,a);return new an(this._service,l)}_throwIfRoot(a){if(""===this._location.path)throw Kn(a)}}function $i(u,a,l){return ki.apply(this,arguments)}function ki(){return(ki=(0,de.Z)(function*(u,a,l){const I=yield Hi(u,{pageToken:l});a.prefixes.push(...I.prefixes),a.items.push(...I.items),null!=I.nextPageToken&&(yield $i(u,a,I.nextPageToken))})).apply(this,arguments)}function Hi(u,a){null!=a&&"number"==typeof a.maxResults&&Ir("options.maxResults",1,1e3,a.maxResults);const l=a||{},p=ri(u.storage,u._location,"/",l.pageToken,l.maxResults);return u.storage.makeRequestWithTokens(p,Jn)}function qi(u){u._throwIfRoot("getDownloadURL");const a=function dr(u,a,l){const I=Tn(a.fullServerUrl(),u.host,u._protocol),V=u.maxOperationRetryTime,te=new Un(I,"GET",function Pi(u,a){return function l(p,I){const M=Ut(u,I,a);return tr(null!==M),function At(u,a,l,p){const I=gn(a);if(null===I||!Zr(I.downloadTokens))return null;const M=I.downloadTokens;if(0===M.length)return null;const V=encodeURIComponent;return M.split(",").map(Te=>{const jt=u.fullPath;return Tn("/b/"+V(u.bucket)+"/o/"+V(jt),l,p)+tn({alt:"media",token:Te})})[0]}(M,I,u.host,u._protocol)}}(u,l),V);return te.errorHandler=Ji(a),te}(u.storage,u._location,Qn());return u.storage.makeRequestWithTokens(a,Jn).then(l=>{if(null===l)throw function De(){return new Ie($e.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return l})}function Fs(u,a){const l=function Ve(u,a){const l=a.split("/").filter(p=>p.length>0).join("/");return 0===u.length?l:u+"/"+l}(u._location.path,a),p=new En(u._location.bucket,l);return new an(u.storage,p)}function xs(u,a){if(u instanceof ro){const l=u;if(null==l._bucket)throw function $t(){return new Ie($e.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+xt+"' property when initializing the app?")}();const p=new an(l,l._bucket);return null!=a?xs(p,a):p}return void 0!==a?Fs(u,a):u}function no(u,a){if(a&&function ba(u){return/^[A-Za-z]+:\/\//.test(u)}(a)){if(u instanceof ro)return function Do(u,a){return new an(u,a)}(u,a);throw ln("To use ref(service, url), the first argument must be a Storage instance.")}return xs(u,a)}function da(u,a){const l=null==a?void 0:a[xt];return null==l?null:En.makeFromBucketSpec(l,u)}class ro{constructor(a,l,p,I,M){this.app=a,this._authProvider=l,this._appCheckProvider=p,this._url=I,this._firebaseVersion=M,this._bucket=null,this._host=Ze,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=I?En.makeFromBucketSpec(I,this._host):da(this._host,this.app.options)}get host(){return this._host}set host(a){this._host=a,this._bucket=null!=this._url?En.makeFromBucketSpec(this._url,a):da(a,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(a){Ir("time",0,Number.POSITIVE_INFINITY,a),this._maxUploadRetryTime=a}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(a){Ir("time",0,Number.POSITIVE_INFINITY,a),this._maxOperationRetryTime=a}_getAuthToken(){var a=this;return(0,de.Z)(function*(){if(a._overrideAuthToken)return a._overrideAuthToken;const l=a._authProvider.getImmediate({optional:!0});if(l){const p=yield l.getToken();if(null!==p)return p.accessToken}return null})()}_getAppCheckToken(){var a=this;return(0,de.Z)(function*(){const l=a._appCheckProvider.getImmediate({optional:!0});return l?(yield l.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(a=>a.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(a){return new an(this,a)}_makeRequest(a,l,p,I,M=!0){if(this._deleted)return new lr(Rn());{const V=function xi(u,a,l,p,I,M,V=!0){const te=tn(u.urlParams),he=u.url+te,Te=Object.assign({},u.headers);return function pi(u,a){a&&(u["X-Firebase-GMPID"]=a)}(Te,a),function qr(u,a){null!==a&&a.length>0&&(u.Authorization="Firebase "+a)}(Te,l),function ni(u,a){u["X-Firebase-Storage-Version"]="webjs/"+(null!=a?a:"AppManager")}(Te,M),function Ur(u,a){null!==a&&(u["X-Firebase-AppCheck"]=a)}(Te,p),new Jr(he,u.method,Te,u.body,u.successCodes,u.additionalRetryCodes,u.handler,u.errorHandler,u.timeout,u.progressCallback,I,V)}(a,this._appId,p,I,l,this._firebaseVersion,M);return this._requests.add(V),V.getPromise().then(()=>this._requests.delete(V),()=>this._requests.delete(V)),V}}makeRequestWithTokens(a,l){var p=this;return(0,de.Z)(function*(){const[I,M]=yield Promise.all([p._getAuthToken(),p._getAppCheckToken()]);return p._makeRequest(a,l,I,M).getPromise()})()}}const hs="@firebase/storage";function Cs(u,a){return no(u=(0,Y.m9)(u),a)}function mi(u,{instanceIdentifier:a}){const l=u.getProvider("app").getImmediate(),p=u.getProvider("auth-internal"),I=u.getProvider("app-check-internal");return new ro(l,p,I,a,pt.SDK_VERSION)}!function yo(){(0,pt._registerComponent)(new et.wA("storage",mi,"PUBLIC").setMultipleInstances(!0)),(0,pt.registerVersion)(hs,"0.11.2",""),(0,pt.registerVersion)(hs,"0.11.2","esm2017")}();class Bo{constructor(a,l,p){this._delegate=a,this.task=l,this.ref=p}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Ti{constructor(a,l){this._delegate=a,this._ref=l,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Bo(this._delegate.snapshot,this,this._ref)}then(a,l){return this._delegate.then(p=>{if(a)return a(new Bo(p,this,this._ref))},l)}on(a,l,p,I){let M;return l&&(M="function"==typeof l?V=>l(new Bo(V,this,this._ref)):{next:l.next?V=>l.next(new Bo(V,this,this._ref)):void 0,complete:l.complete||void 0,error:l.error||void 0}),this._delegate.on(a,M,p||void 0,I||void 0)}}class Jo{constructor(a,l){this._delegate=a,this._service=l}get prefixes(){return this._delegate.prefixes.map(a=>new bs(a,this._service))}get items(){return this._delegate.items.map(a=>new bs(a,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class bs{constructor(a,l){this._delegate=a,this.storage=l}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(a){const l=function Qo(u,a){return Fs(u,a)}(this._delegate,a);return new bs(l,this.storage)}get root(){return new bs(this._delegate.root,this.storage)}get parent(){const a=this._delegate.parent;return null==a?null:new bs(a,this.storage)}put(a,l){return this._throwIfRoot("put"),new Ti(function io(u,a,l){return function xr(u,a,l){return u._throwIfRoot("uploadBytesResumable"),new qt(u,new ot(a),l)}(u=(0,Y.m9)(u),a,l)}(this._delegate,a,l),this)}putString(a,l=mr.RAW,p){this._throwIfRoot("putString");const I=Ge(l,a),M=Object.assign({},p);return null==M.contentType&&null!=I.contentType&&(M.contentType=I.contentType),new Ti(new qt(this._delegate,new ot(I.data,!0),M),this)}listAll(){return function js(u){return function fo(u){const a={prefixes:[],items:[]};return $i(u,a).then(()=>a)}(u=(0,Y.m9)(u))}(this._delegate).then(a=>new Jo(a,this.storage))}list(a){return function To(u,a){return Hi(u=(0,Y.m9)(u),a)}(this._delegate,a||void 0).then(l=>new Jo(l,this.storage))}getMetadata(){return function Ii(u){return function Zo(u){u._throwIfRoot("getMetadata");const a=ys(u.storage,u._location,Qn());return u.storage.makeRequestWithTokens(a,Jn)}(u=(0,Y.m9)(u))}(this._delegate)}updateMetadata(a){return function ts(u,a){return function ua(u,a){u._throwIfRoot("updateMetadata");const l=function li(u,a,l,p){const M=Tn(a.fullServerUrl(),u.host,u._protocol),te=Qt(l,p),Te=u.maxOperationRetryTime,bt=new Un(M,"PATCH",Wn(u,p),Te);return bt.headers={"Content-Type":"application/json; charset=utf-8"},bt.body=te,bt.errorHandler=Ji(a),bt}(u.storage,u._location,a,Qn());return u.storage.makeRequestWithTokens(l,Jn)}(u=(0,Y.m9)(u),a)}(this._delegate,a)}getDownloadURL(){return function Xo(u){return qi(u=(0,Y.m9)(u))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function so(u){return function to(u){u._throwIfRoot("deleteObject");const a=function Dr(u,a){const p=Tn(a.fullServerUrl(),u.host,u._protocol),te=new Un(p,"DELETE",function V(he,Te){},u.maxOperationRetryTime);return te.successCodes=[200,204],te.errorHandler=Ji(a),te}(u.storage,u._location);return u.storage.makeRequestWithTokens(a,Jn)}(u=(0,Y.m9)(u))}(this._delegate)}_throwIfRoot(a){if(""===this._delegate._location.path)throw Kn(a)}}class ns{constructor(a,l){this.app=a,this._delegate=l}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(a){if(vl(a))throw ln("ref() expected a child path but got a URL, use refFromURL instead.");return new bs(Cs(this._delegate,a),this)}refFromURL(a){if(!vl(a))throw ln("refFromURL() expected a full URL but got a child path, use ref() instead.");try{En.makeFromUrl(a,this._delegate.host)}catch{throw ln("refFromUrl() expected a valid full URL but got an invalid one.")}return new bs(Cs(this._delegate,a),this)}setMaxUploadRetryTime(a){this._delegate.maxUploadRetryTime=a}setMaxOperationRetryTime(a){this._delegate.maxOperationRetryTime=a}useEmulator(a,l,p={}){!function Da(u,a,l,p={}){!function il(u,a,l,p={}){u.host=`${a}:${l}`,u._protocol="http";const{mockUserToken:I}=p;I&&(u._overrideAuthToken="string"==typeof I?I:(0,Y.Sg)(I,u.app.options.projectId))}(u,a,l,p)}(this._delegate,a,l,p)}}function vl(u){return/^[A-Za-z]+:\/\//.test(u)}function cs(u,{instanceIdentifier:a}){const l=u.getProvider("app-compat").getImmediate(),p=u.getProvider("storage").getImmediate({identifier:a});return new ns(l,p)}!function ea(u){const a={TaskState:kt,TaskEvent:Nt,StringFormat:mr,Storage:ns,Reference:bs};u.INTERNAL.registerComponent(new et.wA("storage-compat",cs,"PUBLIC").setServiceProps(a).setMultipleInstances(!0)),u.registerVersion("@firebase/storage-compat","0.3.2")}(Se.Z);var pa=H(6217),_s=H(9260);function ta(u){const a=function ga(u){return new ye.y(a=>{const l=V=>a.next(V);l(u.snapshot);const M=u.on("state_changed",l);return u.then(V=>{l(V),a.complete()},V=>{l(u.snapshot),(V=>{a.error(V)})(V)}),function(){M()}}).pipe(function ze(u,a=Ce.z){return(0,ge.e)((l,p)=>{let I=null,M=null,V=null;const te=()=>{if(I){I.unsubscribe(),I=null;const Te=M;M=null,p.next(Te)}};function he(){const Te=V+u,bt=a.now();if(bt<Te)return I=this.schedule(void 0,Te-bt),void p.add(I);te()}l.subscribe((0,ve.x)(p,Te=>{M=Te,V=a.now(),I||(I=a.schedule(he,u),p.add(I))},()=>{te(),p.complete()},void 0,()=>{M=I=null}))})}(0))}(u);return{task:u,then:u.then.bind(u),catch:u.catch.bind(u),pause:u.pause.bind(u),cancel:u.cancel.bind(u),resume:u.resume.bind(u),snapshotChanges:()=>a,percentageChanges:()=>a.pipe((0,He.U)(l=>l.bytesTransferred/l.totalBytes*100))}}function pr(u){return{getDownloadURL:()=>(0,Ue.of)(void 0).pipe(Dt.fc,(0,rt.w)(()=>u.getDownloadURL()),Dt.iC),getMetadata:()=>(0,Ue.of)(void 0).pipe(Dt.fc,(0,rt.w)(()=>u.getMetadata()),Dt.iC),delete:()=>(0,je.D)(u.delete()),child:a=>pr(u.child(a)),updateMetadata:a=>(0,je.D)(u.updateMetadata(a)),put:(a,l)=>ta(u.put(a,l)),putString:(a,l,p)=>ta(u.putString(a,l,p)),list:a=>(0,je.D)(u.list(a)),listAll:()=>(0,je.D)(u.listAll())}}const $o=new E.OlP("angularfire2.storageBucket"),ma=new E.OlP("angularfire2.storage.maxUploadRetryTime"),b=new E.OlP("angularfire2.storage.maxOperationRetryTime"),q=new E.OlP("angularfire2.storage.use-emulator");let T=(()=>{class u{constructor(l,p,I,M,V,te,he,Te,bt,jt){const Yt=(0,Re.on)(l,V,p);this.storage=(0,Re.cc)(`${Yt.name}.storage.${I}`,"AngularFireStorage",Yt.name,()=>{const Dn=V.runOutsideAngular(()=>Yt.storage(I||void 0)),Bn=bt;return Bn&&Dn.useEmulator(...Bn),he&&Dn.setMaxUploadRetryTime(he),Te&&Dn.setMaxOperationRetryTime(Te),Dn},[he,Te])}ref(l){return pr(this.storage.ref(l))}refFromURL(l){return pr(this.storage.refFromURL(l))}upload(l,p,I){return pr(this.storage.ref(l)).put(p,I)}}return u.\u0275fac=function(l){return new(l||u)(E.LFG(Re.Dh),E.LFG(Re.xv,8),E.LFG($o,8),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(Dt.HU),E.LFG(ma,8),E.LFG(b,8),E.LFG(q,8),E.LFG(pa.nm,8))},u.\u0275prov=E.Yz7({token:u,factory:u.\u0275fac,providedIn:"any"}),u})(),pe=(()=>{class u{}return u.\u0275fac=function(l){return new(l||u)},u.\u0275mod=E.oAB({type:u}),u.\u0275inj=E.cJS({}),u})(),B=(()=>{class u{constructor(){_s.Z.registerVersion("angularfire",Dt.q4.full,"gcs-compat")}}return u.\u0275fac=function(l){return new(l||u)},u.\u0275mod=E.oAB({type:u}),u.\u0275inj=E.cJS({providers:[T],imports:[pe]}),u})();var R=H(1762),O=H(6451),ne=H(3099),yt=H(5026),dn=H(1884),jr=H(8421),yi=H(4671),Si=H(5032),fs=H(7669);H(3042);var ya=H(1877);const us="@firebase/database";let sl="";function So(u){sl=u}class vo{constructor(a){this.domStorage_=a,this.prefix_="firebase:"}set(a,l){null==l?this.domStorage_.removeItem(this.prefixedName_(a)):this.domStorage_.setItem(this.prefixedName_(a),(0,Y.Wl)(l))}get(a){const l=this.domStorage_.getItem(this.prefixedName_(a));return null==l?null:(0,Y.cI)(l)}remove(a){this.domStorage_.removeItem(this.prefixedName_(a))}prefixedName_(a){return this.prefix_+a}toString(){return this.domStorage_.toString()}}class El{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(a,l){null==l?delete this.cache_[a]:this.cache_[a]=l}get(a){return(0,Y.r3)(this.cache_,a)?this.cache_[a]:null}remove(a){delete this.cache_[a]}}const va=function(u){try{if(typeof window<"u"&&typeof window[u]<"u"){const a=window[u];return a.setItem("firebase:sentinel","cache"),a.removeItem("firebase:sentinel"),new vo(a)}}catch{}return new El},ja=va("localStorage"),ps=va("sessionStorage"),Ms=new ya.Yd("@firebase/database"),Ha=function(){let u=1;return function(){return u++}}(),za=function(u){const a=(0,Y.dS)(u),l=new Y.gQ;l.update(a);const p=l.digest();return Y.US.encodeByteArray(p)},_o=function(...u){let a="";for(let l=0;l<u.length;l++){const p=u[l];Array.isArray(p)||p&&"object"==typeof p&&"number"==typeof p.length?a+=_o.apply(null,p):a+="object"==typeof p?(0,Y.Wl)(p):p,a+=" "}return a};let Uo=null,Il=!0;const na=function(u,a){(0,Y.hu)(!a||!0===u||!1===u,"Can't turn on custom loggers persistently."),!0===u?(Ms.logLevel=ya.in.VERBOSE,Uo=Ms.log.bind(Ms),a&&ps.set("logging_enabled",!0)):"function"==typeof u?Uo=u:(Uo=null,ps.remove("logging_enabled"))},ds=function(...u){if(!0===Il&&(Il=!1,null===Uo&&!0===ps.get("logging_enabled")&&na(!0)),Uo){const a=_o.apply(null,u);Uo(a)}},Eo=function(u){return function(...a){ds(u,...a)}},Vo=function(...u){const a="FIREBASE INTERNAL ERROR: "+_o(...u);Ms.error(a)},oo=function(...u){const a=`FIREBASE FATAL ERROR: ${_o(...u)}`;throw Ms.error(a),new Error(a)},is=function(...u){const a="FIREBASE WARNING: "+_o(...u);Ms.warn(a)},Ga=function(u){return"number"==typeof u&&(u!=u||u===Number.POSITIVE_INFINITY||u===Number.NEGATIVE_INFINITY)},Ni="[MIN_NAME]",si="[MAX_NAME]",Sa=function(u,a){if(u===a)return 0;if(u===Ni||a===si)return-1;if(a===Ni||u===si)return 1;{const l=Vt(u),p=Vt(a);return null!==l?null!==p?l-p==0?u.length-a.length:l-p:-1:null!==p?1:u<a?-1:1}},Ao=function(u,a){return u===a?0:u<a?-1:1},wl=function(u,a){if(a&&u in a)return a[u];throw new Error("Missing required key ("+u+") in object: "+(0,Y.Wl)(a))},ao=function(u){if("object"!=typeof u||null===u)return(0,Y.Wl)(u);const a=[];for(const p in u)a.push(p);a.sort();let l="{";for(let p=0;p<a.length;p++)0!==p&&(l+=","),l+=(0,Y.Wl)(a[p]),l+=":",l+=ao(u[a[p]]);return l+="}",l},Hl=function(u,a){const l=u.length;if(l<=a)return[u];const p=[];for(let I=0;I<l;I+=a)p.push(u.substring(I,I+a>l?l:I+a));return p};function Rr(u,a){for(const l in u)u.hasOwnProperty(l)&&a(l,u[l])}const zl=function(u){(0,Y.hu)(!Ga(u),"Invalid JSON number");const p=1023;let I,M,V,te,he;0===u?(M=0,V=0,I=1/u==-1/0?1:0):(I=u<0,(u=Math.abs(u))>=Math.pow(2,1-p)?(te=Math.min(Math.floor(Math.log(u)/Math.LN2),p),M=te+p,V=Math.round(u*Math.pow(2,52-te)-Math.pow(2,52))):(M=0,V=Math.round(u/Math.pow(2,-1074))));const Te=[];for(he=52;he;he-=1)Te.push(V%2?1:0),V=Math.floor(V/2);for(he=11;he;he-=1)Te.push(M%2?1:0),M=Math.floor(M/2);Te.push(I?1:0),Te.reverse();const bt=Te.join("");let jt="";for(he=0;he<64;he+=8){let Yt=parseInt(bt.substr(he,8),2).toString(16);1===Yt.length&&(Yt="0"+Yt),jt+=Yt}return jt.toLowerCase()},j=new RegExp("^-?(0*)\\d{1,10}$"),Vt=function(u){if(j.test(u)){const a=Number(u);if(a>=-2147483648&&a<=2147483647)return a}return null},Wt=function(u){try{u()}catch(a){setTimeout(()=>{throw is("Exception was thrown by user callback.",a.stack||""),a},Math.floor(0))}},Ln=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},gr=function(u,a){const l=setTimeout(u,a);return"number"==typeof l&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(l):"object"==typeof l&&l.unref&&l.unref(),l};class $r{constructor(a,l){this.appName_=a,this.appCheckProvider=l,this.appCheck=null==l?void 0:l.getImmediate({optional:!0}),this.appCheck||null==l||l.get().then(p=>this.appCheck=p)}getToken(a){return this.appCheck?this.appCheck.getToken(a):new Promise((l,p)=>{setTimeout(()=>{this.appCheck?this.getToken(a).then(l,p):l(null)},0)})}addTokenChangeListener(a){var l;null===(l=this.appCheckProvider)||void 0===l||l.get().then(p=>p.addTokenListener(a))}notifyForInvalidToken(){is(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Lr{constructor(a,l,p){this.appName_=a,this.firebaseOptions_=l,this.authProvider_=p,this.auth_=null,this.auth_=p.getImmediate({optional:!0}),this.auth_||p.onInit(I=>this.auth_=I)}getToken(a){return this.auth_?this.auth_.getToken(a).catch(l=>l&&"auth/token-not-initialized"===l.code?(ds("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(l)):new Promise((l,p)=>{setTimeout(()=>{this.auth_?this.getToken(a).then(l,p):l(null)},0)})}addTokenChangeListener(a){this.auth_?this.auth_.addAuthTokenListener(a):this.authProvider_.get().then(l=>l.addAuthTokenListener(a))}removeTokenChangeListener(a){this.authProvider_.get().then(l=>l.removeAuthTokenListener(a))}notifyForInvalidToken(){let a='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';a+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',is(a)}}let wr=(()=>{class u{constructor(l){this.accessToken=l}getToken(l){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(l){l(this.accessToken)}removeTokenChangeListener(l){}notifyForInvalidToken(){}}return u.OWNER="owner",u})();const Gs=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Aa="websocket",Wa="long_polling";class Gl{constructor(a,l,p,I,M=!1,V="",te=!1,he=!1){this.secure=l,this.namespace=p,this.webSocketOnly=I,this.nodeAdmin=M,this.persistenceKey=V,this.includeNamespaceInQueryParams=te,this.isUsingEmulator=he,this._host=a.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ja.get("host:"+a)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(a){a!==this.internalHost&&(this.internalHost=a,this.isCacheableHost()&&ja.set("host:"+this._host,this.internalHost))}toString(){let a=this.toURLString();return this.persistenceKey&&(a+="<"+this.persistenceKey+">"),a}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function _a(u,a,l){let p;if((0,Y.hu)("string"==typeof a,"typeof type must == string"),(0,Y.hu)("object"==typeof l,"typeof params must == object"),a===Aa)p=(u.secure?"wss://":"ws://")+u.internalHost+"/.ws?";else{if(a!==Wa)throw new Error("Unknown connection type: "+a);p=(u.secure?"https://":"http://")+u.internalHost+"/.lp?"}(function ol(u){return u.host!==u.internalHost||u.isCustomHost()||u.includeNamespaceInQueryParams})(u)&&(l.ns=u.namespace);const I=[];return Rr(l,(M,V)=>{I.push(M+"="+V)}),p+I.join("&")}class Wc{constructor(){this.counters_={}}incrementCounter(a,l=1){(0,Y.r3)(this.counters_,a)||(this.counters_[a]=0),this.counters_[a]+=l}get(){return(0,Y.p$)(this.counters_)}}const Wi={},bl={};function Zi(u){const a=u.toString();return Wi[a]||(Wi[a]=new Wc),Wi[a]}class Wl{constructor(a){this.onMessage_=a,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(a,l){this.closeAfterResponse=a,this.onClose=l,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(a,l){for(this.pendingResponses[a]=l;this.pendingResponses[this.currentResponseNum];){const p=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let I=0;I<p.length;++I)p[I]&&Wt(()=>{this.onMessage_(p[I])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class jo{constructor(a,l,p,I,M,V,te){this.connId=a,this.repoInfo=l,this.applicationId=p,this.appCheckToken=I,this.authToken=M,this.transportSessionId=V,this.lastSessionId=te,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Eo(a),this.stats_=Zi(l),this.urlFn=he=>(this.appCheckToken&&(he.ac=this.appCheckToken),_a(l,Wa,he))}open(a,l){this.curSegmentNum=0,this.onDisconnect_=l,this.myPacketOrderer=new Wl(a),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(u){if((0,Y.Yr)()||"complete"===document.readyState)u();else{let a=!1;const l=function(){document.body?a||(a=!0,u()):setTimeout(l,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",l,!1),window.addEventListener("load",l,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&l()}),window.attachEvent("onload",l))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ka((...M)=>{const[V,te,he,Te,bt]=M;if(this.incrementIncomingBytes_(M),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===V)this.id=te,this.password=he;else{if("close"!==V)throw new Error("Unrecognized command received: "+V);te?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(te,()=>{this.onClosed_()})):this.onClosed_()}},(...M)=>{const[V,te]=M;this.incrementIncomingBytes_(M),this.myPacketOrderer.handleResponse(V,te)},()=>{this.onClosed_()},this.urlFn);const p={start:"t"};p.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(p.cb=this.scriptTagHolder.uniqueCallbackIdentifier),p.v="5",this.transportSessionId&&(p.s=this.transportSessionId),this.lastSessionId&&(p.ls=this.lastSessionId),this.applicationId&&(p.p=this.applicationId),this.appCheckToken&&(p.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Gs.test(location.hostname)&&(p.r="f");const I=this.urlFn(p);this.log_("Connecting via long-poll to "+I),this.scriptTagHolder.addTag(I,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){jo.forceAllow_=!0}static forceDisallow(){jo.forceDisallow_=!0}static isAvailable(){return!((0,Y.Yr)()||!jo.forceAllow_&&(jo.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(a){const l=(0,Y.Wl)(a);this.bytesSent+=l.length,this.stats_.incrementCounter("bytes_sent",l.length);const p=(0,Y.h$)(l),I=Hl(p,1840);for(let M=0;M<I.length;M++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,I.length,I[M]),this.curSegmentNum++}addDisconnectPingFrame(a,l){if((0,Y.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const p={dframe:"t"};p.id=a,p.pw=l,this.myDisconnFrame.src=this.urlFn(p),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(a){const l=(0,Y.Wl)(a).length;this.bytesReceived+=l,this.stats_.incrementCounter("bytes_received",l)}}class Ka{constructor(a,l,p,I){if(this.onDisconnect=p,this.urlFn=I,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,Y.Yr)())this.commandCB=a,this.onMessageCB=l;else{this.uniqueCallbackIdentifier=Ha(),window["pLPCommand"+this.uniqueCallbackIdentifier]=a,window["pRTLPCB"+this.uniqueCallbackIdentifier]=l,this.myIFrame=Ka.createIFrame_();let M="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(M='<script>document.domain="'+document.domain+'";<\/script>');const V="<html><body>"+M+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(V),this.myIFrame.doc.close()}catch(te){ds("frame writing exception"),te.stack&&ds(te.stack),ds(te)}}}static createIFrame_(){const a=document.createElement("iframe");if(a.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(a);try{a.contentWindow.document||ds("No IE domain setting required")}catch{const p=document.domain;a.src="javascript:void((function(){document.open();document.domain='"+p+"';document.close();})())"}return a.contentDocument?a.doc=a.contentDocument:a.contentWindow?a.doc=a.contentWindow.document:a.document&&(a.doc=a.document),a}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const a=this.onDisconnect;a&&(this.onDisconnect=null,a())}startLongPoll(a,l){for(this.myID=a,this.myPW=l,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const a={};a.id=this.myID,a.pw=this.myPW,a.ser=this.currentSerial;let l=this.urlFn(a),p="",I=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+p.length<=1870;){const V=this.pendingSegs.shift();p=p+"&seg"+I+"="+V.seg+"&ts"+I+"="+V.ts+"&d"+I+"="+V.d,I++}return l+=p,this.addLongPollTag_(l,this.currentSerial),!0}return!1}enqueueSegment(a,l,p){this.pendingSegs.push({seg:a,ts:l,d:p}),this.alive&&this.newRequest_()}addLongPollTag_(a,l){this.outstandingRequests.add(l);const p=()=>{this.outstandingRequests.delete(l),this.newRequest_()},I=setTimeout(p,Math.floor(25e3));this.addTag(a,()=>{clearTimeout(I),p()})}addTag(a,l){(0,Y.Yr)()?this.doNodeLongPoll(a,l):setTimeout(()=>{try{if(!this.sendNewPolls)return;const p=this.myIFrame.doc.createElement("script");p.type="text/javascript",p.async=!0,p.src=a,p.onload=p.onreadystatechange=function(){const I=p.readyState;(!I||"loaded"===I||"complete"===I)&&(p.onload=p.onreadystatechange=null,p.parentNode&&p.parentNode.removeChild(p),l())},p.onerror=()=>{ds("Long-poll script failed to load: "+a),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(p)}catch{}},Math.floor(1))}}let al=null;typeof MozWebSocket<"u"?al=MozWebSocket:typeof WebSocket<"u"&&(al=WebSocket);let sr=(()=>{class u{constructor(l,p,I,M,V,te,he){this.connId=l,this.applicationId=I,this.appCheckToken=M,this.authToken=V,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Eo(this.connId),this.stats_=Zi(p),this.connURL=u.connectionURL_(p,te,he,M,I),this.nodeAdmin=p.nodeAdmin}static connectionURL_(l,p,I,M,V){const te={v:"5"};return!(0,Y.Yr)()&&typeof location<"u"&&location.hostname&&Gs.test(location.hostname)&&(te.r="f"),p&&(te.s=p),I&&(te.ls=I),M&&(te.ac=M),V&&(te.p=V),_a(l,Aa,te)}open(l,p){this.onDisconnect=p,this.onMessage=l,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ja.set("previous_websocket_failure",!0);try{let I;if((0,Y.Yr)()){I={headers:{"User-Agent":`Firebase/5/${sl}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(I.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(I.headers["X-Firebase-AppCheck"]=this.appCheckToken);const V=process.env,te=0===this.connURL.indexOf("wss://")?V.HTTPS_PROXY||V.https_proxy:V.HTTP_PROXY||V.http_proxy;te&&(I.proxy={origin:te})}this.mySock=new al(this.connURL,[],I)}catch(I){this.log_("Error instantiating WebSocket.");const M=I.message||I.data;return M&&this.log_(M),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=I=>{this.handleIncomingFrame(I)},this.mySock.onerror=I=>{this.log_("WebSocket error.  Closing connection.");const M=I.message||I.data;M&&this.log_(M),this.onClosed_()}}start(){}static forceDisallow(){u.forceDisallow_=!0}static isAvailable(){let l=!1;if(typeof navigator<"u"&&navigator.userAgent){const I=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);I&&I.length>1&&parseFloat(I[1])<4.4&&(l=!0)}return!l&&null!==al&&!u.forceDisallow_}static previouslyFailed(){return ja.isInMemoryStorage||!0===ja.get("previous_websocket_failure")}markConnectionHealthy(){ja.remove("previous_websocket_failure")}appendFrame_(l){if(this.frames.push(l),this.frames.length===this.totalFrames){const p=this.frames.join("");this.frames=null;const I=(0,Y.cI)(p);this.onMessage(I)}}handleNewFrameCount_(l){this.totalFrames=l,this.frames=[]}extractFrameCount_(l){if((0,Y.hu)(null===this.frames,"We already have a frame buffer"),l.length<=6){const p=Number(l);if(!isNaN(p))return this.handleNewFrameCount_(p),null}return this.handleNewFrameCount_(1),l}handleIncomingFrame(l){if(null===this.mySock)return;const p=l.data;if(this.bytesReceived+=p.length,this.stats_.incrementCounter("bytes_received",p.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(p);else{const I=this.extractFrameCount_(p);null!==I&&this.appendFrame_(I)}}send(l){this.resetKeepAlive();const p=(0,Y.Wl)(l);this.bytesSent+=p.length,this.stats_.incrementCounter("bytes_sent",p.length);const I=Hl(p,16384);I.length>1&&this.sendString_(String(I.length));for(let M=0;M<I.length;M++)this.sendString_(I[M])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(l){try{this.mySock.send(l)}catch(p){this.log_("Exception thrown from WebSocket.send():",p.message||p.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return u.responsesRequiredToBeHealthy=2,u.healthyTimeout=3e4,u})(),sa=(()=>{class u{constructor(l){this.initTransports_(l)}static get ALL_TRANSPORTS(){return[jo,sr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(l){const p=sr&&sr.isAvailable();let I=p&&!sr.previouslyFailed();if(l.webSocketOnly&&(p||is("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),I=!0),I)this.transports_=[sr];else{const M=this.transports_=[];for(const V of u.ALL_TRANSPORTS)V&&V.isAvailable()&&M.push(V);u.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return u.globalTransportInitialized_=!1,u})();class qa{constructor(a,l,p,I,M,V,te,he,Te,bt){this.id=a,this.repoInfo_=l,this.applicationId_=p,this.appCheckToken_=I,this.authToken_=M,this.onMessage_=V,this.onReady_=te,this.onDisconnect_=he,this.onKill_=Te,this.lastSessionId=bt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Eo("c:"+this.id+":"),this.transportManager_=new sa(l),this.log_("Connection created"),this.start_()}start_(){const a=this.transportManager_.initialTransport();this.conn_=new a(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=a.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.conn_),p=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(l,p)},Math.floor(0));const I=a.healthyTimeout||0;I>0&&(this.healthyTimeout_=gr(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(I)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(a){return l=>{a===this.conn_?this.onConnectionLost_(l):a===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(a){return l=>{2!==this.state_&&(a===this.rx_?this.onPrimaryMessageReceived_(l):a===this.secondaryConn_?this.onSecondaryMessageReceived_(l):this.log_("message on old connection"))}}sendRequest(a){this.sendData_({t:"d",d:a})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(a){if("t"in a){const l=a.t;"a"===l?this.upgradeIfSecondaryHealthy_():"r"===l?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===l&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(a){const l=wl("t",a),p=wl("d",a);if("c"===l)this.onSecondaryControl_(p);else{if("d"!==l)throw new Error("Unknown protocol layer: "+l);this.pendingDataMessages.push(p)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(a){const l=wl("t",a),p=wl("d",a);"c"===l?this.onControl_(p):"d"===l&&this.onDataMessage_(p)}onDataMessage_(a){this.onPrimaryResponse_(),this.onMessage_(a)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(a){const l=wl("t",a);if("d"in a){const p=a.d;if("h"===l){const I=Object.assign({},p);this.repoInfo_.isUsingEmulator&&(I.h=this.repoInfo_.host),this.onHandshake_(I)}else if("n"===l){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let I=0;I<this.pendingDataMessages.length;++I)this.onDataMessage_(this.pendingDataMessages[I]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===l?this.onConnectionShutdown_(p):"r"===l?this.onReset_(p):"e"===l?Vo("Server Error: "+p):"o"===l?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Vo("Unknown control packet command: "+l)}}onHandshake_(a){const l=a.ts,p=a.v,I=a.h;this.sessionId=a.s,this.repoInfo_.host=I,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,l),"5"!==p&&is("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const a=this.transportManager_.upgradeTransport();a&&this.startUpgrade_(a)}startUpgrade_(a){this.secondaryConn_=new a(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=a.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.secondaryConn_),p=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(l,p),gr(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(a){this.log_("Reset packet received.  New host: "+a),this.repoInfo_.host=a,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(a,l){this.log_("Realtime connection established."),this.conn_=a,this.state_=1,this.onReady_&&(this.onReady_(l,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):gr(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const a=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===a||this.rx_===a)&&this.close()}onConnectionLost_(a){this.conn_=null,a||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ja.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(a){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(a),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(a){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(a)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Zc{put(a,l,p,I){}merge(a,l,p,I){}refreshAuthToken(a){}refreshAppCheckToken(a){}onDisconnectPut(a,l,p){}onDisconnectMerge(a,l,p){}onDisconnectCancel(a,l){}reportStats(a){}}class qu{constructor(a){this.allowedEvents_=a,this.listeners_={},(0,Y.hu)(Array.isArray(a)&&a.length>0,"Requires a non-empty array")}trigger(a,...l){if(Array.isArray(this.listeners_[a])){const p=[...this.listeners_[a]];for(let I=0;I<p.length;I++)p[I].callback.apply(p[I].context,l)}}on(a,l,p){this.validateEventType_(a),this.listeners_[a]=this.listeners_[a]||[],this.listeners_[a].push({callback:l,context:p});const I=this.getInitialEvent(a);I&&l.apply(p,I)}off(a,l,p){this.validateEventType_(a);const I=this.listeners_[a]||[];for(let M=0;M<I.length;M++)if(I[M].callback===l&&(!p||p===I[M].context))return void I.splice(M,1)}validateEventType_(a){(0,Y.hu)(this.allowedEvents_.find(l=>l===a),"Unknown event: "+a)}}class Yr extends qu{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,Y.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Yr}getInitialEvent(a){return(0,Y.hu)("online"===a,"Unknown event type: "+a),[this.online_]}currentlyOnline(){return this.online_}}const uc=32,Ra=768;class Mi{constructor(a,l){if(void 0===l){this.pieces_=a.split("/");let p=0;for(let I=0;I<this.pieces_.length;I++)this.pieces_[I].length>0&&(this.pieces_[p]=this.pieces_[I],p++);this.pieces_.length=p,this.pieceNum_=0}else this.pieces_=a,this.pieceNum_=l}toString(){let a="";for(let l=this.pieceNum_;l<this.pieces_.length;l++)""!==this.pieces_[l]&&(a+="/"+this.pieces_[l]);return a||"/"}}function vr(){return new Mi("")}function Or(u){return u.pieceNum_>=u.pieces_.length?null:u.pieces_[u.pieceNum_]}function Rt(u){return u.pieces_.length-u.pieceNum_}function wi(u){let a=u.pieceNum_;return a<u.pieces_.length&&a++,new Mi(u.pieces_,a)}function Es(u){return u.pieceNum_<u.pieces_.length?u.pieces_[u.pieces_.length-1]:null}function Ea(u,a=0){return u.pieces_.slice(u.pieceNum_+a)}function Mo(u){if(u.pieceNum_>=u.pieces_.length)return null;const a=[];for(let l=u.pieceNum_;l<u.pieces_.length-1;l++)a.push(u.pieces_[l]);return new Mi(a,0)}function Qi(u,a){const l=[];for(let p=u.pieceNum_;p<u.pieces_.length;p++)l.push(u.pieces_[p]);if(a instanceof Mi)for(let p=a.pieceNum_;p<a.pieces_.length;p++)l.push(a.pieces_[p]);else{const p=a.split("/");for(let I=0;I<p.length;I++)p[I].length>0&&l.push(p[I])}return new Mi(l,0)}function fr(u){return u.pieceNum_>=u.pieces_.length}function S(u,a){const l=Or(u),p=Or(a);if(null===l)return a;if(l===p)return S(wi(u),wi(a));throw new Error("INTERNAL ERROR: innerPath ("+a+") is not within outerPath ("+u+")")}function x(u,a){const l=Ea(u,0),p=Ea(a,0);for(let I=0;I<l.length&&I<p.length;I++){const M=Sa(l[I],p[I]);if(0!==M)return M}return l.length===p.length?0:l.length<p.length?-1:1}function w(u,a){if(Rt(u)!==Rt(a))return!1;for(let l=u.pieceNum_,p=a.pieceNum_;l<=u.pieces_.length;l++,p++)if(u.pieces_[l]!==a.pieces_[p])return!1;return!0}function k(u,a){let l=u.pieceNum_,p=a.pieceNum_;if(Rt(u)>Rt(a))return!1;for(;l<u.pieces_.length;){if(u.pieces_[l]!==a.pieces_[p])return!1;++l,++p}return!0}class z{constructor(a,l){this.errorPrefix_=l,this.parts_=Ea(a,0),this.byteLength_=Math.max(1,this.parts_.length);for(let p=0;p<this.parts_.length;p++)this.byteLength_+=(0,Y.ug)(this.parts_[p]);nt(this)}}function nt(u){if(u.byteLength_>Ra)throw new Error(u.errorPrefix_+"has a key path longer than "+Ra+" bytes ("+u.byteLength_+").");if(u.parts_.length>uc)throw new Error(u.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+uc+") or object contains a cycle "+Pt(u))}function Pt(u){return 0===u.parts_.length?"":"in property '"+u.parts_.join(".")+"'"}class pn extends qu{constructor(){let a,l;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(l="visibilitychange",a="hidden"):typeof document.mozHidden<"u"?(l="mozvisibilitychange",a="mozHidden"):typeof document.msHidden<"u"?(l="msvisibilitychange",a="msHidden"):typeof document.webkitHidden<"u"&&(l="webkitvisibilitychange",a="webkitHidden")),this.visible_=!0,l&&document.addEventListener(l,()=>{const p=!document[a];p!==this.visible_&&(this.visible_=p,this.trigger("visible",p))},!1)}static getInstance(){return new pn}getInitialEvent(a){return(0,Y.hu)("visible"===a,"Unknown event type: "+a),[this.visible_]}}const $n=1e3;let qs,Bs=(()=>{class u extends Zc{constructor(l,p,I,M,V,te,he,Te){if(super(),this.repoInfo_=l,this.applicationId_=p,this.onDataUpdate_=I,this.onConnectStatus_=M,this.onServerInfoUpdate_=V,this.authTokenProvider_=te,this.appCheckTokenProvider_=he,this.authOverride_=Te,this.id=u.nextPersistentConnectionId_++,this.log_=Eo("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=$n,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,Te&&!(0,Y.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");pn.getInstance().on("visible",this.onVisible_,this),-1===l.host.indexOf("fblocal")&&Yr.getInstance().on("online",this.onOnline_,this)}sendRequest(l,p,I){const M=++this.requestNumber_,V={r:M,a:l,b:p};this.log_((0,Y.Wl)(V)),(0,Y.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(V),I&&(this.requestCBHash_[M]=I)}get(l){this.initConnection_();const p=new Y.BH,M={action:"g",request:{p:l._path.toString(),q:l._queryObject},onComplete:te=>{const he=te.d;"ok"===te.s?p.resolve(he):p.reject(he)}};return this.outstandingGets_.push(M),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),p.promise}listen(l,p,I,M){this.initConnection_();const V=l._queryIdentifier,te=l._path.toString();this.log_("Listen called for "+te+" "+V),this.listens.has(te)||this.listens.set(te,new Map),(0,Y.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,Y.hu)(!this.listens.get(te).has(V),"listen() called twice for same path/queryId.");const he={onComplete:M,hashFn:p,query:l,tag:I};this.listens.get(te).set(V,he),this.connected_&&this.sendListen_(he)}sendGet_(l){const p=this.outstandingGets_[l];this.sendRequest("g",p.request,I=>{delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),p.onComplete&&p.onComplete(I)})}sendListen_(l){const p=l.query,I=p._path.toString(),M=p._queryIdentifier;this.log_("Listen on "+I+" for "+M);const V={p:I};l.tag&&(V.q=p._queryObject,V.t=l.tag),V.h=l.hashFn(),this.sendRequest("q",V,he=>{const Te=he.d,bt=he.s;u.warnOnListenWarnings_(Te,p),(this.listens.get(I)&&this.listens.get(I).get(M))===l&&(this.log_("listen response",he),"ok"!==bt&&this.removeListen_(I,M),l.onComplete&&l.onComplete(bt,Te))})}static warnOnListenWarnings_(l,p){if(l&&"object"==typeof l&&(0,Y.r3)(l,"w")){const I=(0,Y.DV)(l,"w");if(Array.isArray(I)&&~I.indexOf("no_index")){const M='".indexOn": "'+p._queryParams.getIndex().toString()+'"',V=p._path.toString();is(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${M} at ${V} to your security rules for better performance.`)}}}refreshAuthToken(l){this.authToken_=l,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(l)}reduceReconnectDelayIfAdminCredential_(l){(l&&40===l.length||(0,Y.GJ)(l))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(l){this.appCheckToken_=l,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const l=this.authToken_,p=(0,Y.w9)(l)?"auth":"gauth",I={cred:l};null===this.authOverride_?I.noauth=!0:"object"==typeof this.authOverride_&&(I.authvar=this.authOverride_),this.sendRequest(p,I,M=>{const V=M.s,te=M.d||"error";this.authToken_===l&&("ok"===V?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(V,te))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},l=>{const p=l.s,I=l.d||"error";"ok"===p?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(p,I)})}unlisten(l,p){const I=l._path.toString(),M=l._queryIdentifier;this.log_("Unlisten called for "+I+" "+M),(0,Y.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(I,M)&&this.connected_&&this.sendUnlisten_(I,M,l._queryObject,p)}sendUnlisten_(l,p,I,M){this.log_("Unlisten on "+l+" for "+p);const V={p:l};M&&(V.q=I,V.t=M),this.sendRequest("n",V)}onDisconnectPut(l,p,I){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",l,p,I):this.onDisconnectRequestQueue_.push({pathString:l,action:"o",data:p,onComplete:I})}onDisconnectMerge(l,p,I){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",l,p,I):this.onDisconnectRequestQueue_.push({pathString:l,action:"om",data:p,onComplete:I})}onDisconnectCancel(l,p){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",l,null,p):this.onDisconnectRequestQueue_.push({pathString:l,action:"oc",data:null,onComplete:p})}sendOnDisconnect_(l,p,I,M){const V={p,d:I};this.log_("onDisconnect "+l,V),this.sendRequest(l,V,te=>{M&&setTimeout(()=>{M(te.s,te.d)},Math.floor(0))})}put(l,p,I,M){this.putInternal("p",l,p,I,M)}merge(l,p,I,M){this.putInternal("m",l,p,I,M)}putInternal(l,p,I,M,V){this.initConnection_();const te={p,d:I};void 0!==V&&(te.h=V),this.outstandingPuts_.push({action:l,request:te,onComplete:M}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+p)}sendPut_(l){const p=this.outstandingPuts_[l].action,I=this.outstandingPuts_[l].request,M=this.outstandingPuts_[l].onComplete;this.outstandingPuts_[l].queued=this.connected_,this.sendRequest(p,I,V=>{this.log_(p+" response",V),delete this.outstandingPuts_[l],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),M&&M(V.s,V.d)})}reportStats(l){if(this.connected_){const p={c:l};this.log_("reportStats",p),this.sendRequest("s",p,I=>{"ok"!==I.s&&this.log_("reportStats","Error sending stats: "+I.d)})}}onDataMessage_(l){if("r"in l){this.log_("from server: "+(0,Y.Wl)(l));const p=l.r,I=this.requestCBHash_[p];I&&(delete this.requestCBHash_[p],I(l.b))}else{if("error"in l)throw"A server-side error has occurred: "+l.error;"a"in l&&this.onDataPush_(l.a,l.b)}}onDataPush_(l,p){this.log_("handleServerMessage",l,p),"d"===l?this.onDataUpdate_(p.p,p.d,!1,p.t):"m"===l?this.onDataUpdate_(p.p,p.d,!0,p.t):"c"===l?this.onListenRevoked_(p.p,p.q):"ac"===l?this.onAuthRevoked_(p.s,p.d):"apc"===l?this.onAppCheckRevoked_(p.s,p.d):"sd"===l?this.onSecurityDebugPacket_(p):Vo("Unrecognized action received from server: "+(0,Y.Wl)(l)+"\nAre you using the latest client?")}onReady_(l,p){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(l),this.lastSessionId=p,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(l){(0,Y.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(l))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(l){l&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=$n,this.realtime_||this.scheduleConnect_(0)),this.visible_=l}onOnline_(l){l?(this.log_("Browser went online."),this.reconnectDelay_=$n,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=$n),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const l=(new Date).getTime()-this.lastConnectionAttemptTime_;let p=Math.max(0,this.reconnectDelay_-l);p=Math.random()*p,this.log_("Trying to reconnect in "+p+"ms"),this.scheduleConnect_(p),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var l=this;return(0,de.Z)(function*(){if(l.shouldReconnect_()){l.log_("Making a connection attempt"),l.lastConnectionAttemptTime_=(new Date).getTime(),l.lastConnectionEstablishedTime_=null;const p=l.onDataMessage_.bind(l),I=l.onReady_.bind(l),M=l.onRealtimeDisconnect_.bind(l),V=l.id+":"+u.nextConnectionId_++,te=l.lastSessionId;let he=!1,Te=null;const bt=function(){Te?Te.close():(he=!0,M())};l.realtime_={close:bt,sendRequest:function(Dn){(0,Y.hu)(Te,"sendRequest call when we're not connected not allowed."),Te.sendRequest(Dn)}};const Yt=l.forceTokenRefresh_;l.forceTokenRefresh_=!1;try{const[Dn,Bn]=yield Promise.all([l.authTokenProvider_.getToken(Yt),l.appCheckTokenProvider_.getToken(Yt)]);he?ds("getToken() completed but was canceled"):(ds("getToken() completed. Creating connection."),l.authToken_=Dn&&Dn.accessToken,l.appCheckToken_=Bn&&Bn.token,Te=new qa(V,l.repoInfo_,l.applicationId_,l.appCheckToken_,l.authToken_,p,I,M,Kr=>{is(Kr+" ("+l.repoInfo_.toString()+")"),l.interrupt("server_kill")},te))}catch(Dn){l.log_("Failed to get token: "+Dn),he||(l.repoInfo_.nodeAdmin&&is(Dn),bt())}}})()}interrupt(l){ds("Interrupting connection for reason: "+l),this.interruptReasons_[l]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(l){ds("Resuming connection for reason: "+l),delete this.interruptReasons_[l],(0,Y.xb)(this.interruptReasons_)&&(this.reconnectDelay_=$n,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(l){const p=l-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:p})}cancelSentTransactions_(){for(let l=0;l<this.outstandingPuts_.length;l++){const p=this.outstandingPuts_[l];p&&"h"in p.request&&p.queued&&(p.onComplete&&p.onComplete("disconnect"),delete this.outstandingPuts_[l],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(l,p){let I;I=p?p.map(V=>ao(V)).join("$"):"default";const M=this.removeListen_(l,I);M&&M.onComplete&&M.onComplete("permission_denied")}removeListen_(l,p){const I=new Mi(l).toString();let M;if(this.listens.has(I)){const V=this.listens.get(I);M=V.get(p),V.delete(p),0===V.size&&this.listens.delete(I)}else M=void 0;return M}onAuthRevoked_(l,p){ds("Auth token revoked: "+l+"/"+p),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===l||"permission_denied"===l)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(l,p){ds("App check token revoked: "+l+"/"+p),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===l||"permission_denied"===l)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(l){this.securityDebugCallback_?this.securityDebugCallback_(l):"msg"in l&&console.log("FIREBASE: "+l.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const l of this.listens.values())for(const p of l.values())this.sendListen_(p);for(let l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){const l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(let l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)}sendConnectStats_(){const l={};let p="js";(0,Y.Yr)()&&(p=this.repoInfo_.nodeAdmin?"admin_node":"node"),l["sdk."+p+"."+sl.replace(/\./g,"-")]=1,(0,Y.uI)()?l["framework.cordova"]=1:(0,Y.b$)()&&(l["framework.reactnative"]=1),this.reportStats(l)}shouldReconnect_(){const l=Yr.getInstance().currentlyOnline();return(0,Y.xb)(this.interruptReasons_)&&l}}return u.nextPersistentConnectionId_=0,u.nextConnectionId_=0,u})();class Ar{constructor(a,l){this.name=a,this.node=l}static Wrap(a,l){return new Ar(a,l)}}class Al{getCompare(){return this.compare.bind(this)}indexedValueChanged(a,l){const p=new Ar(Ni,a),I=new Ar(Ni,l);return 0!==this.compare(p,I)}minPost(){return Ar.MIN}}class Qc extends Al{static get __EMPTY_NODE(){return qs}static set __EMPTY_NODE(a){qs=a}compare(a,l){return Sa(a.name,l.name)}isDefinedOn(a){throw(0,Y.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(a,l){return!1}minPost(){return Ar.MIN}maxPost(){return new Ar(si,qs)}makePost(a,l){return(0,Y.hu)("string"==typeof a,"KeyIndex indexValue must always be a string."),new Ar(a,qs)}toString(){return".key"}}const Ya=new Qc;class ll{constructor(a,l,p,I,M=null){this.isReverse_=I,this.resultGenerator_=M,this.nodeStack_=[];let V=1;for(;!a.isEmpty();)if(V=l?p(a.key,l):1,I&&(V*=-1),V<0)a=this.isReverse_?a.left:a.right;else{if(0===V){this.nodeStack_.push(a);break}this.nodeStack_.push(a),a=this.isReverse_?a.right:a.left}}getNext(){if(0===this.nodeStack_.length)return null;let l,a=this.nodeStack_.pop();if(l=this.resultGenerator_?this.resultGenerator_(a.key,a.value):{key:a.key,value:a.value},this.isReverse_)for(a=a.left;!a.isEmpty();)this.nodeStack_.push(a),a=a.right;else for(a=a.right;!a.isEmpty();)this.nodeStack_.push(a),a=a.left;return l}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const a=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(a.key,a.value):{key:a.key,value:a.value}}}let Nd,oa=(()=>{class u{constructor(l,p,I,M,V){this.key=l,this.value=p,this.color=null!=I?I:u.RED,this.left=null!=M?M:Ia.EMPTY_NODE,this.right=null!=V?V:Ia.EMPTY_NODE}copy(l,p,I,M,V){return new u(null!=l?l:this.key,null!=p?p:this.value,null!=I?I:this.color,null!=M?M:this.left,null!=V?V:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(l){return this.left.inorderTraversal(l)||!!l(this.key,this.value)||this.right.inorderTraversal(l)}reverseTraversal(l){return this.right.reverseTraversal(l)||l(this.key,this.value)||this.left.reverseTraversal(l)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(l,p,I){let M=this;const V=I(l,M.key);return M=V<0?M.copy(null,null,null,M.left.insert(l,p,I),null):0===V?M.copy(null,p,null,null,null):M.copy(null,null,null,null,M.right.insert(l,p,I)),M.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ia.EMPTY_NODE;let l=this;return!l.left.isRed_()&&!l.left.left.isRed_()&&(l=l.moveRedLeft_()),l=l.copy(null,null,null,l.left.removeMin_(),null),l.fixUp_()}remove(l,p){let I,M;if(I=this,p(l,I.key)<0)!I.left.isEmpty()&&!I.left.isRed_()&&!I.left.left.isRed_()&&(I=I.moveRedLeft_()),I=I.copy(null,null,null,I.left.remove(l,p),null);else{if(I.left.isRed_()&&(I=I.rotateRight_()),!I.right.isEmpty()&&!I.right.isRed_()&&!I.right.left.isRed_()&&(I=I.moveRedRight_()),0===p(l,I.key)){if(I.right.isEmpty())return Ia.EMPTY_NODE;M=I.right.min_(),I=I.copy(M.key,M.value,null,null,I.right.removeMin_())}I=I.copy(null,null,null,null,I.right.remove(l,p))}return I.fixUp_()}isRed_(){return this.color}fixUp_(){let l=this;return l.right.isRed_()&&!l.left.isRed_()&&(l=l.rotateLeft_()),l.left.isRed_()&&l.left.left.isRed_()&&(l=l.rotateRight_()),l.left.isRed_()&&l.right.isRed_()&&(l=l.colorFlip_()),l}moveRedLeft_(){let l=this.colorFlip_();return l.right.left.isRed_()&&(l=l.copy(null,null,null,null,l.right.rotateRight_()),l=l.rotateLeft_(),l=l.colorFlip_()),l}moveRedRight_(){let l=this.colorFlip_();return l.left.left.isRed_()&&(l=l.rotateRight_(),l=l.colorFlip_()),l}rotateLeft_(){const l=this.copy(null,null,u.RED,null,this.right.left);return this.right.copy(null,null,this.color,l,null)}rotateRight_(){const l=this.copy(null,null,u.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,l)}colorFlip_(){const l=this.left.copy(null,null,!this.left.color,null,null),p=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,l,p)}checkMaxDepth_(){const l=this.check_();return Math.pow(2,l)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const l=this.left.check_();if(l!==this.right.check_())throw new Error("Black depths differ");return l+(this.isRed_()?0:1)}}return u.RED=!0,u.BLACK=!1,u})();class Ia{constructor(a,l=Ia.EMPTY_NODE){this.comparator_=a,this.root_=l}insert(a,l){return new Ia(this.comparator_,this.root_.insert(a,l,this.comparator_).copy(null,null,oa.BLACK,null,null))}remove(a){return new Ia(this.comparator_,this.root_.remove(a,this.comparator_).copy(null,null,oa.BLACK,null,null))}get(a){let l,p=this.root_;for(;!p.isEmpty();){if(l=this.comparator_(a,p.key),0===l)return p.value;l<0?p=p.left:l>0&&(p=p.right)}return null}getPredecessorKey(a){let l,p=this.root_,I=null;for(;!p.isEmpty();){if(l=this.comparator_(a,p.key),0===l){if(p.left.isEmpty())return I?I.key:null;for(p=p.left;!p.right.isEmpty();)p=p.right;return p.key}l<0?p=p.left:l>0&&(I=p,p=p.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(a){return this.root_.inorderTraversal(a)}reverseTraversal(a){return this.root_.reverseTraversal(a)}getIterator(a){return new ll(this.root_,null,this.comparator_,!1,a)}getIteratorFrom(a,l){return new ll(this.root_,a,this.comparator_,!1,l)}getReverseIteratorFrom(a,l){return new ll(this.root_,a,this.comparator_,!0,l)}getReverseIterator(a){return new ll(this.root_,null,this.comparator_,!0,a)}}function vu(u,a){return Sa(u.name,a.name)}function _u(u,a){return Sa(u,a)}Ia.EMPTY_NODE=new class Yu{copy(a,l,p,I,M){return this}insert(a,l,p){return new oa(a,l,null)}remove(a,l){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(a){return!1}reverseTraversal(a){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Fd=function(u){return"number"==typeof u?"number:"+zl(u):"string:"+u},Zu=function(u){if(u.isLeafNode()){const a=u.val();(0,Y.hu)("string"==typeof a||"number"==typeof a||"object"==typeof a&&(0,Y.r3)(a,".sv"),"Priority must be a string or number.")}else(0,Y.hu)(u===Nd||u.isEmpty(),"priority of unexpected type.");(0,Y.hu)(u===Nd||u.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Yl,Xu,Ds,dc=(()=>{class u{constructor(l,p=u.__childrenNodeConstructor.EMPTY_NODE){this.value_=l,this.priorityNode_=p,this.lazyHash_=null,(0,Y.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Zu(this.priorityNode_)}static set __childrenNodeConstructor(l){Yl=l}static get __childrenNodeConstructor(){return Yl}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(l){return new u(this.value_,l)}getImmediateChild(l){return".priority"===l?this.priorityNode_:u.__childrenNodeConstructor.EMPTY_NODE}getChild(l){return fr(l)?this:".priority"===Or(l)?this.priorityNode_:u.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(l,p){return null}updateImmediateChild(l,p){return".priority"===l?this.updatePriority(p):p.isEmpty()&&".priority"!==l?this:u.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(l,p).updatePriority(this.priorityNode_)}updateChild(l,p){const I=Or(l);return null===I?p:p.isEmpty()&&".priority"!==I?this:((0,Y.hu)(".priority"!==I||1===Rt(l),".priority must be the last token in a path"),this.updateImmediateChild(I,u.__childrenNodeConstructor.EMPTY_NODE.updateChild(wi(l),p)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(l,p){return!1}val(l){return l&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let l="";this.priorityNode_.isEmpty()||(l+="priority:"+Fd(this.priorityNode_.val())+":");const p=typeof this.value_;l+=p+":",l+="number"===p?zl(this.value_):this.value_,this.lazyHash_=za(l)}return this.lazyHash_}getValue(){return this.value_}compareTo(l){return l===u.__childrenNodeConstructor.EMPTY_NODE?1:l instanceof u.__childrenNodeConstructor?-1:((0,Y.hu)(l.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(l))}compareToLeafNode_(l){const p=typeof l.value_,I=typeof this.value_,M=u.VALUE_TYPE_ORDER.indexOf(p),V=u.VALUE_TYPE_ORDER.indexOf(I);return(0,Y.hu)(M>=0,"Unknown leaf type: "+p),(0,Y.hu)(V>=0,"Unknown leaf type: "+I),M===V?"object"===I?0:this.value_<l.value_?-1:this.value_===l.value_?0:1:V-M}withIndex(){return this}isIndexed(){return!0}equals(l){return l===this||!!l.isLeafNode()&&(this.value_===l.value_&&this.priorityNode_.equals(l.priorityNode_))}}return u.VALUE_TYPE_ORDER=["object","boolean","number","string"],u})();const Tr=new class Iu extends Al{compare(a,l){const p=a.node.getPriority(),I=l.node.getPriority(),M=p.compareTo(I);return 0===M?Sa(a.name,l.name):M}isDefinedOn(a){return!a.getPriority().isEmpty()}indexedValueChanged(a,l){return!a.getPriority().equals(l.getPriority())}minPost(){return Ar.MIN}maxPost(){return new Ar(si,new dc("[PRIORITY-POST]",Ds))}makePost(a,l){const p=Xu(a);return new Ar(l,new dc("[PRIORITY-POST]",p))}toString(){return".priority"}},hc=Math.log(2);class Is{constructor(a){this.count=parseInt(Math.log(a+1)/hc,10),this.current_=this.count-1;const I=(M=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=a+1&I}nextBitIsOne(){const a=!(this.bits_&1<<this.current_);return this.current_--,a}}const Ki=function(u,a,l,p){u.sort(a);const I=function(he,Te){const bt=Te-he;let jt,Yt;if(0===bt)return null;if(1===bt)return jt=u[he],Yt=l?l(jt):jt,new oa(Yt,jt.node,oa.BLACK,null,null);{const Dn=parseInt(bt/2,10)+he,Bn=I(he,Dn),Kr=I(Dn+1,Te);return jt=u[Dn],Yt=l?l(jt):jt,new oa(Yt,jt.node,oa.BLACK,Bn,Kr)}},te=function(he){let Te=null,bt=null,jt=u.length;const Yt=function(Bn,Kr){const fi=jt-Bn,ho=jt;jt-=Bn;const Ko=I(fi+1,ho),Ui=u[fi],ks=l?l(Ui):Ui;Dn(new oa(ks,Ui.node,Kr,null,Ko))},Dn=function(Bn){Te?(Te.left=Bn,Te=Bn):(bt=Bn,Te=Bn)};for(let Bn=0;Bn<he.count;++Bn){const Kr=he.nextBitIsOne(),fi=Math.pow(2,he.count-(Bn+1));Kr?Yt(fi,oa.BLACK):(Yt(fi,oa.BLACK),Yt(fi,oa.RED))}return bt}(new Is(u.length));return new Ia(p||a,te)};let Rc;const Oo={};class gs{constructor(a,l){this.indexes_=a,this.indexSet_=l}static get Default(){return(0,Y.hu)(Oo&&Tr,"ChildrenNode.ts has not been loaded"),Rc=Rc||new gs({".priority":Oo},{".priority":Tr}),Rc}get(a){const l=(0,Y.DV)(this.indexes_,a);if(!l)throw new Error("No index defined for "+a);return l instanceof Ia?l:null}hasIndex(a){return(0,Y.r3)(this.indexSet_,a.toString())}addIndex(a,l){(0,Y.hu)(a!==Ya,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const p=[];let I=!1;const M=l.getIterator(Ar.Wrap);let te,V=M.getNext();for(;V;)I=I||a.isDefinedOn(V.node),p.push(V),V=M.getNext();te=I?Ki(p,a.getCompare()):Oo;const he=a.toString(),Te=Object.assign({},this.indexSet_);Te[he]=a;const bt=Object.assign({},this.indexes_);return bt[he]=te,new gs(bt,Te)}addToIndexes(a,l){const p=(0,Y.UI)(this.indexes_,(I,M)=>{const V=(0,Y.DV)(this.indexSet_,M);if((0,Y.hu)(V,"Missing index implementation for "+M),I===Oo){if(V.isDefinedOn(a.node)){const te=[],he=l.getIterator(Ar.Wrap);let Te=he.getNext();for(;Te;)Te.name!==a.name&&te.push(Te),Te=he.getNext();return te.push(a),Ki(te,V.getCompare())}return Oo}{const te=l.get(a.name);let he=I;return te&&(he=he.remove(new Ar(a.name,te))),he.insert(a,a.node)}});return new gs(p,this.indexSet_)}removeFromIndexes(a,l){const p=(0,Y.UI)(this.indexes_,I=>{if(I===Oo)return I;{const M=l.get(a.name);return M?I.remove(new Ar(a.name,M)):I}});return new gs(p,this.indexSet_)}}let fc,Xr=(()=>{class u{constructor(l,p,I){this.children_=l,this.priorityNode_=p,this.indexMap_=I,this.lazyHash_=null,this.priorityNode_&&Zu(this.priorityNode_),this.children_.isEmpty()&&(0,Y.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return fc||(fc=new u(new Ia(_u),null,gs.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||fc}updatePriority(l){return this.children_.isEmpty()?this:new u(this.children_,l,this.indexMap_)}getImmediateChild(l){if(".priority"===l)return this.getPriority();{const p=this.children_.get(l);return null===p?fc:p}}getChild(l){const p=Or(l);return null===p?this:this.getImmediateChild(p).getChild(wi(l))}hasChild(l){return null!==this.children_.get(l)}updateImmediateChild(l,p){if((0,Y.hu)(p,"We should always be passing snapshot nodes"),".priority"===l)return this.updatePriority(p);{const I=new Ar(l,p);let M,V;p.isEmpty()?(M=this.children_.remove(l),V=this.indexMap_.removeFromIndexes(I,this.children_)):(M=this.children_.insert(l,p),V=this.indexMap_.addToIndexes(I,this.children_));const te=M.isEmpty()?fc:this.priorityNode_;return new u(M,te,V)}}updateChild(l,p){const I=Or(l);if(null===I)return p;{(0,Y.hu)(".priority"!==Or(l)||1===Rt(l),".priority must be the last token in a path");const M=this.getImmediateChild(I).updateChild(wi(l),p);return this.updateImmediateChild(I,M)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(l){if(this.isEmpty())return null;const p={};let I=0,M=0,V=!0;if(this.forEachChild(Tr,(te,he)=>{p[te]=he.val(l),I++,V&&u.INTEGER_REGEXP_.test(te)?M=Math.max(M,Number(te)):V=!1}),!l&&V&&M<2*I){const te=[];for(const he in p)te[he]=p[he];return te}return l&&!this.getPriority().isEmpty()&&(p[".priority"]=this.getPriority().val()),p}hash(){if(null===this.lazyHash_){let l="";this.getPriority().isEmpty()||(l+="priority:"+Fd(this.getPriority().val())+":"),this.forEachChild(Tr,(p,I)=>{const M=I.hash();""!==M&&(l+=":"+p+":"+M)}),this.lazyHash_=""===l?"":za(l)}return this.lazyHash_}getPredecessorChildName(l,p,I){const M=this.resolveIndex_(I);if(M){const V=M.getPredecessorKey(new Ar(l,p));return V?V.name:null}return this.children_.getPredecessorKey(l)}getFirstChildName(l){const p=this.resolveIndex_(l);if(p){const I=p.minKey();return I&&I.name}return this.children_.minKey()}getFirstChild(l){const p=this.getFirstChildName(l);return p?new Ar(p,this.children_.get(p)):null}getLastChildName(l){const p=this.resolveIndex_(l);if(p){const I=p.maxKey();return I&&I.name}return this.children_.maxKey()}getLastChild(l){const p=this.getLastChildName(l);return p?new Ar(p,this.children_.get(p)):null}forEachChild(l,p){const I=this.resolveIndex_(l);return I?I.inorderTraversal(M=>p(M.name,M.node)):this.children_.inorderTraversal(p)}getIterator(l){return this.getIteratorFrom(l.minPost(),l)}getIteratorFrom(l,p){const I=this.resolveIndex_(p);if(I)return I.getIteratorFrom(l,M=>M);{const M=this.children_.getIteratorFrom(l.name,Ar.Wrap);let V=M.peek();for(;null!=V&&p.compare(V,l)<0;)M.getNext(),V=M.peek();return M}}getReverseIterator(l){return this.getReverseIteratorFrom(l.maxPost(),l)}getReverseIteratorFrom(l,p){const I=this.resolveIndex_(p);if(I)return I.getReverseIteratorFrom(l,M=>M);{const M=this.children_.getReverseIteratorFrom(l.name,Ar.Wrap);let V=M.peek();for(;null!=V&&p.compare(V,l)>0;)M.getNext(),V=M.peek();return M}}compareTo(l){return this.isEmpty()?l.isEmpty()?0:-1:l.isLeafNode()||l.isEmpty()?1:l===Qu?-1:0}withIndex(l){if(l===Ya||this.indexMap_.hasIndex(l))return this;{const p=this.indexMap_.addIndex(l,this.children_);return new u(this.children_,this.priorityNode_,p)}}isIndexed(l){return l===Ya||this.indexMap_.hasIndex(l)}equals(l){if(l===this)return!0;if(l.isLeafNode())return!1;{const p=l;if(this.getPriority().equals(p.getPriority())){if(this.children_.count()===p.children_.count()){const I=this.getIterator(Tr),M=p.getIterator(Tr);let V=I.getNext(),te=M.getNext();for(;V&&te;){if(V.name!==te.name||!V.node.equals(te.node))return!1;V=I.getNext(),te=M.getNext()}return null===V&&null===te}return!1}return!1}}resolveIndex_(l){return l===Ya?null:this.indexMap_.get(l.toString())}}return u.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,u})();const Qu=new class Ys extends Xr{constructor(){super(new Ia(_u),Xr.EMPTY_NODE,gs.Default)}compareTo(a){return a===this?0:1}equals(a){return a===this}getPriority(){return this}getImmediateChild(a){return Xr.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Ar,{MIN:{value:new Ar(Ni,Xr.EMPTY_NODE)},MAX:{value:new Ar(si,Qu)}}),Qc.__EMPTY_NODE=Xr.EMPTY_NODE,dc.__childrenNodeConstructor=Xr,function Eu(u){Nd=u}(Qu),function Ma(u){Ds=u}(Qu);const Zl=!0;function Hr(u,a=null){if(null===u)return Xr.EMPTY_NODE;if("object"==typeof u&&".priority"in u&&(a=u[".priority"]),(0,Y.hu)(null===a||"string"==typeof a||"number"==typeof a||"object"==typeof a&&".sv"in a,"Invalid priority type found: "+typeof a),"object"==typeof u&&".value"in u&&null!==u[".value"]&&(u=u[".value"]),"object"!=typeof u||".sv"in u)return new dc(u,Hr(a));if(u instanceof Array||!Zl){let l=Xr.EMPTY_NODE;return Rr(u,(p,I)=>{if((0,Y.r3)(u,p)&&"."!==p.substring(0,1)){const M=Hr(I);(M.isLeafNode()||!M.isEmpty())&&(l=l.updateImmediateChild(p,M))}}),l.updatePriority(Hr(a))}{const l=[];let p=!1;if(Rr(u,(V,te)=>{if("."!==V.substring(0,1)){const he=Hr(te);he.isEmpty()||(p=p||!he.getPriority().isEmpty(),l.push(new Ar(V,he)))}}),0===l.length)return Xr.EMPTY_NODE;const M=Ki(l,vu,V=>V.name,_u);if(p){const V=Ki(l,Tr.getCompare());return new Xr(M,Hr(a),new gs({".priority":V},{".priority":Tr}))}return new Xr(M,Hr(a),gs.Default)}}!function Sh(u){Xu=u}(Hr);class $s extends Al{constructor(a){super(),this.indexPath_=a,(0,Y.hu)(!fr(a)&&".priority"!==Or(a),"Can't create PathIndex with empty path or .priority key")}extractChild(a){return a.getChild(this.indexPath_)}isDefinedOn(a){return!a.getChild(this.indexPath_).isEmpty()}compare(a,l){const p=this.extractChild(a.node),I=this.extractChild(l.node),M=p.compareTo(I);return 0===M?Sa(a.name,l.name):M}makePost(a,l){const p=Hr(a),I=Xr.EMPTY_NODE.updateChild(this.indexPath_,p);return new Ar(l,I)}maxPost(){const a=Xr.EMPTY_NODE.updateChild(this.indexPath_,Qu);return new Ar(si,a)}toString(){return Ea(this.indexPath_,0).join("/")}}const pc=new class Mc extends Al{compare(a,l){const p=a.node.compareTo(l.node);return 0===p?Sa(a.name,l.name):p}isDefinedOn(a){return!0}indexedValueChanged(a,l){return!a.equals(l)}minPost(){return Ar.MIN}maxPost(){return Ar.MAX}makePost(a,l){const p=Hr(a);return new Ar(l,p)}toString(){return".value"}};function Xl(u){return{type:"value",snapshotNode:u}}function Ps(u,a){return{type:"child_added",snapshotNode:a,childName:u}}function Ho(u,a){return{type:"child_removed",snapshotNode:a,childName:u}}function co(u,a,l){return{type:"child_changed",snapshotNode:a,childName:u,oldSnap:l}}class cl{constructor(a){this.index_=a}updateChild(a,l,p,I,M,V){(0,Y.hu)(a.isIndexed(this.index_),"A node must be indexed if only a child is updated");const te=a.getImmediateChild(l);return te.getChild(I).equals(p.getChild(I))&&te.isEmpty()===p.isEmpty()||(null!=V&&(p.isEmpty()?a.hasChild(l)?V.trackChildChange(Ho(l,te)):(0,Y.hu)(a.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):te.isEmpty()?V.trackChildChange(Ps(l,p)):V.trackChildChange(co(l,p,te))),a.isLeafNode()&&p.isEmpty())?a:a.updateImmediateChild(l,p).withIndex(this.index_)}updateFullNode(a,l,p){return null!=p&&(a.isLeafNode()||a.forEachChild(Tr,(I,M)=>{l.hasChild(I)||p.trackChildChange(Ho(I,M))}),l.isLeafNode()||l.forEachChild(Tr,(I,M)=>{if(a.hasChild(I)){const V=a.getImmediateChild(I);V.equals(M)||p.trackChildChange(co(I,M,V))}else p.trackChildChange(Ps(I,M))})),l.withIndex(this.index_)}updatePriority(a,l){return a.isEmpty()?Xr.EMPTY_NODE:a.updatePriority(l)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class wo{constructor(a){this.indexedFilter_=new cl(a.getIndex()),this.index_=a.getIndex(),this.startPost_=wo.getStartPost_(a),this.endPost_=wo.getEndPost_(a),this.startIsInclusive_=!a.startAfterSet_,this.endIsInclusive_=!a.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(a){const l=this.startIsInclusive_?this.index_.compare(this.getStartPost(),a)<=0:this.index_.compare(this.getStartPost(),a)<0,p=this.endIsInclusive_?this.index_.compare(a,this.getEndPost())<=0:this.index_.compare(a,this.getEndPost())<0;return l&&p}updateChild(a,l,p,I,M,V){return this.matches(new Ar(l,p))||(p=Xr.EMPTY_NODE),this.indexedFilter_.updateChild(a,l,p,I,M,V)}updateFullNode(a,l,p){l.isLeafNode()&&(l=Xr.EMPTY_NODE);let I=l.withIndex(this.index_);I=I.updatePriority(Xr.EMPTY_NODE);const M=this;return l.forEachChild(Tr,(V,te)=>{M.matches(new Ar(V,te))||(I=I.updateImmediateChild(V,Xr.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(a,I,p)}updatePriority(a,l){return a}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(a){if(a.hasStart()){const l=a.getIndexStartName();return a.getIndex().makePost(a.getIndexStartValue(),l)}return a.getIndex().minPost()}static getEndPost_(a){if(a.hasEnd()){const l=a.getIndexEndName();return a.getIndex().makePost(a.getIndexEndValue(),l)}return a.getIndex().maxPost()}}class Jc{constructor(a){this.withinDirectionalStart=l=>this.reverse_?this.withinEndPost(l):this.withinStartPost(l),this.withinDirectionalEnd=l=>this.reverse_?this.withinStartPost(l):this.withinEndPost(l),this.withinStartPost=l=>{const p=this.index_.compare(this.rangedFilter_.getStartPost(),l);return this.startIsInclusive_?p<=0:p<0},this.withinEndPost=l=>{const p=this.index_.compare(l,this.rangedFilter_.getEndPost());return this.endIsInclusive_?p<=0:p<0},this.rangedFilter_=new wo(a),this.index_=a.getIndex(),this.limit_=a.getLimit(),this.reverse_=!a.isViewFromLeft(),this.startIsInclusive_=!a.startAfterSet_,this.endIsInclusive_=!a.endBeforeSet_}updateChild(a,l,p,I,M,V){return this.rangedFilter_.matches(new Ar(l,p))||(p=Xr.EMPTY_NODE),a.getImmediateChild(l).equals(p)?a:a.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(a,l,p,I,M,V):this.fullLimitUpdateChild_(a,l,p,M,V)}updateFullNode(a,l,p){let I;if(l.isLeafNode()||l.isEmpty())I=Xr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<l.numChildren()&&l.isIndexed(this.index_)){let M;I=Xr.EMPTY_NODE.withIndex(this.index_),M=this.reverse_?l.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let V=0;for(;M.hasNext()&&V<this.limit_;){const te=M.getNext();if(this.withinDirectionalStart(te)){if(!this.withinDirectionalEnd(te))break;I=I.updateImmediateChild(te.name,te.node),V++}}}else{let M;I=l.withIndex(this.index_),I=I.updatePriority(Xr.EMPTY_NODE),M=this.reverse_?I.getReverseIterator(this.index_):I.getIterator(this.index_);let V=0;for(;M.hasNext();){const te=M.getNext();V<this.limit_&&this.withinDirectionalStart(te)&&this.withinDirectionalEnd(te)?V++:I=I.updateImmediateChild(te.name,Xr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(a,I,p)}updatePriority(a,l){return a}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(a,l,p,I,M){let V;if(this.reverse_){const jt=this.index_.getCompare();V=(Yt,Dn)=>jt(Dn,Yt)}else V=this.index_.getCompare();const te=a;(0,Y.hu)(te.numChildren()===this.limit_,"");const he=new Ar(l,p),Te=this.reverse_?te.getFirstChild(this.index_):te.getLastChild(this.index_),bt=this.rangedFilter_.matches(he);if(te.hasChild(l)){const jt=te.getImmediateChild(l);let Yt=I.getChildAfterChild(this.index_,Te,this.reverse_);for(;null!=Yt&&(Yt.name===l||te.hasChild(Yt.name));)Yt=I.getChildAfterChild(this.index_,Yt,this.reverse_);const Dn=null==Yt?1:V(Yt,he);if(bt&&!p.isEmpty()&&Dn>=0)return null!=M&&M.trackChildChange(co(l,p,jt)),te.updateImmediateChild(l,p);{null!=M&&M.trackChildChange(Ho(l,jt));const Kr=te.updateImmediateChild(l,Xr.EMPTY_NODE);return null!=Yt&&this.rangedFilter_.matches(Yt)?(null!=M&&M.trackChildChange(Ps(Yt.name,Yt.node)),Kr.updateImmediateChild(Yt.name,Yt.node)):Kr}}return p.isEmpty()?a:bt&&V(Te,he)>=0?(null!=M&&(M.trackChildChange(Ho(Te.name,Te.node)),M.trackChildChange(Ps(l,p))),te.updateImmediateChild(l,p).updateImmediateChild(Te.name,Xr.EMPTY_NODE)):a}}class Za{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Tr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,Y.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,Y.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ni}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,Y.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,Y.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:si}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,Y.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Tr}copy(){const a=new Za;return a.limitSet_=this.limitSet_,a.limit_=this.limit_,a.startSet_=this.startSet_,a.startAfterSet_=this.startAfterSet_,a.indexStartValue_=this.indexStartValue_,a.startNameSet_=this.startNameSet_,a.indexStartName_=this.indexStartName_,a.endSet_=this.endSet_,a.endBeforeSet_=this.endBeforeSet_,a.indexEndValue_=this.indexEndValue_,a.endNameSet_=this.endNameSet_,a.indexEndName_=this.indexEndName_,a.index_=this.index_,a.viewFrom_=this.viewFrom_,a}}function J(u,a,l){const p=u.copy();return p.startSet_=!0,void 0===a&&(a=null),p.indexStartValue_=a,null!=l?(p.startNameSet_=!0,p.indexStartName_=l):(p.startNameSet_=!1,p.indexStartName_=""),p}function st(u,a,l){const p=u.copy();return p.endSet_=!0,void 0===a&&(a=null),p.indexEndValue_=a,void 0!==l?(p.endNameSet_=!0,p.indexEndName_=l):(p.endNameSet_=!1,p.indexEndName_=""),p}function Gt(u,a){const l=u.copy();return l.index_=a,l}function In(u){const a={};if(u.isDefault())return a;let l;if(u.index_===Tr?l="$priority":u.index_===pc?l="$value":u.index_===Ya?l="$key":((0,Y.hu)(u.index_ instanceof $s,"Unrecognized index type!"),l=u.index_.toString()),a.orderBy=(0,Y.Wl)(l),u.startSet_){const p=u.startAfterSet_?"startAfter":"startAt";a[p]=(0,Y.Wl)(u.indexStartValue_),u.startNameSet_&&(a[p]+=","+(0,Y.Wl)(u.indexStartName_))}if(u.endSet_){const p=u.endBeforeSet_?"endBefore":"endAt";a[p]=(0,Y.Wl)(u.indexEndValue_),u.endNameSet_&&(a[p]+=","+(0,Y.Wl)(u.indexEndName_))}return u.limitSet_&&(u.isViewFromLeft()?a.limitToFirst=u.limit_:a.limitToLast=u.limit_),a}function xn(u){const a={};if(u.startSet_&&(a.sp=u.indexStartValue_,u.startNameSet_&&(a.sn=u.indexStartName_),a.sin=!u.startAfterSet_),u.endSet_&&(a.ep=u.indexEndValue_,u.endNameSet_&&(a.en=u.indexEndName_),a.ein=!u.endBeforeSet_),u.limitSet_){a.l=u.limit_;let l=u.viewFrom_;""===l&&(l=u.isViewFromLeft()?"l":"r"),a.vf=l}return u.index_!==Tr&&(a.i=u.index_.toString()),a}class Zn extends Zc{constructor(a,l,p,I){super(),this.repoInfo_=a,this.onDataUpdate_=l,this.authTokenProvider_=p,this.appCheckTokenProvider_=I,this.log_=Eo("p:rest:"),this.listens_={}}reportStats(a){throw new Error("Method not implemented.")}static getListenId_(a,l){return void 0!==l?"tag$"+l:((0,Y.hu)(a._queryParams.isDefault(),"should have a tag if it's not a default query."),a._path.toString())}listen(a,l,p,I){const M=a._path.toString();this.log_("Listen called for "+M+" "+a._queryIdentifier);const V=Zn.getListenId_(a,p),te={};this.listens_[V]=te;const he=In(a._queryParams);this.restRequest_(M+".json",he,(Te,bt)=>{let jt=bt;if(404===Te&&(jt=null,Te=null),null===Te&&this.onDataUpdate_(M,jt,!1,p),(0,Y.DV)(this.listens_,V)===te){let Yt;Yt=Te?401===Te?"permission_denied":"rest_error:"+Te:"ok",I(Yt,null)}})}unlisten(a,l){const p=Zn.getListenId_(a,l);delete this.listens_[p]}get(a){const l=In(a._queryParams),p=a._path.toString(),I=new Y.BH;return this.restRequest_(p+".json",l,(M,V)=>{let te=V;404===M&&(te=null,M=null),null===M?(this.onDataUpdate_(p,te,!1,null),I.resolve(te)):I.reject(new Error(te))}),I.promise}refreshAuthToken(a){}restRequest_(a,l={},p){return l.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([I,M])=>{I&&I.accessToken&&(l.auth=I.accessToken),M&&M.token&&(l.ac=M.token);const V=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+a+"?ns="+this.repoInfo_.namespace+(0,Y.xO)(l);this.log_("Sending REST request for "+V);const te=new XMLHttpRequest;te.onreadystatechange=()=>{if(p&&4===te.readyState){this.log_("REST Response for "+V+" received. status:",te.status,"response:",te.responseText);let he=null;if(te.status>=200&&te.status<300){try{he=(0,Y.cI)(te.responseText)}catch{is("Failed to parse JSON response for "+V+": "+te.responseText)}p(null,he)}else 401!==te.status&&404!==te.status&&is("Got unsuccessful REST response for "+V+" Status: "+te.status),p(te.status);p=null}},te.open("GET",V,!0),te.send()})}}class Nr{constructor(){this.rootNode_=Xr.EMPTY_NODE}getNode(a){return this.rootNode_.getChild(a)}updateSnapshot(a,l){this.rootNode_=this.rootNode_.updateChild(a,l)}}function Fr(){return{value:null,children:new Map}}function uo(u,a,l){if(fr(a))u.value=l,u.children.clear();else if(null!==u.value)u.value=u.value.updateChild(a,l);else{const p=Or(a);u.children.has(p)||u.children.set(p,Fr()),uo(u.children.get(p),a=wi(a),l)}}function Ts(u,a){if(fr(a))return u.value=null,u.children.clear(),!0;if(null!==u.value){if(u.value.isLeafNode())return!1;{const l=u.value;return u.value=null,l.forEachChild(Tr,(p,I)=>{uo(u,new Mi(p),I)}),Ts(u,a)}}if(u.children.size>0){const l=Or(a);return a=wi(a),u.children.has(l)&&Ts(u.children.get(l),a)&&u.children.delete(l),0===u.children.size}return!0}function ul(u,a,l){null!==u.value?l(a,u.value):function Zs(u,a){u.children.forEach((l,p)=>{a(p,l)})}(u,(p,I)=>{ul(I,new Mi(a.toString()+"/"+p),l)})}class xl{constructor(a){this.collection_=a,this.last_=null}get(){const a=this.collection_.get(),l=Object.assign({},a);return this.last_&&Rr(this.last_,(p,I)=>{l[p]=l[p]-I}),this.last_=a,l}}class Cu{constructor(a,l){this.server_=l,this.statsToReport_={},this.statsListener_=new xl(a);const p=1e4+2e4*Math.random();gr(this.reportStats_.bind(this),Math.floor(p))}reportStats_(){const a=this.statsListener_.get(),l={};let p=!1;Rr(a,(I,M)=>{M>0&&(0,Y.r3)(this.statsToReport_,I)&&(l[I]=M,p=!0)}),p&&this.server_.reportStats(l),gr(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var zo=(()=>{return(u=zo||(zo={}))[u.OVERWRITE=0]="OVERWRITE",u[u.MERGE=1]="MERGE",u[u.ACK_USER_WRITE=2]="ACK_USER_WRITE",u[u.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",zo;var u})();function hi(u){return{fromUser:!1,fromServer:!0,queryId:u,tagged:!0}}class bi{constructor(a,l,p){this.path=a,this.affectedTree=l,this.revert=p,this.type=zo.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(a){if(fr(this.path)){if(null!=this.affectedTree.value)return(0,Y.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const l=this.affectedTree.subtree(new Mi(a));return new bi(vr(),l,this.revert)}}return(0,Y.hu)(Or(this.path)===a,"operationForChild called for unrelated child."),new bi(wi(this.path),this.affectedTree,this.revert)}}class Xa{constructor(a,l){this.source=a,this.path=l,this.type=zo.LISTEN_COMPLETE}operationForChild(a){return fr(this.path)?new Xa(this.source,vr()):new Xa(this.source,wi(this.path))}}class Rl{constructor(a,l,p){this.source=a,this.path=l,this.snap=p,this.type=zo.OVERWRITE}operationForChild(a){return fr(this.path)?new Rl(this.source,vr(),this.snap.getImmediateChild(a)):new Rl(this.source,wi(this.path),this.snap)}}class Qa{constructor(a,l,p){this.source=a,this.path=l,this.children=p,this.type=zo.MERGE}operationForChild(a){if(fr(this.path)){const l=this.children.subtree(new Mi(a));return l.isEmpty()?null:l.value?new Rl(this.source,vr(),l.value):new Qa(this.source,vr(),l)}return(0,Y.hu)(Or(this.path)===a,"Can't get a merge for a child not on the path of the operation"),new Qa(this.source,wi(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ml{constructor(a,l,p){this.node_=a,this.fullyInitialized_=l,this.filtered_=p}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(a){if(fr(a))return this.isFullyInitialized()&&!this.filtered_;const l=Or(a);return this.isCompleteForChild(l)}isCompleteForChild(a){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(a)}getNode(){return this.node_}}class Ld{constructor(a){this.query_=a,this.index_=this.query_._queryParams.getIndex()}}function Pc(u,a,l,p,I,M){const V=p.filter(te=>te.type===l);V.sort((te,he)=>function Lp(u,a,l){if(null==a.childName||null==l.childName)throw(0,Y.g5)("Should only compare child_ events.");const p=new Ar(a.childName,a.snapshotNode),I=new Ar(l.childName,l.snapshotNode);return u.index_.compare(p,I)}(u,te,he)),V.forEach(te=>{const he=function xh(u,a,l){return"value"===a.type||"child_removed"===a.type||(a.prevName=l.getPredecessorChildName(a.childName,a.snapshotNode,u.index_)),a}(u,te,M);I.forEach(Te=>{Te.respondsTo(te.type)&&a.push(Te.createEvent(he,u.query_))})})}function Rh(u,a){return{eventCache:u,serverCache:a}}function Pl(u,a,l,p){return Rh(new Ml(a,l,p),u.serverCache)}function Mh(u,a,l,p){return Rh(u.eventCache,new Ml(a,l,p))}function Bd(u){return u.eventCache.isFullyInitialized()?u.eventCache.getNode():null}function Ol(u){return u.serverCache.isFullyInitialized()?u.serverCache.getNode():null}let Ju;class os{constructor(a,l=(()=>(Ju||(Ju=new Ia(Ao)),Ju))()){this.value=a,this.children=l}static fromObject(a){let l=new os(null);return Rr(a,(p,I)=>{l=l.set(new Mi(p),I)}),l}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(a,l){if(null!=this.value&&l(this.value))return{path:vr(),value:this.value};if(fr(a))return null;{const p=Or(a),I=this.children.get(p);if(null!==I){const M=I.findRootMostMatchingPathAndValue(wi(a),l);return null!=M?{path:Qi(new Mi(p),M.path),value:M.value}:null}return null}}findRootMostValueAndPath(a){return this.findRootMostMatchingPathAndValue(a,()=>!0)}subtree(a){if(fr(a))return this;{const l=Or(a),p=this.children.get(l);return null!==p?p.subtree(wi(a)):new os(null)}}set(a,l){if(fr(a))return new os(l,this.children);{const p=Or(a),M=(this.children.get(p)||new os(null)).set(wi(a),l),V=this.children.insert(p,M);return new os(this.value,V)}}remove(a){if(fr(a))return this.children.isEmpty()?new os(null):new os(null,this.children);{const l=Or(a),p=this.children.get(l);if(p){const I=p.remove(wi(a));let M;return M=I.isEmpty()?this.children.remove(l):this.children.insert(l,I),null===this.value&&M.isEmpty()?new os(null):new os(this.value,M)}return this}}get(a){if(fr(a))return this.value;{const l=Or(a),p=this.children.get(l);return p?p.get(wi(a)):null}}setTree(a,l){if(fr(a))return l;{const p=Or(a),M=(this.children.get(p)||new os(null)).setTree(wi(a),l);let V;return V=M.isEmpty()?this.children.remove(p):this.children.insert(p,M),new os(this.value,V)}}fold(a){return this.fold_(vr(),a)}fold_(a,l){const p={};return this.children.inorderTraversal((I,M)=>{p[I]=M.fold_(Qi(a,I),l)}),l(a,this.value,p)}findOnPath(a,l){return this.findOnPath_(a,vr(),l)}findOnPath_(a,l,p){const I=!!this.value&&p(l,this.value);if(I)return I;if(fr(a))return null;{const M=Or(a),V=this.children.get(M);return V?V.findOnPath_(wi(a),Qi(l,M),p):null}}foreachOnPath(a,l){return this.foreachOnPath_(a,vr(),l)}foreachOnPath_(a,l,p){if(fr(a))return this;{this.value&&p(l,this.value);const I=Or(a),M=this.children.get(I);return M?M.foreachOnPath_(wi(a),Qi(l,I),p):new os(null)}}foreach(a){this.foreach_(vr(),a)}foreach_(a,l){this.children.inorderTraversal((p,I)=>{I.foreach_(Qi(a,p),l)}),this.value&&l(a,this.value)}foreachChild(a){this.children.inorderTraversal((l,p)=>{p.value&&a(l,p.value)})}}class Ja{constructor(a){this.writeTree_=a}static empty(){return new Ja(new os(null))}}function el(u,a,l){if(fr(a))return new Ja(new os(l));{const p=u.writeTree_.findRootMostValueAndPath(a);if(null!=p){const I=p.path;let M=p.value;const V=S(I,a);return M=M.updateChild(V,l),new Ja(u.writeTree_.set(I,M))}{const I=new os(l),M=u.writeTree_.setTree(a,I);return new Ja(M)}}}function Oc(u,a,l){let p=u;return Rr(l,(I,M)=>{p=el(p,Qi(a,I),M)}),p}function Tu(u,a){if(fr(a))return Ja.empty();{const l=u.writeTree_.setTree(a,new os(null));return new Ja(l)}}function Pa(u,a){return null!=gc(u,a)}function gc(u,a){const l=u.writeTree_.findRootMostValueAndPath(a);return null!=l?u.writeTree_.get(l.path).getChild(S(l.path,a)):null}function Ud(u){const a=[],l=u.writeTree_.value;return null!=l?l.isLeafNode()||l.forEachChild(Tr,(p,I)=>{a.push(new Ar(p,I))}):u.writeTree_.children.inorderTraversal((p,I)=>{null!=I.value&&a.push(new Ar(p,I.value))}),a}function aa(u,a){if(fr(a))return u;{const l=gc(u,a);return new Ja(null!=l?new os(l):u.writeTree_.subtree(a))}}function Ph(u){return u.writeTree_.isEmpty()}function Oa(u,a){return Vd(vr(),u.writeTree_,a)}function Vd(u,a,l){if(null!=a.value)return l.updateChild(u,a.value);{let p=null;return a.children.inorderTraversal((I,M)=>{".priority"===I?((0,Y.hu)(null!==M.value,"Priority writes must always be leaf nodes"),p=M.value):l=Vd(Qi(u,I),M,l)}),!l.getChild(u).isEmpty()&&null!==p&&(l=l.updateChild(Qi(u,".priority"),p)),l}}function mc(u,a){return Oh(a,u)}function Su(u,a){if(u.snap)return k(u.path,a);for(const l in u.children)if(u.children.hasOwnProperty(l)&&k(Qi(u.path,l),a))return!0;return!1}function yc(u){return u.visible}function td(u,a,l){let p=Ja.empty();for(let I=0;I<u.length;++I){const M=u[I];if(a(M)){const V=M.path;let te;if(M.snap)k(l,V)?(te=S(l,V),p=el(p,te,M.snap)):k(V,l)&&(te=S(V,l),p=el(p,vr(),M.snap.getChild(te)));else{if(!M.children)throw(0,Y.g5)("WriteRecord should have .snap or .children");if(k(l,V))te=S(l,V),p=Oc(p,te,M.children);else if(k(V,l))if(te=S(V,l),fr(te))p=Oc(p,vr(),M.children);else{const he=(0,Y.DV)(M.children,Or(te));if(he){const Te=he.getChild(wi(te));p=el(p,vr(),Te)}}}}}return p}function Au(u,a,l,p,I){if(p||I){const M=aa(u.visibleWrites,a);return!I&&Ph(M)?l:I||null!=l||Pa(M,vr())?Oa(td(u.allWrites,function(Te){return(Te.visible||I)&&(!p||!~p.indexOf(Te.writeId))&&(k(Te.path,a)||k(a,Te.path))},a),l||Xr.EMPTY_NODE):null}{const M=gc(u.visibleWrites,a);if(null!=M)return M;{const V=aa(u.visibleWrites,a);return Ph(V)?l:null!=l||Pa(V,vr())?Oa(V,l||Xr.EMPTY_NODE):null}}}function Xs(u,a,l,p){return Au(u.writeTree,u.treePath,a,l,p)}function nd(u,a){return function nu(u,a,l){let p=Xr.EMPTY_NODE;const I=gc(u.visibleWrites,a);if(I)return I.isLeafNode()||I.forEachChild(Tr,(M,V)=>{p=p.updateImmediateChild(M,V)}),p;if(l){const M=aa(u.visibleWrites,a);return l.forEachChild(Tr,(V,te)=>{const he=Oa(aa(M,new Mi(V)),te);p=p.updateImmediateChild(V,he)}),Ud(M).forEach(V=>{p=p.updateImmediateChild(V.name,V.node)}),p}return Ud(aa(u.visibleWrites,a)).forEach(V=>{p=p.updateImmediateChild(V.name,V.node)}),p}(u.writeTree,u.treePath,a)}function kc(u,a,l,p){return function ru(u,a,l,p,I){(0,Y.hu)(p||I,"Either existingEventSnap or existingServerSnap must exist");const M=Qi(a,l);if(Pa(u.visibleWrites,M))return null;{const V=aa(u.visibleWrites,M);return Ph(V)?I.getChild(l):Oa(V,I.getChild(l))}}(u.writeTree,u.treePath,a,l,p)}function Nc(u,a){return function Of(u,a){return gc(u.visibleWrites,a)}(u.writeTree,Qi(u.treePath,a))}function _c(u,a,l){return function Pf(u,a,l,p){const I=Qi(a,l),M=gc(u.visibleWrites,I);return null!=M?M:p.isCompleteForChild(l)?Oa(aa(u.visibleWrites,I),p.getNode().getImmediateChild(l)):null}(u.writeTree,u.treePath,a,l)}function xu(u,a){return Oh(Qi(u.treePath,a),u.writeTree)}function Oh(u,a){return{treePath:u,writeTree:a}}class kf{constructor(){this.changeMap=new Map}trackChildChange(a){const l=a.type,p=a.childName;(0,Y.hu)("child_added"===l||"child_changed"===l||"child_removed"===l,"Only child changes supported for tracking"),(0,Y.hu)(".priority"!==p,"Only non-priority child changes can be tracked.");const I=this.changeMap.get(p);if(I){const M=I.type;if("child_added"===l&&"child_removed"===M)this.changeMap.set(p,co(p,a.snapshotNode,I.snapshotNode));else if("child_removed"===l&&"child_added"===M)this.changeMap.delete(p);else if("child_removed"===l&&"child_changed"===M)this.changeMap.set(p,Ho(p,I.oldSnap));else if("child_changed"===l&&"child_added"===M)this.changeMap.set(p,Ps(p,a.snapshotNode));else{if("child_changed"!==l||"child_changed"!==M)throw(0,Y.g5)("Illegal combination of changes: "+a+" occurred after "+I);this.changeMap.set(p,co(p,a.snapshotNode,I.oldSnap))}}else this.changeMap.set(p,a)}getChanges(){return Array.from(this.changeMap.values())}}const rd=new class Qr{getCompleteChild(a){return null}getChildAfterChild(a,l,p){return null}};class id{constructor(a,l,p=null){this.writes_=a,this.viewCache_=l,this.optCompleteServerCache_=p}getCompleteChild(a){const l=this.viewCache_.eventCache;if(l.isCompleteForChild(a))return l.getNode().getImmediateChild(a);{const p=null!=this.optCompleteServerCache_?new Ml(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return _c(this.writes_,a,p)}}getChildAfterChild(a,l,p){const I=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ol(this.viewCache_),M=function dl(u,a,l,p,I,M){return function vc(u,a,l,p,I,M,V){let te;const he=aa(u.visibleWrites,a),Te=gc(he,vr());if(null!=Te)te=Te;else{if(null==l)return[];te=Oa(he,l)}if(te=te.withIndex(V),te.isEmpty()||te.isLeafNode())return[];{const bt=[],jt=V.getCompare(),Yt=M?te.getReverseIteratorFrom(p,V):te.getIteratorFrom(p,V);let Dn=Yt.getNext();for(;Dn&&bt.length<I;)0!==jt(Dn,p)&&bt.push(Dn),Dn=Yt.getNext();return bt}}(u.writeTree,u.treePath,a,l,p,I,M)}(this.writes_,I,l,1,p,a);return 0===M.length?null:M[0]}}function Hd(u,a,l,p,I,M){const V=a.eventCache;if(null!=Nc(p,l))return a;{let te,he;if(fr(l))if((0,Y.hu)(a.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),a.serverCache.isFiltered()){const Te=Ol(a),jt=nd(p,Te instanceof Xr?Te:Xr.EMPTY_NODE);te=u.filter.updateFullNode(a.eventCache.getNode(),jt,M)}else{const Te=Xs(p,Ol(a));te=u.filter.updateFullNode(a.eventCache.getNode(),Te,M)}else{const Te=Or(l);if(".priority"===Te){(0,Y.hu)(1===Rt(l),"Can't have a priority with additional path components");const bt=V.getNode();he=a.serverCache.getNode();const jt=kc(p,l,bt,he);te=null!=jt?u.filter.updatePriority(bt,jt):V.getNode()}else{const bt=wi(l);let jt;if(V.isCompleteForChild(Te)){he=a.serverCache.getNode();const Yt=kc(p,l,V.getNode(),he);jt=null!=Yt?V.getNode().getImmediateChild(Te).updateChild(bt,Yt):V.getNode().getImmediateChild(Te)}else jt=_c(p,Te,a.serverCache);te=null!=jt?u.filter.updateChild(V.getNode(),Te,jt,bt,I,M):V.getNode()}}return Pl(a,te,V.isFullyInitialized()||fr(l),u.filter.filtersNodes())}}function ad(u,a,l,p,I,M,V,te){const he=a.serverCache;let Te;const bt=V?u.filter:u.filter.getIndexedFilter();if(fr(l))Te=bt.updateFullNode(he.getNode(),p,null);else if(bt.filtersNodes()&&!he.isFiltered()){const Dn=he.getNode().updateChild(l,p);Te=bt.updateFullNode(he.getNode(),Dn,null)}else{const Dn=Or(l);if(!he.isCompleteForPath(l)&&Rt(l)>1)return a;const Bn=wi(l),fi=he.getNode().getImmediateChild(Dn).updateChild(Bn,p);Te=".priority"===Dn?bt.updatePriority(he.getNode(),fi):bt.updateChild(he.getNode(),Dn,fi,Bn,rd,null)}const jt=Mh(a,Te,he.isFullyInitialized()||fr(l),bt.filtersNodes());return Hd(u,jt,l,I,new id(I,jt,M),te)}function iu(u,a,l,p,I,M,V){const te=a.eventCache;let he,Te;const bt=new id(I,a,M);if(fr(l))Te=u.filter.updateFullNode(a.eventCache.getNode(),p,V),he=Pl(a,Te,!0,u.filter.filtersNodes());else{const jt=Or(l);if(".priority"===jt)Te=u.filter.updatePriority(a.eventCache.getNode(),p),he=Pl(a,Te,te.isFullyInitialized(),te.isFiltered());else{const Yt=wi(l),Dn=te.getNode().getImmediateChild(jt);let Bn;if(fr(Yt))Bn=p;else{const Kr=bt.getCompleteChild(jt);Bn=null!=Kr?".priority"===Es(Yt)&&Kr.getChild(Mo(Yt)).isEmpty()?Kr:Kr.updateChild(Yt,p):Xr.EMPTY_NODE}he=Dn.equals(Bn)?a:Pl(a,u.filter.updateChild(te.getNode(),jt,Bn,Yt,bt,V),te.isFullyInitialized(),u.filter.filtersNodes())}}return he}function Ic(u,a){return u.eventCache.isCompleteForChild(a)}function zd(u,a,l){return l.foreach((p,I)=>{a=a.updateChild(p,I)}),a}function wc(u,a,l,p,I,M,V,te){if(a.serverCache.getNode().isEmpty()&&!a.serverCache.isFullyInitialized())return a;let Te,he=a;Te=fr(l)?p:new os(null).setTree(l,p);const bt=a.serverCache.getNode();return Te.children.inorderTraversal((jt,Yt)=>{if(bt.hasChild(jt)){const Bn=zd(0,a.serverCache.getNode().getImmediateChild(jt),Yt);he=ad(u,he,new Mi(jt),Bn,I,M,V,te)}}),Te.children.inorderTraversal((jt,Yt)=>{const Dn=!a.serverCache.isCompleteForChild(jt)&&null===Yt.value;if(!bt.hasChild(jt)&&!Dn){const Kr=zd(0,a.serverCache.getNode().getImmediateChild(jt),Yt);he=ad(u,he,new Mi(jt),Kr,I,M,V,te)}}),he}class Nf{constructor(a,l){this.query_=a,this.eventRegistrations_=[];const p=this.query_._queryParams,I=new cl(p.getIndex()),M=function Ah(u){return u.loadsAllData()?new cl(u.getIndex()):u.hasLimit()?new Jc(u):new wo(u)}(p);this.processor_=function sd(u){return{filter:u}}(M);const V=l.serverCache,te=l.eventCache,he=I.updateFullNode(Xr.EMPTY_NODE,V.getNode(),null),Te=M.updateFullNode(Xr.EMPTY_NODE,te.getNode(),null),bt=new Ml(he,V.isFullyInitialized(),I.filtersNodes()),jt=new Ml(Te,te.isFullyInitialized(),M.filtersNodes());this.viewCache_=Rh(jt,bt),this.eventGenerator_=new Ld(this.query_)}get query(){return this.query_}}function tl(u,a){const l=Ol(u.viewCache_);return l&&(u.query._queryParams.loadsAllData()||!fr(a)&&!l.getImmediateChild(Or(a)).isEmpty())?l.getChild(a):null}function ms(u){return 0===u.eventRegistrations_.length}function Mu(u,a,l){const p=[];if(l){(0,Y.hu)(null==a,"A cancel should cancel all event registrations.");const I=u.query._path;u.eventRegistrations_.forEach(M=>{const V=M.createCancelEvent(l,I);V&&p.push(V)})}if(a){let I=[];for(let M=0;M<u.eventRegistrations_.length;++M){const V=u.eventRegistrations_[M];if(V.matches(a)){if(a.hasAnyCallback()){I=I.concat(u.eventRegistrations_.slice(M+1));break}}else I.push(V)}u.eventRegistrations_=I}else u.eventRegistrations_=[];return p}function Nl(u,a,l,p){a.type===zo.MERGE&&null!==a.source.queryId&&((0,Y.hu)(Ol(u.viewCache_),"We should always have a full cache before handling merges"),(0,Y.hu)(Bd(u.viewCache_),"Missing event cache, even though we have a server cache"));const I=u.viewCache_,M=function la(u,a,l,p,I){const M=new kf;let V,te;if(l.type===zo.OVERWRITE){const Te=l;Te.source.fromUser?V=iu(u,a,Te.path,Te.snap,p,I,M):((0,Y.hu)(Te.source.fromServer,"Unknown source."),te=Te.source.tagged||a.serverCache.isFiltered()&&!fr(Te.path),V=ad(u,a,Te.path,Te.snap,p,I,te,M))}else if(l.type===zo.MERGE){const Te=l;Te.source.fromUser?V=function su(u,a,l,p,I,M,V){let te=a;return p.foreach((he,Te)=>{const bt=Qi(l,he);Ic(a,Or(bt))&&(te=iu(u,te,bt,Te,I,M,V))}),p.foreach((he,Te)=>{const bt=Qi(l,he);Ic(a,Or(bt))||(te=iu(u,te,bt,Te,I,M,V))}),te}(u,a,Te.path,Te.children,p,I,M):((0,Y.hu)(Te.source.fromServer,"Unknown source."),te=Te.source.tagged||a.serverCache.isFiltered(),V=wc(u,a,Te.path,Te.children,p,I,te,M))}else if(l.type===zo.ACK_USER_WRITE){const Te=l;V=Te.revert?function Ru(u,a,l,p,I,M){let V;if(null!=Nc(p,l))return a;{const te=new id(p,a,I),he=a.eventCache.getNode();let Te;if(fr(l)||".priority"===Or(l)){let bt;if(a.serverCache.isFullyInitialized())bt=Xs(p,Ol(a));else{const jt=a.serverCache.getNode();(0,Y.hu)(jt instanceof Xr,"serverChildren would be complete if leaf node"),bt=nd(p,jt)}Te=u.filter.updateFullNode(he,bt,M)}else{const bt=Or(l);let jt=_c(p,bt,a.serverCache);null==jt&&a.serverCache.isCompleteForChild(bt)&&(jt=he.getImmediateChild(bt)),Te=null!=jt?u.filter.updateChild(he,bt,jt,wi(l),te,M):a.eventCache.getNode().hasChild(bt)?u.filter.updateChild(he,bt,Xr.EMPTY_NODE,wi(l),te,M):he,Te.isEmpty()&&a.serverCache.isFullyInitialized()&&(V=Xs(p,Ol(a)),V.isLeafNode()&&(Te=u.filter.updateFullNode(Te,V,M)))}return V=a.serverCache.isFullyInitialized()||null!=Nc(p,vr()),Pl(a,Te,V,u.filter.filtersNodes())}}(u,a,Te.path,p,I,M):function Cc(u,a,l,p,I,M,V){if(null!=Nc(I,l))return a;const te=a.serverCache.isFiltered(),he=a.serverCache;if(null!=p.value){if(fr(l)&&he.isFullyInitialized()||he.isCompleteForPath(l))return ad(u,a,l,he.getNode().getChild(l),I,M,te,V);if(fr(l)){let Te=new os(null);return he.getNode().forEachChild(Ya,(bt,jt)=>{Te=Te.set(new Mi(bt),jt)}),wc(u,a,l,Te,I,M,te,V)}return a}{let Te=new os(null);return p.foreach((bt,jt)=>{const Yt=Qi(l,bt);he.isCompleteForPath(Yt)&&(Te=Te.set(bt,he.getNode().getChild(Yt)))}),wc(u,a,l,Te,I,M,te,V)}}(u,a,Te.path,Te.affectedTree,p,I,M)}else{if(l.type!==zo.LISTEN_COMPLETE)throw(0,Y.g5)("Unknown operation type: "+l.type);V=function ka(u,a,l,p,I){const M=a.serverCache;return Hd(u,Mh(a,M.getNode(),M.isFullyInitialized()||fr(l),M.isFiltered()),l,p,rd,I)}(u,a,l.path,p,M)}const he=M.getChanges();return function Ec(u,a,l){const p=a.eventCache;if(p.isFullyInitialized()){const I=p.getNode().isLeafNode()||p.getNode().isEmpty(),M=Bd(u);(l.length>0||!u.eventCache.isFullyInitialized()||I&&!p.getNode().equals(M)||!p.getNode().getPriority().equals(M.getPriority()))&&l.push(Xl(Bd(a)))}}(a,V,he),{viewCache:V,changes:he}}(u.processor_,I,a,l,p);return function od(u,a){(0,Y.hu)(a.eventCache.getNode().isIndexed(u.filter.getIndex()),"Event snap not indexed"),(0,Y.hu)(a.serverCache.getNode().isIndexed(u.filter.getIndex()),"Server snap not indexed")}(u.processor_,M.viewCache),(0,Y.hu)(M.viewCache.serverCache.isFullyInitialized()||!I.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),u.viewCache_=M.viewCache,ou(u,M.changes,M.viewCache.eventCache.getNode(),null)}function ou(u,a,l,p){return function Mf(u,a,l,p){const I=[],M=[];return a.forEach(V=>{"child_changed"===V.type&&u.index_.indexedValueChanged(V.oldSnap,V.snapshotNode)&&M.push(function wu(u,a){return{type:"child_moved",snapshotNode:a,childName:u}}(V.childName,V.snapshotNode))}),Pc(u,I,"child_removed",a,p,l),Pc(u,I,"child_added",a,p,l),Pc(u,I,"child_moved",M,p,l),Pc(u,I,"child_changed",a,p,l),Pc(u,I,"value",a,p,l),I}(u.eventGenerator_,a,l,p?[p]:u.eventRegistrations_)}let ud,Kt;class dd{constructor(){this.views=new Map}}function hd(u,a,l,p){const I=a.source.queryId;if(null!==I){const M=u.views.get(I);return(0,Y.hu)(null!=M,"SyncTree gave us an op for an invalid query."),Nl(M,a,l,p)}{let M=[];for(const V of u.views.values())M=M.concat(Nl(V,a,l,p));return M}}function Wd(u,a,l,p,I){const V=u.views.get(a._queryIdentifier);if(!V){let te=Xs(l,I?p:null),he=!1;te?he=!0:p instanceof Xr?(te=nd(l,p),he=!1):(te=Xr.EMPTY_NODE,he=!1);const Te=Rh(new Ml(te,he,!1),new Ml(p,I,!1));return new Nf(a,Te)}return V}function m(u){const a=[];for(const l of u.views.values())l.query._queryParams.loadsAllData()||a.push(l);return a}function A(u,a){let l=null;for(const p of u.views.values())l=l||tl(p,a);return l}function K(u,a){return a._queryParams.loadsAllData()?mt(u):u.views.get(a._queryIdentifier)}function oe(u,a){return null!=K(u,a)}function Je(u){return null!=mt(u)}function mt(u){for(const a of u.views.values())if(a.query._queryParams.loadsAllData())return a;return null}let nr=1;class as{constructor(a){this.listenProvider_=a,this.syncPointTree_=new os(null),this.pendingWriteTree_=function Bp(){return{visibleWrites:Ja.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Go(u,a,l,p,I){return function ed(u,a,l,p,I){(0,Y.hu)(p>u.lastWriteId,"Stacking an older write on top of newer ones"),void 0===I&&(I=!0),u.allWrites.push({path:a,snap:l,writeId:p,visible:I}),I&&(u.visibleWrites=el(u.visibleWrites,a,l)),u.lastWriteId=p}(u.pendingWriteTree_,a,l,p,I),I?Lc(u,new Rl({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},a,l)):[]}function hl(u,a,l=!1){const p=function kl(u,a){for(let l=0;l<u.allWrites.length;l++){const p=u.allWrites[l];if(p.writeId===a)return p}return null}(u.pendingWriteTree_,a);if(function No(u,a){const l=u.allWrites.findIndex(te=>te.writeId===a);(0,Y.hu)(l>=0,"removeWrite called with nonexistent writeId.");const p=u.allWrites[l];u.allWrites.splice(l,1);let I=p.visible,M=!1,V=u.allWrites.length-1;for(;I&&V>=0;){const te=u.allWrites[V];te.visible&&(V>=l&&Su(te,p.path)?I=!1:k(p.path,te.path)&&(M=!0)),V--}return!!I&&(M?(function tu(u){u.visibleWrites=td(u.allWrites,yc,vr()),u.lastWriteId=u.allWrites.length>0?u.allWrites[u.allWrites.length-1].writeId:-1}(u),!0):(p.snap?u.visibleWrites=Tu(u.visibleWrites,p.path):Rr(p.children,he=>{u.visibleWrites=Tu(u.visibleWrites,Qi(p.path,he))}),!0))}(u.pendingWriteTree_,a)){let M=new os(null);return null!=p.snap?M=M.set(vr(),!0):Rr(p.children,V=>{M=M.set(new Mi(V),!0)}),Lc(u,new bi(p.path,M,l))}return[]}function Fc(u,a,l){return Lc(u,new Rl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},a,l))}function Ql(u,a,l,p,I=!1){const M=a._path,V=u.syncPointTree_.get(M);let te=[];if(V&&("default"===a._queryIdentifier||oe(V,a))){const he=function g(u,a,l,p){const I=a._queryIdentifier,M=[];let V=[];const te=Je(u);if("default"===I)for(const[he,Te]of u.views.entries())V=V.concat(Mu(Te,l,p)),ms(Te)&&(u.views.delete(he),Te.query._queryParams.loadsAllData()||M.push(Te.query));else{const he=u.views.get(I);he&&(V=V.concat(Mu(he,l,p)),ms(he)&&(u.views.delete(I),he.query._queryParams.loadsAllData()||M.push(he.query)))}return te&&!Je(u)&&M.push(new(function nl(){return(0,Y.hu)(ud,"Reference.ts has not been loaded"),ud}())(a._repo,a._path)),{removed:M,events:V}}(V,a,l,p);(function kh(u){return 0===u.views.size})(V)&&(u.syncPointTree_=u.syncPointTree_.remove(M));const Te=he.removed;if(te=he.events,!I){const bt=-1!==Te.findIndex(Yt=>Yt._queryParams.loadsAllData()),jt=u.syncPointTree_.findOnPath(M,(Yt,Dn)=>Je(Dn));if(bt&&!jt){const Yt=u.syncPointTree_.subtree(M);if(!Yt.isEmpty()){const Dn=function kg(u){return u.fold((a,l,p)=>{if(l&&Je(l))return[mt(l)];{let I=[];return l&&(I=m(l)),Rr(p,(M,V)=>{I=I.concat(V)}),I}})}(Yt);for(let Bn=0;Bn<Dn.length;++Bn){const Kr=Dn[Bn],fi=Kr.query,ho=Yd(u,Kr);u.listenProvider_.startListening(Ss(fi),gd(u,fi),ho.hashFn,ho.onComplete)}}}!jt&&Te.length>0&&!p&&(bt?u.listenProvider_.stopListening(Ss(a),null):Te.forEach(Yt=>{const Dn=u.queryToTagMap.get(Fh(Yt));u.listenProvider_.stopListening(Ss(Yt),Dn)}))}!function Lf(u,a){for(let l=0;l<a.length;++l){const p=a[l];if(!p._queryParams.loadsAllData()){const I=Fh(p),M=u.queryToTagMap.get(I);u.queryToTagMap.delete(I),u.tagToQueryMap.delete(M)}}}(u,Te)}return te}function lu(u,a,l,p){const I=Zd(u,p);if(null!=I){const M=cu(I),V=M.path,te=M.queryId,he=S(V,a);return Ff(u,V,new Rl(hi(te),he,l))}return[]}function fd(u,a,l,p=!1){const I=a._path;let M=null,V=!1;u.syncPointTree_.foreachOnPath(I,(Yt,Dn)=>{const Bn=S(Yt,I);M=M||A(Dn,Bn),V=V||Je(Dn)});let he,te=u.syncPointTree_.get(I);te?(V=V||Je(te),M=M||A(te,vr())):(te=new dd,u.syncPointTree_=u.syncPointTree_.set(I,te)),null!=M?he=!0:(he=!1,M=Xr.EMPTY_NODE,u.syncPointTree_.subtree(I).foreachChild((Dn,Bn)=>{const Kr=A(Bn,vr());Kr&&(M=M.updateImmediateChild(Dn,Kr))}));const Te=oe(te,a);if(!Te&&!a._queryParams.loadsAllData()){const Yt=Fh(a);(0,Y.hu)(!u.queryToTagMap.has(Yt),"View does not exist, but we have a tag");const Dn=function Bf(){return nr++}();u.queryToTagMap.set(Yt,Dn),u.tagToQueryMap.set(Dn,Yt)}let jt=function C(u,a,l,p,I,M){const V=Wd(u,a,p,I,M);return u.views.has(a._queryIdentifier)||u.views.set(a._queryIdentifier,V),function ld(u,a){u.eventRegistrations_.push(a)}(V,l),function cd(u,a){const l=u.viewCache_.eventCache,p=[];return l.getNode().isLeafNode()||l.getNode().forEachChild(Tr,(M,V)=>{p.push(Ps(M,V))}),l.isFullyInitialized()&&p.push(Xl(l.getNode())),ou(u,p,l.getNode(),a)}(V,l)}(te,a,l,mc(u.pendingWriteTree_,I),M,he);if(!Te&&!V&&!p){const Yt=K(te,a);jt=jt.concat(function $f(u,a,l){const p=a._path,I=gd(u,a),M=Yd(u,l),V=u.listenProvider_.startListening(Ss(a),I,M.hashFn,M.onComplete),te=u.syncPointTree_.subtree(p);if(I)(0,Y.hu)(!Je(te.value),"If we're adding a query, it shouldn't be shadowed");else{const he=te.fold((Te,bt,jt)=>{if(!fr(Te)&&bt&&Je(bt))return[mt(bt).query];{let Yt=[];return bt&&(Yt=Yt.concat(m(bt).map(Dn=>Dn.query))),Rr(jt,(Dn,Bn)=>{Yt=Yt.concat(Bn)}),Yt}});for(let Te=0;Te<he.length;++Te){const bt=he[Te];u.listenProvider_.stopListening(Ss(bt),gd(u,bt))}}return V}(u,a,Yt))}return jt}function pd(u,a,l){const I=u.pendingWriteTree_,M=u.syncPointTree_.findOnPath(a,(V,te)=>{const Te=A(te,S(V,a));if(Te)return Te});return Au(I,a,M,l,!0)}function Lc(u,a){return Og(a,u.syncPointTree_,null,mc(u.pendingWriteTree_,vr()))}function Og(u,a,l,p){if(fr(u.path))return Wm(u,a,l,p);{const I=a.get(vr());null==l&&null!=I&&(l=A(I,vr()));let M=[];const V=Or(u.path),te=u.operationForChild(V),he=a.children.get(V);if(he&&te){const Te=l?l.getImmediateChild(V):null,bt=xu(p,V);M=M.concat(Og(te,he,Te,bt))}return I&&(M=M.concat(hd(I,u,p,l))),M}}function Wm(u,a,l,p){const I=a.get(vr());null==l&&null!=I&&(l=A(I,vr()));let M=[];return a.children.inorderTraversal((V,te)=>{const he=l?l.getImmediateChild(V):null,Te=xu(p,V),bt=u.operationForChild(V);bt&&(M=M.concat(Wm(bt,te,he,Te)))}),I&&(M=M.concat(hd(I,u,p,l))),M}function Yd(u,a){const l=a.query,p=gd(u,l);return{hashFn:()=>(function Gd(u){return u.viewCache_.serverCache.getNode()}(a)||Xr.EMPTY_NODE).hash(),onComplete:I=>{if("ok"===I)return p?function au(u,a,l){const p=Zd(u,l);if(p){const I=cu(p),M=I.path,V=I.queryId,te=S(M,a);return Ff(u,M,new Xa(hi(V),te))}return[]}(u,l._path,p):function Pu(u,a){return Lc(u,new Xa({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},a))}(u,l._path);{const M=function X(u,a){let l="Unknown Error";"too_big"===u?l="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===u?l="Client doesn't have permission to access the desired data.":"unavailable"===u&&(l="The service is unavailable");const p=new Error(u+" at "+a._path.toString()+": "+l);return p.code=u.toUpperCase(),p}(I,l);return Ql(u,l,null,M)}}}}function gd(u,a){const l=Fh(a);return u.queryToTagMap.get(l)}function Fh(u){return u._path.toString()+"$"+u._queryIdentifier}function Zd(u,a){return u.tagToQueryMap.get(a)}function cu(u){const a=u.indexOf("$");return(0,Y.hu)(-1!==a&&a<u.length-1,"Bad queryKey."),{queryId:u.substr(a+1),path:new Mi(u.substr(0,a))}}function Ff(u,a,l){const p=u.syncPointTree_.get(a);return(0,Y.hu)(p,"Missing sync point for query tag that we're tracking"),hd(p,l,mc(u.pendingWriteTree_,a),null)}function Ss(u){return u._queryParams.loadsAllData()&&!u._queryParams.isDefault()?new(function er(){return(0,Y.hu)(Kt,"Reference.ts has not been loaded"),Kt}())(u._repo,u._path):u}class fl{constructor(a){this.node_=a}getImmediateChild(a){const l=this.node_.getImmediateChild(a);return new fl(l)}node(){return this.node_}}class Lh{constructor(a,l){this.syncTree_=a,this.path_=l}getImmediateChild(a){const l=Qi(this.path_,a);return new Lh(this.syncTree_,l)}node(){return pd(this.syncTree_,this.path_)}}const Uf=function(u){return(u=u||{}).timestamp=u.timestamp||(new Date).getTime(),u},md=function(u,a,l){return u&&"object"==typeof u?((0,Y.hu)(".sv"in u,"Unexpected leaf node or priority contents"),"string"==typeof u[".sv"]?Up(u[".sv"],a,l):"object"==typeof u[".sv"]?Ou(u[".sv"],a):void(0,Y.hu)(!1,"Unexpected server value: "+JSON.stringify(u,null,2))):u},Up=function(u,a,l){if("timestamp"===u)return l.timestamp;(0,Y.hu)(!1,"Unexpected server value: "+u)},Ou=function(u,a,l){u.hasOwnProperty("increment")||(0,Y.hu)(!1,"Unexpected server value: "+JSON.stringify(u,null,2));const p=u.increment;"number"!=typeof p&&(0,Y.hu)(!1,"Unexpected increment value: "+p);const I=a.node();if((0,Y.hu)(null!==I&&typeof I<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!I.isLeafNode())return p;const V=I.getValue();return"number"!=typeof V?p:V+p},Vp=function(u,a,l,p){return Xd(a,new Lh(l,u),p)},Bh=function(u,a,l){return Xd(u,new fl(a),l)};function Xd(u,a,l){const p=u.getPriority().val(),I=md(p,a.getImmediateChild(".priority"),l);let M;if(u.isLeafNode()){const V=u,te=md(V.getValue(),a,l);return te!==V.getValue()||I!==V.getPriority().val()?new dc(te,Hr(I)):u}{const V=u;return M=V,I!==V.getPriority().val()&&(M=M.updatePriority(new dc(I))),V.forEachChild(Tr,(te,he)=>{const Te=Xd(he,a.getImmediateChild(te),l);Te!==he&&(M=M.updateImmediateChild(te,Te))}),M}}class yd{constructor(a="",l=null,p={children:{},childCount:0}){this.name=a,this.parent=l,this.node=p}}function ku(u,a){let l=a instanceof Mi?a:new Mi(a),p=u,I=Or(l);for(;null!==I;){const M=(0,Y.DV)(p.node.children,I)||{children:{},childCount:0};p=new yd(I,p,M),l=wi(l),I=Or(l)}return p}function Bc(u){return u.node.value}function $c(u,a){u.node.value=a,Hp(u)}function $h(u){return u.node.childCount>0}function jf(u,a){Rr(u.node.children,(l,p)=>{a(new yd(l,u,p))})}function jp(u,a,l,p){l&&!p&&a(u),jf(u,I=>{jp(I,a,!0,p)}),l&&p&&a(u)}function Uc(u){return new Mi(null===u.parent?u.name:Uc(u.parent)+"/"+u.name)}function Hp(u){null!==u.parent&&function Nu(u,a,l){const p=function Vf(u){return void 0===Bc(u)&&!$h(u)}(l),I=(0,Y.r3)(u.node.children,a);p&&I?(delete u.node.children[a],u.node.childCount--,Hp(u)):!p&&!I&&(u.node.children[a]=l.node,u.node.childCount++,Hp(u))}(u.parent,u.name,u)}const Qd=/[\[\].#$\/\u0000-\u001F\u007F]/,Hf=/[\[\].#$\u0000-\u001F\u007F]/,zp=10485760,Jd=function(u){return"string"==typeof u&&0!==u.length&&!Qd.test(u)},Vc=function(u){return"string"==typeof u&&0!==u.length&&!Hf.test(u)},zf=function(u){return null===u||"string"==typeof u||"number"==typeof u&&!Ga(u)||u&&"object"==typeof u&&(0,Y.r3)(u,".sv")},bc=function(u,a,l,p){p&&void 0===a||Jl((0,Y.gK)(u,"value"),a,l)},Jl=function(u,a,l){const p=l instanceof Mi?new z(l,u):l;if(void 0===a)throw new Error(u+"contains undefined "+Pt(p));if("function"==typeof a)throw new Error(u+"contains a function "+Pt(p)+" with contents = "+a.toString());if(Ga(a))throw new Error(u+"contains "+a.toString()+" "+Pt(p));if("string"==typeof a&&a.length>zp/3&&(0,Y.ug)(a)>zp)throw new Error(u+"contains a string greater than "+zp+" utf8 bytes "+Pt(p)+" ('"+a.substring(0,50)+"...')");if(a&&"object"==typeof a){let I=!1,M=!1;if(Rr(a,(V,te)=>{if(".value"===V)I=!0;else if(".priority"!==V&&".sv"!==V&&(M=!0,!Jd(V)))throw new Error(u+" contains an invalid key ("+V+") "+Pt(p)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function ie(u,a){u.parts_.length>0&&(u.byteLength_+=1),u.parts_.push(a),u.byteLength_+=(0,Y.ug)(a),nt(u)})(p,V),Jl(u,te,p),function le(u){const a=u.parts_.pop();u.byteLength_-=(0,Y.ug)(a),u.parts_.length>0&&(u.byteLength_-=1)}(p)}),I&&M)throw new Error(u+' contains ".value" child '+Pt(p)+" in addition to actual children.")}},Fl=function(u,a,l,p){if(p&&void 0===a)return;const I=(0,Y.gK)(u,"values");if(!a||"object"!=typeof a||Array.isArray(a))throw new Error(I+" must be an object containing the children to replace.");const M=[];Rr(a,(V,te)=>{const he=new Mi(V);if(Jl(I,te,Qi(l,he)),".priority"===Es(he)&&!zf(te))throw new Error(I+"contains an invalid value for '"+he.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");M.push(he)}),function(u,a){let l,p;for(l=0;l<a.length;l++){p=a[l];const M=Ea(p);for(let V=0;V<M.length;V++)if((".priority"!==M[V]||V!==M.length-1)&&!Jd(M[V]))throw new Error(u+"contains an invalid key ("+M[V]+") in path "+p.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}a.sort(x);let I=null;for(l=0;l<a.length;l++){if(p=a[l],null!==I&&k(I,p))throw new Error(u+"contains a path "+I.toString()+" that is ancestor of another path "+p.toString());I=p}}(I,M)},Ll=function(u,a,l){if(!l||void 0!==a){if(Ga(a))throw new Error((0,Y.gK)(u,"priority")+"is "+a.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!zf(a))throw new Error((0,Y.gK)(u,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},uu=function(u,a,l,p){if(!(p&&void 0===l||Jd(l)))throw new Error((0,Y.gK)(u,a)+'was an invalid key = "'+l+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},_d=function(u,a,l,p){if(!(p&&void 0===l||Vc(l)))throw new Error((0,Y.gK)(u,a)+'was an invalid path = "'+l+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Wp=function(u,a,l,p){l&&(l=l.replace(/^\/*\.info(\/|$)/,"/")),_d(u,a,l,p)},pl=function(u,a){if(".info"===Or(a))throw new Error(u+" failed = Can't modify data under /.info/")},Kp=function(u,a){const l=a.path.toString();if("string"!=typeof a.repoInfo.host||0===a.repoInfo.host.length||!Jd(a.repoInfo.namespace)&&"localhost"!==a.repoInfo.host.split(":")[0]||0!==l.length&&!function(u){return u&&(u=u.replace(/^\/*\.info(\/|$)/,"/")),Vc(u)}(l))throw new Error((0,Y.gK)(u,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class qp{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Uh(u,a){let l=null;for(let p=0;p<a.length;p++){const I=a[p],M=I.getPath();null!==l&&!w(M,l.path)&&(u.eventLists_.push(l),l=null),null===l&&(l={events:[],path:M}),l.events.push(I)}l&&u.eventLists_.push(l)}function Vh(u,a,l){Uh(u,l),jh(u,p=>w(p,a))}function Na(u,a,l){Uh(u,l),jh(u,p=>k(p,a)||k(a,p))}function jh(u,a){u.recursionDepth_++;let l=!0;for(let p=0;p<u.eventLists_.length;p++){const I=u.eventLists_[p];I&&(a(I.path)?(Ed(u.eventLists_[p]),u.eventLists_[p]=null):l=!1)}l&&(u.eventLists_=[]),u.recursionDepth_--}function Ed(u){for(let a=0;a<u.events.length;a++){const l=u.events[a];if(null!==l){u.events[a]=null;const p=l.getEventRunner();Uo&&ds("event: "+l.toString()),Wt(p)}}}const ec="repo_interrupt",Km=25;class Fg{constructor(a,l,p,I){this.repoInfo_=a,this.forceRestClient_=l,this.authTokenProvider_=p,this.appCheckProvider_=I,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new qp,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Fr(),this.transactionQueueTree_=new yd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Lg(u){const l=u.infoData_.getNode(new Mi(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+l}function Hh(u){return Uf({timestamp:Lg(u)})}function eh(u,a,l,p,I){u.dataUpdateCount++;const M=new Mi(a);l=u.interceptServerDataCallback_?u.interceptServerDataCallback_(a,l):l;let V=[];if(I)if(p){const he=(0,Y.UI)(l,Te=>Hr(Te));V=function qd(u,a,l,p){const I=Zd(u,p);if(I){const M=cu(I),V=M.path,te=M.queryId,he=S(V,a),Te=os.fromObject(l);return Ff(u,V,new Qa(hi(te),he,Te))}return[]}(u.serverSyncTree_,M,he,I)}else{const he=Hr(l);V=lu(u.serverSyncTree_,M,he,I)}else if(p){const he=(0,Y.UI)(l,Te=>Hr(Te));V=function Os(u,a,l){const p=os.fromObject(l);return Lc(u,new Qa({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},a,p))}(u.serverSyncTree_,M,he)}else{const he=Hr(l);V=Fc(u.serverSyncTree_,M,he)}let te=M;V.length>0&&(te=Bu(u,M)),Na(u.eventQueue_,te,V)}function Fu(u,a){tc(u,"connected",a),!1===a&&function Wf(u){th(u,"onDisconnectEvents");const a=Hh(u),l=Fr();ul(u.onDisconnect_,vr(),(I,M)=>{const V=Vp(I,M,u.serverSyncTree_,a);uo(l,I,V)});let p=[];ul(l,vr(),(I,M)=>{p=p.concat(Fc(u.serverSyncTree_,I,M));const V=Dc(u,I);Bu(u,V)}),u.onDisconnect_=Fr(),Na(u.eventQueue_,vr(),p)}(u)}function tc(u,a,l){const p=new Mi("/.info/"+a),I=Hr(l);u.infoData_.updateSnapshot(p,I);const M=Fc(u.infoSyncTree_,p,I);Na(u.eventQueue_,p,M)}function Gf(u){return u.nextWriteId_++}function $g(u,a,l,p,I){th(u,"set",{path:a.toString(),value:l,priority:p});const M=Hh(u),V=Hr(l,p),te=pd(u.serverSyncTree_,a),he=Bh(V,te,M),Te=Gf(u),bt=Go(u.serverSyncTree_,a,he,Te,!0);Uh(u.eventQueue_,bt),u.server_.put(a.toString(),V.val(!0),(Yt,Dn)=>{const Bn="ok"===Yt;Bn||is("set at "+a+" failed: "+Yt);const Kr=hl(u.serverSyncTree_,Te,!Bn);Na(u.eventQueue_,a,Kr),jc(0,I,Yt,Dn)});const jt=Dc(u,a);Bu(u,jt),Na(u.eventQueue_,jt,[])}function Ym(u,a,l){u.server_.onDisconnectCancel(a.toString(),(p,I)=>{"ok"===p&&Ts(u.onDisconnect_,a),jc(0,l,p,I)})}function zh(u,a,l,p){const I=Hr(l);u.server_.onDisconnectPut(a.toString(),I.val(!0),(M,V)=>{"ok"===M&&uo(u.onDisconnect_,a,I),jc(0,p,M,V)})}function Yp(u,a,l){let p;p=".info"===Or(a._path)?Ql(u.infoSyncTree_,a,l):Ql(u.serverSyncTree_,a,l),Vh(u.eventQueue_,a._path,p)}function qf(u){u.persistentConnection_&&u.persistentConnection_.interrupt(ec)}function th(u,...a){let l="";u.persistentConnection_&&(l=u.persistentConnection_.id+":"),ds(l,...a)}function jc(u,a,l,p){a&&Wt(()=>{if("ok"===l)a(null);else{const I=(l||"error").toUpperCase();let M=I;p&&(M+=": "+p);const V=new Error(M);V.code=I,a(V)}})}function nh(u,a,l){return pd(u.serverSyncTree_,a,l)||Xr.EMPTY_NODE}function Lu(u,a=u.transactionQueueTree_){if(a||rh(u,a),Bc(a)){const l=Kh(u,a);(0,Y.hu)(l.length>0,"Sending zero length transaction queue"),l.every(I=>0===I.status)&&function jg(u,a,l){const p=l.map(Te=>Te.currentWriteId),I=nh(u,a,p);let M=I;const V=I.hash();for(let Te=0;Te<l.length;Te++){const bt=l[Te];(0,Y.hu)(0===bt.status,"tryToSendTransactionQueue_: items in queue should all be run."),bt.status=1,bt.retryCount++;const jt=S(a,bt.path);M=M.updateChild(jt,bt.currentOutputSnapshotRaw)}const te=M.val(!0),he=a;u.server_.put(he.toString(),te,Te=>{th(u,"transaction put response",{path:he.toString(),status:Te});let bt=[];if("ok"===Te){const jt=[];for(let Yt=0;Yt<l.length;Yt++)l[Yt].status=2,bt=bt.concat(hl(u.serverSyncTree_,l[Yt].currentWriteId)),l[Yt].onComplete&&jt.push(()=>l[Yt].onComplete(null,!0,l[Yt].currentOutputSnapshotResolved)),l[Yt].unwatcher();rh(u,ku(u.transactionQueueTree_,a)),Lu(u,u.transactionQueueTree_),Na(u.eventQueue_,a,bt);for(let Yt=0;Yt<jt.length;Yt++)Wt(jt[Yt])}else{if("datastale"===Te)for(let jt=0;jt<l.length;jt++)l[jt].status=3===l[jt].status?4:0;else{is("transaction at "+he.toString()+" failed: "+Te);for(let jt=0;jt<l.length;jt++)l[jt].status=4,l[jt].abortReason=Te}Bu(u,a)}},V)}(u,Uc(a),l)}else $h(a)&&jf(a,l=>{Lu(u,l)})}function Bu(u,a){const l=Zp(u,a),p=Uc(l);return function Fa(u,a,l){if(0===a.length)return;const p=[];let I=[];const V=a.filter(te=>0===te.status).map(te=>te.currentWriteId);for(let te=0;te<a.length;te++){const he=a[te],Te=S(l,he.path);let jt,bt=!1;if((0,Y.hu)(null!==Te,"rerunTransactionsUnderNode_: relativePath should not be null."),4===he.status)bt=!0,jt=he.abortReason,I=I.concat(hl(u.serverSyncTree_,he.currentWriteId,!0));else if(0===he.status)if(he.retryCount>=Km)bt=!0,jt="maxretry",I=I.concat(hl(u.serverSyncTree_,he.currentWriteId,!0));else{const Yt=nh(u,he.path,V);he.currentInputSnapshot=Yt;const Dn=a[te].update(Yt.val());if(void 0!==Dn){Jl("transaction failed: Data returned ",Dn,he.path);let Bn=Hr(Dn);"object"==typeof Dn&&null!=Dn&&(0,Y.r3)(Dn,".priority")||(Bn=Bn.updatePriority(Yt.getPriority()));const fi=he.currentWriteId,ho=Hh(u),Ko=Bh(Bn,Yt,ho);he.currentOutputSnapshotRaw=Bn,he.currentOutputSnapshotResolved=Ko,he.currentWriteId=Gf(u),V.splice(V.indexOf(fi),1),I=I.concat(Go(u.serverSyncTree_,he.path,Ko,he.currentWriteId,he.applyLocally)),I=I.concat(hl(u.serverSyncTree_,fi,!0))}else bt=!0,jt="nodata",I=I.concat(hl(u.serverSyncTree_,he.currentWriteId,!0))}Na(u.eventQueue_,l,I),I=[],bt&&(a[te].status=2,setTimeout(a[te].unwatcher,Math.floor(0)),a[te].onComplete&&p.push("nodata"===jt?()=>a[te].onComplete(null,!1,a[te].currentInputSnapshot):()=>a[te].onComplete(new Error(jt),!1,null)))}rh(u,u.transactionQueueTree_);for(let te=0;te<p.length;te++)Wt(p[te]);Lu(u,u.transactionQueueTree_)}(u,Kh(u,l),p),p}function Zp(u,a){let l,p=u.transactionQueueTree_;for(l=Or(a);null!==l&&void 0===Bc(p);)p=ku(p,l),l=Or(a=wi(a));return p}function Kh(u,a){const l=[];return Wr(u,a,l),l.sort((p,I)=>p.order-I.order),l}function Wr(u,a,l){const p=Bc(a);if(p)for(let I=0;I<p.length;I++)l.push(p[I]);jf(a,I=>{Wr(u,I,l)})}function rh(u,a){const l=Bc(a);if(l){let p=0;for(let I=0;I<l.length;I++)2!==l[I].status&&(l[p]=l[I],p++);l.length=p,$c(a,l.length>0?l:void 0)}jf(a,p=>{rh(u,p)})}function Dc(u,a){const l=Uc(Zp(u,a)),p=ku(u.transactionQueueTree_,a);return function Ng(u,a,l){let p=l?u:u.parent;for(;null!==p;){if(a(p))return!0;p=p.parent}}(p,I=>{du(u,I)}),du(u,p),jp(p,I=>{du(u,I)}),l}function du(u,a){const l=Bc(a);if(l){const p=[];let I=[],M=-1;for(let V=0;V<l.length;V++)3===l[V].status||(1===l[V].status?((0,Y.hu)(M===V-1,"All SENT items should be at beginning of queue."),M=V,l[V].status=3,l[V].abortReason="set"):((0,Y.hu)(0===l[V].status,"Unexpected transaction status in abort"),l[V].unwatcher(),I=I.concat(hl(u.serverSyncTree_,l[V].currentWriteId,!0)),l[V].onComplete&&p.push(l[V].onComplete.bind(null,new Error("set"),!1,null))));-1===M?$c(a,void 0):l.length=M+1,Na(u.eventQueue_,Uc(a),I);for(let V=0;V<p.length;V++)Wt(p[V])}}const Yf=function(u,a){const l=ih(u),p=l.namespace;return"firebase.com"===l.domain&&oo(l.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!p||"undefined"===p)&&"localhost"!==l.domain&&oo("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),l.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&is("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Gl(l.host,l.secure,p,"ws"===l.scheme||"wss"===l.scheme,a,"",p!==l.subdomain),path:new Mi(l.pathString)}},ih=function(u){let a="",l="",p="",I="",M="",V=!0,te="https",he=443;if("string"==typeof u){let Te=u.indexOf("//");Te>=0&&(te=u.substring(0,Te-1),u=u.substring(Te+2));let bt=u.indexOf("/");-1===bt&&(bt=u.length);let jt=u.indexOf("?");-1===jt&&(jt=u.length),a=u.substring(0,Math.min(bt,jt)),bt<jt&&(I=function Hg(u){let a="";const l=u.split("/");for(let p=0;p<l.length;p++)if(l[p].length>0){let I=l[p];try{I=decodeURIComponent(I.replace(/\+/g," "))}catch{}a+="/"+I}return a}(u.substring(bt,jt)));const Yt=function Id(u){const a={};"?"===u.charAt(0)&&(u=u.substring(1));for(const l of u.split("&")){if(0===l.length)continue;const p=l.split("=");2===p.length?a[decodeURIComponent(p[0])]=decodeURIComponent(p[1]):is(`Invalid query segment '${l}' in query '${u}'`)}return a}(u.substring(Math.min(u.length,jt)));Te=a.indexOf(":"),Te>=0?(V="https"===te||"wss"===te,he=parseInt(a.substring(Te+1),10)):Te=a.length;const Dn=a.slice(0,Te);if("localhost"===Dn.toLowerCase())l="localhost";else if(Dn.split(".").length<=2)l=Dn;else{const Bn=a.indexOf(".");p=a.substring(0,Bn).toLowerCase(),l=a.substring(Bn+1),M=p}"ns"in Yt&&(M=Yt.ns)}return{host:a,port:he,domain:l,subdomain:p,secure:V,scheme:te,pathString:I,namespace:M}},Zf="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",$u=function(){let u=0;const a=[];return function(l){const p=l===u;let I;u=l;const M=new Array(8);for(I=7;I>=0;I--)M[I]=Zf.charAt(l%64),l=Math.floor(l/64);(0,Y.hu)(0===l,"Cannot push at time == 0");let V=M.join("");if(p){for(I=11;I>=0&&63===a[I];I--)a[I]=0;a[I]++}else for(I=0;I<12;I++)a[I]=Math.floor(64*Math.random());for(I=0;I<12;I++)V+=Zf.charAt(a[I]);return(0,Y.hu)(20===V.length,"nextPushId: Length should be 20."),V}}();class Xp{constructor(a,l,p,I){this.eventType=a,this.eventRegistration=l,this.snapshot=p,this.prevName=I}getPath(){const a=this.snapshot.ref;return"value"===this.eventType?a._path:a.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,Y.Wl)(this.snapshot.exportVal())}}class Zm{constructor(a,l,p){this.eventRegistration=a,this.error=l,this.path=p}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class qh{constructor(a,l){this.snapshotCallback=a,this.cancelCallback=l}onValue(a,l){this.snapshotCallback.call(null,a,l)}onCancel(a){return(0,Y.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,a)}get hasCancelCallback(){return!!this.cancelCallback}matches(a){return this.snapshotCallback===a.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===a.snapshotCallback.userCallback&&this.snapshotCallback.context===a.snapshotCallback.context}}class Qp{constructor(a,l){this._repo=a,this._path=l}cancel(){const a=new Y.BH;return Ym(this._repo,this._path,a.wrapCallback(()=>{})),a.promise}remove(){pl("OnDisconnect.remove",this._path);const a=new Y.BH;return zh(this._repo,this._path,null,a.wrapCallback(()=>{})),a.promise}set(a){pl("OnDisconnect.set",this._path),bc("OnDisconnect.set",a,this._path,!1);const l=new Y.BH;return zh(this._repo,this._path,a,l.wrapCallback(()=>{})),l.promise}setWithPriority(a,l){pl("OnDisconnect.setWithPriority",this._path),bc("OnDisconnect.setWithPriority",a,this._path,!1),Ll("OnDisconnect.setWithPriority",l,!1);const p=new Y.BH;return function Kf(u,a,l,p,I){const M=Hr(l,p);u.server_.onDisconnectPut(a.toString(),M.val(!0),(V,te)=>{"ok"===V&&uo(u.onDisconnect_,a,M),jc(0,I,V,te)})}(this._repo,this._path,a,l,p.wrapCallback(()=>{})),p.promise}update(a){pl("OnDisconnect.update",this._path),Fl("OnDisconnect.update",a,this._path,!1);const l=new Y.BH;return function Vg(u,a,l,p){if((0,Y.xb)(l))return ds("onDisconnect().update() called with empty data.  Don't do anything."),void jc(0,p,"ok",void 0);u.server_.onDisconnectMerge(a.toString(),l,(I,M)=>{"ok"===I&&Rr(l,(V,te)=>{const he=Hr(te);uo(u.onDisconnect_,Qi(a,V),he)}),jc(0,p,I,M)})}(this._repo,this._path,a,l.wrapCallback(()=>{})),l.promise}}class Co{constructor(a,l,p,I){this._repo=a,this._path=l,this._queryParams=p,this._orderByCalled=I}get key(){return fr(this._path)?null:Es(this._path)}get ref(){return new nc(this._repo,this._path)}get _queryIdentifier(){const a=xn(this._queryParams),l=ao(a);return"{}"===l?"default":l}get _queryObject(){return xn(this._queryParams)}isEqual(a){if(!((a=(0,Y.m9)(a))instanceof Co))return!1;const l=this._repo===a._repo,p=w(this._path,a._path);return l&&p&&this._queryIdentifier===a._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Xc(u){let a="";for(let l=u.pieceNum_;l<u.pieces_.length;l++)""!==u.pieces_[l]&&(a+="/"+encodeURIComponent(String(u.pieces_[l])));return a||"/"}(this._path)}}function Xf(u,a){if(!0===u._orderByCalled)throw new Error(a+": You can't combine multiple orderBy calls.")}function $l(u){let a=null,l=null;if(u.hasStart()&&(a=u.getIndexStartValue()),u.hasEnd()&&(l=u.getIndexEndValue()),u.getIndex()===Ya){const p="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",I="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(u.hasStart()){if(u.getIndexStartName()!==Ni)throw new Error(p);if("string"!=typeof a)throw new Error(I)}if(u.hasEnd()){if(u.getIndexEndName()!==si)throw new Error(p);if("string"!=typeof l)throw new Error(I)}}else if(u.getIndex()===Tr){if(null!=a&&!zf(a)||null!=l&&!zf(l))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,Y.hu)(u.getIndex()instanceof $s||u.getIndex()===pc,"unknown index type."),null!=a&&"object"==typeof a||null!=l&&"object"==typeof l)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function wd(u){if(u.hasStart()&&u.hasEnd()&&u.hasLimit()&&!u.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class nc extends Co{constructor(a,l){super(a,l,new Za,!1)}get parent(){const a=Mo(this._path);return null===a?null:new nc(this._repo,a)}get root(){let a=this;for(;null!==a.parent;)a=a.parent;return a}}class Cd{constructor(a,l,p){this._node=a,this.ref=l,this._index=p}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(a){const l=new Mi(a),p=Ul(this.ref,a);return new Cd(this._node.getChild(l),p,Tr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(a){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(p,I)=>a(new Cd(I,Ul(this.ref,p),Tr)))}hasChild(a){const l=new Mi(a);return!this._node.getChild(l).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Xm(u,a){return(u=(0,Y.m9)(u))._checkNotDeleted("ref"),void 0!==a?Ul(u._root,a):u._root}function zg(u,a){(u=(0,Y.m9)(u))._checkNotDeleted("refFromURL");const l=Yf(a,u._repo.repoInfo_.nodeAdmin);Kp("refFromURL",l);const p=l.repoInfo;return!u._repo.repoInfo_.isCustomHost()&&p.host!==u._repo.repoInfo_.host&&oo("refFromURL: Host name does not match the current database: (found "+p.host+" but expected "+u._repo.repoInfo_.host+")"),Xm(u,l.path.toString())}function Ul(u,a){return null===Or((u=(0,Y.m9)(u))._path)?Wp("child","path",a,!1):_d("child","path",a,!1),new nc(u._repo,Qi(u._path,a))}function Uu(u,a){u=(0,Y.m9)(u),pl("set",u._path),bc("set",a,u._path,!1);const l=new Y.BH;return $g(u._repo,u._path,a,null,l.wrapCallback(()=>{})),l.promise}function Qf(u,a){Fl("update",a,u._path,!1);const l=new Y.BH;return function Ug(u,a,l,p){th(u,"update",{path:a.toString(),value:l});let I=!0;const M=Hh(u),V={};if(Rr(l,(te,he)=>{I=!1,V[te]=Vp(Qi(a,te),Hr(he),u.serverSyncTree_,M)}),I)ds("update() called with empty data.  Don't do anything."),jc(0,p,"ok",void 0);else{const te=Gf(u),he=function Kd(u,a,l,p){!function jd(u,a,l,p){(0,Y.hu)(p>u.lastWriteId,"Stacking an older merge on top of newer ones"),u.allWrites.push({path:a,children:l,writeId:p,visible:!0}),u.visibleWrites=Oc(u.visibleWrites,a,l),u.lastWriteId=p}(u.pendingWriteTree_,a,l,p);const I=os.fromObject(l);return Lc(u,new Qa({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},a,I))}(u.serverSyncTree_,a,V,te);Uh(u.eventQueue_,he),u.server_.merge(a.toString(),l,(Te,bt)=>{const jt="ok"===Te;jt||is("update at "+a+" failed: "+Te);const Yt=hl(u.serverSyncTree_,te,!jt),Dn=Yt.length>0?Bu(u,a):a;Na(u.eventQueue_,Dn,Yt),jc(0,p,Te,bt)}),Rr(l,Te=>{const bt=Dc(u,Qi(a,Te));Bu(u,bt)}),Na(u.eventQueue_,a,[])}}(u._repo,u._path,a,l.wrapCallback(()=>{})),l.promise}function Jp(u){u=(0,Y.m9)(u);const a=new qh(()=>{}),l=new Qs(a);return function Bg(u,a,l){const p=function Nh(u,a){const l=a._path;let p=null;u.syncPointTree_.foreachOnPath(l,(Te,bt)=>{const jt=S(Te,l);p=p||A(bt,jt)});let I=u.syncPointTree_.get(l);I?p=p||A(I,vr()):(I=new dd,u.syncPointTree_=u.syncPointTree_.set(l,I));const M=null!=p,V=M?new Ml(p,!0,!1):null;return function $p(u){return Bd(u.viewCache_)}(Wd(I,a,mc(u.pendingWriteTree_,a._path),M?V.getNode():Xr.EMPTY_NODE,M))}(u.serverSyncTree_,a);return null!=p?Promise.resolve(p):u.server_.get(a).then(I=>{const M=Hr(I).withIndex(a._queryParams.getIndex());let V;if(fd(u.serverSyncTree_,a,l,!0),a._queryParams.loadsAllData())V=Fc(u.serverSyncTree_,a._path,M);else{const te=gd(u.serverSyncTree_,a);V=lu(u.serverSyncTree_,a._path,M,te)}return Na(u.eventQueue_,a._path,V),Ql(u.serverSyncTree_,a,l,null,!0),M},I=>(th(u,"get for query "+(0,Y.Wl)(a)+" failed: "+I),Promise.reject(new Error(I))))}(u._repo,u,l).then(p=>new Cd(p,new nc(u._repo,u._path),u._queryParams.getIndex()))}class Qs{constructor(a){this.callbackContext=a}respondsTo(a){return"value"===a}createEvent(a,l){const p=l._queryParams.getIndex();return new Xp("value",this,new Cd(a.snapshotNode,new nc(l._repo,l._path),p))}getEventRunner(a){return"cancel"===a.getEventType()?()=>this.callbackContext.onCancel(a.error):()=>this.callbackContext.onValue(a.snapshot,null)}createCancelEvent(a,l){return this.callbackContext.hasCancelCallback?new Zm(this,a,l):null}matches(a){return a instanceof Qs&&(!a.callbackContext||!this.callbackContext||a.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Jf{constructor(a,l){this.eventType=a,this.callbackContext=l}respondsTo(a){let l="children_added"===a?"child_added":a;return l="children_removed"===l?"child_removed":l,this.eventType===l}createCancelEvent(a,l){return this.callbackContext.hasCancelCallback?new Zm(this,a,l):null}createEvent(a,l){(0,Y.hu)(null!=a.childName,"Child events should have a childName.");const p=Ul(new nc(l._repo,l._path),a.childName),I=l._queryParams.getIndex();return new Xp(a.type,this,new Cd(a.snapshotNode,p,I),a.prevName)}getEventRunner(a){return"cancel"===a.getEventType()?()=>this.callbackContext.onCancel(a.error):()=>this.callbackContext.onValue(a.snapshot,a.prevName)}matches(a){return a instanceof Jf&&this.eventType===a.eventType&&(!this.callbackContext||!a.callbackContext||this.callbackContext.matches(a.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Zh(u,a,l,p,I){let M;if("object"==typeof p&&(M=void 0,I=p),"function"==typeof p&&(M=p),I&&I.onlyOnce){const he=l,Te=(bt,jt)=>{Yp(u._repo,u,te),he(bt,jt)};Te.userCallback=l.userCallback,Te.context=l.context,l=Te}const V=new qh(l,M||void 0),te="value"===a?new Qs(V):new Jf(a,V);return function Gh(u,a,l){let p;p=".info"===Or(a._path)?fd(u.infoSyncTree_,a,l):fd(u.serverSyncTree_,a,l),Vh(u.eventQueue_,a._path,p)}(u._repo,u,te),()=>Yp(u._repo,u,te)}function eg(u,a,l,p){return Zh(u,"value",a,l,p)}function qg(u,a,l,p){return Zh(u,"child_added",a,l,p)}function ep(u,a,l,p){return Zh(u,"child_changed",a,l,p)}function tg(u,a,l,p){return Zh(u,"child_moved",a,l,p)}function Xh(u,a,l,p){return Zh(u,"child_removed",a,l,p)}function sh(u,a,l){let p=null;const I=l?new qh(l):null;"value"===a?p=new Qs(I):a&&(p=new Jf(a,I)),Yp(u._repo,u,p)}class rc{}class Qh extends rc{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){bc("endAt",this._value,a._path,!0);const l=st(a._queryParams,this._value,this._key);if(wd(l),$l(l),a._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Co(a._repo,a._path,l,a._orderByCalled)}}class Jh extends rc{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){bc("endBefore",this._value,a._path,!1);const l=function It(u,a,l){let p;return p=st(u,a,u.index_===Ya||l?l:Ni),p.endBeforeSet_=!0,p}(a._queryParams,this._value,this._key);if(wd(l),$l(l),a._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Co(a._repo,a._path,l,a._orderByCalled)}}class tp extends rc{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){bc("startAt",this._value,a._path,!0);const l=J(a._queryParams,this._value,this._key);if(wd(l),$l(l),a._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Co(a._repo,a._path,l,a._orderByCalled)}}class np extends rc{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){bc("startAfter",this._value,a._path,!1);const l=function Ee(u,a,l){let p;return p=J(u,a,u.index_===Ya||l?l:si),p.startAfterSet_=!0,p}(a._queryParams,this._value,this._key);if(wd(l),$l(l),a._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Co(a._repo,a._path,l,a._orderByCalled)}}class Xg extends rc{constructor(a){super(),this._limit=a}_apply(a){if(a._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Co(a._repo,a._path,function P(u,a){const l=u.copy();return l.limitSet_=!0,l.limit_=a,l.viewFrom_="l",l}(a._queryParams,this._limit),a._orderByCalled)}}class Jg extends rc{constructor(a){super(),this._limit=a}_apply(a){if(a._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Co(a._repo,a._path,function $(u,a){const l=u.copy();return l.limitSet_=!0,l.limit_=a,l.viewFrom_="r",l}(a._queryParams,this._limit),a._orderByCalled)}}class ah extends rc{constructor(a){super(),this._path=a}_apply(a){Xf(a,"orderByChild");const l=new Mi(this._path);if(fr(l))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const p=new $s(l),I=Gt(a._queryParams,p);return $l(I),new Co(a._repo,a._path,I,!0)}}class tf extends rc{_apply(a){Xf(a,"orderByKey");const l=Gt(a._queryParams,Ya);return $l(l),new Co(a._repo,a._path,l,!0)}}class sp extends rc{_apply(a){Xf(a,"orderByPriority");const l=Gt(a._queryParams,Tr);return $l(l),new Co(a._repo,a._path,l,!0)}}class ju extends rc{_apply(a){Xf(a,"orderByValue");const l=Gt(a._queryParams,pc);return $l(l),new Co(a._repo,a._path,l,!0)}}class lh extends rc{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){if(bc("equalTo",this._value,a._path,!1),a._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(a._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Qh(this._value,this._key)._apply(new tp(this._value,this._key)._apply(a))}}function ml(u,...a){let l=(0,Y.m9)(u);for(const p of a)l=p._apply(l);return l}(function ca(u){(0,Y.hu)(!ud,"__referenceConstructor has already been defined"),ud=u})(nc),function kn(u){(0,Y.hu)(!Kt,"__referenceConstructor has already been defined"),Kt=u}(nc);const em="FIREBASE_DATABASE_EMULATOR_HOST",rg={};let rf=!1;function sf(u,a,l,p,I){let M=p||u.options.databaseURL;void 0===M&&(u.options.projectId||oo("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ds("Using default host for project ",u.options.projectId),M=`${u.options.projectId}-default-rtdb.firebaseio.com`);let he,Te,V=Yf(M,I),te=V.repoInfo;typeof process<"u"&&process.env&&(Te=process.env[em]),Te?(he=!0,M=`http://${Te}?ns=${te.namespace}`,V=Yf(M,I),te=V.repoInfo):he=!V.repoInfo.secure;const bt=I&&he?new wr(wr.OWNER):new Lr(u.name,u.options,a);Kp("Invalid Firebase Database URL",V),fr(V.path)||oo("Database URL must point to the root of a Firebase Database (not including a child path).");const jt=function tm(u,a,l,p){let I=rg[a.name];I||(I={},rg[a.name]=I);let M=I[u.toURLString()];return M&&oo("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),M=new Fg(u,rf,l,p),I[u.toURLString()]=M,M}(te,u,bt,new $r(u.name,l));return new La(jt,u)}class La{constructor(a,l){this._repoInternal=a,this.app=l,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function qm(u,a,l){if(u.stats_=Zi(u.repoInfo_),u.forceRestClient_||Ln())u.server_=new Zn(u.repoInfo_,(p,I,M,V)=>{eh(u,p,I,M,V)},u.authTokenProvider_,u.appCheckProvider_),setTimeout(()=>Fu(u,!0),0);else{if(typeof l<"u"&&null!==l){if("object"!=typeof l)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,Y.Wl)(l)}catch(p){throw new Error("Invalid authOverride provided: "+p)}}u.persistentConnection_=new Bs(u.repoInfo_,a,(p,I,M,V)=>{eh(u,p,I,M,V)},p=>{Fu(u,p)},p=>{!function Bl(u,a){Rr(a,(l,p)=>{tc(u,l,p)})}(u,p)},u.authTokenProvider_,u.appCheckProvider_,l),u.server_=u.persistentConnection_}u.authTokenProvider_.addTokenChangeListener(p=>{u.server_.refreshAuthToken(p)}),u.appCheckProvider_.addTokenChangeListener(p=>{u.server_.refreshAppCheckToken(p.token)}),u.statsReporter_=function gu(u,a){const l=u.toString();return bl[l]||(bl[l]=a()),bl[l]}(u.repoInfo_,()=>new Cu(u.stats_,u.server_)),u.infoData_=new Nr,u.infoSyncTree_=new as({startListening:(p,I,M,V)=>{let te=[];const he=u.infoData_.getNode(p._path);return he.isEmpty()||(te=Fc(u.infoSyncTree_,p._path,he),setTimeout(()=>{V("ok")},0)),te},stopListening:()=>{}}),tc(u,"connected",!1),u.serverSyncTree_=new as({startListening:(p,I,M,V)=>(u.server_.listen(p,M,I,(te,he)=>{const Te=V(te,he);Na(u.eventQueue_,p._path,Te)}),[]),stopListening:(p,I)=>{u.server_.unlisten(p,I)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new nc(this._repo,vr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function ig(u,a){const l=rg[a];(!l||l[u.key]!==u)&&oo(`Database ${a}(${u.repoInfo_}) has already been deleted.`),qf(u),delete l[u.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(a){null===this._rootInternal&&oo("Cannot call "+a+" on a deleted database.")}}function ch(){sa.IS_TRANSPORT_INITIALIZED&&is("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function op(){ch(),jo.forceDisallow()}function nm(){ch(),sr.forceDisallow(),jo.forceAllow()}function im(u,a){na(u,a)}const og={".sv":"timestamp"};class Ba{constructor(a,l){this.committed=a,this.snapshot=l}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Bs.prototype.simpleListen=function(u,a){this.sendRequest("q",{p:u},a)},Bs.prototype.echo=function(u,a){this.sendRequest("echo",{d:u},a)},function lf(u){So(pt.SDK_VERSION),(0,pt._registerComponent)(new et.wA("database",(a,{instanceIdentifier:l})=>sf(a.getProvider("app").getImmediate(),a.getProvider("auth-internal"),a.getProvider("app-check-internal"),l),"PUBLIC").setMultipleInstances(!0)),(0,pt.registerVersion)(us,"0.14.4",u),(0,pt.registerVersion)(us,"0.14.4","esm2017")}();const lp=new ya.Yd("@firebase/database-compat"),sm=function(u){lp.warn("FIREBASE WARNING: "+u)};class sy{constructor(a){this._delegate=a}cancel(a){(0,Y.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,Y.Wj)("OnDisconnect.cancel","onComplete",a,!0);const l=this._delegate.cancel();return a&&l.then(()=>a(null),p=>a(p)),l}remove(a){(0,Y.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,Y.Wj)("OnDisconnect.remove","onComplete",a,!0);const l=this._delegate.remove();return a&&l.then(()=>a(null),p=>a(p)),l}set(a,l){(0,Y.Dv)("OnDisconnect.set",1,2,arguments.length),(0,Y.Wj)("OnDisconnect.set","onComplete",l,!0);const p=this._delegate.set(a);return l&&p.then(()=>l(null),I=>l(I)),p}setWithPriority(a,l,p){(0,Y.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,Y.Wj)("OnDisconnect.setWithPriority","onComplete",p,!0);const I=this._delegate.setWithPriority(a,l);return p&&I.then(()=>p(null),M=>p(M)),I}update(a,l){if((0,Y.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(a)){const I={};for(let M=0;M<a.length;++M)I[""+M]=a[M];a=I,sm("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,Y.Wj)("OnDisconnect.update","onComplete",l,!0);const p=this._delegate.update(a);return l&&p.then(()=>l(null),I=>l(I)),p}}class cg{constructor(a,l){this.committed=a,this.snapshot=l}toJSON(){return(0,Y.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Hu{constructor(a,l){this._database=a,this._delegate=l}val(){return(0,Y.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,Y.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,Y.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,Y.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(a){return(0,Y.Dv)("DataSnapshot.child",0,1,arguments.length),a=String(a),_d("DataSnapshot.child","path",a,!1),new Hu(this._database,this._delegate.child(a))}hasChild(a){return(0,Y.Dv)("DataSnapshot.hasChild",1,1,arguments.length),_d("DataSnapshot.hasChild","path",a,!1),this._delegate.hasChild(a)}getPriority(){return(0,Y.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(a){return(0,Y.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,Y.Wj)("DataSnapshot.forEach","action",a,!1),this._delegate.forEach(l=>a(new Hu(this._database,l)))}hasChildren(){return(0,Y.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,Y.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,Y.Dv)("DataSnapshot.ref",0,0,arguments.length),new wa(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Wo{constructor(a,l){this.database=a,this._delegate=l}on(a,l,p,I){var M;(0,Y.Dv)("Query.on",2,4,arguments.length),(0,Y.Wj)("Query.on","callback",l,!1);const V=Wo.getCancelAndContextArgs_("Query.on",p,I),te=(Te,bt)=>{l.call(V.context,new Hu(this.database,Te),bt)};te.userCallback=l,te.context=V.context;const he=null===(M=V.cancel)||void 0===M?void 0:M.bind(V.context);switch(a){case"value":return eg(this._delegate,te,he),l;case"child_added":return qg(this._delegate,te,he),l;case"child_removed":return Xh(this._delegate,te,he),l;case"child_changed":return ep(this._delegate,te,he),l;case"child_moved":return tg(this._delegate,te,he),l;default:throw new Error((0,Y.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(a,l,p){if((0,Y.Dv)("Query.off",0,3,arguments.length),function(u,a,l){if(void 0!==a)switch(a){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,Y.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,a),(0,Y.Wj)("Query.off","callback",l,!0),(0,Y.lb)("Query.off","context",p,!0),l){const I=()=>{};I.userCallback=l,I.context=p,sh(this._delegate,a,I)}else sh(this._delegate,a)}get(){return Jp(this._delegate).then(a=>new Hu(this.database,a))}once(a,l,p,I){(0,Y.Dv)("Query.once",1,4,arguments.length),(0,Y.Wj)("Query.once","callback",l,!0);const M=Wo.getCancelAndContextArgs_("Query.once",p,I),V=new Y.BH,te=(Te,bt)=>{const jt=new Hu(this.database,Te);l&&l.call(M.context,jt,bt),V.resolve(jt)};te.userCallback=l,te.context=M.context;const he=Te=>{M.cancel&&M.cancel.call(M.context,Te),V.reject(Te)};switch(a){case"value":eg(this._delegate,te,he,{onlyOnce:!0});break;case"child_added":qg(this._delegate,te,he,{onlyOnce:!0});break;case"child_removed":Xh(this._delegate,te,he,{onlyOnce:!0});break;case"child_changed":ep(this._delegate,te,he,{onlyOnce:!0});break;case"child_moved":tg(this._delegate,te,he,{onlyOnce:!0});break;default:throw new Error((0,Y.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return V.promise}limitToFirst(a){return(0,Y.Dv)("Query.limitToFirst",1,1,arguments.length),new Wo(this.database,ml(this._delegate,function Qg(u){if("number"!=typeof u||Math.floor(u)!==u||u<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Xg(u)}(a)))}limitToLast(a){return(0,Y.Dv)("Query.limitToLast",1,1,arguments.length),new Wo(this.database,ml(this._delegate,function oh(u){if("number"!=typeof u||Math.floor(u)!==u||u<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Jg(u)}(a)))}orderByChild(a){return(0,Y.Dv)("Query.orderByChild",1,1,arguments.length),new Wo(this.database,ml(this._delegate,function rp(u){if("$key"===u)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===u)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===u)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return _d("orderByChild","path",u,!1),new ah(u)}(a)))}orderByKey(){return(0,Y.Dv)("Query.orderByKey",0,0,arguments.length),new Wo(this.database,ml(this._delegate,function ip(){return new tf}()))}orderByPriority(){return(0,Y.Dv)("Query.orderByPriority",0,0,arguments.length),new Wo(this.database,ml(this._delegate,function bd(){return new sp}()))}orderByValue(){return(0,Y.Dv)("Query.orderByValue",0,0,arguments.length),new Wo(this.database,ml(this._delegate,function nf(){return new ju}()))}startAt(a=null,l){return(0,Y.Dv)("Query.startAt",0,2,arguments.length),new Wo(this.database,ml(this._delegate,function Vu(u=null,a){return uu("startAt","key",a,!0),new tp(u,a)}(a,l)))}startAfter(a=null,l){return(0,Y.Dv)("Query.startAfter",0,2,arguments.length),new Wo(this.database,ml(this._delegate,function Zg(u,a){return uu("startAfter","key",a,!0),new np(u,a)}(a,l)))}endAt(a=null,l){return(0,Y.Dv)("Query.endAt",0,2,arguments.length),new Wo(this.database,ml(this._delegate,function Yg(u,a){return uu("endAt","key",a,!0),new Qh(u,a)}(a,l)))}endBefore(a=null,l){return(0,Y.Dv)("Query.endBefore",0,2,arguments.length),new Wo(this.database,ml(this._delegate,function ef(u,a){return uu("endBefore","key",a,!0),new Jh(u,a)}(a,l)))}equalTo(a,l){return(0,Y.Dv)("Query.equalTo",1,2,arguments.length),new Wo(this.database,ml(this._delegate,function ng(u,a){return uu("equalTo","key",a,!0),new lh(u,a)}(a,l)))}toString(){return(0,Y.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,Y.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(a){if((0,Y.Dv)("Query.isEqual",1,1,arguments.length),!(a instanceof Wo))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(a._delegate)}static getCancelAndContextArgs_(a,l,p){const I={cancel:void 0,context:void 0};if(l&&p)I.cancel=l,(0,Y.Wj)(a,"cancel",I.cancel,!0),I.context=p,(0,Y.lb)(a,"context",I.context,!0);else if(l)if("object"==typeof l&&null!==l)I.context=l;else{if("function"!=typeof l)throw new Error((0,Y.gK)(a,"cancelOrContext")+" must either be a cancel callback or a context object.");I.cancel=l}return I}get ref(){return new wa(this.database,new nc(this._delegate._repo,this._delegate._path))}}class wa extends Wo{constructor(a,l){super(a,new Co(l._repo,l._path,new Za,!1)),this.database=a,this._delegate=l}getKey(){return(0,Y.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(a){return(0,Y.Dv)("Reference.child",1,1,arguments.length),"number"==typeof a&&(a=String(a)),new wa(this.database,Ul(this._delegate,a))}getParent(){(0,Y.Dv)("Reference.parent",0,0,arguments.length);const a=this._delegate.parent;return a?new wa(this.database,a):null}getRoot(){return(0,Y.Dv)("Reference.root",0,0,arguments.length),new wa(this.database,this._delegate.root)}set(a,l){(0,Y.Dv)("Reference.set",1,2,arguments.length),(0,Y.Wj)("Reference.set","onComplete",l,!0);const p=Uu(this._delegate,a);return l&&p.then(()=>l(null),I=>l(I)),p}update(a,l){if((0,Y.Dv)("Reference.update",1,2,arguments.length),Array.isArray(a)){const I={};for(let M=0;M<a.length;++M)I[""+M]=a[M];a=I,sm("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}pl("Reference.update",this._delegate._path),(0,Y.Wj)("Reference.update","onComplete",l,!0);const p=Qf(this._delegate,a);return l&&p.then(()=>l(null),I=>l(I)),p}setWithPriority(a,l,p){(0,Y.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,Y.Wj)("Reference.setWithPriority","onComplete",p,!0);const I=function Kg(u,a,l){if(pl("setWithPriority",u._path),bc("setWithPriority",a,u._path,!1),Ll("setWithPriority",l,!1),".length"===u.key||".keys"===u.key)throw"setWithPriority failed: "+u.key+" is a read-only object.";const p=new Y.BH;return $g(u._repo,u._path,a,l,p.wrapCallback(()=>{})),p.promise}(this._delegate,a,l);return p&&I.then(()=>p(null),M=>p(M)),I}remove(a){(0,Y.Dv)("Reference.remove",0,1,arguments.length),(0,Y.Wj)("Reference.remove","onComplete",a,!0);const l=function Gg(u){return pl("remove",u._path),Uu(u,null)}(this._delegate);return a&&l.then(()=>a(null),p=>a(p)),l}transaction(a,l,p){(0,Y.Dv)("Reference.transaction",1,3,arguments.length),(0,Y.Wj)("Reference.transaction","transactionUpdate",a,!1),(0,Y.Wj)("Reference.transaction","onComplete",l,!0),function(u,a,l,p){if(void 0!==l&&"boolean"!=typeof l)throw new Error((0,Y.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,p);const I=function ny(u,a,l){var p;if(u=(0,Y.m9)(u),pl("Reference.transaction",u._path),".length"===u.key||".keys"===u.key)throw"Reference.transaction failed: "+u.key+" is a read-only object.";const I=null===(p=null==l?void 0:l.applyLocally)||void 0===p||p,M=new Y.BH,te=eg(u,()=>{});return function Wh(u,a,l,p,I,M){th(u,"transaction on "+a);const V={path:a,update:l,onComplete:p,status:null,order:Ha(),applyLocally:M,retryCount:0,unwatcher:I,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},te=nh(u,a,void 0);V.currentInputSnapshot=te;const he=V.update(te.val());if(void 0===he)V.unwatcher(),V.currentOutputSnapshotRaw=null,V.currentOutputSnapshotResolved=null,V.onComplete&&V.onComplete(null,!1,V.currentInputSnapshot);else{Jl("transaction failed: Data returned ",he,V.path),V.status=0;const Te=ku(u.transactionQueueTree_,a),bt=Bc(Te)||[];let jt;bt.push(V),$c(Te,bt),"object"==typeof he&&null!==he&&(0,Y.r3)(he,".priority")?(jt=(0,Y.DV)(he,".priority"),(0,Y.hu)(zf(jt),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):jt=(pd(u.serverSyncTree_,a)||Xr.EMPTY_NODE).getPriority().val();const Yt=Hh(u),Dn=Hr(he,jt),Bn=Bh(Dn,te,Yt);V.currentOutputSnapshotRaw=Dn,V.currentOutputSnapshotResolved=Bn,V.currentWriteId=Gf(u);const Kr=Go(u.serverSyncTree_,a,Bn,V.currentWriteId,V.applyLocally);Na(u.eventQueue_,a,Kr),Lu(u,u.transactionQueueTree_)}}(u._repo,u._path,a,(he,Te,bt)=>{let jt=null;he?M.reject(he):(jt=new Cd(bt,new nc(u._repo,u._path),Tr),M.resolve(new Ba(Te,jt)))},te,I),M.promise}(this._delegate,a,{applyLocally:p}).then(M=>new cg(M.committed,new Hu(this.database,M.snapshot)));return l&&I.then(M=>l(null,M.committed,M.snapshot),M=>l(M,!1,null)),I}setPriority(a,l){(0,Y.Dv)("Reference.setPriority",1,2,arguments.length),(0,Y.Wj)("Reference.setPriority","onComplete",l,!0);const p=function Wg(u,a){u=(0,Y.m9)(u),pl("setPriority",u._path),Ll("setPriority",a,!1);const l=new Y.BH;return $g(u._repo,Qi(u._path,".priority"),a,null,l.wrapCallback(()=>{})),l.promise}(this._delegate,a);return l&&p.then(()=>l(null),I=>l(I)),p}push(a,l){(0,Y.Dv)("Reference.push",0,2,arguments.length),(0,Y.Wj)("Reference.push","onComplete",l,!0);const p=function Qm(u,a){u=(0,Y.m9)(u),pl("push",u._path),bc("push",a,u._path,!0);const l=Lg(u._repo),p=$u(l),I=Ul(u,p),M=Ul(u,p);let V;return V=null!=a?Uu(M,a).then(()=>M):Promise.resolve(M),I.then=V.then.bind(V),I.catch=V.then.bind(V,void 0),I}(this._delegate,a),I=p.then(V=>new wa(this.database,V));l&&I.then(()=>l(null),V=>l(V));const M=new wa(this.database,p);return M.then=I.then.bind(I),M.catch=I.catch.bind(I,void 0),M}onDisconnect(){return pl("Reference.onDisconnect",this._delegate._path),new sy(new Qp(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Dd{constructor(a,l){this._delegate=a,this.app=l,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:op,forceLongPolling:nm}}useEmulator(a,l,p={}){!function af(u,a,l,p={}){(u=(0,Y.m9)(u))._checkNotDeleted("useEmulator"),u._instanceStarted&&oo("Cannot call useEmulator() after instance has already been initialized.");const I=u._repoInternal;let M;if(I.repoInfo_.nodeAdmin)p.mockUserToken&&oo('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),M=new wr(wr.OWNER);else if(p.mockUserToken){const V="string"==typeof p.mockUserToken?p.mockUserToken:(0,Y.Sg)(p.mockUserToken,u.app.options.projectId);M=new wr(V)}!function Jm(u,a,l,p){u.repoInfo_=new Gl(`${a}:${l}`,!1,u.repoInfo_.namespace,u.repoInfo_.webSocketOnly,u.repoInfo_.nodeAdmin,u.repoInfo_.persistenceKey,u.repoInfo_.includeNamespaceInQueryParams,!0),p&&(u.authTokenProvider_=p)}(I,a,l,M)}(this._delegate,a,l,p)}ref(a){if((0,Y.Dv)("database.ref",0,1,arguments.length),a instanceof wa){const l=zg(this._delegate,a.toString());return new wa(this,l)}{const l=Xm(this._delegate,a);return new wa(this,l)}}refFromURL(a){(0,Y.Dv)("database.refFromURL",1,1,arguments.length);const p=zg(this._delegate,a);return new wa(this,p)}goOffline(){return(0,Y.Dv)("database.goOffline",0,0,arguments.length),function rm(u){(u=(0,Y.m9)(u))._checkNotDeleted("goOffline"),qf(u._repo)}(this._delegate)}goOnline(){return(0,Y.Dv)("database.goOnline",0,0,arguments.length),function ey(u){(u=(0,Y.m9)(u))._checkNotDeleted("goOnline"),function gl(u){u.persistentConnection_&&u.persistentConnection_.resume(ec)}(u._repo)}(this._delegate)}}Dd.ServerValue={TIMESTAMP:function ty(){return og}(),increment:u=>function ag(u){return{".sv":{increment:u}}}(u)};var uh=Object.freeze({__proto__:null,initStandalone:function hu({app:u,url:a,version:l,customAuthImpl:p,namespace:I,nodeAdmin:M=!1}){So(l);const V=new et.zt("auth-internal",new et.H0("database-standalone"));return V.setComponent(new et.wA("auth-internal",()=>p,"PRIVATE")),{instance:new Dd(sf(u,V,void 0,a,M),u),namespace:I}}});const Td=Dd.ServerValue;function df(u){return null==u}function hf(u){return"function"==typeof u.set}function Hc(u,a){return hf(a)?a:u.ref(a)}function up(u,a){if(function uf(u){return"string"==typeof u}(u))return a.stringCase();if(hf(u))return a.firebaseCase();if(function oy(u){return"function"==typeof u.exportVal}(u))return a.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof u)}function Sd(u,a,l="on",p=Ce.z){return new ye.y(I=>{let M=null;return M=u[l](a,(V,te)=>{p.schedule(()=>{I.next({snapshot:V,prevKey:te})}),"once"===l&&p.schedule(()=>I.complete())},V=>{p.schedule(()=>I.error(V))}),"on"===l?{unsubscribe(){null!=M&&u.off(a,M)}}:{unsubscribe(){}}}).pipe((0,He.U)(I=>{const{snapshot:M,prevKey:V}=I;let te=null;return M.exists()&&(te=M.key),{type:a,payload:M,prevKey:V,key:te}}),(0,ne.B)())}function ff(u,a){const l=u.length;for(let p=0;p<l;p++)if(u[p].payload.key===a)return p;return-1}function pf(u,a){const{payload:l,prevKey:p,key:I}=a,M=ff(u,I),V=function dh(u,a){if(df(a))return 0;{const l=ff(u,a);return-1===l?u.length:l+1}}(u,p);switch(a.type){case"value":if(a.payload&&a.payload.exists()){let te=null;a.payload.forEach(he=>{const Te={payload:he,type:"value",prevKey:te,key:he.key};return te=he.key,u=[...u,Te],!1})}return u;case"child_added":if(M>-1){const te=u[M-1];(te&&te.key||null)!==p&&(u=u.filter(he=>he.payload.key!==l.key)).splice(V,0,a)}else{if(null==p)return[a,...u];(u=u.slice()).splice(V,0,a)}return u;case"child_removed":return u.filter(te=>te.payload.key!==l.key);case"child_changed":return u.map(te=>te.payload.key===I?a:te);case"child_moved":if(M>-1){const te=u.splice(M,1)[0];return(u=u.slice()).splice(V,0,te),u}return u;default:return u}}function dp(u){return(df(u)||0===u.length)&&(u=["child_added","child_removed","child_changed","child_moved"]),u}function hh(u,a,l){return function Tc(u,a,l){return Sd(u,"value","once",l).pipe((0,rt.w)(p=>{const I=[(0,Ue.of)(p)];return a.forEach(M=>I.push(Sd(u,M,"on",l))),(0,O.T)(...I).pipe((0,yt.R)(pf,[]))}),(0,dn.x)())}(u,a=dp(a),l)}function gf(u,a,l){const p=(a=dp(a)).map(I=>Sd(u,I,"on",l));return(0,O.T)(...p)}function lm(u,a){return function(p,I){return up(p,{stringCase:()=>u.child(p)[a](I),firebaseCase:()=>p[a](I),snapshotCase:()=>p.ref[a](I)})}}function tv(u){return function(l){return l?up(l,{stringCase:()=>u.child(l).remove(),firebaseCase:()=>l.remove(),snapshotCase:()=>l.ref.remove()}):u.remove()}}function ug(u,a){return function(){return Sd(u,"value","on",a)}}!function cp(u){u.INTERNAL.registerComponent(new et.wA("database-compat",(a,{instanceIdentifier:l})=>{const p=a.getProvider("app-compat").getImmediate(),I=a.getProvider("database").getImmediate({identifier:l});return new Dd(I,p)},"PUBLIC").setServiceProps({Reference:wa,Query:Wo,Database:Dd,DataSnapshot:Hu,enableLogging:im,INTERNAL:uh,ServerValue:Td}).setMultipleInstances(!0)),u.registerVersion("@firebase/database-compat","0.3.4")}(Se.Z);const dg=new E.OlP("angularfire2.realtimeDatabaseURL"),ly=new E.OlP("angularfire2.database.use-emulator");let hg=(()=>{class u{constructor(l,p,I,M,V,te,he,Te,bt,jt,Yt,Dn,Bn,Kr,fi){this.schedulers=te;const ho=he,Ko=(0,Re.on)(l,V,p);Te&&(0,xe.nw)(Ko,V,bt,Yt,Dn,Bn,jt,Kr),this.database=(0,Re.cc)(`${Ko.name}.database.${I}`,"AngularFireDatabase",Ko.name,()=>{const Ui=V.runOutsideAngular(()=>Ko.database(I||void 0));return ho&&Ui.useEmulator(...ho),Ui},[ho])}list(l,p){const I=this.schedulers.ngZone.runOutsideAngular(()=>Hc(this.database,l));let M=I;return p&&(M=p(I)),function cm(u,a){const l=a.schedulers.outsideAngular,p=a.schedulers.ngZone.run(()=>u.ref);return{query:u,update:lm(p,"update"),set:lm(p,"set"),push:I=>p.push(I),remove:tv(p),snapshotChanges:I=>hh(u,I,l).pipe(Dt.iC),stateChanges:I=>gf(u,I,l).pipe(Dt.iC),auditTrail:I=>function am(u,a,l){return function Ad(u,a,l){return function fh(u,a){return Sd(u,"value","on",a).pipe((0,He.U)(l=>{let p;return l.payload.forEach(I=>(p=I.key,!1)),{data:l,lastKeyToLoad:p}}))}(u,l).pipe(function zs(...u){const a=(0,fs.jO)(u);return(0,ge.e)((l,p)=>{const I=u.length,M=new Array(I);let V=u.map(()=>!1),te=!1;for(let he=0;he<I;he++)(0,jr.Xf)(u[he]).subscribe((0,ve.x)(p,Te=>{M[he]=Te,!te&&!V[he]&&(V[he]=!0,(te=V.every(yi.y))&&(V=null))},Si.Z));l.subscribe((0,ve.x)(p,he=>{if(te){const Te=[he,...M];p.next(a?a(...Te):Te)}}))})}(a),(0,He.U)(([I,M])=>{const V=I.lastKeyToLoad,te=M.map(he=>he.key);return{actions:M,lastKeyToLoad:V,loadedKeys:te}}),function Ai(u){return(0,ge.e)((a,l)=>{let p=!1,I=0;a.subscribe((0,ve.x)(l,M=>(p||(p=!u(M,I++)))&&l.next(M)))})}(I=>-1===I.loadedKeys.indexOf(I.lastKeyToLoad)),(0,He.U)(I=>I.actions))}(u,gf(u,a).pipe((0,yt.R)((I,M)=>[...I,M],[])),l)}(u,I,l).pipe(Dt.iC),valueChanges:(I,M)=>hh(u,I,l).pipe((0,He.U)(te=>te.map(he=>M&&M.idField?Object.assign(Object.assign({},he.payload.val()),{[M.idField]:he.key}):he.payload.val())),Dt.iC)}}(M,this)}object(l){return function ay(u,a){return{query:u,snapshotChanges:()=>ug(u,a.schedulers.outsideAngular)().pipe(Dt.iC),update:l=>u.ref.update(l),set:l=>u.ref.set(l),remove:()=>u.ref.remove(),valueChanges:()=>ug(u,a.schedulers.outsideAngular)().pipe(Dt.iC,(0,He.U)(p=>p.payload.exists()?p.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Hc(this.database,l)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return u.\u0275fac=function(l){return new(l||u)(E.LFG(Re.Dh),E.LFG(Re.xv,8),E.LFG(dg,8),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(Dt.HU),E.LFG(ly,8),E.LFG(xe.zQ,8),E.LFG(xe.Qv,8),E.LFG(xe.L6,8),E.LFG(xe._Q,8),E.LFG(xe.rT,8),E.LFG(xe.lh,8),E.LFG(xe.f7,8),E.LFG(pa.nm,8))},u.\u0275prov=E.Yz7({token:u,factory:u.\u0275fac,providedIn:"any"}),u})(),cy=(()=>{class u{constructor(){_s.Z.registerVersion("angularfire",Dt.q4.full,"rtdb-compat")}}return u.\u0275fac=function(l){return new(l||u)},u.\u0275mod=E.oAB({type:u}),u.\u0275inj=E.cJS({providers:[hg]}),u})(),hp=(()=>{class u{constructor(){}}return u.\u0275fac=function(l){return new(l||u)},u.\u0275cmp=E.Xpm({type:u,selectors:[["app-root"]],standalone:!0,features:[E.jDz],decls:2,vars:0,template:function(l,p){1&l&&(E.TgZ(0,"ion-app"),E._UZ(1,"ion-router-outlet"),E.qZA())},dependencies:[fe.Pc,fe.dr,fe.jP,xe.ww,R.yb,B,cy]}),u})();var fp=H(2340),fg=H(529);fp.N.production&&(0,E.G48)(),(0,y.Cg)(hp,{providers:[(0,fg.h_)(),{provide:ee.wN,useClass:fe.r4},(0,E.RIp)(fe.Pc.forRoot({})),(0,ee.bU)(Le),(0,E.RIp)(Re.hO.initializeApp(fp.N.firebase))]})},1135:(yn,gt,H)=>{"use strict";H.d(gt,{X:()=>y});var E=H(7579);class y extends E.x{constructor(fe){super(),this._value=fe}get value(){return this.getValue()}_subscribe(fe){const Le=super._subscribe(fe);return!Le.closed&&fe.next(this._value),Le}getValue(){const{hasError:fe,thrownError:Le,_value:xe}=this;if(fe)throw Le;return this._throwIfClosed(),xe}next(fe){super.next(this._value=fe)}}},9751:(yn,gt,H)=>{"use strict";H.d(gt,{y:()=>Ue});var E=H(930),y=H(727),ee=H(8822),fe=H(9635),Le=H(2416),xe=H(576),ye=H(2806);let Ue=(()=>{class ve{constructor(He){He&&(this._subscribe=He)}lift(He){const rt=new ve;return rt.source=this,rt.operator=He,rt}subscribe(He,rt,Dt){const Re=function ge(ve){return ve&&ve instanceof E.Lv||function Ce(ve){return ve&&(0,xe.m)(ve.next)&&(0,xe.m)(ve.error)&&(0,xe.m)(ve.complete)}(ve)&&(0,y.Nn)(ve)}(He)?He:new E.Hp(He,rt,Dt);return(0,ye.x)(()=>{const{operator:Se,source:de}=this;Re.add(Se?Se.call(Re,de):de?this._subscribe(Re):this._trySubscribe(Re))}),Re}_trySubscribe(He){try{return this._subscribe(He)}catch(rt){He.error(rt)}}forEach(He,rt){return new(rt=je(rt))((Dt,Re)=>{const Se=new E.Hp({next:de=>{try{He(de)}catch(pt){Re(pt),Se.unsubscribe()}},error:Re,complete:Dt});this.subscribe(Se)})}_subscribe(He){var rt;return null===(rt=this.source)||void 0===rt?void 0:rt.subscribe(He)}[ee.L](){return this}pipe(...He){return(0,fe.U)(He)(this)}toPromise(He){return new(He=je(He))((rt,Dt)=>{let Re;this.subscribe(Se=>Re=Se,Se=>Dt(Se),()=>rt(Re))})}}return ve.create=ze=>new ve(ze),ve})();function je(ve){var ze;return null!==(ze=null!=ve?ve:Le.v.Promise)&&void 0!==ze?ze:Promise}},7579:(yn,gt,H)=>{"use strict";H.d(gt,{x:()=>ye});var E=H(9751),y=H(727);const fe=(0,H(3888).d)(je=>function(){je(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Le=H(8737),xe=H(2806);let ye=(()=>{class je extends E.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ge){const ve=new Ue(this,this);return ve.operator=ge,ve}_throwIfClosed(){if(this.closed)throw new fe}next(ge){(0,xe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ve of this.currentObservers)ve.next(ge)}})}error(ge){(0,xe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ge;const{observers:ve}=this;for(;ve.length;)ve.shift().error(ge)}})}complete(){(0,xe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ge}=this;for(;ge.length;)ge.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ge;return(null===(ge=this.observers)||void 0===ge?void 0:ge.length)>0}_trySubscribe(ge){return this._throwIfClosed(),super._trySubscribe(ge)}_subscribe(ge){return this._throwIfClosed(),this._checkFinalizedStatuses(ge),this._innerSubscribe(ge)}_innerSubscribe(ge){const{hasError:ve,isStopped:ze,observers:He}=this;return ve||ze?y.Lc:(this.currentObservers=null,He.push(ge),new y.w0(()=>{this.currentObservers=null,(0,Le.P)(He,ge)}))}_checkFinalizedStatuses(ge){const{hasError:ve,thrownError:ze,isStopped:He}=this;ve?ge.error(ze):He&&ge.complete()}asObservable(){const ge=new E.y;return ge.source=this,ge}}return je.create=(Ce,ge)=>new Ue(Ce,ge),je})();class Ue extends ye{constructor(Ce,ge){super(),this.destination=Ce,this.source=ge}next(Ce){var ge,ve;null===(ve=null===(ge=this.destination)||void 0===ge?void 0:ge.next)||void 0===ve||ve.call(ge,Ce)}error(Ce){var ge,ve;null===(ve=null===(ge=this.destination)||void 0===ge?void 0:ge.error)||void 0===ve||ve.call(ge,Ce)}complete(){var Ce,ge;null===(ge=null===(Ce=this.destination)||void 0===Ce?void 0:Ce.complete)||void 0===ge||ge.call(Ce)}_subscribe(Ce){var ge,ve;return null!==(ve=null===(ge=this.source)||void 0===ge?void 0:ge.subscribe(Ce))&&void 0!==ve?ve:y.Lc}}},930:(yn,gt,H)=>{"use strict";H.d(gt,{Hp:()=>Dt,Lv:()=>ve});var E=H(576),y=H(727),ee=H(2416),fe=H(7849),Le=H(5032);const xe=je("C",void 0,void 0);function je(Y,et,Ze){return{kind:Y,value:et,error:Ze}}var Ce=H(3410),ge=H(2806);class ve extends y.w0{constructor(et){super(),this.isStopped=!1,et?(this.destination=et,(0,y.Nn)(et)&&et.add(this)):this.destination=pt}static create(et,Ze,xt){return new Dt(et,Ze,xt)}next(et){this.isStopped?de(function Ue(Y){return je("N",Y,void 0)}(et),this):this._next(et)}error(et){this.isStopped?de(function ye(Y){return je("E",void 0,Y)}(et),this):(this.isStopped=!0,this._error(et))}complete(){this.isStopped?de(xe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(et){this.destination.next(et)}_error(et){try{this.destination.error(et)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ze=Function.prototype.bind;function He(Y,et){return ze.call(Y,et)}class rt{constructor(et){this.partialObserver=et}next(et){const{partialObserver:Ze}=this;if(Ze.next)try{Ze.next(et)}catch(xt){Re(xt)}}error(et){const{partialObserver:Ze}=this;if(Ze.error)try{Ze.error(et)}catch(xt){Re(xt)}else Re(et)}complete(){const{partialObserver:et}=this;if(et.complete)try{et.complete()}catch(Ze){Re(Ze)}}}class Dt extends ve{constructor(et,Ze,xt){let Be;if(super(),(0,E.m)(et)||!et)Be={next:null!=et?et:void 0,error:null!=Ze?Ze:void 0,complete:null!=xt?xt:void 0};else{let Oe;this&&ee.v.useDeprecatedNextContext?(Oe=Object.create(et),Oe.unsubscribe=()=>this.unsubscribe(),Be={next:et.next&&He(et.next,Oe),error:et.error&&He(et.error,Oe),complete:et.complete&&He(et.complete,Oe)}):Be=et}this.destination=new rt(Be)}}function Re(Y){ee.v.useDeprecatedSynchronousErrorHandling?(0,ge.O)(Y):(0,fe.h)(Y)}function de(Y,et){const{onStoppedNotification:Ze}=ee.v;Ze&&Ce.z.setTimeout(()=>Ze(Y,et))}const pt={closed:!0,next:Le.Z,error:function Se(Y){throw Y},complete:Le.Z}},727:(yn,gt,H)=>{"use strict";H.d(gt,{Lc:()=>xe,w0:()=>Le,Nn:()=>ye});var E=H(576);const ee=(0,H(3888).d)(je=>function(ge){je(this),this.message=ge?`${ge.length} errors occurred during unsubscription:\n${ge.map((ve,ze)=>`${ze+1}) ${ve.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ge});var fe=H(8737);class Le{constructor(Ce){this.initialTeardown=Ce,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Ce;if(!this.closed){this.closed=!0;const{_parentage:ge}=this;if(ge)if(this._parentage=null,Array.isArray(ge))for(const He of ge)He.remove(this);else ge.remove(this);const{initialTeardown:ve}=this;if((0,E.m)(ve))try{ve()}catch(He){Ce=He instanceof ee?He.errors:[He]}const{_finalizers:ze}=this;if(ze){this._finalizers=null;for(const He of ze)try{Ue(He)}catch(rt){Ce=null!=Ce?Ce:[],rt instanceof ee?Ce=[...Ce,...rt.errors]:Ce.push(rt)}}if(Ce)throw new ee(Ce)}}add(Ce){var ge;if(Ce&&Ce!==this)if(this.closed)Ue(Ce);else{if(Ce instanceof Le){if(Ce.closed||Ce._hasParent(this))return;Ce._addParent(this)}(this._finalizers=null!==(ge=this._finalizers)&&void 0!==ge?ge:[]).push(Ce)}}_hasParent(Ce){const{_parentage:ge}=this;return ge===Ce||Array.isArray(ge)&&ge.includes(Ce)}_addParent(Ce){const{_parentage:ge}=this;this._parentage=Array.isArray(ge)?(ge.push(Ce),ge):ge?[ge,Ce]:Ce}_removeParent(Ce){const{_parentage:ge}=this;ge===Ce?this._parentage=null:Array.isArray(ge)&&(0,fe.P)(ge,Ce)}remove(Ce){const{_finalizers:ge}=this;ge&&(0,fe.P)(ge,Ce),Ce instanceof Le&&Ce._removeParent(this)}}Le.EMPTY=(()=>{const je=new Le;return je.closed=!0,je})();const xe=Le.EMPTY;function ye(je){return je instanceof Le||je&&"closed"in je&&(0,E.m)(je.remove)&&(0,E.m)(je.add)&&(0,E.m)(je.unsubscribe)}function Ue(je){(0,E.m)(je)?je():je.unsubscribe()}},2416:(yn,gt,H)=>{"use strict";H.d(gt,{v:()=>E});const E={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(yn,gt,H)=>{"use strict";H.d(gt,{z:()=>Le});var E=H(8189),ee=H(7669),fe=H(8996);function Le(...xe){return function y(){return(0,E.J)(1)}()((0,fe.D)(xe,(0,ee.yG)(xe)))}},515:(yn,gt,H)=>{"use strict";H.d(gt,{E:()=>y});const y=new(H(9751).y)(Le=>Le.complete())},8996:(yn,gt,H)=>{"use strict";H.d(gt,{D:()=>et});var E=H(8421),y=H(5363),ee=H(9468),xe=H(9751),Ue=H(2202),je=H(576),Ce=H(9672);function ve(Ze,xt){if(!Ze)throw new Error("Iterable cannot be null");return new xe.y(Be=>{(0,Ce.f)(Be,xt,()=>{const Oe=Ze[Symbol.asyncIterator]();(0,Ce.f)(Be,xt,()=>{Oe.next().then(Pe=>{Pe.done?Be.complete():Be.next(Pe.value)})},0,!0)})})}var ze=H(3670),He=H(8239),rt=H(1144),Dt=H(6495),Re=H(2206),Se=H(4532),de=H(3260);function et(Ze,xt){return xt?function Y(Ze,xt){if(null!=Ze){if((0,ze.c)(Ze))return function fe(Ze,xt){return(0,E.Xf)(Ze).pipe((0,ee.R)(xt),(0,y.Q)(xt))}(Ze,xt);if((0,rt.z)(Ze))return function ye(Ze,xt){return new xe.y(Be=>{let Oe=0;return xt.schedule(function(){Oe===Ze.length?Be.complete():(Be.next(Ze[Oe++]),Be.closed||this.schedule())})})}(Ze,xt);if((0,He.t)(Ze))return function Le(Ze,xt){return(0,E.Xf)(Ze).pipe((0,ee.R)(xt),(0,y.Q)(xt))}(Ze,xt);if((0,Re.D)(Ze))return ve(Ze,xt);if((0,Dt.T)(Ze))return function ge(Ze,xt){return new xe.y(Be=>{let Oe;return(0,Ce.f)(Be,xt,()=>{Oe=Ze[Ue.h](),(0,Ce.f)(Be,xt,()=>{let Pe,Ie;try{({value:Pe,done:Ie}=Oe.next())}catch($e){return void Be.error($e)}Ie?Be.complete():Be.next(Pe)},0,!0)}),()=>(0,je.m)(null==Oe?void 0:Oe.return)&&Oe.return()})}(Ze,xt);if((0,de.L)(Ze))return function pt(Ze,xt){return ve((0,de.Q)(Ze),xt)}(Ze,xt)}throw(0,Se.z)(Ze)}(Ze,xt):(0,E.Xf)(Ze)}},8421:(yn,gt,H)=>{"use strict";H.d(gt,{Xf:()=>ze});var E=H(655),y=H(1144),ee=H(8239),fe=H(9751),Le=H(3670),xe=H(2206),ye=H(4532),Ue=H(6495),je=H(3260),Ce=H(576),ge=H(7849),ve=H(8822);function ze(Y){if(Y instanceof fe.y)return Y;if(null!=Y){if((0,Le.c)(Y))return function He(Y){return new fe.y(et=>{const Ze=Y[ve.L]();if((0,Ce.m)(Ze.subscribe))return Ze.subscribe(et);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Y);if((0,y.z)(Y))return function rt(Y){return new fe.y(et=>{for(let Ze=0;Ze<Y.length&&!et.closed;Ze++)et.next(Y[Ze]);et.complete()})}(Y);if((0,ee.t)(Y))return function Dt(Y){return new fe.y(et=>{Y.then(Ze=>{et.closed||(et.next(Ze),et.complete())},Ze=>et.error(Ze)).then(null,ge.h)})}(Y);if((0,xe.D)(Y))return Se(Y);if((0,Ue.T)(Y))return function Re(Y){return new fe.y(et=>{for(const Ze of Y)if(et.next(Ze),et.closed)return;et.complete()})}(Y);if((0,je.L)(Y))return function de(Y){return Se((0,je.Q)(Y))}(Y)}throw(0,ye.z)(Y)}function Se(Y){return new fe.y(et=>{(function pt(Y,et){var Ze,xt,Be,Oe;return(0,E.mG)(this,void 0,void 0,function*(){try{for(Ze=(0,E.KL)(Y);!(xt=yield Ze.next()).done;)if(et.next(xt.value),et.closed)return}catch(Pe){Be={error:Pe}}finally{try{xt&&!xt.done&&(Oe=Ze.return)&&(yield Oe.call(Ze))}finally{if(Be)throw Be.error}}et.complete()})})(Y,et).catch(Ze=>et.error(Ze))})}},6451:(yn,gt,H)=>{"use strict";H.d(gt,{T:()=>xe});var E=H(8189),y=H(8421),ee=H(515),fe=H(7669),Le=H(8996);function xe(...ye){const Ue=(0,fe.yG)(ye),je=(0,fe._6)(ye,1/0),Ce=ye;return Ce.length?1===Ce.length?(0,y.Xf)(Ce[0]):(0,E.J)(je)((0,Le.D)(Ce,Ue)):ee.E}},9646:(yn,gt,H)=>{"use strict";H.d(gt,{of:()=>ee});var E=H(7669),y=H(8996);function ee(...fe){const Le=(0,E.yG)(fe);return(0,y.D)(fe,Le)}},5403:(yn,gt,H)=>{"use strict";H.d(gt,{x:()=>y});var E=H(930);function y(fe,Le,xe,ye,Ue){return new ee(fe,Le,xe,ye,Ue)}class ee extends E.Lv{constructor(Le,xe,ye,Ue,je,Ce){super(Le),this.onFinalize=je,this.shouldUnsubscribe=Ce,this._next=xe?function(ge){try{xe(ge)}catch(ve){Le.error(ve)}}:super._next,this._error=Ue?function(ge){try{Ue(ge)}catch(ve){Le.error(ve)}finally{this.unsubscribe()}}:super._error,this._complete=ye?function(){try{ye()}catch(ge){Le.error(ge)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Le;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:xe}=this;super.unsubscribe(),!xe&&(null===(Le=this.onFinalize)||void 0===Le||Le.call(this))}}}},262:(yn,gt,H)=>{"use strict";H.d(gt,{K:()=>fe});var E=H(8421),y=H(5403),ee=H(4482);function fe(Le){return(0,ee.e)((xe,ye)=>{let Ce,Ue=null,je=!1;Ue=xe.subscribe((0,y.x)(ye,void 0,void 0,ge=>{Ce=(0,E.Xf)(Le(ge,fe(Le)(xe))),Ue?(Ue.unsubscribe(),Ue=null,Ce.subscribe(ye)):je=!0})),je&&(Ue.unsubscribe(),Ue=null,Ce.subscribe(ye))})}},4351:(yn,gt,H)=>{"use strict";H.d(gt,{b:()=>ee});var E=H(5577),y=H(576);function ee(fe,Le){return(0,y.m)(Le)?(0,E.z)(fe,Le,1):(0,E.z)(fe,1)}},6590:(yn,gt,H)=>{"use strict";H.d(gt,{d:()=>ee});var E=H(4482),y=H(5403);function ee(fe){return(0,E.e)((Le,xe)=>{let ye=!1;Le.subscribe((0,y.x)(xe,Ue=>{ye=!0,xe.next(Ue)},()=>{ye||xe.next(fe),xe.complete()}))})}},1884:(yn,gt,H)=>{"use strict";H.d(gt,{x:()=>fe});var E=H(4671),y=H(4482),ee=H(5403);function fe(xe,ye=E.y){return xe=null!=xe?xe:Le,(0,y.e)((Ue,je)=>{let Ce,ge=!0;Ue.subscribe((0,ee.x)(je,ve=>{const ze=ye(ve);(ge||!xe(Ce,ze))&&(ge=!1,Ce=ze,je.next(ve))}))})}function Le(xe,ye){return xe===ye}},9300:(yn,gt,H)=>{"use strict";H.d(gt,{h:()=>ee});var E=H(4482),y=H(5403);function ee(fe,Le){return(0,E.e)((xe,ye)=>{let Ue=0;xe.subscribe((0,y.x)(ye,je=>fe.call(Le,je,Ue++)&&ye.next(je)))})}},590:(yn,gt,H)=>{"use strict";H.d(gt,{P:()=>ye});var E=H(6805),y=H(9300),ee=H(5698),fe=H(6590),Le=H(8068),xe=H(4671);function ye(Ue,je){const Ce=arguments.length>=2;return ge=>ge.pipe(Ue?(0,y.h)((ve,ze)=>Ue(ve,ze,ge)):xe.y,(0,ee.q)(1),Ce?(0,fe.d)(je):(0,Le.T)(()=>new E.K))}},4004:(yn,gt,H)=>{"use strict";H.d(gt,{U:()=>ee});var E=H(4482),y=H(5403);function ee(fe,Le){return(0,E.e)((xe,ye)=>{let Ue=0;xe.subscribe((0,y.x)(ye,je=>{ye.next(fe.call(Le,je,Ue++))}))})}},8189:(yn,gt,H)=>{"use strict";H.d(gt,{J:()=>ee});var E=H(5577),y=H(4671);function ee(fe=1/0){return(0,E.z)(y.y,fe)}},5577:(yn,gt,H)=>{"use strict";H.d(gt,{z:()=>Ue});var E=H(4004),y=H(8421),ee=H(4482),fe=H(9672),Le=H(5403),ye=H(576);function Ue(je,Ce,ge=1/0){return(0,ye.m)(Ce)?Ue((ve,ze)=>(0,E.U)((He,rt)=>Ce(ve,He,ze,rt))((0,y.Xf)(je(ve,ze))),ge):("number"==typeof Ce&&(ge=Ce),(0,ee.e)((ve,ze)=>function xe(je,Ce,ge,ve,ze,He,rt,Dt){const Re=[];let Se=0,de=0,pt=!1;const Y=()=>{pt&&!Re.length&&!Se&&Ce.complete()},et=xt=>Se<ve?Ze(xt):Re.push(xt),Ze=xt=>{He&&Ce.next(xt),Se++;let Be=!1;(0,y.Xf)(ge(xt,de++)).subscribe((0,Le.x)(Ce,Oe=>{null==ze||ze(Oe),He?et(Oe):Ce.next(Oe)},()=>{Be=!0},void 0,()=>{if(Be)try{for(Se--;Re.length&&Se<ve;){const Oe=Re.shift();rt?(0,fe.f)(Ce,rt,()=>Ze(Oe)):Ze(Oe)}Y()}catch(Oe){Ce.error(Oe)}}))};return je.subscribe((0,Le.x)(Ce,et,()=>{pt=!0,Y()})),()=>{null==Dt||Dt()}}(ve,ze,je,ge)))}},5363:(yn,gt,H)=>{"use strict";H.d(gt,{Q:()=>fe});var E=H(9672),y=H(4482),ee=H(5403);function fe(Le,xe=0){return(0,y.e)((ye,Ue)=>{ye.subscribe((0,ee.x)(Ue,je=>(0,E.f)(Ue,Le,()=>Ue.next(je),xe),()=>(0,E.f)(Ue,Le,()=>Ue.complete(),xe),je=>(0,E.f)(Ue,Le,()=>Ue.error(je),xe)))})}},5026:(yn,gt,H)=>{"use strict";H.d(gt,{R:()=>fe});var E=H(4482),y=H(5403);function fe(Le,xe){return(0,E.e)(function ee(Le,xe,ye,Ue,je){return(Ce,ge)=>{let ve=ye,ze=xe,He=0;Ce.subscribe((0,y.x)(ge,rt=>{const Dt=He++;ze=ve?Le(ze,rt,Dt):(ve=!0,rt),Ue&&ge.next(ze)},je&&(()=>{ve&&ge.next(ze),ge.complete()})))}}(Le,xe,arguments.length>=2,!0))}},3099:(yn,gt,H)=>{"use strict";H.d(gt,{B:()=>Le});var E=H(8421),y=H(7579),ee=H(930),fe=H(4482);function Le(ye={}){const{connector:Ue=(()=>new y.x),resetOnError:je=!0,resetOnComplete:Ce=!0,resetOnRefCountZero:ge=!0}=ye;return ve=>{let ze,He,rt,Dt=0,Re=!1,Se=!1;const de=()=>{null==He||He.unsubscribe(),He=void 0},pt=()=>{de(),ze=rt=void 0,Re=Se=!1},Y=()=>{const et=ze;pt(),null==et||et.unsubscribe()};return(0,fe.e)((et,Ze)=>{Dt++,!Se&&!Re&&de();const xt=rt=null!=rt?rt:Ue();Ze.add(()=>{Dt--,0===Dt&&!Se&&!Re&&(He=xe(Y,ge))}),xt.subscribe(Ze),!ze&&Dt>0&&(ze=new ee.Hp({next:Be=>xt.next(Be),error:Be=>{Se=!0,de(),He=xe(pt,je,Be),xt.error(Be)},complete:()=>{Re=!0,de(),He=xe(pt,Ce),xt.complete()}}),(0,E.Xf)(et).subscribe(ze))})(ve)}}function xe(ye,Ue,...je){if(!0===Ue)return void ye();if(!1===Ue)return;const Ce=new ee.Hp({next:()=>{Ce.unsubscribe(),ye()}});return Ue(...je).subscribe(Ce)}},8675:(yn,gt,H)=>{"use strict";H.d(gt,{O:()=>fe});var E=H(7272),y=H(7669),ee=H(4482);function fe(...Le){const xe=(0,y.yG)(Le);return(0,ee.e)((ye,Ue)=>{(xe?(0,E.z)(Le,ye,xe):(0,E.z)(Le,ye)).subscribe(Ue)})}},9468:(yn,gt,H)=>{"use strict";H.d(gt,{R:()=>y});var E=H(4482);function y(ee,fe=0){return(0,E.e)((Le,xe)=>{xe.add(ee.schedule(()=>Le.subscribe(xe),fe))})}},3900:(yn,gt,H)=>{"use strict";H.d(gt,{w:()=>fe});var E=H(8421),y=H(4482),ee=H(5403);function fe(Le,xe){return(0,y.e)((ye,Ue)=>{let je=null,Ce=0,ge=!1;const ve=()=>ge&&!je&&Ue.complete();ye.subscribe((0,ee.x)(Ue,ze=>{null==je||je.unsubscribe();let He=0;const rt=Ce++;(0,E.Xf)(Le(ze,rt)).subscribe(je=(0,ee.x)(Ue,Dt=>Ue.next(xe?xe(ze,Dt,rt,He++):Dt),()=>{je=null,ve()}))},()=>{ge=!0,ve()}))})}},5698:(yn,gt,H)=>{"use strict";H.d(gt,{q:()=>fe});var E=H(515),y=H(4482),ee=H(5403);function fe(Le){return Le<=0?()=>E.E:(0,y.e)((xe,ye)=>{let Ue=0;xe.subscribe((0,ee.x)(ye,je=>{++Ue<=Le&&(ye.next(je),Le<=Ue&&ye.complete())}))})}},8505:(yn,gt,H)=>{"use strict";H.d(gt,{b:()=>Le});var E=H(576),y=H(4482),ee=H(5403),fe=H(4671);function Le(xe,ye,Ue){const je=(0,E.m)(xe)||ye||Ue?{next:xe,error:ye,complete:Ue}:xe;return je?(0,y.e)((Ce,ge)=>{var ve;null===(ve=je.subscribe)||void 0===ve||ve.call(je);let ze=!0;Ce.subscribe((0,ee.x)(ge,He=>{var rt;null===(rt=je.next)||void 0===rt||rt.call(je,He),ge.next(He)},()=>{var He;ze=!1,null===(He=je.complete)||void 0===He||He.call(je),ge.complete()},He=>{var rt;ze=!1,null===(rt=je.error)||void 0===rt||rt.call(je,He),ge.error(He)},()=>{var He,rt;ze&&(null===(He=je.unsubscribe)||void 0===He||He.call(je)),null===(rt=je.finalize)||void 0===rt||rt.call(je)}))}):fe.y}},8068:(yn,gt,H)=>{"use strict";H.d(gt,{T:()=>fe});var E=H(6805),y=H(4482),ee=H(5403);function fe(xe=Le){return(0,y.e)((ye,Ue)=>{let je=!1;ye.subscribe((0,ee.x)(Ue,Ce=>{je=!0,Ue.next(Ce)},()=>je?Ue.complete():Ue.error(xe())))})}function Le(){return new E.K}},4408:(yn,gt,H)=>{"use strict";H.d(gt,{o:()=>Le});var E=H(727);class y extends E.w0{constructor(ye,Ue){super()}schedule(ye,Ue=0){return this}}const ee={setInterval(xe,ye,...Ue){const{delegate:je}=ee;return null!=je&&je.setInterval?je.setInterval(xe,ye,...Ue):setInterval(xe,ye,...Ue)},clearInterval(xe){const{delegate:ye}=ee;return((null==ye?void 0:ye.clearInterval)||clearInterval)(xe)},delegate:void 0};var fe=H(8737);class Le extends y{constructor(ye,Ue){super(ye,Ue),this.scheduler=ye,this.work=Ue,this.pending=!1}schedule(ye,Ue=0){var je;if(this.closed)return this;this.state=ye;const Ce=this.id,ge=this.scheduler;return null!=Ce&&(this.id=this.recycleAsyncId(ge,Ce,Ue)),this.pending=!0,this.delay=Ue,this.id=null!==(je=this.id)&&void 0!==je?je:this.requestAsyncId(ge,this.id,Ue),this}requestAsyncId(ye,Ue,je=0){return ee.setInterval(ye.flush.bind(ye,this),je)}recycleAsyncId(ye,Ue,je=0){if(null!=je&&this.delay===je&&!1===this.pending)return Ue;null!=Ue&&ee.clearInterval(Ue)}execute(ye,Ue){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const je=this._execute(ye,Ue);if(je)return je;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ye,Ue){let Ce,je=!1;try{this.work(ye)}catch(ge){je=!0,Ce=ge||new Error("Scheduled action threw falsy error")}if(je)return this.unsubscribe(),Ce}unsubscribe(){if(!this.closed){const{id:ye,scheduler:Ue}=this,{actions:je}=Ue;this.work=this.state=this.scheduler=null,this.pending=!1,(0,fe.P)(je,this),null!=ye&&(this.id=this.recycleAsyncId(Ue,ye,null)),this.delay=null,super.unsubscribe()}}}},7565:(yn,gt,H)=>{"use strict";H.d(gt,{v:()=>ee});var E=H(6063);class y{constructor(Le,xe=y.now){this.schedulerActionCtor=Le,this.now=xe}schedule(Le,xe=0,ye){return new this.schedulerActionCtor(this,Le).schedule(ye,xe)}}y.now=E.l.now;class ee extends y{constructor(Le,xe=y.now){super(Le,xe),this.actions=[],this._active=!1}flush(Le){const{actions:xe}=this;if(this._active)return void xe.push(Le);let ye;this._active=!0;do{if(ye=Le.execute(Le.state,Le.delay))break}while(Le=xe.shift());if(this._active=!1,ye){for(;Le=xe.shift();)Le.unsubscribe();throw ye}}}},4986:(yn,gt,H)=>{"use strict";H.d(gt,{z:()=>ee});var E=H(4408);const ee=new(H(7565).v)(E.o)},6063:(yn,gt,H)=>{"use strict";H.d(gt,{l:()=>E});const E={now:()=>(E.delegate||Date).now(),delegate:void 0}},3410:(yn,gt,H)=>{"use strict";H.d(gt,{z:()=>E});const E={setTimeout(y,ee,...fe){const{delegate:Le}=E;return null!=Le&&Le.setTimeout?Le.setTimeout(y,ee,...fe):setTimeout(y,ee,...fe)},clearTimeout(y){const{delegate:ee}=E;return((null==ee?void 0:ee.clearTimeout)||clearTimeout)(y)},delegate:void 0}},2202:(yn,gt,H)=>{"use strict";H.d(gt,{h:()=>y});const y=function E(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(yn,gt,H)=>{"use strict";H.d(gt,{L:()=>E});const E="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(yn,gt,H)=>{"use strict";H.d(gt,{K:()=>y});const y=(0,H(3888).d)(ee=>function(){ee(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(yn,gt,H)=>{"use strict";H.d(gt,{_6:()=>xe,jO:()=>fe,yG:()=>Le});var E=H(576);function ee(ye){return ye[ye.length-1]}function fe(ye){return(0,E.m)(ee(ye))?ye.pop():void 0}function Le(ye){return function y(ye){return ye&&(0,E.m)(ye.schedule)}(ee(ye))?ye.pop():void 0}function xe(ye,Ue){return"number"==typeof ee(ye)?ye.pop():Ue}},4742:(yn,gt,H)=>{"use strict";H.d(gt,{D:()=>Le});const{isArray:E}=Array,{getPrototypeOf:y,prototype:ee,keys:fe}=Object;function Le(ye){if(1===ye.length){const Ue=ye[0];if(E(Ue))return{args:Ue,keys:null};if(function xe(ye){return ye&&"object"==typeof ye&&y(ye)===ee}(Ue)){const je=fe(Ue);return{args:je.map(Ce=>Ue[Ce]),keys:je}}}return{args:ye,keys:null}}},8737:(yn,gt,H)=>{"use strict";function E(y,ee){if(y){const fe=y.indexOf(ee);0<=fe&&y.splice(fe,1)}}H.d(gt,{P:()=>E})},3888:(yn,gt,H)=>{"use strict";function E(y){const fe=y(Le=>{Error.call(Le),Le.stack=(new Error).stack});return fe.prototype=Object.create(Error.prototype),fe.prototype.constructor=fe,fe}H.d(gt,{d:()=>E})},1810:(yn,gt,H)=>{"use strict";function E(y,ee){return y.reduce((fe,Le,xe)=>(fe[Le]=ee[xe],fe),{})}H.d(gt,{n:()=>E})},2806:(yn,gt,H)=>{"use strict";H.d(gt,{O:()=>fe,x:()=>ee});var E=H(2416);let y=null;function ee(Le){if(E.v.useDeprecatedSynchronousErrorHandling){const xe=!y;if(xe&&(y={errorThrown:!1,error:null}),Le(),xe){const{errorThrown:ye,error:Ue}=y;if(y=null,ye)throw Ue}}else Le()}function fe(Le){E.v.useDeprecatedSynchronousErrorHandling&&y&&(y.errorThrown=!0,y.error=Le)}},9672:(yn,gt,H)=>{"use strict";function E(y,ee,fe,Le=0,xe=!1){const ye=ee.schedule(function(){fe(),xe?y.add(this.schedule(null,Le)):this.unsubscribe()},Le);if(y.add(ye),!xe)return ye}H.d(gt,{f:()=>E})},4671:(yn,gt,H)=>{"use strict";function E(y){return y}H.d(gt,{y:()=>E})},1144:(yn,gt,H)=>{"use strict";H.d(gt,{z:()=>E});const E=y=>y&&"number"==typeof y.length&&"function"!=typeof y},2206:(yn,gt,H)=>{"use strict";H.d(gt,{D:()=>y});var E=H(576);function y(ee){return Symbol.asyncIterator&&(0,E.m)(null==ee?void 0:ee[Symbol.asyncIterator])}},576:(yn,gt,H)=>{"use strict";function E(y){return"function"==typeof y}H.d(gt,{m:()=>E})},3670:(yn,gt,H)=>{"use strict";H.d(gt,{c:()=>ee});var E=H(8822),y=H(576);function ee(fe){return(0,y.m)(fe[E.L])}},6495:(yn,gt,H)=>{"use strict";H.d(gt,{T:()=>ee});var E=H(2202),y=H(576);function ee(fe){return(0,y.m)(null==fe?void 0:fe[E.h])}},8239:(yn,gt,H)=>{"use strict";H.d(gt,{t:()=>y});var E=H(576);function y(ee){return(0,E.m)(null==ee?void 0:ee.then)}},3260:(yn,gt,H)=>{"use strict";H.d(gt,{L:()=>fe,Q:()=>ee});var E=H(655),y=H(576);function ee(Le){return(0,E.FC)(this,arguments,function*(){const ye=Le.getReader();try{for(;;){const{value:Ue,done:je}=yield(0,E.qq)(ye.read());if(je)return yield(0,E.qq)(void 0);yield yield(0,E.qq)(Ue)}}finally{ye.releaseLock()}})}function fe(Le){return(0,y.m)(null==Le?void 0:Le.getReader)}},4482:(yn,gt,H)=>{"use strict";H.d(gt,{A:()=>y,e:()=>ee});var E=H(576);function y(fe){return(0,E.m)(null==fe?void 0:fe.lift)}function ee(fe){return Le=>{if(y(Le))return Le.lift(function(xe){try{return fe(xe,this)}catch(ye){this.error(ye)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(yn,gt,H)=>{"use strict";H.d(gt,{Z:()=>fe});var E=H(4004);const{isArray:y}=Array;function fe(Le){return(0,E.U)(xe=>function ee(Le,xe){return y(xe)?Le(...xe):Le(xe)}(Le,xe))}},5032:(yn,gt,H)=>{"use strict";function E(){}H.d(gt,{Z:()=>E})},9635:(yn,gt,H)=>{"use strict";H.d(gt,{U:()=>ee,z:()=>y});var E=H(4671);function y(...fe){return ee(fe)}function ee(fe){return 0===fe.length?E.y:1===fe.length?fe[0]:function(xe){return fe.reduce((ye,Ue)=>Ue(ye),xe)}}},7849:(yn,gt,H)=>{"use strict";H.d(gt,{h:()=>ee});var E=H(2416),y=H(3410);function ee(fe){y.z.setTimeout(()=>{const{onUnhandledError:Le}=E.v;if(!Le)throw fe;Le(fe)})}},4532:(yn,gt,H)=>{"use strict";function E(y){return new TypeError(`You provided ${null!==y&&"object"==typeof y?"an invalid object":`'${y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}H.d(gt,{z:()=>E})},863:(yn,gt,H)=>{var E={"./ion-accordion_2.entry.js":[9654,8592,9654],"./ion-action-sheet.entry.js":[3648,8592,3648],"./ion-alert.entry.js":[1118,8592,1118],"./ion-app_8.entry.js":[53,8592,53],"./ion-avatar_3.entry.js":[4753,4753],"./ion-back-button.entry.js":[2073,8592,2073],"./ion-backdrop.entry.js":[8939,8939],"./ion-breadcrumb_2.entry.js":[7544,8592,7544],"./ion-button_2.entry.js":[5652,5652],"./ion-card_5.entry.js":[388,388],"./ion-checkbox.entry.js":[9922,8592,9922],"./ion-chip.entry.js":[657,657],"./ion-col_3.entry.js":[9824,9824],"./ion-datetime-button.entry.js":[9230,8594,9230],"./ion-datetime_3.entry.js":[4959,8594,8592,4959],"./ion-fab_3.entry.js":[5836,8592,5836],"./ion-img.entry.js":[1033,1033],"./ion-infinite-scroll_2.entry.js":[8034,8592,8034],"./ion-input.entry.js":[1217,8592,1217],"./ion-item-option_3.entry.js":[2933,8592,2933],"./ion-item_8.entry.js":[4711,8592,4711],"./ion-loading.entry.js":[9434,9434],"./ion-menu_3.entry.js":[8136,8592,8136],"./ion-modal.entry.js":[2349,8592,2349],"./ion-nav_2.entry.js":[5349,8592,5349],"./ion-picker-column-internal.entry.js":[7602,8592,7602],"./ion-picker-internal.entry.js":[9016,9016],"./ion-popover.entry.js":[3804,3804],"./ion-progress-bar.entry.js":[4174,4174],"./ion-radio_2.entry.js":[4432,8592,4432],"./ion-range.entry.js":[1709,8592,1709],"./ion-refresher_2.entry.js":[3326,8592,3326],"./ion-reorder_2.entry.js":[3583,8592,3583],"./ion-ripple-effect.entry.js":[9958,9958],"./ion-route_4.entry.js":[4330,4330],"./ion-searchbar.entry.js":[8628,8592,8628],"./ion-segment_2.entry.js":[9325,8592,9325],"./ion-select_3.entry.js":[2773,8592,2773],"./ion-spinner.entry.js":[4908,8592,4908],"./ion-split-pane.entry.js":[9536,9536],"./ion-tab-bar_2.entry.js":[438,8592,438],"./ion-tab_2.entry.js":[1536,1536],"./ion-text.entry.js":[4376,4376],"./ion-textarea.entry.js":[6560,8592,6560],"./ion-toast.entry.js":[6120,6120],"./ion-toggle.entry.js":[5168,8592,5168]};function y(ee){if(!H.o(E,ee))return Promise.resolve().then(()=>{var xe=new Error("Cannot find module '"+ee+"'");throw xe.code="MODULE_NOT_FOUND",xe});var fe=E[ee],Le=fe[0];return Promise.all(fe.slice(1).map(H.e)).then(()=>H(Le))}y.keys=()=>Object.keys(E),y.id=863,yn.exports=y},655:(yn,gt,H)=>{"use strict";function fe(ct,wt){var ft={};for(var ke in ct)Object.prototype.hasOwnProperty.call(ct,ke)&&wt.indexOf(ke)<0&&(ft[ke]=ct[ke]);if(null!=ct&&"function"==typeof Object.getOwnPropertySymbols){var Fe=0;for(ke=Object.getOwnPropertySymbols(ct);Fe<ke.length;Fe++)wt.indexOf(ke[Fe])<0&&Object.prototype.propertyIsEnumerable.call(ct,ke[Fe])&&(ft[ke[Fe]]=ct[ke[Fe]])}return ft}function Le(ct,wt,ft,ke){var lt,Fe=arguments.length,Ne=Fe<3?wt:null===ke?ke=Object.getOwnPropertyDescriptor(wt,ft):ke;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ne=Reflect.decorate(ct,wt,ft,ke);else for(var vt=ct.length-1;vt>=0;vt--)(lt=ct[vt])&&(Ne=(Fe<3?lt(Ne):Fe>3?lt(wt,ft,Ne):lt(wt,ft))||Ne);return Fe>3&&Ne&&Object.defineProperty(wt,ft,Ne),Ne}function ve(ct,wt,ft,ke){return new(ft||(ft=Promise))(function(Ne,lt){function vt(vn){try{$t(ke.next(vn))}catch(Tt){lt(Tt)}}function Zt(vn){try{$t(ke.throw(vn))}catch(Tt){lt(Tt)}}function $t(vn){vn.done?Ne(vn.value):function Fe(Ne){return Ne instanceof ft?Ne:new ft(function(lt){lt(Ne)})}(vn.value).then(vt,Zt)}$t((ke=ke.apply(ct,wt||[])).next())})}function Y(ct){return this instanceof Y?(this.v=ct,this):new Y(ct)}function et(ct,wt,ft){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Fe,ke=ft.apply(ct,wt||[]),Ne=[];return Fe={},lt("next"),lt("throw"),lt("return"),Fe[Symbol.asyncIterator]=function(){return this},Fe;function lt(De){ke[De]&&(Fe[De]=function(St){return new Promise(function(ln,Rn){Ne.push([De,St,ln,Rn])>1||vt(De,St)})})}function vt(De,St){try{!function Zt(De){De.value instanceof Y?Promise.resolve(De.value.v).then($t,vn):Tt(Ne[0][2],De)}(ke[De](St))}catch(ln){Tt(Ne[0][3],ln)}}function $t(De){vt("next",De)}function vn(De){vt("throw",De)}function Tt(De,St){De(St),Ne.shift(),Ne.length&&vt(Ne[0][0],Ne[0][1])}}function xt(ct){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ft,wt=ct[Symbol.asyncIterator];return wt?wt.call(ct):(ct=function Dt(ct){var wt="function"==typeof Symbol&&Symbol.iterator,ft=wt&&ct[wt],ke=0;if(ft)return ft.call(ct);if(ct&&"number"==typeof ct.length)return{next:function(){return ct&&ke>=ct.length&&(ct=void 0),{value:ct&&ct[ke++],done:!ct}}};throw new TypeError(wt?"Object is not iterable.":"Symbol.iterator is not defined.")}(ct),ft={},ke("next"),ke("throw"),ke("return"),ft[Symbol.asyncIterator]=function(){return this},ft);function ke(Ne){ft[Ne]=ct[Ne]&&function(lt){return new Promise(function(vt,Zt){!function Fe(Ne,lt,vt,Zt){Promise.resolve(Zt).then(function($t){Ne({value:$t,done:vt})},lt)}(vt,Zt,(lt=ct[Ne](lt)).done,lt.value)})}}}H.d(gt,{FC:()=>et,KL:()=>xt,_T:()=>fe,gn:()=>Le,mG:()=>ve,qq:()=>Y})},6895:(yn,gt,H)=>{"use strict";H.d(gt,{Do:()=>de,EM:()=>js,HT:()=>fe,JF:()=>go,K0:()=>xe,Mx:()=>Ji,O5:()=>_e,PM:()=>io,S$:()=>Dt,V_:()=>je,Ye:()=>pt,b0:()=>Se,bD:()=>ha,ez:()=>hs,q:()=>ee,sg:()=>ii,tP:()=>Gn,uU:()=>$i,w_:()=>Le});var E=H(4650);let y=null;function ee(){return y}function fe(L){y||(y=L)}class Le{}const xe=new E.OlP("DocumentToken");let ye=(()=>{class L{historyGo(j){throw new Error("Not implemented")}}return L.\u0275fac=function(j){return new(j||L)},L.\u0275prov=E.Yz7({token:L,factory:function(){return function Ue(){return(0,E.LFG)(Ce)}()},providedIn:"platform"}),L})();const je=new E.OlP("Location Initialized");let Ce=(()=>{class L extends ye{constructor(j){super(),this._doc=j,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ee().getBaseHref(this._doc)}onPopState(j){const se=ee().getGlobalEventTarget(this._doc,"window");return se.addEventListener("popstate",j,!1),()=>se.removeEventListener("popstate",j)}onHashChange(j){const se=ee().getGlobalEventTarget(this._doc,"window");return se.addEventListener("hashchange",j,!1),()=>se.removeEventListener("hashchange",j)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(j){this._location.pathname=j}pushState(j,se,Me){ge()?this._history.pushState(j,se,Me):this._location.hash=Me}replaceState(j,se,Me){ge()?this._history.replaceState(j,se,Me):this._location.hash=Me}forward(){this._history.forward()}back(){this._history.back()}historyGo(j=0){this._history.go(j)}getState(){return this._history.state}}return L.\u0275fac=function(j){return new(j||L)(E.LFG(xe))},L.\u0275prov=E.Yz7({token:L,factory:function(){return function ve(){return new Ce((0,E.LFG)(xe))}()},providedIn:"platform"}),L})();function ge(){return!!window.history.pushState}function ze(L,X){if(0==L.length)return X;if(0==X.length)return L;let j=0;return L.endsWith("/")&&j++,X.startsWith("/")&&j++,2==j?L+X.substring(1):1==j?L+X:L+"/"+X}function He(L){const X=L.match(/#|\?|$/),j=X&&X.index||L.length;return L.slice(0,j-("/"===L[j-1]?1:0))+L.slice(j)}function rt(L){return L&&"?"!==L[0]?"?"+L:L}let Dt=(()=>{class L{historyGo(j){throw new Error("Not implemented")}}return L.\u0275fac=function(j){return new(j||L)},L.\u0275prov=E.Yz7({token:L,factory:function(){return(0,E.f3M)(Se)},providedIn:"root"}),L})();const Re=new E.OlP("appBaseHref");let Se=(()=>{class L extends Dt{constructor(j,se){var Me,Vt,Wt;super(),this._platformLocation=j,this._removeListenerFns=[],this._baseHref=null!==(Me=null!==(Vt=null!=se?se:this._platformLocation.getBaseHrefFromDOM())&&void 0!==Vt?Vt:null===(Wt=(0,E.f3M)(xe).location)||void 0===Wt?void 0:Wt.origin)&&void 0!==Me?Me:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(j){this._removeListenerFns.push(this._platformLocation.onPopState(j),this._platformLocation.onHashChange(j))}getBaseHref(){return this._baseHref}prepareExternalUrl(j){return ze(this._baseHref,j)}path(j=!1){const se=this._platformLocation.pathname+rt(this._platformLocation.search),Me=this._platformLocation.hash;return Me&&j?`${se}${Me}`:se}pushState(j,se,Me,Vt){const Wt=this.prepareExternalUrl(Me+rt(Vt));this._platformLocation.pushState(j,se,Wt)}replaceState(j,se,Me,Vt){const Wt=this.prepareExternalUrl(Me+rt(Vt));this._platformLocation.replaceState(j,se,Wt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(j=0){var se,Me;null===(se=(Me=this._platformLocation).historyGo)||void 0===se||se.call(Me,j)}}return L.\u0275fac=function(j){return new(j||L)(E.LFG(ye),E.LFG(Re,8))},L.\u0275prov=E.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"}),L})(),de=(()=>{class L extends Dt{constructor(j,se){super(),this._platformLocation=j,this._baseHref="",this._removeListenerFns=[],null!=se&&(this._baseHref=se)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(j){this._removeListenerFns.push(this._platformLocation.onPopState(j),this._platformLocation.onHashChange(j))}getBaseHref(){return this._baseHref}path(j=!1){let se=this._platformLocation.hash;return null==se&&(se="#"),se.length>0?se.substring(1):se}prepareExternalUrl(j){const se=ze(this._baseHref,j);return se.length>0?"#"+se:se}pushState(j,se,Me,Vt){let Wt=this.prepareExternalUrl(Me+rt(Vt));0==Wt.length&&(Wt=this._platformLocation.pathname),this._platformLocation.pushState(j,se,Wt)}replaceState(j,se,Me,Vt){let Wt=this.prepareExternalUrl(Me+rt(Vt));0==Wt.length&&(Wt=this._platformLocation.pathname),this._platformLocation.replaceState(j,se,Wt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(j=0){var se,Me;null===(se=(Me=this._platformLocation).historyGo)||void 0===se||se.call(Me,j)}}return L.\u0275fac=function(j){return new(j||L)(E.LFG(ye),E.LFG(Re,8))},L.\u0275prov=E.Yz7({token:L,factory:L.\u0275fac}),L})(),pt=(()=>{class L{constructor(j){this._subject=new E.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=j;const se=this._locationStrategy.getBaseHref();this._basePath=function xt(L){if(new RegExp("^(https?:)?//").test(L)){const[,j]=L.split(/\/\/[^\/]+/);return j}return L}(He(Ze(se))),this._locationStrategy.onPopState(Me=>{this._subject.emit({url:this.path(!0),pop:!0,state:Me.state,type:Me.type})})}ngOnDestroy(){var j;null===(j=this._urlChangeSubscription)||void 0===j||j.unsubscribe(),this._urlChangeListeners=[]}path(j=!1){return this.normalize(this._locationStrategy.path(j))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(j,se=""){return this.path()==this.normalize(j+rt(se))}normalize(j){return L.stripTrailingSlash(function et(L,X){if(!L||!X.startsWith(L))return X;const j=X.substring(L.length);return""===j||["/",";","?","#"].includes(j[0])?j:X}(this._basePath,Ze(j)))}prepareExternalUrl(j){return j&&"/"!==j[0]&&(j="/"+j),this._locationStrategy.prepareExternalUrl(j)}go(j,se="",Me=null){this._locationStrategy.pushState(Me,"",j,se),this._notifyUrlChangeListeners(this.prepareExternalUrl(j+rt(se)),Me)}replaceState(j,se="",Me=null){this._locationStrategy.replaceState(Me,"",j,se),this._notifyUrlChangeListeners(this.prepareExternalUrl(j+rt(se)),Me)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(j=0){var se,Me;null===(se=(Me=this._locationStrategy).historyGo)||void 0===se||se.call(Me,j)}onUrlChange(j){return this._urlChangeListeners.push(j),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(se=>{this._notifyUrlChangeListeners(se.url,se.state)})),()=>{const se=this._urlChangeListeners.indexOf(j);var Me;this._urlChangeListeners.splice(se,1),0===this._urlChangeListeners.length&&(null===(Me=this._urlChangeSubscription)||void 0===Me||Me.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(j="",se){this._urlChangeListeners.forEach(Me=>Me(j,se))}subscribe(j,se,Me){return this._subject.subscribe({next:j,error:se,complete:Me})}}return L.normalizeQueryParams=rt,L.joinWithSlash=ze,L.stripTrailingSlash=He,L.\u0275fac=function(j){return new(j||L)(E.LFG(Dt))},L.\u0275prov=E.Yz7({token:L,factory:function(){return function Y(){return new pt((0,E.LFG)(Dt))}()},providedIn:"root"}),L})();function Ze(L){return L.replace(/\/index.html$/,"")}var Ie=(()=>((Ie=Ie||{})[Ie.Format=0]="Format",Ie[Ie.Standalone=1]="Standalone",Ie))(),$e=(()=>(($e=$e||{})[$e.Narrow=0]="Narrow",$e[$e.Abbreviated=1]="Abbreviated",$e[$e.Wide=2]="Wide",$e[$e.Short=3]="Short",$e))(),ht=(()=>((ht=ht||{})[ht.Short=0]="Short",ht[ht.Medium=1]="Medium",ht[ht.Long=2]="Long",ht[ht.Full=3]="Full",ht))(),_t=(()=>((_t=_t||{})[_t.Decimal=0]="Decimal",_t[_t.Group=1]="Group",_t[_t.List=2]="List",_t[_t.PercentSign=3]="PercentSign",_t[_t.PlusSign=4]="PlusSign",_t[_t.MinusSign=5]="MinusSign",_t[_t.Exponential=6]="Exponential",_t[_t.SuperscriptingExponent=7]="SuperscriptingExponent",_t[_t.PerMille=8]="PerMille",_t[_t.Infinity=9]="Infinity",_t[_t.NaN=10]="NaN",_t[_t.TimeSeparator=11]="TimeSeparator",_t[_t.CurrencyDecimal=12]="CurrencyDecimal",_t[_t.CurrencyGroup=13]="CurrencyGroup",_t))();function Zt(L,X){return Xn((0,E.cg1)(L)[E.wAp.DateFormat],X)}function $t(L,X){return Xn((0,E.cg1)(L)[E.wAp.TimeFormat],X)}function vn(L,X){return Xn((0,E.cg1)(L)[E.wAp.DateTimeFormat],X)}function Tt(L,X){const j=(0,E.cg1)(L),se=j[E.wAp.NumberSymbols][X];if(typeof se>"u"){if(X===_t.CurrencyDecimal)return j[E.wAp.NumberSymbols][_t.Decimal];if(X===_t.CurrencyGroup)return j[E.wAp.NumberSymbols][_t.Group]}return se}function nn(L){if(!L[E.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${L[E.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Xn(L,X){for(let j=X;j>-1;j--)if(typeof L[j]<"u")return L[j];throw new Error("Locale data API: locale data undefined")}function br(L){const[X,j]=L.split(":");return{hours:+X,minutes:+j}}const Br=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Di={},Ir=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Tn=(()=>((Tn=Tn||{})[Tn.Short=0]="Short",Tn[Tn.ShortGMT=1]="ShortGMT",Tn[Tn.Long=2]="Long",Tn[Tn.Extended=3]="Extended",Tn))(),tn=(()=>((tn=tn||{})[tn.FullYear=0]="FullYear",tn[tn.Month=1]="Month",tn[tn.Date=2]="Date",tn[tn.Hours=3]="Hours",tn[tn.Minutes=4]="Minutes",tn[tn.Seconds=5]="Seconds",tn[tn.FractionalSeconds=6]="FractionalSeconds",tn[tn.Day=7]="Day",tn))(),fn=(()=>((fn=fn||{})[fn.DayPeriods=0]="DayPeriods",fn[fn.Days=1]="Days",fn[fn.Months=2]="Months",fn[fn.Eras=3]="Eras",fn))();function on(L,X,j,se){let Me=function ot(L){if(Ye(L))return L;if("number"==typeof L&&!isNaN(L))return new Date(L);if("string"==typeof L){if(L=L.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(L)){const[Me,Vt=1,Wt=1]=L.split("-").map(Ln=>+Ln);return Jr(Me,Vt-1,Wt)}const j=parseFloat(L);if(!isNaN(L-j))return new Date(j);let se;if(se=L.match(Br))return function gn(L){const X=new Date(0);let j=0,se=0;const Me=L[8]?X.setUTCFullYear:X.setFullYear,Vt=L[8]?X.setUTCHours:X.setHours;L[9]&&(j=Number(L[9]+L[10]),se=Number(L[9]+L[11])),Me.call(X,Number(L[1]),Number(L[2])-1,Number(L[3]));const Wt=Number(L[4]||0)-j,Ln=Number(L[5]||0)-se,gr=Number(L[6]||0),$r=Math.floor(1e3*parseFloat("0."+(L[7]||0)));return Vt.call(X,Wt,Ln,gr,$r),X}(se)}const X=new Date(L);if(!Ye(X))throw new Error(`Unable to convert "${L}" into a date`);return X}(L);X=Sr(j,X)||X;let Ln,Wt=[];for(;X;){if(Ln=Ir.exec(X),!Ln){Wt.push(X);break}{Wt=Wt.concat(Ln.slice(1));const Lr=Wt.pop();if(!Lr)break;X=Lr}}let gr=Me.getTimezoneOffset();se&&(gr=be(se,gr),Me=function Ct(L,X,j){const se=j?-1:1,Me=L.getTimezoneOffset();return function We(L,X){return(L=new Date(L.getTime())).setMinutes(L.getMinutes()+X),L}(L,se*(be(X,Me)-Me))}(Me,se,!0));let $r="";return Wt.forEach(Lr=>{const wr=function we(L){if(zt[L])return zt[L];let X;switch(L){case"G":case"GG":case"GGG":X=or(fn.Eras,$e.Abbreviated);break;case"GGGG":X=or(fn.Eras,$e.Wide);break;case"GGGGG":X=or(fn.Eras,$e.Narrow);break;case"y":X=Ur(tn.FullYear,1,0,!1,!0);break;case"yy":X=Ur(tn.FullYear,2,0,!0,!0);break;case"yyy":X=Ur(tn.FullYear,3,0,!1,!0);break;case"yyyy":X=Ur(tn.FullYear,4,0,!1,!0);break;case"Y":X=Xt(1);break;case"YY":X=Xt(2,!0);break;case"YYY":X=Xt(3);break;case"YYYY":X=Xt(4);break;case"M":case"L":X=Ur(tn.Month,1,1);break;case"MM":case"LL":X=Ur(tn.Month,2,1);break;case"MMM":X=or(fn.Months,$e.Abbreviated);break;case"MMMM":X=or(fn.Months,$e.Wide);break;case"MMMMM":X=or(fn.Months,$e.Narrow);break;case"LLL":X=or(fn.Months,$e.Abbreviated,Ie.Standalone);break;case"LLLL":X=or(fn.Months,$e.Wide,Ie.Standalone);break;case"LLLLL":X=or(fn.Months,$e.Narrow,Ie.Standalone);break;case"w":X=Qe(1);break;case"ww":X=Qe(2);break;case"W":X=Qe(1,!0);break;case"d":X=Ur(tn.Date,1);break;case"dd":X=Ur(tn.Date,2);break;case"c":case"cc":X=Ur(tn.Day,1);break;case"ccc":X=or(fn.Days,$e.Abbreviated,Ie.Standalone);break;case"cccc":X=or(fn.Days,$e.Wide,Ie.Standalone);break;case"ccccc":X=or(fn.Days,$e.Narrow,Ie.Standalone);break;case"cccccc":X=or(fn.Days,$e.Short,Ie.Standalone);break;case"E":case"EE":case"EEE":X=or(fn.Days,$e.Abbreviated);break;case"EEEE":X=or(fn.Days,$e.Wide);break;case"EEEEE":X=or(fn.Days,$e.Narrow);break;case"EEEEEE":X=or(fn.Days,$e.Short);break;case"a":case"aa":case"aaa":X=or(fn.DayPeriods,$e.Abbreviated);break;case"aaaa":X=or(fn.DayPeriods,$e.Wide);break;case"aaaaa":X=or(fn.DayPeriods,$e.Narrow);break;case"b":case"bb":case"bbb":X=or(fn.DayPeriods,$e.Abbreviated,Ie.Standalone,!0);break;case"bbbb":X=or(fn.DayPeriods,$e.Wide,Ie.Standalone,!0);break;case"bbbbb":X=or(fn.DayPeriods,$e.Narrow,Ie.Standalone,!0);break;case"B":case"BB":case"BBB":X=or(fn.DayPeriods,$e.Abbreviated,Ie.Format,!0);break;case"BBBB":X=or(fn.DayPeriods,$e.Wide,Ie.Format,!0);break;case"BBBBB":X=or(fn.DayPeriods,$e.Narrow,Ie.Format,!0);break;case"h":X=Ur(tn.Hours,1,-12);break;case"hh":X=Ur(tn.Hours,2,-12);break;case"H":X=Ur(tn.Hours,1);break;case"HH":X=Ur(tn.Hours,2);break;case"m":X=Ur(tn.Minutes,1);break;case"mm":X=Ur(tn.Minutes,2);break;case"s":X=Ur(tn.Seconds,1);break;case"ss":X=Ur(tn.Seconds,2);break;case"S":X=Ur(tn.FractionalSeconds,1);break;case"SS":X=Ur(tn.FractionalSeconds,2);break;case"SSS":X=Ur(tn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":X=Ei(Tn.Short);break;case"ZZZZZ":X=Ei(Tn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":X=Ei(Tn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":X=Ei(Tn.Long);break;default:return null}return zt[L]=X,X}(Lr);$r+=wr?wr(Me,j,gr):"''"===Lr?"'":Lr.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),$r}function Jr(L,X,j){const se=new Date(0);return se.setFullYear(L,X,j),se.setHours(0,0,0),se}function Sr(L,X){const j=function wt(L){return(0,E.cg1)(L)[E.wAp.LocaleId]}(L);if(Di[j]=Di[j]||{},Di[j][X])return Di[j][X];let se="";switch(X){case"shortDate":se=Zt(L,ht.Short);break;case"mediumDate":se=Zt(L,ht.Medium);break;case"longDate":se=Zt(L,ht.Long);break;case"fullDate":se=Zt(L,ht.Full);break;case"shortTime":se=$t(L,ht.Short);break;case"mediumTime":se=$t(L,ht.Medium);break;case"longTime":se=$t(L,ht.Long);break;case"fullTime":se=$t(L,ht.Full);break;case"short":const Me=Sr(L,"shortTime"),Vt=Sr(L,"shortDate");se=qr(vn(L,ht.Short),[Me,Vt]);break;case"medium":const Wt=Sr(L,"mediumTime"),Ln=Sr(L,"mediumDate");se=qr(vn(L,ht.Medium),[Wt,Ln]);break;case"long":const gr=Sr(L,"longTime"),$r=Sr(L,"longDate");se=qr(vn(L,ht.Long),[gr,$r]);break;case"full":const Lr=Sr(L,"fullTime"),wr=Sr(L,"fullDate");se=qr(vn(L,ht.Full),[Lr,wr])}return se&&(Di[j][X]=se),se}function qr(L,X){return X&&(L=L.replace(/\{([^}]+)}/g,function(j,se){return null!=X&&se in X?X[se]:j})),L}function ni(L,X,j="-",se,Me){let Vt="";(L<0||Me&&L<=0)&&(Me?L=1-L:(L=-L,Vt=j));let Wt=String(L);for(;Wt.length<X;)Wt="0"+Wt;return se&&(Wt=Wt.slice(Wt.length-X)),Vt+Wt}function Ur(L,X,j=0,se=!1,Me=!1){return function(Vt,Wt){let Ln=function xi(L,X){switch(L){case tn.FullYear:return X.getFullYear();case tn.Month:return X.getMonth();case tn.Date:return X.getDate();case tn.Hours:return X.getHours();case tn.Minutes:return X.getMinutes();case tn.Seconds:return X.getSeconds();case tn.FractionalSeconds:return X.getMilliseconds();case tn.Day:return X.getDay();default:throw new Error(`Unknown DateType value "${L}".`)}}(L,Vt);if((j>0||Ln>-j)&&(Ln+=j),L===tn.Hours)0===Ln&&-12===j&&(Ln=12);else if(L===tn.FractionalSeconds)return function pi(L,X){return ni(L,3).substring(0,X)}(Ln,X);const gr=Tt(Wt,_t.MinusSign);return ni(Ln,X,gr,se,Me)}}function or(L,X,j=Ie.Format,se=!1){return function(Me,Vt){return function Yn(L,X,j,se,Me,Vt){switch(j){case fn.Months:return function Fe(L,X,j){const se=(0,E.cg1)(L),Vt=Xn([se[E.wAp.MonthsFormat],se[E.wAp.MonthsStandalone]],X);return Xn(Vt,j)}(X,Me,se)[L.getMonth()];case fn.Days:return function ke(L,X,j){const se=(0,E.cg1)(L),Vt=Xn([se[E.wAp.DaysFormat],se[E.wAp.DaysStandalone]],X);return Xn(Vt,j)}(X,Me,se)[L.getDay()];case fn.DayPeriods:const Wt=L.getHours(),Ln=L.getMinutes();if(Vt){const $r=function En(L){const X=(0,E.cg1)(L);return nn(X),(X[E.wAp.ExtraData][2]||[]).map(se=>"string"==typeof se?br(se):[br(se[0]),br(se[1])])}(X),Lr=function lr(L,X,j){const se=(0,E.cg1)(L);nn(se);const Vt=Xn([se[E.wAp.ExtraData][0],se[E.wAp.ExtraData][1]],X)||[];return Xn(Vt,j)||[]}(X,Me,se),wr=$r.findIndex(Fi=>{if(Array.isArray(Fi)){const[Ri,Gi]=Fi,ra=Wt>=Ri.hours&&Ln>=Ri.minutes,xo=Wt<Gi.hours||Wt===Gi.hours&&Ln<Gi.minutes;if(Ri.hours<Gi.hours){if(ra&&xo)return!0}else if(ra||xo)return!0}else if(Fi.hours===Wt&&Fi.minutes===Ln)return!0;return!1});if(-1!==wr)return Lr[wr]}return function ft(L,X,j){const se=(0,E.cg1)(L),Vt=Xn([se[E.wAp.DayPeriodsFormat],se[E.wAp.DayPeriodsStandalone]],X);return Xn(Vt,j)}(X,Me,se)[Wt<12?0:1];case fn.Eras:return function Ne(L,X){return Xn((0,E.cg1)(L)[E.wAp.Eras],X)}(X,se)[L.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${j}`)}}(Me,Vt,L,X,j,se)}}function Ei(L){return function(X,j,se){const Me=-1*se,Vt=Tt(j,_t.MinusSign),Wt=Me>0?Math.floor(Me/60):Math.ceil(Me/60);switch(L){case Tn.Short:return(Me>=0?"+":"")+ni(Wt,2,Vt)+ni(Math.abs(Me%60),2,Vt);case Tn.ShortGMT:return"GMT"+(Me>=0?"+":"")+ni(Wt,1,Vt);case Tn.Long:return"GMT"+(Me>=0?"+":"")+ni(Wt,2,Vt)+":"+ni(Math.abs(Me%60),2,Vt);case Tn.Extended:return 0===se?"Z":(Me>=0?"+":"")+ni(Wt,2,Vt)+":"+ni(Math.abs(Me%60),2,Vt);default:throw new Error(`Unknown zone width "${L}"`)}}}const Pr=0,mr=4;function Ge(L){return Jr(L.getFullYear(),L.getMonth(),L.getDate()+(mr-L.getDay()))}function Qe(L,X=!1){return function(j,se){let Me;if(X){const Vt=new Date(j.getFullYear(),j.getMonth(),1).getDay()-1,Wt=j.getDate();Me=1+Math.floor((Wt+Vt)/7)}else{const Vt=Ge(j),Wt=function Ht(L){const X=Jr(L,Pr,1).getDay();return Jr(L,0,1+(X<=mr?mr:mr+7)-X)}(Vt.getFullYear()),Ln=Vt.getTime()-Wt.getTime();Me=1+Math.round(Ln/6048e5)}return ni(Me,L,Tt(se,_t.MinusSign))}}function Xt(L,X=!1){return function(j,se){return ni(Ge(j).getFullYear(),L,Tt(se,_t.MinusSign),X)}}const zt={};function be(L,X){L=L.replace(/:/g,"");const j=Date.parse("Jan 01, 1970 00:00:00 "+L)/6e4;return isNaN(j)?X:j}function Ye(L){return L instanceof Date&&!isNaN(L.valueOf())}function Ji(L,X){X=encodeURIComponent(X);for(const j of L.split(";")){const se=j.indexOf("="),[Me,Vt]=-1==se?[j,""]:[j.slice(0,se),j.slice(se+1)];if(Me.trim()===X)return decodeURIComponent(Vt)}return null}class Xi{constructor(X,j,se,Me){this.$implicit=X,this.ngForOf=j,this.index=se,this.count=Me}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ii=(()=>{class L{set ngForOf(j){this._ngForOf=j,this._ngForOfDirty=!0}set ngForTrackBy(j){this._trackByFn=j}get ngForTrackBy(){return this._trackByFn}constructor(j,se,Me){this._viewContainer=j,this._template=se,this._differs=Me,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(j){j&&(this._template=j)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const j=this._ngForOf;!this._differ&&j&&(this._differ=this._differs.find(j).create(this.ngForTrackBy))}if(this._differ){const j=this._differ.diff(this._ngForOf);j&&this._applyChanges(j)}}_applyChanges(j){const se=this._viewContainer;j.forEachOperation((Me,Vt,Wt)=>{if(null==Me.previousIndex)se.createEmbeddedView(this._template,new Xi(Me.item,this._ngForOf,-1,-1),null===Wt?void 0:Wt);else if(null==Wt)se.remove(null===Vt?void 0:Vt);else if(null!==Vt){const Ln=se.get(Vt);se.move(Ln,Wt),Oi(Ln,Me)}});for(let Me=0,Vt=se.length;Me<Vt;Me++){const Ln=se.get(Me).context;Ln.index=Me,Ln.count=Vt,Ln.ngForOf=this._ngForOf}j.forEachIdentityChange(Me=>{Oi(se.get(Me.currentIndex),Me)})}static ngTemplateContextGuard(j,se){return!0}}return L.\u0275fac=function(j){return new(j||L)(E.Y36(E.s_b),E.Y36(E.Rgc),E.Y36(E.ZZ4))},L.\u0275dir=E.lG2({type:L,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),L})();function Oi(L,X){L.context.$implicit=X.item}let _e=(()=>{class L{constructor(j,se){this._viewContainer=j,this._context=new it,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=se}set ngIf(j){this._context.$implicit=this._context.ngIf=j,this._updateView()}set ngIfThen(j){ae("ngIfThen",j),this._thenTemplateRef=j,this._thenViewRef=null,this._updateView()}set ngIfElse(j){ae("ngIfElse",j),this._elseTemplateRef=j,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(j,se){return!0}}return L.\u0275fac=function(j){return new(j||L)(E.Y36(E.s_b),E.Y36(E.Rgc))},L.\u0275dir=E.lG2({type:L,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),L})();class it{constructor(){this.$implicit=null,this.ngIf=null}}function ae(L,X){if(X&&!X.createEmbeddedView)throw new Error(`${L} must be a TemplateRef, but received '${(0,E.AaK)(X)}'.`)}let Gn=(()=>{class L{constructor(j){this._viewContainerRef=j,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(j){if(j.ngTemplateOutlet||j.ngTemplateOutletInjector){const se=this._viewContainerRef;if(this._viewRef&&se.remove(se.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:Me,ngTemplateOutletContext:Vt,ngTemplateOutletInjector:Wt}=this;this._viewRef=se.createEmbeddedView(Me,Vt,Wt?{injector:Wt}:void 0)}else this._viewRef=null}else this._viewRef&&j.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return L.\u0275fac=function(j){return new(j||L)(E.Y36(E.s_b))},L.\u0275dir=E.lG2({type:L,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[E.TTD]}),L})();const As=new E.OlP("DATE_PIPE_DEFAULT_TIMEZONE"),fo=new E.OlP("DATE_PIPE_DEFAULT_OPTIONS");let $i=(()=>{class L{constructor(j,se,Me){this.locale=j,this.defaultTimezone=se,this.defaultOptions=Me}transform(j,se,Me,Vt){if(null==j||""===j||j!=j)return null;try{var Wt,Ln,gr,$r,Lr;const wr=null!==(Wt=null!=se?se:null===(Ln=this.defaultOptions)||void 0===Ln?void 0:Ln.dateFormat)&&void 0!==Wt?Wt:"mediumDate",Fi=null!==(gr=null!==($r=null!=Me?Me:null===(Lr=this.defaultOptions)||void 0===Lr?void 0:Lr.timezone)&&void 0!==$r?$r:this.defaultTimezone)&&void 0!==gr?gr:void 0;return on(j,wr,Vt||this.locale,Fi)}catch(wr){throw function Jn(L,X){return new E.vHH(2100,!1)}()}}}return L.\u0275fac=function(j){return new(j||L)(E.Y36(E.soG,16),E.Y36(As,24),E.Y36(fo,24))},L.\u0275pipe=E.Yjl({name:"date",type:L,pure:!0,standalone:!0}),L})(),hs=(()=>{class L{}return L.\u0275fac=function(j){return new(j||L)},L.\u0275mod=E.oAB({type:L}),L.\u0275inj=E.cJS({}),L})();const ha="browser",po="server";function io(L){return L===po}let js=(()=>{class L{}return L.\u0275prov=(0,E.Yz7)({token:L,providedIn:"root",factory:()=>new Xo((0,E.LFG)(xe),window)}),L})();class Xo{constructor(X,j){this.document=X,this.window=j,this.offset=()=>[0,0]}setOffset(X){this.offset=Array.isArray(X)?()=>X:X}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(X){this.supportsScrolling()&&this.window.scrollTo(X[0],X[1])}scrollToAnchor(X){if(!this.supportsScrolling())return;const j=function Cs(L,X){const j=L.getElementById(X)||L.getElementsByName(X)[0];if(j)return j;if("function"==typeof L.createTreeWalker&&L.body&&(L.body.createShadowRoot||L.body.attachShadow)){const se=L.createTreeWalker(L.body,NodeFilter.SHOW_ELEMENT);let Me=se.currentNode;for(;Me;){const Vt=Me.shadowRoot;if(Vt){const Wt=Vt.getElementById(X)||Vt.querySelector(`[name="${X}"]`);if(Wt)return Wt}Me=se.nextNode()}}return null}(this.document,X);j&&(this.scrollToElement(j),j.focus())}setHistoryScrollRestoration(X){if(this.supportScrollRestoration()){const j=this.window.history;j&&j.scrollRestoration&&(j.scrollRestoration=X)}}scrollToElement(X){const j=X.getBoundingClientRect(),se=j.left+this.window.pageXOffset,Me=j.top+this.window.pageYOffset,Vt=this.offset();this.window.scrollTo(se-Vt[0],Me-Vt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const X=so(this.window.history)||so(Object.getPrototypeOf(this.window.history));return!(!X||!X.writable&&!X.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function so(L){return Object.getOwnPropertyDescriptor(L,"scrollRestoration")}class go{}},529:(yn,gt,H)=>{"use strict";H.d(gt,{eN:()=>wt,h_:()=>Jr});var E=H(6895),y=H(4650),ee=H(9646),fe=H(9751),Le=H(4351),xe=H(9300),ye=H(4004);class Ue{}class je{}class Ce{constructor(Ge){this.normalizedNames=new Map,this.lazyUpdate=null,Ge?this.lazyInit="string"==typeof Ge?()=>{this.headers=new Map,Ge.split("\n").forEach(Qe=>{const Xt=Qe.indexOf(":");if(Xt>0){const zt=Qe.slice(0,Xt),we=zt.toLowerCase(),be=Qe.slice(Xt+1).trim();this.maybeSetNormalizedName(zt,we),this.headers.has(we)?this.headers.get(we).push(be):this.headers.set(we,[be])}})}:()=>{this.headers=new Map,Object.keys(Ge).forEach(Qe=>{let Xt=Ge[Qe];const zt=Qe.toLowerCase();"string"==typeof Xt&&(Xt=[Xt]),Xt.length>0&&(this.headers.set(zt,Xt),this.maybeSetNormalizedName(Qe,zt))})}:this.headers=new Map}has(Ge){return this.init(),this.headers.has(Ge.toLowerCase())}get(Ge){this.init();const Qe=this.headers.get(Ge.toLowerCase());return Qe&&Qe.length>0?Qe[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(Ge){return this.init(),this.headers.get(Ge.toLowerCase())||null}append(Ge,Qe){return this.clone({name:Ge,value:Qe,op:"a"})}set(Ge,Qe){return this.clone({name:Ge,value:Qe,op:"s"})}delete(Ge,Qe){return this.clone({name:Ge,value:Qe,op:"d"})}maybeSetNormalizedName(Ge,Qe){this.normalizedNames.has(Qe)||this.normalizedNames.set(Qe,Ge)}init(){this.lazyInit&&(this.lazyInit instanceof Ce?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(Ge=>this.applyUpdate(Ge)),this.lazyUpdate=null))}copyFrom(Ge){Ge.init(),Array.from(Ge.headers.keys()).forEach(Qe=>{this.headers.set(Qe,Ge.headers.get(Qe)),this.normalizedNames.set(Qe,Ge.normalizedNames.get(Qe))})}clone(Ge){const Qe=new Ce;return Qe.lazyInit=this.lazyInit&&this.lazyInit instanceof Ce?this.lazyInit:this,Qe.lazyUpdate=(this.lazyUpdate||[]).concat([Ge]),Qe}applyUpdate(Ge){const Qe=Ge.name.toLowerCase();switch(Ge.op){case"a":case"s":let Xt=Ge.value;if("string"==typeof Xt&&(Xt=[Xt]),0===Xt.length)return;this.maybeSetNormalizedName(Ge.name,Qe);const zt=("a"===Ge.op?this.headers.get(Qe):void 0)||[];zt.push(...Xt),this.headers.set(Qe,zt);break;case"d":const we=Ge.value;if(we){let be=this.headers.get(Qe);if(!be)return;be=be.filter(We=>-1===we.indexOf(We)),0===be.length?(this.headers.delete(Qe),this.normalizedNames.delete(Qe)):this.headers.set(Qe,be)}else this.headers.delete(Qe),this.normalizedNames.delete(Qe)}}forEach(Ge){this.init(),Array.from(this.normalizedNames.keys()).forEach(Qe=>Ge(this.normalizedNames.get(Qe),this.headers.get(Qe)))}}class ve{encodeKey(Ge){return Dt(Ge)}encodeValue(Ge){return Dt(Ge)}decodeKey(Ge){return decodeURIComponent(Ge)}decodeValue(Ge){return decodeURIComponent(Ge)}}const He=/%(\d[a-f0-9])/gi,rt={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Dt(Ht){return encodeURIComponent(Ht).replace(He,(Ge,Qe)=>{var Xt;return null!==(Xt=rt[Qe])&&void 0!==Xt?Xt:Ge})}function Re(Ht){return`${Ht}`}class Se{constructor(Ge={}){if(this.updates=null,this.cloneFrom=null,this.encoder=Ge.encoder||new ve,Ge.fromString){if(Ge.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function ze(Ht,Ge){const Qe=new Map;return Ht.length>0&&Ht.replace(/^\?/,"").split("&").forEach(zt=>{const we=zt.indexOf("="),[be,We]=-1==we?[Ge.decodeKey(zt),""]:[Ge.decodeKey(zt.slice(0,we)),Ge.decodeValue(zt.slice(we+1))],Ct=Qe.get(be)||[];Ct.push(We),Qe.set(be,Ct)}),Qe}(Ge.fromString,this.encoder)}else Ge.fromObject?(this.map=new Map,Object.keys(Ge.fromObject).forEach(Qe=>{const Xt=Ge.fromObject[Qe],zt=Array.isArray(Xt)?Xt.map(Re):[Re(Xt)];this.map.set(Qe,zt)})):this.map=null}has(Ge){return this.init(),this.map.has(Ge)}get(Ge){this.init();const Qe=this.map.get(Ge);return Qe?Qe[0]:null}getAll(Ge){return this.init(),this.map.get(Ge)||null}keys(){return this.init(),Array.from(this.map.keys())}append(Ge,Qe){return this.clone({param:Ge,value:Qe,op:"a"})}appendAll(Ge){const Qe=[];return Object.keys(Ge).forEach(Xt=>{const zt=Ge[Xt];Array.isArray(zt)?zt.forEach(we=>{Qe.push({param:Xt,value:we,op:"a"})}):Qe.push({param:Xt,value:zt,op:"a"})}),this.clone(Qe)}set(Ge,Qe){return this.clone({param:Ge,value:Qe,op:"s"})}delete(Ge,Qe){return this.clone({param:Ge,value:Qe,op:"d"})}toString(){return this.init(),this.keys().map(Ge=>{const Qe=this.encoder.encodeKey(Ge);return this.map.get(Ge).map(Xt=>Qe+"="+this.encoder.encodeValue(Xt)).join("&")}).filter(Ge=>""!==Ge).join("&")}clone(Ge){const Qe=new Se({encoder:this.encoder});return Qe.cloneFrom=this.cloneFrom||this,Qe.updates=(this.updates||[]).concat(Ge),Qe}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(Ge=>this.map.set(Ge,this.cloneFrom.map.get(Ge))),this.updates.forEach(Ge=>{switch(Ge.op){case"a":case"s":const Qe=("a"===Ge.op?this.map.get(Ge.param):void 0)||[];Qe.push(Re(Ge.value)),this.map.set(Ge.param,Qe);break;case"d":if(void 0===Ge.value){this.map.delete(Ge.param);break}{let Xt=this.map.get(Ge.param)||[];const zt=Xt.indexOf(Re(Ge.value));-1!==zt&&Xt.splice(zt,1),Xt.length>0?this.map.set(Ge.param,Xt):this.map.delete(Ge.param)}}}),this.cloneFrom=this.updates=null)}}class pt{constructor(){this.map=new Map}set(Ge,Qe){return this.map.set(Ge,Qe),this}get(Ge){return this.map.has(Ge)||this.map.set(Ge,Ge.defaultValue()),this.map.get(Ge)}delete(Ge){return this.map.delete(Ge),this}has(Ge){return this.map.has(Ge)}keys(){return this.map.keys()}}function et(Ht){return typeof ArrayBuffer<"u"&&Ht instanceof ArrayBuffer}function Ze(Ht){return typeof Blob<"u"&&Ht instanceof Blob}function xt(Ht){return typeof FormData<"u"&&Ht instanceof FormData}class Oe{constructor(Ge,Qe,Xt,zt){let we;if(this.url=Qe,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=Ge.toUpperCase(),function Y(Ht){switch(Ht){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||zt?(this.body=void 0!==Xt?Xt:null,we=zt):we=Xt,we&&(this.reportProgress=!!we.reportProgress,this.withCredentials=!!we.withCredentials,we.responseType&&(this.responseType=we.responseType),we.headers&&(this.headers=we.headers),we.context&&(this.context=we.context),we.params&&(this.params=we.params)),this.headers||(this.headers=new Ce),this.context||(this.context=new pt),this.params){const be=this.params.toString();if(0===be.length)this.urlWithParams=Qe;else{const We=Qe.indexOf("?");this.urlWithParams=Qe+(-1===We?"?":We<Qe.length-1?"&":"")+be}}else this.params=new Se,this.urlWithParams=Qe}serializeBody(){return null===this.body?null:et(this.body)||Ze(this.body)||xt(this.body)||function Be(Ht){return typeof URLSearchParams<"u"&&Ht instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Se?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||xt(this.body)?null:Ze(this.body)?this.body.type||null:et(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Se?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(Ge={}){var Qe;const Xt=Ge.method||this.method,zt=Ge.url||this.url,we=Ge.responseType||this.responseType,be=void 0!==Ge.body?Ge.body:this.body,We=void 0!==Ge.withCredentials?Ge.withCredentials:this.withCredentials,Ct=void 0!==Ge.reportProgress?Ge.reportProgress:this.reportProgress;let ot=Ge.headers||this.headers,gn=Ge.params||this.params;const Ye=null!==(Qe=Ge.context)&&void 0!==Qe?Qe:this.context;return void 0!==Ge.setHeaders&&(ot=Object.keys(Ge.setHeaders).reduce((Ve,me)=>Ve.set(me,Ge.setHeaders[me]),ot)),Ge.setParams&&(gn=Object.keys(Ge.setParams).reduce((Ve,me)=>Ve.set(me,Ge.setParams[me]),gn)),new Oe(Xt,zt,be,{params:gn,headers:ot,context:Ye,reportProgress:Ct,responseType:we,withCredentials:We})}}var Pe=(()=>((Pe=Pe||{})[Pe.Sent=0]="Sent",Pe[Pe.UploadProgress=1]="UploadProgress",Pe[Pe.ResponseHeader=2]="ResponseHeader",Pe[Pe.DownloadProgress=3]="DownloadProgress",Pe[Pe.Response=4]="Response",Pe[Pe.User=5]="User",Pe))();class Ie{constructor(Ge,Qe=200,Xt="OK"){this.headers=Ge.headers||new Ce,this.status=void 0!==Ge.status?Ge.status:Qe,this.statusText=Ge.statusText||Xt,this.url=Ge.url||null,this.ok=this.status>=200&&this.status<300}}class $e extends Ie{constructor(Ge={}){super(Ge),this.type=Pe.ResponseHeader}clone(Ge={}){return new $e({headers:Ge.headers||this.headers,status:void 0!==Ge.status?Ge.status:this.status,statusText:Ge.statusText||this.statusText,url:Ge.url||this.url||void 0})}}class ht extends Ie{constructor(Ge={}){super(Ge),this.type=Pe.Response,this.body=void 0!==Ge.body?Ge.body:null}clone(Ge={}){return new ht({body:void 0!==Ge.body?Ge.body:this.body,headers:Ge.headers||this.headers,status:void 0!==Ge.status?Ge.status:this.status,statusText:Ge.statusText||this.statusText,url:Ge.url||this.url||void 0})}}class _t extends Ie{constructor(Ge){super(Ge,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${Ge.url||"(unknown url)"}`:`Http failure response for ${Ge.url||"(unknown url)"}: ${Ge.status} ${Ge.statusText}`,this.error=Ge.error||null}}function ct(Ht,Ge){return{body:Ge,headers:Ht.headers,context:Ht.context,observe:Ht.observe,params:Ht.params,reportProgress:Ht.reportProgress,responseType:Ht.responseType,withCredentials:Ht.withCredentials}}let wt=(()=>{class Ht{constructor(Qe){this.handler=Qe}request(Qe,Xt,zt={}){let we;if(Qe instanceof Oe)we=Qe;else{let Ct,ot;Ct=zt.headers instanceof Ce?zt.headers:new Ce(zt.headers),zt.params&&(ot=zt.params instanceof Se?zt.params:new Se({fromObject:zt.params})),we=new Oe(Qe,Xt,void 0!==zt.body?zt.body:null,{headers:Ct,context:zt.context,params:ot,reportProgress:zt.reportProgress,responseType:zt.responseType||"json",withCredentials:zt.withCredentials})}const be=(0,ee.of)(we).pipe((0,Le.b)(Ct=>this.handler.handle(Ct)));if(Qe instanceof Oe||"events"===zt.observe)return be;const We=be.pipe((0,xe.h)(Ct=>Ct instanceof ht));switch(zt.observe||"body"){case"body":switch(we.responseType){case"arraybuffer":return We.pipe((0,ye.U)(Ct=>{if(null!==Ct.body&&!(Ct.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Ct.body}));case"blob":return We.pipe((0,ye.U)(Ct=>{if(null!==Ct.body&&!(Ct.body instanceof Blob))throw new Error("Response is not a Blob.");return Ct.body}));case"text":return We.pipe((0,ye.U)(Ct=>{if(null!==Ct.body&&"string"!=typeof Ct.body)throw new Error("Response is not a string.");return Ct.body}));default:return We.pipe((0,ye.U)(Ct=>Ct.body))}case"response":return We;default:throw new Error(`Unreachable: unhandled observe type ${zt.observe}}`)}}delete(Qe,Xt={}){return this.request("DELETE",Qe,Xt)}get(Qe,Xt={}){return this.request("GET",Qe,Xt)}head(Qe,Xt={}){return this.request("HEAD",Qe,Xt)}jsonp(Qe,Xt){return this.request("JSONP",Qe,{params:(new Se).append(Xt,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(Qe,Xt={}){return this.request("OPTIONS",Qe,Xt)}patch(Qe,Xt,zt={}){return this.request("PATCH",Qe,ct(zt,Xt))}post(Qe,Xt,zt={}){return this.request("POST",Qe,ct(zt,Xt))}put(Qe,Xt,zt={}){return this.request("PUT",Qe,ct(zt,Xt))}}return Ht.\u0275fac=function(Qe){return new(Qe||Ht)(y.LFG(Ue))},Ht.\u0275prov=y.Yz7({token:Ht,factory:Ht.\u0275fac}),Ht})();function ft(Ht,Ge){return Ge(Ht)}const lt=new y.OlP("HTTP_INTERCEPTOR_FNS");let Zt=(()=>{class Ht extends Ue{constructor(Qe,Xt){super(),this.backend=Qe,this.injector=Xt,this.chain=null}handle(Qe){if(null===this.chain){const Xt=Array.from(new Set(this.injector.get(lt)));this.chain=Xt.reduceRight((zt,we)=>function Fe(Ht,Ge,Qe){return(Xt,zt)=>Qe.runInContext(()=>Ge(Xt,we=>Ht(we,zt)))}(zt,we,this.injector),ft)}return this.chain(Qe,Xt=>this.backend.handle(Xt))}}return Ht.\u0275fac=function(Qe){return new(Qe||Ht)(y.LFG(je),y.LFG(y.lqb))},Ht.\u0275prov=y.Yz7({token:Ht,factory:Ht.\u0275fac}),Ht})();const lr=/^\)\]\}',?\n/;let Xn=(()=>{class Ht{constructor(Qe){this.xhrFactory=Qe}handle(Qe){if("JSONP"===Qe.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new fe.y(Xt=>{const zt=this.xhrFactory.build();if(zt.open(Qe.method,Qe.urlWithParams),Qe.withCredentials&&(zt.withCredentials=!0),Qe.headers.forEach((me,dt)=>zt.setRequestHeader(me,dt.join(","))),Qe.headers.has("Accept")||zt.setRequestHeader("Accept","application/json, text/plain, */*"),!Qe.headers.has("Content-Type")){const me=Qe.detectContentTypeHeader();null!==me&&zt.setRequestHeader("Content-Type",me)}if(Qe.responseType){const me=Qe.responseType.toLowerCase();zt.responseType="json"!==me?me:"text"}const we=Qe.serializeBody();let be=null;const We=()=>{if(null!==be)return be;const me=zt.statusText||"OK",dt=new Ce(zt.getAllResponseHeaders()),Ot=function Er(Ht){return"responseURL"in Ht&&Ht.responseURL?Ht.responseURL:/^X-Request-URL:/m.test(Ht.getAllResponseHeaders())?Ht.getResponseHeader("X-Request-URL"):null}(zt)||Qe.url;return be=new $e({headers:dt,status:zt.status,statusText:me,url:Ot}),be},Ct=()=>{let{headers:me,status:dt,statusText:Ot,url:en}=We(),bn=null;204!==dt&&(bn=typeof zt.response>"u"?zt.responseText:zt.response),0===dt&&(dt=bn?200:0);let Qn=dt>=200&&dt<300;if("json"===Qe.responseType&&"string"==typeof bn){const cr=bn;bn=bn.replace(lr,"");try{bn=""!==bn?JSON.parse(bn):null}catch(Gr){bn=cr,Qn&&(Qn=!1,bn={error:Gr,text:bn})}}Qn?(Xt.next(new ht({body:bn,headers:me,status:dt,statusText:Ot,url:en||void 0})),Xt.complete()):Xt.error(new _t({error:bn,headers:me,status:dt,statusText:Ot,url:en||void 0}))},ot=me=>{const{url:dt}=We(),Ot=new _t({error:me,status:zt.status||0,statusText:zt.statusText||"Unknown Error",url:dt||void 0});Xt.error(Ot)};let gn=!1;const Ye=me=>{gn||(Xt.next(We()),gn=!0);let dt={type:Pe.DownloadProgress,loaded:me.loaded};me.lengthComputable&&(dt.total=me.total),"text"===Qe.responseType&&zt.responseText&&(dt.partialText=zt.responseText),Xt.next(dt)},Ve=me=>{let dt={type:Pe.UploadProgress,loaded:me.loaded};me.lengthComputable&&(dt.total=me.total),Xt.next(dt)};return zt.addEventListener("load",Ct),zt.addEventListener("error",ot),zt.addEventListener("timeout",ot),zt.addEventListener("abort",ot),Qe.reportProgress&&(zt.addEventListener("progress",Ye),null!==we&&zt.upload&&zt.upload.addEventListener("progress",Ve)),zt.send(we),Xt.next({type:Pe.Sent}),()=>{zt.removeEventListener("error",ot),zt.removeEventListener("abort",ot),zt.removeEventListener("load",Ct),zt.removeEventListener("timeout",ot),Qe.reportProgress&&(zt.removeEventListener("progress",Ye),null!==we&&zt.upload&&zt.upload.removeEventListener("progress",Ve)),zt.readyState!==zt.DONE&&zt.abort()}})}}return Ht.\u0275fac=function(Qe){return new(Qe||Ht)(y.LFG(E.JF))},Ht.\u0275prov=y.Yz7({token:Ht,factory:Ht.\u0275fac}),Ht})();const br=new y.OlP("XSRF_ENABLED"),di=new y.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Br=new y.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Di{}let Ir=(()=>{class Ht{constructor(Qe,Xt,zt){this.doc=Qe,this.platform=Xt,this.cookieName=zt,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const Qe=this.doc.cookie||"";return Qe!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,E.Mx)(Qe,this.cookieName),this.lastCookieString=Qe),this.lastToken}}return Ht.\u0275fac=function(Qe){return new(Qe||Ht)(y.LFG(E.K0),y.LFG(y.Lbi),y.LFG(di))},Ht.\u0275prov=y.Yz7({token:Ht,factory:Ht.\u0275fac}),Ht})();function Tn(Ht,Ge){const Qe=Ht.url.toLowerCase();if(!(0,y.f3M)(br)||"GET"===Ht.method||"HEAD"===Ht.method||Qe.startsWith("http://")||Qe.startsWith("https://"))return Ge(Ht);const Xt=(0,y.f3M)(Di).getToken(),zt=(0,y.f3M)(Br);return null!=Xt&&!Ht.headers.has(zt)&&(Ht=Ht.clone({headers:Ht.headers.set(zt,Xt)})),Ge(Ht)}function Jr(...Ht){const Ge=[wt,Xn,Zt,{provide:Ue,useExisting:Zt},{provide:je,useExisting:Xn},{provide:lt,useValue:Tn,multi:!0},{provide:br,useValue:!0},{provide:Di,useClass:Ir}];for(const Qe of Ht)Ge.push(...Qe.\u0275providers);return(0,y.MR2)(Ge)}},4650:(yn,gt,H)=>{"use strict";H.d(gt,{$8M:()=>al,$WT:()=>ar,$Z:()=>np,AFp:()=>UE,ALo:()=>c,AaK:()=>Ue,BQk:()=>zc,CHM:()=>ne,CRH:()=>vE,CZH:()=>p_,CqO:()=>lv,D6c:()=>xw,DdM:()=>s_,EJc:()=>GI,EpF:()=>ov,F$t:()=>mm,F4k:()=>av,FYo:()=>_d,FiY:()=>Li,G48:()=>fw,Gf:()=>mE,GfV:()=>qp,GkF:()=>vg,Gpc:()=>ge,Hsn:()=>my,JOm:()=>Ps,KtG:()=>yt,LFG:()=>Pr,LMc:()=>Mw,Lbi:()=>jI,Lck:()=>e_,MMx:()=>Yy,MR2:()=>Ff,NdJ:()=>Eg,OlP:()=>Mr,Oqu:()=>Cg,P3R:()=>Lc,PXZ:()=>ow,Q6J:()=>pg,QGY:()=>_g,Qsj:()=>Wp,R0b:()=>Ku,RDi:()=>id,RIp:()=>kg,Rgc:()=>Bi,SBq:()=>Ll,Sil:()=>KI,Suo:()=>yE,TTD:()=>js,TgZ:()=>xd,VKq:()=>Jy,X6Q:()=>hw,XFs:()=>cn,Xpm:()=>cr,Xts:()=>gd,Y36:()=>Vu,YKP:()=>yl,YNc:()=>sv,Yjl:()=>Cr,Yz7:()=>Tt,Z0I:()=>Rn,ZZ4:()=>Z0,_Bn:()=>Ch,_UZ:()=>yg,_Vd:()=>Jl,_uU:()=>Dv,aQg:()=>X0,c2e:()=>HI,cJS:()=>St,cg1:()=>Sm,dDg:()=>nw,dqk:()=>Tn,eJc:()=>k0,ekj:()=>My,eoX:()=>YE,f3M:()=>Ht,g9A:()=>jE,h0i:()=>rl,hij:()=>bm,iGM:()=>gE,iPO:()=>cw,ifc:()=>ot,ip1:()=>$E,jDz:()=>xf,kL8:()=>Am,lG2:()=>yr,lqb:()=>$c,lri:()=>KE,n5z:()=>jo,oAB:()=>Qt,oxw:()=>gm,q4F:()=>Uh,qLn:()=>ec,qOj:()=>fp,qZA:()=>mg,rWj:()=>qE,s9C:()=>yy,sBO:()=>pw,s_b:()=>Va,soG:()=>g_,tb:()=>XE,tp0:()=>Io,uIk:()=>gh,vHH:()=>Re,vpe:()=>Mn,wAp:()=>kr,xi3:()=>G,xp6:()=>rh,ynx:()=>vp,z2F:()=>m_,zSh:()=>Bh,zs3:()=>Co});var E=H(7579),y=H(727),ee=H(9751),fe=H(6451),Le=H(3099);function xe(n){for(let i in n)if(n[i]===xe)return i;throw Error("Could not find renamed property on target object.")}function ye(n,i){for(const o in i)i.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=i[o])}function Ue(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ue).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function je(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const Ce=xe({__forward_ref__:xe});function ge(n){return n.__forward_ref__=ge,n.toString=function(){return Ue(this())},n}function ve(n){return ze(n)?n():n}function ze(n){return"function"==typeof n&&n.hasOwnProperty(Ce)&&n.__forward_ref__===ge}function He(n){return n&&!!n.\u0275providers}const Dt="https://g.co/ng/security#xss";class Re extends Error{constructor(i,o){super(Se(i,o)),this.code=i}}function Se(n,i){return`NG0${Math.abs(n)}${i?": "+i.trim():""}`}function de(n){return"string"==typeof n?n:null==n?"":String(n)}function pt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():de(n)}function xt(n,i){throw new Re(-201,!1)}function lt(n,i){null==n&&function vt(n,i,o,d){throw new Error(`ASSERTION ERROR: ${n}`+(null==d?"":` [Expected=> ${o} ${d} ${i} <=Actual]`))}(i,n,null,"!=")}function Tt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function St(n){return{providers:n.providers||[],imports:n.imports||[]}}function ln(n){return Kn(n,lr)||Kn(n,Xn)}function Rn(n){return null!==ln(n)}function Kn(n,i){return n.hasOwnProperty(i)?n[i]:null}function En(n){return n&&(n.hasOwnProperty(Er)||n.hasOwnProperty(br))?n[Er]:null}const lr=xe({\u0275prov:xe}),Er=xe({\u0275inj:xe}),Xn=xe({ngInjectableDef:xe}),br=xe({ngInjectorDef:xe});var cn=(()=>((cn=cn||{})[cn.Default=0]="Default",cn[cn.Host=1]="Host",cn[cn.Self=2]="Self",cn[cn.SkipSelf=4]="SkipSelf",cn[cn.Optional=8]="Optional",cn))();let di;function Br(n){const i=di;return di=n,i}function Di(n,i,o){const d=ln(n);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:o&cn.Optional?null:void 0!==i?i:void xt(Ue(n))}const Tn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Jr={},Sr="__NG_DI_FLAG__",qr="ngTempTokenPath",ni="ngTokenPath",pi=/\n/gm,Ur="\u0275",xi="__source";let or;function Yn(n){const i=or;return or=n,i}function Ei(n,i=cn.Default){if(void 0===or)throw new Re(-203,!1);return null===or?Di(n,void 0,i):or.get(n,i&cn.Optional?null:void 0,i)}function Pr(n,i=cn.Default){return(function Zr(){return di}()||Ei)(ve(n),i)}function Ht(n,i=cn.Default){return Pr(n,Ge(i))}function Ge(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Qe(n){const i=[];for(let o=0;o<n.length;o++){const d=ve(n[o]);if(Array.isArray(d)){if(0===d.length)throw new Re(900,!1);let h,v=cn.Default;for(let D=0;D<d.length;D++){const F=d[D],U=zt(F);"number"==typeof U?-1===U?h=F.token:v|=U:h=F}i.push(Pr(h,v))}else i.push(Pr(d))}return i}function Xt(n,i){return n[Sr]=i,n.prototype[Sr]=i,n}function zt(n){return n[Sr]}function We(n){return{toString:n}.toString()}var Ct=(()=>((Ct=Ct||{})[Ct.OnPush=0]="OnPush",Ct[Ct.Default=1]="Default",Ct))(),ot=(()=>{return(n=ot||(ot={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",ot;var n})();const gn={},Ye=[],Ve=xe({\u0275cmp:xe}),me=xe({\u0275dir:xe}),dt=xe({\u0275pipe:xe}),Ot=xe({\u0275mod:xe}),en=xe({\u0275fac:xe}),bn=xe({__NG_ELEMENT_ID__:xe});let Qn=0;function cr(n){return We(()=>{const i=ji(n),o={...i,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Ct.OnPush,directiveDefs:null,pipeDefs:null,dependencies:i.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||ot.Emulated,id:"c"+Qn++,styles:n.styles||Ye,_:null,schemas:n.schemas||null,tView:null};Ji(o);const d=n.dependencies;return o.directiveDefs=ys(d,!1),o.pipeDefs=ys(d,!0),o})}function Ut(n){return Un(n)||tr(n)}function At(n){return null!==n}function Qt(n){return We(()=>({type:n.type,bootstrap:n.bootstrap||Ye,declarations:n.declarations||Ye,imports:n.imports||Ye,exports:n.exports||Ye,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function jn(n,i){if(null==n)return gn;const o={};for(const d in n)if(n.hasOwnProperty(d)){let h=n[d],v=h;Array.isArray(h)&&(v=h[1],h=h[0]),o[h]=d,i&&(i[h]=v)}return o}function yr(n){return We(()=>{const i=ji(n);return Ji(i),i})}function Cr(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Un(n){return n[Ve]||null}function tr(n){return n[me]||null}function Wn(n){return n[dt]||null}function ar(n){const i=Un(n)||tr(n)||Wn(n);return null!==i&&i.standalone}function Pi(n,i){const o=n[Ot]||null;if(!o&&!0===i)throw new Error(`Type ${Ue(n)} does not have '\u0275mod' property.`);return o}function ji(n){const i={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||Ye,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:jn(n.inputs,i),outputs:jn(n.outputs)}}function Ji(n){var i;null===(i=n.features)||void 0===i||i.forEach(o=>o(n))}function ys(n,i){if(!n)return null;const o=i?Wn:Ut;return()=>("function"==typeof n?n():n).map(d=>o(d)).filter(At)}const ri=0,Cn=1,dr=2,li=3,Dr=4,Xi=5,ii=6,Oi=7,re=8,_e=9,it=10,ae=11,qe=12,Ke=13,Nt=14,kt=15,Bt=16,Jt=17,mn=18,zn=19,Gn=20,gi=21,Jn=22,ut=1,tt=2,Et=7,qt=8,an=9,Vn=10;function hr(n){return Array.isArray(n)&&"object"==typeof n[ut]}function xr(n){return Array.isArray(n)&&!0===n[ut]}function As(n){return 0!=(4&n.flags)}function fo(n){return n.componentOffset>-1}function $i(n){return 1==(1&n.flags)}function ki(n){return!!n.template}function Hi(n){return 0!=(256&n[dr])}function ts(n,i){return n.hasOwnProperty(en)?n[en]:null}class To{constructor(i,o,d){this.previousValue=i,this.currentValue=o,this.firstChange=d}isFirstChange(){return this.firstChange}}function js(){return Xo}function Xo(n){return n.type.prototype.ngOnChanges&&(n.setInput=Cs),so}function so(){const n=go(this),i=null==n?void 0:n.current;if(i){const o=n.previous;if(o===gn)n.previous=i;else for(let d in i)o[d]=i[d];n.current=null,this.ngOnChanges(i)}}function Cs(n,i,o,d){const h=this.declaredInputs[o],v=go(n)||function Da(n,i){return n[Qo]=i}(n,{previous:gn,current:null}),D=v.current||(v.current={}),F=v.previous,U=F[h];D[h]=new To(U&&U.currentValue,i,F===gn),n[d]=i}js.ngInherit=!0;const Qo="__ngSimpleChanges__";function go(n){return n[Qo]||null}const mi=function(n,i,o){};function Ti(n){for(;Array.isArray(n);)n=n[ri];return n}function bs(n,i){return Ti(i[n])}function ns(n,i){return Ti(i[n.index])}function Rs(n,i){return n.data[i]}function zi(n,i){const o=i[n];return hr(o)?o:o[ri]}function ea(n){return 64==(64&n[dr])}function _s(n,i){return null==i?null:n[i]}function ga(n){n[mn]=0}function ta(n,i){n[Xi]+=i;let o=n,d=n[li];for(;null!==d&&(1===i&&1===o[Xi]||-1===i&&0===o[Xi]);)d[Xi]+=i,o=d,d=d[li]}const pr={lFrame:Eo(null),bindingsEnabled:!0};function W(){return pr.bindingsEnabled}function R(){return pr.lFrame.lView}function O(){return pr.lFrame.tView}function ne(n){return pr.lFrame.contextLView=n,n[re]}function yt(n){return pr.lFrame.contextLView=null,n}function dn(){let n=jr();for(;null!==n&&64===n.type;)n=n.parent;return n}function jr(){return pr.lFrame.currentTNode}function Si(n,i){const o=pr.lFrame;o.currentTNode=n,o.isParent=i}function fs(){return pr.lFrame.isParent}function zs(){pr.lFrame.isParent=!1}function us(){const n=pr.lFrame;let i=n.bindingRootIndex;return-1===i&&(i=n.bindingRootIndex=n.tView.bindingStartIndex),i}function So(){return pr.lFrame.bindingIndex++}function ja(n,i){const o=pr.lFrame;o.bindingIndex=o.bindingRootIndex=n,Ms(i)}function Ms(n){pr.lFrame.currentDirectiveIndex=n}function za(){return pr.lFrame.currentQueryIndex}function _o(n){pr.lFrame.currentQueryIndex=n}function Uo(n){const i=n[Cn];return 2===i.type?i.declTNode:1===i.type?n[ii]:null}function Il(n,i,o){if(o&cn.SkipSelf){let h=i,v=n;for(;!(h=h.parent,null!==h||o&cn.Host||(h=Uo(v),null===h||(v=v[kt],10&h.type))););if(null===h)return!1;i=h,n=v}const d=pr.lFrame=ds();return d.currentTNode=i,d.lView=n,!0}function na(n){const i=ds(),o=n[Cn];pr.lFrame=i,i.currentTNode=o.firstChild,i.lView=n,i.tView=o,i.contextLView=n,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function ds(){const n=pr.lFrame,i=null===n?null:n.child;return null===i?Eo(n):i}function Eo(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function Vo(){const n=pr.lFrame;return pr.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const oo=Vo;function is(){const n=Vo();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Yi(){return pr.lFrame.selectedIndex}function Ni(n){pr.lFrame.selectedIndex=n}function si(){const n=pr.lFrame;return Rs(n.tView,n.selectedIndex)}function zl(n,i){for(let Z=i.directiveStart,ce=i.directiveEnd;Z<ce;Z++){const at=n.data[Z].type.prototype,{ngAfterContentInit:Ft,ngAfterContentChecked:un,ngAfterViewInit:An,ngAfterViewChecked:qn,ngOnDestroy:_r}=at;var o,d,h,v,D,F,U;Ft&&(null!==(o=n.contentHooks)&&void 0!==o?o:n.contentHooks=[]).push(-Z,Ft),un&&((null!==(d=n.contentHooks)&&void 0!==d?d:n.contentHooks=[]).push(Z,un),(null!==(h=n.contentCheckHooks)&&void 0!==h?h:n.contentCheckHooks=[]).push(Z,un)),An&&(null!==(v=n.viewHooks)&&void 0!==v?v:n.viewHooks=[]).push(-Z,An),qn&&((null!==(D=n.viewHooks)&&void 0!==D?D:n.viewHooks=[]).push(Z,qn),(null!==(F=n.viewCheckHooks)&&void 0!==F?F:n.viewCheckHooks=[]).push(Z,qn)),null!=_r&&(null!==(U=n.destroyHooks)&&void 0!==U?U:n.destroyHooks=[]).push(Z,_r)}}function Cl(n,i,o){j(n,i,3,o)}function L(n,i,o,d){(3&n[dr])===o&&j(n,i,o,d)}function X(n,i){let o=n[dr];(3&o)===i&&(o&=2047,o+=1,n[dr]=o)}function j(n,i,o,d){const v=null!=d?d:-1,D=i.length-1;let F=0;for(let U=void 0!==d?65535&n[mn]:0;U<D;U++)if("number"==typeof i[U+1]){if(F=i[U],null!=d&&F>=d)break}else i[U]<0&&(n[mn]+=65536),(F<v||-1==v)&&(se(n,o,i,U),n[mn]=(4294901760&n[mn])+U+2),U++}function se(n,i,o,d){const h=o[d]<0,v=o[d+1],F=n[h?-o[d]:o[d]];if(h){if(n[dr]>>11<n[mn]>>16&&(3&n[dr])===i){n[dr]+=2048,mi(4,F,v);try{v.call(F)}finally{mi(5,F,v)}}}else{mi(4,F,v);try{v.call(F)}finally{mi(5,F,v)}}}const Me=-1;class Vt{constructor(i,o,d){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=d}}function Gi(n,i,o){let d=0;for(;d<o.length;){const h=o[d];if("number"==typeof h){if(0!==h)break;d++;const v=o[d++],D=o[d++],F=o[d++];n.setAttribute(i,D,F,v)}else{const v=h,D=o[++d];xo(v)?n.setProperty(i,v,D):n.setAttribute(i,v,D),d++}}return d}function ra(n){return 3===n||4===n||6===n}function xo(n){return 64===n.charCodeAt(0)}function Gs(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let o=-1;for(let d=0;d<i.length;d++){const h=i[d];"number"==typeof h?o=h:0===o||Ls(n,o,h,null,-1===o||2===o?i[++d]:null)}}return n}function Ls(n,i,o,d,h){let v=0,D=n.length;if(-1===i)D=-1;else for(;v<n.length;){const F=n[v++];if("number"==typeof F){if(F===i){D=-1;break}if(F>i){D=v-1;break}}}for(;v<n.length;){const F=n[v];if("number"==typeof F)break;if(F===o){if(null===d)return void(null!==h&&(n[v+1]=h));if(d===n[v+1])return void(n[v+2]=h)}v++,null!==d&&v++,null!==h&&v++}-1!==D&&(n.splice(D,0,i),v=D+1),n.splice(v++,0,o),null!==d&&n.splice(v++,0,d),null!==h&&n.splice(v++,0,h)}function ia(n){return n!==Me}function Ws(n){return 32767&n}function Wa(n,i){let o=function Aa(n){return n>>16}(n),d=i;for(;o>0;)d=d[kt],o--;return d}let Gl=!0;function ol(n){const i=Gl;return Gl=n,i}const Wc=255,Wi=5;let bl=0;const Zi={};function Wl(n,i){const o=ss(n,i);if(-1!==o)return o;const d=i[Cn];d.firstCreatePass&&(n.injectorIndex=i.length,hn(d.data,n),hn(i,null),hn(d.blueprint,null));const h=ci(n,i),v=n.injectorIndex;if(ia(h)){const D=Ws(h),F=Wa(h,i),U=F[Cn].data;for(let Z=0;Z<8;Z++)i[v+Z]=F[D+Z]|U[D+Z]}return i[v+8]=h,v}function hn(n,i){n.push(0,0,0,0,0,0,0,0,i)}function ss(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function ci(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,d=null,h=i;for(;null!==h;){if(d=lo(h),null===d)return Me;if(o++,h=h[kt],-1!==d.injectorIndex)return d.injectorIndex|o<<16}return Me}function sc(n,i,o){!function gu(n,i,o){let d;"string"==typeof o?d=o.charCodeAt(0)||0:o.hasOwnProperty(bn)&&(d=o[bn]),null==d&&(d=o[bn]=bl++);const h=d&Wc;i.data[n+(h>>Wi)]|=1<<h}(n,i,o)}function ir(n,i,o){if(o&cn.Optional||void 0!==n)return n;xt()}function oc(n,i,o,d){if(o&cn.Optional&&void 0===d&&(d=null),!(o&(cn.Self|cn.Host))){const h=n[_e],v=Br(void 0);try{return h?h.get(i,d,o&cn.Optional):Di(i,d,o&cn.Optional)}finally{Br(v)}}return ir(d,0,o)}function Fn(n,i,o,d=cn.Default,h){if(null!==n){if(1024&i[dr]){const D=function Kc(n,i,o,d,h){let v=n,D=i;for(;null!==v&&null!==D&&1024&D[dr]&&!(256&D[dr]);){const F=Lt(v,D,o,d|cn.Self,Zi);if(F!==Zi)return F;let U=v.parent;if(!U){const Z=D[gi];if(Z){const ce=Z.get(o,Zi,d);if(ce!==Zi)return ce}U=lo(D),D=D[kt]}v=U}return h}(n,i,o,d,Zi);if(D!==Zi)return D}const v=Lt(n,i,o,d,Zi);if(v!==Zi)return v}return oc(i,o,d,h)}function Lt(n,i,o,d,h){const v=function xc(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(bn)?n[bn]:void 0;return"number"==typeof i?i>=0?i&Wc:mu:i}(o);if("function"==typeof v){if(!Il(i,n,d))return d&cn.Host?ir(h,0,d):oc(i,o,d,h);try{const D=v(d);if(null!=D||d&cn.Optional)return D;xt()}finally{oo()}}else if("number"==typeof v){let D=null,F=ss(n,i),U=Me,Z=d&cn.Host?i[Bt][ii]:null;for((-1===F||d&cn.SkipSelf)&&(U=-1===F?ci(n,i):i[F+8],U!==Me&&Kl(d,!1)?(D=i[Cn],F=Ws(U),i=Wa(U,i)):F=-1);-1!==F;){const ce=i[Cn];if(Dl(v,F,ce.data)){const Ae=sn(F,i,o,D,d,Z);if(Ae!==Zi)return Ae}U=i[F+8],U!==Me&&Kl(d,i[Cn].data[F+8]===Z)&&Dl(v,F,i)?(D=ce,F=Ws(U),i=Wa(U,i)):F=-1}}return h}function sn(n,i,o,d,h,v){const D=i[Cn],F=D.data[n+8],ce=ui(F,D,o,null==d?fo(F)&&Gl:d!=D&&0!=(3&F.type),h&cn.Host&&v===F);return null!==ce?Ro(i,D,ce,F):Zi}function ui(n,i,o,d,h){const v=n.providerIndexes,D=i.data,F=1048575&v,U=n.directiveStart,ce=v>>20,at=h?F+ce:n.directiveEnd;for(let Ft=d?F:F+ce;Ft<at;Ft++){const un=D[Ft];if(Ft<U&&o===un||Ft>=U&&un.type===o)return Ft}if(h){const Ft=D[U];if(Ft&&ki(Ft)&&Ft.type===o)return U}return null}function Ro(n,i,o,d){let h=n[o];const v=i.data;if(function Wt(n){return n instanceof Vt}(h)){const D=h;D.resolving&&function Y(n,i){const o=i?`. Dependency path: ${i.join(" > ")} > ${n}`:"";throw new Re(-200,`Circular dependency in DI detected for ${n}${o}`)}(pt(v[o]));const F=ol(D.canSeeViewProviders);D.resolving=!0;const U=D.injectImpl?Br(D.injectImpl):null;Il(n,d,cn.Default);try{h=n[o]=D.factory(void 0,v,n,d),i.firstCreatePass&&o>=d.directiveStart&&function Rr(n,i,o){const{ngOnChanges:d,ngOnInit:h,ngDoCheck:v}=i.type.prototype;if(d){var D,F;const Ae=Xo(i);(null!==(D=o.preOrderHooks)&&void 0!==D?D:o.preOrderHooks=[]).push(n,Ae),(null!==(F=o.preOrderCheckHooks)&&void 0!==F?F:o.preOrderCheckHooks=[]).push(n,Ae)}var U,Z,ce;h&&(null!==(U=o.preOrderHooks)&&void 0!==U?U:o.preOrderHooks=[]).push(0-n,h),v&&((null!==(Z=o.preOrderHooks)&&void 0!==Z?Z:o.preOrderHooks=[]).push(n,v),(null!==(ce=o.preOrderCheckHooks)&&void 0!==ce?ce:o.preOrderCheckHooks=[]).push(n,v))}(o,v[o],i)}finally{null!==U&&Br(U),ol(F),D.resolving=!1,oo()}}return h}function Dl(n,i,o){return!!(o[i+(n>>Wi)]&1<<n)}function Kl(n,i){return!(n&cn.Self||n&cn.Host&&i)}class ac{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,d){return Fn(this._tNode,this._lView,i,Ge(d),o)}}function mu(){return new ac(dn(),R())}function jo(n){return We(()=>{const i=n.prototype.constructor,o=i[en]||Ka(i),d=Object.prototype;let h=Object.getPrototypeOf(n.prototype).constructor;for(;h&&h!==d;){const v=h[en]||Ka(h);if(v&&v!==o)return v;h=Object.getPrototypeOf(h)}return v=>new v})}function Ka(n){return ze(n)?()=>{const i=Ka(ve(n));return i&&i()}:ts(n)}function lo(n){const i=n[Cn],o=i.type;return 2===o?i.declTNode:1===o?n[ii]:null}function al(n){return function Hn(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const o=n.attrs;if(o){const d=o.length;let h=0;for(;h<d;){const v=o[h];if(ra(v))break;if(0===v)h+=2;else if("number"==typeof v)for(h++;h<d&&"string"==typeof o[h];)h++;else{if(v===i)return o[h+1];h+=2}}}return null}(dn(),n)}const sa="__parameters__";function xa(n,i,o){return We(()=>{const d=function rr(n){return function(...o){if(n){const d=n(...o);for(const h in d)this[h]=d[h]}}}(i);function h(...v){if(this instanceof h)return d.apply(this,v),this;const D=new h(...v);return F.annotation=D,F;function F(U,Z,ce){const Ae=U.hasOwnProperty(sa)?U[sa]:Object.defineProperty(U,sa,{value:[]})[sa];for(;Ae.length<=ce;)Ae.push(null);return(Ae[ce]=Ae[ce]||[]).push(D),U}}return o&&(h.prototype=Object.create(o.prototype)),h.prototype.ngMetadataName=n,h.annotationCls=h,h})}class Mr{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Tt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Or(n,i){n.forEach(o=>Array.isArray(o)?Or(o,i):i(o))}function Rt(n,i,o){i>=n.length?n.push(o):n.splice(i,0,o)}function wi(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function Es(n,i){const o=[];for(let d=0;d<n;d++)o.push(i);return o}function fr(n,i,o){let d=x(n,i);return d>=0?n[1|d]=o:(d=~d,function Mo(n,i,o,d){let h=n.length;if(h==i)n.push(o,d);else if(1===h)n.push(d,n[0]),n[0]=o;else{for(h--,n.push(n[h-1],n[h]);h>i;)n[h]=n[h-2],h--;n[i]=o,n[i+1]=d}}(n,d,i,o)),d}function S(n,i){const o=x(n,i);if(o>=0)return n[1|o]}function x(n,i){return function k(n,i,o){let d=0,h=n.length>>o;for(;h!==d;){const v=d+(h-d>>1),D=n[v<<o];if(i===D)return v<<o;D>i?h=v:d=v+1}return~(h<<o)}(n,i,1)}const Li=Xt(xa("Optional"),8),Io=Xt(xa("SkipSelf"),4);var Ps=(()=>((Ps=Ps||{})[Ps.Important=1]="Important",Ps[Ps.DashCase=2]="DashCase",Ps))();const wo=new Map;let Jc=0;const Gt="__ngContext__";function In(n,i){hr(i)?(n[Gt]=i[Gn],function Ah(n){wo.set(n[Gn],n)}(i)):n[Gt]=i}let eu;function Cu(n,i){return eu(n,i)}function bu(n){const i=n[li];return xr(i)?i[li]:i}function bi(n){return Rl(n[Ke])}function Xa(n){return Rl(n[Dr])}function Rl(n){for(;null!==n&&!xr(n);)n=n[Dr];return n}function Qa(n,i,o,d,h){if(null!=d){let v,D=!1;xr(d)?v=d:hr(d)&&(D=!0,d=d[ri]);const F=Ti(d);0===n&&null!==o?null==h?gc(i,o,F):Pa(i,o,F,h||null,!0):1===n&&null!==o?Pa(i,o,F,h||null,!0):2===n?function Au(n,i,o){const d=Oa(n,i);d&&function aa(n,i,o,d){n.removeChild(i,o,d)}(n,d,i,o)}(i,F,D):3===n&&i.destroyNode(F),null!=v&&function vc(n,i,o,d,h){const v=o[Et];v!==Ti(o)&&Qa(i,n,d,v,h);for(let F=Vn;F<o.length;F++){const U=o[F];ru(U[Cn],U,n,i,d,v)}}(i,n,v,o,h)}}function Pc(n,i,o){return n.createElement(i,o)}function Ol(n,i){const o=n[an],d=o.indexOf(i),h=i[li];512&i[dr]&&(i[dr]&=-513,ta(h,-1)),o.splice(d,1)}function Ju(n,i){if(n.length<=Vn)return;const o=Vn+i,d=n[o];if(d){const h=d[Jt];null!==h&&h!==n&&Ol(h,d),i>0&&(n[o-1][Dr]=d[Dr]);const v=wi(n,Vn+i);!function xh(n,i){ru(n,i,i[ae],2,null,null),i[ri]=null,i[ii]=null}(d[Cn],d);const D=v[zn];null!==D&&D.detachView(v[Cn]),d[li]=null,d[Dr]=null,d[dr]&=-65}return d}function $d(n,i){if(!(128&i[dr])){const o=i[ae];o.destroyNode&&ru(n,i,o,3,null,null),function Pl(n){let i=n[Ke];if(!i)return os(n[Cn],n);for(;i;){let o=null;if(hr(i))o=i[Ke];else{const d=i[Vn];d&&(o=d)}if(!o){for(;i&&!i[Dr]&&i!==n;)hr(i)&&os(i[Cn],i),i=i[li];null===i&&(i=n),hr(i)&&os(i[Cn],i),o=i&&i[Dr]}i=o}}(i)}}function os(n,i){if(!(128&i[dr])){i[dr]&=-65,i[dr]|=128,function el(n,i){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let d=0;d<o.length;d+=2){const h=i[o[d]];if(!(h instanceof Vt)){const v=o[d+1];if(Array.isArray(v))for(let D=0;D<v.length;D+=2){const F=h[v[D]],U=v[D+1];mi(4,F,U);try{U.call(F)}finally{mi(5,F,U)}}else{mi(4,h,v);try{v.call(h)}finally{mi(5,h,v)}}}}}(n,i),function Ja(n,i){const o=n.cleanup,d=i[Oi];let h=-1;if(null!==o)for(let v=0;v<o.length-1;v+=2)if("string"==typeof o[v]){const D=o[v+3];D>=0?d[h=D]():d[h=-D].unsubscribe(),v+=2}else{const D=d[h=o[v+1]];o[v].call(D)}if(null!==d){for(let v=h+1;v<d.length;v++)(0,d[v])();i[Oi]=null}}(n,i),1===i[Cn].type&&i[ae].destroy();const o=i[Jt];if(null!==o&&xr(i[li])){o!==i[li]&&Ol(o,i);const d=i[zn];null!==d&&d.detachView(n)}!function $(n){wo.delete(n[Gn])}(i)}}function Oc(n,i,o){return function Tu(n,i,o){let d=i;for(;null!==d&&40&d.type;)d=(i=d).parent;if(null===d)return o[ri];{const{componentOffset:h}=d;if(h>-1){const{encapsulation:v}=n.data[d.directiveStart+h];if(v===ot.None||v===ot.Emulated)return null}return ns(d,o)}}(n,i.parent,o)}function Pa(n,i,o,d,h){n.insertBefore(i,o,d,h)}function gc(n,i,o){n.appendChild(i,o)}function Ud(n,i,o,d,h){null!==d?Pa(n,i,o,d,h):gc(n,i,o)}function Oa(n,i){return n.parentNode(i)}function mc(n,i,o){return jd(n,i,o)}let kl,rd,od,jd=function ed(n,i,o){return 40&n.type?ns(n,o):null};function Su(n,i,o,d){const h=Oc(n,d,i),v=i[ae],F=mc(d.parent||i[ii],d,i);if(null!=h)if(Array.isArray(o))for(let U=0;U<o.length;U++)Ud(v,h,o[U],F,!1);else Ud(v,h,o,F,!1);void 0!==kl&&kl(v,d,i,o,h)}function tu(n,i){if(null!==i){const o=i.type;if(3&o)return ns(i,n);if(4&o)return td(-1,n[i.index]);if(8&o){const d=i.child;if(null!==d)return tu(n,d);{const h=n[i.index];return xr(h)?td(-1,h):Ti(h)}}if(32&o)return Cu(i,n)()||Ti(n[i.index]);{const d=yc(n,i);return null!==d?Array.isArray(d)?d[0]:tu(bu(n[Bt]),d):tu(n,i.next)}}return null}function yc(n,i){return null!==i?n[Bt][ii].projection[i.projection]:null}function td(n,i){const o=Vn+n+1;if(o<i.length){const d=i[o],h=d[Cn].firstChild;if(null!==h)return tu(d,h)}return i[Et]}function nu(n,i,o,d,h,v,D){for(;null!=o;){const F=d[o.index],U=o.type;if(D&&0===i&&(F&&In(Ti(F),d),o.flags|=2),32!=(32&o.flags))if(8&U)nu(n,i,o.child,d,h,v,!1),Qa(i,n,h,F,v);else if(32&U){const Z=Cu(o,d);let ce;for(;ce=Z();)Qa(i,n,h,ce,v);Qa(i,n,h,F,v)}else 16&U?Of(n,i,d,o,h,v):Qa(i,n,h,F,v);o=D?o.projectionNext:o.next}}function ru(n,i,o,d,h,v){nu(o,d,n.firstChild,i,h,v,!1)}function Of(n,i,o,d,h,v){const D=o[Bt],U=D[ii].projection[d.projection];if(Array.isArray(U))for(let Z=0;Z<U.length;Z++)Qa(i,n,h,U[Z],v);else nu(n,i,U,D[li],h,v,!0)}function nd(n,i,o){""===o?n.removeAttribute(i,"class"):n.setAttribute(i,"class",o)}function kc(n,i,o){const{mergedAttrs:d,classes:h,styles:v}=o;null!==d&&Gi(n,i,d),null!==h&&nd(n,i,h),null!==v&&function Xs(n,i,o){n.setAttribute(i,"style",o)}(n,i,v)}function id(n){rd=n}function ad(n){var i;return(null===(i=function la(){if(void 0===od&&(od=null,Tn.trustedTypes))try{od=Tn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return od}())||void 0===i?void 0:i.createScriptURL(n))||n}class iu{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Dt})`}}function ka(n){return n instanceof iu?n.changingThisBreaksApplicationSecurity:n}function Ru(n,i){const o=function Nf(n){return n instanceof iu&&n.getTypeName()||null}(n);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see ${Dt})`)}return o===i}const ud=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Os=(()=>((Os=Os||{})[Os.NONE=0]="NONE",Os[Os.HTML=1]="HTML",Os[Os.STYLE=2]="STYLE",Os[Os.SCRIPT=3]="SCRIPT",Os[Os.URL=4]="URL",Os[Os.RESOURCE_URL=5]="RESOURCE_URL",Os))();function Ql(n){const i=Yd();return i?i.sanitize(Os.URL,n)||"":Ru(n,"URL")?ka(n):function dd(n){return(n=String(n)).match(ud)?n:"unsafe:"+n}(de(n))}function lu(n){const i=Yd();if(i)return ad(i.sanitize(Os.RESOURCE_URL,n)||"");if(Ru(n,"ResourceURL"))return ad(ka(n));throw new Re(904,!1)}function Lc(n,i,o){return function Nh(n,i){return"src"===i&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===i&&("base"===n||"link"===n)?lu:Ql}(i,o)(n)}function Yd(){const n=R();return n&&n[qe]}const gd=new Mr("ENVIRONMENT_INITIALIZER"),Fh=new Mr("INJECTOR",-1),Zd=new Mr("INJECTOR_DEF_TYPES");class cu{get(i,o=Jr){if(o===Jr){const d=new Error(`NullInjectorError: No provider for ${Ue(i)}!`);throw d.name="NullInjectorError",d}return o}}function Ff(n){return{\u0275providers:n}}function kg(...n){return{\u0275providers:Ss(0,n),\u0275fromNgModule:!0}}function Ss(n,...i){const o=[],d=new Set;let h;return Or(i,v=>{const D=v;Bf(D,o,[],d)&&(h||(h=[]),h.push(D))}),void 0!==h&&Lf(h,o),o}function Lf(n,i){for(let o=0;o<n.length;o++){const{providers:h}=n[o];fl(h,v=>{i.push(v)})}}function Bf(n,i,o,d){if(!(n=ve(n)))return!1;let h=null,v=En(n);const D=!v&&Un(n);if(v||D){if(D&&!D.standalone)return!1;h=n}else{const U=n.ngModule;if(v=En(U),!v)return!1;h=U}const F=d.has(h);if(D){if(F)return!1;if(d.add(h),D.dependencies){const U="function"==typeof D.dependencies?D.dependencies():D.dependencies;for(const Z of U)Bf(Z,i,o,d)}}else{if(!v)return!1;{if(null!=v.imports&&!F){let Z;d.add(h);try{Or(v.imports,ce=>{Bf(ce,i,o,d)&&(Z||(Z=[]),Z.push(ce))})}finally{}void 0!==Z&&Lf(Z,i)}if(!F){const Z=ts(h)||(()=>new h);i.push({provide:h,useFactory:Z,deps:Ye},{provide:Zd,useValue:h,multi:!0},{provide:gd,useValue:()=>Pr(h),multi:!0})}const U=v.providers;null==U||F||fl(U,ce=>{i.push(ce)})}}return h!==n&&void 0!==n.providers}function fl(n,i){for(let o of n)He(o)&&(o=o.\u0275providers),Array.isArray(o)?fl(o,i):i(o)}const Lh=xe({provide:String,useValue:xe});function Uf(n){return null!==n&&"object"==typeof n&&Lh in n}function Ou(n){return"function"==typeof n}const Bh=new Mr("Set Injector scope."),Xd={},yd={};let ku;function Bc(){return void 0===ku&&(ku=new cu),ku}class $c{}class $h extends $c{get destroyed(){return this._destroyed}constructor(i,o,d,h){super(),this.parent=o,this.source=d,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Hf(i,D=>this.processProvider(D)),this.records.set(Fh,Uc(void 0,this)),h.has("environment")&&this.records.set($c,Uc(void 0,this));const v=this.records.get(Bh);null!=v&&"string"==typeof v.value&&this.scopes.add(v.value),this.injectorDefTypes=new Set(this.get(Zd.multi,Ye,cn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();for(const i of this._onDestroyHooks)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(i){this._onDestroyHooks.push(i)}runInContext(i){this.assertNotDestroyed();const o=Yn(this),d=Br(void 0);try{return i()}finally{Yn(o),Br(d)}}get(i,o=Jr,d=cn.Default){this.assertNotDestroyed(),d=Ge(d);const h=Yn(this),v=Br(void 0);try{if(!(d&cn.SkipSelf)){let F=this.records.get(i);if(void 0===F){const U=function Qd(n){return"function"==typeof n||"object"==typeof n&&n instanceof Mr}(i)&&ln(i);F=U&&this.injectableDefInScope(U)?Uc(Vf(i),Xd):null,this.records.set(i,F)}if(null!=F)return this.hydrate(i,F)}return(d&cn.Self?Bc():this.parent).get(i,o=d&cn.Optional&&o===Jr?null:o)}catch(D){if("NullInjectorError"===D.name){if((D[qr]=D[qr]||[]).unshift(Ue(i)),h)throw D;return function we(n,i,o,d){const h=n[qr];throw i[xi]&&h.unshift(i[xi]),n.message=function be(n,i,o,d=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==Ur?n.slice(2):n;let h=Ue(i);if(Array.isArray(i))h=i.map(Ue).join(" -> ");else if("object"==typeof i){let v=[];for(let D in i)if(i.hasOwnProperty(D)){let F=i[D];v.push(D+":"+("string"==typeof F?JSON.stringify(F):Ue(F)))}h=`{${v.join(", ")}}`}return`${o}${d?"("+d+")":""}[${h}]: ${n.replace(pi,"\n  ")}`}("\n"+n.message,h,o,d),n[ni]=h,n[qr]=null,n}(D,i,"R3InjectorError",this.source)}throw D}finally{Br(v),Yn(h)}}resolveInjectorInitializers(){const i=Yn(this),o=Br(void 0);try{const d=this.get(gd.multi,Ye,cn.Self);for(const h of d)h()}finally{Yn(i),Br(o)}}toString(){const i=[],o=this.records;for(const d of o.keys())i.push(Ue(d));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Re(205,!1)}processProvider(i){let o=Ou(i=ve(i))?i:ve(i&&i.provide);const d=function jp(n){return Uf(n)?Uc(void 0,n.useValue):Uc(Ng(n),Xd)}(i);if(Ou(i)||!0!==i.multi)this.records.get(o);else{let h=this.records.get(o);h||(h=Uc(void 0,Xd,!0),h.factory=()=>Qe(h.multi),this.records.set(o,h)),o=i,h.multi.push(i)}this.records.set(o,d)}hydrate(i,o){return o.value===Xd&&(o.value=yd,o.value=o.factory()),"object"==typeof o.value&&o.value&&function Nu(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(i){if(!i.providedIn)return!1;const o=ve(i.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function Vf(n){const i=ln(n),o=null!==i?i.factory:ts(n);if(null!==o)return o;if(n instanceof Mr)throw new Re(204,!1);if(n instanceof Function)return function jf(n){const i=n.length;if(i>0)throw Es(i,"?"),new Re(204,!1);const o=function wn(n){const i=n&&(n[lr]||n[Xn]);return i?(function nn(n){if(n.hasOwnProperty("name"))return n.name;(""+n).match(/^function\s*([^\s(]+)/)}(n),i):null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new Re(204,!1)}function Ng(n,i,o){let d;if(Ou(n)){const h=ve(n);return ts(h)||Vf(h)}if(Uf(n))d=()=>ve(n.useValue);else if(function Up(n){return!(!n||!n.useFactory)}(n))d=()=>n.useFactory(...Qe(n.deps||[]));else if(function md(n){return!(!n||!n.useExisting)}(n))d=()=>Pr(ve(n.useExisting));else{const h=ve(n&&(n.useClass||n.provide));if(!function Hp(n){return!!n.deps}(n))return ts(h)||Vf(h);d=()=>new h(...Qe(n.deps))}return d}function Uc(n,i,o=!1){return{factory:n,value:i,multi:o?[]:void 0}}function Hf(n,i){for(const o of n)Array.isArray(o)?Hf(o,i):o&&He(o)?Hf(o.\u0275providers,i):i(o)}class zp{}class Jd{}class bc{resolveComponentFactory(i){throw function Vc(n){const i=Error(`No component factory found for ${Ue(n)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=n,i}(i)}}let Jl=(()=>{class n{}return n.NULL=new bc,n})();function vd(){return Fl(dn(),R())}function Fl(n,i){return new Ll(ns(n,i))}let Ll=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=vd,n})();function uu(n){return n instanceof Ll?n.nativeElement:n}class _d{}let Wp=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function pl(){const n=R(),o=zi(dn().index,n);return(hr(o)?o:n)[ae]}(),n})(),Kp=(()=>{class n{}return n.\u0275prov=Tt({token:n,providedIn:"root",factory:()=>null}),n})();class qp{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const Uh=new qp("15.2.7"),Vh={},Na="ngOriginalError";function Ed(n){return n[Na]}class ec{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i);this._console.error("ERROR",i),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(i){let o=i&&Ed(i);for(;o&&Ed(o);)o=Ed(o);return o||null}}function tc(n){return n instanceof Function?n():n}function zh(n,i,o){let d=n.length;for(;;){const h=n.indexOf(i,o);if(-1===h)return h;if(0===h||n.charCodeAt(h-1)<=32){const v=i.length;if(h+v===d||n.charCodeAt(h+v)<=32)return h}o=h+1}}const Kf="ng-template";function Vg(n,i,o){let d=0,h=!0;for(;d<n.length;){let v=n[d++];if("string"==typeof v&&h){const D=n[d++];if(o&&"class"===v&&-1!==zh(D.toLowerCase(),i,0))return!0}else{if(1===v){for(;d<n.length&&"string"==typeof(v=n[d++]);)if(v.toLowerCase()===i)return!0;return!1}"number"==typeof v&&(h=!1)}}return!1}function Gh(n){return 4===n.type&&n.value!==Kf}function Yp(n,i,o){return i===(4!==n.type||o?n.value:Kf)}function qf(n,i,o){let d=4;const h=n.attrs||[],v=function nh(n){for(let i=0;i<n.length;i++)if(ra(n[i]))return i;return n.length}(h);let D=!1;for(let F=0;F<i.length;F++){const U=i[F];if("number"!=typeof U){if(!D)if(4&d){if(d=2|1&d,""!==U&&!Yp(n,U,o)||""===U&&1===i.length){if(gl(d))return!1;D=!0}}else{const Z=8&d?U:i[++F];if(8&d&&null!==n.attrs){if(!Vg(n.attrs,Z,o)){if(gl(d))return!1;D=!0}continue}const Ae=th(8&d?"class":U,h,Gh(n),o);if(-1===Ae){if(gl(d))return!1;D=!0;continue}if(""!==Z){let at;at=Ae>v?"":h[Ae+1].toLowerCase();const Ft=8&d?at:null;if(Ft&&-1!==zh(Ft,Z,0)||2&d&&Z!==at){if(gl(d))return!1;D=!0}}}}else{if(!D&&!gl(d)&&!gl(U))return!1;if(D&&gl(U))continue;D=!1,d=U|1&d}}return gl(d)||D}function gl(n){return 0==(1&n)}function th(n,i,o,d){if(null===i)return-1;let h=0;if(d||!o){let v=!1;for(;h<i.length;){const D=i[h];if(D===n)return h;if(3===D||6===D)v=!0;else{if(1===D||2===D){let F=i[++h];for(;"string"==typeof F;)F=i[++h];continue}if(4===D)break;if(0===D){h+=4;continue}}h+=v?1:2}return-1}return function Lu(n,i){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const d=n[o];if("number"==typeof d)return-1;if(d===i)return o;o++}return-1}(i,n)}function jc(n,i,o=!1){for(let d=0;d<i.length;d++)if(qf(n,i[d],o))return!0;return!1}function jg(n,i){e:for(let o=0;o<i.length;o++){const d=i[o];if(n.length===d.length){for(let h=0;h<n.length;h++)if(n[h]!==d[h])continue e;return!0}}return!1}function Bu(n,i){return n?":not("+i.trim()+")":i}function Fa(n){let i=n[0],o=1,d=2,h="",v=!1;for(;o<n.length;){let D=n[o];if("string"==typeof D)if(2&d){const F=n[++o];h+="["+D+(F.length>0?'="'+F+'"':"")+"]"}else 8&d?h+="."+D:4&d&&(h+=" "+D);else""!==h&&!gl(D)&&(i+=Bu(v,h),h=""),d=D,v=v||!gl(d);o++}return""!==h&&(i+=Bu(v,h)),i}const Wr={};function rh(n){Dc(O(),R(),Yi()+n,!1)}function Dc(n,i,o,d){if(!d)if(3==(3&i[dr])){const v=n.preOrderCheckHooks;null!==v&&Cl(i,v,o)}else{const v=n.preOrderHooks;null!==v&&L(i,v,0,o)}Ni(o)}function qh(n,i=null,o=null,d){const h=Qp(n,i,o,d);return h.resolveInjectorInitializers(),h}function Qp(n,i=null,o=null,d,h=new Set){const v=[o||Ye,kg(n)];return d=d||("object"==typeof n?void 0:Ue(n)),new $h(v,i||Bc(),d||null,h)}let Co=(()=>{class n{static create(o,d){if(Array.isArray(o))return qh({name:""},d,o,"");{var h;const v=null!==(h=o.name)&&void 0!==h?h:"";return qh({name:v},o.parent,o.providers,v)}}}return n.THROW_IF_NOT_FOUND=Jr,n.NULL=new cu,n.\u0275prov=Tt({token:n,providedIn:"any",factory:()=>Pr(Fh)}),n.__NG_ELEMENT_ID__=-1,n})();function Vu(n,i=cn.Default){const o=R();return null===o?Pr(n,i):Fn(dn(),o,ve(n),i)}function np(){throw new Error("invalid")}function Xg(n,i){const o=n.contentQueries;if(null!==o)for(let d=0;d<o.length;d+=2){const v=o[d+1];if(-1!==v){const D=n.data[v];_o(o[d]),D.contentQueries(2,i[v],v)}}}function oh(n,i,o,d,h,v,D,F,U,Z,ce){const Ae=i.blueprint.slice();return Ae[ri]=h,Ae[dr]=76|d,(null!==ce||n&&1024&n[dr])&&(Ae[dr]|=1024),ga(Ae),Ae[li]=Ae[kt]=n,Ae[re]=o,Ae[it]=D||n&&n[it],Ae[ae]=F||n&&n[ae],Ae[qe]=U||n&&n[qe]||null,Ae[_e]=Z||n&&n[_e]||null,Ae[ii]=v,Ae[Gn]=function Za(){return Jc++}(),Ae[gi]=ce,Ae[Bt]=2==i.type?n[Bt]:Ae,Ae}function ah(n,i,o,d,h){let v=n.data[i];if(null===v)v=function rp(n,i,o,d,h){const v=jr(),D=fs(),U=n.data[i]=function Jm(n,i,o,d,h,v){return{type:o,index:d,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:v,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,D?v:v&&v.parent,o,i,d,h);return null===n.firstChild&&(n.firstChild=U),null!==v&&(D?null==v.child&&null!==U.parent&&(v.child=U):null===v.next&&(v.next=U,U.prev=v)),U}(n,i,o,d,h),function El(){return pr.lFrame.inI18n}()&&(v.flags|=32);else if(64&v.type){v.type=o,v.value=d,v.attrs=h;const D=function yi(){const n=pr.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}();v.injectorIndex=null===D?-1:D.injectorIndex}return Si(v,!0),v}function tf(n,i,o,d){if(0===o)return-1;const h=i.length;for(let v=0;v<o;v++)i.push(d),n.blueprint.push(d),n.data.push(null);return h}function ip(n,i,o){na(i);try{const d=n.viewQuery;null!==d&&uf(1,d,o);const h=n.template;null!==h&&bd(n,i,h,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Xg(n,i),n.staticViewQueries&&uf(2,n.viewQuery,o);const v=n.components;null!==v&&function Jg(n,i){for(let o=0;o<i.length;o++)wa(n,i[o])}(i,v)}catch(d){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),d}finally{i[dr]&=-5,is()}}function sp(n,i,o,d){const h=i[dr];if(128!=(128&h)){na(i);try{ga(i),function sl(n){return pr.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&bd(n,i,o,2,d);const D=3==(3&h);if(D){const Z=n.preOrderCheckHooks;null!==Z&&Cl(i,Z,null)}else{const Z=n.preOrderHooks;null!==Z&&L(i,Z,0,null),X(i,0)}if(function cg(n){for(let i=bi(n);null!==i;i=Xa(i)){if(!i[tt])continue;const o=i[an];for(let d=0;d<o.length;d++){const h=o[d];512&h[dr]||ta(h[li],1),h[dr]|=512}}}(i),function sy(n){for(let i=bi(n);null!==i;i=Xa(i))for(let o=Vn;o<i.length;o++){const d=i[o],h=d[Cn];ea(d)&&sp(h,d,h.template,d[re])}}(i),null!==n.contentQueries&&Xg(n,i),D){const Z=n.contentCheckHooks;null!==Z&&Cl(i,Z)}else{const Z=n.contentHooks;null!==Z&&L(i,Z,1),X(i,1)}!function Zg(n,i){const o=n.hostBindingOpCodes;if(null!==o)try{for(let d=0;d<o.length;d++){const h=o[d];if(h<0)Ni(~h);else{const v=h,D=o[++d],F=o[++d];ja(D,v),F(2,i[v])}}}finally{Ni(-1)}}(n,i);const F=n.components;null!==F&&function Qg(n,i){for(let o=0;o<i.length;o++)Hu(n,i[o])}(i,F);const U=n.viewQuery;if(null!==U&&uf(2,U,d),D){const Z=n.viewCheckHooks;null!==Z&&Cl(i,Z)}else{const Z=n.viewHooks;null!==Z&&L(i,Z,2),X(i,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),i[dr]&=-41,512&i[dr]&&(i[dr]&=-513,ta(i[li],-1))}finally{is()}}}function bd(n,i,o,d,h){const v=Yi(),D=2&d;try{Ni(-1),D&&i.length>Jn&&Dc(n,i,Jn,!1),mi(D?2:0,h),o(d,h)}finally{Ni(v),mi(D?3:1,h)}}function ju(n,i,o){if(As(i)){const h=i.directiveEnd;for(let v=i.directiveStart;v<h;v++){const D=n.data[v];D.contentQueries&&D.contentQueries(1,o[v],v)}}}function nf(n,i,o){W()&&(function im(n,i,o,d){const h=o.directiveStart,v=o.directiveEnd;fo(o)&&function cf(n,i,o){const d=ns(i,n),h=ng(o),v=n[it],D=hu(n,oh(n,h,null,o.onPush?32:16,d,i,v,v.createRenderer(d,o),null,null,null));n[i.index]=D}(i,o,n.data[h+o.componentOffset]),n.firstCreatePass||Wl(o,i),In(d,i);const D=o.initialInputs;for(let F=h;F<v;F++){const U=n.data[F],Z=Ro(i,n,F,o);In(Z,i),null!==D&&sm(0,F-h,Z,U,0,D),ki(U)&&(zi(o.index,i)[re]=Ro(i,n,F,o))}}(n,i,o,ns(o,i)),64==(64&o.flags)&&lf(n,i,o))}function lh(n,i,o=ns){const d=i.localNames;if(null!==d){let h=i.index+1;for(let v=0;v<d.length;v+=2){const D=d[v+1],F=-1===D?o(i,n):n[D];n[h++]=F}}}function ng(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=ml(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):i}function ml(n,i,o,d,h,v,D,F,U,Z){const ce=Jn+d,Ae=ce+h,at=function em(n,i){const o=[];for(let d=0;d<i;d++)o.push(d<n?null:Wr);return o}(ce,Ae),Ft="function"==typeof Z?Z():Z;return at[Cn]={type:n,blueprint:at,template:o,queries:null,viewQuery:F,declTNode:i,data:at.slice().fill(null,ce),bindingStartIndex:ce,expandoStartIndex:Ae,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof v?v():v,pipeRegistry:"function"==typeof D?D():D,firstChild:null,schemas:U,consts:Ft,incompleteFirstPass:!1}}function rf(n,i,o,d){const h=df(i);null===o?h.push(d):(h.push(o),n.firstCreatePass&&hf(n).push(d,h.length-1))}function sf(n,i,o,d){for(let h in n)if(n.hasOwnProperty(h)){o=null===o?{}:o;const v=n[h];null===d?ig(o,i,h,v):d.hasOwnProperty(h)&&ig(o,i,d[h],v)}return o}function ig(n,i,o,d){n.hasOwnProperty(o)?n[o].push(i,d):n[o]=[i,d]}function La(n,i,o,d,h,v,D,F){const U=ns(i,o);let ce,Z=i.inputs;!F&&null!=Z&&(ce=Z[d])?(Sd(n,o,ce,d,h),fo(i)&&function ch(n,i){const o=zi(i,n);16&o[dr]||(o[dr]|=32)}(o,i.index)):3&i.type&&(d=function sg(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(d),h=null!=D?D(h,i.value||"",d):h,v.setProperty(U,d,h))}function ap(n,i,o,d){if(W()){const h=null===d?null:{"":-1},v=function ty(n,i){const o=n.directiveRegistry;let d=null,h=null;if(o)for(let D=0;D<o.length;D++){const F=o[D];if(jc(i,F.selectors,!1))if(d||(d=[]),ki(F))if(null!==F.findHostDirectiveDefs){const U=[];h=h||new Map,F.findHostDirectiveDefs(F,U,h),d.unshift(...U,F),ag(n,i,U.length)}else d.unshift(F),ag(n,i,0);else{var v;h=h||new Map,null===(v=F.findHostDirectiveDefs)||void 0===v||v.call(F,F,d,h),d.push(F)}}return null===d?null:[d,h]}(n,o);let D,F;null===v?D=F=null:[D,F]=v,null!==D&&af(n,i,o,D,h,F),h&&function Ba(n,i,o){if(i){const d=n.localNames=[];for(let h=0;h<i.length;h+=2){const v=o[i[h+1]];if(null==v)throw new Re(-301,!1);d.push(i[h],v)}}}(o,d,h)}o.mergedAttrs=Gs(o.mergedAttrs,o.attrs)}function af(n,i,o,d,h,v){for(let Ae=0;Ae<d.length;Ae++)sc(Wl(o,i),n,d[Ae].type);!function ry(n,i,o){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+o,n.providerIndexes=i}(o,n.data.length,d.length);for(let Ae=0;Ae<d.length;Ae++){const at=d[Ae];at.providersResolver&&at.providersResolver(at)}let D=!1,F=!1,U=tf(n,i,d.length,null);for(let Ae=0;Ae<d.length;Ae++){const at=d[Ae];o.mergedAttrs=Gs(o.mergedAttrs,at.hostAttrs),lg(n,o,i,U,at),ny(U,at,h),null!==at.contentQueries&&(o.flags|=4),(null!==at.hostBindings||null!==at.hostAttrs||0!==at.hostVars)&&(o.flags|=64);const Ft=at.type.prototype;var Z,ce;!D&&(Ft.ngOnChanges||Ft.ngOnInit||Ft.ngDoCheck)&&((null!==(Z=n.preOrderHooks)&&void 0!==Z?Z:n.preOrderHooks=[]).push(o.index),D=!0),F||!Ft.ngOnChanges&&!Ft.ngDoCheck||((null!==(ce=n.preOrderCheckHooks)&&void 0!==ce?ce:n.preOrderCheckHooks=[]).push(o.index),F=!0),U++}!function tm(n,i,o){const h=i.directiveEnd,v=n.data,D=i.attrs,F=[];let U=null,Z=null;for(let ce=i.directiveStart;ce<h;ce++){const Ae=v[ce],at=o?o.get(Ae):null,un=at?at.outputs:null;U=sf(Ae.inputs,ce,U,at?at.inputs:null),Z=sf(Ae.outputs,ce,Z,un);const An=null===U||null===D||Gh(i)?null:iy(U,ce,D);F.push(An)}null!==U&&(U.hasOwnProperty("class")&&(i.flags|=8),U.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=F,i.inputs=U,i.outputs=Z}(n,o,v)}function lf(n,i,o){const d=o.directiveStart,h=o.directiveEnd,v=o.index,D=function ps(){return pr.lFrame.currentDirectiveIndex}();try{Ni(v);for(let F=d;F<h;F++){const U=n.data[F],Z=i[F];Ms(F),(null!==U.hostBindings||0!==U.hostVars||null!==U.hostAttrs)&&og(U,Z)}}finally{Ni(-1),Ms(D)}}function og(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function ag(n,i,o){var d;i.componentOffset=o,(null!==(d=n.components)&&void 0!==d?d:n.components=[]).push(i.index)}function ny(n,i,o){if(o){if(i.exportAs)for(let d=0;d<i.exportAs.length;d++)o[i.exportAs[d]]=n;ki(i)&&(o[""]=n)}}function lg(n,i,o,d,h){n.data[d]=h;const v=h.factory||(h.factory=ts(h.type)),D=new Vt(v,ki(h),Vu);n.blueprint[d]=D,o[d]=D,function rm(n,i,o,d,h){const v=h.hostBindings;if(v){let D=n.hostBindingOpCodes;null===D&&(D=n.hostBindingOpCodes=[]);const F=~i.index;(function ey(n){let i=n.length;for(;i>0;){const o=n[--i];if("number"==typeof o&&o<0)return o}return 0})(D)!=F&&D.push(F),D.push(o,d,v)}}(n,i,d,tf(n,o,h.hostVars,Wr),h)}function ic(n,i,o,d,h,v){const D=ns(n,i);!function lp(n,i,o,d,h,v,D){if(null==v)n.removeAttribute(i,h,o);else{const F=null==D?de(v):D(v,d||"",h);n.setAttribute(i,h,F,o)}}(i[ae],D,v,n.value,o,d,h)}function sm(n,i,o,d,h,v){const D=v[i];if(null!==D){const F=d.setInput;for(let U=0;U<D.length;){const Z=D[U++],ce=D[U++],Ae=D[U++];null!==F?d.setInput(o,Ae,Z,ce):o[ce]=Ae}}}function iy(n,i,o){let d=null,h=0;for(;h<o.length;){const v=o[h];if(0!==v)if(5!==v){if("number"==typeof v)break;if(n.hasOwnProperty(v)){null===d&&(d=[]);const D=n[v];for(let F=0;F<D.length;F+=2)if(D[F]===i){d.push(v,D[F+1],o[h+1]);break}}h+=2}else h+=2;else h+=4}return d}function om(n,i,o,d){return[n,!0,!1,i,null,0,d,o,null,null]}function Hu(n,i){const o=zi(i,n);if(ea(o)){const d=o[Cn];48&o[dr]?sp(d,o,d.template,o[re]):o[Xi]>0&&Wo(o)}}function Wo(n){for(let d=bi(n);null!==d;d=Xa(d))for(let h=Vn;h<d.length;h++){const v=d[h];if(ea(v))if(512&v[dr]){const D=v[Cn];sp(D,v,D.template,v[re])}else v[Xi]>0&&Wo(v)}const o=n[Cn].components;if(null!==o)for(let d=0;d<o.length;d++){const h=zi(o[d],n);ea(h)&&h[Xi]>0&&Wo(h)}}function wa(n,i){const o=zi(i,n),d=o[Cn];(function Dd(n,i){for(let o=i.length;o<n.blueprint.length;o++)i.push(n.blueprint[o])})(d,o),ip(d,o,o[re])}function hu(n,i){return n[Ke]?n[Nt][Dr]=i:n[Ke]=i,n[Nt]=i,i}function uh(n){for(;n;){n[dr]|=32;const i=bu(n);if(Hi(n)&&!i)return n;n=i}return null}function Td(n,i,o,d=!0){const h=i[it];h.begin&&h.begin();try{sp(n,i,n.template,o)}catch(D){throw d&&up(i,D),D}finally{h.end&&h.end()}}function uf(n,i,o){_o(0),i(n,o)}function df(n){return n[Oi]||(n[Oi]=[])}function hf(n){return n.cleanup||(n.cleanup=[])}function up(n,i){const o=n[_e],d=o?o.get(ec,null):null;d&&d.handleError(i)}function Sd(n,i,o,d,h){for(let v=0;v<o.length;){const D=o[v++],F=o[v++],U=i[D],Z=n.data[D];null!==Z.setInput?Z.setInput(U,h,d,F):U[F]=h}}function ff(n,i,o){let d=o?n.styles:null,h=o?n.classes:null,v=0;if(null!==i)for(let D=0;D<i.length;D++){const F=i[D];"number"==typeof F?v=F:1==v?h=je(h,F):2==v&&(d=je(d,F+": "+i[++D]+";"))}o?n.styles=d:n.stylesWithoutHost=d,o?n.classes=h:n.classesWithoutHost=h}function dh(n,i,o,d,h=!1){for(;null!==o;){const v=i[o.index];if(null!==v&&d.push(Ti(v)),xr(v))for(let F=Vn;F<v.length;F++){const U=v[F],Z=U[Cn].firstChild;null!==Z&&dh(U[Cn],U,Z,d)}const D=o.type;if(8&D)dh(n,i,o.child,d);else if(32&D){const F=Cu(o,i);let U;for(;U=F();)d.push(U)}else if(16&D){const F=yc(i,o);if(Array.isArray(F))d.push(...F);else{const U=bu(i[Bt]);dh(U[Cn],U,F,d,!0)}}o=h?o.projectionNext:o.next}return d}class pf{get rootNodes(){const i=this._lView,o=i[Cn];return dh(o,i,o.firstChild,[])}constructor(i,o){this._lView=i,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[re]}set context(i){this._lView[re]=i}get destroyed(){return 128==(128&this._lView[dr])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[li];if(xr(i)){const o=i[qt],d=o?o.indexOf(this):-1;d>-1&&(Ju(i,d),wi(o,d))}this._attachedToViewContainer=!1}$d(this._lView[Cn],this._lView)}onDestroy(i){rf(this._lView[Cn],this._lView,null,i)}markForCheck(){uh(this._cdRefInjectingView||this._lView)}detach(){this._lView[dr]&=-65}reattach(){this._lView[dr]|=64}detectChanges(){Td(this._lView[Cn],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Re(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Rh(n,i){ru(n,i,i[ae],2,null,null)}(this._lView[Cn],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Re(902,!1);this._appRef=i}}class dp extends pf{constructor(i){super(i),this._view=i}detectChanges(){const i=this._view;Td(i[Cn],i,i[re],!1)}checkNoChanges(){}get context(){return null}}class hh extends Jl{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=Un(i);return new Ad(o,this.ngModule)}}function gf(n){const i=[];for(let o in n)n.hasOwnProperty(o)&&i.push({propName:n[o],templateName:o});return i}class fh{constructor(i,o){this.injector=i,this.parentInjector=o}get(i,o,d){d=Ge(d);const h=this.injector.get(i,Vh,d);return h!==Vh||o===Vh?h:this.parentInjector.get(i,o,d)}}class Ad extends Jd{get inputs(){return gf(this.componentDef.inputs)}get outputs(){return gf(this.componentDef.outputs)}constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=function Zp(n){return n.map(Fa).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}create(i,o,d,h){var v;let D=(h=h||this.ngModule)instanceof $c?h:null===(v=h)||void 0===v?void 0:v.injector;D&&null!==this.componentDef.getStandaloneInjector&&(D=this.componentDef.getStandaloneInjector(D)||D);const F=D?new fh(i,D):i,U=F.get(_d,null);if(null===U)throw new Re(407,!1);const Z=F.get(Kp,null),ce=U.createRenderer(null,this.componentDef),Ae=this.componentDef.selectors[0][0]||"div",at=d?function rg(n,i,o){return n.selectRootElement(i,o===ot.ShadowDom)}(ce,d,this.componentDef.encapsulation):Pc(ce,Ae,function am(n){const i=n.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(Ae)),Ft=this.componentDef.onPush?288:272,un=ml(0,null,null,1,0,null,null,null,null,null),An=oh(null,un,null,Ft,null,null,U,ce,Z,F,null);let qn,_r;na(An);try{const zr=this.componentDef;let _n,ai=null;zr.findHostDirectiveDefs?(_n=[],ai=new Map,zr.findHostDirectiveDefs(zr,_n,ai),_n.push(zr)):_n=[zr];const eo=function cm(n,i){const o=n[Cn],d=Jn;return n[d]=i,ah(o,d,2,"#host",null)}(An,at),Yo=function ug(n,i,o,d,h,v,D,F){const U=h[Cn];!function ay(n,i,o,d){for(const h of n)i.mergedAttrs=Gs(i.mergedAttrs,h.hostAttrs);null!==i.mergedAttrs&&(ff(i,i.mergedAttrs,!0),null!==o&&kc(d,o,i))}(d,n,i,D);const Z=v.createRenderer(i,o),ce=oh(h,ng(o),null,o.onPush?32:16,h[n.index],n,v,Z,F||null,null,null);return U.firstCreatePass&&ag(U,n,d.length-1),hu(h,ce),h[n.index]=ce}(eo,at,zr,_n,An,U,ce);_r=Rs(un,Jn),at&&function ly(n,i,o,d){if(d)Gi(n,o,["ng-version",Uh.full]);else{const{attrs:h,classes:v}=function Kh(n){const i=[],o=[];let d=1,h=2;for(;d<n.length;){let v=n[d];if("string"==typeof v)2===h?""!==v&&i.push(v,n[++d]):8===h&&o.push(v);else{if(!gl(h))break;h=v}d++}return{attrs:i,classes:o}}(i.selectors[0]);h&&Gi(n,o,h),v&&v.length>0&&nd(n,o,v.join(" "))}}(ce,zr,at,d),void 0!==o&&function hg(n,i,o){const d=n.projection=[];for(let h=0;h<i.length;h++){const v=o[h];d.push(null!=v?Array.from(v):null)}}(_r,this.ngContentSelectors,o),qn=function dg(n,i,o,d,h,v){const D=dn(),F=h[Cn],U=ns(D,h);af(F,h,D,o,null,d);for(let ce=0;ce<o.length;ce++)In(Ro(h,F,D.directiveStart+ce,D),h);lf(F,h,D),U&&In(U,h);const Z=Ro(h,F,D.directiveStart+D.componentOffset,D);if(n[re]=h[re]=Z,null!==v)for(const ce of v)ce(Z,i);return ju(F,D,n),Z}(Yo,zr,_n,ai,An,[cy]),ip(un,An,null)}finally{is()}return new lm(this.componentType,qn,Fl(_r,An),An,_r)}}class lm extends zp{constructor(i,o,d,h,v){super(),this.location=d,this._rootLView=h,this._tNode=v,this.instance=o,this.hostView=this.changeDetectorRef=new dp(h),this.componentType=i}setInput(i,o){const d=this._tNode.inputs;let h;if(null!==d&&(h=d[i])){const v=this._rootLView;Sd(v[Cn],v,h,i,o),uh(zi(this._tNode.index,v))}}get injector(){return new ac(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function cy(){const n=dn();zl(R()[Cn],n)}function fp(n){let i=function hp(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const d=[n];for(;i;){let h;if(ki(n))h=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new Re(903,!1);h=i.\u0275dir}if(h){if(o){d.push(h);const D=n;D.inputs=u(n.inputs),D.declaredInputs=u(n.declaredInputs),D.outputs=u(n.outputs);const F=h.hostBindings;F&&p(n,F);const U=h.viewQuery,Z=h.contentQueries;if(U&&a(n,U),Z&&l(n,Z),ye(n.inputs,h.inputs),ye(n.declaredInputs,h.declaredInputs),ye(n.outputs,h.outputs),ki(h)&&h.data.animation){const ce=n.data;ce.animation=(ce.animation||[]).concat(h.data.animation)}}const v=h.features;if(v)for(let D=0;D<v.length;D++){const F=v[D];F&&F.ngInherit&&F(n),F===fp&&(o=!1)}}i=Object.getPrototypeOf(i)}!function fg(n){let i=0,o=null;for(let d=n.length-1;d>=0;d--){const h=n[d];h.hostVars=i+=h.hostVars,h.hostAttrs=Gs(h.hostAttrs,o=Gs(o,h.hostAttrs))}}(d)}function u(n){return n===gn?{}:n===Ye?[]:n}function a(n,i){const o=n.viewQuery;n.viewQuery=o?(d,h)=>{i(d,h),o(d,h)}:i}function l(n,i){const o=n.contentQueries;n.contentQueries=o?(d,h,v)=>{i(d,h,v),o(d,h,v)}:i}function p(n,i){const o=n.hostBindings;n.hostBindings=o?(d,h)=>{i(d,h),o(d,h)}:i}function Bn(n){return!!ho(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function ho(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Ui(n,i,o){return n[i]=o}function bo(n,i,o){return!Object.is(n[i],o)&&(n[i]=o,!0)}function gh(n,i,o,d){const h=R();return bo(h,So(),i)&&(O(),ic(si(),h,n,i,o,d)),gh}function yf(n,i,o,d){return bo(n,So(),o)?i+de(o)+d:Wr}function sv(n,i,o,d,h,v,D,F){const U=R(),Z=O(),ce=n+Jn,Ae=Z.firstCreatePass?function hy(n,i,o,d,h,v,D,F,U){const Z=i.consts,ce=ah(i,n,4,D||null,_s(Z,F));ap(i,o,ce,_s(Z,U)),zl(i,ce);const Ae=ce.tView=ml(2,ce,d,h,v,i.directiveRegistry,i.pipeRegistry,null,i.schemas,Z);return null!==i.queries&&(i.queries.template(i,ce),Ae.queries=i.queries.embeddedTView(ce)),ce}(ce,Z,U,i,o,d,h,v,D):Z.data[ce];Si(Ae,!1);const at=U[ae].createComment("");Su(Z,U,at,Ae),In(at,U),hu(U,U[ce]=om(at,U,at,Ae)),$i(Ae)&&nf(Z,U,Ae),null!=D&&lh(U,Ae,F)}function pg(n,i,o){const d=R();return bo(d,So(),i)&&La(O(),si(),d,n,i,d[ae],o,!1),pg}function gg(n,i,o,d,h){const D=h?"class":"style";Sd(n,o,i.inputs[D],D,d)}function xd(n,i,o,d){const h=R(),v=O(),D=Jn+n,F=h[ae],U=v.firstCreatePass?function py(n,i,o,d,h,v){const D=i.consts,U=ah(i,n,2,d,_s(D,h));return ap(i,o,U,_s(D,v)),null!==U.attrs&&ff(U,U.attrs,!1),null!==U.mergedAttrs&&ff(U,U.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,U),U}(D,v,h,i,o,d):v.data[D],Z=h[D]=Pc(F,i,function Hl(){return pr.lFrame.currentNamespace}()),ce=$i(U);return Si(U,!0),kc(F,Z,U),32!=(32&U.flags)&&Su(v,h,Z,U),0===function b(){return pr.lFrame.elementDepthCount}()&&In(Z,h),function q(){pr.lFrame.elementDepthCount++}(),ce&&(nf(v,h,U),ju(v,U,h)),null!==d&&lh(h,U),xd}function mg(){let n=dn();fs()?zs():(n=n.parent,Si(n,!1));const i=n;!function T(){pr.lFrame.elementDepthCount--}();const o=O();return o.firstCreatePass&&(zl(o,n),As(n)&&o.queries.elementEnd(n)),null!=i.classesWithoutHost&&function Lr(n){return 0!=(8&n.flags)}(i)&&gg(o,i,R(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function wr(n){return 0!=(16&n.flags)}(i)&&gg(o,i,R(),i.stylesWithoutHost,!1),mg}function yg(n,i,o,d){return xd(n,i,o,d),mg(),yg}function vp(n,i,o){const d=R(),h=O(),v=n+Jn,D=h.firstCreatePass?function w_(n,i,o,d,h){const v=i.consts,D=_s(v,d),F=ah(i,n,8,"ng-container",D);return null!==D&&ff(F,D,!0),ap(i,o,F,_s(v,h)),null!==i.queries&&i.queries.elementStart(i,F),F}(v,h,d,i,o):h.data[v];Si(D,!0);const F=d[v]=d[ae].createComment("");return Su(h,d,F,D),In(F,d),$i(D)&&(nf(h,d,D),ju(h,D,d)),null!=o&&lh(d,D),vp}function zc(){let n=dn();const i=O();return fs()?zs():(n=n.parent,Si(n,!1)),i.firstCreatePass&&(zl(i,n),As(n)&&i.queries.elementEnd(n)),zc}function vg(n,i,o){return vp(n,i,o),zc(),vg}function ov(){return R()}function _g(n){return!!n&&"function"==typeof n.then}function av(n){return!!n&&"function"==typeof n.subscribe}const lv=av;function Eg(n,i,o,d){const h=R(),v=O(),D=dn();return function uv(n,i,o,d,h,v,D){const F=$i(d),Z=n.firstCreatePass&&hf(n),ce=i[re],Ae=df(i);let at=!0;if(3&d.type||D){const An=ns(d,i),qn=D?D(An):An,_r=Ae.length,zr=D?ai=>D(Ti(ai[d.index])):d.index;let _n=null;if(!D&&F&&(_n=function gy(n,i,o,d){const h=n.cleanup;if(null!=h)for(let v=0;v<h.length-1;v+=2){const D=h[v];if(D===o&&h[v+1]===d){const F=i[Oi],U=h[v+2];return F.length>U?F[U]:null}"string"==typeof D&&(v+=2)}return null}(n,i,h,d.index)),null!==_n)(_n.__ngLastListenerFn__||_n).__ngNextListenerFn__=v,_n.__ngLastListenerFn__=v,at=!1;else{v=dv(d,i,ce,v,!1);const ai=o.listen(qn,h,v);Ae.push(v,ai),Z&&Z.push(h,zr,_r,_r+1)}}else v=dv(d,i,ce,v,!1);const Ft=d.outputs;let un;if(at&&null!==Ft&&(un=Ft[h])){const An=un.length;if(An)for(let qn=0;qn<An;qn+=2){const eo=i[un[qn]][un[qn+1]].subscribe(v),Yo=Ae.length;Ae.push(v,eo),Z&&Z.push(h,d.index,Yo,-(Yo+1))}}}(v,h,h[ae],D,n,i,d),Eg}function pm(n,i,o,d){try{return mi(6,i,o),!1!==o(d)}catch(h){return up(n,h),!1}finally{mi(7,i,o)}}function dv(n,i,o,d,h){return function v(D){if(D===Function)return d;uh(n.componentOffset>-1?zi(n.index,i):i);let U=pm(i,o,d,D),Z=v.__ngNextListenerFn__;for(;Z;)U=pm(i,o,Z,D)&&U,Z=Z.__ngNextListenerFn__;return h&&!1===U&&(D.preventDefault(),D.returnValue=!1),U}}function gm(n=1){return function Ta(n){return(pr.lFrame.contextLView=function Ga(n,i){for(;n>0;)i=i[kt],n--;return i}(n,pr.lFrame.contextLView))[re]}(n)}function hv(n,i){let o=null;const d=function Wh(n){const i=n.attrs;if(null!=i){const o=i.indexOf(5);if(!(1&o))return i[o+1]}return null}(n);for(let h=0;h<i.length;h++){const v=i[h];if("*"!==v){if(null===d?jc(n,v,!0):jg(d,v))return h}else o=h}return o}function mm(n){const i=R()[Bt][ii];if(!i.projection){const d=i.projection=Es(n?n.length:1,null),h=d.slice();let v=i.child;for(;null!==v;){const D=n?hv(v,n):0;null!==D&&(h[D]?h[D].projectionNext=v:d[D]=v,h[D]=v),v=v.next}}}function my(n,i=0,o){const d=R(),h=O(),v=ah(h,Jn+n,16,null,o||null);null===v.projection&&(v.projection=i),zs(),32!=(32&v.flags)&&function Pf(n,i,o){Of(i[ae],0,i,o,Oc(n,o,i),mc(o.parent||i[ii],o,i))}(h,d,v)}function yy(n,i,o){return vy(n,"",i,"",o),yy}function vy(n,i,o,d,h){const v=R(),D=yf(v,i,o,d);return D!==Wr&&La(O(),si(),v,n,D,v[ae],h,!1),vy}function Ep(n,i){return n<<17|i<<2}function Rd(n){return n>>17&32767}function wp(n){return 2|n}function vf(n){return(131068&n)>>2}function _y(n,i){return-131069&n|i<<2}function Ey(n){return 1|n}function by(n,i,o,d,h){const v=n[o+1],D=null===i;let F=d?Rd(v):vf(v),U=!1;for(;0!==F&&(!1===U||D);){const ce=n[F+1];Dy(n[F],i)&&(U=!0,n[F+1]=d?Ey(ce):wp(ce)),F=d?Rd(ce):vf(ce)}U&&(n[o+1]=d?wp(v):Ey(v))}function Dy(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&x(n,i)>=0}function My(n,i){return function Sc(n,i,o,d){const h=R(),v=O(),D=function vo(n){const i=pr.lFrame,o=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,o}(2);v.firstUpdatePass&&function Oy(n,i,o,d){const h=n.data;if(null===h[o+1]){const v=h[Yi()],D=function Py(n,i){return i>=n.expandoStartIndex}(n,o);(function Cm(n,i){return 0!=(n.flags&(i?8:16))})(v,d)&&null===i&&!D&&(i=!1),i=function wm(n,i,o,d){const h=function Ha(n){const i=pr.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}(n);let v=d?i.residualClasses:i.residualStyles;if(null===h)0===(d?i.classBindings:i.styleBindings)&&(o=Cp(o=_f(null,n,i,o,d),i.attrs,d),v=null);else{const D=i.directiveStylingLast;if(-1===D||n[D]!==h)if(o=_f(h,n,i,o,d),null===v){let U=function Vi(n,i,o){const d=o?i.classBindings:i.styleBindings;if(0!==vf(d))return n[Rd(d)]}(n,i,d);void 0!==U&&Array.isArray(U)&&(U=_f(null,n,i,U[1],d),U=Cp(U,i.attrs,d),function Iv(n,i,o,d){n[Rd(o?i.classBindings:i.styleBindings)]=d}(n,i,d,U))}else v=function wv(n,i,o){let d;const h=i.directiveEnd;for(let v=1+i.directiveStylingLast;v<h;v++)d=Cp(d,n[v].hostAttrs,o);return Cp(d,i.attrs,o)}(n,i,d)}return void 0!==v&&(d?i.residualClasses=v:i.residualStyles=v),o}(h,v,i,d),function wy(n,i,o,d,h,v){let D=v?i.classBindings:i.styleBindings,F=Rd(D),U=vf(D);n[d]=o;let ce,Z=!1;if(Array.isArray(o)?(ce=o[1],(null===ce||x(o,ce)>0)&&(Z=!0)):ce=o,h)if(0!==U){const at=Rd(n[F+1]);n[d+1]=Ep(at,F),0!==at&&(n[at+1]=_y(n[at+1],d)),n[F+1]=function mv(n,i){return 131071&n|i<<17}(n[F+1],d)}else n[d+1]=Ep(F,0),0!==F&&(n[F+1]=_y(n[F+1],d)),F=d;else n[d+1]=Ep(U,0),0===F?F=d:n[U+1]=_y(n[U+1],d),U=d;Z&&(n[d+1]=wp(n[d+1])),by(n,ce,d,!0),by(n,ce,d,!1),function Cy(n,i,o,d,h){const v=h?n.residualClasses:n.residualStyles;null!=v&&"string"==typeof i&&x(v,i)>=0&&(o[d+1]=Ey(o[d+1]))}(i,ce,n,d,v),D=Ep(F,U),v?i.classBindings=D:i.styleBindings=D}(h,v,i,o,D,d)}}(v,n,D,d),i!==Wr&&bo(h,D,i)&&function ky(n,i,o,d,h,v,D,F){if(!(3&i.type))return;const U=n.data,Z=U[F+1],ce=function C_(n){return 1==(1&n)}(Z)?Cv(U,i,o,h,vf(Z),D):void 0;Ef(ce)||(Ef(v)||function Ip(n){return 2==(2&n)}(Z)&&(v=Cv(U,null,o,h,F,D)),function Bp(n,i,o,d,h){if(i)h?n.addClass(o,d):n.removeClass(o,d);else{let v=-1===d.indexOf("-")?void 0:Ps.DashCase;null==h?n.removeStyle(o,d,v):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),v|=Ps.Important),n.setStyle(o,d,h,v))}}(d,D,bs(Yi(),o),h,v))}(v,v.data[Yi()],h,h[ae],n,h[D+1]=function bv(n,i){return null==n||""===n||("string"==typeof i?n+=i:"object"==typeof n&&(n=Ue(ka(n)))),n}(i,o),d,D)}(n,i,null,!0),My}function _f(n,i,o,d,h){let v=null;const D=o.directiveEnd;let F=o.directiveStylingLast;for(-1===F?F=o.directiveStart:F++;F<D&&(v=i[F],d=Cp(d,v.hostAttrs,h),v!==n);)F++;return null!==n&&(o.directiveStylingLast=F),d}function Cp(n,i,o){const d=o?1:2;let h=-1;if(null!==i)for(let v=0;v<i.length;v++){const D=i[v];"number"==typeof D?h=D:h===d&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),fr(n,D,!!o||i[++v]))}return void 0===n?null:n}function Cv(n,i,o,d,h,v){const D=null===i;let F;for(;h>0;){const U=n[h],Z=Array.isArray(U),ce=Z?U[1]:U,Ae=null===ce;let at=o[h+1];at===Wr&&(at=Ae?Ye:void 0);let Ft=Ae?S(at,d):ce===d?at:void 0;if(Z&&!Ef(Ft)&&(Ft=S(U,d)),Ef(Ft)&&(F=Ft,D))return F;const un=n[h+1];h=D?Rd(un):vf(un)}if(null!==i){let U=v?i.residualClasses:i.residualStyles;null!=U&&(F=S(U,d))}return F}function Ef(n){return void 0!==n}function Dv(n,i=""){const o=R(),d=O(),h=n+Jn,v=d.firstCreatePass?ah(d,h,1,i,null):d.data[h],D=o[h]=function Ml(n,i){return n.createText(i)}(o[ae],i);Su(d,o,D,v),Si(v,!1)}function Cg(n){return bm("",n,""),Cg}function bm(n,i,o){const d=R(),h=yf(d,n,i,o);return h!==Wr&&function Tc(n,i,o){const d=bs(i,n);!function Ld(n,i,o){n.setValue(i,o)}(n[ae],d,o)}(d,Yi(),h),bm}const wf=void 0;var Uy=["en",[["a","p"],["AM","PM"],wf],[["AM","PM"],wf,wf],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],wf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],wf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",wf,"{1} 'at' {0}",wf],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function $y(n){const o=Math.floor(Math.abs(n)),d=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===d?1:5}];let Cf={};function Sm(n){const i=function xm(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=Tp(i);if(o)return o;const d=i.split("-")[0];if(o=Tp(d),o)return o;if("en"===d)return Uy;throw new Re(701,!1)}function Am(n){return Sm(n)[kr.PluralCase]}function Tp(n){return n in Cf||(Cf[n]=Tn.ng&&Tn.ng.common&&Tn.ng.common.locales&&Tn.ng.common.locales[n]),Cf[n]}var kr=(()=>((kr=kr||{})[kr.LocaleId=0]="LocaleId",kr[kr.DayPeriodsFormat=1]="DayPeriodsFormat",kr[kr.DayPeriodsStandalone=2]="DayPeriodsStandalone",kr[kr.DaysFormat=3]="DaysFormat",kr[kr.DaysStandalone=4]="DaysStandalone",kr[kr.MonthsFormat=5]="MonthsFormat",kr[kr.MonthsStandalone=6]="MonthsStandalone",kr[kr.Eras=7]="Eras",kr[kr.FirstDayOfWeek=8]="FirstDayOfWeek",kr[kr.WeekendRange=9]="WeekendRange",kr[kr.DateFormat=10]="DateFormat",kr[kr.TimeFormat=11]="TimeFormat",kr[kr.DateTimeFormat=12]="DateTimeFormat",kr[kr.NumberSymbols=13]="NumberSymbols",kr[kr.NumberFormats=14]="NumberFormats",kr[kr.CurrencyCode=15]="CurrencyCode",kr[kr.CurrencySymbol=16]="CurrencySymbol",kr[kr.CurrencyName=17]="CurrencyName",kr[kr.Currencies=18]="Currencies",kr[kr.Directionality=19]="Directionality",kr[kr.PluralCase=20]="PluralCase",kr[kr.ExtraData=21]="ExtraData",kr))();const Sp="en-US";let xp=Sp;function Mg(n,i,o,d,h){if(n=ve(n),Array.isArray(n))for(let v=0;v<n.length;v++)Mg(n[v],i,o,d,h);else{const v=O(),D=R();let F=Ou(n)?n:ve(n.provide),U=Ng(n);const Z=dn(),ce=1048575&Z.providerIndexes,Ae=Z.directiveStart,at=Z.providerIndexes>>20;if(Ou(n)||!n.multi){const Ft=new Vt(U,h,Vu),un=$m(F,i,h?ce:ce+at,Ae);-1===un?(sc(Wl(Z,D),v,F),qy(v,n,i.length),i.push(F),Z.directiveStart++,Z.directiveEnd++,h&&(Z.providerIndexes+=1048576),o.push(Ft),D.push(Ft)):(o[un]=Ft,D[un]=Ft)}else{const Ft=$m(F,i,ce+at,Ae),un=$m(F,i,ce,ce+at),qn=un>=0&&o[un];if(h&&!qn||!h&&!(Ft>=0&&o[Ft])){sc(Wl(Z,D),v,F);const _r=function Jv(n,i,o,d,h){const v=new Vt(n,o,Vu);return v.multi=[],v.index=i,v.componentProviders=0,Qv(v,h,d&&!o),v}(h?y0:Um,o.length,h,d,U);!h&&qn&&(o[un].providerFactory=_r),qy(v,n,i.length,0),i.push(F),Z.directiveStart++,Z.directiveEnd++,h&&(Z.providerIndexes+=1048576),o.push(_r),D.push(_r)}else qy(v,n,Ft>-1?Ft:un,Qv(o[h?un:Ft],U,!h&&d));!h&&d&&qn&&o[un].componentProviders++}}}function qy(n,i,o,d){const h=Ou(i),v=function Vp(n){return!!n.useClass}(i);if(h||v){const U=(v?ve(i.useClass):i).prototype.ngOnDestroy;if(U){const Z=n.destroyHooks||(n.destroyHooks=[]);if(!h&&i.multi){const ce=Z.indexOf(o);-1===ce?Z.push(o,[d,U]):Z[ce+1].push(d,U)}else Z.push(o,U)}}}function Qv(n,i,o){return o&&n.componentProviders++,n.multi.push(i)-1}function $m(n,i,o,d){for(let h=o;h<d;h++)if(i[h]===n)return h;return-1}function Um(n,i,o,d){return Vm(this.multi,[])}function y0(n,i,o,d){const h=this.multi;let v;if(this.providerFactory){const D=this.providerFactory.componentProviders,F=Ro(o,o[Cn],this.providerFactory.index,d);v=F.slice(0,D),Vm(h,v);for(let U=D;U<F.length;U++)v.push(F[U])}else v=[],Vm(h,v);return v}function Vm(n,i){for(let o=0;o<n.length;o++)i.push((0,n[o])());return i}function Ch(n,i=[]){return o=>{o.providersResolver=(d,h)=>function Rg(n,i,o){const d=O();if(d.firstCreatePass){const h=ki(n);Mg(o,d.data,d.blueprint,h,!0),Mg(i,d.data,d.blueprint,h,!1)}}(d,h?h(n):n,i)}}class rl{}class yl{}function e_(n,i){return new kp(n,null!=i?i:null)}class kp extends rl{constructor(i,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new hh(this);const d=Pi(i);this._bootstrapComponents=tc(d.bootstrap),this._r3Injector=Qp(i,o,[{provide:rl,useValue:this},{provide:Jl,useValue:this.componentFactoryResolver}],Ue(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class Af extends yl{constructor(i){super(),this.moduleType=i}create(i){return new kp(this.moduleType,i)}}class jl extends rl{constructor(i,o,d){super(),this.componentFactoryResolver=new hh(this),this.instance=null;const h=new $h([...i,{provide:rl,useValue:this},{provide:Jl,useValue:this.componentFactoryResolver}],o||Bc(),d,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function Yy(n,i,o=null){return new jl(n,i,o).injector}let Zy=(()=>{class n{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const d=Ss(0,o.type),h=d.length>0?Yy([d],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,h)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Tt({token:n,providedIn:"environment",factory:()=>new n(Pr($c))}),n})();function xf(n){n.getStandaloneInjector=i=>i.get(Zy).getOrCreateStandaloneInjector(n)}function s_(n,i,o){const d=us()+n,h=R();return h[d]===Wr?Ui(h,d,o?i.call(o):i()):function ks(n,i){return n[i]}(h,d)}function Jy(n,i,o,d){return function d_(n,i,o,d,h,v){const D=i+o;return bo(n,D,h)?Ui(n,D+1,v?d.call(v,h):d(h)):Np(n,D+1)}(R(),us(),n,i,o,d)}function Np(n,i){const o=n[i];return o===Wr?void 0:o}function r(n,i,o,d,h,v,D){const F=i+o;return function Vl(n,i,o,d){const h=bo(n,i,o);return bo(n,i+1,d)||h}(n,F,h,v)?Ui(n,F+2,D?d.call(D,h,v):d(h,v)):Np(n,F+2)}function c(n,i){const o=O();let d;const h=n+Jn;var v;o.firstCreatePass?(d=function f(n,i){if(i)for(let o=i.length-1;o>=0;o--){const d=i[o];if(n===d.name)return d}}(i,o.pipeRegistry),o.data[h]=d,d.onDestroy&&(null!==(v=o.destroyHooks)&&void 0!==v?v:o.destroyHooks=[]).push(h,d.onDestroy)):d=o.data[h];const D=d.factory||(d.factory=ts(d.type)),F=Br(Vu);try{const U=ol(!1),Z=D();return ol(U),function fy(n,i,o,d){o>=n.data.length&&(n.data[o]=null,n.blueprint[o]=null),i[o]=d}(o,R(),h,Z),Z}finally{Br(F)}}function G(n,i,o,d){const h=n+Jn,v=R(),D=function Hs(n,i){return n[i]}(v,h);return function Mt(n,i){return n[Cn].data[i].pure}(v,h)?r(v,us(),i,D.transform,o,d,D):D.transform(o,d)}function Sn(n){return i=>{setTimeout(n,void 0,i)}}const Mn=class rn extends E.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,o,d){let h=i,v=o||(()=>null),D=d;if(i&&"object"==typeof i){var F,U,Z;const Ae=i;h=null===(F=Ae.next)||void 0===F?void 0:F.bind(Ae),v=null===(U=Ae.error)||void 0===U?void 0:U.bind(Ae),D=null===(Z=Ae.complete)||void 0===Z?void 0:Z.bind(Ae)}this.__isAsync&&(v=Sn(v),h&&(h=Sn(h)),D&&(D=Sn(D)));const ce=super.subscribe({next:h,error:v,complete:D});return i instanceof y.w0&&i.add(ce),ce}};function ur(){return this._results[Symbol.iterator]()}class ei{get changes(){return this._changes||(this._changes=new Mn)}constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=ei.prototype;o[Symbol.iterator]||(o[Symbol.iterator]=ur)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){const d=this;d.dirty=!1;const h=function vr(n){return n.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function Mi(n,i,o){if(n.length!==i.length)return!1;for(let d=0;d<n.length;d++){let h=n[d],v=i[d];if(o&&(h=o(h),v=o(v)),v!==h)return!1}return!0}(d._results,h,o))&&(d._results=h,d.length=h.length,d.last=h[this.length-1],d.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Bi=(()=>{class n{}return n.__NG_ELEMENT_ID__=Ns,n})();const ti=Bi,Ua=class extends ti{constructor(i,o,d){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=d}createEmbeddedView(i,o){const d=this._declarationTContainer.tView,h=oh(this._declarationLView,d,i,16,null,d.declTNode,null,null,null,null,o||null);h[Jt]=this._declarationLView[this._declarationTContainer.index];const D=this._declarationLView[zn];return null!==D&&(h[zn]=D.createEmbeddedView(d)),ip(d,h,i),new pf(h)}};function Ns(){return ws(dn(),R())}function ws(n,i){return 4&n.type?new Ua(i,n,Fl(n,i)):null}let Va=(()=>{class n{}return n.__NG_ELEMENT_ID__=Th,n})();function Th(){return hE(dn(),R())}const gI=Va,uE=class extends gI{constructor(i,o,d){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=d}get element(){return Fl(this._hostTNode,this._hostLView)}get injector(){return new ac(this._hostTNode,this._hostLView)}get parentInjector(){const i=ci(this._hostTNode,this._hostLView);if(ia(i)){const o=Wa(i,this._hostLView),d=Ws(i);return new ac(o[Cn].data[d+8],o)}return new ac(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=dE(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-Vn}createEmbeddedView(i,o,d){let h,v;"number"==typeof d?h=d:null!=d&&(h=d.index,v=d.injector);const D=i.createEmbeddedView(o||{},v);return this.insert(D,h),D}createComponent(i,o,d,h,v){const D=i&&!function Ra(n){return"function"==typeof n}(i);let F;if(D)F=o;else{const Ae=o||{};F=Ae.index,d=Ae.injector,h=Ae.projectableNodes,v=Ae.environmentInjector||Ae.ngModuleRef}const U=D?i:new Ad(Un(i)),Z=d||this.parentInjector;if(!v&&null==U.ngModule){const at=(D?Z:this.parentInjector).get($c,null);at&&(v=at)}const ce=U.create(Z,h,void 0,v);return this.insert(ce.hostView,F),ce}insert(i,o){const d=i._lView,h=d[Cn];if(function pa(n){return xr(n[li])}(d)){const ce=this.indexOf(i);if(-1!==ce)this.detach(ce);else{const Ae=d[li],at=new uE(Ae,Ae[ii],Ae[li]);at.detach(at.indexOf(i))}}const v=this._adjustIndex(o),D=this._lContainer;!function Mh(n,i,o,d){const h=Vn+d,v=o.length;d>0&&(o[h-1][Dr]=i),d<v-Vn?(i[Dr]=o[h],Rt(o,Vn+d,i)):(o.push(i),i[Dr]=null),i[li]=o;const D=i[Jt];null!==D&&o!==D&&function Bd(n,i){const o=n[an];i[Bt]!==i[li][li][Bt]&&(n[tt]=!0),null===o?n[an]=[i]:o.push(i)}(D,i);const F=i[zn];null!==F&&F.insertView(n),i[dr]|=64}(h,d,D,v);const F=td(v,D),U=d[ae],Z=Oa(U,D[Et]);return null!==Z&&function Lp(n,i,o,d,h,v){d[ri]=h,d[ii]=i,ru(n,d,o,1,h,v)}(h,D[ii],U,d,Z,F),i.attachToViewContainerRef(),Rt(A0(D),v,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=dE(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),d=Ju(this._lContainer,o);d&&(wi(A0(this._lContainer),o),$d(d[Cn],d))}detach(i){const o=this._adjustIndex(i,-1),d=Ju(this._lContainer,o);return d&&null!=wi(A0(this._lContainer),o)?new pf(d):null}_adjustIndex(i,o=0){return null==i?this.length+o:i}};function dE(n){return n[qt]}function A0(n){return n[qt]||(n[qt]=[])}function hE(n,i){let o;const d=i[n.index];if(xr(d))o=d;else{let h;if(8&n.type)h=Ti(d);else{const v=i[ae];h=v.createComment("");const D=ns(n,i);Pa(v,Oa(v,D),h,function Vd(n,i){return n.nextSibling(i)}(v,D),!1)}i[n.index]=o=om(d,i,h,n),hu(i,o)}return new uE(o,n,i)}class x0{constructor(i){this.queryList=i,this.matches=null}clone(){return new x0(this.queryList)}setDirty(){this.queryList.setDirty()}}class R0{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const d=null!==i.contentQueries?i.contentQueries[0]:o.length,h=[];for(let v=0;v<d;v++){const D=o.getByIndex(v);h.push(this.queries[D.indexInDeclarationView].clone())}return new R0(h)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==IE(i,o).matches&&this.queries[o].setDirty()}}class fE{constructor(i,o,d=null){this.predicate=i,this.flags=o,this.read=d}}class M0{constructor(i=[]){this.queries=i}elementStart(i,o){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let d=0;d<this.length;d++){const h=null!==o?o.length:0,v=this.getByIndex(d).embeddedTView(i,h);v&&(v.indexInDeclarationView=d,null!==o?o.push(v):o=[v])}return null!==o?new M0(o):null}template(i,o){for(let d=0;d<this.queries.length;d++)this.queries[d].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class P0{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new P0(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let d=i.parent;for(;null!==d&&8&d.type&&d.index!==o;)d=d.parent;return o===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const d=this.metadata.predicate;if(Array.isArray(d))for(let h=0;h<d.length;h++){const v=d[h];this.matchTNodeWithReadOption(i,o,mI(o,v)),this.matchTNodeWithReadOption(i,o,ui(o,i,v,!1,!1))}else d===Bi?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,ui(o,i,d,!1,!1))}matchTNodeWithReadOption(i,o,d){if(null!==d){const h=this.metadata.read;if(null!==h)if(h===Ll||h===Va||h===Bi&&4&o.type)this.addMatch(o.index,-2);else{const v=ui(o,i,h,!1,!1);null!==v&&this.addMatch(o.index,v)}else this.addMatch(o.index,d)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function mI(n,i){const o=n.localNames;if(null!==o)for(let d=0;d<o.length;d+=2)if(o[d]===i)return o[d+1];return null}function vI(n,i,o,d){return-1===o?function yI(n,i){return 11&n.type?Fl(n,i):4&n.type?ws(n,i):null}(i,n):-2===o?function _I(n,i,o){return o===Ll?Fl(i,n):o===Bi?ws(i,n):o===Va?hE(i,n):void 0}(n,i,d):Ro(n,n[Cn],o,i)}function pE(n,i,o,d){const h=i[zn].queries[d];if(null===h.matches){const v=n.data,D=o.matches,F=[];for(let U=0;U<D.length;U+=2){const Z=D[U];F.push(Z<0?null:vI(i,v[Z],D[U+1],o.metadata.read))}h.matches=F}return h.matches}function O0(n,i,o,d){const h=n.queries.getByIndex(o),v=h.matches;if(null!==v){const D=pE(n,i,h,o);for(let F=0;F<v.length;F+=2){const U=v[F];if(U>0)d.push(D[F/2]);else{const Z=v[F+1],ce=i[-U];for(let Ae=Vn;Ae<ce.length;Ae++){const at=ce[Ae];at[Jt]===at[li]&&O0(at[Cn],at,Z,d)}if(null!==ce[an]){const Ae=ce[an];for(let at=0;at<Ae.length;at++){const Ft=Ae[at];O0(Ft[Cn],Ft,Z,d)}}}}}return d}function gE(n){const i=R(),o=O(),d=za();_o(d+1);const h=IE(o,d);if(n.dirty&&function cs(n){return 4==(4&n[dr])}(i)===(2==(2&h.metadata.flags))){if(null===h.matches)n.reset([]);else{const v=h.crossesNgTemplate?O0(o,i,d,[]):pE(o,i,h,d);n.reset(v,uu),n.notifyOnChanges()}return!0}return!1}function mE(n,i,o){const d=O();d.firstCreatePass&&(EE(d,new fE(n,i,o),-1),2==(2&i)&&(d.staticViewQueries=!0)),_E(d,R(),i)}function yE(n,i,o,d){const h=O();if(h.firstCreatePass){const v=dn();EE(h,new fE(i,o,d),v.index),function II(n,i){const o=n.contentQueries||(n.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,i)}(h,n),2==(2&o)&&(h.staticContentQueries=!0)}_E(h,R(),o)}function vE(){return function EI(n,i){return n[zn].queries[i].queryList}(R(),za())}function _E(n,i,o){const d=new ei(4==(4&o));rf(n,i,d,d.destroy),null===i[zn]&&(i[zn]=new R0),i[zn].queries.push(new x0(d))}function EE(n,i,o){null===n.queries&&(n.queries=new M0),n.queries.track(new P0(i,o))}function IE(n,i){return n.queries.getByIndex(i)}function k0(n){return!!Pi(n)}function f_(...n){}const $E=new Mr("Application Initializer");let p_=(()=>{class n{constructor(o){this.appInits=o,this.resolve=f_,this.reject=f_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,h)=>{this.resolve=d,this.reject=h})}runInitializers(){if(this.initialized)return;const o=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const v=this.appInits[h]();if(_g(v))o.push(v);else if(lv(v)){const D=new Promise((F,U)=>{v.subscribe({complete:F,error:U})});o.push(D)}}Promise.all(o).then(()=>{d()}).catch(h=>{this.reject(h)}),0===o.length&&d(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(Pr($E,8))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const UE=new Mr("AppId",{providedIn:"root",factory:function VE(){return`${$0()}${$0()}${$0()}`}});function $0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const jE=new Mr("Platform Initializer"),jI=new Mr("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let HI=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const g_=new Mr("LocaleId",{providedIn:"root",factory:()=>Ht(g_,cn.Optional|cn.SkipSelf)||function zI(){return typeof $localize<"u"&&$localize.locale||Sp}()}),GI=new Mr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class WI{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}let KI=(()=>{class n{compileModuleSync(o){return new Af(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const d=this.compileModuleSync(o),v=tc(Pi(o).declarations).reduce((D,F)=>{const U=Un(F);return U&&D.push(new Ad(U)),D},[]);return new WI(d,v)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ZI=(()=>Promise.resolve(0))();function U0(n){typeof Zone>"u"?ZI.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Ku{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Mn(!1),this.onMicrotaskEmpty=new Mn(!1),this.onStable=new Mn(!1),this.onError=new Mn(!1),typeof Zone>"u")throw new Re(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!d&&o,h.shouldCoalesceRunChangeDetection=d,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function XI(){let n=Tn.requestAnimationFrame,i=Tn.cancelAnimationFrame;if(typeof Zone<"u"&&n&&i){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const d=i[Zone.__symbol__("OriginalDelegate")];d&&(i=d)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function ew(n){const i=()=>{!function JI(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Tn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,j0(n),n.isCheckStableRunning=!0,V0(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),j0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,d,h,v,D,F)=>{try{return GE(n),o.invokeTask(h,v,D,F)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===v.type||n.shouldCoalesceRunChangeDetection)&&i(),WE(n)}},onInvoke:(o,d,h,v,D,F,U)=>{try{return GE(n),o.invoke(h,v,D,F,U)}finally{n.shouldCoalesceRunChangeDetection&&i(),WE(n)}},onHasTask:(o,d,h,v)=>{o.hasTask(h,v),d===h&&("microTask"==v.change?(n._hasPendingMicrotasks=v.microTask,j0(n),V0(n)):"macroTask"==v.change&&(n.hasPendingMacrotasks=v.macroTask))},onHandleError:(o,d,h,v)=>(o.handleError(h,v),n.runOutsideAngular(()=>n.onError.emit(v)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ku.isInAngularZone())throw new Re(909,!1)}static assertNotInAngularZone(){if(Ku.isInAngularZone())throw new Re(909,!1)}run(i,o,d){return this._inner.run(i,o,d)}runTask(i,o,d,h){const v=this._inner,D=v.scheduleEventTask("NgZoneEvent: "+h,i,QI,f_,f_);try{return v.runTask(D,o,d)}finally{v.cancelTask(D)}}runGuarded(i,o,d){return this._inner.runGuarded(i,o,d)}runOutsideAngular(i){return this._outer.run(i)}}const QI={};function V0(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function j0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function GE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function WE(n){n._nesting--,V0(n)}class tw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Mn,this.onMicrotaskEmpty=new Mn,this.onStable=new Mn,this.onError=new Mn}run(i,o,d){return i.apply(o,d)}runGuarded(i,o,d){return i.apply(o,d)}runOutsideAngular(i){return i()}runTask(i,o,d,h){return i.apply(o,d)}}const KE=new Mr(""),qE=new Mr("");let H0,nw=(()=>{class n{constructor(o,d,h){this._ngZone=o,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,H0||(function rw(n){H0=n}(h),h.addToWindow(d)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ku.assertNotInAngularZone(),U0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())U0(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(o)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,d,h){let v=-1;d&&d>0&&(v=setTimeout(()=>{this._callbacks=this._callbacks.filter(D=>D.timeoutId!==v),o(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:o,timeoutId:v,updateCb:h})}whenStable(o,d,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,d,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,d,h){return[]}}return n.\u0275fac=function(o){return new(o||n)(Pr(Ku),Pr(YE),Pr(qE))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac}),n})(),YE=(()=>{class n{constructor(){this._applications=new Map}registerApplication(o,d){this._applications.set(o,d)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,d=!0){var h,v;return null!==(h=null===(v=H0)||void 0===v?void 0:v.findTestabilityInTree(this,o,d))&&void 0!==h?h:null}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Rf=!1;let Fp=null;const z0=new Mr("PlatformDestroyListeners"),XE=new Mr("appBootstrapListener");class ow{constructor(i,o){this.name=i,this.token=o}}function cw(n){const{rootComponent:i,appProviders:o,platformProviders:d}=n;Rf&&void 0!==i&&function Gf(n){if(function Bg(n){if(!Un(n))throw new Re(906,`The ${pt(n)} is not an Angular component, make sure it has the \`@Component\` decorator.`)}(n),!Un(n).standalone)throw new Re(907,`The ${pt(n)} component is not marked as standalone, but Angular expects to have a standalone component here. Please make sure the ${pt(n)} component has the \`standalone: true\` flag in the decorator.`)}(i);const h=function lw(n=[]){if(Fp)return Fp;const i=function JE(n=[],i){return Co.create({name:i,providers:[{provide:Bh,useValue:"platform"},{provide:z0,useValue:new Set([()=>Fp=null])},...n]})}(n);return Fp=i,function QE(n){const i=n.get(jE,null);i&&i.forEach(o=>o())}(i),i}(d),v=function nI(n,i){let o;return o="noop"===n?new tw:("zone.js"===n?void 0:n)||new Ku(i),o}("zone.js",function tI(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}());return v.run(()=>{const F=Yy([{provide:Ku,useValue:v},...o||[]],h,"Environment Injector"),U=F.get(ec,null);if(Rf&&!U)throw new Re(402,"No `ErrorHandler` found in the Dependency Injection tree.");let Z;v.runOutsideAngular(()=>{Z=v.onError.subscribe({next:at=>{U.handleError(at)}})});const ce=()=>F.destroy(),Ae=h.get(z0);return Ae.add(ce),F.onDestroy(()=>{Z.unsubscribe(),Ae.delete(ce)}),function rI(n,i,o){try{const d=o();return _g(d)?d.catch(h=>{throw i.runOutsideAngular(()=>n.handleError(h)),h}):d}catch(d){throw i.runOutsideAngular(()=>n.handleError(d)),d}}(U,v,()=>{const at=F.get(p_);return at.runInitializers(),at.donePromise.then(()=>{!function Nv(n){lt(n,"Expected localeId to be defined"),"string"==typeof n&&(xp=n.toLowerCase().replace(/_/g,"-"))}(F.get(g_,Sp)||Sp);const un=F.get(m_);return void 0!==i&&un.bootstrap(i),un})})})}let m_=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(o,d,h){this._zone=o,this._injector=d,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new ee.y(F=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{F.next(this._stable),F.complete()})}),D=new ee.y(F=>{let U;this._zone.runOutsideAngular(()=>{U=this._zone.onStable.subscribe(()=>{Ku.assertNotInAngularZone(),U0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,F.next(!0))})})});const Z=this._zone.onUnstable.subscribe(()=>{Ku.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{F.next(!1)}))});return()=>{U.unsubscribe(),Z.unsubscribe()}});this.isStable=(0,fe.T)(v,D.pipe((0,Le.B)()))}bootstrap(o,d){Rf&&this.warnIfDestroyed();const h=o instanceof Jd;if(!this._injector.get(p_).done){const Ft="Cannot bootstrap as there are still asynchronous initializers running."+(!h&&ar(o)?"":" Bootstrap components in the `ngDoBootstrap` method of the root module.");throw new Re(405,Rf&&Ft)}let D;D=h?o:this._injector.get(Jl).resolveComponentFactory(o),this.componentTypes.push(D.componentType);const F=function sw(n){return n.isBoundToModule}(D)?void 0:this._injector.get(rl),Z=D.create(Co.NULL,[],d||D.selector,F),ce=Z.location.nativeElement,Ae=Z.injector.get(KE,null);return null==Ae||Ae.registerApplication(ce),Z.onDestroy(()=>{this.detachView(Z.hostView),y_(this.components,Z),null==Ae||Ae.unregisterApplication(ce)}),this._loadComponent(Z),Z}tick(){if(Rf&&this.warnIfDestroyed(),this._runningTick)throw new Re(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){Rf&&this.warnIfDestroyed();const d=o;this._views.push(d),d.attachToAppRef(this)}detachView(o){Rf&&this.warnIfDestroyed();const d=o;y_(this._views,d),d.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o);const d=this._injector.get(XE,[]);d.push(...this._bootstrapListeners),d.forEach(h=>h(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return Rf&&this.warnIfDestroyed(),this._destroyListeners.push(o),()=>y_(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new Re(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){Rf&&this._destroyed&&console.warn(Se(406,"This instance of the `ApplicationRef` has already been destroyed."))}}return n.\u0275fac=function(o){return new(o||n)(Pr(Ku),Pr($c),Pr(ec))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function y_(n,i){const o=n.indexOf(i);o>-1&&n.splice(o,1)}function hw(){return!1}function fw(){}let pw=(()=>{class n{}return n.__NG_ELEMENT_ID__=gw,n})();function gw(n){return function mw(n,i,o){if(fo(n)&&!o){const d=zi(n.index,i);return new pf(d,d)}return 47&n.type?new pf(i[Bt],i):null}(dn(),R(),16==(16&n))}class cI{constructor(){}supports(i){return Bn(i)}create(i){return new ww(i)}}const Iw=(n,i)=>i;class ww{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||Iw}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,d=this._removalsHead,h=0,v=null;for(;o||d;){const D=!d||o&&o.currentIndex<dI(d,h,v)?o:d,F=dI(D,h,v),U=D.currentIndex;if(D===d)h--,d=d._nextRemoved;else if(o=o._next,null==D.previousIndex)h++;else{v||(v=[]);const Z=F-h,ce=U-h;if(Z!=ce){for(let at=0;at<Z;at++){const Ft=at<v.length?v[at]:v[at]=0,un=Ft+at;ce<=un&&un<Z&&(v[at]=Ft+1)}v[D.previousIndex]=ce-Z}}F!==U&&i(D,F,U)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!Bn(i))throw new Re(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let h,v,D,o=this._itHead,d=!1;if(Array.isArray(i)){this.length=i.length;for(let F=0;F<this.length;F++)v=i[F],D=this._trackByFn(F,v),null!==o&&Object.is(o.trackById,D)?(d&&(o=this._verifyReinsertion(o,v,D,F)),Object.is(o.item,v)||this._addIdentityChange(o,v)):(o=this._mismatch(o,v,D,F),d=!0),o=o._next}else h=0,function fi(n,i){if(Array.isArray(n))for(let o=0;o<n.length;o++)i(n[o]);else{const o=n[Symbol.iterator]();let d;for(;!(d=o.next()).done;)i(d.value)}}(i,F=>{D=this._trackByFn(h,F),null!==o&&Object.is(o.trackById,D)?(d&&(o=this._verifyReinsertion(o,F,D,h)),Object.is(o.item,F)||this._addIdentityChange(o,F)):(o=this._mismatch(o,F,D,h),d=!0),o=o._next,h++}),this.length=h;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,d,h){let v;return null===i?v=this._itTail:(v=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,v,h)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(d,h))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,v,h)):i=this._addAfter(new Cw(o,d),v,h),i}_verifyReinsertion(i,o,d,h){let v=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==v?i=this._reinsertAfter(v,i._prev,h):i.currentIndex!=h&&(i.currentIndex=h,this._addToMoves(i,h)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const h=i._prevRemoved,v=i._nextRemoved;return null===h?this._removalsHead=v:h._nextRemoved=v,null===v?this._removalsTail=h:v._prevRemoved=h,this._insertAfter(i,o,d),this._addToMoves(i,d),i}_moveAfter(i,o,d){return this._unlink(i),this._insertAfter(i,o,d),this._addToMoves(i,d),i}_addAfter(i,o,d){return this._insertAfter(i,o,d),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,d){const h=null===o?this._itHead:o._next;return i._next=h,i._prev=o,null===h?this._itTail=i:h._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new uI),this._linkedRecords.put(i),i.currentIndex=d,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,d=i._next;return null===o?this._itHead=d:o._next=d,null===d?this._itTail=o:d._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new uI),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class Cw{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class bw{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===o||o<=d.currentIndex)&&Object.is(d.trackById,i))return d;return null}remove(i){const o=i._prevDup,d=i._nextDup;return null===o?this._head=d:o._nextDup=d,null===d?this._tail=o:d._prevDup=o,null===this._head}}class uI{constructor(){this.map=new Map}put(i){const o=i.trackById;let d=this.map.get(o);d||(d=new bw,this.map.set(o,d)),d.add(i)}get(i,o){const h=this.map.get(i);return h?h.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function dI(n,i,o){const d=n.previousIndex;if(null===d)return d;let h=0;return o&&d<o.length&&(h=o[d]),d+i+h}class hI{constructor(){}supports(i){return i instanceof Map||ho(i)}create(){return new Dw}}class Dw{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||ho(i)))throw new Re(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(d,h)=>{if(o&&o.key===h)this._maybeAddToChanges(o,d),this._appendAfter=o,o=o._next;else{const v=this._getOrCreateRecordForKey(h,d);o=this._insertBeforeOrAppend(o,v)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let d=o;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const d=i._prev;return o._next=i,o._prev=d,i._prev=o,d&&(d._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const h=this._records.get(i);this._maybeAddToChanges(h,o);const v=h._prev,D=h._next;return v&&(v._next=D),D&&(D._prev=v),h._next=null,h._prev=null,h}const d=new Tw(i);return this._records.set(i,d),d.currentValue=o,this._addToAdditions(d),d}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(d=>o(i[d],d))}}class Tw{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function fI(){return new Z0([new cI])}let Z0=(()=>{class n{constructor(o){this.factories=o}static create(o,d){if(null!=d){const h=d.factories.slice();o=o.concat(h)}return new n(o)}static extend(o){return{provide:n,useFactory:d=>n.create(o,d||fI()),deps:[[n,new Io,new Li]]}}find(o){const d=this.factories.find(h=>h.supports(o));if(null!=d)return d;throw new Re(901,!1)}}return n.\u0275prov=Tt({token:n,providedIn:"root",factory:fI}),n})();function pI(){return new X0([new hI])}let X0=(()=>{class n{constructor(o){this.factories=o}static create(o,d){if(d){const h=d.factories.slice();o=o.concat(h)}return new n(o)}static extend(o){return{provide:n,useFactory:d=>n.create(o,d||pI()),deps:[[n,new Io,new Li]]}}find(o){const d=this.factories.find(h=>h.supports(o));if(d)return d;throw new Re(901,!1)}}return n.\u0275prov=Tt({token:n,providedIn:"root",factory:pI}),n})();function xw(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function Mw(n,i){const o=Un(n),d=i.elementInjector||Bc();return new Ad(o).create(d,i.projectableNodes,i.hostElement,i.environmentInjector)}},433:(yn,gt,H)=>{"use strict";H.d(gt,{qu:()=>ma,NI:()=>kt,u:()=>ro,sg:()=>Fs,u5:()=>W,JU:()=>rt,a5:()=>di,JJ:()=>Ir,JL:()=>Tn,On:()=>qt,UX:()=>pe,kI:()=>Ie,_Y:()=>an});var E=H(4650),y=H(6895),ee=H(8996),fe=H(9751),Le=H(4742),xe=H(8421),ye=H(7669),Ue=H(5403),je=H(3268),Ce=H(1810),ve=H(4004);let ze=(()=>{class B{constructor(O,ne){this._renderer=O,this._elementRef=ne,this.onChange=yt=>{},this.onTouched=()=>{}}setProperty(O,ne){this._renderer.setProperty(this._elementRef.nativeElement,O,ne)}registerOnTouched(O){this.onTouched=O}registerOnChange(O){this.onChange=O}setDisabledState(O){this.setProperty("disabled",O)}}return B.\u0275fac=function(O){return new(O||B)(E.Y36(E.Qsj),E.Y36(E.SBq))},B.\u0275dir=E.lG2({type:B}),B})(),He=(()=>{class B extends ze{}return B.\u0275fac=function(){let R;return function(ne){return(R||(R=E.n5z(B)))(ne||B)}}(),B.\u0275dir=E.lG2({type:B,features:[E.qOj]}),B})();const rt=new E.OlP("NgValueAccessor"),Se={provide:rt,useExisting:(0,E.Gpc)(()=>Y),multi:!0},pt=new E.OlP("CompositionEventMode");let Y=(()=>{class B extends ze{constructor(O,ne,yt){super(O,ne),this._compositionMode=yt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function de(){const B=(0,y.q)()?(0,y.q)().getUserAgent():"";return/android (\d+)/.test(B.toLowerCase())}())}writeValue(O){this.setProperty("value",null==O?"":O)}_handleInput(O){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(O)}_compositionStart(){this._composing=!0}_compositionEnd(O){this._composing=!1,this._compositionMode&&this.onChange(O)}}return B.\u0275fac=function(O){return new(O||B)(E.Y36(E.Qsj),E.Y36(E.SBq),E.Y36(pt,8))},B.\u0275dir=E.lG2({type:B,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(O,ne){1&O&&E.NdJ("input",function(dn){return ne._handleInput(dn.target.value)})("blur",function(){return ne.onTouched()})("compositionstart",function(){return ne._compositionStart()})("compositionend",function(dn){return ne._compositionEnd(dn.target.value)})},features:[E._Bn([Se]),E.qOj]}),B})();const et=!1;function Ze(B){return null==B||("string"==typeof B||Array.isArray(B))&&0===B.length}function xt(B){return null!=B&&"number"==typeof B.length}const Be=new E.OlP("NgValidators"),Oe=new E.OlP("NgAsyncValidators"),Pe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ie{static min(R){return function $e(B){return R=>{if(Ze(R.value)||Ze(B))return null;const O=parseFloat(R.value);return!isNaN(O)&&O<B?{min:{min:B,actual:R.value}}:null}}(R)}static max(R){return function ht(B){return R=>{if(Ze(R.value)||Ze(B))return null;const O=parseFloat(R.value);return!isNaN(O)&&O>B?{max:{max:B,actual:R.value}}:null}}(R)}static required(R){return function _t(B){return Ze(B.value)?{required:!0}:null}(R)}static requiredTrue(R){return function ct(B){return!0===B.value?null:{required:!0}}(R)}static email(R){return function wt(B){return Ze(B.value)||Pe.test(B.value)?null:{email:!0}}(R)}static minLength(R){return function ft(B){return R=>Ze(R.value)||!xt(R.value)?null:R.value.length<B?{minlength:{requiredLength:B,actualLength:R.value.length}}:null}(R)}static maxLength(R){return function ke(B){return R=>xt(R.value)&&R.value.length>B?{maxlength:{requiredLength:B,actualLength:R.value.length}}:null}(R)}static pattern(R){return function Fe(B){if(!B)return Ne;let R,O;return"string"==typeof B?(O="","^"!==B.charAt(0)&&(O+="^"),O+=B,"$"!==B.charAt(B.length-1)&&(O+="$"),R=new RegExp(O)):(O=B.toString(),R=B),ne=>{if(Ze(ne.value))return null;const yt=ne.value;return R.test(yt)?null:{pattern:{requiredPattern:O,actualValue:yt}}}}(R)}static nullValidator(R){return null}static compose(R){return De(R)}static composeAsync(R){return ln(R)}}function Ne(B){return null}function lt(B){return null!=B}function vt(B){const R=(0,E.QGY)(B)?(0,ee.D)(B):B;if(et&&!(0,E.CqO)(R)){let O="Expected async validator to return Promise or Observable.";throw"object"==typeof B&&(O+=" Are you using a synchronous validator where an async validator is expected?"),new E.vHH(-1101,O)}return R}function Zt(B){let R={};return B.forEach(O=>{R=null!=O?{...R,...O}:R}),0===Object.keys(R).length?null:R}function $t(B,R){return R.map(O=>O(B))}function Tt(B){return B.map(R=>function vn(B){return!B.validate}(R)?R:O=>R.validate(O))}function De(B){if(!B)return null;const R=B.filter(lt);return 0==R.length?null:function(O){return Zt($t(O,R))}}function St(B){return null!=B?De(Tt(B)):null}function ln(B){if(!B)return null;const R=B.filter(lt);return 0==R.length?null:function(O){return function ge(...B){const R=(0,ye.jO)(B),{args:O,keys:ne}=(0,Le.D)(B),yt=new fe.y(dn=>{const{length:jr}=O;if(!jr)return void dn.complete();const yi=new Array(jr);let Si=jr,fs=jr;for(let zs=0;zs<jr;zs++){let Ai=!1;(0,xe.Xf)(O[zs]).subscribe((0,Ue.x)(dn,_l=>{Ai||(Ai=!0,fs--),yi[zs]=_l},()=>Si--,void 0,()=>{(!Si||!Ai)&&(fs||dn.next(ne?(0,Ce.n)(ne,yi):yi),dn.complete())}))}});return R?yt.pipe((0,je.Z)(R)):yt}($t(O,R).map(vt)).pipe((0,ve.U)(Zt))}}function Rn(B){return null!=B?ln(Tt(B)):null}function Kn(B,R){return null===B?[R]:Array.isArray(B)?[...B,R]:[B,R]}function wn(B){return B._rawValidators}function nn(B){return B._rawAsyncValidators}function En(B){return B?Array.isArray(B)?B:[B]:[]}function lr(B,R){return Array.isArray(B)?B.includes(R):B===R}function Er(B,R){const O=En(R);return En(B).forEach(yt=>{lr(O,yt)||O.push(yt)}),O}function Xn(B,R){return En(R).filter(O=>!lr(B,O))}class br{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(R){this._rawValidators=R||[],this._composedValidatorFn=St(this._rawValidators)}_setAsyncValidators(R){this._rawAsyncValidators=R||[],this._composedAsyncValidatorFn=Rn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(R){this._onDestroyCallbacks.push(R)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(R=>R()),this._onDestroyCallbacks=[]}reset(R){this.control&&this.control.reset(R)}hasError(R,O){return!!this.control&&this.control.hasError(R,O)}getError(R,O){return this.control?this.control.getError(R,O):null}}class cn extends br{get formDirective(){return null}get path(){return null}}class di extends br{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Zr{constructor(R){this._cd=R}get isTouched(){var R,O;return!(null===(R=this._cd)||void 0===R||null===(O=R.control)||void 0===O||!O.touched)}get isUntouched(){var R,O;return!(null===(R=this._cd)||void 0===R||null===(O=R.control)||void 0===O||!O.untouched)}get isPristine(){var R,O;return!(null===(R=this._cd)||void 0===R||null===(O=R.control)||void 0===O||!O.pristine)}get isDirty(){var R,O;return!(null===(R=this._cd)||void 0===R||null===(O=R.control)||void 0===O||!O.dirty)}get isValid(){var R,O;return!(null===(R=this._cd)||void 0===R||null===(O=R.control)||void 0===O||!O.valid)}get isInvalid(){var R,O;return!(null===(R=this._cd)||void 0===R||null===(O=R.control)||void 0===O||!O.invalid)}get isPending(){var R,O;return!(null===(R=this._cd)||void 0===R||null===(O=R.control)||void 0===O||!O.pending)}get isSubmitted(){var R;return!(null===(R=this._cd)||void 0===R||!R.submitted)}}let Ir=(()=>{class B extends Zr{constructor(O){super(O)}}return B.\u0275fac=function(O){return new(O||B)(E.Y36(di,2))},B.\u0275dir=E.lG2({type:B,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(O,ne){2&O&&E.ekj("ng-untouched",ne.isUntouched)("ng-touched",ne.isTouched)("ng-pristine",ne.isPristine)("ng-dirty",ne.isDirty)("ng-valid",ne.isValid)("ng-invalid",ne.isInvalid)("ng-pending",ne.isPending)},features:[E.qOj]}),B})(),Tn=(()=>{class B extends Zr{constructor(O){super(O)}}return B.\u0275fac=function(O){return new(O||B)(E.Y36(cn,10))},B.\u0275dir=E.lG2({type:B,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(O,ne){2&O&&E.ekj("ng-untouched",ne.isUntouched)("ng-touched",ne.isTouched)("ng-pristine",ne.isPristine)("ng-dirty",ne.isDirty)("ng-valid",ne.isValid)("ng-invalid",ne.isInvalid)("ng-pending",ne.isPending)("ng-submitted",ne.isSubmitted)},features:[E.qOj]}),B})();function Pr(B,R){return B?`with name: '${R}'`:`at index: ${R}`}const Qe=!1,Xt="VALID",zt="INVALID",we="PENDING",be="DISABLED";function We(B){return(Ye(B)?B.validators:B)||null}function ot(B,R){return(Ye(R)?R.asyncValidators:B)||null}function Ye(B){return null!=B&&!Array.isArray(B)&&"object"==typeof B}function Ve(B,R,O){const ne=B.controls;if(!(R?Object.keys(ne):ne).length)throw new E.vHH(1e3,Qe?function mr(B){return`\n    There are no form controls registered with this ${B?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(R):"");if(!ne[O])throw new E.vHH(1001,Qe?function Ht(B,R){return`Cannot find form control ${Pr(B,R)}`}(R,O):"")}function me(B,R,O){B._forEachChild((ne,yt)=>{if(void 0===O[yt])throw new E.vHH(1002,Qe?function Ge(B,R){return`Must supply a value for form control ${Pr(B,R)}`}(R,yt):"")})}class dt{constructor(R,O){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(R),this._assignAsyncValidators(O)}get validator(){return this._composedValidatorFn}set validator(R){this._rawValidators=this._composedValidatorFn=R}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(R){this._rawAsyncValidators=this._composedAsyncValidatorFn=R}get parent(){return this._parent}get valid(){return this.status===Xt}get invalid(){return this.status===zt}get pending(){return this.status==we}get disabled(){return this.status===be}get enabled(){return this.status!==be}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(R){this._assignValidators(R)}setAsyncValidators(R){this._assignAsyncValidators(R)}addValidators(R){this.setValidators(Er(R,this._rawValidators))}addAsyncValidators(R){this.setAsyncValidators(Er(R,this._rawAsyncValidators))}removeValidators(R){this.setValidators(Xn(R,this._rawValidators))}removeAsyncValidators(R){this.setAsyncValidators(Xn(R,this._rawAsyncValidators))}hasValidator(R){return lr(this._rawValidators,R)}hasAsyncValidator(R){return lr(this._rawAsyncValidators,R)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(R={}){this.touched=!0,this._parent&&!R.onlySelf&&this._parent.markAsTouched(R)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(R=>R.markAllAsTouched())}markAsUntouched(R={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(O=>{O.markAsUntouched({onlySelf:!0})}),this._parent&&!R.onlySelf&&this._parent._updateTouched(R)}markAsDirty(R={}){this.pristine=!1,this._parent&&!R.onlySelf&&this._parent.markAsDirty(R)}markAsPristine(R={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(O=>{O.markAsPristine({onlySelf:!0})}),this._parent&&!R.onlySelf&&this._parent._updatePristine(R)}markAsPending(R={}){this.status=we,!1!==R.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!R.onlySelf&&this._parent.markAsPending(R)}disable(R={}){const O=this._parentMarkedDirty(R.onlySelf);this.status=be,this.errors=null,this._forEachChild(ne=>{ne.disable({...R,onlySelf:!0})}),this._updateValue(),!1!==R.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...R,skipPristineCheck:O}),this._onDisabledChange.forEach(ne=>ne(!0))}enable(R={}){const O=this._parentMarkedDirty(R.onlySelf);this.status=Xt,this._forEachChild(ne=>{ne.enable({...R,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:R.emitEvent}),this._updateAncestors({...R,skipPristineCheck:O}),this._onDisabledChange.forEach(ne=>ne(!1))}_updateAncestors(R){this._parent&&!R.onlySelf&&(this._parent.updateValueAndValidity(R),R.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(R){this._parent=R}getRawValue(){return this.value}updateValueAndValidity(R={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Xt||this.status===we)&&this._runAsyncValidator(R.emitEvent)),!1!==R.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!R.onlySelf&&this._parent.updateValueAndValidity(R)}_updateTreeValidity(R={emitEvent:!0}){this._forEachChild(O=>O._updateTreeValidity(R)),this.updateValueAndValidity({onlySelf:!0,emitEvent:R.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?be:Xt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(R){if(this.asyncValidator){this.status=we,this._hasOwnPendingAsyncValidator=!0;const O=vt(this.asyncValidator(this));this._asyncValidationSubscription=O.subscribe(ne=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ne,{emitEvent:R})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(R,O={}){this.errors=R,this._updateControlsErrors(!1!==O.emitEvent)}get(R){let O=R;return null==O||(Array.isArray(O)||(O=O.split(".")),0===O.length)?null:O.reduce((ne,yt)=>ne&&ne._find(yt),this)}getError(R,O){const ne=O?this.get(O):this;return ne&&ne.errors?ne.errors[R]:null}hasError(R,O){return!!this.getError(R,O)}get root(){let R=this;for(;R._parent;)R=R._parent;return R}_updateControlsErrors(R){this.status=this._calculateStatus(),R&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(R)}_initObservables(){this.valueChanges=new E.vpe,this.statusChanges=new E.vpe}_calculateStatus(){return this._allControlsDisabled()?be:this.errors?zt:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(we)?we:this._anyControlsHaveStatus(zt)?zt:Xt}_anyControlsHaveStatus(R){return this._anyControls(O=>O.status===R)}_anyControlsDirty(){return this._anyControls(R=>R.dirty)}_anyControlsTouched(){return this._anyControls(R=>R.touched)}_updatePristine(R={}){this.pristine=!this._anyControlsDirty(),this._parent&&!R.onlySelf&&this._parent._updatePristine(R)}_updateTouched(R={}){this.touched=this._anyControlsTouched(),this._parent&&!R.onlySelf&&this._parent._updateTouched(R)}_registerOnCollectionChange(R){this._onCollectionChange=R}_setUpdateStrategy(R){Ye(R)&&null!=R.updateOn&&(this._updateOn=R.updateOn)}_parentMarkedDirty(R){return!R&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(R){return null}_assignValidators(R){this._rawValidators=Array.isArray(R)?R.slice():R,this._composedValidatorFn=function Ct(B){return Array.isArray(B)?St(B):B||null}(this._rawValidators)}_assignAsyncValidators(R){this._rawAsyncValidators=Array.isArray(R)?R.slice():R,this._composedAsyncValidatorFn=function gn(B){return Array.isArray(B)?Rn(B):B||null}(this._rawAsyncValidators)}}class Ot extends dt{constructor(R,O,ne){super(We(O),ot(ne,O)),this.controls=R,this._initObservables(),this._setUpdateStrategy(O),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(R,O){return this.controls[R]?this.controls[R]:(this.controls[R]=O,O.setParent(this),O._registerOnCollectionChange(this._onCollectionChange),O)}addControl(R,O,ne={}){this.registerControl(R,O),this.updateValueAndValidity({emitEvent:ne.emitEvent}),this._onCollectionChange()}removeControl(R,O={}){this.controls[R]&&this.controls[R]._registerOnCollectionChange(()=>{}),delete this.controls[R],this.updateValueAndValidity({emitEvent:O.emitEvent}),this._onCollectionChange()}setControl(R,O,ne={}){this.controls[R]&&this.controls[R]._registerOnCollectionChange(()=>{}),delete this.controls[R],O&&this.registerControl(R,O),this.updateValueAndValidity({emitEvent:ne.emitEvent}),this._onCollectionChange()}contains(R){return this.controls.hasOwnProperty(R)&&this.controls[R].enabled}setValue(R,O={}){me(this,!0,R),Object.keys(R).forEach(ne=>{Ve(this,!0,ne),this.controls[ne].setValue(R[ne],{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O)}patchValue(R,O={}){null!=R&&(Object.keys(R).forEach(ne=>{const yt=this.controls[ne];yt&&yt.patchValue(R[ne],{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O))}reset(R={},O={}){this._forEachChild((ne,yt)=>{ne.reset(R[yt],{onlySelf:!0,emitEvent:O.emitEvent})}),this._updatePristine(O),this._updateTouched(O),this.updateValueAndValidity(O)}getRawValue(){return this._reduceChildren({},(R,O,ne)=>(R[ne]=O.getRawValue(),R))}_syncPendingControls(){let R=this._reduceChildren(!1,(O,ne)=>!!ne._syncPendingControls()||O);return R&&this.updateValueAndValidity({onlySelf:!0}),R}_forEachChild(R){Object.keys(this.controls).forEach(O=>{const ne=this.controls[O];ne&&R(ne,O)})}_setUpControls(){this._forEachChild(R=>{R.setParent(this),R._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(R){for(const[O,ne]of Object.entries(this.controls))if(this.contains(O)&&R(ne))return!0;return!1}_reduceValue(){return this._reduceChildren({},(O,ne,yt)=>((ne.enabled||this.disabled)&&(O[yt]=ne.value),O))}_reduceChildren(R,O){let ne=R;return this._forEachChild((yt,dn)=>{ne=O(ne,yt,dn)}),ne}_allControlsDisabled(){for(const R of Object.keys(this.controls))if(this.controls[R].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(R){return this.controls.hasOwnProperty(R)?this.controls[R]:null}}class Qn extends Ot{}const Gr=new E.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Ut}),Ut="always";function At(B,R){return[...R.path,B]}function Qt(B,R,O=Ut){var ne,yt;Cr(B,R),R.valueAccessor.writeValue(B.value),(B.disabled||"always"===O)&&(null===(ne=(yt=R.valueAccessor).setDisabledState)||void 0===ne||ne.call(yt,B.disabled)),function tr(B,R){R.valueAccessor.registerOnChange(O=>{B._pendingValue=O,B._pendingChange=!0,B._pendingDirty=!0,"change"===B.updateOn&&ar(B,R)})}(B,R),function Pi(B,R){const O=(ne,yt)=>{R.valueAccessor.writeValue(ne),yt&&R.viewToModelUpdate(ne)};B.registerOnChange(O),R._registerOnDestroy(()=>{B._unregisterOnChange(O)})}(B,R),function Wn(B,R){R.valueAccessor.registerOnTouched(()=>{B._pendingTouched=!0,"blur"===B.updateOn&&B._pendingChange&&ar(B,R),"submit"!==B.updateOn&&B.markAsTouched()})}(B,R),function yr(B,R){if(R.valueAccessor.setDisabledState){const O=ne=>{R.valueAccessor.setDisabledState(ne)};B.registerOnDisabledChange(O),R._registerOnDestroy(()=>{B._unregisterOnDisabledChange(O)})}}(B,R)}function Nn(B,R,O=!0){const ne=()=>{};R.valueAccessor&&(R.valueAccessor.registerOnChange(ne),R.valueAccessor.registerOnTouched(ne)),Un(B,R),B&&(R._invokeOnDestroyCallbacks(),B._registerOnCollectionChange(()=>{}))}function jn(B,R){B.forEach(O=>{O.registerOnValidatorChange&&O.registerOnValidatorChange(R)})}function Cr(B,R){const O=wn(B);null!==R.validator?B.setValidators(Kn(O,R.validator)):"function"==typeof O&&B.setValidators([O]);const ne=nn(B);null!==R.asyncValidator?B.setAsyncValidators(Kn(ne,R.asyncValidator)):"function"==typeof ne&&B.setAsyncValidators([ne]);const yt=()=>B.updateValueAndValidity();jn(R._rawValidators,yt),jn(R._rawAsyncValidators,yt)}function Un(B,R){let O=!1;if(null!==B){if(null!==R.validator){const yt=wn(B);if(Array.isArray(yt)&&yt.length>0){const dn=yt.filter(jr=>jr!==R.validator);dn.length!==yt.length&&(O=!0,B.setValidators(dn))}}if(null!==R.asyncValidator){const yt=nn(B);if(Array.isArray(yt)&&yt.length>0){const dn=yt.filter(jr=>jr!==R.asyncValidator);dn.length!==yt.length&&(O=!0,B.setAsyncValidators(dn))}}}const ne=()=>{};return jn(R._rawValidators,ne),jn(R._rawAsyncValidators,ne),O}function ar(B,R){B._pendingDirty&&B.markAsDirty(),B.setValue(B._pendingValue,{emitModelToViewChange:!1}),R.viewToModelUpdate(B._pendingValue),B._pendingChange=!1}function Dr(B,R){if(!B.hasOwnProperty("model"))return!1;const O=B.model;return!!O.isFirstChange()||!Object.is(R,O.currentValue)}function Oi(B,R){if(!R)return null;let O,ne,yt;return Array.isArray(R),R.forEach(dn=>{dn.constructor===Y?O=dn:function Xi(B){return Object.getPrototypeOf(B.constructor)===He}(dn)?ne=dn:yt=dn}),yt||ne||O||null}function Ke(B,R){const O=B.indexOf(R);O>-1&&B.splice(O,1)}function Nt(B){return"object"==typeof B&&null!==B&&2===Object.keys(B).length&&"value"in B&&"disabled"in B}const kt=class extends dt{constructor(R=null,O,ne){super(We(O),ot(ne,O)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(R),this._setUpdateStrategy(O),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ye(O)&&(O.nonNullable||O.initialValueIsDefault)&&(this.defaultValue=Nt(R)?R.value:R)}setValue(R,O={}){this.value=this._pendingValue=R,this._onChange.length&&!1!==O.emitModelToViewChange&&this._onChange.forEach(ne=>ne(this.value,!1!==O.emitViewToModelChange)),this.updateValueAndValidity(O)}patchValue(R,O={}){this.setValue(R,O)}reset(R=this.defaultValue,O={}){this._applyFormState(R),this.markAsPristine(O),this.markAsUntouched(O),this.setValue(this.value,O),this._pendingChange=!1}_updateValue(){}_anyControls(R){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(R){this._onChange.push(R)}_unregisterOnChange(R){Ke(this._onChange,R)}registerOnDisabledChange(R){this._onDisabledChange.push(R)}_unregisterOnDisabledChange(R){Ke(this._onDisabledChange,R)}_forEachChild(R){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(R){Nt(R)?(this.value=this._pendingValue=R.value,R.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=R}},tt={provide:di,useExisting:(0,E.Gpc)(()=>qt)},Et=(()=>Promise.resolve())();let qt=(()=>{class B extends di{constructor(O,ne,yt,dn,jr,yi){super(),this._changeDetectorRef=jr,this.callSetDisabledState=yi,this.control=new kt,this._registered=!1,this.update=new E.vpe,this._parent=O,this._setValidators(ne),this._setAsyncValidators(yt),this.valueAccessor=Oi(0,dn)}ngOnChanges(O){if(this._checkForErrors(),!this._registered||"name"in O){if(this._registered&&(this._checkName(),this.formDirective)){const ne=O.name.previousValue;this.formDirective.removeControl({name:ne,path:this._getPath(ne)})}this._setUpControl()}"isDisabled"in O&&this._updateDisabled(O),Dr(O,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(O){this.viewModel=O,this.update.emit(O)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Qt(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(O){Et.then(()=>{var ne;this.control.setValue(O,{emitViewToModelChange:!1}),null===(ne=this._changeDetectorRef)||void 0===ne||ne.markForCheck()})}_updateDisabled(O){const ne=O.isDisabled.currentValue,yt=0!==ne&&(0,E.D6c)(ne);Et.then(()=>{var dn;yt&&!this.control.disabled?this.control.disable():!yt&&this.control.disabled&&this.control.enable(),null===(dn=this._changeDetectorRef)||void 0===dn||dn.markForCheck()})}_getPath(O){return this._parent?At(O,this._parent):[O]}}return B.\u0275fac=function(O){return new(O||B)(E.Y36(cn,9),E.Y36(Be,10),E.Y36(Oe,10),E.Y36(rt,10),E.Y36(E.sBO,8),E.Y36(Gr,8))},B.\u0275dir=E.lG2({type:B,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[E._Bn([tt]),E.qOj,E.TTD]}),B})(),an=(()=>{class B{}return B.\u0275fac=function(O){return new(O||B)},B.\u0275dir=E.lG2({type:B,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),B})(),As=(()=>{class B{}return B.\u0275fac=function(O){return new(O||B)},B.\u0275mod=E.oAB({type:B}),B.\u0275inj=E.cJS({}),B})();const Zo=new E.OlP("NgModelWithFormControlWarning"),to={provide:cn,useExisting:(0,E.Gpc)(()=>Fs)};let Fs=(()=>{class B extends cn{constructor(O,ne,yt){super(),this.callSetDisabledState=yt,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new E.vpe,this._setValidators(O),this._setAsyncValidators(ne)}ngOnChanges(O){this._checkFormPresent(),O.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Un(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(O){const ne=this.form.get(O.path);return Qt(ne,O,this.callSetDisabledState),ne.updateValueAndValidity({emitEvent:!1}),this.directives.push(O),ne}getControl(O){return this.form.get(O.path)}removeControl(O){Nn(O.control||null,O,!1),function re(B,R){const O=B.indexOf(R);O>-1&&B.splice(O,1)}(this.directives,O)}addFormGroup(O){this._setUpFormContainer(O)}removeFormGroup(O){this._cleanUpFormContainer(O)}getFormGroup(O){return this.form.get(O.path)}addFormArray(O){this._setUpFormContainer(O)}removeFormArray(O){this._cleanUpFormContainer(O)}getFormArray(O){return this.form.get(O.path)}updateModel(O,ne){this.form.get(O.path).setValue(ne)}onSubmit(O){var ne;return this.submitted=!0,function ii(B,R){B._syncPendingControls(),R.forEach(O=>{const ne=O.control;"submit"===ne.updateOn&&ne._pendingChange&&(O.viewToModelUpdate(ne._pendingValue),ne._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(O),"dialog"===(null==O||null===(ne=O.target)||void 0===ne?void 0:ne.method)}onReset(){this.resetForm()}resetForm(O){this.form.reset(O),this.submitted=!1}_updateDomValue(){this.directives.forEach(O=>{const ne=O.control,yt=this.form.get(O.path);ne!==yt&&(Nn(ne||null,O),(B=>B instanceof kt)(yt)&&(Qt(yt,O,this.callSetDisabledState),O.control=yt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(O){const ne=this.form.get(O.path);(function ji(B,R){Cr(B,R)})(ne,O),ne.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(O){if(this.form){const ne=this.form.get(O.path);ne&&function Ji(B,R){return Un(B,R)}(ne,O)&&ne.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Cr(this.form,this),this._oldForm&&Un(this._oldForm,this)}_checkFormPresent(){}}return B.\u0275fac=function(O){return new(O||B)(E.Y36(Be,10),E.Y36(Oe,10),E.Y36(Gr,8))},B.\u0275dir=E.lG2({type:B,selectors:[["","formGroup",""]],hostBindings:function(O,ne){1&O&&E.NdJ("submit",function(dn){return ne.onSubmit(dn)})("reset",function(){return ne.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[E._Bn([to]),E.qOj,E.TTD]}),B})();const il={provide:di,useExisting:(0,E.Gpc)(()=>ro)};let ro=(()=>{class B extends di{set isDisabled(O){}constructor(O,ne,yt,dn,jr){super(),this._ngModelWarningConfig=jr,this._added=!1,this.update=new E.vpe,this._ngModelWarningSent=!1,this._parent=O,this._setValidators(ne),this._setAsyncValidators(yt),this.valueAccessor=Oi(0,dn)}ngOnChanges(O){this._added||this._setUpControl(),Dr(O,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(O){this.viewModel=O,this.update.emit(O)}get path(){return At(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return B._ngModelWarningSentOnce=!1,B.\u0275fac=function(O){return new(O||B)(E.Y36(cn,13),E.Y36(Be,10),E.Y36(Oe,10),E.Y36(rt,10),E.Y36(Zo,8))},B.\u0275dir=E.lG2({type:B,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[E._Bn([il]),E.qOj,E.TTD]}),B})(),_s=(()=>{class B{}return B.\u0275fac=function(O){return new(O||B)},B.\u0275mod=E.oAB({type:B}),B.\u0275inj=E.cJS({imports:[As]}),B})();class ga extends dt{constructor(R,O,ne){super(We(O),ot(ne,O)),this.controls=R,this._initObservables(),this._setUpdateStrategy(O),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(R){return this.controls[this._adjustIndex(R)]}push(R,O={}){this.controls.push(R),this._registerControl(R),this.updateValueAndValidity({emitEvent:O.emitEvent}),this._onCollectionChange()}insert(R,O,ne={}){this.controls.splice(R,0,O),this._registerControl(O),this.updateValueAndValidity({emitEvent:ne.emitEvent})}removeAt(R,O={}){let ne=this._adjustIndex(R);ne<0&&(ne=0),this.controls[ne]&&this.controls[ne]._registerOnCollectionChange(()=>{}),this.controls.splice(ne,1),this.updateValueAndValidity({emitEvent:O.emitEvent})}setControl(R,O,ne={}){let yt=this._adjustIndex(R);yt<0&&(yt=0),this.controls[yt]&&this.controls[yt]._registerOnCollectionChange(()=>{}),this.controls.splice(yt,1),O&&(this.controls.splice(yt,0,O),this._registerControl(O)),this.updateValueAndValidity({emitEvent:ne.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(R,O={}){me(this,!1,R),R.forEach((ne,yt)=>{Ve(this,!1,yt),this.at(yt).setValue(ne,{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O)}patchValue(R,O={}){null!=R&&(R.forEach((ne,yt)=>{this.at(yt)&&this.at(yt).patchValue(ne,{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O))}reset(R=[],O={}){this._forEachChild((ne,yt)=>{ne.reset(R[yt],{onlySelf:!0,emitEvent:O.emitEvent})}),this._updatePristine(O),this._updateTouched(O),this.updateValueAndValidity(O)}getRawValue(){return this.controls.map(R=>R.getRawValue())}clear(R={}){this.controls.length<1||(this._forEachChild(O=>O._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:R.emitEvent}))}_adjustIndex(R){return R<0?R+this.length:R}_syncPendingControls(){let R=this.controls.reduce((O,ne)=>!!ne._syncPendingControls()||O,!1);return R&&this.updateValueAndValidity({onlySelf:!0}),R}_forEachChild(R){this.controls.forEach((O,ne)=>{R(O,ne)})}_updateValue(){this.value=this.controls.filter(R=>R.enabled||this.disabled).map(R=>R.value)}_anyControls(R){return this.controls.some(O=>O.enabled&&R(O))}_setUpControls(){this._forEachChild(R=>this._registerControl(R))}_allControlsDisabled(){for(const R of this.controls)if(R.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(R){R.setParent(this),R._registerOnCollectionChange(this._onCollectionChange)}_find(R){var O;return null!==(O=this.at(R))&&void 0!==O?O:null}}function $o(B){return!!B&&(void 0!==B.asyncValidators||void 0!==B.validators||void 0!==B.updateOn)}let ma=(()=>{class B{constructor(){this.useNonNullable=!1}get nonNullable(){const O=new B;return O.useNonNullable=!0,O}group(O,ne=null){const yt=this._reduceControls(O);let dn={};return $o(ne)?dn=ne:null!==ne&&(dn.validators=ne.validator,dn.asyncValidators=ne.asyncValidator),new Ot(yt,dn)}record(O,ne=null){const yt=this._reduceControls(O);return new Qn(yt,ne)}control(O,ne,yt){let dn={};return this.useNonNullable?($o(ne)?dn=ne:(dn.validators=ne,dn.asyncValidators=yt),new kt(O,{...dn,nonNullable:!0})):new kt(O,ne,yt)}array(O,ne,yt){const dn=O.map(jr=>this._createControl(jr));return new ga(dn,ne,yt)}_reduceControls(O){const ne={};return Object.keys(O).forEach(yt=>{ne[yt]=this._createControl(O[yt])}),ne}_createControl(O){return O instanceof kt||O instanceof dt?O:Array.isArray(O)?this.control(O[0],O.length>1?O[1]:null,O.length>2?O[2]:null):this.control(O)}}return B.\u0275fac=function(O){return new(O||B)},B.\u0275prov=E.Yz7({token:B,factory:B.\u0275fac,providedIn:"root"}),B})(),W=(()=>{class B{static withConfig(O){var ne;return{ngModule:B,providers:[{provide:Gr,useValue:null!==(ne=O.callSetDisabledState)&&void 0!==ne?ne:Ut}]}}}return B.\u0275fac=function(O){return new(O||B)},B.\u0275mod=E.oAB({type:B}),B.\u0275inj=E.cJS({imports:[_s]}),B})(),pe=(()=>{class B{static withConfig(O){var ne,yt;return{ngModule:B,providers:[{provide:Zo,useValue:null!==(ne=O.warnOnNgModelWithFormControl)&&void 0!==ne?ne:"always"},{provide:Gr,useValue:null!==(yt=O.callSetDisabledState)&&void 0!==yt?yt:Ut}]}}}return B.\u0275fac=function(O){return new(O||B)},B.\u0275mod=E.oAB({type:B}),B.\u0275inj=E.cJS({imports:[_s]}),B})()},1481:(yn,gt,H)=>{"use strict";H.d(gt,{Cg:()=>St,Dx:()=>Tn});var E=H(6895),y=H(4650);class ee extends E.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class fe extends ee{static makeCurrent(){(0,E.HT)(new fe)}onAndCancel(Ve,me,dt){return Ve.addEventListener(me,dt,!1),()=>{Ve.removeEventListener(me,dt,!1)}}dispatchEvent(Ve,me){Ve.dispatchEvent(me)}remove(Ve){Ve.parentNode&&Ve.parentNode.removeChild(Ve)}createElement(Ve,me){return(me=me||this.getDefaultDocument()).createElement(Ve)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Ve){return Ve.nodeType===Node.ELEMENT_NODE}isShadowRoot(Ve){return Ve instanceof DocumentFragment}getGlobalEventTarget(Ve,me){return"window"===me?window:"document"===me?Ve:"body"===me?Ve.body:null}getBaseHref(Ve){const me=function xe(){return Le=Le||document.querySelector("base"),Le?Le.getAttribute("href"):null}();return null==me?null:function Ue(Ye){ye=ye||document.createElement("a"),ye.setAttribute("href",Ye);const Ve=ye.pathname;return"/"===Ve.charAt(0)?Ve:`/${Ve}`}(me)}resetBaseElement(){Le=null}getUserAgent(){return window.navigator.userAgent}getCookie(Ve){return(0,E.Mx)(document.cookie,Ve)}}let ye,Le=null,ze=(()=>{class Ye{build(){return new XMLHttpRequest}}return Ye.\u0275fac=function(me){return new(me||Ye)},Ye.\u0275prov=y.Yz7({token:Ye,factory:Ye.\u0275fac}),Ye})();const He=new y.OlP("EventManagerPlugins");let rt=(()=>{class Ye{constructor(me,dt){this._zone=dt,this._eventNameToPlugin=new Map,me.forEach(Ot=>{Ot.manager=this}),this._plugins=me.slice().reverse()}addEventListener(me,dt,Ot){return this._findPluginFor(dt).addEventListener(me,dt,Ot)}addGlobalEventListener(me,dt,Ot){return this._findPluginFor(dt).addGlobalEventListener(me,dt,Ot)}getZone(){return this._zone}_findPluginFor(me){const dt=this._eventNameToPlugin.get(me);if(dt)return dt;const Ot=this._plugins;for(let en=0;en<Ot.length;en++){const bn=Ot[en];if(bn.supports(me))return this._eventNameToPlugin.set(me,bn),bn}throw new Error(`No event manager plugin found for event ${me}`)}}return Ye.\u0275fac=function(me){return new(me||Ye)(y.LFG(He),y.LFG(y.R0b))},Ye.\u0275prov=y.Yz7({token:Ye,factory:Ye.\u0275fac}),Ye})();class Dt{constructor(Ve){this._doc=Ve}addGlobalEventListener(Ve,me,dt){const Ot=(0,E.q)().getGlobalEventTarget(this._doc,Ve);if(!Ot)throw new Error(`Unsupported event target ${Ot} for event ${me}`);return this.addEventListener(Ot,me,dt)}}let Re=(()=>{class Ye{constructor(){this.usageCount=new Map}addStyles(me){for(const dt of me)1===this.changeUsageCount(dt,1)&&this.onStyleAdded(dt)}removeStyles(me){for(const dt of me)0===this.changeUsageCount(dt,-1)&&this.onStyleRemoved(dt)}onStyleRemoved(me){}onStyleAdded(me){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(me,dt){var Ot;const en=this.usageCount;let bn=null!==(Ot=en.get(me))&&void 0!==Ot?Ot:0;return bn+=dt,bn>0?en.set(me,bn):en.delete(me),bn}ngOnDestroy(){for(const me of this.getAllStyles())this.onStyleRemoved(me);this.usageCount.clear()}}return Ye.\u0275fac=function(me){return new(me||Ye)},Ye.\u0275prov=y.Yz7({token:Ye,factory:Ye.\u0275fac}),Ye})(),Se=(()=>{class Ye extends Re{constructor(me){super(),this.doc=me,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(me){for(const dt of this.hostNodes)this.addStyleToHost(dt,me)}onStyleRemoved(me){const dt=this.styleRef,Ot=dt.get(me);null==Ot||Ot.forEach(en=>en.remove()),dt.delete(me)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(me){this.hostNodes.add(me);for(const dt of this.getAllStyles())this.addStyleToHost(me,dt)}removeHost(me){this.hostNodes.delete(me)}addStyleToHost(me,dt){const Ot=this.doc.createElement("style");Ot.textContent=dt,me.appendChild(Ot);const en=this.styleRef.get(dt);en?en.push(Ot):this.styleRef.set(dt,[Ot])}resetHostNodes(){const me=this.hostNodes;me.clear(),me.add(this.doc.head)}}return Ye.\u0275fac=function(me){return new(me||Ye)(y.LFG(E.K0))},Ye.\u0275prov=y.Yz7({token:Ye,factory:Ye.\u0275fac}),Ye})();const de={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},pt=/%COMP%/g,Oe=new y.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function $e(Ye,Ve){return Ve.flat(100).map(me=>me.replace(pt,Ye))}function ht(Ye){return Ve=>{if("__ngUnwrap__"===Ve)return Ye;!1===Ye(Ve)&&(Ve.preventDefault(),Ve.returnValue=!1)}}let _t=(()=>{class Ye{constructor(me,dt,Ot,en){this.eventManager=me,this.sharedStylesHost=dt,this.appId=Ot,this.removeStylesOnCompDestory=en,this.rendererByCompId=new Map,this.defaultRenderer=new ct(me)}createRenderer(me,dt){if(!me||!dt)return this.defaultRenderer;const Ot=this.getOrCreateRenderer(me,dt);return Ot instanceof lt?Ot.applyToHost(me):Ot instanceof Ne&&Ot.applyStyles(),Ot}getOrCreateRenderer(me,dt){const Ot=this.rendererByCompId;let en=Ot.get(dt.id);if(!en){const bn=this.eventManager,Qn=this.sharedStylesHost,cr=this.removeStylesOnCompDestory;switch(dt.encapsulation){case y.ifc.Emulated:en=new lt(bn,Qn,dt,this.appId,cr);break;case y.ifc.ShadowDom:return new Fe(bn,Qn,me,dt);default:en=new Ne(bn,Qn,dt,cr)}en.onDestroy=()=>Ot.delete(dt.id),Ot.set(dt.id,en)}return en}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return Ye.\u0275fac=function(me){return new(me||Ye)(y.LFG(rt),y.LFG(Se),y.LFG(y.AFp),y.LFG(Oe))},Ye.\u0275prov=y.Yz7({token:Ye,factory:Ye.\u0275fac}),Ye})();class ct{constructor(Ve){this.eventManager=Ve,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Ve,me){return me?document.createElementNS(de[me]||me,Ve):document.createElement(Ve)}createComment(Ve){return document.createComment(Ve)}createText(Ve){return document.createTextNode(Ve)}appendChild(Ve,me){(ke(Ve)?Ve.content:Ve).appendChild(me)}insertBefore(Ve,me,dt){Ve&&(ke(Ve)?Ve.content:Ve).insertBefore(me,dt)}removeChild(Ve,me){Ve&&Ve.removeChild(me)}selectRootElement(Ve,me){let dt="string"==typeof Ve?document.querySelector(Ve):Ve;if(!dt)throw new Error(`The selector "${Ve}" did not match any elements`);return me||(dt.textContent=""),dt}parentNode(Ve){return Ve.parentNode}nextSibling(Ve){return Ve.nextSibling}setAttribute(Ve,me,dt,Ot){if(Ot){me=Ot+":"+me;const en=de[Ot];en?Ve.setAttributeNS(en,me,dt):Ve.setAttribute(me,dt)}else Ve.setAttribute(me,dt)}removeAttribute(Ve,me,dt){if(dt){const Ot=de[dt];Ot?Ve.removeAttributeNS(Ot,me):Ve.removeAttribute(`${dt}:${me}`)}else Ve.removeAttribute(me)}addClass(Ve,me){Ve.classList.add(me)}removeClass(Ve,me){Ve.classList.remove(me)}setStyle(Ve,me,dt,Ot){Ot&(y.JOm.DashCase|y.JOm.Important)?Ve.style.setProperty(me,dt,Ot&y.JOm.Important?"important":""):Ve.style[me]=dt}removeStyle(Ve,me,dt){dt&y.JOm.DashCase?Ve.style.removeProperty(me):Ve.style[me]=""}setProperty(Ve,me,dt){Ve[me]=dt}setValue(Ve,me){Ve.nodeValue=me}listen(Ve,me,dt){return"string"==typeof Ve?this.eventManager.addGlobalEventListener(Ve,me,ht(dt)):this.eventManager.addEventListener(Ve,me,ht(dt))}}function ke(Ye){return"TEMPLATE"===Ye.tagName&&void 0!==Ye.content}class Fe extends ct{constructor(Ve,me,dt,Ot){super(Ve),this.sharedStylesHost=me,this.hostEl=dt,this.shadowRoot=dt.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const en=$e(Ot.id,Ot.styles);for(const bn of en){const Qn=document.createElement("style");Qn.textContent=bn,this.shadowRoot.appendChild(Qn)}}nodeOrShadowRoot(Ve){return Ve===this.hostEl?this.shadowRoot:Ve}appendChild(Ve,me){return super.appendChild(this.nodeOrShadowRoot(Ve),me)}insertBefore(Ve,me,dt){return super.insertBefore(this.nodeOrShadowRoot(Ve),me,dt)}removeChild(Ve,me){return super.removeChild(this.nodeOrShadowRoot(Ve),me)}parentNode(Ve){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Ve)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Ne extends ct{constructor(Ve,me,dt,Ot,en=dt.id){super(Ve),this.sharedStylesHost=me,this.removeStylesOnCompDestory=Ot,this.rendererUsageCount=0,this.styles=$e(en,dt.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){var Ve;this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount)&&(null===(Ve=this.onDestroy)||void 0===Ve||Ve.call(this))}}class lt extends Ne{constructor(Ve,me,dt,Ot,en){const bn=Ot+"-"+dt.id;super(Ve,me,dt,en,bn),this.contentAttr=function Pe(Ye){return"_ngcontent-%COMP%".replace(pt,Ye)}(bn),this.hostAttr=function Ie(Ye){return"_nghost-%COMP%".replace(pt,Ye)}(bn)}applyToHost(Ve){this.applyStyles(),this.setAttribute(Ve,this.hostAttr,"")}createElement(Ve,me){const dt=super.createElement(Ve,me);return super.setAttribute(dt,this.contentAttr,""),dt}}let vt=(()=>{class Ye extends Dt{constructor(me){super(me)}supports(me){return!0}addEventListener(me,dt,Ot){return me.addEventListener(dt,Ot,!1),()=>this.removeEventListener(me,dt,Ot)}removeEventListener(me,dt,Ot){return me.removeEventListener(dt,Ot)}}return Ye.\u0275fac=function(me){return new(me||Ye)(y.LFG(E.K0))},Ye.\u0275prov=y.Yz7({token:Ye,factory:Ye.\u0275fac}),Ye})();const Zt=["alt","control","meta","shift"],$t={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},vn={alt:Ye=>Ye.altKey,control:Ye=>Ye.ctrlKey,meta:Ye=>Ye.metaKey,shift:Ye=>Ye.shiftKey};let Tt=(()=>{class Ye extends Dt{constructor(me){super(me)}supports(me){return null!=Ye.parseEventName(me)}addEventListener(me,dt,Ot){const en=Ye.parseEventName(dt),bn=Ye.eventCallback(en.fullKey,Ot,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,E.q)().onAndCancel(me,en.domEventName,bn))}static parseEventName(me){const dt=me.toLowerCase().split("."),Ot=dt.shift();if(0===dt.length||"keydown"!==Ot&&"keyup"!==Ot)return null;const en=Ye._normalizeKey(dt.pop());let bn="",Qn=dt.indexOf("code");if(Qn>-1&&(dt.splice(Qn,1),bn="code."),Zt.forEach(Gr=>{const Ut=dt.indexOf(Gr);Ut>-1&&(dt.splice(Ut,1),bn+=Gr+".")}),bn+=en,0!=dt.length||0===en.length)return null;const cr={};return cr.domEventName=Ot,cr.fullKey=bn,cr}static matchEventFullKeyCode(me,dt){let Ot=$t[me.key]||me.key,en="";return dt.indexOf("code.")>-1&&(Ot=me.code,en="code."),!(null==Ot||!Ot)&&(Ot=Ot.toLowerCase()," "===Ot?Ot="space":"."===Ot&&(Ot="dot"),Zt.forEach(bn=>{bn!==Ot&&(0,vn[bn])(me)&&(en+=bn+".")}),en+=Ot,en===dt)}static eventCallback(me,dt,Ot){return en=>{Ye.matchEventFullKeyCode(en,me)&&Ot.runGuarded(()=>dt(en))}}static _normalizeKey(me){return"esc"===me?"escape":me}}return Ye.\u0275fac=function(me){return new(me||Ye)(y.LFG(E.K0))},Ye.\u0275prov=y.Yz7({token:Ye,factory:Ye.\u0275fac}),Ye})();function St(Ye,Ve){return(0,y.iPO)({rootComponent:Ye,...Rn(Ve)})}function Rn(Ye){var Ve;return{appProviders:[...cn,...null!==(Ve=null==Ye?void 0:Ye.providers)&&void 0!==Ve?Ve:[]],platformProviders:lr}}const lr=[{provide:y.Lbi,useValue:E.bD},{provide:y.g9A,useValue:function wn(){fe.makeCurrent()},multi:!0},{provide:E.K0,useFactory:function En(){return(0,y.RDi)(document),document},deps:[]}],cn=[{provide:y.zSh,useValue:"root"},{provide:y.qLn,useFactory:function nn(){return new y.qLn},deps:[]},{provide:He,useClass:vt,multi:!0,deps:[E.K0,y.R0b,y.Lbi]},{provide:He,useClass:Tt,multi:!0,deps:[E.K0]},{provide:_t,useClass:_t,deps:[rt,Se,y.AFp,Oe]},{provide:y.FYo,useExisting:_t},{provide:Re,useExisting:Se},{provide:Se,useClass:Se,deps:[E.K0]},{provide:rt,useClass:rt,deps:[He,y.R0b]},{provide:E.JF,useClass:ze,deps:[]},[]];let Tn=(()=>{class Ye{constructor(me){this._doc=me}getTitle(){return this._doc.title}setTitle(me){this._doc.title=me||""}}return Ye.\u0275fac=function(me){return new(me||Ye)(y.LFG(E.K0))},Ye.\u0275prov=y.Yz7({token:Ye,factory:function(me){let dt=null;return dt=me?new me:function Ir(){return new Tn((0,y.LFG)(E.K0))}(),dt},providedIn:"root"}),Ye})();typeof window<"u"&&window},2607:(yn,gt,H)=>{"use strict";H.d(gt,{gz:()=>xs,y6:()=>Qo,OD:()=>kt,eC:()=>nn,wN:()=>Zi,F0:()=>sn,rH:()=>Ro,Bz:()=>Or,Hx:()=>Ge,bU:()=>sa});var E=H(4650),y=H(8996),ee=H(9646),fe=H(1135),Le=H(6805),xe=H(9751),ye=H(4742),Ue=H(4671),je=H(3268),Ce=H(7669),ge=H(1810),ve=H(5403),ze=H(9672);function He(...S){const x=(0,Ce.yG)(S),w=(0,Ce.jO)(S),{args:k,keys:z}=(0,ye.D)(S);if(0===k.length)return(0,y.D)([],x);const ie=new xe.y(function rt(S,x,w=Ue.y){return k=>{Dt(x,()=>{const{length:z}=S,ie=new Array(z);let le=z,nt=z;for(let Pt=0;Pt<z;Pt++)Dt(x,()=>{const pn=(0,y.D)(S[Pt],x);let $n=!1;pn.subscribe((0,ve.x)(k,On=>{ie[Pt]=On,$n||($n=!0,nt--),nt||k.next(w(ie.slice()))},()=>{--le||k.complete()}))},k)},k)}}(k,x,z?le=>(0,ge.n)(z,le):Ue.y));return w?ie.pipe((0,je.Z)(w)):ie}function Dt(S,x,w){S?(0,ze.f)(w,S,x):x()}var Re=H(7272),Se=H(8421);function de(S){return new xe.y(x=>{(0,Se.Xf)(S()).subscribe(x)})}var pt=H(9635),Y=H(576);function et(S,x){const w=(0,Y.m)(S)?S:()=>S,k=z=>z.error(w());return new xe.y(x?z=>x.schedule(k,0,z):k)}var Ze=H(515),xt=H(727),Be=H(4482);function Oe(){return(0,Be.e)((S,x)=>{let w=null;S._refCount++;const k=(0,ve.x)(x,void 0,void 0,void 0,()=>{if(!S||S._refCount<=0||0<--S._refCount)return void(w=null);const z=S._connection,ie=w;w=null,z&&(!ie||z===ie)&&z.unsubscribe(),x.unsubscribe()});S.subscribe(k),k.closed||(w=S.connect())})}class Pe extends xe.y{constructor(x,w){super(),this.source=x,this.subjectFactory=w,this._subject=null,this._refCount=0,this._connection=null,(0,Be.A)(x)&&(this.lift=x.lift)}_subscribe(x){return this.getSubject().subscribe(x)}getSubject(){const x=this._subject;return(!x||x.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:x}=this;this._subject=this._connection=null,null==x||x.unsubscribe()}connect(){let x=this._connection;if(!x){x=this._connection=new xt.w0;const w=this.getSubject();x.add(this.source.subscribe((0,ve.x)(w,void 0,()=>{this._teardown(),w.complete()},k=>{this._teardown(),w.error(k)},()=>this._teardown()))),x.closed&&(this._connection=null,x=xt.w0.EMPTY)}return x}refCount(){return Oe()(this)}}var Ie=H(7579),$e=H(6895),ht=H(4004),_t=H(3900),ct=H(5698),wt=H(8675),ft=H(9300),ke=H(5577),Fe=H(590),Ne=H(4351),lt=H(8505),vt=H(262),Zt=H(5026);function $t(S){return S<=0?()=>Ze.E:(0,Be.e)((x,w)=>{let k=[];x.subscribe((0,ve.x)(w,z=>{k.push(z),S<k.length&&k.shift()},()=>{for(const z of k)w.next(z);w.complete()},void 0,()=>{k=null}))})}var vn=H(8068),Tt=H(6590);function De(S,x){const w=arguments.length>=2;return k=>k.pipe(S?(0,ft.h)((z,ie)=>S(z,ie,k)):Ue.y,$t(1),w?(0,Tt.d)(x):(0,vn.T)(()=>new Le.K))}function Rn(S){return(0,Be.e)((x,w)=>{try{x.subscribe(w)}finally{w.add(S)}})}var Kn=H(8189),wn=H(1481);const nn="primary",En=Symbol("RouteTitle");class lr{constructor(x){this.params=x||{}}has(x){return Object.prototype.hasOwnProperty.call(this.params,x)}get(x){if(this.has(x)){const w=this.params[x];return Array.isArray(w)?w[0]:w}return null}getAll(x){if(this.has(x)){const w=this.params[x];return Array.isArray(w)?w:[w]}return[]}get keys(){return Object.keys(this.params)}}function Er(S){return new lr(S)}function Xn(S,x,w){const k=w.path.split("/");if(k.length>S.length||"full"===w.pathMatch&&(x.hasChildren()||k.length<S.length))return null;const z={};for(let ie=0;ie<k.length;ie++){const le=k[ie],nt=S[ie];if(le.startsWith(":"))z[le.substring(1)]=nt;else if(le!==nt.path)return null}return{consumed:S.slice(0,k.length),posParams:z}}function cn(S,x){const w=S?Object.keys(S):void 0,k=x?Object.keys(x):void 0;if(!w||!k||w.length!=k.length)return!1;let z;for(let ie=0;ie<w.length;ie++)if(z=w[ie],!di(S[z],x[z]))return!1;return!0}function di(S,x){if(Array.isArray(S)&&Array.isArray(x)){if(S.length!==x.length)return!1;const w=[...S].sort(),k=[...x].sort();return w.every((z,ie)=>k[ie]===z)}return S===x}function Zr(S){return Array.prototype.concat.apply([],S)}function Br(S){return S.length>0?S[S.length-1]:null}function Ir(S,x){for(const w in S)S.hasOwnProperty(w)&&x(S[w],w)}function Tn(S){return(0,E.CqO)(S)?S:(0,E.QGY)(S)?(0,y.D)(Promise.resolve(S)):(0,ee.of)(S)}const tn=!1,fn={exact:function qr(S,x,w){if(!mr(S.segments,x.segments)||!xi(S.segments,x.segments,w)||S.numberOfChildren!==x.numberOfChildren)return!1;for(const k in x.children)if(!S.children[k]||!qr(S.children[k],x.children[k],w))return!1;return!0},subset:pi},on={exact:function Sr(S,x){return cn(S,x)},subset:function ni(S,x){return Object.keys(x).length<=Object.keys(S).length&&Object.keys(x).every(w=>di(S[w],x[w]))},ignored:()=>!0};function Jr(S,x,w){return fn[w.paths](S.root,x.root,w.matrixParams)&&on[w.queryParams](S.queryParams,x.queryParams)&&!("exact"===w.fragment&&S.fragment!==x.fragment)}function pi(S,x,w){return Ur(S,x,x.segments,w)}function Ur(S,x,w,k){if(S.segments.length>w.length){const z=S.segments.slice(0,w.length);return!(!mr(z,w)||x.hasChildren()||!xi(z,w,k))}if(S.segments.length===w.length){if(!mr(S.segments,w)||!xi(S.segments,w,k))return!1;for(const z in x.children)if(!S.children[z]||!pi(S.children[z],x.children[z],k))return!1;return!0}{const z=w.slice(0,S.segments.length),ie=w.slice(S.segments.length);return!!(mr(S.segments,z)&&xi(S.segments,z,k)&&S.children[nn])&&Ur(S.children[nn],x,ie,k)}}function xi(S,x,w){return x.every((k,z)=>on[w](S[z].parameters,k.parameters))}class or{constructor(x=new Yn([],{}),w={},k=null){this.root=x,this.queryParams=w,this.fragment=k}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Er(this.queryParams)),this._queryParamMap}toString(){return Xt.serialize(this)}}class Yn{constructor(x,w){this.segments=x,this.children=w,this.parent=null,Ir(w,(k,z)=>k.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return zt(this)}}class Ei{constructor(x,w){this.path=x,this.parameters=w}get parameterMap(){return this._parameterMap||(this._parameterMap=Er(this.parameters)),this._parameterMap}toString(){return Ve(this)}}function mr(S,x){return S.length===x.length&&S.every((w,k)=>w.path===x[k].path)}let Ge=(()=>{class S{}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=E.Yz7({token:S,factory:function(){return new Qe},providedIn:"root"}),S})();class Qe{parse(x){const w=new Ut(x);return new or(w.parseRootSegment(),w.parseQueryParams(),w.parseFragment())}serialize(x){const w=`/${we(x.root,!0)}`,k=function dt(S){const x=Object.keys(S).map(w=>{const k=S[w];return Array.isArray(k)?k.map(z=>`${We(w)}=${We(z)}`).join("&"):`${We(w)}=${We(k)}`}).filter(w=>!!w);return x.length?`?${x.join("&")}`:""}(x.queryParams);return`${w}${k}${"string"==typeof x.fragment?`#${function Ct(S){return encodeURI(S)}(x.fragment)}`:""}`}}const Xt=new Qe;function zt(S){return S.segments.map(x=>Ve(x)).join("/")}function we(S,x){if(!S.hasChildren())return zt(S);if(x){const w=S.children[nn]?we(S.children[nn],!1):"",k=[];return Ir(S.children,(z,ie)=>{ie!==nn&&k.push(`${ie}:${we(z,!1)}`)}),k.length>0?`${w}(${k.join("//")})`:w}{const w=function Ht(S,x){let w=[];return Ir(S.children,(k,z)=>{z===nn&&(w=w.concat(x(k,z)))}),Ir(S.children,(k,z)=>{z!==nn&&(w=w.concat(x(k,z)))}),w}(S,(k,z)=>z===nn?[we(S.children[nn],!1)]:[`${z}:${we(k,!1)}`]);return 1===Object.keys(S.children).length&&null!=S.children[nn]?`${zt(S)}/${w[0]}`:`${zt(S)}/(${w.join("//")})`}}function be(S){return encodeURIComponent(S).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function We(S){return be(S).replace(/%3B/gi,";")}function ot(S){return be(S).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function gn(S){return decodeURIComponent(S)}function Ye(S){return gn(S.replace(/\+/g,"%20"))}function Ve(S){return`${ot(S.path)}${function me(S){return Object.keys(S).map(x=>`;${ot(x)}=${ot(S[x])}`).join("")}(S.parameters)}`}const Ot=/^[^\/()?;=#]+/;function en(S){const x=S.match(Ot);return x?x[0]:""}const bn=/^[^=?&#]+/,cr=/^[^&#]+/;class Ut{constructor(x){this.url=x,this.remaining=x}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Yn([],{}):new Yn([],this.parseChildren())}parseQueryParams(){const x={};if(this.consumeOptional("?"))do{this.parseQueryParam(x)}while(this.consumeOptional("&"));return x}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const x=[];for(this.peekStartsWith("(")||x.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),x.push(this.parseSegment());let w={};this.peekStartsWith("/(")&&(this.capture("/"),w=this.parseParens(!0));let k={};return this.peekStartsWith("(")&&(k=this.parseParens(!1)),(x.length>0||Object.keys(w).length>0)&&(k[nn]=new Yn(x,w)),k}parseSegment(){const x=en(this.remaining);if(""===x&&this.peekStartsWith(";"))throw new E.vHH(4009,tn);return this.capture(x),new Ei(gn(x),this.parseMatrixParams())}parseMatrixParams(){const x={};for(;this.consumeOptional(";");)this.parseParam(x);return x}parseParam(x){const w=en(this.remaining);if(!w)return;this.capture(w);let k="";if(this.consumeOptional("=")){const z=en(this.remaining);z&&(k=z,this.capture(k))}x[gn(w)]=gn(k)}parseQueryParam(x){const w=function Qn(S){const x=S.match(bn);return x?x[0]:""}(this.remaining);if(!w)return;this.capture(w);let k="";if(this.consumeOptional("=")){const le=function Gr(S){const x=S.match(cr);return x?x[0]:""}(this.remaining);le&&(k=le,this.capture(k))}const z=Ye(w),ie=Ye(k);if(x.hasOwnProperty(z)){let le=x[z];Array.isArray(le)||(le=[le],x[z]=le),le.push(ie)}else x[z]=ie}parseParens(x){const w={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const k=en(this.remaining),z=this.remaining[k.length];if("/"!==z&&")"!==z&&";"!==z)throw new E.vHH(4010,tn);let ie;k.indexOf(":")>-1?(ie=k.slice(0,k.indexOf(":")),this.capture(ie),this.capture(":")):x&&(ie=nn);const le=this.parseChildren();w[ie]=1===Object.keys(le).length?le[nn]:new Yn([],le),this.consumeOptional("//")}return w}peekStartsWith(x){return this.remaining.startsWith(x)}consumeOptional(x){return!!this.peekStartsWith(x)&&(this.remaining=this.remaining.substring(x.length),!0)}capture(x){if(!this.consumeOptional(x))throw new E.vHH(4011,tn)}}function At(S){return S.segments.length>0?new Yn([],{[nn]:S}):S}function Qt(S){const x={};for(const k of Object.keys(S.children)){const ie=Qt(S.children[k]);(ie.segments.length>0||ie.hasChildren())&&(x[k]=ie)}return function Nn(S){if(1===S.numberOfChildren&&S.children[nn]){const x=S.children[nn];return new Yn(S.segments.concat(x.segments),x.children)}return S}(new Yn(S.segments,x))}function jn(S){return S instanceof or}const yr=!1;function Wn(S,x,w,k,z){var ie;if(0===w.length)return ji(x.root,x.root,x.root,k,z);const le=function ri(S){if("string"==typeof S[0]&&1===S.length&&"/"===S[0])return new ys(!0,0,S);let x=0,w=!1;const k=S.reduce((z,ie,le)=>{if("object"==typeof ie&&null!=ie){if(ie.outlets){const nt={};return Ir(ie.outlets,(Pt,pn)=>{nt[pn]="string"==typeof Pt?Pt.split("/"):Pt}),[...z,{outlets:nt}]}if(ie.segmentPath)return[...z,ie.segmentPath]}return"string"!=typeof ie?[...z,ie]:0===le?(ie.split("/").forEach((nt,Pt)=>{0==Pt&&"."===nt||(0==Pt&&""===nt?w=!0:".."===nt?x++:""!=nt&&z.push(nt))}),z):[...z,ie]},[]);return new ys(w,x,k)}(w);return le.toRoot()?ji(x.root,x.root,new Yn([],{}),k,z):function nt(pn){var $n;const On=function li(S,x,w,k){if(S.isAbsolute)return new Cn(x.root,!0,0);if(-1===k)return new Cn(w,w===x.root,0);return function Dr(S,x,w){let k=S,z=x,ie=w;for(;ie>z;){if(ie-=z,k=k.parent,!k)throw new E.vHH(4005,yr&&"Invalid number of '../'");z=k.segments.length}return new Cn(k,!1,z-ie)}(w,k+(ar(S.commands[0])?0:1),S.numberOfDoubleDots)}(le,x,null===($n=S.snapshot)||void 0===$n?void 0:$n._urlSegment,pn),Ci=On.processChildren?Oi(On.segmentGroup,On.index,le.commands):ii(On.segmentGroup,On.index,le.commands);return ji(x.root,On.segmentGroup,Ci,k,z)}(null===(ie=S.snapshot)||void 0===ie?void 0:ie._lastPathIndex)}function ar(S){return"object"==typeof S&&null!=S&&!S.outlets&&!S.segmentPath}function Pi(S){return"object"==typeof S&&null!=S&&S.outlets}function ji(S,x,w,k,z){let le,ie={};k&&Ir(k,(Pt,pn)=>{ie[pn]=Array.isArray(Pt)?Pt.map($n=>`${$n}`):`${Pt}`}),le=S===x?w:Ji(S,x,w);const nt=At(Qt(le));return new or(nt,ie,z)}function Ji(S,x,w){const k={};return Ir(S.children,(z,ie)=>{k[ie]=z===x?w:Ji(z,x,w)}),new Yn(S.segments,k)}class ys{constructor(x,w,k){if(this.isAbsolute=x,this.numberOfDoubleDots=w,this.commands=k,x&&k.length>0&&ar(k[0]))throw new E.vHH(4003,yr&&"Root segment cannot have matrix parameters");const z=k.find(Pi);if(z&&z!==Br(k))throw new E.vHH(4004,yr&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Cn{constructor(x,w,k){this.segmentGroup=x,this.processChildren=w,this.index=k}}function ii(S,x,w){if(S||(S=new Yn([],{})),0===S.segments.length&&S.hasChildren())return Oi(S,x,w);const k=function re(S,x,w){let k=0,z=x;const ie={match:!1,pathIndex:0,commandIndex:0};for(;z<S.segments.length;){if(k>=w.length)return ie;const le=S.segments[z],nt=w[k];if(Pi(nt))break;const Pt=`${nt}`,pn=k<w.length-1?w[k+1]:null;if(z>0&&void 0===Pt)break;if(Pt&&pn&&"object"==typeof pn&&void 0===pn.outlets){if(!qe(Pt,pn,le))return ie;k+=2}else{if(!qe(Pt,{},le))return ie;k++}z++}return{match:!0,pathIndex:z,commandIndex:k}}(S,x,w),z=w.slice(k.commandIndex);if(k.match&&k.pathIndex<S.segments.length){const ie=new Yn(S.segments.slice(0,k.pathIndex),{});return ie.children[nn]=new Yn(S.segments.slice(k.pathIndex),S.children),Oi(ie,0,z)}return k.match&&0===z.length?new Yn(S.segments,{}):k.match&&!S.hasChildren()?_e(S,x,w):k.match?Oi(S,0,z):_e(S,x,w)}function Oi(S,x,w){if(0===w.length)return new Yn(S.segments,{});{const k=function Xi(S){return Pi(S[0])?S[0].outlets:{[nn]:S}}(w),z={};if(!k[nn]&&S.children[nn]&&1===S.numberOfChildren&&0===S.children[nn].segments.length){const ie=Oi(S.children[nn],x,w);return new Yn(S.segments,ie.children)}return Ir(k,(ie,le)=>{"string"==typeof ie&&(ie=[ie]),null!==ie&&(z[le]=ii(S.children[le],x,ie))}),Ir(S.children,(ie,le)=>{void 0===k[le]&&(z[le]=ie)}),new Yn(S.segments,z)}}function _e(S,x,w){const k=S.segments.slice(0,x);let z=0;for(;z<w.length;){const ie=w[z];if(Pi(ie)){const Pt=it(ie.outlets);return new Yn(k,Pt)}if(0===z&&ar(w[0])){k.push(new Ei(S.segments[x].path,ae(w[0]))),z++;continue}const le=Pi(ie)?ie.outlets[nn]:`${ie}`,nt=z<w.length-1?w[z+1]:null;le&&nt&&ar(nt)?(k.push(new Ei(le,ae(nt))),z+=2):(k.push(new Ei(le,{})),z++)}return new Yn(k,{})}function it(S){const x={};return Ir(S,(w,k)=>{"string"==typeof w&&(w=[w]),null!==w&&(x[k]=_e(new Yn([],{}),0,w))}),x}function ae(S){const x={};return Ir(S,(w,k)=>x[k]=`${w}`),x}function qe(S,x,w){return S==w.path&&cn(x,w.parameters)}const Ke="imperative";class Nt{constructor(x,w){this.id=x,this.url=w}}class kt extends Nt{constructor(x,w,k="imperative",z=null){super(x,w),this.type=0,this.navigationTrigger=k,this.restoredState=z}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Bt extends Nt{constructor(x,w,k){super(x,w),this.urlAfterRedirects=k,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Jt extends Nt{constructor(x,w,k,z){super(x,w),this.reason=k,this.code=z,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class mn extends Nt{constructor(x,w,k,z){super(x,w),this.reason=k,this.code=z,this.type=16}}class zn extends Nt{constructor(x,w,k,z){super(x,w),this.error=k,this.target=z,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Gn extends Nt{constructor(x,w,k,z){super(x,w),this.urlAfterRedirects=k,this.state=z,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gi extends Nt{constructor(x,w,k,z){super(x,w),this.urlAfterRedirects=k,this.state=z,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jn extends Nt{constructor(x,w,k,z,ie){super(x,w),this.urlAfterRedirects=k,this.state=z,this.shouldActivate=ie,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class es extends Nt{constructor(x,w,k,z){super(x,w),this.urlAfterRedirects=k,this.state=z,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ut extends Nt{constructor(x,w,k,z){super(x,w),this.urlAfterRedirects=k,this.state=z,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tt{constructor(x){this.route=x,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Et{constructor(x){this.route=x,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class qt{constructor(x){this.snapshot=x,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class an{constructor(x){this.snapshot=x,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vn{constructor(x){this.snapshot=x,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vr{constructor(x){this.snapshot=x,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hr{constructor(x,w,k){this.routerEvent=x,this.position=w,this.anchor=k,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let fo=(()=>{class S{createUrlTree(w,k,z,ie,le,nt){return Wn(w||k.root,z,ie,le,nt)}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=E.Yz7({token:S,factory:S.\u0275fac}),S})(),ki=(()=>{class S{}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=E.Yz7({token:S,factory:function(x){return fo.\u0275fac(x)},providedIn:"root"}),S})();class Hi{constructor(x){this._root=x}get root(){return this._root.value}parent(x){const w=this.pathFromRoot(x);return w.length>1?w[w.length-2]:null}children(x){const w=Zo(x,this._root);return w?w.children.map(k=>k.value):[]}firstChild(x){const w=Zo(x,this._root);return w&&w.children.length>0?w.children[0].value:null}siblings(x){const w=ua(x,this._root);return w.length<2?[]:w[w.length-2].children.map(z=>z.value).filter(z=>z!==x)}pathFromRoot(x){return ua(x,this._root).map(w=>w.value)}}function Zo(S,x){if(S===x.value)return x;for(const w of x.children){const k=Zo(S,w);if(k)return k}return null}function ua(S,x){if(S===x.value)return[x];for(const w of x.children){const k=ua(S,w);if(k.length)return k.unshift(x),k}return[]}class qi{constructor(x,w){this.value=x,this.children=w}toString(){return`TreeNode(${this.value})`}}function to(S){const x={};return S&&S.children.forEach(w=>x[w.value.outlet]=w),x}class Fs extends Hi{constructor(x,w){super(x),this.snapshot=w,hs(this,x)}toString(){return this.snapshot.toString()}}function ba(S,x){const w=function Do(S,x){const le=new il([],{},{},"",{},nn,x,null,S.root,-1,{});return new ro("",new qi(le,[]))}(S,x),k=new fe.X([new Ei("",{})]),z=new fe.X({}),ie=new fe.X({}),le=new fe.X({}),nt=new fe.X(""),Pt=new xs(k,z,le,nt,ie,nn,x,w.root);return Pt.snapshot=w.root,new Fs(new qi(Pt,[]),w)}class xs{constructor(x,w,k,z,ie,le,nt,Pt){var pn,$n;this.url=x,this.params=w,this.queryParams=k,this.fragment=z,this.data=ie,this.outlet=le,this.component=nt,this.title=null!==(pn=null===($n=this.data)||void 0===$n?void 0:$n.pipe((0,ht.U)(On=>On[En])))&&void 0!==pn?pn:(0,ee.of)(void 0),this._futureSnapshot=Pt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ht.U)(x=>Er(x)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ht.U)(x=>Er(x)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function no(S,x="emptyOnly"){const w=S.pathFromRoot;let k=0;if("always"!==x)for(k=w.length-1;k>=1;){const z=w[k],ie=w[k-1];if(z.routeConfig&&""===z.routeConfig.path)k--;else{if(ie.component)break;k--}}return function da(S){return S.reduce((x,w)=>{var k;return{params:{...x.params,...w.params},data:{...x.data,...w.data},resolve:{...w.data,...x.resolve,...null===(k=w.routeConfig)||void 0===k?void 0:k.data,...w._resolvedData}}},{params:{},data:{},resolve:{}})}(w.slice(k))}class il{get title(){var x;return null===(x=this.data)||void 0===x?void 0:x[En]}constructor(x,w,k,z,ie,le,nt,Pt,pn,$n,On){this.url=x,this.params=w,this.queryParams=k,this.fragment=z,this.data=ie,this.outlet=le,this.component=nt,this.routeConfig=Pt,this._urlSegment=pn,this._lastPathIndex=$n,this._resolve=On}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Er(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Er(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(k=>k.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ro extends Hi{constructor(x,w){super(w),this.url=x,hs(this,w)}toString(){return ha(this._root)}}function hs(S,x){x.value._routerState=S,x.children.forEach(w=>hs(S,w))}function ha(S){const x=S.children.length>0?` { ${S.children.map(ha).join(", ")} } `:"";return`${S.value}${x}`}function po(S){if(S.snapshot){const x=S.snapshot,w=S._futureSnapshot;S.snapshot=w,cn(x.queryParams,w.queryParams)||S.queryParams.next(w.queryParams),x.fragment!==w.fragment&&S.fragment.next(w.fragment),cn(x.params,w.params)||S.params.next(w.params),function br(S,x){if(S.length!==x.length)return!1;for(let w=0;w<S.length;++w)if(!cn(S[w],x[w]))return!1;return!0}(x.url,w.url)||S.url.next(w.url),cn(x.data,w.data)||S.data.next(w.data)}else S.snapshot=S._futureSnapshot,S.data.next(S._futureSnapshot.data)}function ls(S,x){const w=cn(S.params,x.params)&&function Pr(S,x){return mr(S,x)&&S.every((w,k)=>cn(w.parameters,x[k].parameters))}(S.url,x.url);return w&&!(!S.parent!=!x.parent)&&(!S.parent||ls(S.parent,x.parent))}function Lo(S,x,w){if(w&&S.shouldReuseRoute(x.value,w.value.snapshot)){const k=w.value;k._futureSnapshot=x.value;const z=function io(S,x,w){return x.children.map(k=>{for(const z of w.children)if(S.shouldReuseRoute(k.value,z.value.snapshot))return Lo(S,k,z);return Lo(S,k)})}(S,x,w);return new qi(k,z)}{if(S.shouldAttach(x.value)){const ie=S.retrieve(x.value);if(null!==ie){const le=ie.route;return le.value._futureSnapshot=x.value,le.children=x.children.map(nt=>Lo(S,nt)),le}}const k=function Ii(S){return new xs(new fe.X(S.url),new fe.X(S.params),new fe.X(S.queryParams),new fe.X(S.fragment),new fe.X(S.data),S.outlet,S.component,S)}(x.value),z=x.children.map(ie=>Lo(S,ie));return new qi(k,z)}}const ts="ngNavigationCancelingError";function To(S,x){const{redirectTo:w,navigationBehaviorOptions:k}=jn(x)?{redirectTo:x,navigationBehaviorOptions:void 0}:x,z=js(!1,0,x);return z.url=w,z.navigationBehaviorOptions=k,z}function js(S,x,w){const k=new Error("NavigationCancelingError: "+(S||""));return k[ts]=!0,k.cancellationCode=x,w&&(k.url=w),k}function Xo(S){return so(S)&&jn(S.url)}function so(S){return S&&S[ts]}class Cs{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Qo,this.attachRef=null}}let Qo=(()=>{class S{constructor(){this.contexts=new Map}onChildOutletCreated(w,k){const z=this.getOrCreateContext(w);z.outlet=k,this.contexts.set(w,z)}onChildOutletDestroyed(w){const k=this.getContext(w);k&&(k.outlet=null,k.attachRef=null)}onOutletDeactivated(){const w=this.contexts;return this.contexts=new Map,w}onOutletReAttached(w){this.contexts=w}getOrCreateContext(w){let k=this.getContext(w);return k||(k=new Cs,this.contexts.set(w,k)),k}getContext(w){return this.contexts.get(w)||null}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=E.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();const go=!1;let Da=(()=>{class S{constructor(){this.activated=null,this._activatedRoute=null,this.name=nn,this.activateEvents=new E.vpe,this.deactivateEvents=new E.vpe,this.attachEvents=new E.vpe,this.detachEvents=new E.vpe,this.parentContexts=(0,E.f3M)(Qo),this.location=(0,E.f3M)(E.s_b),this.changeDetector=(0,E.f3M)(E.sBO),this.environmentInjector=(0,E.f3M)(E.lqb)}ngOnChanges(w){if(w.name){const{firstChange:k,previousValue:z}=w.name;if(k)return;this.isTrackedInParentContexts(z)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(z)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(w){var k;return(null===(k=this.parentContexts.getContext(w))||void 0===k?void 0:k.outlet)===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const w=this.parentContexts.getContext(this.name);null!=w&&w.route&&(w.attachRef?this.attach(w.attachRef,w.route):this.activateWith(w.route,w.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new E.vHH(4012,go);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new E.vHH(4012,go);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new E.vHH(4012,go);this.location.detach();const w=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(w.instance),w}attach(w,k){this.activated=w,this._activatedRoute=k,this.location.insert(w.hostView),this.attachEvents.emit(w.instance)}deactivate(){if(this.activated){const w=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(w)}}activateWith(w,k){if(this.isActivated)throw new E.vHH(4013,go);this._activatedRoute=w;const z=this.location,le=w.snapshot.component,nt=this.parentContexts.getOrCreateContext(this.name).children,Pt=new vs(w,nt,z.injector);if(k&&function mo(S){return!!S.resolveComponentFactory}(k)){const pn=k.resolveComponentFactory(le);this.activated=z.createComponent(pn,z.length,Pt)}else this.activated=z.createComponent(le,{index:z.length,injector:Pt,environmentInjector:null!=k?k:this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275dir=E.lG2({type:S,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[E.TTD]}),S})();class vs{constructor(x,w,k){this.route=x,this.childContexts=w,this.parent=k}get(x,w){return x===xs?this.route:x===Qo?this.childContexts:this.parent.get(x,w)}}let mi=(()=>{class S{}return S.\u0275fac=function(w){return new(w||S)},S.\u0275cmp=E.Xpm({type:S,selectors:[["ng-component"]],standalone:!0,features:[E.jDz],decls:1,vars:0,template:function(w,k){1&w&&E._UZ(0,"router-outlet")},dependencies:[Da],encapsulation:2}),S})();function yo(S,x){var w;return S.providers&&!S._injector&&(S._injector=(0,E.MMx)(S.providers,x,`Route: ${S.path}`)),null!==(w=S._injector)&&void 0!==w?w:x}function zi(S){const x=S.children&&S.children.map(zi),w=x?{...S,children:x}:{...S};return!w.component&&!w.loadComponent&&(x||w.loadChildren)&&w.outlet&&w.outlet!==nn&&(w.component=mi),w}function cs(S){return S.outlet||nn}function ea(S,x){const w=S.filter(k=>cs(k)===x);return w.push(...S.filter(k=>cs(k)!==x)),w}function pa(S){var x;if(!S)return null;if(null!==(x=S.routeConfig)&&void 0!==x&&x._injector)return S.routeConfig._injector;for(let w=S.parent;w;w=w.parent){const k=w.routeConfig;if(null!=k&&k._loadedInjector)return k._loadedInjector;if(null!=k&&k._injector)return k._injector}return null}class ga{constructor(x,w,k,z){this.routeReuseStrategy=x,this.futureState=w,this.currState=k,this.forwardEvent=z}activate(x){const w=this.futureState._root,k=this.currState?this.currState._root:null;this.deactivateChildRoutes(w,k,x),po(this.futureState.root),this.activateChildRoutes(w,k,x)}deactivateChildRoutes(x,w,k){const z=to(w);x.children.forEach(ie=>{const le=ie.value.outlet;this.deactivateRoutes(ie,z[le],k),delete z[le]}),Ir(z,(ie,le)=>{this.deactivateRouteAndItsChildren(ie,k)})}deactivateRoutes(x,w,k){const z=x.value,ie=w?w.value:null;if(z===ie)if(z.component){const le=k.getContext(z.outlet);le&&this.deactivateChildRoutes(x,w,le.children)}else this.deactivateChildRoutes(x,w,k);else ie&&this.deactivateRouteAndItsChildren(w,k)}deactivateRouteAndItsChildren(x,w){x.value.component&&this.routeReuseStrategy.shouldDetach(x.value.snapshot)?this.detachAndStoreRouteSubtree(x,w):this.deactivateRouteAndOutlet(x,w)}detachAndStoreRouteSubtree(x,w){const k=w.getContext(x.value.outlet),z=k&&x.value.component?k.children:w,ie=to(x);for(const le of Object.keys(ie))this.deactivateRouteAndItsChildren(ie[le],z);if(k&&k.outlet){const le=k.outlet.detach(),nt=k.children.onOutletDeactivated();this.routeReuseStrategy.store(x.value.snapshot,{componentRef:le,route:x,contexts:nt})}}deactivateRouteAndOutlet(x,w){const k=w.getContext(x.value.outlet),z=k&&x.value.component?k.children:w,ie=to(x);for(const le of Object.keys(ie))this.deactivateRouteAndItsChildren(ie[le],z);k&&(k.outlet&&(k.outlet.deactivate(),k.children.onOutletDeactivated()),k.attachRef=null,k.resolver=null,k.route=null)}activateChildRoutes(x,w,k){const z=to(w);x.children.forEach(ie=>{this.activateRoutes(ie,z[ie.value.outlet],k),this.forwardEvent(new Vr(ie.value.snapshot))}),x.children.length&&this.forwardEvent(new an(x.value.snapshot))}activateRoutes(x,w,k){const z=x.value,ie=w?w.value:null;if(po(z),z===ie)if(z.component){const nt=k.getOrCreateContext(z.outlet);this.activateChildRoutes(x,w,nt.children)}else this.activateChildRoutes(x,w,k);else if(z.component){const nt=k.getOrCreateContext(z.outlet);if(this.routeReuseStrategy.shouldAttach(z.snapshot)){const Pt=this.routeReuseStrategy.retrieve(z.snapshot);this.routeReuseStrategy.store(z.snapshot,null),nt.children.onOutletReAttached(Pt.contexts),nt.attachRef=Pt.componentRef,nt.route=Pt.route.value,nt.outlet&&nt.outlet.attach(Pt.componentRef,Pt.route.value),po(Pt.route.value),this.activateChildRoutes(x,null,nt.children)}else{var le;const Pt=pa(z.snapshot),pn=null!==(le=null==Pt?void 0:Pt.get(E._Vd))&&void 0!==le?le:null;nt.attachRef=null,nt.route=z,nt.resolver=pn,nt.injector=Pt,nt.outlet&&nt.outlet.activateWith(z,nt.injector),this.activateChildRoutes(x,null,nt.children)}}else this.activateChildRoutes(x,null,k)}}class ta{constructor(x){this.path=x,this.route=this.path[this.path.length-1]}}class pr{constructor(x,w){this.component=x,this.route=w}}function $o(S,x,w){const k=S._root;return q(k,x?x._root:null,w,[k.value])}function b(S,x){const w=Symbol(),k=x.get(S,w);return k===w?"function"!=typeof S||(0,E.Z0I)(S)?x.get(S):S:k}function q(S,x,w,k,z={canDeactivateChecks:[],canActivateChecks:[]}){const ie=to(x);return S.children.forEach(le=>{(function T(S,x,w,k,z={canDeactivateChecks:[],canActivateChecks:[]}){const ie=S.value,le=x?x.value:null,nt=w?w.getContext(S.value.outlet):null;if(le&&ie.routeConfig===le.routeConfig){const Pt=function W(S,x,w){if("function"==typeof w)return w(S,x);switch(w){case"pathParamsChange":return!mr(S.url,x.url);case"pathParamsOrQueryParamsChange":return!mr(S.url,x.url)||!cn(S.queryParams,x.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ls(S,x)||!cn(S.queryParams,x.queryParams);default:return!ls(S,x)}}(le,ie,ie.routeConfig.runGuardsAndResolvers);Pt?z.canActivateChecks.push(new ta(k)):(ie.data=le.data,ie._resolvedData=le._resolvedData),q(S,x,ie.component?nt?nt.children:null:w,k,z),Pt&&nt&&nt.outlet&&nt.outlet.isActivated&&z.canDeactivateChecks.push(new pr(nt.outlet.component,le))}else le&&pe(x,nt,z),z.canActivateChecks.push(new ta(k)),q(S,null,ie.component?nt?nt.children:null:w,k,z)})(le,ie[le.value.outlet],w,k.concat([le.value]),z),delete ie[le.value.outlet]}),Ir(ie,(le,nt)=>pe(le,w.getContext(nt),z)),z}function pe(S,x,w){const k=to(S),z=S.value;Ir(k,(ie,le)=>{pe(ie,z.component?x?x.children.getContext(le):null:x,w)}),w.canDeactivateChecks.push(new pr(z.component&&x&&x.outlet&&x.outlet.isActivated?x.outlet.component:null,z))}function B(S){return"function"==typeof S}function fs(S){return S instanceof Le.K||"EmptyError"===(null==S?void 0:S.name)}const zs=Symbol("INITIAL_VALUE");function Ai(){return(0,_t.w)(S=>He(S.map(x=>x.pipe((0,ct.q)(1),(0,wt.O)(zs)))).pipe((0,ht.U)(x=>{for(const w of x)if(!0!==w){if(w===zs)return zs;if(!1===w||w instanceof or)return w}return!0}),(0,ft.h)(x=>x!==zs),(0,ct.q)(1)))}function ja(S){return(0,pt.z)((0,lt.b)(x=>{if(jn(x))throw To(0,x)}),(0,ht.U)(x=>!0===x))}const Ms={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ha(S,x,w,k,z){const ie=za(S,x,w);return ie.matched?function ps(S,x,w,k){const z=x.canMatch;if(!z||0===z.length)return(0,ee.of)(!0);const ie=z.map(le=>{const nt=b(le,S);return Tn(function jr(S){return S&&B(S.canMatch)}(nt)?nt.canMatch(x,w):S.runInContext(()=>nt(x,w)))});return(0,ee.of)(ie).pipe(Ai(),ja())}(k=yo(x,k),x,w).pipe((0,ht.U)(le=>!0===le?ie:{...Ms})):(0,ee.of)(ie)}function za(S,x,w){var k;if(""===x.path)return"full"===x.pathMatch&&(S.hasChildren()||w.length>0)?{...Ms}:{matched:!0,consumedSegments:[],remainingSegments:w,parameters:{},positionalParamSegments:{}};const ie=(x.matcher||Xn)(w,S,x);if(!ie)return{...Ms};const le={};Ir(ie.posParams,(Pt,pn)=>{le[pn]=Pt.path});const nt=ie.consumed.length>0?{...le,...ie.consumed[ie.consumed.length-1].parameters}:le;return{matched:!0,consumedSegments:ie.consumed,remainingSegments:w.slice(ie.consumed.length),parameters:nt,positionalParamSegments:null!==(k=ie.posParams)&&void 0!==k?k:{}}}function _o(S,x,w,k){if(w.length>0&&function na(S,x,w){return w.some(k=>Eo(S,x,k)&&cs(k)!==nn)}(S,w,k)){const ie=new Yn(x,function Il(S,x,w,k){const z={};z[nn]=k,k._sourceSegment=S,k._segmentIndexShift=x.length;for(const ie of w)if(""===ie.path&&cs(ie)!==nn){const le=new Yn([],{});le._sourceSegment=S,le._segmentIndexShift=x.length,z[cs(ie)]=le}return z}(S,x,k,new Yn(w,S.children)));return ie._sourceSegment=S,ie._segmentIndexShift=x.length,{segmentGroup:ie,slicedSegments:[]}}if(0===w.length&&function ds(S,x,w){return w.some(k=>Eo(S,x,k))}(S,w,k)){const ie=new Yn(S.segments,function Uo(S,x,w,k,z){const ie={};for(const le of k)if(Eo(S,w,le)&&!z[cs(le)]){const nt=new Yn([],{});nt._sourceSegment=S,nt._segmentIndexShift=x.length,ie[cs(le)]=nt}return{...z,...ie}}(S,x,w,k,S.children));return ie._sourceSegment=S,ie._segmentIndexShift=x.length,{segmentGroup:ie,slicedSegments:w}}const z=new Yn(S.segments,S.children);return z._sourceSegment=S,z._segmentIndexShift=x.length,{segmentGroup:z,slicedSegments:w}}function Eo(S,x,w){return(!(S.hasChildren()||x.length>0)||"full"!==w.pathMatch)&&""===w.path}function Vo(S,x,w,k){return!!(cs(S)===k||k!==nn&&Eo(x,w,S))&&("**"===S.path||za(x,S,w).matched)}function oo(S,x,w){return 0===x.length&&!S.children[w]}const is=!1;class Ta{constructor(x){this.segmentGroup=x||null}}class Ga{constructor(x){this.urlTree=x}}function Yi(S){return et(new Ta(S))}function Ni(S){return et(new Ga(S))}class wl{constructor(x,w,k,z,ie){this.injector=x,this.configLoader=w,this.urlSerializer=k,this.urlTree=z,this.config=ie,this.allowRedirects=!0}apply(){const x=_o(this.urlTree.root,[],[],this.config).segmentGroup,w=new Yn(x.segments,x.children);return this.expandSegmentGroup(this.injector,this.config,w,nn).pipe((0,ht.U)(ie=>this.createUrlTree(Qt(ie),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,vt.K)(ie=>{if(ie instanceof Ga)return this.allowRedirects=!1,this.match(ie.urlTree);throw ie instanceof Ta?this.noMatchError(ie):ie}))}match(x){return this.expandSegmentGroup(this.injector,this.config,x.root,nn).pipe((0,ht.U)(z=>this.createUrlTree(Qt(z),x.queryParams,x.fragment))).pipe((0,vt.K)(z=>{throw z instanceof Ta?this.noMatchError(z):z}))}noMatchError(x){return new E.vHH(4002,is)}createUrlTree(x,w,k){const z=At(x);return new or(z,w,k)}expandSegmentGroup(x,w,k,z){return 0===k.segments.length&&k.hasChildren()?this.expandChildren(x,w,k).pipe((0,ht.U)(ie=>new Yn([],ie))):this.expandSegment(x,k,w,k.segments,z,!0)}expandChildren(x,w,k){const z=[];for(const ie of Object.keys(k.children))"primary"===ie?z.unshift(ie):z.push(ie);return(0,y.D)(z).pipe((0,Ne.b)(ie=>{const le=k.children[ie],nt=ea(w,ie);return this.expandSegmentGroup(x,nt,le,ie).pipe((0,ht.U)(Pt=>({segment:Pt,outlet:ie})))}),(0,Zt.R)((ie,le)=>(ie[le.outlet]=le.segment,ie),{}),De())}expandSegment(x,w,k,z,ie,le){return(0,y.D)(k).pipe((0,Ne.b)(nt=>this.expandSegmentAgainstRoute(x,w,k,nt,z,ie,le).pipe((0,vt.K)(pn=>{if(pn instanceof Ta)return(0,ee.of)(null);throw pn}))),(0,Fe.P)(nt=>!!nt),(0,vt.K)((nt,Pt)=>{if(fs(nt))return oo(w,z,ie)?(0,ee.of)(new Yn([],{})):Yi(w);throw nt}))}expandSegmentAgainstRoute(x,w,k,z,ie,le,nt){return Vo(z,w,ie,le)?void 0===z.redirectTo?this.matchSegmentAgainstRoute(x,w,z,ie,le):nt&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(x,w,k,z,ie,le):Yi(w):Yi(w)}expandSegmentAgainstRouteUsingRedirect(x,w,k,z,ie,le){return"**"===z.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(x,k,z,le):this.expandRegularSegmentAgainstRouteUsingRedirect(x,w,k,z,ie,le)}expandWildCardWithParamsAgainstRouteUsingRedirect(x,w,k,z){const ie=this.applyRedirectCommands([],k.redirectTo,{});return k.redirectTo.startsWith("/")?Ni(ie):this.lineralizeSegments(k,ie).pipe((0,ke.z)(le=>{const nt=new Yn(le,{});return this.expandSegment(x,nt,w,le,z,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(x,w,k,z,ie,le){const{matched:nt,consumedSegments:Pt,remainingSegments:pn,positionalParamSegments:$n}=za(w,z,ie);if(!nt)return Yi(w);const On=this.applyRedirectCommands(Pt,z.redirectTo,$n);return z.redirectTo.startsWith("/")?Ni(On):this.lineralizeSegments(z,On).pipe((0,ke.z)(Ci=>this.expandSegment(x,w,k,Ci.concat(pn),le,!1)))}matchSegmentAgainstRoute(x,w,k,z,ie){return"**"===k.path?(x=yo(k,x),k.loadChildren?(k._loadedRoutes?(0,ee.of)({routes:k._loadedRoutes,injector:k._loadedInjector}):this.configLoader.loadChildren(x,k)).pipe((0,ht.U)(nt=>(k._loadedRoutes=nt.routes,k._loadedInjector=nt.injector,new Yn(z,{})))):(0,ee.of)(new Yn(z,{}))):Ha(w,k,z,x).pipe((0,_t.w)(({matched:le,consumedSegments:nt,remainingSegments:Pt})=>{var pn;return le?(x=null!==(pn=k._injector)&&void 0!==pn?pn:x,this.getChildConfig(x,k,z).pipe((0,ke.z)(On=>{var Ci;const Li=null!==(Ci=On.injector)&&void 0!==Ci?Ci:x,Ks=On.routes,{segmentGroup:Io,slicedSegments:Po}=_o(w,nt,Pt,Ks),Bs=new Yn(Io.segments,Io.children);if(0===Po.length&&Bs.hasChildren())return this.expandChildren(Li,Ks,Bs).pipe((0,ht.U)(Qc=>new Yn(nt,Qc)));if(0===Ks.length&&0===Po.length)return(0,ee.of)(new Yn(nt,{}));const Ar=cs(k)===ie;return this.expandSegment(Li,Bs,Ks,Po,Ar?nn:ie,!0).pipe((0,ht.U)(qs=>new Yn(nt.concat(qs.segments),qs.children)))}))):Yi(w)}))}getChildConfig(x,w,k){return w.children?(0,ee.of)({routes:w.children,injector:x}):w.loadChildren?void 0!==w._loadedRoutes?(0,ee.of)({routes:w._loadedRoutes,injector:w._loadedInjector}):function va(S,x,w,k){const z=x.canLoad;if(void 0===z||0===z.length)return(0,ee.of)(!0);const ie=z.map(le=>{const nt=b(le,S);return Tn(function O(S){return S&&B(S.canLoad)}(nt)?nt.canLoad(x,w):S.runInContext(()=>nt(x,w)))});return(0,ee.of)(ie).pipe(Ai(),ja())}(x,w,k).pipe((0,ke.z)(z=>z?this.configLoader.loadChildren(x,w).pipe((0,lt.b)(ie=>{w._loadedRoutes=ie.routes,w._loadedInjector=ie.injector})):function Sa(S){return et(js(is,3))}())):(0,ee.of)({routes:[],injector:x})}lineralizeSegments(x,w){let k=[],z=w.root;for(;;){if(k=k.concat(z.segments),0===z.numberOfChildren)return(0,ee.of)(k);if(z.numberOfChildren>1||!z.children[nn])return x.redirectTo,et(new E.vHH(4e3,is));z=z.children[nn]}}applyRedirectCommands(x,w,k){return this.applyRedirectCreateUrlTree(w,this.urlSerializer.parse(w),x,k)}applyRedirectCreateUrlTree(x,w,k,z){const ie=this.createSegmentGroup(x,w.root,k,z);return new or(ie,this.createQueryParams(w.queryParams,this.urlTree.queryParams),w.fragment)}createQueryParams(x,w){const k={};return Ir(x,(z,ie)=>{if("string"==typeof z&&z.startsWith(":")){const nt=z.substring(1);k[ie]=w[nt]}else k[ie]=z}),k}createSegmentGroup(x,w,k,z){const ie=this.createSegments(x,w.segments,k,z);let le={};return Ir(w.children,(nt,Pt)=>{le[Pt]=this.createSegmentGroup(x,nt,k,z)}),new Yn(ie,le)}createSegments(x,w,k,z){return w.map(ie=>ie.path.startsWith(":")?this.findPosParam(x,ie,z):this.findOrReturn(ie,k))}findPosParam(x,w,k){const z=k[w.path.substring(1)];if(!z)throw new E.vHH(4001,is);return z}findOrReturn(x,w){let k=0;for(const z of w){if(z.path===x.path)return w.splice(k),z;k++}return x}}class Rr{}class L{constructor(x,w,k,z,ie,le,nt){this.injector=x,this.rootComponentType=w,this.config=k,this.urlTree=z,this.url=ie,this.paramsInheritanceStrategy=le,this.urlSerializer=nt}recognize(){const x=_o(this.urlTree.root,[],[],this.config.filter(w=>void 0===w.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,x,nn).pipe((0,ht.U)(w=>{if(null===w)return null;const k=new il([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},nn,this.rootComponentType,null,this.urlTree.root,-1,{}),z=new qi(k,w),ie=new ro(this.url,z);return this.inheritParamsAndData(ie._root),ie}))}inheritParamsAndData(x){const w=x.value,k=no(w,this.paramsInheritanceStrategy);w.params=Object.freeze(k.params),w.data=Object.freeze(k.data),x.children.forEach(z=>this.inheritParamsAndData(z))}processSegmentGroup(x,w,k,z){return 0===k.segments.length&&k.hasChildren()?this.processChildren(x,w,k):this.processSegment(x,w,k,k.segments,z)}processChildren(x,w,k){return(0,y.D)(Object.keys(k.children)).pipe((0,Ne.b)(z=>{const ie=k.children[z],le=ea(w,z);return this.processSegmentGroup(x,le,ie,z)}),(0,Zt.R)((z,ie)=>z&&ie?(z.push(...ie),z):null),function St(S,x=!1){return(0,Be.e)((w,k)=>{let z=0;w.subscribe((0,ve.x)(k,ie=>{const le=S(ie,z++);(le||x)&&k.next(ie),!le&&k.complete()}))})}(z=>null!==z),(0,Tt.d)(null),De(),(0,ht.U)(z=>{if(null===z)return null;const ie=Me(z);return function X(S){S.sort((x,w)=>x.value.outlet===nn?-1:w.value.outlet===nn?1:x.value.outlet.localeCompare(w.value.outlet))}(ie),ie}))}processSegment(x,w,k,z,ie){return(0,y.D)(w).pipe((0,Ne.b)(le=>{var nt;return this.processSegmentAgainstRoute(null!==(nt=le._injector)&&void 0!==nt?nt:x,le,k,z,ie)}),(0,Fe.P)(le=>!!le),(0,vt.K)(le=>{if(fs(le))return oo(k,z,ie)?(0,ee.of)([]):(0,ee.of)(null);throw le}))}processSegmentAgainstRoute(x,w,k,z,ie){if(w.redirectTo||!Vo(w,k,z,ie))return(0,ee.of)(null);let le;if("**"===w.path){var nt,Pt;const pn=z.length>0?Br(z).parameters:{},$n=Ln(k)+z.length,On=new il(z,pn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,$r(w),cs(w),null!==(nt=null!==(Pt=w.component)&&void 0!==Pt?Pt:w._loadedComponent)&&void 0!==nt?nt:null,w,Wt(k),$n,Lr(w));le=(0,ee.of)({snapshot:On,consumedSegments:[],remainingSegments:[]})}else le=Ha(k,w,z,x).pipe((0,ht.U)(({matched:pn,consumedSegments:$n,remainingSegments:On,parameters:Ci})=>{var Li,Ks;if(!pn)return null;const Io=Ln(k)+$n.length;return{snapshot:new il($n,Ci,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,$r(w),cs(w),null!==(Li=null!==(Ks=w.component)&&void 0!==Ks?Ks:w._loadedComponent)&&void 0!==Li?Li:null,w,Wt(k),Io,Lr(w)),consumedSegments:$n,remainingSegments:On}}));return le.pipe((0,_t.w)(pn=>{var $n,On;if(null===pn)return(0,ee.of)(null);const{snapshot:Ci,consumedSegments:Li,remainingSegments:Ks}=pn;x=null!==($n=w._injector)&&void 0!==$n?$n:x;const Io=null!==(On=w._loadedInjector)&&void 0!==On?On:x,Po=function j(S){return S.children?S.children:S.loadChildren?S._loadedRoutes:[]}(w),{segmentGroup:Bs,slicedSegments:Ar}=_o(k,Li,Ks,Po.filter(qs=>void 0===qs.redirectTo));if(0===Ar.length&&Bs.hasChildren())return this.processChildren(Io,Po,Bs).pipe((0,ht.U)(qs=>null===qs?null:[new qi(Ci,qs)]));if(0===Po.length&&0===Ar.length)return(0,ee.of)([new qi(Ci,[])]);const Al=cs(w)===ie;return this.processSegment(Io,Po,Bs,Ar,Al?nn:ie).pipe((0,ht.U)(qs=>null===qs?null:[new qi(Ci,qs)]))}))}}function se(S){const x=S.value.routeConfig;return x&&""===x.path&&void 0===x.redirectTo}function Me(S){const x=[],w=new Set;for(const k of S){if(!se(k)){x.push(k);continue}const z=x.find(ie=>k.value.routeConfig===ie.value.routeConfig);void 0!==z?(z.children.push(...k.children),w.add(z)):x.push(k)}for(const k of w){const z=Me(k.children);x.push(new qi(k.value,z))}return x.filter(k=>!w.has(k))}function Wt(S){let x=S;for(;x._sourceSegment;)x=x._sourceSegment;return x}function Ln(S){var x;let w=S,k=null!==(x=w._segmentIndexShift)&&void 0!==x?x:0;for(;w._sourceSegment;){var z;w=w._sourceSegment,k+=null!==(z=w._segmentIndexShift)&&void 0!==z?z:0}return k-1}function $r(S){return S.data||{}}function Lr(S){return S.resolve||{}}function Gs(S){return"string"==typeof S.title||null===S.title}function Ls(S){return(0,_t.w)(x=>{const w=S(x);return w?(0,y.D)(w).pipe((0,ht.U)(()=>x)):(0,ee.of)(x)})}const Ws=new E.OlP("ROUTES");let Aa=(()=>{class S{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,E.f3M)(E.Sil)}loadComponent(w){if(this.componentLoaders.get(w))return this.componentLoaders.get(w);if(w._loadedComponent)return(0,ee.of)(w._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(w);const k=Tn(w.loadComponent()).pipe((0,ht.U)(Gl),(0,lt.b)(ie=>{this.onLoadEndListener&&this.onLoadEndListener(w),w._loadedComponent=ie}),Rn(()=>{this.componentLoaders.delete(w)})),z=new Pe(k,()=>new Ie.x).pipe(Oe());return this.componentLoaders.set(w,z),z}loadChildren(w,k){if(this.childrenLoaders.get(k))return this.childrenLoaders.get(k);if(k._loadedRoutes)return(0,ee.of)({routes:k._loadedRoutes,injector:k._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(k);const ie=this.loadModuleFactoryOrRoutes(k.loadChildren).pipe((0,ht.U)(nt=>{this.onLoadEndListener&&this.onLoadEndListener(k);let Pt,pn,$n=!1;Array.isArray(nt)?pn=nt:(Pt=nt.create(w).injector,pn=Zr(Pt.get(Ws,[],E.XFs.Self|E.XFs.Optional)));return{routes:pn.map(zi),injector:Pt}}),Rn(()=>{this.childrenLoaders.delete(k)})),le=new Pe(ie,()=>new Ie.x).pipe(Oe());return this.childrenLoaders.set(k,le),le}loadModuleFactoryOrRoutes(w){return Tn(w()).pipe((0,ht.U)(Gl),(0,ke.z)(k=>k instanceof E.YKP||Array.isArray(k)?(0,ee.of)(k):(0,y.D)(this.compiler.compileModuleAsync(k))))}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=E.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function Gl(S){return function Wa(S){return S&&"object"==typeof S&&"default"in S}(S)?S.default:S}let _a=(()=>{class S{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Ie.x,this.configLoader=(0,E.f3M)(Aa),this.environmentInjector=(0,E.f3M)(E.lqb),this.urlSerializer=(0,E.f3M)(Ge),this.rootContexts=(0,E.f3M)(Qo),this.navigationId=0,this.afterPreactivation=()=>(0,ee.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=z=>this.events.next(new Et(z)),this.configLoader.onLoadStartListener=z=>this.events.next(new tt(z))}complete(){var w;null===(w=this.transitions)||void 0===w||w.complete()}handleNavigationRequest(w){var k;const z=++this.navigationId;null===(k=this.transitions)||void 0===k||k.next({...this.transitions.value,...w,id:z})}setupNavigations(w){return this.transitions=new fe.X({id:0,targetPageId:0,currentUrlTree:w.currentUrlTree,currentRawUrl:w.currentUrlTree,extractedUrl:w.urlHandlingStrategy.extract(w.currentUrlTree),urlAfterRedirects:w.urlHandlingStrategy.extract(w.currentUrlTree),rawUrl:w.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ke,restoredState:null,currentSnapshot:w.routerState.snapshot,targetSnapshot:null,currentRouterState:w.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,ft.h)(k=>0!==k.id),(0,ht.U)(k=>({...k,extractedUrl:w.urlHandlingStrategy.extract(k.rawUrl)})),(0,_t.w)(k=>{let z=!1,ie=!1;return(0,ee.of)(k).pipe((0,lt.b)(le=>{this.currentNavigation={id:le.id,initialUrl:le.rawUrl,extractedUrl:le.extractedUrl,trigger:le.source,extras:le.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,_t.w)(le=>{var nt;const Pt=w.browserUrlTree.toString(),pn=!w.navigated||le.extractedUrl.toString()!==Pt||Pt!==w.currentUrlTree.toString(),$n=null!==(nt=le.extras.onSameUrlNavigation)&&void 0!==nt?nt:w.onSameUrlNavigation;if(!pn&&"reload"!==$n){const On="";return this.events.next(new mn(le.id,w.serializeUrl(k.rawUrl),On,0)),w.rawUrlTree=le.rawUrl,le.resolve(null),Ze.E}if(w.urlHandlingStrategy.shouldProcessUrl(le.rawUrl))return Wc(le.source)&&(w.browserUrlTree=le.extractedUrl),(0,ee.of)(le).pipe((0,_t.w)(On=>{var Ci,Li;const Ks=null===(Ci=this.transitions)||void 0===Ci?void 0:Ci.getValue();return this.events.next(new kt(On.id,this.urlSerializer.serialize(On.extractedUrl),On.source,On.restoredState)),Ks!==(null===(Li=this.transitions)||void 0===Li?void 0:Li.getValue())?Ze.E:Promise.resolve(On)}),function ao(S,x,w,k){return(0,_t.w)(z=>function Ao(S,x,w,k,z){return new wl(S,x,w,k,z).apply()}(S,x,w,z.extractedUrl,k).pipe((0,ht.U)(ie=>({...z,urlAfterRedirects:ie}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,w.config),(0,lt.b)(On=>{this.currentNavigation={...this.currentNavigation,finalUrl:On.urlAfterRedirects},k.urlAfterRedirects=On.urlAfterRedirects}),function wr(S,x,w,k,z){return(0,ke.z)(ie=>function Cl(S,x,w,k,z,ie,le="emptyOnly"){return new L(S,x,w,k,z,le,ie).recognize().pipe((0,_t.w)(nt=>null===nt?function zl(S){return new xe.y(x=>x.error(S))}(new Rr):(0,ee.of)(nt)))}(S,x,w,ie.urlAfterRedirects,k.serialize(ie.urlAfterRedirects),k,z).pipe((0,ht.U)(le=>({...ie,targetSnapshot:le}))))}(this.environmentInjector,this.rootComponentType,w.config,this.urlSerializer,w.paramsInheritanceStrategy),(0,lt.b)(On=>{if(k.targetSnapshot=On.targetSnapshot,"eager"===w.urlUpdateStrategy){if(!On.extras.skipLocationChange){const Li=w.urlHandlingStrategy.merge(On.urlAfterRedirects,On.rawUrl);w.setBrowserUrl(Li,On)}w.browserUrlTree=On.urlAfterRedirects}const Ci=new Gn(On.id,this.urlSerializer.serialize(On.extractedUrl),this.urlSerializer.serialize(On.urlAfterRedirects),On.targetSnapshot);this.events.next(Ci)}));if(pn&&w.urlHandlingStrategy.shouldProcessUrl(w.rawUrlTree)){const{id:On,extractedUrl:Ci,source:Li,restoredState:Ks,extras:Io}=le,Po=new kt(On,this.urlSerializer.serialize(Ci),Li,Ks);this.events.next(Po);const Bs=ba(Ci,this.rootComponentType).snapshot;return k={...le,targetSnapshot:Bs,urlAfterRedirects:Ci,extras:{...Io,skipLocationChange:!1,replaceUrl:!1}},(0,ee.of)(k)}{const On="";return this.events.next(new mn(le.id,w.serializeUrl(k.extractedUrl),On,1)),w.rawUrlTree=le.rawUrl,le.resolve(null),Ze.E}}),(0,lt.b)(le=>{const nt=new gi(le.id,this.urlSerializer.serialize(le.extractedUrl),this.urlSerializer.serialize(le.urlAfterRedirects),le.targetSnapshot);this.events.next(nt)}),(0,ht.U)(le=>k={...le,guards:$o(le.targetSnapshot,le.currentSnapshot,this.rootContexts)}),function _l(S,x){return(0,ke.z)(w=>{const{targetSnapshot:k,currentSnapshot:z,guards:{canActivateChecks:ie,canDeactivateChecks:le}}=w;return 0===le.length&&0===ie.length?(0,ee.of)({...w,guardsResult:!0}):function ya(S,x,w,k){return(0,y.D)(S).pipe((0,ke.z)(z=>function El(S,x,w,k,z){const ie=x&&x.routeConfig?x.routeConfig.canDeactivate:null;if(!ie||0===ie.length)return(0,ee.of)(!0);const le=ie.map(nt=>{var Pt;const pn=null!==(Pt=pa(x))&&void 0!==Pt?Pt:z,$n=b(nt,pn);return Tn(function dn(S){return S&&B(S.canDeactivate)}($n)?$n.canDeactivate(S,x,w,k):pn.runInContext(()=>$n(S,x,w,k))).pipe((0,Fe.P)())});return(0,ee.of)(le).pipe(Ai())}(z.component,z.route,w,x,k)),(0,Fe.P)(z=>!0!==z,!0))}(le,k,z,S).pipe((0,ke.z)(nt=>nt&&function R(S){return"boolean"==typeof S}(nt)?function us(S,x,w,k){return(0,y.D)(x).pipe((0,Ne.b)(z=>(0,Re.z)(function sl(S,x){return null!==S&&x&&x(new qt(S)),(0,ee.of)(!0)}(z.route.parent,k),function rs(S,x){return null!==S&&x&&x(new Vn(S)),(0,ee.of)(!0)}(z.route,k),function vo(S,x,w){const k=x[x.length-1],ie=x.slice(0,x.length-1).reverse().map(le=>function ma(S){const x=S.routeConfig?S.routeConfig.canActivateChild:null;return x&&0!==x.length?{node:S,guards:x}:null}(le)).filter(le=>null!==le).map(le=>de(()=>{const nt=le.guards.map(Pt=>{var pn;const $n=null!==(pn=pa(le.node))&&void 0!==pn?pn:w,On=b(Pt,$n);return Tn(function yt(S){return S&&B(S.canActivateChild)}(On)?On.canActivateChild(k,S):$n.runInContext(()=>On(k,S))).pipe((0,Fe.P)())});return(0,ee.of)(nt).pipe(Ai())}));return(0,ee.of)(ie).pipe(Ai())}(S,z.path,w),function So(S,x,w){const k=x.routeConfig?x.routeConfig.canActivate:null;if(!k||0===k.length)return(0,ee.of)(!0);const z=k.map(ie=>de(()=>{var le;const nt=null!==(le=pa(x))&&void 0!==le?le:w,Pt=b(ie,nt);return Tn(function ne(S){return S&&B(S.canActivate)}(Pt)?Pt.canActivate(x,S):nt.runInContext(()=>Pt(x,S))).pipe((0,Fe.P)())}));return(0,ee.of)(z).pipe(Ai())}(S,z.route,w))),(0,Fe.P)(z=>!0!==z,!0))}(k,ie,S,x):(0,ee.of)(nt)),(0,ht.U)(nt=>({...w,guardsResult:nt})))})}(this.environmentInjector,le=>this.events.next(le)),(0,lt.b)(le=>{if(k.guardsResult=le.guardsResult,jn(le.guardsResult))throw To(0,le.guardsResult);const nt=new Jn(le.id,this.urlSerializer.serialize(le.extractedUrl),this.urlSerializer.serialize(le.urlAfterRedirects),le.targetSnapshot,!!le.guardsResult);this.events.next(nt)}),(0,ft.h)(le=>!!le.guardsResult||(w.restoreHistory(le),this.cancelNavigationTransition(le,"",3),!1)),Ls(le=>{if(le.guards.canActivateChecks.length)return(0,ee.of)(le).pipe((0,lt.b)(nt=>{const Pt=new es(nt.id,this.urlSerializer.serialize(nt.extractedUrl),this.urlSerializer.serialize(nt.urlAfterRedirects),nt.targetSnapshot);this.events.next(Pt)}),(0,_t.w)(nt=>{let Pt=!1;return(0,ee.of)(nt).pipe(function Fi(S,x){return(0,ke.z)(w=>{const{targetSnapshot:k,guards:{canActivateChecks:z}}=w;if(!z.length)return(0,ee.of)(w);let ie=0;return(0,y.D)(z).pipe((0,Ne.b)(le=>function Ri(S,x,w,k){const z=S.routeConfig,ie=S._resolve;return void 0!==(null==z?void 0:z.title)&&!Gs(z)&&(ie[En]=z.title),function Gi(S,x,w,k){const z=function ra(S){return[...Object.keys(S),...Object.getOwnPropertySymbols(S)]}(S);if(0===z.length)return(0,ee.of)({});const ie={};return(0,y.D)(z).pipe((0,ke.z)(le=>function xo(S,x,w,k){var z;const ie=null!==(z=pa(x))&&void 0!==z?z:k,le=b(S,ie);return Tn(le.resolve?le.resolve(x,w):ie.runInContext(()=>le(x,w)))}(S[le],x,w,k).pipe((0,Fe.P)(),(0,lt.b)(nt=>{ie[le]=nt}))),$t(1),function ln(S){return(0,ht.U)(()=>S)}(ie),(0,vt.K)(le=>fs(le)?Ze.E:et(le)))}(ie,S,x,k).pipe((0,ht.U)(le=>(S._resolvedData=le,S.data=no(S,w).resolve,z&&Gs(z)&&(S.data[En]=z.title),null)))}(le.route,k,S,x)),(0,lt.b)(()=>ie++),$t(1),(0,ke.z)(le=>ie===z.length?(0,ee.of)(w):Ze.E))})}(w.paramsInheritanceStrategy,this.environmentInjector),(0,lt.b)({next:()=>Pt=!0,complete:()=>{Pt||(w.restoreHistory(nt),this.cancelNavigationTransition(nt,"",2))}}))}),(0,lt.b)(nt=>{const Pt=new ut(nt.id,this.urlSerializer.serialize(nt.extractedUrl),this.urlSerializer.serialize(nt.urlAfterRedirects),nt.targetSnapshot);this.events.next(Pt)}))}),Ls(le=>{const nt=Pt=>{var pn;const $n=[];null!==(pn=Pt.routeConfig)&&void 0!==pn&&pn.loadComponent&&!Pt.routeConfig._loadedComponent&&$n.push(this.configLoader.loadComponent(Pt.routeConfig).pipe((0,lt.b)(On=>{Pt.component=On}),(0,ht.U)(()=>{})));for(const On of Pt.children)$n.push(...nt(On));return $n};return He(nt(le.targetSnapshot.root)).pipe((0,Tt.d)(),(0,ct.q)(1))}),Ls(()=>this.afterPreactivation()),(0,ht.U)(le=>{const nt=function fa(S,x,w){const k=Lo(S,x._root,w?w._root:void 0);return new Fs(k,x)}(w.routeReuseStrategy,le.targetSnapshot,le.currentRouterState);return k={...le,targetRouterState:nt}}),(0,lt.b)(le=>{w.currentUrlTree=le.urlAfterRedirects,w.rawUrlTree=w.urlHandlingStrategy.merge(le.urlAfterRedirects,le.rawUrl),w.routerState=le.targetRouterState,"deferred"===w.urlUpdateStrategy&&(le.extras.skipLocationChange||w.setBrowserUrl(w.rawUrlTree,le),w.browserUrlTree=le.urlAfterRedirects)}),((S,x,w)=>(0,ht.U)(k=>(new ga(x,k.targetRouterState,k.currentRouterState,w).activate(S),k)))(this.rootContexts,w.routeReuseStrategy,le=>this.events.next(le)),(0,ct.q)(1),(0,lt.b)({next:le=>{var nt;z=!0,this.lastSuccessfulNavigation=this.currentNavigation,w.navigated=!0,this.events.next(new Bt(le.id,this.urlSerializer.serialize(le.extractedUrl),this.urlSerializer.serialize(w.currentUrlTree))),null===(nt=w.titleStrategy)||void 0===nt||nt.updateTitle(le.targetRouterState.snapshot),le.resolve(!0)},complete:()=>{z=!0}}),Rn(()=>{var le;z||ie||this.cancelNavigationTransition(k,"",1),(null===(le=this.currentNavigation)||void 0===le?void 0:le.id)===k.id&&(this.currentNavigation=null)}),(0,vt.K)(le=>{if(ie=!0,so(le)){Xo(le)||(w.navigated=!0,w.restoreHistory(k,!0));const Pt=new Jt(k.id,this.urlSerializer.serialize(k.extractedUrl),le.message,le.cancellationCode);if(this.events.next(Pt),Xo(le)){const pn=w.urlHandlingStrategy.merge(le.url,w.rawUrlTree),$n={skipLocationChange:k.extras.skipLocationChange,replaceUrl:"eager"===w.urlUpdateStrategy||Wc(k.source)};w.scheduleNavigation(pn,Ke,null,$n,{resolve:k.resolve,reject:k.reject,promise:k.promise})}else k.resolve(!1)}else{var nt;w.restoreHistory(k,!0);const Pt=new zn(k.id,this.urlSerializer.serialize(k.extractedUrl),le,null!==(nt=k.targetSnapshot)&&void 0!==nt?nt:void 0);this.events.next(Pt);try{k.resolve(w.errorHandler(le))}catch(pn){k.reject(pn)}}return Ze.E}))}))}cancelNavigationTransition(w,k,z){const ie=new Jt(w.id,this.urlSerializer.serialize(w.extractedUrl),k,z);this.events.next(ie),w.resolve(!1)}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=E.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function Wc(S){return S!==Ke}let Wi=(()=>{class S{buildTitle(w){let k,z=w.root;for(;void 0!==z;){var ie;k=null!==(ie=this.getResolvedTitleForRoute(z))&&void 0!==ie?ie:k,z=z.children.find(le=>le.outlet===nn)}return k}getResolvedTitleForRoute(w){return w.data[En]}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=E.Yz7({token:S,factory:function(){return(0,E.f3M)(bl)},providedIn:"root"}),S})(),bl=(()=>{class S extends Wi{constructor(w){super(),this.title=w}updateTitle(w){const k=this.buildTitle(w);void 0!==k&&this.title.setTitle(k)}}return S.\u0275fac=function(w){return new(w||S)(E.LFG(wn.Dx))},S.\u0275prov=E.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})(),Zi=(()=>{class S{}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=E.Yz7({token:S,factory:function(){return(0,E.f3M)(Wl)},providedIn:"root"}),S})();class gu{shouldDetach(x){return!1}store(x,w){}shouldAttach(x){return!1}retrieve(x){return null}shouldReuseRoute(x,w){return x.routeConfig===w.routeConfig}}let Wl=(()=>{class S extends gu{}return S.\u0275fac=function(){let x;return function(k){return(x||(x=E.n5z(S)))(k||S)}}(),S.\u0275prov=E.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();const ss=new E.OlP("",{providedIn:"root",factory:()=>({})});let ci=(()=>{class S{}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=E.Yz7({token:S,factory:function(){return(0,E.f3M)(sc)},providedIn:"root"}),S})(),sc=(()=>{class S{shouldProcessUrl(w){return!0}extract(w){return w}merge(w,k){return w}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=E.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function ir(S){throw S}function oc(S,x,w){return x.parse("/")}const Fn={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Lt={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let sn=(()=>{class S{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){var w;return null===(w=this.location.getState())||void 0===w?void 0:w.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){var w;this.disposed=!1,this.currentPageId=0,this.console=(0,E.f3M)(E.c2e),this.isNgZoneEnabled=!1,this.options=(0,E.f3M)(ss,{optional:!0})||{},this.errorHandler=this.options.errorHandler||ir,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||oc,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,E.f3M)(ci),this.routeReuseStrategy=(0,E.f3M)(Zi),this.urlCreationStrategy=(0,E.f3M)(ki),this.titleStrategy=(0,E.f3M)(Wi),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Zr(null!==(w=(0,E.f3M)(Ws,{optional:!0}))&&void 0!==w?w:[]),this.navigationTransitions=(0,E.f3M)(_a),this.urlSerializer=(0,E.f3M)(Ge),this.location=(0,E.f3M)($e.Ye),this.isNgZoneEnabled=(0,E.f3M)(E.R0b)instanceof E.R0b&&E.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new or,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ba(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(k=>{this.lastSuccessfulId=k.id,this.currentPageId=k.targetPageId},k=>{this.console.warn(`Unhandled Navigation Error: ${k}`)})}resetRootComponentType(w){this.routerState.root.component=w,this.navigationTransitions.rootComponentType=w}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const w=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Ke,w)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(w=>{const k="popstate"===w.type?"popstate":"hashchange";"popstate"===k&&setTimeout(()=>{this.navigateToSyncWithBrowser(w.url,k,w.state)},0)}))}navigateToSyncWithBrowser(w,k,z){const ie={replaceUrl:!0},le=null!=z&&z.navigationId?z:null;if(z){const Pt={...z};delete Pt.navigationId,delete Pt.\u0275routerPageId,0!==Object.keys(Pt).length&&(ie.state=Pt)}const nt=this.parseUrl(w);this.scheduleNavigation(nt,k,le,ie)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(w){this.config=w.map(zi),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(w,k={}){const{relativeTo:z,queryParams:ie,fragment:le,queryParamsHandling:nt,preserveFragment:Pt}=k,pn=Pt?this.currentUrlTree.fragment:le;let $n=null;switch(nt){case"merge":$n={...this.currentUrlTree.queryParams,...ie};break;case"preserve":$n=this.currentUrlTree.queryParams;break;default:$n=ie||null}return null!==$n&&($n=this.removeEmptyProps($n)),this.urlCreationStrategy.createUrlTree(z,this.routerState,this.currentUrlTree,w,$n,null!=pn?pn:null)}navigateByUrl(w,k={skipLocationChange:!1}){const z=jn(w)?w:this.parseUrl(w),ie=this.urlHandlingStrategy.merge(z,this.rawUrlTree);return this.scheduleNavigation(ie,Ke,null,k)}navigate(w,k={skipLocationChange:!1}){return function ui(S){for(let x=0;x<S.length;x++){const w=S[x];if(null==w)throw new E.vHH(4008,false)}}(w),this.navigateByUrl(this.createUrlTree(w,k),k)}serializeUrl(w){return this.urlSerializer.serialize(w)}parseUrl(w){let k;try{k=this.urlSerializer.parse(w)}catch(z){k=this.malformedUriErrorHandler(z,this.urlSerializer,w)}return k}isActive(w,k){let z;if(z=!0===k?{...Fn}:!1===k?{...Lt}:k,jn(w))return Jr(this.currentUrlTree,w,z);const ie=this.parseUrl(w);return Jr(this.currentUrlTree,ie,z)}removeEmptyProps(w){return Object.keys(w).reduce((k,z)=>{const ie=w[z];return null!=ie&&(k[z]=ie),k},{})}scheduleNavigation(w,k,z,ie,le){if(this.disposed)return Promise.resolve(!1);let nt,Pt,pn,$n;if(le?(nt=le.resolve,Pt=le.reject,pn=le.promise):pn=new Promise((Li,Ks)=>{nt=Li,Pt=Ks}),"computed"===this.canceledNavigationResolution)if(z&&z.\u0275routerPageId)$n=z.\u0275routerPageId;else if(ie.replaceUrl||ie.skipLocationChange){var On;$n=null!==(On=this.browserPageId)&&void 0!==On?On:0}else{var Ci;$n=(null!==(Ci=this.browserPageId)&&void 0!==Ci?Ci:0)+1}else $n=0;return this.navigationTransitions.handleNavigationRequest({targetPageId:$n,source:k,restoredState:z,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:w,extras:ie,resolve:nt,reject:Pt,promise:pn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),pn.catch(Li=>Promise.reject(Li))}setBrowserUrl(w,k){const z=this.urlSerializer.serialize(w),ie={...k.extras.state,...this.generateNgRouterState(k.id,k.targetPageId)};this.location.isCurrentPathEqualTo(z)||k.extras.replaceUrl?this.location.replaceState(z,"",ie):this.location.go(z,"",ie)}restoreHistory(w,k=!1){if("computed"===this.canceledNavigationResolution){var z,ie;const le=this.currentPageId-w.targetPageId;"popstate"!==w.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(z=this.getCurrentNavigation())||void 0===z?void 0:z.finalUrl)||0===le?this.currentUrlTree===(null===(ie=this.getCurrentNavigation())||void 0===ie?void 0:ie.finalUrl)&&0===le&&(this.resetState(w),this.browserUrlTree=w.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(le)}else"replace"===this.canceledNavigationResolution&&(k&&this.resetState(w),this.resetUrlToCurrentUrlTree())}resetState(w){this.routerState=w.currentRouterState,this.currentUrlTree=w.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,w.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(w,k){return"computed"===this.canceledNavigationResolution?{navigationId:w,\u0275routerPageId:k}:{navigationId:w}}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=E.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})(),Ro=(()=>{class S{constructor(w,k,z,ie,le,nt){var Pt;this.router=w,this.route=k,this.tabIndexAttribute=z,this.renderer=ie,this.el=le,this.locationStrategy=nt,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Ie.x;const pn=null===(Pt=le.nativeElement.tagName)||void 0===Pt?void 0:Pt.toLowerCase();this.isAnchorElement="a"===pn||"area"===pn,this.isAnchorElement?this.subscription=w.events.subscribe($n=>{$n instanceof Bt&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(w){this._preserveFragment=(0,E.D6c)(w)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(w){this._skipLocationChange=(0,E.D6c)(w)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(w){this._replaceUrl=(0,E.D6c)(w)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(w){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",w)}ngOnChanges(w){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(w){null!=w?(this.commands=Array.isArray(w)?w:[w],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(w,k,z,ie,le){return!!(null===this.urlTree||this.isAnchorElement&&(0!==w||k||z||ie||le||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){var w;null===(w=this.subscription)||void 0===w||w.unsubscribe()}updateHref(){var w;this.href=null!==this.urlTree&&this.locationStrategy?null===(w=this.locationStrategy)||void 0===w?void 0:w.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const k=null===this.href?null:(0,E.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",k)}applyAttributeValue(w,k){const z=this.renderer,ie=this.el.nativeElement;null!==k?z.setAttribute(ie,w,k):z.removeAttribute(ie,w)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return S.\u0275fac=function(w){return new(w||S)(E.Y36(sn),E.Y36(xs),E.$8M("tabindex"),E.Y36(E.Qsj),E.Y36(E.SBq),E.Y36($e.S$))},S.\u0275dir=E.lG2({type:S,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(w,k){1&w&&E.NdJ("click",function(ie){return k.onClick(ie.button,ie.ctrlKey,ie.shiftKey,ie.altKey,ie.metaKey)}),2&w&&E.uIk("target",k.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[E.TTD]}),S})();class Kl{}let jo=(()=>{class S{constructor(w,k,z,ie,le){this.router=w,this.injector=z,this.preloadingStrategy=ie,this.loader=le}setUpPreloading(){this.subscription=this.router.events.pipe((0,ft.h)(w=>w instanceof Bt),(0,Ne.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(w,k){const z=[];for(const Pt of k){var ie,le;Pt.providers&&!Pt._injector&&(Pt._injector=(0,E.MMx)(Pt.providers,w,`Route: ${Pt.path}`));const pn=null!==(ie=Pt._injector)&&void 0!==ie?ie:w,$n=null!==(le=Pt._loadedInjector)&&void 0!==le?le:pn;var nt;(Pt.loadChildren&&!Pt._loadedRoutes&&void 0===Pt.canLoad||Pt.loadComponent&&!Pt._loadedComponent)&&z.push(this.preloadConfig(pn,Pt)),(Pt.children||Pt._loadedRoutes)&&z.push(this.processRoutes($n,null!==(nt=Pt.children)&&void 0!==nt?nt:Pt._loadedRoutes))}return(0,y.D)(z).pipe((0,Kn.J)())}preloadConfig(w,k){return this.preloadingStrategy.preload(k,()=>{let z;z=k.loadChildren&&void 0===k.canLoad?this.loader.loadChildren(w,k):(0,ee.of)(null);const ie=z.pipe((0,ke.z)(le=>{var nt;return null===le?(0,ee.of)(void 0):(k._loadedRoutes=le.routes,k._loadedInjector=le.injector,this.processRoutes(null!==(nt=le.injector)&&void 0!==nt?nt:w,le.routes))}));if(k.loadComponent&&!k._loadedComponent){const le=this.loader.loadComponent(k);return(0,y.D)([ie,le]).pipe((0,Kn.J)())}return ie})}}return S.\u0275fac=function(w){return new(w||S)(E.LFG(sn),E.LFG(E.Sil),E.LFG(E.lqb),E.LFG(Kl),E.LFG(Aa))},S.\u0275prov=E.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();const Ka=new E.OlP("");let Kc=(()=>{class S{constructor(w,k,z,ie,le={}){this.urlSerializer=w,this.transitions=k,this.viewportScroller=z,this.zone=ie,this.options=le,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},le.scrollPositionRestoration=le.scrollPositionRestoration||"disabled",le.anchorScrolling=le.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(w=>{w instanceof kt?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=w.navigationTrigger,this.restoredId=w.restoredState?w.restoredState.navigationId:0):w instanceof Bt&&(this.lastId=w.id,this.scheduleScrollEvent(w,this.urlSerializer.parse(w.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(w=>{w instanceof hr&&(w.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(w.position):w.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(w.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(w,k){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new hr(w,"popstate"===this.lastSource?this.store[this.restoredId]:null,k))})},0)})}ngOnDestroy(){var w,k;null===(w=this.routerEventsSubscription)||void 0===w||w.unsubscribe(),null===(k=this.scrollEventsSubscription)||void 0===k||k.unsubscribe()}}return S.\u0275fac=function(w){E.$Z()},S.\u0275prov=E.Yz7({token:S,factory:S.\u0275fac}),S})();var lo=(()=>((lo=lo||{})[lo.COMPLETE=0]="COMPLETE",lo[lo.FAILED=1]="FAILED",lo[lo.REDIRECTING=2]="REDIRECTING",lo))();const sr=!1;function sa(S,...x){return(0,E.MR2)([{provide:Ws,multi:!0,useValue:S},sr?{provide:rr,useValue:!0}:[],{provide:xs,useFactory:Tl,deps:[sn]},{provide:E.tb,multi:!0,useFactory:Mr},x.map(w=>w.\u0275providers)])}function Tl(S){return S.routerState.root}function oi(S,x){return{\u0275kind:S,\u0275providers:x}}const rr=new E.OlP("",{providedIn:"root",factory:()=>!1});function Mr(){const S=(0,E.f3M)(E.zs3);return x=>{var w,k;const z=S.get(E.z2F);if(x!==z.components[0])return;const ie=S.get(sn),le=S.get(Pn);1===S.get(ql)&&ie.initialNavigation(),null===(w=S.get(cc,null,E.XFs.Optional))||void 0===w||w.setUpPreloading(),null===(k=S.get(Ka,null,E.XFs.Optional))||void 0===k||k.init(),ie.resetRootComponentType(z.componentTypes[0]),le.closed||(le.next(),le.complete(),le.unsubscribe())}}const Pn=new E.OlP(sr?"bootstrap done indicator":"",{factory:()=>new Ie.x}),ql=new E.OlP(sr?"initial navigation":"",{providedIn:"root",factory:()=>1});function Yc(){let S=[];return S=sr?[{provide:E.Xts,multi:!0,useFactory:()=>{const x=(0,E.f3M)(sn);return()=>x.events.subscribe(w=>{var k,z,ie,le;null===(k=(z=console).group)||void 0===k||k.call(z,`Router Event: ${w.constructor.name}`),console.log(function xr(S){var x,w,k,z;if(!("type"in S))return`Unknown Router Event: ${S.constructor.name}`;switch(S.type){case 14:return`ActivationEnd(path: '${(null===(x=S.snapshot.routeConfig)||void 0===x?void 0:x.path)||""}')`;case 13:return`ActivationStart(path: '${(null===(w=S.snapshot.routeConfig)||void 0===w?void 0:w.path)||""}')`;case 12:return`ChildActivationEnd(path: '${(null===(k=S.snapshot.routeConfig)||void 0===k?void 0:k.path)||""}')`;case 11:return`ChildActivationStart(path: '${(null===(z=S.snapshot.routeConfig)||void 0===z?void 0:z.path)||""}')`;case 8:return`GuardsCheckEnd(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state}, shouldActivate: ${S.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state})`;case 2:return`NavigationCancel(id: ${S.id}, url: '${S.url}')`;case 16:return`NavigationSkipped(id: ${S.id}, url: '${S.url}')`;case 1:return`NavigationEnd(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${S.id}, url: '${S.url}', error: ${S.error})`;case 0:return`NavigationStart(id: ${S.id}, url: '${S.url}')`;case 6:return`ResolveEnd(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state})`;case 5:return`ResolveStart(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state})`;case 10:return`RouteConfigLoadEnd(path: ${S.route.path})`;case 9:return`RouteConfigLoadStart(path: ${S.route.path})`;case 4:return`RoutesRecognized(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state})`;case 15:return`Scroll(anchor: '${S.anchor}', position: '${S.position?`${S.position[0]}, ${S.position[1]}`:null}')`}}(w)),console.log(w),null===(ie=(le=console).groupEnd)||void 0===ie||ie.call(le)})}}]:[],oi(1,S)}const cc=new E.OlP(sr?"router preloader":"");function yu(S){return oi(0,[{provide:cc,useExisting:jo},{provide:Kl,useExisting:S}])}const Yr=!1,Ra=new E.OlP(Yr?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),Mi=[$e.Ye,{provide:Ge,useClass:Qe},sn,Qo,{provide:xs,useFactory:Tl,deps:[sn]},Aa,Yr?{provide:rr,useValue:!0}:[]];function vr(){return new E.PXZ("Router",sn)}let Or=(()=>{class S{constructor(w){}static forRoot(w,k){return{ngModule:S,providers:[Mi,Yr&&null!=k&&k.enableTracing?Yc().\u0275providers:[],{provide:Ws,multi:!0,useValue:w},{provide:Ra,useFactory:Xc,deps:[[sn,new E.FiY,new E.tp0]]},{provide:ss,useValue:k||{}},null!=k&&k.useHash?{provide:$e.S$,useClass:$e.Do}:{provide:$e.S$,useClass:$e.b0},{provide:Ka,useFactory:()=>{const S=(0,E.f3M)($e.EM),x=(0,E.f3M)(E.R0b),w=(0,E.f3M)(ss),k=(0,E.f3M)(_a),z=(0,E.f3M)(Ge);return w.scrollOffset&&S.setOffset(w.scrollOffset),new Kc(z,k,S,x,w)}},null!=k&&k.preloadingStrategy?yu(k.preloadingStrategy).\u0275providers:[],{provide:E.PXZ,multi:!0,useFactory:vr},null!=k&&k.initialNavigation?Ea(k):[],[{provide:Mo,useFactory:Mr},{provide:E.tb,multi:!0,useExisting:Mo}]]}}static forChild(w){return{ngModule:S,providers:[{provide:Ws,multi:!0,useValue:w}]}}}return S.\u0275fac=function(w){return new(w||S)(E.LFG(Ra,8))},S.\u0275mod=E.oAB({type:S}),S.\u0275inj=E.cJS({imports:[mi]}),S})();function Xc(S){if(Yr&&S)throw new E.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Ea(S){return["disabled"===S.initialNavigation?oi(3,[{provide:E.ip1,multi:!0,useFactory:()=>{const x=(0,E.f3M)(sn);return()=>{x.setUpLocationChangeListener()}}},{provide:ql,useValue:2}]).\u0275providers:[],"enabledBlocking"===S.initialNavigation?oi(2,[{provide:ql,useValue:0},{provide:E.ip1,multi:!0,deps:[E.zs3],useFactory:x=>{const w=x.get($e.V_,Promise.resolve());return()=>w.then(()=>new Promise(k=>{const z=x.get(sn),ie=x.get(Pn);(function al(S,x){S.events.pipe((0,ft.h)(w=>w instanceof Bt||w instanceof Jt||w instanceof zn||w instanceof mn),(0,ht.U)(w=>w instanceof Bt||w instanceof mn?lo.COMPLETE:w instanceof Jt&&(0===w.code||1===w.code)?lo.REDIRECTING:lo.FAILED),(0,ft.h)(w=>w!==lo.REDIRECTING),(0,ct.q)(1)).subscribe(()=>{x()})})(z,()=>{k(!0)}),x.get(_a).afterPreactivation=()=>(k(!0),ie.closed?(0,ee.of)(void 0):ie),z.initialNavigation()}))}}]).\u0275providers:[]]}const Mo=new E.OlP(Yr?"Router Initializer":"")},3942:(yn,gt,H)=>{"use strict";H.d(gt,{Z:()=>rt});var E=H(2090),y=H(4859),ee=H(6881),fe=H(1877);class Le{constructor(Re,Se){this._delegate=Re,this.firebase=Se,(0,ee._addComponent)(Re,new y.wA("app-compat",()=>this,"PUBLIC")),this.container=Re.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Re){this._delegate.automaticDataCollectionEnabled=Re}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Re=>{this._delegate.checkDestroyed(),Re()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,ee.deleteApp)(this._delegate)))}_getService(Re,Se=ee._DEFAULT_ENTRY_NAME){var de;this._delegate.checkDestroyed();const pt=this._delegate.container.getProvider(Re);return!pt.isInitialized()&&"EXPLICIT"===(null===(de=pt.getComponent())||void 0===de?void 0:de.instantiationMode)&&pt.initialize(),pt.getImmediate({identifier:Se})}_removeServiceInstance(Re,Se=ee._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Re).clearInstance(Se)}_addComponent(Re){(0,ee._addComponent)(this._delegate,Re)}_addOrOverwriteComponent(Re){(0,ee._addOrOverwriteComponent)(this._delegate,Re)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ye=new E.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Ce=function je(){const Dt=function Ue(Dt){const Re={},Se={__esModule:!0,initializeApp:function Y(Be,Oe={}){const Pe=ee.initializeApp(Be,Oe);if((0,E.r3)(Re,Pe.name))return Re[Pe.name];const Ie=new Dt(Pe,Se);return Re[Pe.name]=Ie,Ie},app:pt,registerVersion:ee.registerVersion,setLogLevel:ee.setLogLevel,onLog:ee.onLog,apps:null,SDK_VERSION:ee.SDK_VERSION,INTERNAL:{registerComponent:function Ze(Be){const Oe=Be.name,Pe=Oe.replace("-compat","");if(ee._registerComponent(Be)&&"PUBLIC"===Be.type){const Ie=($e=pt())=>{if("function"!=typeof $e[Pe])throw ye.create("invalid-app-argument",{appName:Oe});return $e[Pe]()};void 0!==Be.serviceProps&&(0,E.ZB)(Ie,Be.serviceProps),Se[Pe]=Ie,Dt.prototype[Pe]=function(...$e){return this._getService.bind(this,Oe).apply(this,Be.multipleInstances?$e:[])}}return"PUBLIC"===Be.type?Se[Pe]:null},removeApp:function de(Be){delete Re[Be]},useAsService:function xt(Be,Oe){return"serverAuth"===Oe?null:Oe},modularAPIs:ee}};function pt(Be){if(!(0,E.r3)(Re,Be=Be||ee._DEFAULT_ENTRY_NAME))throw ye.create("no-app",{appName:Be});return Re[Be]}return Se.default=Se,Object.defineProperty(Se,"apps",{get:function et(){return Object.keys(Re).map(Be=>Re[Be])}}),pt.App=Dt,Se}(Le);return Dt.INTERNAL=Object.assign(Object.assign({},Dt.INTERNAL),{createFirebaseNamespace:je,extendNamespace:function Re(Se){(0,E.ZB)(Dt,Se)},createSubscribe:E.ne,ErrorFactory:E.LL,deepExtend:E.ZB}),Dt}(),ge=new fe.Yd("@firebase/app-compat");if((0,E.jU)()&&void 0!==self.firebase){ge.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Dt=self.firebase.SDK_VERSION;Dt&&Dt.indexOf("LITE")>=0&&ge.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const rt=Ce;!function He(Dt){(0,ee.registerVersion)("@firebase/app-compat","0.2.9",Dt)}()},6881:(yn,gt,H)=>{"use strict";H.r(gt),H.d(gt,{FirebaseError:()=>fe.ZR,SDK_VERSION:()=>xi,_DEFAULT_ENTRY_NAME:()=>Br,_addComponent:()=>tn,_addOrOverwriteComponent:()=>fn,_apps:()=>Ir,_clearComponents:()=>qr,_components:()=>Tn,_getProvider:()=>Jr,_registerComponent:()=>on,_removeServiceInstance:()=>Sr,deleteApp:()=>Pr,getApp:()=>Yn,getApps:()=>Ei,initializeApp:()=>or,onLog:()=>Ge,registerVersion:()=>Ht,setLogLevel:()=>Qe});var E=H(5861),y=H(4859),ee=H(1877),fe=H(2090);const Le=(Ut,At)=>At.some(Qt=>Ut instanceof Qt);let xe,ye;const Ce=new WeakMap,ge=new WeakMap,ve=new WeakMap,ze=new WeakMap,He=new WeakMap;let Re={get(Ut,At,Qt){if(Ut instanceof IDBTransaction){if("done"===At)return ge.get(Ut);if("objectStoreNames"===At)return Ut.objectStoreNames||ve.get(Ut);if("store"===At)return Qt.objectStoreNames[1]?void 0:Qt.objectStore(Qt.objectStoreNames[0])}return Y(Ut[At])},set:(Ut,At,Qt)=>(Ut[At]=Qt,!0),has:(Ut,At)=>Ut instanceof IDBTransaction&&("done"===At||"store"===At)||At in Ut};function pt(Ut){return"function"==typeof Ut?function de(Ut){return Ut!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function je(){return ye||(ye=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ut)?function(...At){return Ut.apply(et(this),At),Y(Ce.get(this))}:function(...At){return Y(Ut.apply(et(this),At))}:function(At,...Qt){const Nn=Ut.call(et(this),At,...Qt);return ve.set(Nn,At.sort?At.sort():[At]),Y(Nn)}}(Ut):(Ut instanceof IDBTransaction&&function Dt(Ut){if(ge.has(Ut))return;const At=new Promise((Qt,Nn)=>{const jn=()=>{Ut.removeEventListener("complete",yr),Ut.removeEventListener("error",Cr),Ut.removeEventListener("abort",Cr)},yr=()=>{Qt(),jn()},Cr=()=>{Nn(Ut.error||new DOMException("AbortError","AbortError")),jn()};Ut.addEventListener("complete",yr),Ut.addEventListener("error",Cr),Ut.addEventListener("abort",Cr)});ge.set(Ut,At)}(Ut),Le(Ut,function Ue(){return xe||(xe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ut,Re):Ut)}function Y(Ut){if(Ut instanceof IDBRequest)return function rt(Ut){const At=new Promise((Qt,Nn)=>{const jn=()=>{Ut.removeEventListener("success",yr),Ut.removeEventListener("error",Cr)},yr=()=>{Qt(Y(Ut.result)),jn()},Cr=()=>{Nn(Ut.error),jn()};Ut.addEventListener("success",yr),Ut.addEventListener("error",Cr)});return At.then(Qt=>{Qt instanceof IDBCursor&&Ce.set(Qt,Ut)}).catch(()=>{}),He.set(At,Ut),At}(Ut);if(ze.has(Ut))return ze.get(Ut);const At=pt(Ut);return At!==Ut&&(ze.set(Ut,At),He.set(At,Ut)),At}const et=Ut=>He.get(Ut),Be=["get","getKey","getAll","getAllKeys","count"],Oe=["put","add","delete","clear"],Pe=new Map;function Ie(Ut,At){if(!(Ut instanceof IDBDatabase)||At in Ut||"string"!=typeof At)return;if(Pe.get(At))return Pe.get(At);const Qt=At.replace(/FromIndex$/,""),Nn=At!==Qt,jn=Oe.includes(Qt);if(!(Qt in(Nn?IDBIndex:IDBObjectStore).prototype)||!jn&&!Be.includes(Qt))return;const yr=function(){var Cr=(0,E.Z)(function*(Un,...tr){const Wn=this.transaction(Un,jn?"readwrite":"readonly");let ar=Wn.store;return Nn&&(ar=ar.index(tr.shift())),(yield Promise.all([ar[Qt](...tr),jn&&Wn.done]))[0]});return function(tr){return Cr.apply(this,arguments)}}();return Pe.set(At,yr),yr}!function Se(Ut){Re=Ut(Re)}(Ut=>({...Ut,get:(At,Qt,Nn)=>Ie(At,Qt)||Ut.get(At,Qt,Nn),has:(At,Qt)=>!!Ie(At,Qt)||Ut.has(At,Qt)}));class $e{constructor(At){this.container=At}getPlatformInfoString(){return this.container.getProviders().map(Qt=>{if(function ht(Ut){const At=Ut.getComponent();return"VERSION"===(null==At?void 0:At.type)}(Qt)){const Nn=Qt.getImmediate();return`${Nn.library}/${Nn.version}`}return null}).filter(Qt=>Qt).join(" ")}}const _t="@firebase/app",wt=new ee.Yd("@firebase/app"),Br="[DEFAULT]",Di={[_t]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ir=new Map,Tn=new Map;function tn(Ut,At){try{Ut.container.addComponent(At)}catch(Qt){wt.debug(`Component ${At.name} failed to register with FirebaseApp ${Ut.name}`,Qt)}}function fn(Ut,At){Ut.container.addOrOverwriteComponent(At)}function on(Ut){const At=Ut.name;if(Tn.has(At))return wt.debug(`There were multiple attempts to register component ${At}.`),!1;Tn.set(At,Ut);for(const Qt of Ir.values())tn(Qt,Ut);return!0}function Jr(Ut,At){const Qt=Ut.container.getProvider("heartbeat").getImmediate({optional:!0});return Qt&&Qt.triggerHeartbeat(),Ut.container.getProvider(At)}function Sr(Ut,At,Qt=Br){Jr(Ut,At).clearInstance(Qt)}function qr(){Tn.clear()}const pi=new fe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ur{constructor(At,Qt,Nn){this._isDeleted=!1,this._options=Object.assign({},At),this._config=Object.assign({},Qt),this._name=Qt.name,this._automaticDataCollectionEnabled=Qt.automaticDataCollectionEnabled,this._container=Nn,this.container.addComponent(new y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(At){this.checkDestroyed(),this._automaticDataCollectionEnabled=At}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(At){this._isDeleted=At}checkDestroyed(){if(this.isDeleted)throw pi.create("app-deleted",{appName:this._name})}}const xi="9.21.0";function or(Ut,At={}){let Qt=Ut;"object"!=typeof At&&(At={name:At});const Nn=Object.assign({name:Br,automaticDataCollectionEnabled:!1},At),jn=Nn.name;if("string"!=typeof jn||!jn)throw pi.create("bad-app-name",{appName:String(jn)});if(Qt||(Qt=(0,fe.aH)()),!Qt)throw pi.create("no-options");const yr=Ir.get(jn);if(yr){if((0,fe.vZ)(Qt,yr.options)&&(0,fe.vZ)(Nn,yr.config))return yr;throw pi.create("duplicate-app",{appName:jn})}const Cr=new y.H0(jn);for(const tr of Tn.values())Cr.addComponent(tr);const Un=new Ur(Qt,Nn,Cr);return Ir.set(jn,Un),Un}function Yn(Ut=Br){const At=Ir.get(Ut);if(!At&&Ut===Br)return or();if(!At)throw pi.create("no-app",{appName:Ut});return At}function Ei(){return Array.from(Ir.values())}function Pr(Ut){return mr.apply(this,arguments)}function mr(){return(mr=(0,E.Z)(function*(Ut){const At=Ut.name;Ir.has(At)&&(Ir.delete(At),yield Promise.all(Ut.container.getProviders().map(Qt=>Qt.delete())),Ut.isDeleted=!0)})).apply(this,arguments)}function Ht(Ut,At,Qt){var Nn;let jn=null!==(Nn=Di[Ut])&&void 0!==Nn?Nn:Ut;Qt&&(jn+=`-${Qt}`);const yr=jn.match(/\s|\//),Cr=At.match(/\s|\//);if(yr||Cr){const Un=[`Unable to register library "${jn}" with version "${At}":`];return yr&&Un.push(`library name "${jn}" contains illegal characters (whitespace or "/")`),yr&&Cr&&Un.push("and"),Cr&&Un.push(`version name "${At}" contains illegal characters (whitespace or "/")`),void wt.warn(Un.join(" "))}on(new y.wA(`${jn}-version`,()=>({library:jn,version:At}),"VERSION"))}function Ge(Ut,At){if(null!==Ut&&"function"!=typeof Ut)throw pi.create("invalid-log-argument");(0,ee.Am)(Ut,At)}function Qe(Ut){(0,ee.Ub)(Ut)}const Xt="firebase-heartbeat-database",zt=1,we="firebase-heartbeat-store";let be=null;function We(){return be||(be=function Ze(Ut,At,{blocked:Qt,upgrade:Nn,blocking:jn,terminated:yr}={}){const Cr=indexedDB.open(Ut,At),Un=Y(Cr);return Nn&&Cr.addEventListener("upgradeneeded",tr=>{Nn(Y(Cr.result),tr.oldVersion,tr.newVersion,Y(Cr.transaction),tr)}),Qt&&Cr.addEventListener("blocked",tr=>Qt(tr.oldVersion,tr.newVersion,tr)),Un.then(tr=>{yr&&tr.addEventListener("close",()=>yr()),jn&&tr.addEventListener("versionchange",Wn=>jn(Wn.oldVersion,Wn.newVersion,Wn))}).catch(()=>{}),Un}(Xt,zt,{upgrade:(Ut,At)=>{0===At&&Ut.createObjectStore(we)}}).catch(Ut=>{throw pi.create("idb-open",{originalErrorMessage:Ut.message})})),be}function ot(){return(ot=(0,E.Z)(function*(Ut){try{return(yield We()).transaction(we).objectStore(we).get(Ve(Ut))}catch(At){if(At instanceof fe.ZR)wt.warn(At.message);else{const Qt=pi.create("idb-get",{originalErrorMessage:null==At?void 0:At.message});wt.warn(Qt.message)}}})).apply(this,arguments)}function gn(Ut,At){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,E.Z)(function*(Ut,At){try{const Nn=(yield We()).transaction(we,"readwrite");return yield Nn.objectStore(we).put(At,Ve(Ut)),Nn.done}catch(Qt){if(Qt instanceof fe.ZR)wt.warn(Qt.message);else{const Nn=pi.create("idb-set",{originalErrorMessage:null==Qt?void 0:Qt.message});wt.warn(Nn.message)}}})).apply(this,arguments)}function Ve(Ut){return`${Ut.name}!${Ut.options.appId}`}class Ot{constructor(At){this.container=At,this._heartbeatsCache=null;const Qt=this.container.getProvider("app").getImmediate();this._storage=new Qn(Qt),this._heartbeatsCachePromise=this._storage.read().then(Nn=>(this._heartbeatsCache=Nn,Nn))}triggerHeartbeat(){var At=this;return(0,E.Z)(function*(){const Nn=At.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),jn=en();if(null===At._heartbeatsCache&&(At._heartbeatsCache=yield At._heartbeatsCachePromise),At._heartbeatsCache.lastSentHeartbeatDate!==jn&&!At._heartbeatsCache.heartbeats.some(yr=>yr.date===jn))return At._heartbeatsCache.heartbeats.push({date:jn,agent:Nn}),At._heartbeatsCache.heartbeats=At._heartbeatsCache.heartbeats.filter(yr=>{const Cr=new Date(yr.date).valueOf();return Date.now()-Cr<=2592e6}),At._storage.overwrite(At._heartbeatsCache)})()}getHeartbeatsHeader(){var At=this;return(0,E.Z)(function*(){if(null===At._heartbeatsCache&&(yield At._heartbeatsCachePromise),null===At._heartbeatsCache||0===At._heartbeatsCache.heartbeats.length)return"";const Qt=en(),{heartbeatsToSend:Nn,unsentEntries:jn}=function bn(Ut,At=1024){const Qt=[];let Nn=Ut.slice();for(const jn of Ut){const yr=Qt.find(Cr=>Cr.agent===jn.agent);if(yr){if(yr.dates.push(jn.date),cr(Qt)>At){yr.dates.pop();break}}else if(Qt.push({agent:jn.agent,dates:[jn.date]}),cr(Qt)>At){Qt.pop();break}Nn=Nn.slice(1)}return{heartbeatsToSend:Qt,unsentEntries:Nn}}(At._heartbeatsCache.heartbeats),yr=(0,fe.L)(JSON.stringify({version:2,heartbeats:Nn}));return At._heartbeatsCache.lastSentHeartbeatDate=Qt,jn.length>0?(At._heartbeatsCache.heartbeats=jn,yield At._storage.overwrite(At._heartbeatsCache)):(At._heartbeatsCache.heartbeats=[],At._storage.overwrite(At._heartbeatsCache)),yr})()}}function en(){return(new Date).toISOString().substring(0,10)}class Qn{constructor(At){this.app=At,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,E.Z)(function*(){return!!(0,fe.hl)()&&(0,fe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var At=this;return(0,E.Z)(function*(){return(yield At._canUseIndexedDBPromise)&&(yield function Ct(Ut){return ot.apply(this,arguments)}(At.app))||{heartbeats:[]}})()}overwrite(At){var Qt=this;return(0,E.Z)(function*(){var Nn;if(yield Qt._canUseIndexedDBPromise){const yr=yield Qt.read();return gn(Qt.app,{lastSentHeartbeatDate:null!==(Nn=At.lastSentHeartbeatDate)&&void 0!==Nn?Nn:yr.lastSentHeartbeatDate,heartbeats:At.heartbeats})}})()}add(At){var Qt=this;return(0,E.Z)(function*(){var Nn;if(yield Qt._canUseIndexedDBPromise){const yr=yield Qt.read();return gn(Qt.app,{lastSentHeartbeatDate:null!==(Nn=At.lastSentHeartbeatDate)&&void 0!==Nn?Nn:yr.lastSentHeartbeatDate,heartbeats:[...yr.heartbeats,...At.heartbeats]})}})()}}function cr(Ut){return(0,fe.L)(JSON.stringify({version:2,heartbeats:Ut})).length}!function Gr(Ut){on(new y.wA("platform-logger",At=>new $e(At),"PRIVATE")),on(new y.wA("heartbeat",At=>new Ot(At),"PRIVATE")),Ht(_t,"0.9.9",Ut),Ht(_t,"0.9.9","esm2017"),Ht("fire-js","")}("")},4859:(yn,gt,H)=>{"use strict";H.d(gt,{H0:()=>Ue,wA:()=>ee,zt:()=>Le});var E=H(5861),y=H(2090);class ee{constructor(Ce,ge,ve){this.name=Ce,this.instanceFactory=ge,this.type=ve,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Ce){return this.instantiationMode=Ce,this}setMultipleInstances(Ce){return this.multipleInstances=Ce,this}setServiceProps(Ce){return this.serviceProps=Ce,this}setInstanceCreatedCallback(Ce){return this.onInstanceCreated=Ce,this}}const fe="[DEFAULT]";class Le{constructor(Ce,ge){this.name=Ce,this.container=ge,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Ce){const ge=this.normalizeInstanceIdentifier(Ce);if(!this.instancesDeferred.has(ge)){const ve=new y.BH;if(this.instancesDeferred.set(ge,ve),this.isInitialized(ge)||this.shouldAutoInitialize())try{const ze=this.getOrInitializeService({instanceIdentifier:ge});ze&&ve.resolve(ze)}catch{}}return this.instancesDeferred.get(ge).promise}getImmediate(Ce){var ge;const ve=this.normalizeInstanceIdentifier(null==Ce?void 0:Ce.identifier),ze=null!==(ge=null==Ce?void 0:Ce.optional)&&void 0!==ge&&ge;if(!this.isInitialized(ve)&&!this.shouldAutoInitialize()){if(ze)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ve})}catch(He){if(ze)return null;throw He}}getComponent(){return this.component}setComponent(Ce){if(Ce.name!==this.name)throw Error(`Mismatching Component ${Ce.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Ce,this.shouldAutoInitialize()){if(function ye(je){return"EAGER"===je.instantiationMode}(Ce))try{this.getOrInitializeService({instanceIdentifier:fe})}catch{}for(const[ge,ve]of this.instancesDeferred.entries()){const ze=this.normalizeInstanceIdentifier(ge);try{const He=this.getOrInitializeService({instanceIdentifier:ze});ve.resolve(He)}catch{}}}}clearInstance(Ce=fe){this.instancesDeferred.delete(Ce),this.instancesOptions.delete(Ce),this.instances.delete(Ce)}delete(){var Ce=this;return(0,E.Z)(function*(){const ge=Array.from(Ce.instances.values());yield Promise.all([...ge.filter(ve=>"INTERNAL"in ve).map(ve=>ve.INTERNAL.delete()),...ge.filter(ve=>"_delete"in ve).map(ve=>ve._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Ce=fe){return this.instances.has(Ce)}getOptions(Ce=fe){return this.instancesOptions.get(Ce)||{}}initialize(Ce={}){const{options:ge={}}=Ce,ve=this.normalizeInstanceIdentifier(Ce.instanceIdentifier);if(this.isInitialized(ve))throw Error(`${this.name}(${ve}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ze=this.getOrInitializeService({instanceIdentifier:ve,options:ge});for(const[He,rt]of this.instancesDeferred.entries())ve===this.normalizeInstanceIdentifier(He)&&rt.resolve(ze);return ze}onInit(Ce,ge){var ve;const ze=this.normalizeInstanceIdentifier(ge),He=null!==(ve=this.onInitCallbacks.get(ze))&&void 0!==ve?ve:new Set;He.add(Ce),this.onInitCallbacks.set(ze,He);const rt=this.instances.get(ze);return rt&&Ce(rt,ze),()=>{He.delete(Ce)}}invokeOnInitCallbacks(Ce,ge){const ve=this.onInitCallbacks.get(ge);if(ve)for(const ze of ve)try{ze(Ce,ge)}catch{}}getOrInitializeService({instanceIdentifier:Ce,options:ge={}}){let ve=this.instances.get(Ce);if(!ve&&this.component&&(ve=this.component.instanceFactory(this.container,{instanceIdentifier:(je=Ce,je===fe?void 0:je),options:ge}),this.instances.set(Ce,ve),this.instancesOptions.set(Ce,ge),this.invokeOnInitCallbacks(ve,Ce),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Ce,ve)}catch{}var je;return ve||null}normalizeInstanceIdentifier(Ce=fe){return this.component?this.component.multipleInstances?Ce:fe:Ce}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ue{constructor(Ce){this.name=Ce,this.providers=new Map}addComponent(Ce){const ge=this.getProvider(Ce.name);if(ge.isComponentSet())throw new Error(`Component ${Ce.name} has already been registered with ${this.name}`);ge.setComponent(Ce)}addOrOverwriteComponent(Ce){this.getProvider(Ce.name).isComponentSet()&&this.providers.delete(Ce.name),this.addComponent(Ce)}getProvider(Ce){if(this.providers.has(Ce))return this.providers.get(Ce);const ge=new Le(Ce,this);return this.providers.set(Ce,ge),ge}getProviders(){return Array.from(this.providers.values())}}},1877:(yn,gt,H)=>{"use strict";H.d(gt,{Am:()=>je,Ub:()=>Ue,Yd:()=>ye,in:()=>y});const E=[];var y=(()=>{return(Ce=y||(y={}))[Ce.DEBUG=0]="DEBUG",Ce[Ce.VERBOSE=1]="VERBOSE",Ce[Ce.INFO=2]="INFO",Ce[Ce.WARN=3]="WARN",Ce[Ce.ERROR=4]="ERROR",Ce[Ce.SILENT=5]="SILENT",y;var Ce})();const ee={debug:y.DEBUG,verbose:y.VERBOSE,info:y.INFO,warn:y.WARN,error:y.ERROR,silent:y.SILENT},fe=y.INFO,Le={[y.DEBUG]:"log",[y.VERBOSE]:"log",[y.INFO]:"info",[y.WARN]:"warn",[y.ERROR]:"error"},xe=(Ce,ge,...ve)=>{if(ge<Ce.logLevel)return;const ze=(new Date).toISOString(),He=Le[ge];if(!He)throw new Error(`Attempted to log a message with an invalid logType (value: ${ge})`);console[He](`[${ze}]  ${Ce.name}:`,...ve)};class ye{constructor(ge){this.name=ge,this._logLevel=fe,this._logHandler=xe,this._userLogHandler=null,E.push(this)}get logLevel(){return this._logLevel}set logLevel(ge){if(!(ge in y))throw new TypeError(`Invalid value "${ge}" assigned to \`logLevel\``);this._logLevel=ge}setLogLevel(ge){this._logLevel="string"==typeof ge?ee[ge]:ge}get logHandler(){return this._logHandler}set logHandler(ge){if("function"!=typeof ge)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ge}get userLogHandler(){return this._userLogHandler}set userLogHandler(ge){this._userLogHandler=ge}debug(...ge){this._userLogHandler&&this._userLogHandler(this,y.DEBUG,...ge),this._logHandler(this,y.DEBUG,...ge)}log(...ge){this._userLogHandler&&this._userLogHandler(this,y.VERBOSE,...ge),this._logHandler(this,y.VERBOSE,...ge)}info(...ge){this._userLogHandler&&this._userLogHandler(this,y.INFO,...ge),this._logHandler(this,y.INFO,...ge)}warn(...ge){this._userLogHandler&&this._userLogHandler(this,y.WARN,...ge),this._logHandler(this,y.WARN,...ge)}error(...ge){this._userLogHandler&&this._userLogHandler(this,y.ERROR,...ge),this._logHandler(this,y.ERROR,...ge)}}function Ue(Ce){E.forEach(ge=>{ge.setLogLevel(Ce)})}function je(Ce,ge){for(const ve of E){let ze=null;ge&&ge.level&&(ze=ee[ge.level]),ve.userLogHandler=null===Ce?null:(He,rt,...Dt)=>{const Re=Dt.map(Se=>{if(null==Se)return null;if("string"==typeof Se)return Se;if("number"==typeof Se||"boolean"==typeof Se)return Se.toString();if(Se instanceof Error)return Se.message;try{return JSON.stringify(Se)}catch{return null}}).filter(Se=>Se).join(" ");rt>=(null!=ze?ze:He.logLevel)&&Ce({level:y[rt].toLowerCase(),message:Re,args:Dt,type:He.name})}}}},4709:(yn,gt,H)=>{"use strict";H.d(gt,{dr:()=>pi,oU:()=>xi,cs:()=>go,YG:()=>mr,Sm:()=>Ht,PM:()=>Ge,W2:()=>ot,jY:()=>en,Gu:()=>bn,gu:()=>Qn,Xz:()=>cr,pK:()=>At,Ie:()=>Qt,Q$:()=>tr,q_:()=>Wn,I_:()=>Oi,jP:()=>so,Nd:()=>Ke,VI:()=>Nt,g2:()=>tt,wd:()=>qt,sr:()=>Vr,Pc:()=>ma,r4:()=>ga,SH:()=>Hi,YI:()=>vs,QI:()=>Br,j9:()=>Di});var E=H(5861),y=H(4650),ee=H(433),fe=H(655),Le=H(8421),xe=H(9751),ye=H(5577),Ue=H(1144),je=H(576),Ce=H(3268);const ge=["addListener","removeListener"],ve=["addEventListener","removeEventListener"],ze=["on","off"];function He(b,q,T,W){if((0,je.m)(T)&&(W=T,T=void 0),W)return He(b,q,T).pipe((0,Ce.Z)(W));const[pe,B]=function Se(b){return(0,je.m)(b.addEventListener)&&(0,je.m)(b.removeEventListener)}(b)?ve.map(R=>O=>b[R](q,O,T)):function Dt(b){return(0,je.m)(b.addListener)&&(0,je.m)(b.removeListener)}(b)?ge.map(rt(b,q)):function Re(b){return(0,je.m)(b.on)&&(0,je.m)(b.off)}(b)?ze.map(rt(b,q)):[];if(!pe&&(0,Ue.z)(b))return(0,ye.z)(R=>He(R,q,T))((0,Le.Xf)(b));if(!pe)throw new TypeError("Invalid event target");return new xe.y(R=>{const O=(...ne)=>R.next(1<ne.length?ne:ne[0]);return pe(O),()=>B(O)})}function rt(b,q){return T=>W=>b[T](q,W)}var de=H(7579),pt=H(1135),Y=H(2607),Oe=(H(2200),H(500),H(9892),H(1898),H(6406)),Pe=H(9397),Ie=H(3982),$e=H(9459),_t=(H(1557),H(6280)),ft=(H(3457),H(4349),H(9816)),Fe=H(9300),Ne=H(3900),lt=H(1884),vt=H(6895);const $t=Oe.i,De=["*"],nn=b=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(b):"function"==typeof requestAnimationFrame?requestAnimationFrame(b):setTimeout(b);let En=(()=>{class b{constructor(T,W){this.injector=T,this.el=W,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(T){this.el.nativeElement.value=this.lastValue=T,lr(this.el)}handleValueChange(T,W){T===this.el.nativeElement&&(W!==this.lastValue&&(this.lastValue=W,this.onChange(W)),lr(this.el))}_handleBlurEvent(T){T===this.el.nativeElement&&(this.onTouched(),lr(this.el))}registerOnChange(T){this.onChange=T}registerOnTouched(T){this.onTouched=T}setDisabledState(T){this.el.nativeElement.disabled=T}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let T;try{T=this.injector.get(ee.a5)}catch{}if(!T)return;T.statusChanges&&(this.statusChanges=T.statusChanges.subscribe(()=>lr(this.el)));const W=T.control;W&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(B=>{if(typeof W[B]<"u"){const R=W[B].bind(W);W[B]=(...O)=>{R(...O),lr(this.el)}}})}}return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.zs3),y.Y36(y.SBq))},b.\u0275dir=y.lG2({type:b,hostBindings:function(T,W){1&T&&y.NdJ("ionBlur",function(B){return W._handleBlurEvent(B.target)})}}),b})();const lr=b=>{nn(()=>{const q=b.nativeElement,T=null!=q.value&&q.value.toString().length>0,W=Er(q);Xn(q,W);const pe=q.closest("ion-item");pe&&Xn(pe,T?[...W,"item-has-value"]:W)})},Er=b=>{const q=b.classList,T=[];for(let W=0;W<q.length;W++){const pe=q.item(W);null!==pe&&br(pe,"ng-")&&T.push(`ion-${pe.substring(3)}`)}return T},Xn=(b,q)=>{const T=b.classList;T.remove("ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"),T.add(...q)},br=(b,q)=>b.substring(0,q.length)===q;let Br=(()=>{class b extends En{constructor(T,W){super(T,W)}_handleChangeEvent(T){this.handleValueChange(T,T.value)}}return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.zs3),y.Y36(y.SBq))},b.\u0275dir=y.lG2({type:b,selectors:[["ion-range"],["ion-select"],["ion-radio-group"],["ion-segment"],["ion-datetime"]],hostBindings:function(T,W){1&T&&y.NdJ("ionChange",function(B){return W._handleChangeEvent(B.target)})},features:[y._Bn([{provide:ee.JU,useExisting:b,multi:!0}]),y.qOj]}),b})(),Di=(()=>{class b extends En{constructor(T,W){super(T,W)}_handleInputEvent(T){this.handleValueChange(T,T.value)}}return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.zs3),y.Y36(y.SBq))},b.\u0275dir=y.lG2({type:b,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(T,W){1&T&&y.NdJ("ionInput",function(B){return W._handleInputEvent(B.target)})},features:[y._Bn([{provide:ee.JU,useExisting:b,multi:!0}]),y.qOj]}),b})();const Ir=(b,q)=>{const T=b.prototype;q.forEach(W=>{Object.defineProperty(T,W,{get(){return this.el[W]},set(pe){this.z.runOutsideAngular(()=>this.el[W]=pe)}})})},Tn=(b,q)=>{const T=b.prototype;q.forEach(W=>{T[W]=function(){const pe=arguments;return this.z.runOutsideAngular(()=>this.el[W].apply(this.el,pe))}})},tn=(b,q,T)=>{T.forEach(W=>b[W]=He(q,W))};function on(b){return function(T){const{defineCustomElementFn:W,inputs:pe,methods:B}=b;return void 0!==W&&W(),pe&&Ir(T,pe),B&&Tn(T,B),T}}let pi=(()=>{let b=class{constructor(T,W,pe){this.z=pe,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-app"]],ngContentSelectors:De,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,fe.gn)([on({})],b),b})(),xi=(()=>{let b=class{constructor(T,W,pe){this.z=pe,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-back-button"]],inputs:{color:"color",defaultHref:"defaultHref",disabled:"disabled",icon:"icon",mode:"mode",routerAnimation:"routerAnimation",text:"text",type:"type"},ngContentSelectors:De,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,fe.gn)([on({inputs:["color","defaultHref","disabled","icon","mode","routerAnimation","text","type"]})],b),b})(),mr=(()=>{let b=class{constructor(T,W,pe){this.z=pe,T.detach(),this.el=W.nativeElement,tn(this,this.el,["ionFocus","ionBlur"])}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",form:"form",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:De,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,fe.gn)([on({inputs:["buttonType","color","disabled","download","expand","fill","form","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],b),b})(),Ht=(()=>{let b=class{constructor(T,W,pe){this.z=pe,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-buttons"]],inputs:{collapse:"collapse"},ngContentSelectors:De,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,fe.gn)([on({inputs:["collapse"]})],b),b})(),Ge=(()=>{let b=class{constructor(T,W,pe){this.z=pe,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-card"]],inputs:{button:"button",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},ngContentSelectors:De,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,fe.gn)([on({inputs:["button","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","target","type"]})],b),b})(),ot=(()=>{let b=class{constructor(T,W,pe){this.z=pe,T.detach(),this.el=W.nativeElement,tn(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:De,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,fe.gn)([on({inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],b),b})(),en=(()=>{let b=class{constructor(T,W,pe){this.z=pe,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-grid"]],inputs:{fixed:"fixed"},ngContentSelectors:De,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,fe.gn)([on({inputs:["fixed"]})],b),b})(),bn=(()=>{let b=class{constructor(T,W,pe){this.z=pe,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:De,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,fe.gn)([on({inputs:["collapse","mode","translucent"]})],b),b})(),Qn=(()=>{let b=class{constructor(T,W,pe){this.z=pe,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:De,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,fe.gn)([on({inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],b),b})(),cr=(()=>{let b=class{constructor(T,W,pe){this.z=pe,T.detach(),this.el=W.nativeElement,tn(this,this.el,["ionImgWillLoad","ionImgDidLoad","ionError"])}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-img"]],inputs:{alt:"alt",src:"src"},ngContentSelectors:De,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,fe.gn)([on({inputs:["alt","src"]})],b),b})(),At=(()=>{let b=class{constructor(T,W,pe){this.z=pe,T.detach(),this.el=W.nativeElement,tn(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-input"]],inputs:{accept:"accept",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearOnEdit:"clearOnEdit",color:"color",counter:"counter",counterFormatter:"counterFormatter",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",errorText:"errorText",fill:"fill",helperText:"helperText",inputmode:"inputmode",label:"label",labelPlacement:"labelPlacement",legacy:"legacy",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",shape:"shape",size:"size",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:De,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,fe.gn)([on({inputs:["accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","color","counter","counterFormatter","debounce","disabled","enterkeyhint","errorText","fill","helperText","inputmode","label","labelPlacement","legacy","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","shape","size","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],b),b})(),Qt=(()=>{let b=class{constructor(T,W,pe){this.z=pe,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-item"]],inputs:{button:"button",color:"color",counter:"counter",counterFormatter:"counterFormatter",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",fill:"fill",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",target:"target",type:"type"},ngContentSelectors:De,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,fe.gn)([on({inputs:["button","color","counter","counterFormatter","detail","detailIcon","disabled","download","fill","href","lines","mode","rel","routerAnimation","routerDirection","shape","target","type"]})],b),b})(),tr=(()=>{let b=class{constructor(T,W,pe){this.z=pe,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},ngContentSelectors:De,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,fe.gn)([on({inputs:["color","mode","position"]})],b),b})(),Wn=(()=>{let b=class{constructor(T,W,pe){this.z=pe,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-list"]],inputs:{inset:"inset",lines:"lines",mode:"mode"},ngContentSelectors:De,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,fe.gn)([on({inputs:["inset","lines","mode"],methods:["closeSlidingItems"]})],b),b})(),Oi=(()=>{let b=class{constructor(T,W,pe){this.z=pe,T.detach(),this.el=W.nativeElement,tn(this,this.el,["ionChange","ionInput","ionFocus","ionBlur","ionKnobMoveStart","ionKnobMoveEnd"])}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-range"]],inputs:{activeBarStart:"activeBarStart",color:"color",debounce:"debounce",disabled:"disabled",dualKnobs:"dualKnobs",labelPlacement:"labelPlacement",legacy:"legacy",max:"max",min:"min",mode:"mode",name:"name",pin:"pin",pinFormatter:"pinFormatter",snaps:"snaps",step:"step",ticks:"ticks",value:"value"},ngContentSelectors:De,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,fe.gn)([on({inputs:["activeBarStart","color","debounce","disabled","dualKnobs","labelPlacement","legacy","max","min","mode","name","pin","pinFormatter","snaps","step","ticks","value"]})],b),b})(),Ke=(()=>{let b=class{constructor(T,W,pe){this.z=pe,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-row"]],ngContentSelectors:De,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,fe.gn)([on({})],b),b})(),Nt=(()=>{let b=class{constructor(T,W,pe){this.z=pe,T.detach(),this.el=W.nativeElement,tn(this,this.el,["ionInput","ionChange","ionCancel","ionClear","ionBlur","ionFocus"])}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-searchbar"]],inputs:{animated:"animated",autocomplete:"autocomplete",autocorrect:"autocorrect",cancelButtonIcon:"cancelButtonIcon",cancelButtonText:"cancelButtonText",clearIcon:"clearIcon",color:"color",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",mode:"mode",placeholder:"placeholder",searchIcon:"searchIcon",showCancelButton:"showCancelButton",showClearButton:"showClearButton",spellcheck:"spellcheck",type:"type",value:"value"},ngContentSelectors:De,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,fe.gn)([on({inputs:["animated","autocomplete","autocorrect","cancelButtonIcon","cancelButtonText","clearIcon","color","debounce","disabled","enterkeyhint","inputmode","mode","placeholder","searchIcon","showCancelButton","showClearButton","spellcheck","type","value"],methods:["setFocus","getInputElement"]})],b),b})(),tt=(()=>{let b=class{constructor(T,W,pe){this.z=pe,T.detach(),this.el=W.nativeElement,tn(this,this.el,["ionChange","ionInput","ionBlur","ionFocus"])}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-textarea"]],inputs:{autoGrow:"autoGrow",autocapitalize:"autocapitalize",autofocus:"autofocus",clearOnEdit:"clearOnEdit",color:"color",cols:"cols",counter:"counter",counterFormatter:"counterFormatter",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",errorText:"errorText",fill:"fill",helperText:"helperText",inputmode:"inputmode",label:"label",labelPlacement:"labelPlacement",legacy:"legacy",maxlength:"maxlength",minlength:"minlength",mode:"mode",name:"name",placeholder:"placeholder",readonly:"readonly",required:"required",rows:"rows",shape:"shape",spellcheck:"spellcheck",value:"value",wrap:"wrap"},ngContentSelectors:De,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,fe.gn)([on({inputs:["autoGrow","autocapitalize","autofocus","clearOnEdit","color","cols","counter","counterFormatter","debounce","disabled","enterkeyhint","errorText","fill","helperText","inputmode","label","labelPlacement","legacy","maxlength","minlength","mode","name","placeholder","readonly","required","rows","shape","spellcheck","value","wrap"],methods:["setFocus","getInputElement"]})],b),b})(),qt=(()=>{let b=class{constructor(T,W,pe){this.z=pe,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},ngContentSelectors:De,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,fe.gn)([on({inputs:["color","size"]})],b),b})(),Vr=(()=>{let b=class{constructor(T,W,pe){this.z=pe,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:De,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,fe.gn)([on({inputs:["color","mode"]})],b),b})(),hr=(()=>{class b{get(T,W){const pe=As();return pe?pe.get(T,W):null}getBoolean(T,W){const pe=As();return!!pe&&pe.getBoolean(T,W)}getNumber(T,W){const pe=As();return pe?pe.getNumber(T,W):0}}return b.\u0275fac=function(T){return new(T||b)},b.\u0275prov=y.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();const xr=new y.OlP("USERCONFIG"),As=()=>{if(typeof window<"u"){const b=window.Ionic;if(null!=b&&b.config)return b.config}return null};let fo=(()=>{class b{constructor(T,W){this.doc=T,this.backButton=new de.x,this.keyboardDidShow=new de.x,this.keyboardDidHide=new de.x,this.pause=new de.x,this.resume=new de.x,this.resize=new de.x,W.run(()=>{var pe;let B;this.win=T.defaultView,this.backButton.subscribeWithPriority=function(R,O){return this.subscribe(ne=>ne.register(R,yt=>W.run(()=>O(yt))))},ki(this.pause,T,"pause"),ki(this.resume,T,"resume"),ki(this.backButton,T,"ionBackButton"),ki(this.resize,this.win,"resize"),ki(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),ki(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise(R=>{B=R}),null!==(pe=this.win)&&void 0!==pe&&pe.cordova?T.addEventListener("deviceready",()=>{B("cordova")},{once:!0}):B("dom")})}is(T){return(0,Oe.a)(this.win,T)}platforms(){return(0,Oe.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(T){return $i(this.win.location.href,T)}isLandscape(){return!this.isPortrait()}isPortrait(){var T,W;return null===(T=(W=this.win).matchMedia)||void 0===T?void 0:T.call(W,"(orientation: portrait)").matches}testUserAgent(T){const W=this.win.navigator;return!!(null!=W&&W.userAgent&&W.userAgent.indexOf(T)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return b.\u0275fac=function(T){return new(T||b)(y.LFG(vt.K0),y.LFG(y.R0b))},b.\u0275prov=y.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();const $i=(b,q)=>{q=q.replace(/[[\]\\]/g,"\\$&");const W=new RegExp("[\\?&]"+q+"=([^&#]*)").exec(b);return W?decodeURIComponent(W[1].replace(/\+/g," ")):null},ki=(b,q,T)=>{q&&q.addEventListener(T,W=>{b.next(null!=W?W.detail:void 0)})};let Hi=(()=>{class b{constructor(T,W,pe,B){this.location=W,this.serializer=pe,this.router=B,this.direction=ua,this.animated=qi,this.guessDirection="forward",this.lastNavId=-1,B&&B.events.subscribe(R=>{if(R instanceof Y.OD){const O=R.restoredState?R.restoredState.navigationId:R.id;this.guessDirection=O<this.lastNavId?"back":"forward",this.guessAnimation=R.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?R.id:O}}),T.backButton.subscribeWithPriority(0,R=>{this.pop(),R()})}navigateForward(T,W={}){return this.setDirection("forward",W.animated,W.animationDirection,W.animation),this.navigate(T,W)}navigateBack(T,W={}){return this.setDirection("back",W.animated,W.animationDirection,W.animation),this.navigate(T,W)}navigateRoot(T,W={}){return this.setDirection("root",W.animated,W.animationDirection,W.animation),this.navigate(T,W)}back(T={animated:!0,animationDirection:"back"}){return this.setDirection("back",T.animated,T.animationDirection,T.animation),this.location.back()}pop(){var T=this;return(0,E.Z)(function*(){let W=T.topOutlet;for(;W&&!(yield W.pop());)W=W.parentOutlet})()}setDirection(T,W,pe,B){this.direction=T,this.animated=Zo(T,W,pe),this.animationBuilder=B}setTopOutlet(T){this.topOutlet=T}consumeTransition(){let W,T="root";const pe=this.animationBuilder;return"auto"===this.direction?(T=this.guessDirection,W=this.guessAnimation):(W=this.animated,T=this.direction),this.direction=ua,this.animated=qi,this.animationBuilder=void 0,{direction:T,animation:W,animationBuilder:pe}}navigate(T,W){if(Array.isArray(T))return this.router.navigate(T,W);{const pe=this.serializer.parse(T.toString());return void 0!==W.queryParams&&(pe.queryParams={...W.queryParams}),void 0!==W.fragment&&(pe.fragment=W.fragment),this.router.navigateByUrl(pe,W)}}}return b.\u0275fac=function(T){return new(T||b)(y.LFG(fo),y.LFG(vt.Ye),y.LFG(Y.Hx),y.LFG(Y.F0,8))},b.\u0275prov=y.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();const Zo=(b,q,T)=>{if(!1!==q){if(void 0!==T)return T;if("forward"===b||"back"===b)return b;if("root"===b&&!0===q)return"forward"}},ua="auto",qi=void 0;class to{constructor(q={}){this.data=q}get(q){return this.data[q]}}let Fs=(()=>{class b{constructor(){this.zone=(0,y.f3M)(y.R0b),this.applicationRef=(0,y.f3M)(y.z2F)}create(T,W,pe){return new ba(T,W,this.applicationRef,this.zone,pe)}}return b.\u0275fac=function(T){return new(T||b)},b.\u0275prov=y.Yz7({token:b,factory:b.\u0275fac}),b})();class ba{constructor(q,T,W,pe,B){this.environmentInjector=q,this.injector=T,this.applicationRef=W,this.zone=pe,this.elementReferenceKey=B,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(q,T,W,pe){return this.zone.run(()=>new Promise(B=>{const R={...W};void 0!==this.elementReferenceKey&&(R[this.elementReferenceKey]=q),B(Do(this.zone,this.environmentInjector,this.injector,this.applicationRef,this.elRefMap,this.elEventsMap,q,T,R,pe))}))}removeViewFromDom(q,T){return this.zone.run(()=>new Promise(W=>{const pe=this.elRefMap.get(T);if(pe){pe.destroy(),this.elRefMap.delete(T);const B=this.elEventsMap.get(T);B&&(B(),this.elEventsMap.delete(T))}W()}))}}const Do=(b,q,T,W,pe,B,R,O,ne,yt)=>{const dn=y.zs3.create({providers:il(ne),parent:T}),jr=(0,y.LMc)(O,{environmentInjector:q,elementInjector:dn}),yi=jr.instance,Si=jr.location.nativeElement;if(ne&&Object.assign(yi,ne),yt)for(const zs of yt)Si.classList.add(zs);const fs=no(b,yi,Si);return R.appendChild(Si),W.attachView(jr.hostView),pe.set(Si,jr),B.set(Si,fs),Si},xs=[$e.L,$e.a,$e.b,$e.c,$e.d],no=(b,q,T)=>b.run(()=>{const W=xs.filter(pe=>"function"==typeof q[pe]).map(pe=>{const B=R=>q[pe](R.detail);return T.addEventListener(pe,B),()=>T.removeEventListener(pe,B)});return()=>W.forEach(pe=>pe())}),da=new y.OlP("NavParamsToken"),il=b=>[{provide:da,useValue:b},{provide:to,useFactory:ro,deps:[da]}],ro=b=>new to(b),ha=(b,q)=>((b=b.filter(T=>T.stackId!==q.stackId)).push(q),b),fa=(b,q)=>{const T=b.createUrlTree(["."],{relativeTo:q});return b.serializeUrl(T)},io=(b,q)=>{if(!b)return;const T=Ii(q);for(let W=0;W<T.length;W++){if(W>=b.length)return T[W];if(T[W]!==b[W])return}},Ii=b=>b.split("/").map(q=>q.trim()).filter(q=>""!==q),ts=b=>{b&&(b.ref.destroy(),b.unlistenEvents())};class To{constructor(q,T,W,pe,B,R){this.containerEl=T,this.router=W,this.navCtrl=pe,this.zone=B,this.location=R,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==q?Ii(q):void 0}createView(q,T){var W;const pe=fa(this.router,T),B=null==q||null===(W=q.location)||void 0===W?void 0:W.nativeElement,R=no(this.zone,q.instance,B);return{id:this.nextId++,stackId:io(this.tabsPrefix,pe),unlistenEvents:R,element:B,ref:q,url:pe}}getExistingView(q){const T=fa(this.router,q),W=this.views.find(pe=>pe.url===T);return W&&W.ref.changeDetectorRef.reattach(),W}setActive(q){var T,W,pe;const B=this.navCtrl.consumeTransition();let{direction:R,animation:O,animationBuilder:ne}=B;const yt=this.activeView,dn=((b,q)=>!q||b.stackId!==q.stackId)(q,yt);dn&&(R="back",O=void 0);const jr=this.views.slice();let yi;const Si=this.router;Si.getCurrentNavigation?yi=Si.getCurrentNavigation():null!==(T=Si.navigations)&&void 0!==T&&T.value&&(yi=Si.navigations.value),null!==(W=yi)&&void 0!==W&&null!==(pe=W.extras)&&void 0!==pe&&pe.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const fs=this.views.includes(q),zs=this.insertView(q,R);fs||q.ref.changeDetectorRef.detectChanges();const Ai=q.animationBuilder;return void 0===ne&&"back"===R&&!dn&&void 0!==Ai&&(ne=Ai),yt&&(yt.animationBuilder=ne),this.zone.runOutsideAngular(()=>this.wait(()=>(yt&&yt.ref.changeDetectorRef.detach(),q.ref.changeDetectorRef.reattach(),this.transition(q,yt,O,this.canGoBack(1),!1,ne).then(()=>js(q,zs,jr,this.location,this.zone)).then(()=>({enteringView:q,direction:R,animation:O,tabSwitch:dn})))))}canGoBack(q,T=this.getActiveStackId()){return this.getStack(T).length>q}pop(q,T=this.getActiveStackId()){return this.zone.run(()=>{const W=this.getStack(T);if(W.length<=q)return Promise.resolve(!1);const pe=W[W.length-q-1];let B=pe.url;const R=pe.savedData;if(R){var O,ne;const dn=R.get("primary");null!=dn&&null!==(O=dn.route)&&void 0!==O&&null!==(ne=O._routerState)&&void 0!==ne&&ne.snapshot.url&&(B=dn.route._routerState.snapshot.url)}const{animationBuilder:yt}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(B,{...pe.savedExtras,animation:yt}).then(()=>!0)})}startBackTransition(){const q=this.activeView;if(q){const T=this.getStack(q.stackId),W=T[T.length-2],pe=W.animationBuilder;return this.wait(()=>this.transition(W,q,"back",this.canGoBack(2),!0,pe))}return Promise.resolve()}endBackTransition(q){q?(this.skipTransition=!0,this.pop(1)):this.activeView&&Xo(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(q){const T=this.getStack(q);return T.length>0?T[T.length-1]:void 0}getRootUrl(q){const T=this.getStack(q);return T.length>0?T[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(ts),this.activeView=void 0,this.views=[]}getStack(q){return this.views.filter(T=>T.stackId===q)}insertView(q,T){return this.activeView=q,this.views=((b,q,T)=>"root"===T?ha(b,q):"forward"===T?((b,q)=>(b.indexOf(q)>=0?b=b.filter(W=>W.stackId!==q.stackId||W.id<=q.id):b.push(q),b))(b,q):((b,q)=>b.indexOf(q)>=0?b.filter(W=>W.stackId!==q.stackId||W.id<=q.id):ha(b,q))(b,q))(this.views,q,T),this.views.slice()}transition(q,T,W,pe,B,R){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(T===q)return Promise.resolve(!1);const O=q?q.element:void 0,ne=T?T.element:void 0,yt=this.containerEl;return O&&O!==ne&&(O.classList.add("ion-page"),O.classList.add("ion-page-invisible"),O.parentElement!==yt&&yt.appendChild(O),yt.commit)?yt.commit(O,ne,{duration:void 0===W?0:void 0,direction:W,showGoBack:pe,progressAnimation:B,animationBuilder:R}):Promise.resolve(!1)}wait(q){var T=this;return(0,E.Z)(function*(){void 0!==T.runningTask&&(yield T.runningTask,T.runningTask=void 0);const W=T.runningTask=q();return W.finally(()=>T.runningTask=void 0),W})()}}const js=(b,q,T,W,pe)=>"function"==typeof requestAnimationFrame?new Promise(B=>{requestAnimationFrame(()=>{Xo(b,q,T,W,pe),B()})}):Promise.resolve(),Xo=(b,q,T,W,pe)=>{pe.run(()=>T.filter(B=>!q.includes(B)).forEach(ts)),q.forEach(B=>{const O=W.path().split("?")[0].split("#")[0];if(B!==b&&B.url!==O){const ne=B.element;ne.setAttribute("aria-hidden","true"),ne.classList.add("ion-page-hidden"),B.ref.changeDetectorRef.detach()}})};let so=(()=>{class b{constructor(T,W,pe,B,R,O,ne,yt){this.parentOutlet=yt,this.activated=null,this.activatedView=null,this._activatedRoute=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new pt.X(null),this.stackEvents=new y.vpe,this.activateEvents=new y.vpe,this.deactivateEvents=new y.vpe,this.parentContexts=(0,y.f3M)(Y.y6),this.location=(0,y.f3M)(y.s_b),this.environmentInjector=(0,y.f3M)(y.lqb),this.config=(0,y.f3M)(hr),this.navCtrl=(0,y.f3M)(Hi),this.nativeEl=B.nativeElement,this.name=T||Y.eC,this.tabsPrefix="true"===W?fa(R,ne):void 0,this.stackCtrl=new To(this.tabsPrefix,this.nativeEl,R,this.navCtrl,O,pe),this.parentContexts.onChildOutletCreated(this.name,this)}set animation(T){this.nativeEl.animation=T}set animated(T){this.nativeEl.animated=T}set swipeGesture(T){this._swipeGesture=T,this.nativeEl.swipeHandler=T?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:W=>this.stackCtrl.endBackTransition(W)}:void 0}ngOnDestroy(){this.stackCtrl.destroy()}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(!this.activated){const T=this.getContext();null!=T&&T.route&&this.activateWith(T.route,T.injector)}new Promise(T=>(0,Pe.c)(this.nativeEl,T)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(T,W){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const W=this.getContext();this.activatedView.savedData=new Map(W.children.contexts);const pe=this.activatedView.savedData.get("primary");if(pe&&W.route&&(pe.route={...W.route}),this.activatedView.savedExtras={},W.route){const B=W.route.snapshot;this.activatedView.savedExtras.queryParams=B.queryParams,this.activatedView.savedExtras.fragment=B.fragment}}const T=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(T)}}activateWith(T,W){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=T;let pe,B=this.stackCtrl.getExistingView(T);if(B){pe=this.activated=B.ref;const O=B.savedData;O&&(this.getContext().children.contexts=O),this.updateActivatedRouteProxy(pe.instance,T)}else{var R;const O=T._futureSnapshot,ne=this.parentContexts.getOrCreateContext(this.name).children,yt=new pt.X(null),dn=this.createActivatedRouteProxy(yt,T),jr=new Cs(dn,ne,this.location.injector),yi=null!==(R=O.routeConfig.component)&&void 0!==R?R:O.component;pe=this.activated=this.location.createComponent(yi,{index:this.location.length,injector:jr,environmentInjector:null!=W?W:this.environmentInjector}),yt.next(pe.instance),B=this.stackCtrl.createView(this.activated,T),this.proxyMap.set(pe.instance,dn),this.currentActivatedRoute$.next({component:pe.instance,activatedRoute:T})}this.activatedView=B,this.navCtrl.setTopOutlet(this),this.stackCtrl.setActive(B).then(O=>{this.activateEvents.emit(pe.instance),this.stackEvents.emit(O)})}canGoBack(T=1,W){return this.stackCtrl.canGoBack(T,W)}pop(T=1,W){return this.stackCtrl.pop(T,W)}getLastUrl(T){const W=this.stackCtrl.getLastUrl(T);return W?W.url:void 0}getLastRouteView(T){return this.stackCtrl.getLastUrl(T)}getRootView(T){return this.stackCtrl.getRootUrl(T)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(T,W){const pe=new Y.gz;return pe._futureSnapshot=W._futureSnapshot,pe._routerState=W._routerState,pe.snapshot=W.snapshot,pe.outlet=W.outlet,pe.component=W.component,pe._paramMap=this.proxyObservable(T,"paramMap"),pe._queryParamMap=this.proxyObservable(T,"queryParamMap"),pe.url=this.proxyObservable(T,"url"),pe.params=this.proxyObservable(T,"params"),pe.queryParams=this.proxyObservable(T,"queryParams"),pe.fragment=this.proxyObservable(T,"fragment"),pe.data=this.proxyObservable(T,"data"),pe}proxyObservable(T,W){return T.pipe((0,Fe.h)(pe=>!!pe),(0,Ne.w)(pe=>this.currentActivatedRoute$.pipe((0,Fe.h)(B=>null!==B&&B.component===pe),(0,Ne.w)(B=>B&&B.activatedRoute[W]),(0,lt.x)())))}updateActivatedRouteProxy(T,W){const pe=this.proxyMap.get(T);if(!pe)throw new Error("Could not find activated route proxy for view");pe._futureSnapshot=W._futureSnapshot,pe._routerState=W._routerState,pe.snapshot=W.snapshot,pe.outlet=W.outlet,pe.component=W.component,this.currentActivatedRoute$.next({component:T,activatedRoute:W})}}return b.\u0275fac=function(T){return new(T||b)(y.$8M("name"),y.$8M("tabs"),y.Y36(vt.Ye),y.Y36(y.SBq),y.Y36(Y.F0),y.Y36(y.R0b),y.Y36(Y.gz),y.Y36(b,12))},b.\u0275dir=y.lG2({type:b,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",mode:"mode",swipeGesture:"swipeGesture"},outputs:{stackEvents:"stackEvents",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),b})();class Cs{constructor(q,T,W){this.route=q,this.childContexts=T,this.parent=W}get(q,T){return q===Y.gz?this.route:q===Y.y6?this.childContexts:this.parent.get(q,T)}}let go=(()=>{class b{constructor(T,W,pe){this.routerOutlet=T,this.navCtrl=W,this.config=pe}onClick(T){var W;const pe=this.defaultHref||this.config.get("backButtonDefaultHref");null!==(W=this.routerOutlet)&&void 0!==W&&W.canGoBack()?(this.navCtrl.setDirection("back",void 0,void 0,this.routerAnimation),this.routerOutlet.pop(),T.preventDefault()):null!=pe&&(this.navCtrl.navigateBack(pe,{animation:this.routerAnimation}),T.preventDefault())}}return b.\u0275fac=function(T){return new(T||b)(y.Y36(so,8),y.Y36(Hi),y.Y36(hr))},b.\u0275dir=y.lG2({type:b,selectors:[["ion-back-button"]],hostBindings:function(T,W){1&T&&y.NdJ("click",function(B){return W.onClick(B)})},inputs:{defaultHref:"defaultHref",routerAnimation:"routerAnimation"}}),b})(),vs=(()=>{class b{constructor(T,W,pe,B,R){this.locationStrategy=T,this.navCtrl=W,this.elementRef=pe,this.router=B,this.routerLink=R,this.routerDirection="forward"}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var T;if(null!==(T=this.routerLink)&&void 0!==T&&T.urlTree){const W=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=W}}onClick(T){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation),T.preventDefault()}}return b.\u0275fac=function(T){return new(T||b)(y.Y36(vt.S$),y.Y36(Hi),y.Y36(y.SBq),y.Y36(Y.F0),y.Y36(Y.rH,8))},b.\u0275dir=y.lG2({type:b,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(T,W){1&T&&y.NdJ("click",function(B){return W.onClick(B)})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[y.TTD]}),b})();class Bo{constructor(q){this.ctrl=q}create(q){return this.ctrl.create(q||{})}dismiss(q,T,W){return this.ctrl.dismiss(q,T,W)}getTop(){return this.ctrl.getTop()}}let Rs=(()=>{class b extends Bo{constructor(){super(_t.m),this.angularDelegate=(0,y.f3M)(Fs),this.injector=(0,y.f3M)(y.zs3),this.environmentInjector=(0,y.f3M)(y.lqb)}create(T){return super.create({...T,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"modal")})}}return b.\u0275fac=function(T){return new(T||b)},b.\u0275prov=y.Yz7({token:b,factory:b.\u0275fac}),b})(),Hs=(()=>{class b extends Bo{constructor(){super(_t.c),this.angularDelegate=(0,y.f3M)(Fs),this.injector=(0,y.f3M)(y.zs3),this.environmentInjector=(0,y.f3M)(y.lqb)}create(T){return super.create({...T,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"popover")})}}return b.\u0275fac=function(T){return new(T||b)},b.\u0275prov=y.Yz7({token:b,factory:b.\u0275fac}),b})();class ga{shouldDetach(q){return!1}shouldAttach(q){return!1}store(q,T){}retrieve(q){return null}shouldReuseRoute(q,T){if(q.routeConfig!==T.routeConfig)return!1;const W=q.params,pe=T.params,B=Object.keys(W),R=Object.keys(pe);if(B.length!==R.length)return!1;for(const O of B)if(pe[O]!==W[O])return!1;return!0}}const ta=(b,q,T)=>()=>{if(q.defaultView&&typeof window<"u"){(0,Ie.s)({...b,_zoneGate:B=>T.run(B)});const pe="__zone_symbol__addEventListener"in q.body?"__zone_symbol__addEventListener":"addEventListener";return function Zt(){var b=[];if(typeof window<"u"){var q=window;(!q.customElements||q.Element&&(!q.Element.prototype.closest||!q.Element.prototype.matches||!q.Element.prototype.remove||!q.Element.prototype.getRootNode))&&b.push(H.e(6748).then(H.t.bind(H,723,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||q.NodeList&&!q.NodeList.prototype.forEach||!q.fetch||!function(){try{var W=new URL("b","http://a");return W.pathname="c%20d","http://a/c%20d"===W.href&&W.searchParams}catch{return!1}}()||typeof WeakMap>"u")&&b.push(H.e(2214).then(H.t.bind(H,4144,23)))}return Promise.all(b)}().then(()=>((b,q)=>typeof window>"u"?Promise.resolve():(0,ft.p)().then(()=>($t(),(0,ft.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"layout":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]]]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[1028],"layout":[1],"type":[1],"value":[1],"checked":[32],"setFocus":[64]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1025],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]]]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["ion-chip",[[1,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-datetime-button",[[33,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-input",[[34,"ion-input",{"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"counter":[4],"counterFormatter":[16],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"errorText":[1,"error-text"],"fill":[1],"inputmode":[1],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"shape":[1],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"activated":[32]}]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-textarea",[[34,"ion-textarea",{"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"fill":[1],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"counter":[4],"counterFormatter":[16],"errorText":[1,"error-text"],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"shape":[1],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[513],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]]]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"labelPlacement":[1,"label-placement"],"legacy":[4],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"counterFormatter":[16],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionInput","handleIonInput"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[33,"ion-note",{"color":[513]}]]],["ion-select_3",[[33,"ion-select",{"cancelText":[1,"cancel-text"],"color":[513],"compareWith":[1,"compare-with"],"disabled":[4],"fill":[1],"interface":[1],"interfaceOptions":[8,"interface-options"],"justify":[1],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"multiple":[4],"name":[1],"okText":[1,"ok-text"],"placeholder":[1],"selectedText":[1,"selected-text"],"shape":[1],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]}]]],["ion-picker-internal",[[33,"ion-picker-internal",{"exitInputMode":[64]},[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"highlightedDates":[16],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isPresented":[32],"isTimePopoverOpen":[32],"confirm":[64],"reset":[64],"cancel":[64]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"],[9,"resize","onResize"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["ion-picker-column-internal",[[33,"ion-picker-column-internal",{"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64]}]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"justify":[1],"legacy":[4]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]]]'),q))))(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:nn,jmp:B=>T.runOutsideAngular(B),ael(B,R,O,ne){B[pe](R,O,ne)},rel(B,R,O,ne){B.removeEventListener(R,O,ne)}}))}};let ma=(()=>{class b{static forRoot(T){return{ngModule:b,providers:[{provide:xr,useValue:T},{provide:y.ip1,useFactory:ta,multi:!0,deps:[xr,vt.K0,y.R0b]}]}}}return b.\u0275fac=function(T){return new(T||b)},b.\u0275mod=y.oAB({type:b}),b.\u0275inj=y.cJS({providers:[Fs,Rs,Hs],imports:[vt.ez]}),b})()},259:(yn,gt,H)=>{"use strict";H.d(gt,{C6:()=>E.getApps,Mq:()=>E.getApp,ZR:()=>E.FirebaseError});var E=H(6881);(0,E.registerVersion)("firebase","9.21.0","app")},9260:(yn,gt,H)=>{"use strict";H.d(gt,{Z:()=>E.Z});var E=H(3942);E.Z.registerVersion("firebase","9.21.0","app-compat")},3042:(yn,gt,H)=>{"use strict";H.r(gt);var E=H(5861),y=H(3942),ee=H(2090),fe=H(6881),Le=H(655),xe=H(1877),ye=H(4859);const je={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ve_EMAIL_SIGNIN="EMAIL_SIGNIN",ve_PASSWORD_RESET="PASSWORD_RESET",ve_RECOVER_EMAIL="RECOVER_EMAIL",ve_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",ve_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",ve_VERIFY_EMAIL="VERIFY_EMAIL";const rt=function ze(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Dt=function He(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Re=new ee.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),de=new xe.Yd("@firebase/auth");function Y(C,...g){de.logLevel<=xe.in.ERROR&&de.error(`Auth (${fe.SDK_VERSION}): ${C}`,...g)}function et(C,...g){throw Oe(C,...g)}function Ze(C,...g){return Oe(C,...g)}function xt(C,g,m){const A=Object.assign(Object.assign({},Dt()),{[g]:m});return new ee.LL("auth","Firebase",A).create(g,{appName:C.name})}function Be(C,g,m){if(!(g instanceof m))throw m.name!==g.constructor.name&&et(C,"argument-error"),xt(C,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Oe(C,...g){if("string"!=typeof C){const m=g[0],A=[...g.slice(1)];return A[0]&&(A[0].appName=C.name),C._errorFactory.create(m,...A)}return Re.create(C,...g)}function Pe(C,g,...m){if(!C)throw Oe(g,...m)}function Ie(C){const g="INTERNAL ASSERTION FAILED: "+C;throw Y(g),new Error(g)}function $e(C,g){C||Ie(g)}function ht(){var C;return typeof self<"u"&&(null===(C=self.location)||void 0===C?void 0:C.href)||""}function _t(){return"http:"===ct()||"https:"===ct()}function ct(){var C;return typeof self<"u"&&(null===(C=self.location)||void 0===C?void 0:C.protocol)||null}class ke{constructor(g,m){this.shortDelay=g,this.longDelay=m,$e(m>g,"Short delay should be less than long delay!"),this.isMobile=(0,ee.uI)()||(0,ee.b$)()}get(){return function wt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(_t()||(0,ee.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Fe(C,g){$e(C.emulator,"Emulator should always be set here");const{url:m}=C.emulator;return g?`${m}${g.startsWith("/")?g.slice(1):g}`:m}class Ne{static initialize(g,m,A){this.fetchImpl=g,m&&(this.headersImpl=m),A&&(this.responseImpl=A)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ie("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ie("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ie("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const lt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},vt=new ke(3e4,6e4);function Zt(C,g){return C.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:C.tenantId}):g}function $t(C,g,m,A){return vn.apply(this,arguments)}function vn(){return(vn=(0,E.Z)(function*(C,g,m,A,K={}){return Tt(C,K,(0,E.Z)(function*(){let oe={},Je={};A&&("GET"===g?Je=A:oe={body:JSON.stringify(A)});const mt=(0,ee.xO)(Object.assign({key:C.config.apiKey},Je)).slice(1),Kt=yield C._getAdditionalHeaders();return Kt["Content-Type"]="application/json",C.languageCode&&(Kt["X-Firebase-Locale"]=C.languageCode),Ne.fetch()(Rn(C,C.config.apiHost,m,mt),Object.assign({method:g,headers:Kt,referrerPolicy:"no-referrer"},oe))}))})).apply(this,arguments)}function Tt(C,g,m){return De.apply(this,arguments)}function De(){return(De=(0,E.Z)(function*(C,g,m){C._canInitEmulator=!1;const A=Object.assign(Object.assign({},lt),g);try{const K=new Kn(C),oe=yield Promise.race([m(),K.promise]);K.clearNetworkTimeout();const Je=yield oe.json();if("needConfirmation"in Je)throw wn(C,"account-exists-with-different-credential",Je);if(oe.ok&&!("errorMessage"in Je))return Je;{const mt=oe.ok?Je.errorMessage:Je.error.message,[Kt,kn]=mt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Kt)throw wn(C,"credential-already-in-use",Je);if("EMAIL_EXISTS"===Kt)throw wn(C,"email-already-in-use",Je);if("USER_DISABLED"===Kt)throw wn(C,"user-disabled",Je);const er=A[Kt]||Kt.toLowerCase().replace(/[_\s]+/g,"-");if(kn)throw xt(C,er,kn);et(C,er)}}catch(K){if(K instanceof ee.ZR)throw K;et(C,"network-request-failed",{message:String(K)})}})).apply(this,arguments)}function St(C,g,m,A){return ln.apply(this,arguments)}function ln(){return(ln=(0,E.Z)(function*(C,g,m,A,K={}){const oe=yield $t(C,g,m,A,K);return"mfaPendingCredential"in oe&&et(C,"multi-factor-auth-required",{_serverResponse:oe}),oe})).apply(this,arguments)}function Rn(C,g,m,A){const K=`${g}${m}?${A}`;return C.config.emulator?Fe(C.config,K):`${C.config.apiScheme}://${K}`}class Kn{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((m,A)=>{this.timer=setTimeout(()=>A(Ze(this.auth,"network-request-failed")),vt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function wn(C,g,m){const A={appName:C.name};m.email&&(A.email=m.email),m.phoneNumber&&(A.phoneNumber=m.phoneNumber);const K=Ze(C,g,A);return K.customData._tokenResponse=m,K}function En(){return(En=(0,E.Z)(function*(C,g){return $t(C,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Er(){return(Er=(0,E.Z)(function*(C,g){return $t(C,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function br(){return(br=(0,E.Z)(function*(C,g){return $t(C,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function cn(C){if(C)try{const g=new Date(Number(C));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function Br(){return(Br=(0,E.Z)(function*(C,g=!1){const m=(0,ee.m9)(C),A=yield m.getIdToken(g),K=Ir(A);Pe(K&&K.exp&&K.auth_time&&K.iat,m.auth,"internal-error");const oe="object"==typeof K.firebase?K.firebase:void 0,Je=null==oe?void 0:oe.sign_in_provider;return{claims:K,token:A,authTime:cn(Di(K.auth_time)),issuedAtTime:cn(Di(K.iat)),expirationTime:cn(Di(K.exp)),signInProvider:Je||null,signInSecondFactor:(null==oe?void 0:oe.sign_in_second_factor)||null}})).apply(this,arguments)}function Di(C){return 1e3*Number(C)}function Ir(C){const[g,m,A]=C.split(".");if(void 0===g||void 0===m||void 0===A)return Y("JWT malformed, contained fewer than 3 sections"),null;try{const K=(0,ee.tV)(m);return K?JSON.parse(K):(Y("Failed to decode base64 JWT payload"),null)}catch(K){return Y("Caught error parsing JWT payload as JSON",null==K?void 0:K.toString()),null}}function tn(C,g){return fn.apply(this,arguments)}function fn(){return(fn=(0,E.Z)(function*(C,g,m=!1){if(m)return g;try{return yield g}catch(A){throw A instanceof ee.ZR&&function on({code:C}){return"auth/user-disabled"===C||"auth/user-token-expired"===C}(A)&&C.auth.currentUser===C&&(yield C.auth.signOut()),A}})).apply(this,arguments)}class Jr{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var m;if(g){const A=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),A}{this.errorBackoff=3e4;const K=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,K)}}schedule(g=!1){var m=this;if(!this.isRunning)return;const A=this.getInterval(g);this.timerId=setTimeout((0,E.Z)(function*(){yield m.iteration()}),A)}iteration(){var g=this;return(0,E.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===(null==m?void 0:m.code)&&g.schedule(!0))}g.schedule()})()}}class Sr{constructor(g,m){this.createdAt=g,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=cn(this.lastLoginAt),this.creationTime=cn(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function qr(C){return ni.apply(this,arguments)}function ni(){return ni=(0,E.Z)(function*(C){var g;const m=C.auth,A=yield C.getIdToken(),K=yield tn(C,function Xn(C,g){return br.apply(this,arguments)}(m,{idToken:A}));Pe(null==K?void 0:K.users.length,m,"internal-error");const oe=K.users[0];C._notifyReloadListener(oe);const Je=null!==(g=oe.providerUserInfo)&&void 0!==g&&g.length?function or(C){return C.map(g=>{var{providerId:m}=g,A=(0,Le._T)(g,["providerId"]);return{providerId:m,uid:A.rawId||"",displayName:A.displayName||null,email:A.email||null,phoneNumber:A.phoneNumber||null,photoURL:A.photoUrl||null}})}(oe.providerUserInfo):[],mt=function xi(C,g){return[...C.filter(A=>!g.some(K=>K.providerId===A.providerId)),...g]}(C.providerData,Je),er=!!C.isAnonymous&&!(C.email&&oe.passwordHash||null!=mt&&mt.length),nr={uid:oe.localId,displayName:oe.displayName||null,photoURL:oe.photoUrl||null,email:oe.email||null,emailVerified:oe.emailVerified||!1,phoneNumber:oe.phoneNumber||null,tenantId:oe.tenantId||null,providerData:mt,metadata:new Sr(oe.createdAt,oe.lastLoginAt),isAnonymous:er};Object.assign(C,nr)}),ni.apply(this,arguments)}function Ur(){return(Ur=(0,E.Z)(function*(C){const g=(0,ee.m9)(C);yield qr(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function Ei(){return(Ei=(0,E.Z)(function*(C,g){const m=yield Tt(C,{},(0,E.Z)(function*(){const A=(0,ee.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:K,apiKey:oe}=C.config,Je=Rn(C,K,"/v1/token",`key=${oe}`),mt=yield C._getAdditionalHeaders();return mt["Content-Type"]="application/x-www-form-urlencoded",Ne.fetch()(Je,{method:"POST",headers:mt,body:A})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Pr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){Pe(g.idToken,"internal-error"),Pe(typeof g.idToken<"u","internal-error"),Pe(typeof g.refreshToken<"u","internal-error");const m="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function Tn(C){const g=Ir(C);return Pe(g,"internal-error"),Pe(typeof g.exp<"u","internal-error"),Pe(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,m)}getToken(g,m=!1){var A=this;return(0,E.Z)(function*(){return Pe(!A.accessToken||A.refreshToken,g,"user-token-expired"),m||!A.accessToken||A.isExpired?A.refreshToken?(yield A.refresh(g,A.refreshToken),A.accessToken):null:A.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,m){var A=this;return(0,E.Z)(function*(){const{accessToken:K,refreshToken:oe,expiresIn:Je}=yield function Yn(C,g){return Ei.apply(this,arguments)}(g,m);A.updateTokensAndExpiration(K,oe,Number(Je))})()}updateTokensAndExpiration(g,m,A){this.refreshToken=m||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*A}static fromJSON(g,m){const{refreshToken:A,accessToken:K,expirationTime:oe}=m,Je=new Pr;return A&&(Pe("string"==typeof A,"internal-error",{appName:g}),Je.refreshToken=A),K&&(Pe("string"==typeof K,"internal-error",{appName:g}),Je.accessToken=K),oe&&(Pe("number"==typeof oe,"internal-error",{appName:g}),Je.expirationTime=oe),Je}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Pr,this.toJSON())}_performRefresh(){return Ie("not implemented")}}function mr(C,g){Pe("string"==typeof C||typeof C>"u","internal-error",{appName:g})}class Ht{constructor(g){var{uid:m,auth:A,stsTokenManager:K}=g,oe=(0,Le._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Jr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=A,this.stsTokenManager=K,this.accessToken=K.accessToken,this.displayName=oe.displayName||null,this.email=oe.email||null,this.emailVerified=oe.emailVerified||!1,this.phoneNumber=oe.phoneNumber||null,this.photoURL=oe.photoURL||null,this.isAnonymous=oe.isAnonymous||!1,this.tenantId=oe.tenantId||null,this.providerData=oe.providerData?[...oe.providerData]:[],this.metadata=new Sr(oe.createdAt||void 0,oe.lastLoginAt||void 0)}getIdToken(g){var m=this;return(0,E.Z)(function*(){const A=yield tn(m,m.stsTokenManager.getToken(m.auth,g));return Pe(A,m.auth,"internal-error"),m.accessToken!==A&&(m.accessToken=A,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),A})()}getIdTokenResult(g){return function Zr(C){return Br.apply(this,arguments)}(this,g)}reload(){return function pi(C){return Ur.apply(this,arguments)}(this)}_assign(g){this!==g&&(Pe(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(m=>Object.assign({},m)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){const m=new Ht(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}));return m.metadata._copy(this.metadata),m}_onReload(g){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,m=!1){var A=this;return(0,E.Z)(function*(){let K=!1;g.idToken&&g.idToken!==A.stsTokenManager.accessToken&&(A.stsTokenManager.updateFromServerResponse(g),K=!0),m&&(yield qr(A)),yield A.auth._persistUserIfCurrent(A),K&&A.auth._notifyListenersIfCurrent(A)})()}delete(){var g=this;return(0,E.Z)(function*(){const m=yield g.getIdToken();return yield tn(g,function nn(C,g){return En.apply(this,arguments)}(g.auth,{idToken:m})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,m){var A,K,oe,Je,mt,Kt,kn,er;const nr=null!==(A=m.displayName)&&void 0!==A?A:void 0,as=null!==(K=m.email)&&void 0!==K?K:void 0,Go=null!==(oe=m.phoneNumber)&&void 0!==oe?oe:void 0,Kd=null!==(Je=m.photoURL)&&void 0!==Je?Je:void 0,hl=null!==(mt=m.tenantId)&&void 0!==mt?mt:void 0,Fc=null!==(Kt=m._redirectEventId)&&void 0!==Kt?Kt:void 0,Os=null!==(kn=m.createdAt)&&void 0!==kn?kn:void 0,Pu=null!==(er=m.lastLoginAt)&&void 0!==er?er:void 0,{uid:au,emailVerified:Ql,isAnonymous:lu,providerData:qd,stsTokenManager:fd}=m;Pe(au&&fd,g,"internal-error");const pd=Pr.fromJSON(this.name,fd);Pe("string"==typeof au,g,"internal-error"),mr(nr,g.name),mr(as,g.name),Pe("boolean"==typeof Ql,g,"internal-error"),Pe("boolean"==typeof lu,g,"internal-error"),mr(Go,g.name),mr(Kd,g.name),mr(hl,g.name),mr(Fc,g.name),mr(Os,g.name),mr(Pu,g.name);const Nh=new Ht({uid:au,auth:g,email:as,emailVerified:Ql,displayName:nr,isAnonymous:lu,photoURL:Kd,phoneNumber:Go,tenantId:hl,stsTokenManager:pd,createdAt:Os,lastLoginAt:Pu});return qd&&Array.isArray(qd)&&(Nh.providerData=qd.map(Lc=>Object.assign({},Lc))),Fc&&(Nh._redirectEventId=Fc),Nh}static _fromIdTokenResponse(g,m,A=!1){return(0,E.Z)(function*(){const K=new Pr;K.updateFromServerResponse(m);const oe=new Ht({uid:m.localId,auth:g,stsTokenManager:K,isAnonymous:A});return yield qr(oe),oe})()}}const Ge=new Map;function Qe(C){$e(C instanceof Function,"Expected a class definition");let g=Ge.get(C);return g?($e(g instanceof C,"Instance stored in cache mismatched with class"),g):(g=new C,Ge.set(C,g),g)}const zt=(()=>{class C{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,E.Z)(function*(){return!0})()}_set(m,A){var K=this;return(0,E.Z)(function*(){K.storage[m]=A})()}_get(m){var A=this;return(0,E.Z)(function*(){const K=A.storage[m];return void 0===K?null:K})()}_remove(m){var A=this;return(0,E.Z)(function*(){delete A.storage[m]})()}_addListener(m,A){}_removeListener(m,A){}}return C.type="NONE",C})();function we(C,g,m){return`firebase:${C}:${g}:${m}`}class be{constructor(g,m,A){this.persistence=g,this.auth=m,this.userKey=A;const{config:K,name:oe}=this.auth;this.fullUserKey=we(this.userKey,K.apiKey,oe),this.fullPersistenceKey=we("persistence",K.apiKey,oe),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,E.Z)(function*(){const m=yield g.persistence._get(g.fullUserKey);return m?Ht._fromJSON(g.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var m=this;return(0,E.Z)(function*(){if(m.persistence===g)return;const A=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=g,A?m.setCurrentUser(A):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,m,A="authUser"){return(0,E.Z)(function*(){if(!m.length)return new be(Qe(zt),g,A);const K=(yield Promise.all(m.map(function(){var kn=(0,E.Z)(function*(er){if(yield er._isAvailable())return er});return function(er){return kn.apply(this,arguments)}}()))).filter(kn=>kn);let oe=K[0]||Qe(zt);const Je=we(A,g.config.apiKey,g.name);let mt=null;for(const kn of m)try{const er=yield kn._get(Je);if(er){const nr=Ht._fromJSON(g,er);kn!==oe&&(mt=nr),oe=kn;break}}catch{}const Kt=K.filter(kn=>kn._shouldAllowMigration);return oe._shouldAllowMigration&&Kt.length?(oe=Kt[0],mt&&(yield oe._set(Je,mt.toJSON())),yield Promise.all(m.map(function(){var kn=(0,E.Z)(function*(er){if(er!==oe)try{yield er._remove(Je)}catch{}});return function(er){return kn.apply(this,arguments)}}())),new be(oe,g,A)):new be(oe,g,A)})()}}function We(C){const g=C.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Ye(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Ct(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(me(g))return"Blackberry";if(dt(g))return"Webos";if(ot(g))return"Safari";if((g.includes("chrome/")||gn(g))&&!g.includes("edge/"))return"Chrome";if(Ve(g))return"Android";{const A=C.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==A?void 0:A.length))return A[1]}return"Other"}function Ct(C=(0,ee.z$)()){return/firefox\//i.test(C)}function ot(C=(0,ee.z$)()){const g=C.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function gn(C=(0,ee.z$)()){return/crios\//i.test(C)}function Ye(C=(0,ee.z$)()){return/iemobile/i.test(C)}function Ve(C=(0,ee.z$)()){return/android/i.test(C)}function me(C=(0,ee.z$)()){return/blackberry/i.test(C)}function dt(C=(0,ee.z$)()){return/webos/i.test(C)}function Ot(C=(0,ee.z$)()){return/iphone|ipad|ipod/i.test(C)||/macintosh/i.test(C)&&/mobile/i.test(C)}function cr(C=(0,ee.z$)()){return Ot(C)||Ve(C)||dt(C)||me(C)||/windows phone/i.test(C)||Ye(C)}function Ut(C,g=[]){let m;switch(C){case"Browser":m=We((0,ee.z$)());break;case"Worker":m=`${We((0,ee.z$)())}-${C}`;break;default:m=C}const A=g.length?g.join(","):"FirebaseCore-web";return`${m}/JsCore/${fe.SDK_VERSION}/${A}`}function Qt(){return(Qt=(0,E.Z)(function*(C){return(yield $t(C,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Nn(C,g){return jn.apply(this,arguments)}function jn(){return(jn=(0,E.Z)(function*(C,g){return $t(C,"GET","/v2/recaptchaConfig",Zt(C,g))})).apply(this,arguments)}function yr(C){return void 0!==C&&void 0!==C.getResponse}function Cr(C){return void 0!==C&&void 0!==C.enterprise}class Un{constructor(g){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===g.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=g.recaptchaKey.split("/")[3],this.emailPasswordEnabled=g.recaptchaEnforcementState.some(m=>"EMAIL_PASSWORD_PROVIDER"===m.provider&&"OFF"!==m.enforcementState)}}function Wn(C){return new Promise((g,m)=>{const A=document.createElement("script");A.setAttribute("src",C),A.onload=g,A.onerror=K=>{const oe=Ze("internal-error");oe.customData=K,m(oe)},A.type="text/javascript",A.charset="UTF-8",function tr(){var C,g;return null!==(g=null===(C=document.getElementsByTagName("head"))||void 0===C?void 0:C[0])&&void 0!==g?g:document}().appendChild(A)})}function ar(C){return`__${C}${Math.floor(1e6*Math.random())}`}const Ji="NO_RECAPTCHA";class ys{constructor(g){this.type="recaptcha-enterprise",this.auth=Dr(g)}verify(g="verify",m=!1){var A=this;return(0,E.Z)(function*(){function oe(){return oe=(0,E.Z)(function*(mt){if(!m){if(null==mt.tenantId&&null!=mt._agentRecaptchaConfig)return mt._agentRecaptchaConfig.siteKey;if(null!=mt.tenantId&&void 0!==mt._tenantRecaptchaConfigs[mt.tenantId])return mt._tenantRecaptchaConfigs[mt.tenantId].siteKey}return new Promise(function(){var Kt=(0,E.Z)(function*(kn,er){Nn(mt,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(nr=>{if(void 0!==nr.recaptchaKey){const as=new Un(nr);return null==mt.tenantId?mt._agentRecaptchaConfig=as:mt._tenantRecaptchaConfigs[mt.tenantId]=as,kn(as.siteKey)}er(new Error("recaptcha Enterprise site key undefined"))}).catch(nr=>{er(nr)})});return function(kn,er){return Kt.apply(this,arguments)}}())}),oe.apply(this,arguments)}function Je(mt,Kt,kn){const er=window.grecaptcha;Cr(er)?er.enterprise.ready(()=>{er.enterprise.execute(mt,{action:g}).then(nr=>{Kt(nr)}).catch(()=>{Kt(Ji)})}):kn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((mt,Kt)=>{(function K(mt){return oe.apply(this,arguments)})(A.auth).then(kn=>{if(!m&&Cr(window.grecaptcha))Je(kn,mt,Kt);else{if(typeof window>"u")return void Kt(new Error("RecaptchaVerifier is only supported in browser"));Wn("https://www.google.com/recaptcha/enterprise.js?render="+kn).then(()=>{Je(kn,mt,Kt)}).catch(er=>{Kt(er)})}}).catch(kn=>{Kt(kn)})})})()}}function ri(C,g,m){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,E.Z)(function*(C,g,m,A=!1){const K=new ys(C);let oe;try{oe=yield K.verify(m)}catch{oe=yield K.verify(m,!0)}const Je=Object.assign({},g);return Object.assign(Je,A?{captchaResp:oe}:{captchaResponse:oe}),Object.assign(Je,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Je,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Je})).apply(this,arguments)}class dr{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,m){const A=oe=>new Promise((Je,mt)=>{try{Je(g(oe))}catch(Kt){mt(Kt)}});A.onAbort=m,this.queue.push(A);const K=this.queue.length-1;return()=>{this.queue[K]=()=>Promise.resolve()}}runMiddleware(g){var m=this;return(0,E.Z)(function*(){if(m.auth.currentUser===g)return;const A=[];try{for(const K of m.queue)yield K(g),K.onAbort&&A.push(K.onAbort)}catch(K){A.reverse();for(const oe of A)try{oe()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:null==K?void 0:K.message})}})()}}class li{constructor(g,m,A,K){this.app=g,this.heartbeatServiceProvider=m,this.appCheckServiceProvider=A,this.config=K,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xi(this),this.idTokenSubscription=new Xi(this),this.beforeStateQueue=new dr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Re,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=K.sdkClientVersion}_initializeWithPersistence(g,m){var A=this;return m&&(this._popupRedirectResolver=Qe(m)),this._initializationPromise=this.queue((0,E.Z)(function*(){var K,oe;if(!A._deleted&&(A.persistenceManager=yield be.create(A,g),!A._deleted)){if(null!==(K=A._popupRedirectResolver)&&void 0!==K&&K._shouldInitProactively)try{yield A._popupRedirectResolver._initialize(A)}catch{}yield A.initializeCurrentUser(m),A.lastNotifiedUid=(null===(oe=A.currentUser)||void 0===oe?void 0:oe.uid)||null,!A._deleted&&(A._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,E.Z)(function*(){if(g._deleted)return;const m=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||m){if(g.currentUser&&m&&g.currentUser.uid===m.uid)return g._currentUser._assign(m),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(m,!0)}})()}initializeCurrentUser(g){var m=this;return(0,E.Z)(function*(){var A;const K=yield m.assertedPersistence.getCurrentUser();let oe=K,Je=!1;if(g&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const mt=null===(A=m.redirectUser)||void 0===A?void 0:A._redirectEventId,Kt=null==oe?void 0:oe._redirectEventId,kn=yield m.tryRedirectSignIn(g);(!mt||mt===Kt)&&null!=kn&&kn.user&&(oe=kn.user,Je=!0)}if(!oe)return m.directlySetCurrentUser(null);if(!oe._redirectEventId){if(Je)try{yield m.beforeStateQueue.runMiddleware(oe)}catch(mt){oe=K,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(mt))}return oe?m.reloadAndSetCurrentUserOrClear(oe):m.directlySetCurrentUser(null)}return Pe(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===oe._redirectEventId?m.directlySetCurrentUser(oe):m.reloadAndSetCurrentUserOrClear(oe)})()}tryRedirectSignIn(g){var m=this;return(0,E.Z)(function*(){let A=null;try{A=yield m._popupRedirectResolver._completeRedirectFn(m,g,!0)}catch{yield m._setRedirectUser(null)}return A})()}reloadAndSetCurrentUserOrClear(g){var m=this;return(0,E.Z)(function*(){try{yield qr(g)}catch(A){if("auth/network-request-failed"!==(null==A?void 0:A.code))return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function ft(){if(typeof navigator>"u")return null;const C=navigator;return C.languages&&C.languages[0]||C.language||null}()}_delete(){var g=this;return(0,E.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var m=this;return(0,E.Z)(function*(){const A=g?(0,ee.m9)(g):null;return A&&Pe(A.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(A&&A._clone(m))})()}_updateCurrentUser(g,m=!1){var A=this;return(0,E.Z)(function*(){if(!A._deleted)return g&&Pe(A.tenantId===g.tenantId,A,"tenant-id-mismatch"),m||(yield A.beforeStateQueue.runMiddleware(g)),A.queue((0,E.Z)(function*(){yield A.directlySetCurrentUser(g),A.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,E.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var m=this;return this.queue((0,E.Z)(function*(){yield m.assertedPersistence.setPersistence(Qe(g))}))}initializeRecaptchaConfig(){var g=this;return(0,E.Z)(function*(){const m=yield Nn(g,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),A=new Un(m);null==g.tenantId?g._agentRecaptchaConfig=A:g._tenantRecaptchaConfigs[g.tenantId]=A,A.emailPasswordEnabled&&new ys(g).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new ee.LL("auth","Firebase",g())}onAuthStateChanged(g,m,A){return this.registerStateListener(this.authStateSubscription,g,m,A)}beforeAuthStateChanged(g,m){return this.beforeStateQueue.pushCallback(g,m)}onIdTokenChanged(g,m,A){return this.registerStateListener(this.idTokenSubscription,g,m,A)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,m){var A=this;return(0,E.Z)(function*(){const K=yield A.getOrInitRedirectPersistenceManager(m);return null===g?K.removeCurrentUser():K.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var m=this;return(0,E.Z)(function*(){if(!m.redirectPersistenceManager){const A=g&&Qe(g)||m._popupRedirectResolver;Pe(A,m,"argument-error"),m.redirectPersistenceManager=yield be.create(m,[Qe(A._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(g){var m=this;return(0,E.Z)(function*(){var A,K;return m._isInitialized&&(yield m.queue((0,E.Z)(function*(){}))),(null===(A=m._currentUser)||void 0===A?void 0:A._redirectEventId)===g?m._currentUser:(null===(K=m.redirectUser)||void 0===K?void 0:K._redirectEventId)===g?m.redirectUser:null})()}_persistUserIfCurrent(g){var m=this;return(0,E.Z)(function*(){if(g===m.currentUser)return m.queue((0,E.Z)(function*(){return m.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const A=null!==(m=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==A&&(this.lastNotifiedUid=A,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,m,A,K){if(this._deleted)return()=>{};const oe="function"==typeof m?m:m.next.bind(m),Je=this._isInitialized?Promise.resolve():this._initializationPromise;return Pe(Je,this,"internal-error"),Je.then(()=>oe(this.currentUser)),"function"==typeof m?g.addObserver(m,A,K):g.addObserver(m)}directlySetCurrentUser(g){var m=this;return(0,E.Z)(function*(){m.currentUser&&m.currentUser!==g&&m._currentUser._stopProactiveRefresh(),g&&m.isProactiveRefreshEnabled&&g._startProactiveRefresh(),m.currentUser=g,g?yield m.assertedPersistence.setCurrentUser(g):yield m.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Ut(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,E.Z)(function*(){var m;const A={"X-Client-Version":g.clientVersion};g.app.options.appId&&(A["X-Firebase-gmpid"]=g.app.options.appId);const K=yield null===(m=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();K&&(A["X-Firebase-Client"]=K);const oe=yield g._getAppCheckToken();return oe&&(A["X-Firebase-AppCheck"]=oe),A})()}_getAppCheckToken(){var g=this;return(0,E.Z)(function*(){var m;const A=yield null===(m=g.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getToken();return null!=A&&A.error&&function pt(C,...g){de.logLevel<=xe.in.WARN&&de.warn(`Auth (${fe.SDK_VERSION}): ${C}`,...g)}(`Error while retrieving App Check token: ${A.error}`),null==A?void 0:A.token})()}}function Dr(C){return(0,ee.m9)(C)}class Xi{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,ee.ne)(m=>this.observer=m)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function _e(C){const g=C.indexOf(":");return g<0?"":C.substr(0,g+1)}function ae(C){if(!C)return null;const g=Number(C);return isNaN(g)?null:g}class Ke{constructor(g,m){this.providerId=g,this.signInMethod=m}toJSON(){return Ie("not implemented")}_getIdTokenResponse(g){return Ie("not implemented")}_linkToIdToken(g,m){return Ie("not implemented")}_getReauthenticationResolver(g){return Ie("not implemented")}}function Nt(C,g){return kt.apply(this,arguments)}function kt(){return(kt=(0,E.Z)(function*(C,g){return $t(C,"POST","/v1/accounts:resetPassword",Zt(C,g))})).apply(this,arguments)}function Bt(C,g){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,E.Z)(function*(C,g){return $t(C,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function zn(){return(zn=(0,E.Z)(function*(C,g){return $t(C,"POST","/v1/accounts:update",Zt(C,g))})).apply(this,arguments)}function Gn(C,g){return gi.apply(this,arguments)}function gi(){return(gi=(0,E.Z)(function*(C,g){return St(C,"POST","/v1/accounts:signInWithPassword",Zt(C,g))})).apply(this,arguments)}function Jn(C,g){return es.apply(this,arguments)}function es(){return(es=(0,E.Z)(function*(C,g){return $t(C,"POST","/v1/accounts:sendOobCode",Zt(C,g))})).apply(this,arguments)}function tt(){return(tt=(0,E.Z)(function*(C,g){return Jn(C,g)})).apply(this,arguments)}function Et(C,g){return qt.apply(this,arguments)}function qt(){return(qt=(0,E.Z)(function*(C,g){return Jn(C,g)})).apply(this,arguments)}function an(C,g){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,E.Z)(function*(C,g){return Jn(C,g)})).apply(this,arguments)}function hr(){return(hr=(0,E.Z)(function*(C,g){return Jn(C,g)})).apply(this,arguments)}function As(){return(As=(0,E.Z)(function*(C,g){return St(C,"POST","/v1/accounts:signInWithEmailLink",Zt(C,g))})).apply(this,arguments)}function $i(){return($i=(0,E.Z)(function*(C,g){return St(C,"POST","/v1/accounts:signInWithEmailLink",Zt(C,g))})).apply(this,arguments)}class ki extends Ke{constructor(g,m,A,K=null){super("password",A),this._email=g,this._password=m,this._tenantId=K}static _fromEmailAndPassword(g,m){return new ki(g,m,"password")}static _fromEmailAndCode(g,m,A=null){return new ki(g,m,"emailLink",A)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g;if(null!=m&&m.email&&null!=m&&m.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(g){var m=this;return(0,E.Z)(function*(){var A;switch(m.signInMethod){case"password":const K={returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(A=g._getRecaptchaConfig())&&void 0!==A&&A.emailPasswordEnabled){const oe=yield ri(g,K,"signInWithPassword");return Gn(g,oe)}return Gn(g,K).catch(function(){var oe=(0,E.Z)(function*(Je){if("auth/missing-recaptcha-token"===Je.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const mt=yield ri(g,K,"signInWithPassword");return Gn(g,mt)}return Promise.reject(Je)});return function(Je){return oe.apply(this,arguments)}}());case"emailLink":return function xr(C,g){return As.apply(this,arguments)}(g,{email:m._email,oobCode:m._password});default:et(g,"internal-error")}})()}_linkToIdToken(g,m){var A=this;return(0,E.Z)(function*(){switch(A.signInMethod){case"password":return Bt(g,{idToken:m,returnSecureToken:!0,email:A._email,password:A._password});case"emailLink":return function fo(C,g){return $i.apply(this,arguments)}(g,{idToken:m,email:A._email,oobCode:A._password});default:et(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Hi(C,g){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,E.Z)(function*(C,g){return St(C,"POST","/v1/accounts:signInWithIdp",Zt(C,g))})).apply(this,arguments)}class qi extends Ke{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const m=new qi(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(m.idToken=g.idToken),g.accessToken&&(m.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(m.nonce=g.nonce),g.pendingToken&&(m.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(m.accessToken=g.oauthToken,m.secret=g.oauthTokenSecret):et("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:A,signInMethod:K}=m,oe=(0,Le._T)(m,["providerId","signInMethod"]);if(!A||!K)return null;const Je=new qi(A,K);return Je.idToken=oe.idToken||void 0,Je.accessToken=oe.accessToken||void 0,Je.secret=oe.secret,Je.nonce=oe.nonce,Je.pendingToken=oe.pendingToken||null,Je}_getIdTokenResponse(g){return Hi(g,this.buildRequest())}_linkToIdToken(g,m){const A=this.buildRequest();return A.idToken=m,Hi(g,A)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,Hi(g,m)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),g.postBody=(0,ee.xO)(m)}return g}}function Fs(){return(Fs=(0,E.Z)(function*(C,g){return $t(C,"POST","/v1/accounts:sendVerificationCode",Zt(C,g))})).apply(this,arguments)}function Do(){return(Do=(0,E.Z)(function*(C,g){return St(C,"POST","/v1/accounts:signInWithPhoneNumber",Zt(C,g))})).apply(this,arguments)}function no(){return(no=(0,E.Z)(function*(C,g){const m=yield St(C,"POST","/v1/accounts:signInWithPhoneNumber",Zt(C,g));if(m.temporaryProof)throw wn(C,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const da={USER_NOT_FOUND:"user-not-found"};function ro(){return(ro=(0,E.Z)(function*(C,g){return St(C,"POST","/v1/accounts:signInWithPhoneNumber",Zt(C,Object.assign(Object.assign({},g),{operation:"REAUTH"})),da)})).apply(this,arguments)}class hs extends Ke{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,m){return new hs({verificationId:g,verificationCode:m})}static _fromTokenResponse(g,m){return new hs({phoneNumber:g,temporaryProof:m})}_getIdTokenResponse(g){return function ba(C,g){return Do.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,m){return function xs(C,g){return no.apply(this,arguments)}(g,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function il(C,g){return ro.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:m,verificationId:A,verificationCode:K}=this.params;return g&&m?{temporaryProof:g,phoneNumber:m}:{sessionInfo:A,code:K}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:m,verificationCode:A,phoneNumber:K,temporaryProof:oe}=g;return A||m||K||oe?new hs({verificationId:m,verificationCode:A,phoneNumber:K,temporaryProof:oe}):null}}class ls{constructor(g){var m,A,K,oe,Je,mt;const Kt=(0,ee.zd)((0,ee.pd)(g)),kn=null!==(m=Kt.apiKey)&&void 0!==m?m:null,er=null!==(A=Kt.oobCode)&&void 0!==A?A:null,nr=function ha(C){switch(C){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(K=Kt.mode)&&void 0!==K?K:null);Pe(kn&&er&&nr,"argument-error"),this.apiKey=kn,this.operation=nr,this.code=er,this.continueUrl=null!==(oe=Kt.continueUrl)&&void 0!==oe?oe:null,this.languageCode=null!==(Je=Kt.languageCode)&&void 0!==Je?Je:null,this.tenantId=null!==(mt=Kt.tenantId)&&void 0!==mt?mt:null}static parseLink(g){const m=function po(C){const g=(0,ee.zd)((0,ee.pd)(C)).link,m=g?(0,ee.zd)((0,ee.pd)(g)).deep_link_id:null,A=(0,ee.zd)((0,ee.pd)(C)).deep_link_id;return(A?(0,ee.zd)((0,ee.pd)(A)).link:null)||A||m||g||C}(g);try{return new ls(m)}catch{return null}}}let Lo=(()=>{class C{constructor(){this.providerId=C.PROVIDER_ID}static credential(m,A){return ki._fromEmailAndPassword(m,A)}static credentialWithLink(m,A){const K=ls.parseLink(A);return Pe(K,"argument-error"),ki._fromEmailAndCode(m,K.code,K.tenantId)}}return C.PROVIDER_ID="password",C.EMAIL_PASSWORD_SIGN_IN_METHOD="password",C.EMAIL_LINK_SIGN_IN_METHOD="emailLink",C})();class io{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Ii extends io{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class ts extends Ii{static credentialFromJSON(g){const m="string"==typeof g?JSON.parse(g):g;return Pe("providerId"in m&&"signInMethod"in m,"argument-error"),qi._fromParams(m)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return Pe(g.idToken||g.accessToken,"argument-error"),qi._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return ts.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return ts.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:m,oauthAccessToken:A,oauthTokenSecret:K,pendingToken:oe,nonce:Je,providerId:mt}=g;if(!A&&!K&&!m&&!oe||!mt)return null;try{return new ts(mt)._credential({idToken:m,accessToken:A,nonce:Je,pendingToken:oe})}catch{return null}}}let To=(()=>{class C extends Ii{constructor(){super("facebook.com")}static credential(m){return qi._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return C.credentialFromTaggedObject(m)}static credentialFromError(m){return C.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return C.credential(m.oauthAccessToken)}catch{return null}}}return C.FACEBOOK_SIGN_IN_METHOD="facebook.com",C.PROVIDER_ID="facebook.com",C})(),js=(()=>{class C extends Ii{constructor(){super("google.com"),this.addScope("profile")}static credential(m,A){return qi._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:A})}static credentialFromResult(m){return C.credentialFromTaggedObject(m)}static credentialFromError(m){return C.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:A,oauthAccessToken:K}=m;if(!A&&!K)return null;try{return C.credential(A,K)}catch{return null}}}return C.GOOGLE_SIGN_IN_METHOD="google.com",C.PROVIDER_ID="google.com",C})(),Xo=(()=>{class C extends Ii{constructor(){super("github.com")}static credential(m){return qi._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return C.credentialFromTaggedObject(m)}static credentialFromError(m){return C.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return C.credential(m.oauthAccessToken)}catch{return null}}}return C.GITHUB_SIGN_IN_METHOD="github.com",C.PROVIDER_ID="github.com",C})();class Cs extends Ke{constructor(g,m){super(g,g),this.pendingToken=m}_getIdTokenResponse(g){return Hi(g,this.buildRequest())}_linkToIdToken(g,m){const A=this.buildRequest();return A.idToken=m,Hi(g,A)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,Hi(g,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:A,signInMethod:K,pendingToken:oe}=m;return A&&K&&oe&&A===K?new Cs(A,oe):null}static _create(g,m){return new Cs(g,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class go extends io{constructor(g){Pe(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return go.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return go.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const m=Cs.fromJSON(g);return Pe(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:m,providerId:A}=g;if(!m||!A)return null;try{return Cs._create(A,m)}catch{return null}}}let Da=(()=>{class C extends Ii{constructor(){super("twitter.com")}static credential(m,A){return qi._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:A})}static credentialFromResult(m){return C.credentialFromTaggedObject(m)}static credentialFromError(m){return C.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:A,oauthTokenSecret:K}=m;if(!A||!K)return null;try{return C.credential(A,K)}catch{return null}}}return C.TWITTER_SIGN_IN_METHOD="twitter.com",C.PROVIDER_ID="twitter.com",C})();function vs(C,g){return mo.apply(this,arguments)}function mo(){return(mo=(0,E.Z)(function*(C,g){return St(C,"POST","/v1/accounts:signUp",Zt(C,g))})).apply(this,arguments)}class mi{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,m,A,K=!1){return(0,E.Z)(function*(){const oe=yield Ht._fromIdTokenResponse(g,A,K),Je=yo(A);return new mi({user:oe,providerId:Je,_tokenResponse:A,operationType:m})})()}static _forOperation(g,m,A){return(0,E.Z)(function*(){yield g._updateTokensIfNecessary(A,!0);const K=yo(A);return new mi({user:g,providerId:K,_tokenResponse:A,operationType:m})})()}}function yo(C){return C.providerId?C.providerId:"phoneNumber"in C?"phone":null}function Ti(){return(Ti=(0,E.Z)(function*(C){var g;const m=Dr(C);if(yield m._initializationPromise,null!==(g=m.currentUser)&&void 0!==g&&g.isAnonymous)return new mi({user:m.currentUser,providerId:null,operationType:"signIn"});const A=yield vs(m,{returnSecureToken:!0}),K=yield mi._fromIdTokenResponse(m,"signIn",A,!0);return yield m._updateCurrentUser(K.user),K})).apply(this,arguments)}class Jo extends ee.ZR{constructor(g,m,A,K){var oe;super(m.code,m.message),this.operationType=A,this.user=K,Object.setPrototypeOf(this,Jo.prototype),this.customData={appName:g.name,tenantId:null!==(oe=g.tenantId)&&void 0!==oe?oe:void 0,_serverResponse:m.customData._serverResponse,operationType:A}}static _fromErrorAndOperation(g,m,A,K){return new Jo(g,m,A,K)}}function bs(C,g,m,A){return("reauthenticate"===g?m._getReauthenticationResolver(C):m._getIdTokenResponse(C)).catch(oe=>{throw"auth/multi-factor-auth-required"===oe.code?Jo._fromErrorAndOperation(C,oe,g,A):oe})}function ns(C){return new Set(C.map(({providerId:g})=>g).filter(g=>!!g))}function Rs(){return Rs=(0,E.Z)(function*(C,g){const m=(0,ee.m9)(C);yield cs(!0,m,g);const{providerUserInfo:A}=yield function lr(C,g){return Er.apply(this,arguments)}(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[g]}),K=ns(A||[]);return m.providerData=m.providerData.filter(oe=>K.has(oe.providerId)),K.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m}),Rs.apply(this,arguments)}function Hs(C,g){return zi.apply(this,arguments)}function zi(){return(zi=(0,E.Z)(function*(C,g,m=!1){const A=yield tn(C,g._linkToIdToken(C.auth,yield C.getIdToken()),m);return mi._forOperation(C,"link",A)})).apply(this,arguments)}function cs(C,g,m){return ea.apply(this,arguments)}function ea(){return(ea=(0,E.Z)(function*(C,g,m){yield qr(g);const K=!1===C?"provider-already-linked":"no-such-provider";Pe(ns(g.providerData).has(m)===C,g.auth,K)})).apply(this,arguments)}function pa(C,g){return _s.apply(this,arguments)}function _s(){return(_s=(0,E.Z)(function*(C,g,m=!1){const{auth:A}=C,K="reauthenticate";try{const oe=yield tn(C,bs(A,K,g,C),m);Pe(oe.idToken,A,"internal-error");const Je=Ir(oe.idToken);Pe(Je,A,"internal-error");const{sub:mt}=Je;return Pe(C.uid===mt,A,"user-mismatch"),mi._forOperation(C,K,oe)}catch(oe){throw"auth/user-not-found"===(null==oe?void 0:oe.code)&&et(A,"user-mismatch"),oe}})).apply(this,arguments)}function ga(C,g){return ta.apply(this,arguments)}function ta(){return(ta=(0,E.Z)(function*(C,g,m=!1){const A="signIn",K=yield bs(C,A,g),oe=yield mi._fromIdTokenResponse(C,A,K);return m||(yield C._updateCurrentUser(oe.user)),oe})).apply(this,arguments)}function pr(C,g){return $o.apply(this,arguments)}function $o(){return($o=(0,E.Z)(function*(C,g){return ga(Dr(C),g)})).apply(this,arguments)}function ma(C,g){return b.apply(this,arguments)}function b(){return(b=(0,E.Z)(function*(C,g){const m=(0,ee.m9)(C);return yield cs(!1,m,g.providerId),Hs(m,g)})).apply(this,arguments)}function q(C,g){return T.apply(this,arguments)}function T(){return(T=(0,E.Z)(function*(C,g){return pa((0,ee.m9)(C),g)})).apply(this,arguments)}function pe(){return(pe=(0,E.Z)(function*(C,g){return St(C,"POST","/v1/accounts:signInWithCustomToken",Zt(C,g))})).apply(this,arguments)}function R(){return R=(0,E.Z)(function*(C,g){const m=Dr(C),A=yield function W(C,g){return pe.apply(this,arguments)}(m,{token:g,returnSecureToken:!0}),K=yield mi._fromIdTokenResponse(m,"signIn",A);return yield m._updateCurrentUser(K.user),K}),R.apply(this,arguments)}class O{constructor(g,m){this.factorId=g,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(g,m){return"phoneInfo"in m?ne._fromServerResponse(g,m):"totpInfo"in m?yt._fromServerResponse(g,m):et(g,"internal-error")}}class ne extends O{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,m){return new ne(m)}}class yt extends O{constructor(g){super("totp",g)}static _fromServerResponse(g,m){return new yt(m)}}function dn(C,g,m){var A;Pe((null===(A=m.url)||void 0===A?void 0:A.length)>0,C,"invalid-continue-uri"),Pe(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,C,"invalid-dynamic-link-domain"),g.continueUrl=m.url,g.dynamicLinkDomain=m.dynamicLinkDomain,g.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(Pe(m.iOS.bundleId.length>0,C,"missing-ios-bundle-id"),g.iOSBundleId=m.iOS.bundleId),m.android&&(Pe(m.android.packageName.length>0,C,"missing-android-pkg-name"),g.androidInstallApp=m.android.installApp,g.androidMinimumVersionCode=m.android.minimumVersion,g.androidPackageName=m.android.packageName)}function yi(){return yi=(0,E.Z)(function*(C,g,m){var A;const K=Dr(C),oe={requestType:"PASSWORD_RESET",email:g,clientType:"CLIENT_TYPE_WEB"};if(null!==(A=K._getRecaptchaConfig())&&void 0!==A&&A.emailPasswordEnabled){const Je=yield ri(K,oe,"getOobCode",!0);m&&dn(K,Je,m),yield Et(K,Je)}else m&&dn(K,oe,m),yield Et(K,oe).catch(function(){var Je=(0,E.Z)(function*(mt){if("auth/missing-recaptcha-token"!==mt.code)return Promise.reject(mt);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Kt=yield ri(K,oe,"getOobCode",!0);m&&dn(K,Kt,m),yield Et(K,Kt)}});return function(mt){return Je.apply(this,arguments)}}())}),yi.apply(this,arguments)}function fs(){return(fs=(0,E.Z)(function*(C,g,m){yield Nt((0,ee.m9)(C),{oobCode:g,newPassword:m})})).apply(this,arguments)}function Ai(){return Ai=(0,E.Z)(function*(C,g){yield function mn(C,g){return zn.apply(this,arguments)}((0,ee.m9)(C),{oobCode:g})}),Ai.apply(this,arguments)}function _l(C,g){return ya.apply(this,arguments)}function ya(){return(ya=(0,E.Z)(function*(C,g){const m=(0,ee.m9)(C),A=yield Nt(m,{oobCode:g}),K=A.requestType;switch(Pe(K,m,"internal-error"),K){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Pe(A.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Pe(A.mfaInfo,m,"internal-error");default:Pe(A.email,m,"internal-error")}let oe=null;return A.mfaInfo&&(oe=O._fromServerResponse(Dr(m),A.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.newEmail:A.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.email:A.newEmail)||null,multiFactorInfo:oe},operation:K}})).apply(this,arguments)}function rs(){return(rs=(0,E.Z)(function*(C,g){const{data:m}=yield _l((0,ee.m9)(C),g);return m.email})).apply(this,arguments)}function So(){return So=(0,E.Z)(function*(C,g,m){var A;const K=Dr(C),oe={returnSecureToken:!0,email:g,password:m,clientType:"CLIENT_TYPE_WEB"};let Je;if(null!==(A=K._getRecaptchaConfig())&&void 0!==A&&A.emailPasswordEnabled){const kn=yield ri(K,oe,"signUpPassword");Je=vs(K,kn)}else Je=vs(K,oe).catch(function(){var kn=(0,E.Z)(function*(er){if("auth/missing-recaptcha-token"===er.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const nr=yield ri(K,oe,"signUpPassword");return vs(K,nr)}return Promise.reject(er)});return function(er){return kn.apply(this,arguments)}}());const mt=yield Je.catch(kn=>Promise.reject(kn)),Kt=yield mi._fromIdTokenResponse(K,"signIn",mt);return yield K._updateCurrentUser(Kt.user),Kt}),So.apply(this,arguments)}function va(){return va=(0,E.Z)(function*(C,g,m){var A;const K=Dr(C),oe={requestType:"EMAIL_SIGNIN",email:g,clientType:"CLIENT_TYPE_WEB"};function Je(mt,Kt){Pe(Kt.handleCodeInApp,K,"argument-error"),Kt&&dn(K,mt,Kt)}if(null!==(A=K._getRecaptchaConfig())&&void 0!==A&&A.emailPasswordEnabled){const mt=yield ri(K,oe,"getOobCode",!0);Je(mt,m),yield an(K,mt)}else Je(oe,m),yield an(K,oe).catch(function(){var mt=(0,E.Z)(function*(Kt){if("auth/missing-recaptcha-token"!==Kt.code)return Promise.reject(Kt);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const kn=yield ri(K,oe,"getOobCode",!0);Je(kn,m),yield an(K,kn)}});return function(Kt){return mt.apply(this,arguments)}}())}),va.apply(this,arguments)}function Ms(){return(Ms=(0,E.Z)(function*(C,g,m){const A=(0,ee.m9)(C),K=Lo.credentialWithLink(g,m||ht());return Pe(K._tenantId===(A.tenantId||null),A,"tenant-id-mismatch"),pr(A,K)})).apply(this,arguments)}function za(){return(za=(0,E.Z)(function*(C,g){return $t(C,"POST","/v1/accounts:createAuthUri",Zt(C,g))})).apply(this,arguments)}function Uo(){return Uo=(0,E.Z)(function*(C,g){const A={identifier:g,continueUri:_t()?ht():"http://localhost"},{signinMethods:K}=yield function Ha(C,g){return za.apply(this,arguments)}((0,ee.m9)(C),A);return K||[]}),Uo.apply(this,arguments)}function na(){return na=(0,E.Z)(function*(C,g){const m=(0,ee.m9)(C),K={requestType:"VERIFY_EMAIL",idToken:yield C.getIdToken()};g&&dn(m.auth,K,g);const{email:oe}=yield function ut(C,g){return tt.apply(this,arguments)}(m.auth,K);oe!==C.email&&(yield C.reload())}),na.apply(this,arguments)}function Eo(){return Eo=(0,E.Z)(function*(C,g,m){const A=(0,ee.m9)(C),oe={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield C.getIdToken(),newEmail:g};m&&dn(A.auth,oe,m);const{email:Je}=yield function Vr(C,g){return hr.apply(this,arguments)}(A.auth,oe);Je!==C.email&&(yield C.reload())}),Eo.apply(this,arguments)}function oo(){return(oo=(0,E.Z)(function*(C,g){return $t(C,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ta(){return Ta=(0,E.Z)(function*(C,{displayName:g,photoURL:m}){if(void 0===g&&void 0===m)return;const A=(0,ee.m9)(C),oe={idToken:yield A.getIdToken(),displayName:g,photoUrl:m,returnSecureToken:!0},Je=yield tn(A,function Vo(C,g){return oo.apply(this,arguments)}(A.auth,oe));A.displayName=Je.displayName||null,A.photoURL=Je.photoUrl||null;const mt=A.providerData.find(({providerId:Kt})=>"password"===Kt);mt&&(mt.displayName=A.displayName,mt.photoURL=A.photoURL),yield A._updateTokensIfNecessary(Je)}),Ta.apply(this,arguments)}function Ni(C,g,m){return si.apply(this,arguments)}function si(){return(si=(0,E.Z)(function*(C,g,m){const{auth:A}=C,oe={idToken:yield C.getIdToken(),returnSecureToken:!0};g&&(oe.email=g),m&&(oe.password=m);const Je=yield tn(C,Bt(A,oe));yield C._updateTokensIfNecessary(Je,!0)})).apply(this,arguments)}class Ao{constructor(g,m,A={}){this.isNewUser=g,this.providerId=m,this.profile=A}}class wl extends Ao{constructor(g,m,A,K){super(g,m,A),this.username=K}}class ao extends Ao{constructor(g,m){super(g,"facebook.com",m)}}class Hl extends wl{constructor(g,m){super(g,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class Rr extends Ao{constructor(g,m){super(g,"google.com",m)}}class zl extends wl{constructor(g,m,A){super(g,"twitter.com",m,A)}}function Cl(C){const{user:g,_tokenResponse:m}=C;return g.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Sa(C){var g,m;if(!C)return null;const{providerId:A}=C,K=C.rawUserInfo?JSON.parse(C.rawUserInfo):{},oe=C.isNewUser||"identitytoolkit#SignupNewUserResponse"===C.kind;if(!A&&null!=C&&C.idToken){const Je=null===(m=null===(g=Ir(C.idToken))||void 0===g?void 0:g.firebase)||void 0===m?void 0:m.sign_in_provider;if(Je)return new Ao(oe,"anonymous"!==Je&&"custom"!==Je?Je:null)}if(!A)return null;switch(A){case"facebook.com":return new ao(oe,K);case"github.com":return new Hl(oe,K);case"google.com":return new Rr(oe,K);case"twitter.com":return new zl(oe,K,C.screenName||null);case"custom":case"anonymous":return new Ao(oe,null);default:return new Ao(oe,A,K)}}(m)}class Lr{constructor(g,m,A){this.type=g,this.credential=m,this.auth=A}static _fromIdtoken(g,m){return new Lr("enroll",g,m)}static _fromMfaPendingCredential(g){return new Lr("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var m,A;if(null!=g&&g.multiFactorSession){if(null!==(m=g.multiFactorSession)&&void 0!==m&&m.pendingCredential)return Lr._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(A=g.multiFactorSession)&&void 0!==A&&A.idToken)return Lr._fromIdtoken(g.multiFactorSession.idToken)}return null}}class wr{constructor(g,m,A){this.session=g,this.hints=m,this.signInResolver=A}static _fromError(g,m){const A=Dr(g),K=m.customData._serverResponse,oe=(K.mfaInfo||[]).map(mt=>O._fromServerResponse(A,mt));Pe(K.mfaPendingCredential,A,"internal-error");const Je=Lr._fromMfaPendingCredential(K.mfaPendingCredential);return new wr(Je,oe,function(){var mt=(0,E.Z)(function*(Kt){const kn=yield Kt._process(A,Je);delete K.mfaInfo,delete K.mfaPendingCredential;const er=Object.assign(Object.assign({},K),{idToken:kn.idToken,refreshToken:kn.refreshToken});switch(m.operationType){case"signIn":const nr=yield mi._fromIdTokenResponse(A,m.operationType,er);return yield A._updateCurrentUser(nr.user),nr;case"reauthenticate":return Pe(m.user,A,"internal-error"),mi._forOperation(m.user,m.operationType,er);default:et(A,"internal-error")}});return function(Kt){return mt.apply(this,arguments)}}())}resolveSignIn(g){var m=this;return(0,E.Z)(function*(){return m.signInResolver(g)})()}}class Ls{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(A=>O._fromServerResponse(g.auth,A)))})}static _fromUser(g){return new Ls(g)}getSession(){var g=this;return(0,E.Z)(function*(){return Lr._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,m){var A=this;return(0,E.Z)(function*(){const K=g,oe=yield A.getSession(),Je=yield tn(A.user,K._process(A.user.auth,oe,m));return yield A.user._updateTokensIfNecessary(Je),A.user.reload()})()}unenroll(g){var m=this;return(0,E.Z)(function*(){const A="string"==typeof g?g:g.uid,K=yield m.user.getIdToken();try{const oe=yield tn(m.user,function Gs(C,g){return $t(C,"POST","/v2/accounts/mfaEnrollment:withdraw",Zt(C,g))}(m.user.auth,{idToken:K,mfaEnrollmentId:A}));m.enrolledFactors=m.enrolledFactors.filter(({uid:Je})=>Je!==A),yield m.user._updateTokensIfNecessary(oe),yield m.user.reload()}catch(oe){throw oe}})()}}const ia=new WeakMap,Aa="__sak";class Wa{constructor(g,m){this.storageRetriever=g,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Aa,"1"),this.storage.removeItem(Aa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,m){return this.storage.setItem(g,JSON.stringify(m)),Promise.resolve()}_get(g){const m=this.storage.getItem(g);return Promise.resolve(m?JSON.parse(m):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Wi=(()=>{class C extends Wa{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,A)=>this.onStorageEvent(m,A),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Gl(){const C=(0,ee.z$)();return ot(C)||Ot(C)}()&&function Gr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=cr(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const A of Object.keys(this.listeners)){const K=this.storage.getItem(A),oe=this.localCache[A];K!==oe&&m(A,oe,K)}}onStorageEvent(m,A=!1){if(!m.key)return void this.forAllChangedKeys((mt,Kt,kn)=>{this.notifyListeners(mt,kn)});const K=m.key;if(A?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const mt=this.storage.getItem(K);if(m.newValue!==mt)null!==m.newValue?this.storage.setItem(K,m.newValue):this.storage.removeItem(K);else if(this.localCache[K]===m.newValue&&!A)return}const oe=()=>{const mt=this.storage.getItem(K);!A&&this.localCache[K]===mt||this.notifyListeners(K,mt)},Je=this.storage.getItem(K);!function Qn(){return(0,ee.w1)()&&10===document.documentMode}()||Je===m.newValue||m.newValue===m.oldValue?oe():setTimeout(oe,10)}notifyListeners(m,A){this.localCache[m]=A;const K=this.listeners[m];if(K)for(const oe of Array.from(K))oe(A&&JSON.parse(A))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,A,K)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:A,newValue:K}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,A){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(A)}_removeListener(m,A){this.listeners[m]&&(this.listeners[m].delete(A),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,A){var K=()=>super._set,oe=this;return(0,E.Z)(function*(){yield K().call(oe,m,A),oe.localCache[m]=JSON.stringify(A)})()}_get(m){var A=()=>super._get,K=this;return(0,E.Z)(function*(){const oe=yield A().call(K,m);return K.localCache[m]=JSON.stringify(oe),oe})()}_remove(m){var A=()=>super._remove,K=this;return(0,E.Z)(function*(){yield A().call(K,m),delete K.localCache[m]})()}}return C.type="LOCAL",C})(),Zi=(()=>{class C extends Wa{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,A){}_removeListener(m,A){}}return C.type="SESSION",C})();let Wl=(()=>{class C{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const A=this.receivers.find(oe=>oe.isListeningto(m));if(A)return A;const K=new C(m);return this.receivers.push(K),K}isListeningto(m){return this.eventTarget===m}handleEvent(m){var A=this;return(0,E.Z)(function*(){const K=m,{eventId:oe,eventType:Je,data:mt}=K.data,Kt=A.handlersMap[Je];if(null==Kt||!Kt.size)return;K.ports[0].postMessage({status:"ack",eventId:oe,eventType:Je});const kn=Array.from(Kt).map(function(){var nr=(0,E.Z)(function*(as){return as(K.origin,mt)});return function(as){return nr.apply(this,arguments)}}()),er=yield function gu(C){return Promise.all(C.map(function(){var g=(0,E.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(A){return{fulfilled:!1,reason:A}}});return function(m){return g.apply(this,arguments)}}()))}(kn);K.ports[0].postMessage({status:"done",eventId:oe,eventType:Je,response:er})})()}_subscribe(m,A){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(A)}_unsubscribe(m,A){this.handlersMap[m]&&A&&this.handlersMap[m].delete(A),(!A||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return C.receivers=[],C})();function hn(C="",g=10){let m="";for(let A=0;A<g;A++)m+=Math.floor(10*Math.random());return C+m}class ss{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,m,A=50){var K=this;return(0,E.Z)(function*(){const oe=typeof MessageChannel<"u"?new MessageChannel:null;if(!oe)throw new Error("connection_unavailable");let Je,mt;return new Promise((Kt,kn)=>{const er=hn("",20);oe.port1.start();const nr=setTimeout(()=>{kn(new Error("unsupported_event"))},A);mt={messageChannel:oe,onMessage(as){const Go=as;if(Go.data.eventId===er)switch(Go.data.status){case"ack":clearTimeout(nr),Je=setTimeout(()=>{kn(new Error("timeout"))},3e3);break;case"done":clearTimeout(Je),Kt(Go.data.response);break;default:clearTimeout(nr),clearTimeout(Je),kn(new Error("invalid_response"))}}},K.handlers.add(mt),oe.port1.addEventListener("message",mt.onMessage),K.target.postMessage({eventType:g,eventId:er,data:m},[oe.port2])}).finally(()=>{mt&&K.removeMessageHandler(mt)})})()}}function ci(){return window}function Hn(){return typeof ci().WorkerGlobalScope<"u"&&"function"==typeof ci().importScripts}function oc(){return(oc=(0,E.Z)(function*(){if(null==navigator||!navigator.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const sn="firebaseLocalStorageDb",ui=1,Ro="firebaseLocalStorage",xc="fbase_key";class Dl{constructor(g){this.request=g}toPromise(){return new Promise((g,m)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Kl(C,g){return C.transaction([Ro],g?"readwrite":"readonly").objectStore(Ro)}function mu(){const C=indexedDB.open(sn,ui);return new Promise((g,m)=>{C.addEventListener("error",()=>{m(C.error)}),C.addEventListener("upgradeneeded",()=>{const A=C.result;try{A.createObjectStore(Ro,{keyPath:xc})}catch(K){m(K)}}),C.addEventListener("success",(0,E.Z)(function*(){const A=C.result;A.objectStoreNames.contains(Ro)?g(A):(A.close(),yield function ac(){const C=indexedDB.deleteDatabase(sn);return new Dl(C).toPromise()}(),g(yield mu()))}))})}function jo(C,g,m){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,E.Z)(function*(C,g,m){const A=Kl(C,!0).put({[xc]:g,value:m});return new Dl(A).toPromise()})).apply(this,arguments)}function lo(){return(lo=(0,E.Z)(function*(C,g){const m=Kl(C,!1).get(g),A=yield new Dl(m).toPromise();return void 0===A?null:A.value})).apply(this,arguments)}function al(C,g){const m=Kl(C,!0).delete(g);return new Dl(m).toPromise()}const oi=(()=>{class C{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,E.Z)(function*(){return m.db||(m.db=yield mu()),m.db})()}_withRetries(m){var A=this;return(0,E.Z)(function*(){let K=0;for(;;)try{const oe=yield A._openDb();return yield m(oe)}catch(oe){if(K++>3)throw oe;A.db&&(A.db.close(),A.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,E.Z)(function*(){return Hn()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,E.Z)(function*(){m.receiver=Wl._getInstance(function Lt(){return Hn()?self:null}()),m.receiver._subscribe("keyChanged",function(){var A=(0,E.Z)(function*(K,oe){return{keyProcessed:(yield m._poll()).includes(oe.key)}});return function(K,oe){return A.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var A=(0,E.Z)(function*(K,oe){return["keyChanged"]});return function(K,oe){return A.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,E.Z)(function*(){var A,K;if(m.activeServiceWorker=yield function ir(){return oc.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new ss(m.activeServiceWorker);const oe=yield m.sender._send("ping",{},800);oe&&null!==(A=oe[0])&&void 0!==A&&A.fulfilled&&null!==(K=oe[0])&&void 0!==K&&K.value.includes("keyChanged")&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var A=this;return(0,E.Z)(function*(){if(A.sender&&A.activeServiceWorker&&function Fn(){var C;return(null===(C=null==navigator?void 0:navigator.serviceWorker)||void 0===C?void 0:C.controller)||null}()===A.activeServiceWorker)try{yield A.sender._send("keyChanged",{key:m},A.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,E.Z)(function*(){try{if(!indexedDB)return!1;const m=yield mu();return yield jo(m,Aa,"1"),yield al(m,Aa),!0}catch{}return!1})()}_withPendingWrite(m){var A=this;return(0,E.Z)(function*(){A.pendingWrites++;try{yield m()}finally{A.pendingWrites--}})()}_set(m,A){var K=this;return(0,E.Z)(function*(){return K._withPendingWrite((0,E.Z)(function*(){return yield K._withRetries(oe=>jo(oe,m,A)),K.localCache[m]=A,K.notifyServiceWorker(m)}))})()}_get(m){var A=this;return(0,E.Z)(function*(){const K=yield A._withRetries(oe=>function Kc(C,g){return lo.apply(this,arguments)}(oe,m));return A.localCache[m]=K,K})()}_remove(m){var A=this;return(0,E.Z)(function*(){return A._withPendingWrite((0,E.Z)(function*(){return yield A._withRetries(K=>al(K,m)),delete A.localCache[m],A.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,E.Z)(function*(){const A=yield m._withRetries(Je=>{const mt=Kl(Je,!1).getAll();return new Dl(mt).toPromise()});if(!A)return[];if(0!==m.pendingWrites)return[];const K=[],oe=new Set;for(const{fbase_key:Je,value:mt}of A)oe.add(Je),JSON.stringify(m.localCache[Je])!==JSON.stringify(mt)&&(m.notifyListeners(Je,mt),K.push(Je));for(const Je of Object.keys(m.localCache))m.localCache[Je]&&!oe.has(Je)&&(m.notifyListeners(Je,null),K.push(Je));return K})()}notifyListeners(m,A){this.localCache[m]=A;const K=this.listeners[m];if(K)for(const oe of Array.from(K))oe(A)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,E.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,A){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(A)}_removeListener(m,A){this.listeners[m]&&(this.listeners[m].delete(A),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return C.type="LOCAL",C})(),Pn=1e12;class ql{constructor(g){this.auth=g,this.counter=Pn,this._widgets=new Map}render(g,m){const A=this.counter;return this._widgets.set(A,new lc(g,this.auth.name,m||{})),this.counter++,A}reset(g){var m;const A=g||Pn;null===(m=this._widgets.get(A))||void 0===m||m.delete(),this._widgets.delete(A)}getResponse(g){var m;return(null===(m=this._widgets.get(g||Pn))||void 0===m?void 0:m.getResponse())||""}execute(g){var m=this;return(0,E.Z)(function*(){var A;return null===(A=m._widgets.get(g||Pn))||void 0===A||A.execute(),""})()}}class lc{constructor(g,m,A){this.params=A,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const K="string"==typeof g?document.getElementById(g):g;Pe(K,"argument-error",{appName:m}),this.container=K,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Sl(C){const g=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let A=0;A<C;A++)g.push(m.charAt(Math.floor(Math.random()*m.length)));return g.join("")}(50);const{callback:g,"expired-callback":m}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Yc=ar("rcb"),cc=new ke(3e4,6e4);class qa{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=ci().grecaptcha)||void 0===g||!g.render)}load(g,m=""){return Pe(function Zc(C){return C.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(C)}(m),g,"argument-error"),this.shouldResolveImmediately(m)&&yr(ci().grecaptcha)?Promise.resolve(ci().grecaptcha):new Promise((A,K)=>{const oe=ci().setTimeout(()=>{K(Ze(g,"network-request-failed"))},cc.get());ci()[Yc]=()=>{ci().clearTimeout(oe),delete ci()[Yc];const mt=ci().grecaptcha;if(!mt||!yr(mt))return void K(Ze(g,"internal-error"));const Kt=mt.render;mt.render=(kn,er)=>{const nr=Kt(kn,er);return this.counter++,nr},this.hostLanguage=m,A(mt)},Wn(`https://www.google.com/recaptcha/api.js??${(0,ee.xO)({onload:Yc,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(oe),K(Ze(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var m;return!(null===(m=ci().grecaptcha)||void 0===m||!m.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class qu{load(g){return(0,E.Z)(function*(){return new ql(g)})()}clearedOneInstance(){}}const Yr="recaptcha",uc={theme:"light",type:"image"};class Ra{constructor(g,m=Object.assign({},uc),A){this.parameters=m,this.type=Yr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Dr(A),this.isInvisible="invisible"===this.parameters.size,Pe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const K="string"==typeof g?document.getElementById(g):g;Pe(K,this.auth,"argument-error"),this.container=K,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new qu:new qa,this.validateStartingState()}verify(){var g=this;return(0,E.Z)(function*(){g.assertNotDestroyed();const m=yield g.render(),A=g.getAssertedRecaptcha();return A.getResponse(m)||new Promise(oe=>{const Je=mt=>{mt&&(g.tokenChangeListeners.delete(Je),oe(mt))};g.tokenChangeListeners.add(Je),g.isInvisible&&A.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){Pe(!this.parameters.sitekey,this.auth,"argument-error"),Pe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Pe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return m=>{if(this.tokenChangeListeners.forEach(A=>A(m)),"function"==typeof g)g(m);else if("string"==typeof g){const A=ci()[g];"function"==typeof A&&A(m)}}}assertNotDestroyed(){Pe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,E.Z)(function*(){if(yield g.init(),!g.widgetId){let m=g.container;if(!g.isInvisible){const A=document.createElement("div");m.appendChild(A),m=A}g.widgetId=g.getAssertedRecaptcha().render(m,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,E.Z)(function*(){Pe(_t()&&!Hn(),g.auth,"internal-error"),yield function Mi(){let C=null;return new Promise(g=>{"complete"!==document.readyState?(C=()=>g(),window.addEventListener("load",C)):g()}).catch(g=>{throw C&&window.removeEventListener("load",C),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const m=yield function At(C){return Qt.apply(this,arguments)}(g.auth);Pe(m,g.auth,"internal-error"),g.parameters.sitekey=m})()}getAssertedRecaptcha(){return Pe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class vr{constructor(g,m){this.verificationId=g,this.onConfirmation=m}confirm(g){const m=hs._fromVerification(this.verificationId,g);return this.onConfirmation(m)}}function Rt(){return(Rt=(0,E.Z)(function*(C,g,m){const A=Dr(C),K=yield Mo(A,g,(0,ee.m9)(m));return new vr(K,oe=>pr(A,oe))})).apply(this,arguments)}function Es(){return(Es=(0,E.Z)(function*(C,g,m){const A=(0,ee.m9)(C);yield cs(!1,A,"phone");const K=yield Mo(A.auth,g,(0,ee.m9)(m));return new vr(K,oe=>ma(A,oe))})).apply(this,arguments)}function Ea(){return(Ea=(0,E.Z)(function*(C,g,m){const A=(0,ee.m9)(C),K=yield Mo(A.auth,g,(0,ee.m9)(m));return new vr(K,oe=>q(A,oe))})).apply(this,arguments)}function Mo(C,g,m){return Qi.apply(this,arguments)}function Qi(){return Qi=(0,E.Z)(function*(C,g,m){var A;const K=yield m.verify();try{let oe;if(Pe("string"==typeof K,C,"argument-error"),Pe(m.type===Yr,C,"argument-error"),oe="string"==typeof g?{phoneNumber:g}:g,"session"in oe){const Je=oe.session;if("phoneNumber"in oe)return Pe("enroll"===Je.type,C,"internal-error"),(yield function Ri(C,g){return $t(C,"POST","/v2/accounts/mfaEnrollment:start",Zt(C,g))}(C,{idToken:Je.credential,phoneEnrollmentInfo:{phoneNumber:oe.phoneNumber,recaptchaToken:K}})).phoneSessionInfo.sessionInfo;{Pe("signin"===Je.type,C,"internal-error");const mt=(null===(A=oe.multiFactorHint)||void 0===A?void 0:A.uid)||oe.multiFactorUid;return Pe(mt,C,"missing-multi-factor-info"),(yield function rr(C,g){return $t(C,"POST","/v2/accounts/mfaSignIn:start",Zt(C,g))}(C,{mfaPendingCredential:Je.credential,mfaEnrollmentId:mt,phoneSignInInfo:{recaptchaToken:K}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Je}=yield function to(C,g){return Fs.apply(this,arguments)}(C,{phoneNumber:oe.phoneNumber,recaptchaToken:K});return Je}}finally{m._reset()}}),Qi.apply(this,arguments)}function S(){return(S=(0,E.Z)(function*(C,g){yield Hs((0,ee.m9)(C),g)})).apply(this,arguments)}let x=(()=>{class C{constructor(m){this.providerId=C.PROVIDER_ID,this.auth=Dr(m)}verifyPhoneNumber(m,A){return Mo(this.auth,m,(0,ee.m9)(A))}static credential(m,A){return hs._fromVerification(m,A)}static credentialFromResult(m){return C.credentialFromTaggedObject(m)}static credentialFromError(m){return C.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:A,temporaryProof:K}=m;return A&&K?hs._fromTokenResponse(A,K):null}}return C.PROVIDER_ID="phone",C.PHONE_SIGN_IN_METHOD="phone",C})();function w(C,g){return g?Qe(g):(Pe(C._popupRedirectResolver,C,"argument-error"),C._popupRedirectResolver)}class k extends Ke{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Hi(g,this._buildIdpRequest())}_linkToIdToken(g,m){return Hi(g,this._buildIdpRequest(m))}_getReauthenticationResolver(g){return Hi(g,this._buildIdpRequest())}_buildIdpRequest(g){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(m.idToken=g),m}}function z(C){return ga(C.auth,new k(C),C.bypassAuthState)}function ie(C){const{auth:g,user:m}=C;return Pe(m,g,"internal-error"),pa(m,new k(C),C.bypassAuthState)}function le(C){return nt.apply(this,arguments)}function nt(){return(nt=(0,E.Z)(function*(C){const{auth:g,user:m}=C;return Pe(m,g,"internal-error"),Hs(m,new k(C),C.bypassAuthState)})).apply(this,arguments)}class Pt{constructor(g,m,A,K,oe=!1){this.auth=g,this.resolver=A,this.user=K,this.bypassAuthState=oe,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var g=this;return new Promise(function(){var m=(0,E.Z)(function*(A,K){g.pendingPromise={resolve:A,reject:K};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(oe){g.reject(oe)}});return function(A,K){return m.apply(this,arguments)}}())}onAuthEvent(g){var m=this;return(0,E.Z)(function*(){const{urlResponse:A,sessionId:K,postBody:oe,tenantId:Je,error:mt,type:Kt}=g;if(mt)return void m.reject(mt);const kn={auth:m.auth,requestUri:A,sessionId:K,tenantId:Je||void 0,postBody:oe||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Kt)(kn))}catch(er){m.reject(er)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return z;case"linkViaPopup":case"linkViaRedirect":return le;case"reauthViaPopup":case"reauthViaRedirect":return ie;default:et(this.auth,"internal-error")}}resolve(g){$e(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){$e(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const pn=new ke(2e3,1e4);function On(){return(On=(0,E.Z)(function*(C,g,m){const A=Dr(C);Be(C,g,io);const K=w(A,m);return new Po(A,"signInViaPopup",g,K).executeNotNull()})).apply(this,arguments)}function Li(){return(Li=(0,E.Z)(function*(C,g,m){const A=(0,ee.m9)(C);Be(A.auth,g,io);const K=w(A.auth,m);return new Po(A.auth,"reauthViaPopup",g,K,A).executeNotNull()})).apply(this,arguments)}function Io(){return(Io=(0,E.Z)(function*(C,g,m){const A=(0,ee.m9)(C);Be(A.auth,g,io);const K=w(A.auth,m);return new Po(A.auth,"linkViaPopup",g,K,A).executeNotNull()})).apply(this,arguments)}let Po=(()=>{class C extends Pt{constructor(m,A,K,oe,Je){super(m,A,oe,Je),this.provider=K,this.authWindow=null,this.pollId=null,C.currentPopupAction&&C.currentPopupAction.cancel(),C.currentPopupAction=this}executeNotNull(){var m=this;return(0,E.Z)(function*(){const A=yield m.execute();return Pe(A,m.auth,"internal-error"),A})()}onExecution(){var m=this;return(0,E.Z)(function*(){$e(1===m.filter.length,"Popup operations only handle one event");const A=hn();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],A),m.authWindow.associatedEvent=A,m.resolver._originValidation(m.auth).catch(K=>{m.reject(K)}),m.resolver._isIframeWebStorageSupported(m.auth,K=>{K||m.reject(Ze(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Ze(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,C.currentPopupAction=null}pollUserCancellation(){const m=()=>{var A,K;this.pollId=null!==(K=null===(A=this.authWindow)||void 0===A?void 0:A.window)&&void 0!==K&&K.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ze(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(m,pn.get())};m()}}return C.currentPopupAction=null,C})();const Bs="pendingRedirect",Ar=new Map;class Al extends Pt{constructor(g,m,A=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,A),this.eventId=null}execute(){var g=()=>super.execute,m=this;return(0,E.Z)(function*(){let A=Ar.get(m.auth._key());if(!A){try{const oe=(yield function qs(C,g){return Qc.apply(this,arguments)}(m.resolver,m.auth))?yield g().call(m):null;A=()=>Promise.resolve(oe)}catch(K){A=()=>Promise.reject(K)}Ar.set(m.auth._key(),A)}return m.bypassAuthState||Ar.set(m.auth._key(),()=>Promise.resolve(null)),A()})()}onAuthEvent(g){var m=()=>super.onAuthEvent,A=this;return(0,E.Z)(function*(){if("signInViaRedirect"===g.type)return m().call(A,g);if("unknown"!==g.type){if(g.eventId){const K=yield A.auth._redirectUserForId(g.eventId);if(K)return A.user=K,m().call(A,g);A.resolve(null)}}else A.resolve(null)})()}onExecution(){return(0,E.Z)(function*(){})()}cleanUp(){}}function Qc(){return(Qc=(0,E.Z)(function*(C,g){const m=vu(g),A=Ia(C);if(!(yield A._isAvailable()))return!1;const K="true"===(yield A._get(m));return yield A._remove(m),K})).apply(this,arguments)}function Ya(C,g){return ll.apply(this,arguments)}function ll(){return(ll=(0,E.Z)(function*(C,g){return Ia(C)._set(vu(g),"true")})).apply(this,arguments)}function Yu(C,g){Ar.set(C._key(),g)}function Ia(C){return Qe(C._redirectPersistence)}function vu(C){return we(Bs,C.config.apiKey,C.name)}function _u(C,g,m){return function Nd(C,g,m){return Eu.apply(this,arguments)}(C,g,m)}function Eu(){return(Eu=(0,E.Z)(function*(C,g,m){const A=Dr(C);Be(C,g,io),yield A._initializationPromise;const K=w(A,m);return yield Ya(K,A),K._openRedirect(A,g,"signInViaRedirect")})).apply(this,arguments)}function Fd(C,g,m){return function Zu(C,g,m){return Yl.apply(this,arguments)}(C,g,m)}function Yl(){return(Yl=(0,E.Z)(function*(C,g,m){const A=(0,ee.m9)(C);Be(A.auth,g,io),yield A.auth._initializationPromise;const K=w(A.auth,m);yield Ya(K,A.auth);const oe=yield hc(A);return K._openRedirect(A.auth,g,"reauthViaRedirect",oe)})).apply(this,arguments)}function dc(C,g,m){return function Xu(C,g,m){return Ds.apply(this,arguments)}(C,g,m)}function Ds(){return(Ds=(0,E.Z)(function*(C,g,m){const A=(0,ee.m9)(C);Be(A.auth,g,io),yield A.auth._initializationPromise;const K=w(A.auth,m);yield cs(!1,A,g.providerId),yield Ya(K,A.auth);const oe=yield hc(A);return K._openRedirect(A.auth,g,"linkViaRedirect",oe)})).apply(this,arguments)}function Ma(){return(Ma=(0,E.Z)(function*(C,g){return yield Dr(C)._initializationPromise,Iu(C,g,!1)})).apply(this,arguments)}function Iu(C,g){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,E.Z)(function*(C,g,m=!1){const A=Dr(C),K=w(A,g),Je=yield new Al(A,K,m).execute();return Je&&!m&&(delete Je.user._redirectEventId,yield A._persistUserIfCurrent(Je.user),yield A._setRedirectUser(null,g)),Je})).apply(this,arguments)}function hc(C){return Is.apply(this,arguments)}function Is(){return(Is=(0,E.Z)(function*(C){const g=hn(`${C.uid}:::`);return C._redirectEventId=g,yield C.auth._setRedirectUser(C),yield C.auth._persistUserIfCurrent(C),g})).apply(this,arguments)}class Rc{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let m=!1;return this.consumers.forEach(A=>{this.isEventForConsumer(g,A)&&(m=!0,this.sendToConsumer(g,A),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function fc(C){switch(C.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gs(C);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=g,m=!0)),m}sendToConsumer(g,m){var A;if(g.error&&!gs(g)){const K=(null===(A=g.error.code)||void 0===A?void 0:A.split("auth/")[1])||"internal-error";m.onError(Ze(this.auth,K))}else m.onAuthEvent(g)}isEventForConsumer(g,m){const A=null===m.eventId||!!g.eventId&&g.eventId===m.eventId;return m.filter.includes(g.type)&&A}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Oo(g))}saveEventToCache(g){this.cachedEventUids.add(Oo(g)),this.lastProcessedEventTime=Date.now()}}function Oo(C){return[C.type,C.eventId,C.sessionId,C.tenantId].filter(g=>g).join("-")}function gs({type:C,error:g}){return"unknown"===C&&"auth/no-auth-event"===(null==g?void 0:g.code)}function Xr(C){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,E.Z)(function*(C,g={}){return $t(C,"GET","/v1/projects",g)})).apply(this,arguments)}const Qu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zl=/^https?/;function $s(){return($s=(0,E.Z)(function*(C){if(C.config.emulator)return;const{authorizedDomains:g}=yield Xr(C);for(const m of g)try{if(Mc(m))return}catch{}et(C,"unauthorized-domain")})).apply(this,arguments)}function Mc(C){const g=ht(),{protocol:m,hostname:A}=new URL(g);if(C.startsWith("chrome-extension://")){const Je=new URL(C);return""===Je.hostname&&""===A?"chrome-extension:"===m&&C.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===m&&Je.hostname===A}if(!Zl.test(m))return!1;if(Qu.test(C))return A===C;const K=C.replace(/\./g,"\\.");return new RegExp("^(.+\\."+K+"|"+K+")$","i").test(A)}const pc=new ke(3e4,6e4);function Xl(){const C=ci().___jsl;if(null!=C&&C.H)for(const g of Object.keys(C.H))if(C.H[g].r=C.H[g].r||[],C.H[g].L=C.H[g].L||[],C.H[g].r=[...C.H[g].L],C.CP)for(let m=0;m<C.CP.length;m++)C.CP[m]=null}let Ho=null;const wu=new ke(5e3,15e3),cl="__/auth/iframe",wo="emulator/auth/iframe",Jc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Za=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ah(C){const g=C.config;Pe(g.authDomain,C,"auth-domain-config-required");const m=g.emulator?Fe(g,wo):`https://${C.config.authDomain}/${cl}`,A={apiKey:g.apiKey,appName:C.name,v:fe.SDK_VERSION},K=Za.get(C.config.apiHost);K&&(A.eid=K);const oe=C._getFrameworks();return oe.length&&(A.fw=oe.join(",")),`${m}?${(0,ee.xO)(A).slice(1)}`}function $(){return $=(0,E.Z)(function*(C){const g=yield function co(C){return Ho=Ho||function Ps(C){return new Promise((g,m)=>{var A,K,oe;function Je(){Xl(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Xl(),m(Ze(C,"network-request-failed"))},timeout:pc.get()})}if(null!==(K=null===(A=ci().gapi)||void 0===A?void 0:A.iframes)&&void 0!==K&&K.Iframe)g(gapi.iframes.getContext());else{if(null===(oe=ci().gapi)||void 0===oe||!oe.load){const mt=ar("iframefcb");return ci()[mt]=()=>{gapi.load?Je():m(Ze(C,"network-request-failed"))},Wn(`https://apis.google.com/js/api.js?onload=${mt}`).catch(Kt=>m(Kt))}Je()}}).catch(g=>{throw Ho=null,g})}(C),Ho}(C),m=ci().gapi;return Pe(m,C,"internal-error"),g.open({where:document.body,url:Ah(C),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Jc,dontclear:!0},A=>new Promise(function(){var K=(0,E.Z)(function*(oe,Je){yield A.restyle({setHideOnLeave:!1});const mt=Ze(C,"network-request-failed"),Kt=ci().setTimeout(()=>{Je(mt)},wu.get());function kn(){ci().clearTimeout(Kt),oe(A)}A.ping(kn).then(kn,()=>{Je(mt)})});return function(oe,Je){return K.apply(this,arguments)}}()))}),$.apply(this,arguments)}const J={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ee=500,st=600,It="_blank",Gt="http://localhost";class In{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Nr="__/auth/handler",Fr="emulator/auth/handler",uo=encodeURIComponent("fac");function Ts(C,g,m,A,K,oe){return ul.apply(this,arguments)}function ul(){return(ul=(0,E.Z)(function*(C,g,m,A,K,oe){Pe(C.config.authDomain,C,"auth-domain-config-required"),Pe(C.config.apiKey,C,"invalid-api-key");const Je={apiKey:C.config.apiKey,appName:C.name,authType:m,redirectUrl:A,v:fe.SDK_VERSION,eventId:K};if(g instanceof io){g.setDefaultLanguage(C.languageCode),Je.providerId=g.providerId||"",(0,ee.xb)(g.getCustomParameters())||(Je.customParameters=JSON.stringify(g.getCustomParameters()));for(const[er,nr]of Object.entries(oe||{}))Je[er]=nr}if(g instanceof Ii){const er=g.getScopes().filter(nr=>""!==nr);er.length>0&&(Je.scopes=er.join(","))}C.tenantId&&(Je.tid=C.tenantId);const mt=Je;for(const er of Object.keys(mt))void 0===mt[er]&&delete mt[er];const Kt=yield C._getAppCheckToken(),kn=Kt?`#${uo}=${encodeURIComponent(Kt)}`:"";return`${function Zs({config:C}){return C.emulator?Fe(C,Fr):`https://${C.authDomain}/${Nr}`}(C)}?${(0,ee.xO)(mt).slice(1)}${kn}`})).apply(this,arguments)}const xl="webStorageSupport",ko=class _i{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zi,this._completeRedirectFn=Iu,this._overrideRedirectResult=Yu}_openPopup(g,m,A,K){var oe=this;return(0,E.Z)(function*(){var Je;$e(null===(Je=oe.eventManagers[g._key()])||void 0===Je?void 0:Je.manager,"_initialize() not called before _openPopup()");const mt=yield Ts(g,m,A,ht(),K);return function xn(C,g,m,A=Ee,K=st){const oe=Math.max((window.screen.availHeight-K)/2,0).toString(),Je=Math.max((window.screen.availWidth-A)/2,0).toString();let mt="";const Kt=Object.assign(Object.assign({},J),{width:A.toString(),height:K.toString(),top:oe,left:Je}),kn=(0,ee.z$)().toLowerCase();m&&(mt=gn(kn)?It:m),Ct(kn)&&(g=g||Gt,Kt.scrollbars="yes");const er=Object.entries(Kt).reduce((as,[Go,Kd])=>`${as}${Go}=${Kd},`,"");if(function bn(C=(0,ee.z$)()){var g;return Ot(C)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(kn)&&"_self"!==mt)return function Zn(C,g){const m=document.createElement("a");m.href=C,m.target=g;const A=document.createEvent("MouseEvent");A.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(A)}(g||"",mt),new In(null);const nr=window.open(g||"",mt,er);Pe(nr,C,"popup-blocked");try{nr.focus()}catch{}return new In(nr)}(g,mt,hn())})()}_openRedirect(g,m,A,K){var oe=this;return(0,E.Z)(function*(){return yield oe._originValidation(g),function sc(C){ci().location.href=C}(yield Ts(g,m,A,ht(),K)),new Promise(()=>{})})()}_initialize(g){const m=g._key();if(this.eventManagers[m]){const{manager:K,promise:oe}=this.eventManagers[m];return K?Promise.resolve(K):($e(oe,"If manager is not set, promise should be"),oe)}const A=this.initAndGetManager(g);return this.eventManagers[m]={promise:A},A.catch(()=>{delete this.eventManagers[m]}),A}initAndGetManager(g){var m=this;return(0,E.Z)(function*(){const A=yield function P(C){return $.apply(this,arguments)}(g),K=new Rc(g);return A.register("authEvent",oe=>(Pe(null==oe?void 0:oe.authEvent,g,"invalid-auth-event"),{status:K.onEvent(oe.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[g._key()]={manager:K},m.iframes[g._key()]=A,K})()}_isIframeWebStorageSupported(g,m){this.iframes[g._key()].send(xl,{type:xl},K=>{var oe;const Je=null===(oe=null==K?void 0:K[0])||void 0===oe?void 0:oe[xl];void 0!==Je&&m(!!Je),et(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const m=g._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Hr(C){return $s.apply(this,arguments)}(g)),this.originValidationPromises[m]}get _shouldInitProactively(){return cr()||ot()||Ot()}};class eu{constructor(g){this.factorId=g}_process(g,m,A){switch(m.type){case"enroll":return this._finalizeEnroll(g,m.credential,A);case"signin":return this._finalizeSignIn(g,m.credential);default:return Ie("unexpected MultiFactorSessionType")}}}class Cu extends eu{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Cu(g)}_finalizeEnroll(g,m,A){return function Gi(C,g){return $t(C,"POST","/v2/accounts/mfaEnrollment:finalize",Zt(C,g))}(g,{idToken:m,displayName:A,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,m){return function xa(C,g){return $t(C,"POST","/v2/accounts/mfaSignIn:finalize",Zt(C,g))}(g,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let zo=(()=>{class C{constructor(){}static assertion(m){return Cu._fromCredential(m)}}return C.FACTOR_ID="phone",C})();var Xa="@firebase/auth";class Qa{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var m=this;return(0,E.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const m=this.auth.onIdTokenChanged(A=>{g((null==A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,m),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const m=this.internalListeners.get(g);m&&(this.internalListeners.delete(g),m(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Pl(){return window}(0,ee.Pz)("authIdTokenMaxAge"),function Ld(C){(0,fe._registerComponent)(new ye.wA("auth",(g,{options:m})=>{const A=g.getProvider("app").getImmediate(),K=g.getProvider("heartbeat"),oe=g.getProvider("app-check-internal"),{apiKey:Je,authDomain:mt}=A.options;Pe(Je&&!Je.includes(":"),"invalid-api-key",{appName:A.name}),Pe(!(null!=mt&&mt.includes(":")),"argument-error",{appName:A.name});const Kt={apiKey:Je,authDomain:mt,clientPlatform:C,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ut(C)},kn=new li(A,K,oe,Kt);return function Oi(C,g){const m=(null==g?void 0:g.persistence)||[],A=(Array.isArray(m)?m:[m]).map(Qe);null!=g&&g.errorMap&&C._updateErrorMap(g.errorMap),C._initializeWithPersistence(A,null==g?void 0:g.popupRedirectResolver)}(kn,m),kn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,m,A)=>{g.getProvider("auth-internal").initialize()})),(0,fe._registerComponent)(new ye.wA("auth-internal",g=>{const m=Dr(g.getProvider("auth").getImmediate());return new Qa(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,fe.registerVersion)(Xa,"0.23.1",function Ml(C){switch(C){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(C)),(0,fe.registerVersion)(Xa,"0.23.1","esm2017")}("Browser");const Mh=2e3;function Ol(){return Ol=(0,E.Z)(function*(C,g,m){var A;const{BuildInfo:K}=Pl();$e(g.sessionId,"AuthEvent did not contain a session ID");const oe=yield function Tu(C){return Pa.apply(this,arguments)}(g.sessionId),Je={};return Ot()?Je.ibi=K.packageName:Ve()?Je.apn=K.packageName:et(C,"operation-not-supported-in-this-environment"),K.displayName&&(Je.appDisplayName=K.displayName),Je.sessionId=oe,Ts(C,m,g.type,void 0,null!==(A=g.eventId)&&void 0!==A?A:void 0,Je)}),Ol.apply(this,arguments)}function $d(){return($d=(0,E.Z)(function*(C){const{BuildInfo:g}=Pl(),m={};Ot()?m.iosBundleId=g.packageName:Ve()?m.androidPackageName=g.packageName:et(C,"operation-not-supported-in-this-environment"),yield Xr(C,m)})).apply(this,arguments)}function el(){return(el=(0,E.Z)(function*(C,g,m){const{cordova:A}=Pl();let K=()=>{};try{yield new Promise((oe,Je)=>{let mt=null;function Kt(){var nr;oe();const as=null===(nr=A.plugins.browsertab)||void 0===nr?void 0:nr.close;"function"==typeof as&&as(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function kn(){mt||(mt=window.setTimeout(()=>{Je(Ze(C,"redirect-cancelled-by-user"))},Mh))}function er(){"visible"===(null==document?void 0:document.visibilityState)&&kn()}g.addPassiveListener(Kt),document.addEventListener("resume",kn,!1),Ve()&&document.addEventListener("visibilitychange",er,!1),K=()=>{g.removePassiveListener(Kt),document.removeEventListener("resume",kn,!1),document.removeEventListener("visibilitychange",er,!1),mt&&window.clearTimeout(mt)}})}finally{K()}})).apply(this,arguments)}function Pa(){return(Pa=(0,E.Z)(function*(C){const g=function gc(C){if($e(/[0-9a-zA-Z]+/.test(C),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(C);const g=new ArrayBuffer(C.length),m=new Uint8Array(g);for(let A=0;A<C.length;A++)m[A]=C.charCodeAt(A);return m}(C),m=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(m)).map(K=>K.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Ud=20;class aa extends Rc{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(g)),super.onEvent(g)}initialized(){var g=this;return(0,E.Z)(function*(){yield g.initPromise})()}}function Vd(C){return mc.apply(this,arguments)}function mc(){return(mc=(0,E.Z)(function*(C){const g=yield kl()._get(No(C));return g&&(yield kl()._remove(No(C))),g})).apply(this,arguments)}function jd(){const C=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<Ud;m++){const A=Math.floor(Math.random()*g.length);C.push(g.charAt(A))}return C.join("")}function kl(){return Qe(Wi)}function No(C){return we("authEvent",C.config.apiKey,C.name)}function yc(C){if(null==C||!C.includes("?"))return{};const[g,...m]=C.split("?");return(0,ee.zd)(m.join("?"))}const nu=class Au{constructor(){this._redirectPersistence=Zi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Iu,this._overrideRedirectResult=Yu}_initialize(g){var m=this;return(0,E.Z)(function*(){const A=g._key();let K=m.eventManagers.get(A);return K||(K=new aa(g),m.eventManagers.set(A,K),m.attachCallbackListeners(g,K)),K})()}_openPopup(g){et(g,"operation-not-supported-in-this-environment")}_openRedirect(g,m,A,K){var oe=this;return(0,E.Z)(function*(){!function Oc(C){var g,m,A,K,oe,Je,mt,Kt,kn,er;const nr=Pl();Pe("function"==typeof(null===(g=null==nr?void 0:nr.universalLinks)||void 0===g?void 0:g.subscribe),C,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Pe(typeof(null===(m=null==nr?void 0:nr.BuildInfo)||void 0===m?void 0:m.packageName)<"u",C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Pe("function"==typeof(null===(oe=null===(K=null===(A=null==nr?void 0:nr.cordova)||void 0===A?void 0:A.plugins)||void 0===K?void 0:K.browsertab)||void 0===oe?void 0:oe.openUrl),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Pe("function"==typeof(null===(Kt=null===(mt=null===(Je=null==nr?void 0:nr.cordova)||void 0===Je?void 0:Je.plugins)||void 0===mt?void 0:mt.browsertab)||void 0===Kt?void 0:Kt.isAvailable),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Pe("function"==typeof(null===(er=null===(kn=null==nr?void 0:nr.cordova)||void 0===kn?void 0:kn.InAppBrowser)||void 0===er?void 0:er.open),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const Je=yield oe._initialize(g);yield Je.initialized(),Je.resetRedirect(),function oa(){Ar.clear()}(),yield oe._originValidation(g);const mt=function Ph(C,g,m=null){return{type:g,eventId:m,urlResponse:null,sessionId:jd(),postBody:null,tenantId:C.tenantId,error:Ze(C,"no-auth-event")}}(g,A,K);yield function Oa(C,g){return kl()._set(No(C),g)}(g,mt);const Kt=yield function Bd(C,g,m){return Ol.apply(this,arguments)}(g,mt,m),kn=yield function os(C){const{cordova:g}=Pl();return new Promise(m=>{g.plugins.browsertab.isAvailable(A=>{let K=null;A?g.plugins.browsertab.openUrl(C):K=g.InAppBrowser.open(C,function en(C=(0,ee.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(C)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(C)}()?"_blank":"_system","location=yes"),m(K)})})}(Kt);return function Ja(C,g,m){return el.apply(this,arguments)}(g,Je,kn)})()}_isIframeWebStorageSupported(g,m){throw new Error("Method not implemented.")}_originValidation(g){const m=g._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Ju(C){return $d.apply(this,arguments)}(g)),this.originValidationPromises[m]}attachCallbackListeners(g,m){const{universalLinks:A,handleOpenURL:K,BuildInfo:oe}=Pl(),Je=setTimeout((0,E.Z)(function*(){yield Vd(g),m.onEvent(ru())}),500),mt=function(){var er=(0,E.Z)(function*(nr){clearTimeout(Je);const as=yield Vd(g);let Go=null;as&&null!=nr&&nr.url&&(Go=function ed(C,g){var m,A;const K=function tu(C){const g=yc(C),m=g.link?decodeURIComponent(g.link):void 0,A=yc(m).link,K=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return yc(K).link||K||A||m||C}(g);if(K.includes("/__/auth/callback")){const oe=yc(K),Je=oe.firebaseError?function Su(C){try{return JSON.parse(C)}catch{return null}}(decodeURIComponent(oe.firebaseError)):null,mt=null===(A=null===(m=null==Je?void 0:Je.code)||void 0===m?void 0:m.split("auth/"))||void 0===A?void 0:A[1],Kt=mt?Ze(mt):null;return Kt?{type:C.type,eventId:C.eventId,tenantId:C.tenantId,error:Kt,urlResponse:null,sessionId:null,postBody:null}:{type:C.type,eventId:C.eventId,tenantId:C.tenantId,sessionId:C.sessionId,urlResponse:K,postBody:null}}return null}(as,nr.url)),m.onEvent(Go||ru())});return function(as){return er.apply(this,arguments)}}();typeof A<"u"&&"function"==typeof A.subscribe&&A.subscribe(null,mt);const Kt=K,kn=`${oe.packageName.toLowerCase()}://`;Pl().handleOpenURL=function(){var er=(0,E.Z)(function*(nr){if(nr.toLowerCase().startsWith(kn)&&mt({url:nr}),"function"==typeof Kt)try{Kt(nr)}catch(as){console.error(as)}});return function(nr){return er.apply(this,arguments)}}()}};function ru(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ze("no-auth-event")}}const Bp=1e3;function Xs(){var C;return(null===(C=null==self?void 0:self.location)||void 0===C?void 0:C.protocol)||null}function kc(C=(0,ee.z$)()){return!("file:"!==Xs()&&"ionic:"!==Xs()&&"capacitor:"!==Xs()||!C.toLowerCase().match(/iphone|ipad|ipod|android/))}function Oh(){try{const C=self.localStorage,g=hn();if(C)return C.setItem(g,"1"),C.removeItem(g),!function xu(C=(0,ee.z$)()){return function dl(){return(0,ee.w1)()&&11===(null==document?void 0:document.documentMode)}()||function _c(C=(0,ee.z$)()){return/Edge\/\d+/.test(C)}(C)}()||(0,ee.hl)()}catch{return kf()&&(0,ee.hl)()}return!1}function kf(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Qr(){return(function nd(){return"http:"===Xs()||"https:"===Xs()}()||(0,ee.ru)()||kc())&&!function Nc(){return(0,ee.b$)()||(0,ee.UG)()}()&&Oh()&&!kf()}function rd(){return kc()&&typeof document<"u"}function sd(){return(sd=(0,E.Z)(function*(){return!!rd()&&new Promise(C=>{const g=setTimeout(()=>{C(!1)},Bp);document.addEventListener("deviceready",()=>{clearTimeout(g),C(!0)})})})).apply(this,arguments)}const la={LOCAL:"local",NONE:"none",SESSION:"session"},Ec=Pe,Hd="persistence";function iu(C){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,E.Z)(function*(C){yield C._initializationPromise;const g=zd(),m=we(Hd,C.config.apiKey,C.name);g&&g.setItem(m,C._getPersistence())})).apply(this,arguments)}function zd(){var C;try{return(null===(C=function od(){return typeof window<"u"?window:null}())||void 0===C?void 0:C.sessionStorage)||null}catch{return null}}const wc=Pe;class Cc{constructor(){this.browserResolver=Qe(ko),this.cordovaResolver=Qe(nu),this.underlyingResolver=null,this._redirectPersistence=Zi,this._completeRedirectFn=Iu,this._overrideRedirectResult=Yu}_initialize(g){var m=this;return(0,E.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,m,A,K){var oe=this;return(0,E.Z)(function*(){return yield oe.selectUnderlyingResolver(),oe.assertedUnderlyingResolver._openPopup(g,m,A,K)})()}_openRedirect(g,m,A,K){var oe=this;return(0,E.Z)(function*(){return yield oe.selectUnderlyingResolver(),oe.assertedUnderlyingResolver._openRedirect(g,m,A,K)})()}_isIframeWebStorageSupported(g,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,m)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return rd()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return wc(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,E.Z)(function*(){if(g.underlyingResolver)return;const m=yield function id(){return sd.apply(this,arguments)}();g.underlyingResolver=m?g.cordovaResolver:g.browserResolver})()}}function ka(C){return C.unwrap()}function Nf(C){return $p(C)}function $p(C){const{_tokenResponse:g}=C instanceof ee.ZR?C.customData:C;if(!g)return null;if(!(C instanceof ee.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return x.credentialFromResult(C);const m=g.providerId;if(!m||m===je.PASSWORD)return null;let A;switch(m){case je.GOOGLE:A=js;break;case je.FACEBOOK:A=To;break;case je.GITHUB:A=Xo;break;case je.TWITTER:A=Da;break;default:const{oauthIdToken:K,oauthAccessToken:oe,oauthTokenSecret:Je,pendingToken:mt,nonce:Kt}=g;return oe||Je||K||mt?mt?m.startsWith("saml.")?Cs._create(m,mt):qi._fromParams({providerId:m,signInMethod:m,pendingToken:mt,idToken:K,accessToken:oe}):new ts(m).credential({idToken:K,accessToken:oe,rawNonce:Kt}):null}return C instanceof ee.ZR?A.credentialFromError(C):A.credentialFromResult(C)}function tl(C,g){return g.catch(m=>{throw m instanceof ee.ZR&&function Gd(C,g){var m;const A=null===(m=g.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===(null==g?void 0:g.code))g.resolver=new Mu(C,function Fi(C,g){var m;const A=(0,ee.m9)(C),K=g;return Pe(g.customData.operationType,A,"argument-error"),Pe(null===(m=K.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,A,"argument-error"),wr._fromError(A,K)}(C,g));else if(A){const K=$p(g),oe=g;K&&(oe.credential=K,oe.tenantId=A.tenantId||void 0,oe.email=A.email||void 0,oe.phoneNumber=A.phoneNumber||void 0)}}(C,m),m}).then(m=>{const K=m.user;return{operationType:m.operationType,credential:Nf(m),additionalUserInfo:Cl(m),user:Nl.getOrCreate(K)}})}function ms(C,g){return ld.apply(this,arguments)}function ld(){return(ld=(0,E.Z)(function*(C,g){const m=yield g;return{verificationId:m.verificationId,confirm:A=>tl(C,m.confirm(A))}})).apply(this,arguments)}class Mu{constructor(g,m){this.resolver=m,this.auth=function Ru(C){return C.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return tl(ka(this.auth),this.resolver.resolveSignIn(g))}}class Nl{constructor(g){this._delegate=g,this.multiFactor=function Ws(C){const g=(0,ee.m9)(C);return ia.has(g)||ia.set(g,Ls._fromUser(g)),ia.get(g)}(g)}static getOrCreate(g){return Nl.USER_MAP.has(g)||Nl.USER_MAP.set(g,new Nl(g)),Nl.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var m=this;return(0,E.Z)(function*(){return tl(m.auth,ma(m._delegate,g))})()}linkWithPhoneNumber(g,m){var A=this;return(0,E.Z)(function*(){return ms(A.auth,function wi(C,g,m){return Es.apply(this,arguments)}(A._delegate,g,m))})()}linkWithPopup(g){var m=this;return(0,E.Z)(function*(){return tl(m.auth,function Ks(C,g,m){return Io.apply(this,arguments)}(m._delegate,g,Cc))})()}linkWithRedirect(g){var m=this;return(0,E.Z)(function*(){return yield iu(Dr(m.auth)),dc(m._delegate,g,Cc)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var m=this;return(0,E.Z)(function*(){return tl(m.auth,q(m._delegate,g))})()}reauthenticateWithPhoneNumber(g,m){return ms(this.auth,function Xc(C,g,m){return Ea.apply(this,arguments)}(this._delegate,g,m))}reauthenticateWithPopup(g){return tl(this.auth,function Ci(C,g,m){return Li.apply(this,arguments)}(this._delegate,g,Cc))}reauthenticateWithRedirect(g){var m=this;return(0,E.Z)(function*(){return yield iu(Dr(m.auth)),Fd(m._delegate,g,Cc)})()}sendEmailVerification(g){return function Il(C,g){return na.apply(this,arguments)}(this._delegate,g)}unlink(g){var m=this;return(0,E.Z)(function*(){return yield function vl(C,g){return Rs.apply(this,arguments)}(m._delegate,g),m})()}updateEmail(g){return function Ga(C,g){return Ni((0,ee.m9)(C),g,null)}(this._delegate,g)}updatePassword(g){return function Yi(C,g){return Ni((0,ee.m9)(C),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function fr(C,g){return S.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function is(C,g){return Ta.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,m){return function ds(C,g,m){return Eo.apply(this,arguments)}(this._delegate,g,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Nl.USER_MAP=new WeakMap;const cd=Pe;let ou=(()=>{class C{constructor(m,A){if(this.app=m,A.isInitialized())return this._delegate=A.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:K}=m.options;cd(K,"invalid-api-key",{appName:m.name}),cd(K,"invalid-api-key",{appName:m.name});const oe=typeof window<"u"?Cc:void 0;this._delegate=A.initialize({options:{persistence:dd(K,m.name),popupRedirectResolver:oe}}),this._delegate._updateErrorMap(rt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Nl.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,A){!function re(C,g,m){const A=Dr(C);Pe(A._canInitEmulator,A,"emulator-config-failed"),Pe(/^https?:\/\//.test(g),A,"invalid-emulator-scheme");const K=!(null==m||!m.disableWarnings),oe=_e(g),{host:Je,port:mt}=function it(C){const g=_e(C),m=/(\/\/)?([^?#/]+)/.exec(C.substr(g.length));if(!m)return{host:"",port:null};const A=m[2].split("@").pop()||"",K=/^(\[[^\]]+\])(:|$)/.exec(A);if(K){const oe=K[1];return{host:oe,port:ae(A.substr(oe.length+1))}}{const[oe,Je]=A.split(":");return{host:oe,port:ae(Je)}}}(g);A.config.emulator={url:`${oe}//${Je}${null===mt?"":`:${mt}`}/`},A.settings.appVerificationDisabledForTesting=!0,A.emulatorConfig=Object.freeze({host:Je,port:mt,protocol:oe.replace(":",""),options:Object.freeze({disableWarnings:K})}),K||function qe(){function C(){const g=document.createElement("p"),m=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",C):C())}()}(this._delegate,m,A)}applyActionCode(m){return function zs(C,g){return Ai.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return _l(this._delegate,m)}confirmPasswordReset(m,A){return function Si(C,g,m){return fs.apply(this,arguments)}(this._delegate,m,A)}createUserWithEmailAndPassword(m,A){var K=this;return(0,E.Z)(function*(){return tl(K._delegate,function sl(C,g,m){return So.apply(this,arguments)}(K._delegate,m,A))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function _o(C,g){return Uo.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function ja(C,g){const m=ls.parseLink(g);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,E.Z)(function*(){cd(Qr(),m._delegate,"operation-not-supported-in-this-environment");const A=yield function Sh(C,g){return Ma.apply(this,arguments)}(m._delegate,Cc);return A?tl(m._delegate,Promise.resolve(A)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function Pf(C,g){Dr(C)._logFramework(g)}(this._delegate,m)}onAuthStateChanged(m,A,K){const{next:oe,error:Je,complete:mt}=ud(m,A,K);return this._delegate.onAuthStateChanged(oe,Je,mt)}onIdTokenChanged(m,A,K){const{next:oe,error:Je,complete:mt}=ud(m,A,K);return this._delegate.onIdTokenChanged(oe,Je,mt)}sendSignInLinkToEmail(m,A){return function El(C,g,m){return va.apply(this,arguments)}(this._delegate,m,A)}sendPasswordResetEmail(m,A){return function jr(C,g,m){return yi.apply(this,arguments)}(this._delegate,m,A||void 0)}setPersistence(m){var A=this;return(0,E.Z)(function*(){let K;switch(function ad(C,g){Ec(Object.values(la).includes(g),C,"invalid-persistence-type"),(0,ee.b$)()?Ec(g!==la.SESSION,C,"unsupported-persistence-type"):(0,ee.UG)()?Ec(g===la.NONE,C,"unsupported-persistence-type"):kf()?Ec(g===la.NONE||g===la.LOCAL&&(0,ee.hl)(),C,"unsupported-persistence-type"):Ec(g===la.NONE||Oh(),C,"unsupported-persistence-type")}(A._delegate,m),m){case la.SESSION:K=Zi;break;case la.LOCAL:K=(yield Qe(oi)._isAvailable())?oi:Wi;break;case la.NONE:K=zt;break;default:return et("argument-error",{appName:A._delegate.name})}return A._delegate.setPersistence(K)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return tl(this._delegate,function Bo(C){return Ti.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return tl(this._delegate,pr(this._delegate,m))}signInWithCustomToken(m){return tl(this._delegate,function B(C,g){return R.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,A){return tl(this._delegate,function vo(C,g,m){return pr((0,ee.m9)(C),Lo.credential(g,m))}(this._delegate,m,A))}signInWithEmailLink(m,A){return tl(this._delegate,function ps(C,g,m){return Ms.apply(this,arguments)}(this._delegate,m,A))}signInWithPhoneNumber(m,A){return ms(this._delegate,function Or(C,g,m){return Rt.apply(this,arguments)}(this._delegate,m,A))}signInWithPopup(m){var A=this;return(0,E.Z)(function*(){return cd(Qr(),A._delegate,"operation-not-supported-in-this-environment"),tl(A._delegate,function $n(C,g,m){return On.apply(this,arguments)}(A._delegate,m,Cc))})()}signInWithRedirect(m){var A=this;return(0,E.Z)(function*(){return cd(Qr(),A._delegate,"operation-not-supported-in-this-environment"),yield iu(A._delegate),_u(A._delegate,m,Cc)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function us(C,g){return rs.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return C.Persistence=la,C})();function ud(C,g,m){let A=C;"function"!=typeof C&&({next:A,error:g,complete:m}=C);const K=A;return{next:Je=>K(Je&&Nl.getOrCreate(Je)),error:g,complete:m}}function dd(C,g){const m=function su(C,g){const m=zd();if(!m)return[];const A=we(Hd,C,g);switch(m.getItem(A)){case la.NONE:return[zt];case la.LOCAL:return[oi,Zi];case la.SESSION:return[Zi];default:return[]}}(C,g);if(typeof self<"u"&&!m.includes(oi)&&m.push(oi),typeof window<"u")for(const A of[Wi,Zi])m.includes(A)||m.push(A);return m.includes(zt)||m.push(zt),m}class ca{constructor(){this.providerId="phone",this._delegate=new x(ka(y.Z.auth()))}static credential(g,m){return x.credential(g,m)}verifyPhoneNumber(g,m){return this._delegate.verifyPhoneNumber(g,m)}unwrap(){return this._delegate}}ca.PHONE_SIGN_IN_METHOD=x.PHONE_SIGN_IN_METHOD,ca.PROVIDER_ID=x.PROVIDER_ID;const nl=Pe;class kh{constructor(g,m,A=y.Z.app()){var K;nl(null===(K=A.options)||void 0===K?void 0:K.apiKey,"invalid-api-key",{appName:A.name}),this._delegate=new Ra(g,m,A.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Wd(C){C.INTERNAL.registerComponent(new ye.wA("auth-compat",g=>{const m=g.getProvider("app-compat").getImmediate(),A=g.getProvider("auth");return new ou(m,A)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ve_EMAIL_SIGNIN,PASSWORD_RESET:ve_PASSWORD_RESET,RECOVER_EMAIL:ve_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ve_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ve_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ve_VERIFY_EMAIL}},EmailAuthProvider:Lo,FacebookAuthProvider:To,GithubAuthProvider:Xo,GoogleAuthProvider:js,OAuthProvider:ts,SAMLAuthProvider:go,PhoneAuthProvider:ca,PhoneMultiFactorGenerator:zo,RecaptchaVerifier:kh,TwitterAuthProvider:Da,Auth:ou,AuthCredential:Ke,Error:ee.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),C.registerVersion("@firebase/auth-compat","0.4.1")}(y.Z)},5861:(yn,gt,H)=>{"use strict";function E(ee,fe,Le,xe,ye,Ue,je){try{var Ce=ee[Ue](je),ge=Ce.value}catch(ve){return void Le(ve)}Ce.done?fe(ge):Promise.resolve(ge).then(xe,ye)}function y(ee){return function(){var fe=this,Le=arguments;return new Promise(function(xe,ye){var Ue=ee.apply(fe,Le);function je(ge){E(Ue,xe,ye,je,Ce,"next",ge)}function Ce(ge){E(Ue,xe,ye,je,Ce,"throw",ge)}je(void 0)})}}H.d(gt,{Z:()=>y})}},yn=>{yn(yn.s=2295)}]);