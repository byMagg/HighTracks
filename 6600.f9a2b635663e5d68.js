"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6600],{6600:(b,m,e)=>{e.r(m),e.d(m,{routes:()=>f});var d=e(6895),c=e(433),l=e(2607),o=e(4709),t=e(4650),k=e(5013),T=e(7556);function P(r,g){if(1&r){const n=t.EpF();t.TgZ(0,"ion-buttons",10)(1,"ion-button",4),t.NdJ("click",function(){t.CHM(n);const u=t.oxw();return t.KtG(u.toggleInsertTrack())}),t._uU(2),t.qZA()()}if(2&r){const n=t.oxw();t.xp6(2),t.hij(" ",n.toggleInsert?"Mostrar listado":"A\xf1adir canciones"," ")}}function h(r,g){if(1&r){const n=t.EpF();t.TgZ(0,"ion-button",18),t.NdJ("click",function(){t.CHM(n);const u=t.oxw().$implicit,_=t.oxw();return t.KtG(_.insertTrack(u))}),t._UZ(1,"ion-icon",19),t.qZA()}}function v(r,g){if(1&r&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&r){const n=g.$implicit;t.xp6(1),t.Oqu(n.name)}}const i=function(r){return[r]};function s(r,g){if(1&r&&(t.TgZ(0,"ion-card",11),t.YNc(1,h,2,0,"ion-button",12),t.TgZ(2,"div",13)(3,"div",14),t._UZ(4,"ion-img",15),t.qZA(),t.TgZ(5,"div",16)(6,"div")(7,"p"),t._uU(8),t.qZA()(),t.TgZ(9,"div"),t.YNc(10,v,2,1,"p",17),t.qZA(),t.TgZ(11,"div")(12,"p"),t._uU(13),t.ALo(14,"date"),t.qZA()()()()()),2&r){const n=g.$implicit,a=t.oxw();t.xp6(1),t.Q6J("ngIf",a.toggleInsert),t.xp6(1),t.Q6J("routerLink",t.VKq(9,i,n._id)),t.xp6(2),t.s9C("src",n.album.images[0].url),t.xp6(4),t.Oqu(n.name),t.xp6(2),t.Q6J("ngForOf",n.album.artists),t.xp6(3),t.hij("",t.xi3(14,6,n.duration_ms,"mm:ss")," min")}}const f=[{path:"",component:(()=>{class r{constructor(n,a,u){this.apiService=n,this.route=a,this.authService=u,this.query="",this.toggleInsert=!1,this.route.queryParams.subscribe(_=>{this.query=_.s,this.search()})}toggleInsertTrack(){this.toggleInsert=!this.toggleInsert,this.toggleInsert?this.searchSpotify():this.search()}searchSpotify(){this.apiService.searchTracksSpotify(this.query).subscribe(n=>{this.tracks=n,console.log(this.tracks[0])})}search(){this.apiService.searchTracks(this.query).subscribe(n=>{this.tracks=n,console.log(this.tracks[0])})}insertTrack(n){this.apiService.insertTrack(n)}ngOnInit(){}}return r.\u0275fac=function(n){return new(n||r)(t.Y36(k.j),t.Y36(l.gz),t.Y36(T.e))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-tracks"]],standalone:!0,features:[t.jDz],decls:16,vars:4,consts:[["slot","start"],["defaultHref","/"],["id","searchBar"],["mode","ios","placeholder","Introduce el nombre de la canci\xf3n",3,"ngModel","keyup.enter","ngModelChange"],[3,"click"],["slot","end","name","search"],["slot","end",4,"ngIf"],["id","container"],[3,"fixed"],["button","",4,"ngFor","ngForOf"],["slot","end"],["button",""],["shape","circle",3,"click",4,"ngIf"],[3,"routerLink"],["id","img-container"],[3,"src"],["id","card-info"],[4,"ngFor","ngForOf"],["shape","circle",3,"click"],["icon","add"]],template:function(n,a){1&n&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t._UZ(3,"ion-back-button",1),t.qZA(),t.TgZ(4,"ion-title")(5,"div",2)(6,"ion-searchbar",3),t.NdJ("keyup.enter",function(){return a.toggleInsert?a.searchSpotify():a.search()})("ngModelChange",function(_){return a.query=_}),t.qZA(),t.TgZ(7,"ion-button",4),t.NdJ("click",function(){return a.toggleInsert?a.searchSpotify():a.search()}),t._UZ(8,"ion-icon",5),t._uU(9," Buscar "),t.qZA()()(),t.YNc(10,P,3,1,"ion-buttons",6),t.qZA()(),t.TgZ(11,"ion-content")(12,"div",7)(13,"ion-grid",8)(14,"ion-row"),t.YNc(15,s,15,11,"ion-card",9),t.qZA()()()()),2&n&&(t.xp6(6),t.Q6J("ngModel",a.query),t.xp6(4),t.Q6J("ngIf",a.authService.checkLogged()),t.xp6(3),t.Q6J("fixed",!0),t.xp6(2),t.Q6J("ngForOf",a.tracks))},dependencies:[d.ez,d.sg,d.O5,d.uU,c.u5,c.JJ,c.On,o.Pc,o.oU,o.YG,o.Sm,o.PM,o.W2,o.jY,o.Gu,o.gu,o.Xz,o.Nd,o.VI,o.wd,o.sr,o.j9,o.cs,o.YI,l.Bz,l.rH],styles:['ion-card[_ngcontent-%COMP%]{width:200px;position:relative;height:300px;background-color:#000;transition:.5s}ion-card[_ngcontent-%COMP%]:hover{transform:scale(1.1)}ion-img[_ngcontent-%COMP%]{height:100%}ion-card[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{position:absolute;z-index:1;top:0;right:0}ion-button[shape=circle][_ngcontent-%COMP%]{--border-radius: 50%;width:35px;height:35px;--padding-start: 0;--padding-end: 0}#img-container[_ngcontent-%COMP%]{position:relative}#img-container[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;top:0;width:100%;height:100%;background:linear-gradient(to bottom,rgba(255,255,255,0) 0,black 100%)}#card-info[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%}#card-info[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:#000;color:#fff;text-align:center;border-radius:5px;margin:0 auto;width:max-content;padding:0 10px;max-width:80%;box-shadow:0 0 130px 30px #517cb3}ion-button[_ngcontent-%COMP%]{--background: #553c9a}#searchBar[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:500px;margin:0 auto}#searchBar[_ngcontent-%COMP%]   ion-searchbar[_ngcontent-%COMP%]{padding:0 20px}']}),r})()},{path:":id",loadComponent:()=>e.e(6845).then(e.bind(e,6845)).then(r=>r.TrackPage)}]},5013:(b,m,e)=>{e.d(m,{j:()=>P});var d=e(9646),c=e(4004),l=e(262),o=e(2340),t=e(4650),k=e(529),T=e(7556);let P=(()=>{class h{constructor(i,s){this.http=i,this.authService=s,this.url=o.N.url,this.token=this.authService.getJWT()}searchTracksSpotify(i){return this.http.get(`${this.url}search/${encodeURI(i)}`).pipe((0,c.U)(s=>s.tracks.items.map(f=>({_id:f.id,...f,id:void 0}))))}searchTracks(i){return this.http.get(`${this.url}tracks/search/${encodeURI(i)}`,{headers:{Authorization:`Bearer ${this.token}`}}).pipe((0,c.U)(s=>s))}getTrack(i){return this.http.get(`${this.url}tracks/${i}`,{headers:{Authorization:`Bearer ${this.token}`}}).pipe((0,c.U)(s=>s))}insertTrack(i){this.http.post(`${this.url}tracks/`,i,{headers:{Authorization:`Bearer ${this.token}`}}).pipe((0,l.K)(s=>(0,d.of)(s.error))).subscribe(s=>{console.log(s)})}insertComment(i,s){this.http.post(`${this.url}tracks/${i}/comments`,s,{headers:{Authorization:`Bearer ${this.token}`}}).pipe((0,l.K)(p=>(0,d.of)(p.error))).subscribe(p=>{console.log(p)})}getComments(i){return this.http.get(`${this.url}tracks/${i}/comments`,{headers:{Authorization:`Bearer ${this.token}`}}).pipe((0,c.U)(s=>s))}}return h.\u0275fac=function(i){return new(i||h)(t.LFG(k.eN),t.LFG(T.e))},h.\u0275prov=t.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()}}]);