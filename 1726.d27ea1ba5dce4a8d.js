"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1726],{1726:(b,u,s)=>{s.r(u),s.d(u,{routes:()=>P});var a=s(433),c=s(6895),l=s(4709),i=s(4650),m=s(1762),d=s(1205);let _=(()=>{class o{constructor(t,e){this.afs=t,this.afAuth=e,this.logged=!1,this.afAuth.authState.subscribe(n=>{n&&(this.userData=n,localStorage.setItem("user",JSON.stringify(this.userData)))})}checkLogged(){return null!==localStorage.getItem("user")||(this.userData=null,!1)}doSignup(t){return new Promise((e,n)=>{this.afAuth.createUserWithEmailAndPassword(t.email,t.password).then(g=>{e(g)},g=>n(g))})}doLogin(t){return new Promise((e,n)=>{this.afAuth.signInWithEmailAndPassword(t.email,t.password).then(g=>{e(g)},g=>n(g))})}doLogout(){return new Promise((t,e)=>{this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),t()}).catch(n=>{console.log(n),e()})})}}return o.\u0275fac=function(t){return new(t||o)(i.LFG(m.ST),i.LFG(d.zQ))},o.\u0275prov=i.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var p=s(1194);function f(o,r){if(1&o){const t=i.EpF();i.TgZ(0,"ion-buttons",2)(1,"ion-button",3),i.NdJ("click",function(){i.CHM(t);const n=i.oxw();return i.KtG(n.logout())}),i._uU(2,"logout"),i.qZA()()}}function h(o,r){if(1&o&&(i.TgZ(0,"div",12),i._uU(1),i.qZA()),2&o){const t=i.oxw().$implicit;i.xp6(1),i.hij(" ",t.message," ")}}function x(o,r){if(1&o&&(i.ynx(0),i.YNc(1,h,2,1,"div",13),i.BQk()),2&o){const t=r.$implicit,e=i.oxw(3);let n;i.xp6(1),i.Q6J("ngIf",(null==e.formValidationLogin||null==(n=e.formValidationLogin.get("email"))?null:n.hasError(t.type))&&((null==(n=e.formValidationLogin.get("email"))?null:n.dirty)||(null==(n=e.formValidationLogin.get("email"))?null:n.touched)))}}function Z(o,r){if(1&o&&(i.TgZ(0,"div",12),i._uU(1),i.qZA()),2&o){const t=i.oxw().$implicit;i.xp6(1),i.hij(" ",t.message," ")}}function v(o,r){if(1&o&&(i.ynx(0),i.YNc(1,Z,2,1,"div",13),i.BQk()),2&o){const t=r.$implicit,e=i.oxw(3);let n;i.xp6(1),i.Q6J("ngIf",(null==(n=e.formValidationLogin.get("password"))?null:n.hasError(t.type))&&((null==(n=e.formValidationLogin.get("password"))?null:n.dirty)||(null==(n=e.formValidationLogin.get("password"))?null:n.touched)))}}function L(o,r){if(1&o){const t=i.EpF();i.TgZ(0,"article")(1,"form",4),i.NdJ("ngSubmit",function(){i.CHM(t);const n=i.oxw(2);return i.KtG(n.tryLogin(n.formValidationLogin.value))}),i.TgZ(2,"h2"),i._uU(3,"Inicio de sesi\xf3n"),i.qZA(),i.TgZ(4,"ion-item")(5,"ion-label",5),i._uU(6,"Email: "),i.qZA(),i._UZ(7,"ion-input",6),i.qZA(),i.TgZ(8,"div"),i.YNc(9,x,2,1,"ng-container",7),i.qZA(),i.TgZ(10,"ion-item")(11,"ion-label",5),i._uU(12,"Contrase\xf1a: "),i.qZA(),i._UZ(13,"ion-input",8),i.qZA(),i.TgZ(14,"div"),i.YNc(15,v,2,1,"ng-container",7),i.qZA(),i.TgZ(16,"div",9)(17,"ion-button",10),i._uU(18,"Iniciar sesi\xf3n"),i.qZA()(),i.TgZ(19,"div",11)(20,"ion-label",12),i._uU(21),i.qZA()()()()}if(2&o){const t=i.oxw(2);i.xp6(1),i.Q6J("formGroup",t.formValidationLogin),i.xp6(8),i.Q6J("ngForOf",t.formValidationMessages.email),i.xp6(6),i.Q6J("ngForOf",t.formValidationMessages.password),i.xp6(2),i.Q6J("disabled",!t.formValidationLogin.valid),i.xp6(4),i.Oqu(t.errorMessage)}}function A(o,r){if(1&o&&(i.TgZ(0,"div",12),i._uU(1),i.qZA()),2&o){const t=i.oxw().$implicit;i.xp6(1),i.hij(" ",t.message," ")}}function T(o,r){if(1&o&&(i.ynx(0),i.YNc(1,A,2,1,"div",13),i.BQk()),2&o){const t=r.$implicit,e=i.oxw(3);let n;i.xp6(1),i.Q6J("ngIf",(null==e.formValidationSignup||null==(n=e.formValidationSignup.get("email"))?null:n.hasError(t.type))&&((null==(n=e.formValidationSignup.get("email"))?null:n.dirty)||(null==(n=e.formValidationSignup.get("email"))?null:n.touched)))}}function w(o,r){if(1&o&&(i.TgZ(0,"div",12),i._uU(1),i.qZA()),2&o){const t=i.oxw().$implicit;i.xp6(1),i.hij(" ",t.message," ")}}function I(o,r){if(1&o&&(i.ynx(0),i.YNc(1,w,2,1,"div",13),i.BQk()),2&o){const t=r.$implicit,e=i.oxw(3);let n;i.xp6(1),i.Q6J("ngIf",(null==(n=e.formValidationSignup.get("password"))?null:n.hasError(t.type))&&((null==(n=e.formValidationSignup.get("password"))?null:n.dirty)||(null==(n=e.formValidationSignup.get("password"))?null:n.touched)))}}function S(o,r){if(1&o){const t=i.EpF();i.TgZ(0,"article")(1,"form",4),i.NdJ("ngSubmit",function(){i.CHM(t);const n=i.oxw(2);return i.KtG(n.trySignup(n.formValidationSignup.value))}),i.TgZ(2,"h2"),i._uU(3,"Registro"),i.qZA(),i.TgZ(4,"ion-item")(5,"ion-label",5),i._uU(6,"Email: "),i.qZA(),i._UZ(7,"ion-input",6),i.qZA(),i.TgZ(8,"div"),i.YNc(9,T,2,1,"ng-container",7),i.qZA(),i.TgZ(10,"ion-item")(11,"ion-label",5),i._uU(12,"Contrase\xf1a: "),i.qZA(),i._UZ(13,"ion-input",8),i.qZA(),i.TgZ(14,"div"),i.YNc(15,I,2,1,"ng-container",7),i.qZA(),i.TgZ(16,"div",9)(17,"ion-button",10),i._uU(18,"Crear Cuenta"),i.qZA()(),i.TgZ(19,"div",11)(20,"ion-label",12),i._uU(21),i.qZA()()()()}if(2&o){const t=i.oxw(2);i.xp6(1),i.Q6J("formGroup",t.formValidationSignup),i.xp6(8),i.Q6J("ngForOf",t.formValidationMessages.email),i.xp6(6),i.Q6J("ngForOf",t.formValidationMessages.password),i.xp6(2),i.Q6J("disabled",!t.formValidationSignup.valid),i.xp6(4),i.Oqu(t.errorMessage)}}function y(o,r){if(1&o&&(i.TgZ(0,"section"),i.YNc(1,L,22,5,"article",1),i.YNc(2,S,22,5,"article",1),i.qZA()),2&o){const t=i.oxw();i.xp6(1),i.Q6J("ngIf",t.formValidationLogin),i.xp6(1),i.Q6J("ngIf",t.formValidationSignup)}}const P=[{path:"",component:(()=>{class o{constructor(t,e,n){this.authService=t,this.formBuilder=e,this.router=n,this.errorMessage="",this.logged=!1,this.formValidationMessages={email:[{type:"required",message:"El email es un campo obligatorio."},{type:"pattern",message:"El formato del email no es correcto."}],password:[{type:"required",message:"La contrase\xf1a es un campo obligatorio."},{type:"minlength",message:"La l\xf3ngitud m\xednima de una contrase\xf1a es 6 caracteres."}]}}ngOnInit(){this.formValidationLogin=this.formBuilder.group({email:new a.NI("",a.kI.compose([a.kI.required,a.kI.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")])),password:new a.NI("",a.kI.compose([a.kI.minLength(6),a.kI.required]))}),this.formValidationSignup=this.formBuilder.group({email:new a.NI("",a.kI.compose([a.kI.required,a.kI.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")])),password:new a.NI("",a.kI.compose([a.kI.minLength(6),a.kI.required]))}),this.logged=this.authService.checkLogged()}trySignup(t){this.authService.doSignup(t).then(e=>{console.log(e),this.errorMessage="",this.router.navigate(["/home"])},e=>{console.log(e),this.errorMessage=e.message})}tryLogin(t){this.authService.doLogin(t).then(e=>{this.router.navigate(["/home"]),console.log(e)},e=>{this.errorMessage="Error al autenticar","auth/wrong-password"==e.code&&(this.errorMessage="Contrase\xf1a incorrecta"),"auth/user-not-found"==e.code&&(this.errorMessage="Usuario no encontrado")})}logout(){this.authService.doLogout().then(t=>{this.router.navigate(["/home"]),console.log("User logout")},t=>{console.log(t)})}}return o.\u0275fac=function(t){return new(t||o)(i.Y36(_),i.Y36(a.qu),i.Y36(p.F0))},o.\u0275cmp=i.Xpm({type:o,selectors:[["app-login"]],standalone:!0,features:[i.jDz],decls:7,vars:2,consts:[["slot","end",4,"ngIf"],[4,"ngIf"],["slot","end"],[3,"click"],[1,"form",3,"formGroup","ngSubmit"],["position","floating","color","primary"],["type","text","aria-label","Email: ","formControlName","email"],[4,"ngFor","ngForOf"],["type","password","aria-label","Contrase\xf1a: ","formControlName","password"],[1,"div-button-login"],["type","submit",3,"disabled"],[1,"div-label-error"],[1,"error-message"],["class","error-message",4,"ngIf"]],template:function(t,e){1&t&&(i.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),i._uU(3,"Login"),i.qZA(),i.YNc(4,f,3,0,"ion-buttons",0),i.qZA()(),i.TgZ(5,"ion-content"),i.YNc(6,y,3,2,"section",1),i.qZA()),2&t&&(i.xp6(4),i.Q6J("ngIf",e.logged),i.xp6(2),i.Q6J("ngIf",!e.logged))},dependencies:[c.ez,c.sg,c.O5,a.u5,a._Y,a.JJ,a.JL,l.Pc,l.YG,l.Sm,l.W2,l.Gu,l.pK,l.Ie,l.Q$,l.wd,l.sr,l.j9,a.UX,a.sg,a.u],styles:[".form[_ngcontent-%COMP%]{margin-top:50px}.label-title[_ngcontent-%COMP%]{font-weight:500;margin-bottom:20px}.div-button-login[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.div-label-error[_ngcontent-%COMP%]{text-align:center;margin-top:10px}.error-message[_ngcontent-%COMP%]{color:var(--ion-color-danger);font-size:smaller;padding:10px}section[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;align-items:center;height:100%}article[_ngcontent-%COMP%]{min-width:300px;height:300px}"]}),o})()}]}}]);