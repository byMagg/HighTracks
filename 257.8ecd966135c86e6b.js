"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[257],{257:(N,_,c)=>{c.r(_),c.d(_,{routes:()=>A});var g=c(6895),r=c(433),m=c(1194),l=c(650),u=c(5861),p=c(259),n=c(4650),d=c(7556);function f(o,a){if(1&o&&(n.TgZ(0,"h2"),n._uU(1),n.qZA()),2&o){const t=n.oxw(2);n.xp6(1),n.hij("Bienvenido ",t.userData,"")}}function h(o,a){if(1&o){const t=n.EpF();n.TgZ(0,"section")(1,"article"),n.YNc(2,f,2,1,"h2",0),n.TgZ(3,"ion-button",1),n.NdJ("click",function(){n.CHM(t);const e=n.oxw();return n.KtG(e.logout())}),n._uU(4," Cerrar sesi\xf3n "),n._UZ(5,"ion-icon",2),n.qZA()()()}if(2&o){const t=n.oxw();n.xp6(2),n.Q6J("ngIf",t.userData)}}function x(o,a){1&o&&(n.TgZ(0,"h2"),n._uU(1,"Inicio de sesi\xf3n"),n.qZA())}function v(o,a){1&o&&(n.TgZ(0,"h2"),n._uU(1,"Registro"),n.qZA())}function C(o,a){if(1&o&&(n.TgZ(0,"div",12),n._uU(1),n.qZA()),2&o){const t=n.oxw().$implicit;n.xp6(1),n.hij(" ",t.message," ")}}function Z(o,a){if(1&o&&(n.ynx(0),n.YNc(1,C,2,1,"div",13),n.BQk()),2&o){const t=a.$implicit,i=n.oxw(3);let e;n.xp6(1),n.Q6J("ngIf",(null==i.formValidationLogin||null==(e=i.formValidationLogin.get("email"))?null:e.hasError(t.type))&&((null==(e=i.formValidationLogin.get("email"))?null:e.dirty)||(null==(e=i.formValidationLogin.get("email"))?null:e.touched)))}}function L(o,a){if(1&o&&(n.TgZ(0,"div",12),n._uU(1),n.qZA()),2&o){const t=n.oxw().$implicit;n.xp6(1),n.hij(" ",t.message," ")}}function T(o,a){if(1&o&&(n.ynx(0),n.YNc(1,L,2,1,"div",13),n.BQk()),2&o){const t=a.$implicit,i=n.oxw(3);let e;n.xp6(1),n.Q6J("ngIf",(null==(e=i.formValidationLogin.get("password"))?null:e.hasError(t.type))&&((null==(e=i.formValidationLogin.get("password"))?null:e.dirty)||(null==(e=i.formValidationLogin.get("password"))?null:e.touched)))}}function y(o,a){if(1&o&&(n.TgZ(0,"ion-button",14),n._uU(1,"Iniciar sesi\xf3n"),n.qZA()),2&o){const t=n.oxw(3);n.Q6J("disabled",!t.formValidationLogin.valid)}}function w(o,a){if(1&o&&(n.TgZ(0,"ion-button",14),n._uU(1,"Crear cuenta"),n.qZA()),2&o){const t=n.oxw(3);n.Q6J("disabled",!t.formValidationLogin.valid)}}function b(o,a){if(1&o){const t=n.EpF();n.TgZ(0,"div"),n._uU(1," \xbfNo tienes cuenta? "),n.TgZ(2,"a",15),n.NdJ("click",function(){n.CHM(t);const e=n.oxw(3);return n.KtG(e.toggleLogin())}),n._uU(3,"Crear Cuenta"),n.qZA()()}}function M(o,a){if(1&o){const t=n.EpF();n.TgZ(0,"div"),n._uU(1," \xbfYa tienes cuenta? "),n.TgZ(2,"a",15),n.NdJ("click",function(){n.CHM(t);const e=n.oxw(3);return n.KtG(e.toggleLogin())}),n._uU(3,"Inicia sesi\xf3n"),n.qZA()()}}function J(o,a){if(1&o){const t=n.EpF();n.TgZ(0,"article")(1,"form",3),n.NdJ("ngSubmit",function(){n.CHM(t);const e=n.oxw(2);return n.KtG(e.showLogin?e.tryLogin(e.formValidationLogin.value):e.trySignup(e.formValidationLogin.value))}),n.YNc(2,x,2,0,"h2",0),n.YNc(3,v,2,0,"h2",0),n.TgZ(4,"div",4)(5,"ion-item")(6,"ion-label",5),n._uU(7,"Email: "),n.qZA(),n.TgZ(8,"ion-input",6),n.NdJ("keyup.enter",function(){n.CHM(t);const e=n.oxw(2);return n.KtG(e.tryLogin(e.formValidationLogin.value))}),n.qZA()(),n.TgZ(9,"div"),n.YNc(10,Z,2,1,"ng-container",7),n.qZA()(),n.TgZ(11,"div",4)(12,"ion-item")(13,"ion-label",5),n._uU(14,"Contrase\xf1a: "),n.qZA(),n.TgZ(15,"ion-input",8),n.NdJ("keyup.enter",function(){n.CHM(t);const e=n.oxw(2);return n.KtG(e.tryLogin(e.formValidationLogin.value))}),n.qZA()(),n.TgZ(16,"div"),n.YNc(17,T,2,1,"ng-container",7),n.qZA()(),n.TgZ(18,"div",9),n.YNc(19,y,2,1,"ion-button",10),n.YNc(20,w,2,1,"ion-button",10),n.qZA(),n.TgZ(21,"div",11)(22,"ion-label",12),n._uU(23),n.qZA()()(),n.TgZ(24,"footer"),n.YNc(25,b,4,0,"div",0),n.YNc(26,M,4,0,"div",0),n.qZA()()}if(2&o){const t=n.oxw(2);n.xp6(1),n.Q6J("formGroup",t.formValidationLogin),n.xp6(1),n.Q6J("ngIf",t.showLogin),n.xp6(1),n.Q6J("ngIf",!t.showLogin),n.xp6(7),n.Q6J("ngForOf",t.formValidationMessages.email),n.xp6(7),n.Q6J("ngForOf",t.formValidationMessages.password),n.xp6(2),n.Q6J("ngIf",t.showLogin),n.xp6(1),n.Q6J("ngIf",!t.showLogin),n.xp6(3),n.Oqu(t.errorMessage),n.xp6(2),n.Q6J("ngIf",t.showLogin),n.xp6(1),n.Q6J("ngIf",!t.showLogin)}}function P(o,a){if(1&o&&(n.TgZ(0,"section"),n.YNc(1,J,27,10,"article",0),n.qZA()),2&o){const t=n.oxw();n.xp6(1),n.Q6J("ngIf",t.formValidationLogin)}}let I=(()=>{class o{constructor(t,i,e){this.authService=t,this.formBuilder=i,this.router=e,this.errorMessage="",this.logged=this.authService.checkLogged(),this.showLogin=!0,this.formValidationMessages={email:[{type:"required",message:"El email es un campo obligatorio."},{type:"pattern",message:"El formato del email no es correcto."}],password:[{type:"required",message:"La contrase\xf1a es un campo obligatorio."},{type:"minlength",message:"La l\xf3ngitud m\xednima de una contrase\xf1a es 6 caracteres."}]}}ngOnInit(){this.getUserData(),this.formValidationLogin=this.formBuilder.group({email:new r.NI("",r.kI.compose([r.kI.required,r.kI.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")])),password:new r.NI("",r.kI.compose([r.kI.minLength(6),r.kI.required]))})}trySignup(t){this.authService.doSignup(t).then(i=>{console.log(i),this.errorMessage="",this.router.navigate(["/"])},i=>{console.log(i),this.errorMessage=i.message})}tryLogin(t){var i=this;return(0,u.Z)(function*(){try{var e;yield i.authService.doLogin(t),null===(e=i.modal)||void 0===e||e.dismiss(null,"confirm")}catch(s){s instanceof p.ZR&&("auth/wrong-password"==s.code&&(i.errorMessage="Contrase\xf1a incorrecta"),"auth/user-not-found"==s.code&&(i.errorMessage="Usuario no encontrado"))}})()}logout(){var t=this;return(0,u.Z)(function*(){try{var i;yield t.authService.doLogout(),null===(i=t.modal)||void 0===i||i.dismiss(null,"confirm")}catch(e){console.log(e)}})()}getUserData(){var t=this;return(0,u.Z)(function*(){t.userData=yield t.authService.getUser().email,console.log(t.userData)})()}toggleLogin(){this.showLogin=!this.showLogin}}return o.\u0275fac=function(t){return new(t||o)(n.Y36(d.e),n.Y36(r.qu),n.Y36(m.F0))},o.\u0275cmp=n.Xpm({type:o,selectors:[["login-form"]],inputs:{modal:"modal"},standalone:!0,features:[n.jDz],decls:2,vars:2,consts:[[4,"ngIf"],[3,"click"],["name","log-out"],[1,"form",3,"formGroup","ngSubmit"],[1,"form-input"],["position","floating","color","primary"],["type","text","aria-label","Email: ","formControlName","email",3,"keyup.enter"],[4,"ngFor","ngForOf"],["type","password","aria-label","Contrase\xf1a: ","formControlName","password",3,"keyup.enter"],[1,"div-button-login"],["type","submit",3,"disabled",4,"ngIf"],[1,"div-label-error"],[1,"error-message"],["class","error-message",4,"ngIf"],["type","submit",3,"disabled"],["href","#",3,"click"]],template:function(t,i){1&t&&(n.YNc(0,h,6,1,"section",0),n.YNc(1,P,2,1,"section",0)),2&t&&(n.Q6J("ngIf",i.logged),n.xp6(1),n.Q6J("ngIf",!i.logged))},dependencies:[g.ez,g.sg,g.O5,r.u5,r._Y,r.JJ,r.JL,l.Pc,l.YG,l.gu,l.pK,l.Ie,l.Q$,l.j9,r.UX,r.sg,r.u],styles:[".form[_ngcontent-%COMP%]{margin-top:50px}.label-title[_ngcontent-%COMP%]{font-weight:500;margin-bottom:20px}.div-button-login[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.div-label-error[_ngcontent-%COMP%]{text-align:center;margin-top:10px}.error-message[_ngcontent-%COMP%]{color:var(--ion-color-danger);font-size:smaller;padding:10px}section[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;align-items:center;height:100%;transform:translateY(-56px)}article[_ngcontent-%COMP%]{min-width:300px;height:300px;display:flex;flex-direction:column;justify-content:space-evenly}footer[_ngcontent-%COMP%]{margin:0 auto}.form-input[_ngcontent-%COMP%]{height:100px}"]}),o})();function k(o,a){if(1&o){const t=n.EpF();n.TgZ(0,"ion-header",9)(1,"ion-toolbar")(2,"ion-buttons",10)(3,"ion-button",6),n.NdJ("click",function(){n.CHM(t);const e=n.oxw();return n.KtG(e.cancel())}),n._UZ(4,"ion-icon",11),n.qZA()()()(),n.TgZ(5,"ion-content"),n._UZ(6,"login-form",12),n.qZA()}if(2&o){const t=n.oxw();n.xp6(6),n.Q6J("modal",t.modal)}}const A=[{path:"",component:(()=>{class o{constructor(t){this.navCtrl=t}ngOnInit(){}search(){this.navCtrl.navigateForward(["tracks"],{queryParams:{s:this.query}})}cancel(){var t;null===(t=this.modal)||void 0===t||t.dismiss(null,"cancel")}confirm(){var t;null===(t=this.modal)||void 0===t||t.dismiss(null,"confirm")}onWillDismiss(t){"confirm"===t.detail.role&&console.log("Confirm")}}return o.\u0275fac=function(t){return new(t||o)(n.Y36(l.SH))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-home"]],viewQuery:function(t,i){if(1&t&&n.Gf(l.ki,5),2&t){let e;n.iGM(e=n.CRH())&&(i.modal=e.first)}},standalone:!0,features:[n.jDz],decls:13,vars:2,consts:[[3,"fullscreen"],["id","open-login","fill","clear",2,"position","absolute","top","0","right","0"],["name","person"],["id","container"],["id","searchBar"],["mode","ios","placeholder","Introduce el nombre de la canci\xf3n",3,"ngModel","keyup.enter","ngModelChange"],[3,"click"],["slot","end","name","search"],["trigger","open-login",3,"willDismiss"],[1,"ion-no-border"],["slot","end"],["slot","icon-only","name","close"],[3,"modal"]],template:function(t,i){1&t&&(n.TgZ(0,"ion-content",0)(1,"ion-button",1),n._UZ(2,"ion-icon",2),n.qZA(),n.TgZ(3,"div",3)(4,"h1"),n._uU(5,"HIGH TRACKS"),n.qZA(),n.TgZ(6,"div",4)(7,"ion-searchbar",5),n.NdJ("keyup.enter",function(){return i.search()})("ngModelChange",function(s){return i.query=s}),n.qZA(),n.TgZ(8,"ion-button",6),n.NdJ("click",function(){return i.search()}),n._UZ(9,"ion-icon",7),n._uU(10," Buscar "),n.qZA()()(),n.TgZ(11,"ion-modal",8),n.NdJ("willDismiss",function(s){return i.onWillDismiss(s)}),n.YNc(12,k,7,1,"ng-template"),n.qZA()()),2&t&&(n.Q6J("fullscreen",!0),n.xp6(7),n.Q6J("ngModel",i.query))},dependencies:[g.ez,r.u5,r.JJ,r.On,l.Pc,l.YG,l.Sm,l.W2,l.Gu,l.gu,l.VI,l.sr,l.ki,l.j9,m.Bz,I],styles:["#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:100px 0;position:relative;left:10%;width:80%;font-size:60px;font-weight:600;color:transparent;-webkit-background-clip:text;background-clip:text;background-image:repeating-radial-gradient(circle closest-corner at 100px 100px,#553c9a,#b393d3 10%,#553c9a 20%)}ion-content[_ngcontent-%COMP%]{display:flex;align-content:center}#searchBar[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:500px;margin:0 auto}#terms-container[_ngcontent-%COMP%]{width:min-content;margin:20px auto}#terms-container[_ngcontent-%COMP%] > ion-label[_ngcontent-%COMP%]{margin:20px}"]}),o})()},{path:"tracks",loadChildren:()=>c.e(721).then(c.bind(c,721)).then(o=>o.routes)}]}}]);